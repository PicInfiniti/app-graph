var Yd=Object.defineProperty;var ns=n=>{throw TypeError(n)};var Vd=(n,e,t)=>e in n?Yd(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Re=(n,e,t)=>Vd(n,typeof e!="symbol"?e+"":e,t),is=(n,e,t)=>e.has(n)||ns("Cannot "+t);var pn=(n,e,t)=>(is(n,e,"read from private field"),t?t.call(n):e.get(n)),os=(n,e,t)=>e.has(n)?ns("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),as=(n,e,t,r)=>(is(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function Tn(n,e){let t=0,r=0;if(e===void 0)for(let o of n)o!=null&&(o=+o)>=o&&(++t,r+=o);else{let o=-1;for(let a of n)(a=e(a,++o,n))!=null&&(a=+a)>=a&&(++t,r+=a)}if(t)return r/t}var Qd={value:()=>{}};function Bn(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new Ln(t)}function Ln(n){this._=n}function Zd(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",o=t.indexOf(".");if(o>=0&&(r=t.slice(o+1),t=t.slice(0,o)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}Ln.prototype=Bn.prototype={constructor:Ln,on:function(n,e){var t=this._,r=Zd(n+"",t),o,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((o=(n=r[a]).type)&&(o=Jd(t[o],n.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(o=(n=r[a]).type)t[o]=ss(t[o],n.name,e);else if(e==null)for(o in t)t[o]=ss(t[o],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Ln(n)},call:function(n,e){if((o=arguments.length-2)>0)for(var t=new Array(o),r=0,o,a;r<o;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(a=this._[n],r=0,o=a.length;r<o;++r)a[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],o=0,a=r.length;o<a;++o)r[o].value.apply(e,t)}};function Jd(n,e){for(var t=0,r=n.length,o;t<r;++t)if((o=n[t]).name===e)return o.value}function ss(n,e,t){for(var r=0,o=n.length;r<o;++r)if(n[r].name===e){n[r]=Qd,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var Xo="http://www.w3.org/1999/xhtml";const us={svg:"http://www.w3.org/2000/svg",xhtml:Xo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Un(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),us.hasOwnProperty(e)?{space:us[e],local:n}:n}function eh(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Xo&&e.documentElement.namespaceURI===Xo?e.createElement(n):e.createElementNS(t,n)}}function th(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function qc(n){var e=Un(n);return(e.local?th:eh)(e)}function rh(){}function na(n){return n==null?rh:function(){return this.querySelector(n)}}function nh(n){typeof n!="function"&&(n=na(n));for(var e=this._groups,t=e.length,r=new Array(t),o=0;o<t;++o)for(var a=e[o],s=a.length,l=r[o]=new Array(s),h,d,p=0;p<s;++p)(h=a[p])&&(d=n.call(h,h.__data__,p,a))&&("__data__"in h&&(d.__data__=h.__data__),l[p]=d);return new nt(r,this._parents)}function ih(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function oh(){return[]}function Fc(n){return n==null?oh:function(){return this.querySelectorAll(n)}}function ah(n){return function(){return ih(n.apply(this,arguments))}}function sh(n){typeof n=="function"?n=ah(n):n=Fc(n);for(var e=this._groups,t=e.length,r=[],o=[],a=0;a<t;++a)for(var s=e[a],l=s.length,h,d=0;d<l;++d)(h=s[d])&&(r.push(n.call(h,h.__data__,d,s)),o.push(h));return new nt(r,o)}function jc(n){return function(){return this.matches(n)}}function Bc(n){return function(e){return e.matches(n)}}var uh=Array.prototype.find;function ch(n){return function(){return uh.call(this.children,n)}}function lh(){return this.firstElementChild}function dh(n){return this.select(n==null?lh:ch(typeof n=="function"?n:Bc(n)))}var hh=Array.prototype.filter;function fh(){return Array.from(this.children)}function ph(n){return function(){return hh.call(this.children,n)}}function gh(n){return this.selectAll(n==null?fh:ph(typeof n=="function"?n:Bc(n)))}function vh(n){typeof n!="function"&&(n=jc(n));for(var e=this._groups,t=e.length,r=new Array(t),o=0;o<t;++o)for(var a=e[o],s=a.length,l=r[o]=[],h,d=0;d<s;++d)(h=a[d])&&n.call(h,h.__data__,d,a)&&l.push(h);return new nt(r,this._parents)}function Uc(n){return new Array(n.length)}function yh(){return new nt(this._enter||this._groups.map(Uc),this._parents)}function Pn(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}Pn.prototype={constructor:Pn,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function mh(n){return function(){return n}}function bh(n,e,t,r,o,a){for(var s=0,l,h=e.length,d=a.length;s<d;++s)(l=e[s])?(l.__data__=a[s],r[s]=l):t[s]=new Pn(n,a[s]);for(;s<h;++s)(l=e[s])&&(o[s]=l)}function wh(n,e,t,r,o,a,s){var l,h,d=new Map,p=e.length,v=a.length,y=new Array(p),b;for(l=0;l<p;++l)(h=e[l])&&(y[l]=b=s.call(h,h.__data__,l,e)+"",d.has(b)?o[l]=h:d.set(b,h));for(l=0;l<v;++l)b=s.call(n,a[l],l,a)+"",(h=d.get(b))?(r[l]=h,h.__data__=a[l],d.delete(b)):t[l]=new Pn(n,a[l]);for(l=0;l<p;++l)(h=e[l])&&d.get(y[l])===h&&(o[l]=h)}function Eh(n){return n.__data__}function xh(n,e){if(!arguments.length)return Array.from(this,Eh);var t=e?wh:bh,r=this._parents,o=this._groups;typeof n!="function"&&(n=mh(n));for(var a=o.length,s=new Array(a),l=new Array(a),h=new Array(a),d=0;d<a;++d){var p=r[d],v=o[d],y=v.length,b=_h(n.call(p,p&&p.__data__,d,r)),_=b.length,S=l[d]=new Array(_),C=s[d]=new Array(_),D=h[d]=new Array(y);t(p,v,S,C,D,b,e);for(var k=0,M=0,x,I;k<_;++k)if(x=S[k]){for(k>=M&&(M=k+1);!(I=C[M])&&++M<_;);x._next=I||null}}return s=new nt(s,r),s._enter=l,s._exit=h,s}function _h(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Sh(){return new nt(this._exit||this._groups.map(Uc),this._parents)}function Ah(n,e,t){var r=this.enter(),o=this,a=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(o=e(o),o&&(o=o.selection())),t==null?a.remove():t(a),r&&o?r.merge(o).order():o}function kh(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,o=t.length,a=r.length,s=Math.min(o,a),l=new Array(o),h=0;h<s;++h)for(var d=t[h],p=r[h],v=d.length,y=l[h]=new Array(v),b,_=0;_<v;++_)(b=d[_]||p[_])&&(y[_]=b);for(;h<o;++h)l[h]=t[h];return new nt(l,this._parents)}function Ch(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],o=r.length-1,a=r[o],s;--o>=0;)(s=r[o])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function Dh(n){n||(n=Nh);function e(v,y){return v&&y?n(v.__data__,y.__data__):!v-!y}for(var t=this._groups,r=t.length,o=new Array(r),a=0;a<r;++a){for(var s=t[a],l=s.length,h=o[a]=new Array(l),d,p=0;p<l;++p)(d=s[p])&&(h[p]=d);h.sort(e)}return new nt(o,this._parents).order()}function Nh(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function Ih(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Mh(){return Array.from(this)}function Lh(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],o=0,a=r.length;o<a;++o){var s=r[o];if(s)return s}return null}function zh(){let n=0;for(const e of this)++n;return n}function $h(){return!this.node()}function Th(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var o=e[t],a=0,s=o.length,l;a<s;++a)(l=o[a])&&n.call(l,l.__data__,a,o);return this}function Ph(n){return function(){this.removeAttribute(n)}}function Oh(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Gh(n,e){return function(){this.setAttribute(n,e)}}function Rh(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function qh(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function Fh(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function jh(n,e){var t=Un(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?Oh:Ph:typeof e=="function"?t.local?Fh:qh:t.local?Rh:Gh)(t,e))}function Hc(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function Bh(n){return function(){this.style.removeProperty(n)}}function Uh(n,e,t){return function(){this.style.setProperty(n,e,t)}}function Hh(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function Wh(n,e,t){return arguments.length>1?this.each((e==null?Bh:typeof e=="function"?Hh:Uh)(n,e,t??"")):xr(this.node(),n)}function xr(n,e){return n.style.getPropertyValue(e)||Hc(n).getComputedStyle(n,null).getPropertyValue(e)}function Kh(n){return function(){delete this[n]}}function Xh(n,e){return function(){this[n]=e}}function Yh(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function Vh(n,e){return arguments.length>1?this.each((e==null?Kh:typeof e=="function"?Yh:Xh)(n,e)):this.node()[n]}function Wc(n){return n.trim().split(/^|\s+/)}function ia(n){return n.classList||new Kc(n)}function Kc(n){this._node=n,this._names=Wc(n.getAttribute("class")||"")}Kc.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function Xc(n,e){for(var t=ia(n),r=-1,o=e.length;++r<o;)t.add(e[r])}function Yc(n,e){for(var t=ia(n),r=-1,o=e.length;++r<o;)t.remove(e[r])}function Qh(n){return function(){Xc(this,n)}}function Zh(n){return function(){Yc(this,n)}}function Jh(n,e){return function(){(e.apply(this,arguments)?Xc:Yc)(this,n)}}function ef(n,e){var t=Wc(n+"");if(arguments.length<2){for(var r=ia(this.node()),o=-1,a=t.length;++o<a;)if(!r.contains(t[o]))return!1;return!0}return this.each((typeof e=="function"?Jh:e?Qh:Zh)(t,e))}function tf(){this.textContent=""}function rf(n){return function(){this.textContent=n}}function nf(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function of(n){return arguments.length?this.each(n==null?tf:(typeof n=="function"?nf:rf)(n)):this.node().textContent}function af(){this.innerHTML=""}function sf(n){return function(){this.innerHTML=n}}function uf(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function cf(n){return arguments.length?this.each(n==null?af:(typeof n=="function"?uf:sf)(n)):this.node().innerHTML}function lf(){this.nextSibling&&this.parentNode.appendChild(this)}function df(){return this.each(lf)}function hf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ff(){return this.each(hf)}function pf(n){var e=typeof n=="function"?n:qc(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function gf(){return null}function vf(n,e){var t=typeof n=="function"?n:qc(n),r=e==null?gf:typeof e=="function"?e:na(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function yf(){var n=this.parentNode;n&&n.removeChild(this)}function mf(){return this.each(yf)}function bf(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function wf(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function Ef(n){return this.select(n?wf:bf)}function xf(n){return arguments.length?this.property("__data__",n):this.node().__data__}function _f(n){return function(e){n.call(this,e,this.__data__)}}function Sf(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function Af(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,o=e.length,a;t<o;++t)a=e[t],(!n.type||a.type===n.type)&&a.name===n.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function kf(n,e,t){return function(){var r=this.__on,o,a=_f(e);if(r){for(var s=0,l=r.length;s<l;++s)if((o=r[s]).type===n.type&&o.name===n.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=t),o.value=e;return}}this.addEventListener(n.type,a,t),o={type:n.type,name:n.name,value:e,listener:a,options:t},r?r.push(o):this.__on=[o]}}function Cf(n,e,t){var r=Sf(n+""),o,a=r.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var h=0,d=l.length,p;h<d;++h)for(o=0,p=l[h];o<a;++o)if((s=r[o]).type===p.type&&s.name===p.name)return p.value}return}for(l=e?kf:Af,o=0;o<a;++o)this.each(l(r[o],e,t));return this}function Vc(n,e,t){var r=Hc(n),o=r.CustomEvent;typeof o=="function"?o=new o(e,t):(o=r.document.createEvent("Event"),t?(o.initEvent(e,t.bubbles,t.cancelable),o.detail=t.detail):o.initEvent(e,!1,!1)),n.dispatchEvent(o)}function Df(n,e){return function(){return Vc(this,n,e)}}function Nf(n,e){return function(){return Vc(this,n,e.apply(this,arguments))}}function If(n,e){return this.each((typeof e=="function"?Nf:Df)(n,e))}function*Mf(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],o=0,a=r.length,s;o<a;++o)(s=r[o])&&(yield s)}var Qc=[null];function nt(n,e){this._groups=n,this._parents=e}function Qr(){return new nt([[document.documentElement]],Qc)}function Lf(){return this}nt.prototype=Qr.prototype={constructor:nt,select:nh,selectAll:sh,selectChild:dh,selectChildren:gh,filter:vh,data:xh,enter:yh,exit:Sh,join:Ah,merge:kh,selection:Lf,order:Ch,sort:Dh,call:Ih,nodes:Mh,node:Lh,size:zh,empty:$h,each:Th,attr:jh,style:Wh,property:Vh,classed:ef,text:of,html:cf,raise:df,lower:ff,append:pf,insert:vf,remove:mf,clone:Ef,datum:xf,on:Cf,dispatch:If,[Symbol.iterator]:Mf};function nr(n){return typeof n=="string"?new nt([[document.querySelector(n)]],[document.documentElement]):new nt([[n]],Qc)}function zf(n){let e;for(;e=n.sourceEvent;)n=e;return n}function ct(n,e){if(n=zf(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[n.clientX-o.left-e.clientLeft,n.clientY-o.top-e.clientTop]}}return[n.pageX,n.pageY]}const $f={passive:!1},Wr={capture:!0,passive:!1};function hi(n){n.stopImmediatePropagation()}function wr(n){n.preventDefault(),n.stopImmediatePropagation()}function Tf(n){var e=n.document.documentElement,t=nr(n).on("dragstart.drag",wr,Wr);"onselectstart"in e?t.on("selectstart.drag",wr,Wr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Pf(n,e){var t=n.document.documentElement,r=nr(n).on("dragstart.drag",null);e&&(r.on("click.drag",wr,Wr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const gn=n=>()=>n;function Yo(n,{sourceEvent:e,subject:t,target:r,identifier:o,active:a,x:s,y:l,dx:h,dy:d,dispatch:p}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:p}})}Yo.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function Of(n){return!n.ctrlKey&&!n.button}function Gf(){return this.parentNode}function Rf(n,e){return e??{x:n.x,y:n.y}}function qf(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ff(){var n=Of,e=Gf,t=Rf,r=qf,o={},a=Bn("start","drag","end"),s=0,l,h,d,p,v=0;function y(x){x.on("mousedown.drag",b).filter(r).on("touchstart.drag",C).on("touchmove.drag",D,$f).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(x,I){if(!(p||!n.call(this,x,I))){var R=M(this,e.call(this,x,I),x,I,"mouse");R&&(nr(x.view).on("mousemove.drag",_,Wr).on("mouseup.drag",S,Wr),Tf(x.view),hi(x),d=!1,l=x.clientX,h=x.clientY,R("start",x))}}function _(x){if(wr(x),!d){var I=x.clientX-l,R=x.clientY-h;d=I*I+R*R>v}o.mouse("drag",x)}function S(x){nr(x.view).on("mousemove.drag mouseup.drag",null),Pf(x.view,d),wr(x),o.mouse("end",x)}function C(x,I){if(n.call(this,x,I)){var R=x.changedTouches,w=e.call(this,x,I),z=R.length,$,T;for($=0;$<z;++$)(T=M(this,w,x,I,R[$].identifier,R[$]))&&(hi(x),T("start",x,R[$]))}}function D(x){var I=x.changedTouches,R=I.length,w,z;for(w=0;w<R;++w)(z=o[I[w].identifier])&&(wr(x),z("drag",x,I[w]))}function k(x){var I=x.changedTouches,R=I.length,w,z;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),w=0;w<R;++w)(z=o[I[w].identifier])&&(hi(x),z("end",x,I[w]))}function M(x,I,R,w,z,$){var T=a.copy(),q=ct($||R,I),U,P,te;if((te=t.call(x,new Yo("beforestart",{sourceEvent:R,target:y,identifier:z,active:s,x:q[0],y:q[1],dx:0,dy:0,dispatch:T}),w))!=null)return U=te.x-q[0]||0,P=te.y-q[1]||0,function J(F,A,B){var H=q,Q;switch(F){case"start":o[z]=J,Q=s++;break;case"end":delete o[z],--s;case"drag":q=ct(B||A,I),Q=s;break}T.call(F,x,new Yo(F,{sourceEvent:A,subject:te,target:y,identifier:z,active:Q,x:q[0]+U,y:q[1]+P,dx:q[0]-H[0],dy:q[1]-H[1],dispatch:T}),w)}}return y.filter=function(x){return arguments.length?(n=typeof x=="function"?x:gn(!!x),y):n},y.container=function(x){return arguments.length?(e=typeof x=="function"?x:gn(x),y):e},y.subject=function(x){return arguments.length?(t=typeof x=="function"?x:gn(x),y):t},y.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:gn(!!x),y):r},y.on=function(){var x=a.on.apply(a,arguments);return x===a?y:x},y.clickDistance=function(x){return arguments.length?(v=(x=+x)*x,y):Math.sqrt(v)},y}function oa(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function Zc(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Zr(){}var Kr=.7,On=1/Kr,Er="\\s*([+-]?\\d+)\\s*",Xr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ct="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jf=/^#([0-9a-f]{3,8})$/,Bf=new RegExp(`^rgb\\(${Er},${Er},${Er}\\)$`),Uf=new RegExp(`^rgb\\(${Ct},${Ct},${Ct}\\)$`),Hf=new RegExp(`^rgba\\(${Er},${Er},${Er},${Xr}\\)$`),Wf=new RegExp(`^rgba\\(${Ct},${Ct},${Ct},${Xr}\\)$`),Kf=new RegExp(`^hsl\\(${Xr},${Ct},${Ct}\\)$`),Xf=new RegExp(`^hsla\\(${Xr},${Ct},${Ct},${Xr}\\)$`),cs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oa(Zr,Yr,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:ls,formatHex:ls,formatHex8:Yf,formatHsl:Vf,formatRgb:ds,toString:ds});function ls(){return this.rgb().formatHex()}function Yf(){return this.rgb().formatHex8()}function Vf(){return Jc(this).formatHsl()}function ds(){return this.rgb().formatRgb()}function Yr(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=jf.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?hs(e):t===3?new Je(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?vn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?vn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Bf.exec(n))?new Je(e[1],e[2],e[3],1):(e=Uf.exec(n))?new Je(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Hf.exec(n))?vn(e[1],e[2],e[3],e[4]):(e=Wf.exec(n))?vn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Kf.exec(n))?gs(e[1],e[2]/100,e[3]/100,1):(e=Xf.exec(n))?gs(e[1],e[2]/100,e[3]/100,e[4]):cs.hasOwnProperty(n)?hs(cs[n]):n==="transparent"?new Je(NaN,NaN,NaN,0):null}function hs(n){return new Je(n>>16&255,n>>8&255,n&255,1)}function vn(n,e,t,r){return r<=0&&(n=e=t=NaN),new Je(n,e,t,r)}function Qf(n){return n instanceof Zr||(n=Yr(n)),n?(n=n.rgb(),new Je(n.r,n.g,n.b,n.opacity)):new Je}function Vo(n,e,t,r){return arguments.length===1?Qf(n):new Je(n,e,t,r??1)}function Je(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}oa(Je,Vo,Zc(Zr,{brighter(n){return n=n==null?On:Math.pow(On,n),new Je(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Kr:Math.pow(Kr,n),new Je(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Je(ir(this.r),ir(this.g),ir(this.b),Gn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fs,formatHex:fs,formatHex8:Zf,formatRgb:ps,toString:ps}));function fs(){return`#${tr(this.r)}${tr(this.g)}${tr(this.b)}`}function Zf(){return`#${tr(this.r)}${tr(this.g)}${tr(this.b)}${tr((isNaN(this.opacity)?1:this.opacity)*255)}`}function ps(){const n=Gn(this.opacity);return`${n===1?"rgb(":"rgba("}${ir(this.r)}, ${ir(this.g)}, ${ir(this.b)}${n===1?")":`, ${n})`}`}function Gn(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ir(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function tr(n){return n=ir(n),(n<16?"0":"")+n.toString(16)}function gs(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new yt(n,e,t,r)}function Jc(n){if(n instanceof yt)return new yt(n.h,n.s,n.l,n.opacity);if(n instanceof Zr||(n=Yr(n)),!n)return new yt;if(n instanceof yt)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,o=Math.min(e,t,r),a=Math.max(e,t,r),s=NaN,l=a-o,h=(a+o)/2;return l?(e===a?s=(t-r)/l+(t<r)*6:t===a?s=(r-e)/l+2:s=(e-t)/l+4,l/=h<.5?a+o:2-a-o,s*=60):l=h>0&&h<1?0:s,new yt(s,l,h,n.opacity)}function Jf(n,e,t,r){return arguments.length===1?Jc(n):new yt(n,e,t,r??1)}function yt(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}oa(yt,Jf,Zc(Zr,{brighter(n){return n=n==null?On:Math.pow(On,n),new yt(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Kr:Math.pow(Kr,n),new yt(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,o=2*t-r;return new Je(fi(n>=240?n-240:n+120,o,r),fi(n,o,r),fi(n<120?n+240:n-120,o,r),this.opacity)},clamp(){return new yt(vs(this.h),yn(this.s),yn(this.l),Gn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Gn(this.opacity);return`${n===1?"hsl(":"hsla("}${vs(this.h)}, ${yn(this.s)*100}%, ${yn(this.l)*100}%${n===1?")":`, ${n})`}`}}));function vs(n){return n=(n||0)%360,n<0?n+360:n}function yn(n){return Math.max(0,Math.min(1,n||0))}function fi(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const el=n=>()=>n;function ep(n,e){return function(t){return n+t*e}}function tp(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function rp(n){return(n=+n)==1?tl:function(e,t){return t-e?tp(e,t,n):el(isNaN(e)?t:e)}}function tl(n,e){var t=e-n;return t?ep(n,t):el(isNaN(n)?e:n)}const ys=function n(e){var t=rp(e);function r(o,a){var s=t((o=Vo(o)).r,(a=Vo(a)).r),l=t(o.g,a.g),h=t(o.b,a.b),d=tl(o.opacity,a.opacity);return function(p){return o.r=s(p),o.g=l(p),o.b=h(p),o.opacity=d(p),o+""}}return r.gamma=n,r}(1);function Wt(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var Qo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pi=new RegExp(Qo.source,"g");function np(n){return function(){return n}}function ip(n){return function(e){return n(e)+""}}function op(n,e){var t=Qo.lastIndex=pi.lastIndex=0,r,o,a,s=-1,l=[],h=[];for(n=n+"",e=e+"";(r=Qo.exec(n))&&(o=pi.exec(e));)(a=o.index)>t&&(a=e.slice(t,a),l[s]?l[s]+=a:l[++s]=a),(r=r[0])===(o=o[0])?l[s]?l[s]+=o:l[++s]=o:(l[++s]=null,h.push({i:s,x:Wt(r,o)})),t=pi.lastIndex;return t<e.length&&(a=e.slice(t),l[s]?l[s]+=a:l[++s]=a),l.length<2?h[0]?ip(h[0].x):np(e):(e=h.length,function(d){for(var p=0,v;p<e;++p)l[(v=h[p]).i]=v.x(d);return l.join("")})}var ms=180/Math.PI,Zo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rl(n,e,t,r,o,a){var s,l,h;return(s=Math.sqrt(n*n+e*e))&&(n/=s,e/=s),(h=n*t+e*r)&&(t-=n*h,r-=e*h),(l=Math.sqrt(t*t+r*r))&&(t/=l,r/=l,h/=l),n*r<e*t&&(n=-n,e=-e,h=-h,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(e,n)*ms,skewX:Math.atan(h)*ms,scaleX:s,scaleY:l}}var mn;function ap(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Zo:rl(e.a,e.b,e.c,e.d,e.e,e.f)}function sp(n){return n==null||(mn||(mn=document.createElementNS("http://www.w3.org/2000/svg","g")),mn.setAttribute("transform",n),!(n=mn.transform.baseVal.consolidate()))?Zo:(n=n.matrix,rl(n.a,n.b,n.c,n.d,n.e,n.f))}function nl(n,e,t,r){function o(d){return d.length?d.pop()+" ":""}function a(d,p,v,y,b,_){if(d!==v||p!==y){var S=b.push("translate(",null,e,null,t);_.push({i:S-4,x:Wt(d,v)},{i:S-2,x:Wt(p,y)})}else(v||y)&&b.push("translate("+v+e+y+t)}function s(d,p,v,y){d!==p?(d-p>180?p+=360:p-d>180&&(d+=360),y.push({i:v.push(o(v)+"rotate(",null,r)-2,x:Wt(d,p)})):p&&v.push(o(v)+"rotate("+p+r)}function l(d,p,v,y){d!==p?y.push({i:v.push(o(v)+"skewX(",null,r)-2,x:Wt(d,p)}):p&&v.push(o(v)+"skewX("+p+r)}function h(d,p,v,y,b,_){if(d!==v||p!==y){var S=b.push(o(b)+"scale(",null,",",null,")");_.push({i:S-4,x:Wt(d,v)},{i:S-2,x:Wt(p,y)})}else(v!==1||y!==1)&&b.push(o(b)+"scale("+v+","+y+")")}return function(d,p){var v=[],y=[];return d=n(d),p=n(p),a(d.translateX,d.translateY,p.translateX,p.translateY,v,y),s(d.rotate,p.rotate,v,y),l(d.skewX,p.skewX,v,y),h(d.scaleX,d.scaleY,p.scaleX,p.scaleY,v,y),d=p=null,function(b){for(var _=-1,S=y.length,C;++_<S;)v[(C=y[_]).i]=C.x(b);return v.join("")}}}var up=nl(ap,"px, ","px)","deg)"),cp=nl(sp,", ",")",")"),_r=0,Fr=0,$r=0,il=1e3,Rn,jr,qn=0,or=0,Hn=0,Vr=typeof performance=="object"&&performance.now?performance:Date,ol=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function aa(){return or||(ol(lp),or=Vr.now()+Hn)}function lp(){or=0}function Fn(){this._call=this._time=this._next=null}Fn.prototype=sa.prototype={constructor:Fn,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?aa():+t)+(e==null?0:+e),!this._next&&jr!==this&&(jr?jr._next=this:Rn=this,jr=this),this._call=n,this._time=t,Jo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jo())}};function sa(n,e,t){var r=new Fn;return r.restart(n,e,t),r}function dp(){aa(),++_r;for(var n=Rn,e;n;)(e=or-n._time)>=0&&n._call.call(void 0,e),n=n._next;--_r}function bs(){or=(qn=Vr.now())+Hn,_r=Fr=0;try{dp()}finally{_r=0,fp(),or=0}}function hp(){var n=Vr.now(),e=n-qn;e>il&&(Hn-=e,qn=n)}function fp(){for(var n,e=Rn,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:Rn=t);jr=n,Jo(r)}function Jo(n){if(!_r){Fr&&(Fr=clearTimeout(Fr));var e=n-or;e>24?(n<1/0&&(Fr=setTimeout(bs,n-Vr.now()-Hn)),$r&&($r=clearInterval($r))):($r||(qn=Vr.now(),$r=setInterval(hp,il)),_r=1,ol(bs))}}function ws(n,e,t){var r=new Fn;return e=e==null?0:+e,r.restart(o=>{r.stop(),n(o+e)},e,t),r}var pp=Bn("start","end","cancel","interrupt"),gp=[],al=0,Es=1,ea=2,zn=3,xs=4,ta=5,$n=6;function Wn(n,e,t,r,o,a){var s=n.__transition;if(!s)n.__transition={};else if(t in s)return;vp(n,t,{name:e,index:r,group:o,on:pp,tween:gp,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:al})}function ua(n,e){var t=mt(n,e);if(t.state>al)throw new Error("too late; already scheduled");return t}function Dt(n,e){var t=mt(n,e);if(t.state>zn)throw new Error("too late; already running");return t}function mt(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function vp(n,e,t){var r=n.__transition,o;r[e]=t,t.timer=sa(a,0,t.time);function a(d){t.state=Es,t.timer.restart(s,t.delay,t.time),t.delay<=d&&s(d-t.delay)}function s(d){var p,v,y,b;if(t.state!==Es)return h();for(p in r)if(b=r[p],b.name===t.name){if(b.state===zn)return ws(s);b.state===xs?(b.state=$n,b.timer.stop(),b.on.call("interrupt",n,n.__data__,b.index,b.group),delete r[p]):+p<e&&(b.state=$n,b.timer.stop(),b.on.call("cancel",n,n.__data__,b.index,b.group),delete r[p])}if(ws(function(){t.state===zn&&(t.state=xs,t.timer.restart(l,t.delay,t.time),l(d))}),t.state=ea,t.on.call("start",n,n.__data__,t.index,t.group),t.state===ea){for(t.state=zn,o=new Array(y=t.tween.length),p=0,v=-1;p<y;++p)(b=t.tween[p].value.call(n,n.__data__,t.index,t.group))&&(o[++v]=b);o.length=v+1}}function l(d){for(var p=d<t.duration?t.ease.call(null,d/t.duration):(t.timer.restart(h),t.state=ta,1),v=-1,y=o.length;++v<y;)o[v].call(n,p);t.state===ta&&(t.on.call("end",n,n.__data__,t.index,t.group),h())}function h(){t.state=$n,t.timer.stop(),delete r[e];for(var d in r)return;delete n.__transition}}function yp(n,e){var t=n.__transition,r,o,a=!0,s;if(t){e=e==null?null:e+"";for(s in t){if((r=t[s]).name!==e){a=!1;continue}o=r.state>ea&&r.state<ta,r.state=$n,r.timer.stop(),r.on.call(o?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[s]}a&&delete n.__transition}}function mp(n){return this.each(function(){yp(this,n)})}function bp(n,e){var t,r;return function(){var o=Dt(this,n),a=o.tween;if(a!==t){r=t=a;for(var s=0,l=r.length;s<l;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function wp(n,e,t){var r,o;if(typeof t!="function")throw new Error;return function(){var a=Dt(this,n),s=a.tween;if(s!==r){o=(r=s).slice();for(var l={name:e,value:t},h=0,d=o.length;h<d;++h)if(o[h].name===e){o[h]=l;break}h===d&&o.push(l)}a.tween=o}}function Ep(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=mt(this.node(),t).tween,o=0,a=r.length,s;o<a;++o)if((s=r[o]).name===n)return s.value;return null}return this.each((e==null?bp:wp)(t,n,e))}function ca(n,e,t){var r=n._id;return n.each(function(){var o=Dt(this,r);(o.value||(o.value={}))[e]=t.apply(this,arguments)}),function(o){return mt(o,r).value[e]}}function sl(n,e){var t;return(typeof e=="number"?Wt:e instanceof Yr?ys:(t=Yr(e))?(e=t,ys):op)(n,e)}function xp(n){return function(){this.removeAttribute(n)}}function _p(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Sp(n,e,t){var r,o=t+"",a;return function(){var s=this.getAttribute(n);return s===o?null:s===r?a:a=e(r=s,t)}}function Ap(n,e,t){var r,o=t+"",a;return function(){var s=this.getAttributeNS(n.space,n.local);return s===o?null:s===r?a:a=e(r=s,t)}}function kp(n,e,t){var r,o,a;return function(){var s,l=t(this),h;return l==null?void this.removeAttribute(n):(s=this.getAttribute(n),h=l+"",s===h?null:s===r&&h===o?a:(o=h,a=e(r=s,l)))}}function Cp(n,e,t){var r,o,a;return function(){var s,l=t(this),h;return l==null?void this.removeAttributeNS(n.space,n.local):(s=this.getAttributeNS(n.space,n.local),h=l+"",s===h?null:s===r&&h===o?a:(o=h,a=e(r=s,l)))}}function Dp(n,e){var t=Un(n),r=t==="transform"?cp:sl;return this.attrTween(n,typeof e=="function"?(t.local?Cp:kp)(t,r,ca(this,"attr."+n,e)):e==null?(t.local?_p:xp)(t):(t.local?Ap:Sp)(t,r,e))}function Np(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function Ip(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function Mp(n,e){var t,r;function o(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&Ip(n,a)),t}return o._value=e,o}function Lp(n,e){var t,r;function o(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&Np(n,a)),t}return o._value=e,o}function zp(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=Un(n);return this.tween(t,(r.local?Mp:Lp)(r,e))}function $p(n,e){return function(){ua(this,n).delay=+e.apply(this,arguments)}}function Tp(n,e){return e=+e,function(){ua(this,n).delay=e}}function Pp(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?$p:Tp)(e,n)):mt(this.node(),e).delay}function Op(n,e){return function(){Dt(this,n).duration=+e.apply(this,arguments)}}function Gp(n,e){return e=+e,function(){Dt(this,n).duration=e}}function Rp(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Op:Gp)(e,n)):mt(this.node(),e).duration}function qp(n,e){if(typeof e!="function")throw new Error;return function(){Dt(this,n).ease=e}}function Fp(n){var e=this._id;return arguments.length?this.each(qp(e,n)):mt(this.node(),e).ease}function jp(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Dt(this,n).ease=t}}function Bp(n){if(typeof n!="function")throw new Error;return this.each(jp(this._id,n))}function Up(n){typeof n!="function"&&(n=jc(n));for(var e=this._groups,t=e.length,r=new Array(t),o=0;o<t;++o)for(var a=e[o],s=a.length,l=r[o]=[],h,d=0;d<s;++d)(h=a[d])&&n.call(h,h.__data__,d,a)&&l.push(h);return new Gt(r,this._parents,this._name,this._id)}function Hp(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,o=t.length,a=Math.min(r,o),s=new Array(r),l=0;l<a;++l)for(var h=e[l],d=t[l],p=h.length,v=s[l]=new Array(p),y,b=0;b<p;++b)(y=h[b]||d[b])&&(v[b]=y);for(;l<r;++l)s[l]=e[l];return new Gt(s,this._parents,this._name,this._id)}function Wp(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function Kp(n,e,t){var r,o,a=Wp(e)?ua:Dt;return function(){var s=a(this,n),l=s.on;l!==r&&(o=(r=l).copy()).on(e,t),s.on=o}}function Xp(n,e){var t=this._id;return arguments.length<2?mt(this.node(),t).on.on(n):this.each(Kp(t,n,e))}function Yp(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function Vp(){return this.on("end.remove",Yp(this._id))}function Qp(n){var e=this._name,t=this._id;typeof n!="function"&&(n=na(n));for(var r=this._groups,o=r.length,a=new Array(o),s=0;s<o;++s)for(var l=r[s],h=l.length,d=a[s]=new Array(h),p,v,y=0;y<h;++y)(p=l[y])&&(v=n.call(p,p.__data__,y,l))&&("__data__"in p&&(v.__data__=p.__data__),d[y]=v,Wn(d[y],e,t,y,d,mt(p,t)));return new Gt(a,this._parents,e,t)}function Zp(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Fc(n));for(var r=this._groups,o=r.length,a=[],s=[],l=0;l<o;++l)for(var h=r[l],d=h.length,p,v=0;v<d;++v)if(p=h[v]){for(var y=n.call(p,p.__data__,v,h),b,_=mt(p,t),S=0,C=y.length;S<C;++S)(b=y[S])&&Wn(b,e,t,S,y,_);a.push(y),s.push(p)}return new Gt(a,s,e,t)}var Jp=Qr.prototype.constructor;function eg(){return new Jp(this._groups,this._parents)}function tg(n,e){var t,r,o;return function(){var a=xr(this,n),s=(this.style.removeProperty(n),xr(this,n));return a===s?null:a===t&&s===r?o:o=e(t=a,r=s)}}function ul(n){return function(){this.style.removeProperty(n)}}function rg(n,e,t){var r,o=t+"",a;return function(){var s=xr(this,n);return s===o?null:s===r?a:a=e(r=s,t)}}function ng(n,e,t){var r,o,a;return function(){var s=xr(this,n),l=t(this),h=l+"";return l==null&&(h=l=(this.style.removeProperty(n),xr(this,n))),s===h?null:s===r&&h===o?a:(o=h,a=e(r=s,l))}}function ig(n,e){var t,r,o,a="style."+e,s="end."+a,l;return function(){var h=Dt(this,n),d=h.on,p=h.value[a]==null?l||(l=ul(e)):void 0;(d!==t||o!==p)&&(r=(t=d).copy()).on(s,o=p),h.on=r}}function og(n,e,t){var r=(n+="")=="transform"?up:sl;return e==null?this.styleTween(n,tg(n,r)).on("end.style."+n,ul(n)):typeof e=="function"?this.styleTween(n,ng(n,r,ca(this,"style."+n,e))).each(ig(this._id,n)):this.styleTween(n,rg(n,r,e),t).on("end.style."+n,null)}function ag(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function sg(n,e,t){var r,o;function a(){var s=e.apply(this,arguments);return s!==o&&(r=(o=s)&&ag(n,s,t)),r}return a._value=e,a}function ug(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,sg(n,e,t??""))}function cg(n){return function(){this.textContent=n}}function lg(n){return function(){var e=n(this);this.textContent=e??""}}function dg(n){return this.tween("text",typeof n=="function"?lg(ca(this,"text",n)):cg(n==null?"":n+""))}function hg(n){return function(e){this.textContent=n.call(this,e)}}function fg(n){var e,t;function r(){var o=n.apply(this,arguments);return o!==t&&(e=(t=o)&&hg(o)),e}return r._value=n,r}function pg(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,fg(n))}function gg(){for(var n=this._name,e=this._id,t=cl(),r=this._groups,o=r.length,a=0;a<o;++a)for(var s=r[a],l=s.length,h,d=0;d<l;++d)if(h=s[d]){var p=mt(h,e);Wn(h,n,t,d,s,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Gt(r,this._parents,n,t)}function vg(){var n,e,t=this,r=t._id,o=t.size();return new Promise(function(a,s){var l={value:s},h={value:function(){--o===0&&a()}};t.each(function(){var d=Dt(this,r),p=d.on;p!==n&&(e=(n=p).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(h)),d.on=e}),o===0&&a()})}var yg=0;function Gt(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function cl(){return++yg}var $t=Qr.prototype;Gt.prototype={constructor:Gt,select:Qp,selectAll:Zp,selectChild:$t.selectChild,selectChildren:$t.selectChildren,filter:Up,merge:Hp,selection:eg,transition:gg,call:$t.call,nodes:$t.nodes,node:$t.node,size:$t.size,empty:$t.empty,each:$t.each,on:Xp,attr:Dp,attrTween:zp,style:og,styleTween:ug,text:dg,textTween:pg,remove:Vp,tween:Ep,delay:Pp,duration:Rp,ease:Fp,easeVarying:Bp,end:vg,[Symbol.iterator]:$t[Symbol.iterator]};function mg(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var bg={time:null,delay:0,duration:250,ease:mg};function wg(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function Eg(n){var e,t;n instanceof Gt?(e=n._id,n=n._name):(e=cl(),(t=bg).time=aa(),n=n==null?null:n+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var s=r[a],l=s.length,h,d=0;d<l;++d)(h=s[d])&&Wn(h,n,e,d,s,t||wg(h,e));return new Gt(r,this._parents,n,e)}Qr.prototype.interrupt=mp;Qr.prototype.transition=Eg;function xg(n,e){var t,r=1;n==null&&(n=0),e==null&&(e=0);function o(){var a,s=t.length,l,h=0,d=0;for(a=0;a<s;++a)l=t[a],h+=l.x,d+=l.y;for(h=(h/s-n)*r,d=(d/s-e)*r,a=0;a<s;++a)l=t[a],l.x-=h,l.y-=d}return o.initialize=function(a){t=a},o.x=function(a){return arguments.length?(n=+a,o):n},o.y=function(a){return arguments.length?(e=+a,o):e},o.strength=function(a){return arguments.length?(r=+a,o):r},o}function _g(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return ll(this.cover(e,t),e,t,n)}function ll(n,e,t,r){if(isNaN(e)||isNaN(t))return n;var o,a=n._root,s={data:r},l=n._x0,h=n._y0,d=n._x1,p=n._y1,v,y,b,_,S,C,D,k;if(!a)return n._root=s,n;for(;a.length;)if((S=e>=(v=(l+d)/2))?l=v:d=v,(C=t>=(y=(h+p)/2))?h=y:p=y,o=a,!(a=a[D=C<<1|S]))return o[D]=s,n;if(b=+n._x.call(null,a.data),_=+n._y.call(null,a.data),e===b&&t===_)return s.next=a,o?o[D]=s:n._root=s,n;do o=o?o[D]=new Array(4):n._root=new Array(4),(S=e>=(v=(l+d)/2))?l=v:d=v,(C=t>=(y=(h+p)/2))?h=y:p=y;while((D=C<<1|S)===(k=(_>=y)<<1|b>=v));return o[k]=a,o[D]=s,n}function Sg(n){var e,t,r=n.length,o,a,s=new Array(r),l=new Array(r),h=1/0,d=1/0,p=-1/0,v=-1/0;for(t=0;t<r;++t)isNaN(o=+this._x.call(null,e=n[t]))||isNaN(a=+this._y.call(null,e))||(s[t]=o,l[t]=a,o<h&&(h=o),o>p&&(p=o),a<d&&(d=a),a>v&&(v=a));if(h>p||d>v)return this;for(this.cover(h,d).cover(p,v),t=0;t<r;++t)ll(this,s[t],l[t],n[t]);return this}function Ag(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,o=this._x1,a=this._y1;if(isNaN(t))o=(t=Math.floor(n))+1,a=(r=Math.floor(e))+1;else{for(var s=o-t||1,l=this._root,h,d;t>n||n>=o||r>e||e>=a;)switch(d=(e<r)<<1|n<t,h=new Array(4),h[d]=l,l=h,s*=2,d){case 0:o=t+s,a=r+s;break;case 1:t=o-s,a=r+s;break;case 2:o=t+s,r=a-s;break;case 3:t=o-s,r=a-s;break}this._root&&this._root.length&&(this._root=l)}return this._x0=t,this._y0=r,this._x1=o,this._y1=a,this}function kg(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Cg(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ke(n,e,t,r,o){this.node=n,this.x0=e,this.y0=t,this.x1=r,this.y1=o}function Dg(n,e,t){var r,o=this._x0,a=this._y0,s,l,h,d,p=this._x1,v=this._y1,y=[],b=this._root,_,S;for(b&&y.push(new Ke(b,o,a,p,v)),t==null?t=1/0:(o=n-t,a=e-t,p=n+t,v=e+t,t*=t);_=y.pop();)if(!(!(b=_.node)||(s=_.x0)>p||(l=_.y0)>v||(h=_.x1)<o||(d=_.y1)<a))if(b.length){var C=(s+h)/2,D=(l+d)/2;y.push(new Ke(b[3],C,D,h,d),new Ke(b[2],s,D,C,d),new Ke(b[1],C,l,h,D),new Ke(b[0],s,l,C,D)),(S=(e>=D)<<1|n>=C)&&(_=y[y.length-1],y[y.length-1]=y[y.length-1-S],y[y.length-1-S]=_)}else{var k=n-+this._x.call(null,b.data),M=e-+this._y.call(null,b.data),x=k*k+M*M;if(x<t){var I=Math.sqrt(t=x);o=n-I,a=e-I,p=n+I,v=e+I,r=b.data}}return r}function Ng(n){if(isNaN(p=+this._x.call(null,n))||isNaN(v=+this._y.call(null,n)))return this;var e,t=this._root,r,o,a,s=this._x0,l=this._y0,h=this._x1,d=this._y1,p,v,y,b,_,S,C,D;if(!t)return this;if(t.length)for(;;){if((_=p>=(y=(s+h)/2))?s=y:h=y,(S=v>=(b=(l+d)/2))?l=b:d=b,e=t,!(t=t[C=S<<1|_]))return this;if(!t.length)break;(e[C+1&3]||e[C+2&3]||e[C+3&3])&&(r=e,D=C)}for(;t.data!==n;)if(o=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,o?(a?o.next=a:delete o.next,this):e?(a?e[C]=a:delete e[C],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[D]=t:this._root=t),this):(this._root=a,this)}function Ig(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function Mg(){return this._root}function Lg(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function zg(n){var e=[],t,r=this._root,o,a,s,l,h;for(r&&e.push(new Ke(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(r=t.node,a=t.x0,s=t.y0,l=t.x1,h=t.y1)&&r.length){var d=(a+l)/2,p=(s+h)/2;(o=r[3])&&e.push(new Ke(o,d,p,l,h)),(o=r[2])&&e.push(new Ke(o,a,p,d,h)),(o=r[1])&&e.push(new Ke(o,d,s,l,p)),(o=r[0])&&e.push(new Ke(o,a,s,d,p))}return this}function $g(n){var e=[],t=[],r;for(this._root&&e.push(new Ke(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var o=r.node;if(o.length){var a,s=r.x0,l=r.y0,h=r.x1,d=r.y1,p=(s+h)/2,v=(l+d)/2;(a=o[0])&&e.push(new Ke(a,s,l,p,v)),(a=o[1])&&e.push(new Ke(a,p,l,h,v)),(a=o[2])&&e.push(new Ke(a,s,v,p,d)),(a=o[3])&&e.push(new Ke(a,p,v,h,d))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Tg(n){return n[0]}function Pg(n){return arguments.length?(this._x=n,this):this._x}function Og(n){return n[1]}function Gg(n){return arguments.length?(this._y=n,this):this._y}function la(n,e,t){var r=new da(e??Tg,t??Og,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function da(n,e,t,r,o,a){this._x=n,this._y=e,this._x0=t,this._y0=r,this._x1=o,this._y1=a,this._root=void 0}function _s(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var Ye=la.prototype=da.prototype;Ye.copy=function(){var n=new da(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=_s(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var o=0;o<4;++o)(r=e.source[o])&&(r.length?t.push({source:r,target:e.target[o]=new Array(4)}):e.target[o]=_s(r));return n};Ye.add=_g;Ye.addAll=Sg;Ye.cover=Ag;Ye.data=kg;Ye.extent=Cg;Ye.find=Dg;Ye.remove=Ng;Ye.removeAll=Ig;Ye.root=Mg;Ye.size=Lg;Ye.visit=zg;Ye.visitAfter=$g;Ye.x=Pg;Ye.y=Gg;function Xe(n){return function(){return n}}function Kt(n){return(n()-.5)*1e-6}function Rg(n){return n.x+n.vx}function qg(n){return n.y+n.vy}function Fg(n){var e,t,r,o=1,a=1;typeof n!="function"&&(n=Xe(n==null?1:+n));function s(){for(var d,p=e.length,v,y,b,_,S,C,D=0;D<a;++D)for(v=la(e,Rg,qg).visitAfter(l),d=0;d<p;++d)y=e[d],S=t[y.index],C=S*S,b=y.x+y.vx,_=y.y+y.vy,v.visit(k);function k(M,x,I,R,w){var z=M.data,$=M.r,T=S+$;if(z){if(z.index>y.index){var q=b-z.x-z.vx,U=_-z.y-z.vy,P=q*q+U*U;P<T*T&&(q===0&&(q=Kt(r),P+=q*q),U===0&&(U=Kt(r),P+=U*U),P=(T-(P=Math.sqrt(P)))/P*o,y.vx+=(q*=P)*(T=($*=$)/(C+$)),y.vy+=(U*=P)*T,z.vx-=q*(T=1-T),z.vy-=U*T)}return}return x>b+T||R<b-T||I>_+T||w<_-T}}function l(d){if(d.data)return d.r=t[d.data.index];for(var p=d.r=0;p<4;++p)d[p]&&d[p].r>d.r&&(d.r=d[p].r)}function h(){if(e){var d,p=e.length,v;for(t=new Array(p),d=0;d<p;++d)v=e[d],t[v.index]=+n(v,d,e)}}return s.initialize=function(d,p){e=d,r=p,h()},s.iterations=function(d){return arguments.length?(a=+d,s):a},s.strength=function(d){return arguments.length?(o=+d,s):o},s.radius=function(d){return arguments.length?(n=typeof d=="function"?d:Xe(+d),h(),s):n},s}function jg(n){return n.index}function Ss(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function Bg(n){var e=jg,t=v,r,o=Xe(30),a,s,l,h,d,p=1;n==null&&(n=[]);function v(C){return 1/Math.min(l[C.source.index],l[C.target.index])}function y(C){for(var D=0,k=n.length;D<p;++D)for(var M=0,x,I,R,w,z,$,T;M<k;++M)x=n[M],I=x.source,R=x.target,w=R.x+R.vx-I.x-I.vx||Kt(d),z=R.y+R.vy-I.y-I.vy||Kt(d),$=Math.sqrt(w*w+z*z),$=($-a[M])/$*C*r[M],w*=$,z*=$,R.vx-=w*(T=h[M]),R.vy-=z*T,I.vx+=w*(T=1-T),I.vy+=z*T}function b(){if(s){var C,D=s.length,k=n.length,M=new Map(s.map((I,R)=>[e(I,R,s),I])),x;for(C=0,l=new Array(D);C<k;++C)x=n[C],x.index=C,typeof x.source!="object"&&(x.source=Ss(M,x.source)),typeof x.target!="object"&&(x.target=Ss(M,x.target)),l[x.source.index]=(l[x.source.index]||0)+1,l[x.target.index]=(l[x.target.index]||0)+1;for(C=0,h=new Array(k);C<k;++C)x=n[C],h[C]=l[x.source.index]/(l[x.source.index]+l[x.target.index]);r=new Array(k),_(),a=new Array(k),S()}}function _(){if(s)for(var C=0,D=n.length;C<D;++C)r[C]=+t(n[C],C,n)}function S(){if(s)for(var C=0,D=n.length;C<D;++C)a[C]=+o(n[C],C,n)}return y.initialize=function(C,D){s=C,d=D,b()},y.links=function(C){return arguments.length?(n=C,b(),y):n},y.id=function(C){return arguments.length?(e=C,y):e},y.iterations=function(C){return arguments.length?(p=+C,y):p},y.strength=function(C){return arguments.length?(t=typeof C=="function"?C:Xe(+C),_(),y):t},y.distance=function(C){return arguments.length?(o=typeof C=="function"?C:Xe(+C),S(),y):o},y}const Ug=1664525,Hg=1013904223,As=4294967296;function Wg(){let n=1;return()=>(n=(Ug*n+Hg)%As)/As}function Kg(n){return n.x}function Xg(n){return n.y}var Yg=10,Vg=Math.PI*(3-Math.sqrt(5));function Qg(n){var e,t=1,r=.001,o=1-Math.pow(r,1/300),a=0,s=.6,l=new Map,h=sa(v),d=Bn("tick","end"),p=Wg();n==null&&(n=[]);function v(){y(),d.call("tick",e),t<r&&(h.stop(),d.call("end",e))}function y(S){var C,D=n.length,k;S===void 0&&(S=1);for(var M=0;M<S;++M)for(t+=(a-t)*o,l.forEach(function(x){x(t)}),C=0;C<D;++C)k=n[C],k.fx==null?k.x+=k.vx*=s:(k.x=k.fx,k.vx=0),k.fy==null?k.y+=k.vy*=s:(k.y=k.fy,k.vy=0);return e}function b(){for(var S=0,C=n.length,D;S<C;++S){if(D=n[S],D.index=S,D.fx!=null&&(D.x=D.fx),D.fy!=null&&(D.y=D.fy),isNaN(D.x)||isNaN(D.y)){var k=Yg*Math.sqrt(.5+S),M=S*Vg;D.x=k*Math.cos(M),D.y=k*Math.sin(M)}(isNaN(D.vx)||isNaN(D.vy))&&(D.vx=D.vy=0)}}function _(S){return S.initialize&&S.initialize(n,p),S}return b(),e={tick:y,restart:function(){return h.restart(v),e},stop:function(){return h.stop(),e},nodes:function(S){return arguments.length?(n=S,b(),l.forEach(_),e):n},alpha:function(S){return arguments.length?(t=+S,e):t},alphaMin:function(S){return arguments.length?(r=+S,e):r},alphaDecay:function(S){return arguments.length?(o=+S,e):+o},alphaTarget:function(S){return arguments.length?(a=+S,e):a},velocityDecay:function(S){return arguments.length?(s=1-S,e):1-s},randomSource:function(S){return arguments.length?(p=S,l.forEach(_),e):p},force:function(S,C){return arguments.length>1?(C==null?l.delete(S):l.set(S,_(C)),e):l.get(S)},find:function(S,C,D){var k=0,M=n.length,x,I,R,w,z;for(D==null?D=1/0:D*=D,k=0;k<M;++k)w=n[k],x=S-w.x,I=C-w.y,R=x*x+I*I,R<D&&(z=w,D=R);return z},on:function(S,C){return arguments.length>1?(d.on(S,C),e):d.on(S)}}}function Zg(){var n,e,t,r,o=Xe(-30),a,s=1,l=1/0,h=.81;function d(b){var _,S=n.length,C=la(n,Kg,Xg).visitAfter(v);for(r=b,_=0;_<S;++_)e=n[_],C.visit(y)}function p(){if(n){var b,_=n.length,S;for(a=new Array(_),b=0;b<_;++b)S=n[b],a[S.index]=+o(S,b,n)}}function v(b){var _=0,S,C,D=0,k,M,x;if(b.length){for(k=M=x=0;x<4;++x)(S=b[x])&&(C=Math.abs(S.value))&&(_+=S.value,D+=C,k+=C*S.x,M+=C*S.y);b.x=k/D,b.y=M/D}else{S=b,S.x=S.data.x,S.y=S.data.y;do _+=a[S.data.index];while(S=S.next)}b.value=_}function y(b,_,S,C){if(!b.value)return!0;var D=b.x-e.x,k=b.y-e.y,M=C-_,x=D*D+k*k;if(M*M/h<x)return x<l&&(D===0&&(D=Kt(t),x+=D*D),k===0&&(k=Kt(t),x+=k*k),x<s&&(x=Math.sqrt(s*x)),e.vx+=D*b.value*r/x,e.vy+=k*b.value*r/x),!0;if(b.length||x>=l)return;(b.data!==e||b.next)&&(D===0&&(D=Kt(t),x+=D*D),k===0&&(k=Kt(t),x+=k*k),x<s&&(x=Math.sqrt(s*x)));do b.data!==e&&(M=a[b.data.index]*r/x,e.vx+=D*M,e.vy+=k*M);while(b=b.next)}return d.initialize=function(b,_){n=b,t=_,p()},d.strength=function(b){return arguments.length?(o=typeof b=="function"?b:Xe(+b),p(),d):o},d.distanceMin=function(b){return arguments.length?(s=b*b,d):Math.sqrt(s)},d.distanceMax=function(b){return arguments.length?(l=b*b,d):Math.sqrt(l)},d.theta=function(b){return arguments.length?(h=b*b,d):Math.sqrt(h)},d}function Jg(n){var e=Xe(.1),t,r,o;typeof n!="function"&&(n=Xe(n==null?0:+n));function a(l){for(var h=0,d=t.length,p;h<d;++h)p=t[h],p.vx+=(o[h]-p.x)*r[h]*l}function s(){if(t){var l,h=t.length;for(r=new Array(h),o=new Array(h),l=0;l<h;++l)r[l]=isNaN(o[l]=+n(t[l],l,t))?0:+e(t[l],l,t)}}return a.initialize=function(l){t=l,s()},a.strength=function(l){return arguments.length?(e=typeof l=="function"?l:Xe(+l),s(),a):e},a.x=function(l){return arguments.length?(n=typeof l=="function"?l:Xe(+l),s(),a):n},a}function ev(n){var e=Xe(.1),t,r,o;typeof n!="function"&&(n=Xe(n==null?0:+n));function a(l){for(var h=0,d=t.length,p;h<d;++h)p=t[h],p.vy+=(o[h]-p.y)*r[h]*l}function s(){if(t){var l,h=t.length;for(r=new Array(h),o=new Array(h),l=0;l<h;++l)r[l]=isNaN(o[l]=+n(t[l],l,t))?0:+e(t[l],l,t)}}return a.initialize=function(l){t=l,s()},a.strength=function(l){return arguments.length?(e=typeof l=="function"?l:Xe(+l),s(),a):e},a.y=function(l){return arguments.length?(n=typeof l=="function"?l:Xe(+l),s(),a):n},a}function Br(n,e,t){this.k=n,this.x=e,this.y=t}Br.prototype={constructor:Br,scale:function(n){return n===1?this:new Br(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Br(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Br.prototype;const tv={listeners:new Map,emit(n,e={}){document.dispatchEvent(new CustomEvent(n,{detail:e}))},on(n,e){if(typeof e!="function"){console.warn(`EventBus: Tried to register a non-function listener for event: ${n}`);return}this.listeners.has(n)||this.listeners.set(n,new Set);const t=this.listeners.get(n);if(t.has(e)){console.warn(`EventBus: Listener for event "${n}" is already registered.`);return}document.addEventListener(n,e),t.add(e)},off(n,e){if(!this.listeners.has(n)){console.warn(`EventBus: Attempted to remove a listener from a non-existent event: ${n}`);return}const t=this.listeners.get(n);if(!t.has(e)){console.warn(`EventBus: Attempted to remove a non-existent listener from event: ${n}`);return}document.removeEventListener(n,e),t.delete(e),t.size===0&&this.listeners.delete(n)},removeAll(n){if(!this.listeners.has(n)){console.warn(`EventBus: Attempted to remove all listeners from a non-existent event: ${n}`);return}this.listeners.get(n).forEach(e=>{document.removeEventListener(n,e)}),this.listeners.delete(n)}};function gi(n){const e=new Set(n.map(Number));let t=0;for(;e.has(t);)t++;return t}function Hr(n,e=3){const t="abcdefghijklmnopqrstuvwxyz",r=[];function o(s,l,h){if(h===0){r.push(s);return}for(let d=l;d<t.length;d++)if(o(s+t[d],d+1,h-1),r.length>n)return}let a=1;for(;r.length<=n&&a<=e;)o("",0,a),a++;return r[n]||null}function rv(n,e,t,r,o,a){let s=n-t,l=e-r,h=o-t,d=a-r,p=s*h+l*d,v=h*h+d*d,y=v!==0?p/v:-1,b,_;y<0?(b=t,_=r):y>1?(b=o,_=a):(b=t+y*h,_=r+y*d);let S=n-b,C=e-_;return Math.sqrt(S*S+C*C)}function bn(n,e){return(n%e+e)%e}const Le=document;function nv(n,e){Le.querySelector(".container").classList.toggle("grid-hidden",n.grid<=2),Le.getElementById("grid-size-1").value=n.node_radius,Le.getElementById("vertex-size-1").value=n.node_radius,Le.getElementById("edge-size-1").value=n.edge_size,Le.getElementById("label-size-1").value=n.label_size,Le.getElementById("history-limit-1").value=n.historyLimit,Le.querySelector("#vertex-label .check").classList.toggle("hidden",!n.vertexLabel),Le.querySelector("#edge-label .check").classList.toggle("hidden",!n.edgeLabel),Le.querySelector("#face-label .check").classList.toggle("hidden",!n.faceLabel),Le.querySelector("#weight-label .check").classList.toggle("hidden",!n.weightLabel),Le.querySelector("#save-history .check").classList.toggle("hidden",!n.saveHistory),Le.querySelector("#component").classList.toggle("gray-background",!n.component),Le.querySelector("#scale").classList.toggle("gray-background",!n.scale),Le.querySelector("#tree").classList.toggle("gray-background",!n.tree),Le.querySelector("#force").classList.toggle("gray-background",!n.forceSimulation),Le.querySelector("#colorPicker").classList.toggle("gray-background",!n.colorPicker),Le.querySelector("#panning").classList.toggle("gray-background",!n.panning),Le.querySelector("#select").classList.toggle("gray-background",!n.select),e.style.cursor=n.panning?"move":"default";const t=Le.documentElement;Le.querySelector(".container").classList.toggle("grid-hidden",n.grid<=2),t.style.setProperty("--grid-size",`${n.grid}px`),t.style.setProperty("--grid-color",n.grid_color),Le.querySelector(".container").style.backgroundColor=n.background_color}class iv{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.appSettings.settings,this.canvas=nr("#chart").node(),this.ctx=this.canvas.getContext("2d"),this.mouse={x:0,y:0,dragging:!1}}init(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.canvas.addEventListener("dblclick",this.handleDbclick.bind(this)),this.canvas.addEventListener("click",this.handleclick.bind(this));let e=0;this.canvas.addEventListener("touchend",t=>{const r=new Date().getTime(),o=r-e;o<300&&o>0&&this.handleDbclick(t),e=r}),nr("canvas").on("mousedown",t=>{this.mouse.dragging=!1,[this.mouse.x,this.mouse.y]=ct(t)}).on("mousemove",t=>{const[r,o]=ct(t);(Math.abs(r-this.mouse.x)>2||Math.abs(o-this.mouse.y)>2)&&(this.mouse.dragging=!0)}).on("mouseup",t=>{this.mouse.dragging||([this.mouse.x,this.mouse.y]=ct(t))}),nr(this.canvas).call(Ff().container(this.canvas).subject(this.dragsubject.bind(this)).filter(t=>!(this.settings.scale||this.settings.select)).on("start",this.dragstarted.bind(this)).on("drag",this.dragged.bind(this)).on("end",this.dragended.bind(this)))}addNodeAtEvent(e){e.preventDefault();const[t,r]=e.type=="touchend"?ks(e,this.canvas):ct(e,this.canvas),o=gi(this.app.graphManager.graph.nodes()),a=Hr(o);this.app.graphManager.addNode(o,{x:t,y:r,color:this.settings.node_color,label:a})}addNodeConnectedToNode(e){const t=gi(this.app.graphManager.graph.nodes()),r=Hr(t),o={x:e.x+30,y:e.y+30,color:this.settings.node_color,label:r};this.app.graphManager.addNode(t,o),this.app.graphManager.graph.addEdge(e.id,t),this.eventBus.emit("graph:updated",{type:"addNode",node:t})}dragsubject(e){let t={id:null},r=1/0;return this.app.nodes.forEach(o=>{const a=e.x-o.x,s=e.y-o.y,l=Math.sqrt(a*a+s*s);l<this.settings.node_radius*o.size&&l<r&&(r=l,t=o)}),t&&(this.settings.component?t.component=this.app.graphManager.metric.getComponent(t.id):t.component=this.app.graphManager.graph.getSelectedNodes()),this.settings.panning&&(t.component=this.app.graphManager.graph.nodes()),t}dragstarted(e){!e.active&&this.settings.forceSimulation&&this.app.simulation.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y,e.subject.__moved=!1}dragged(e){if(e.subject.fx=e.x,e.subject.fy=e.y,(e.dx!==0||e.dy!==0)&&(e.subject.__moved=!0),!this.settings.forceSimulation&&e.subject.component){for(let t of e.subject.component)this.app.graphManager.graph.updateNodeAttributes(t,r=>({...r,x:r.x+e.dx,y:r.y+e.dy}));e.subject.id!==null&&this.app.graphManager.graph.updateNodeAttributes(e.subject.id,t=>({...t,x:e.x,y:e.y}))}}dragended(e){e.active||this.app.simulation.alphaTarget(0),e.subject.fx=null,e.subject.fy=null,e.subject.x=e.x,e.subject.y=e.y,this.settings.forceSimulation||this.app.updateSimulation(),e.subject.__moved&&e.subject.id&&!this.settings.forceSimulation&&this.app.graphManager.saveGraphState()}findClickedNode(e,t){return this.app.nodes.find(r=>{let o=e-r.x,a=t-r.y;return Math.sqrt(o*o+a*a)<this.settings.node_radius*r.size})}findClickedEdge(e,t){let r=10;return this.app.links.find(o=>{let a=o.source,s=o.target;return rv(e,t,a.x,a.y,s.x,s.y)<r})}insertNodeInEdge(e){const t=gi(this.app.graphManager.graph.nodes()),r=Hr(t);let o=(e.source.x+e.target.x)/2,a=(e.source.y+e.target.y)/2;this.app.graphManager.graph.addNode(t,{x:o,y:a,color:this.settings.color,label:r}),this.app.graphManager.graph.dropEdge(e.source.id,e.target.id),this.app.graphManager.graph.addEdge(e.source.id,t),this.app.graphManager.graph.addEdge(t,e.target.id),this.eventBus.emit("graph:updated",{type:"addNodeInEdge",node:t})}handleDbclick(e){const[t,r]=e.type=="touchend"?ks(e,this.canvas):ct(e,this.canvas);let o=this.findClickedNode(t,r),a=this.findClickedEdge(t,r);o?this.settings.tree?this.addNodeConnectedToNode(o):this.app.graphManager.graph.toggleNodeSelection(o.id):a?this.settings.tree?this.insertNodeInEdge(a):this.app.graphManager.graph.findEdge(a.source.id,a.target.id,s=>{this.app.graphManager.graph.toggleEdgeSelection(s)}):this.addNodeAtEvent(e)}handleclick(e){if(this.mouse.dragging)return;let[t,r]=ct(e,this.canvas),o=this.findClickedNode(t,r),a=this.findClickedEdge(t,r);o?this.settings.select?(this.app.graphManager.graph.toggleNodeSelection(o.id),this.settings.forceSimulation||this.eventBus.emit("graph:updated",{type:"selected"})):(this.app.graphManager.metric.addNodeInfo(o),this.settings.colorPicker&&(this.app.colorPicker.setColor("node",o.color),this.app.colorPicker.setColor("stroke",o.stroke),this.app.colorPicker.setColor("label",o.labelColor))):a?this.settings.select?this.app.graphManager.graph.findEdge(a.source.id,a.target.id,s=>{this.app.graphManager.graph.toggleEdgeSelection(s),this.settings.forceSimulation||this.eventBus.emit("graph:updated",{type:"selected"})}):(this.app.graphManager.metric.addEdgeInfo(a),this.settings.colorPicker&&(this.app.colorPicker.setColor("edge",a.color),this.app.colorPicker.setColor("label",a.labelColor))):(this.app.graphManager.deselectAll(),this.app.rect.scale.active=!1)}}function ks(n,e){const t=n.changedTouches[0],r=e.getBoundingClientRect();return[t.clientX-r.left,t.clientY-r.top]}function Ve(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wn={exports:{}},Cs;function ov(){if(Cs)return wn.exports;Cs=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(I,R,w){return Function.prototype.apply.call(I,R,w)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:t=function(I){return Object.getOwnPropertyNames(I)};function r(x){console&&console.warn&&console.warn(x)}var o=Number.isNaN||function(I){return I!==I};function a(){a.init.call(this)}wn.exports=a,wn.exports.once=D,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function l(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(x){if(typeof x!="number"||x<0||o(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");s=x}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(I){if(typeof I!="number"||I<0||o(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this};function h(x){return x._maxListeners===void 0?a.defaultMaxListeners:x._maxListeners}a.prototype.getMaxListeners=function(){return h(this)},a.prototype.emit=function(I){for(var R=[],w=1;w<arguments.length;w++)R.push(arguments[w]);var z=I==="error",$=this._events;if($!==void 0)z=z&&$.error===void 0;else if(!z)return!1;if(z){var T;if(R.length>0&&(T=R[0]),T instanceof Error)throw T;var q=new Error("Unhandled error."+(T?" ("+T.message+")":""));throw q.context=T,q}var U=$[I];if(U===void 0)return!1;if(typeof U=="function")e(U,this,R);else for(var P=U.length,te=_(U,P),w=0;w<P;++w)e(te[w],this,R);return!0};function d(x,I,R,w){var z,$,T;if(l(R),$=x._events,$===void 0?($=x._events=Object.create(null),x._eventsCount=0):($.newListener!==void 0&&(x.emit("newListener",I,R.listener?R.listener:R),$=x._events),T=$[I]),T===void 0)T=$[I]=R,++x._eventsCount;else if(typeof T=="function"?T=$[I]=w?[R,T]:[T,R]:w?T.unshift(R):T.push(R),z=h(x),z>0&&T.length>z&&!T.warned){T.warned=!0;var q=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");q.name="MaxListenersExceededWarning",q.emitter=x,q.type=I,q.count=T.length,r(q)}return x}a.prototype.addListener=function(I,R){return d(this,I,R,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(I,R){return d(this,I,R,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(x,I,R){var w={fired:!1,wrapFn:void 0,target:x,type:I,listener:R},z=p.bind(w);return z.listener=R,w.wrapFn=z,z}a.prototype.once=function(I,R){return l(R),this.on(I,v(this,I,R)),this},a.prototype.prependOnceListener=function(I,R){return l(R),this.prependListener(I,v(this,I,R)),this},a.prototype.removeListener=function(I,R){var w,z,$,T,q;if(l(R),z=this._events,z===void 0)return this;if(w=z[I],w===void 0)return this;if(w===R||w.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete z[I],z.removeListener&&this.emit("removeListener",I,w.listener||R));else if(typeof w!="function"){for($=-1,T=w.length-1;T>=0;T--)if(w[T]===R||w[T].listener===R){q=w[T].listener,$=T;break}if($<0)return this;$===0?w.shift():S(w,$),w.length===1&&(z[I]=w[0]),z.removeListener!==void 0&&this.emit("removeListener",I,q||R)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(I){var R,w,z;if(w=this._events,w===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[I]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete w[I]),this;if(arguments.length===0){var $=Object.keys(w),T;for(z=0;z<$.length;++z)T=$[z],T!=="removeListener"&&this.removeAllListeners(T);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=w[I],typeof R=="function")this.removeListener(I,R);else if(R!==void 0)for(z=R.length-1;z>=0;z--)this.removeListener(I,R[z]);return this};function y(x,I,R){var w=x._events;if(w===void 0)return[];var z=w[I];return z===void 0?[]:typeof z=="function"?R?[z.listener||z]:[z]:R?C(z):_(z,z.length)}a.prototype.listeners=function(I){return y(this,I,!0)},a.prototype.rawListeners=function(I){return y(this,I,!1)},a.listenerCount=function(x,I){return typeof x.listenerCount=="function"?x.listenerCount(I):b.call(x,I)},a.prototype.listenerCount=b;function b(x){var I=this._events;if(I!==void 0){var R=I[x];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function _(x,I){for(var R=new Array(I),w=0;w<I;++w)R[w]=x[w];return R}function S(x,I){for(;I+1<x.length;I++)x[I]=x[I+1];x.pop()}function C(x){for(var I=new Array(x.length),R=0;R<I.length;++R)I[R]=x[R].listener||x[R];return I}function D(x,I){return new Promise(function(R,w){function z(T){x.removeListener(I,$),w(T)}function $(){typeof x.removeListener=="function"&&x.removeListener("error",z),R([].slice.call(arguments))}M(x,I,$,{once:!0}),I!=="error"&&k(x,z,{once:!0})})}function k(x,I,R){typeof x.on=="function"&&M(x,"error",I,R)}function M(x,I,R,w){if(typeof x.on=="function")w.once?x.once(I,R):x.on(I,R);else if(typeof x.addEventListener=="function")x.addEventListener(I,function z($){w.once&&x.removeEventListener(I,z),R($)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x)}return wn.exports}var av=ov(),vi,Ds;function ar(){if(Ds)return vi;Ds=1;function n(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}return typeof Symbol<"u"&&(n.prototype[Symbol.iterator]=function(){return this}),n.of=function(){var e=arguments,t=e.length,r=0;return new n(function(){return r>=t?{done:!0}:{done:!1,value:e[r++]}})},n.empty=function(){var e=new n(function(){return{done:!0}});return e},n.fromSequence=function(e){var t=0,r=e.length;return new n(function(){return t>=r?{done:!0}:{done:!1,value:e[t++]}})},n.is=function(e){return e instanceof n?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"},vi=n,vi}var sv=ar();const dt=Ve(sv);var En={},Ns;function dl(){return Ns||(Ns=1,En.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",En.SYMBOL_SUPPORT=typeof Symbol<"u"),En}var yi,Is;function hl(){if(Is)return yi;Is=1;var n=ar(),e=dl(),t=e.ARRAY_BUFFER_SUPPORT,r=e.SYMBOL_SUPPORT;function o(a){return typeof a=="string"||Array.isArray(a)||t&&ArrayBuffer.isView(a)?n.fromSequence(a):typeof a!="object"||a===null?null:r&&typeof a[Symbol.iterator]=="function"?a[Symbol.iterator]():typeof a.next=="function"?a:null}return yi=function(s){var l=o(s);if(!l)throw new Error("obliterator: target is not iterable nor a valid iterator.");return l},yi}var mi,Ms;function uv(){if(Ms)return mi;Ms=1;var n=hl();return mi=function(t,r){for(var o=arguments.length>1?r:1/0,a=o!==1/0?new Array(o):[],s,l=0,h=n(t);;){if(l===o)return a;if(s=h.next(),s.done)return l!==r&&(a.length=l),a;a[l++]=s.value}},mi}var cv=uv();const fl=Ve(cv);var bi,Ls;function lv(){if(Ls)return bi;Ls=1;var n=ar(),e=hl();return bi=function(){var r=arguments,o=null,a=-1;return new n(function(){var l=null;do{if(o===null){if(a++,a>=r.length)return{done:!0};o=e(r[a])}if(l=o.next(),l.done===!0){o=null;continue}break}while(!0);return l})},bi}var dv=lv();const Ot=Ve(dv);function hv(){const n=arguments[0];for(let e=1,t=arguments.length;e<t;e++)if(arguments[e])for(const r in arguments[e])n[r]=arguments[e][r];return n}let $e=hv;typeof Object.assign=="function"&&($e=Object.assign);function lt(n,e,t,r){const o=n._nodes.get(e);let a=null;return o&&(r==="mixed"?a=o.out&&o.out[t]||o.undirected&&o.undirected[t]:r==="directed"?a=o.out&&o.out[t]:a=o.undirected&&o.undirected[t]),a}function Pe(n){return typeof n=="object"&&n!==null}function pl(n){let e;for(e in n)return!1;return!0}function at(n,e,t){Object.defineProperty(n,e,{enumerable:!1,configurable:!1,writable:!0,value:t})}function pt(n,e,t){const r={enumerable:!0,configurable:!0};typeof t=="function"?r.get=t:(r.value=t,r.writable=!1),Object.defineProperty(n,e,r)}function zs(n){return!(!Pe(n)||n.attributes&&!Array.isArray(n.attributes))}function fv(){let n=Math.floor(Math.random()*256)&255;return()=>n++}class ha extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}let le=class gl extends ha{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,gl.prototype.constructor)}};class ae extends ha{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ae.prototype.constructor)}}class we extends ha{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,we.prototype.constructor)}}function vl(n,e){this.key=n,this.attributes=e,this.clear()}vl.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function yl(n,e){this.key=n,this.attributes=e,this.clear()}yl.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function ml(n,e){this.key=n,this.attributes=e,this.clear()}ml.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Sr(n,e,t,r,o){this.key=e,this.attributes=o,this.undirected=n,this.source=t,this.target=r}Sr.prototype.attach=function(){let n="out",e="in";this.undirected&&(n=e="undirected");const t=this.source.key,r=this.target.key;this.source[n][r]=this,!(this.undirected&&t===r)&&(this.target[e][t]=this)};Sr.prototype.attachMulti=function(){let n="out",e="in";const t=this.source.key,r=this.target.key;this.undirected&&(n=e="undirected");const o=this.source[n],a=o[r];if(typeof a>"u"){o[r]=this,this.undirected&&t===r||(this.target[e][t]=this);return}a.previous=this,this.next=a,o[r]=this,this.target[e][t]=this};Sr.prototype.detach=function(){const n=this.source.key,e=this.target.key;let t="out",r="in";this.undirected&&(t=r="undirected"),delete this.source[t][e],delete this.target[r][n]};Sr.prototype.detachMulti=function(){const n=this.source.key,e=this.target.key;let t="out",r="in";this.undirected&&(t=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][e],delete this.target[r][n]):(this.next.previous=void 0,this.source[t][e]=this.next,this.target[r][n]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const bl=0,wl=1,pv=2,El=3;function Rt(n,e,t,r,o,a,s){let l,h,d,p;if(r=""+r,t===bl){if(l=n._nodes.get(r),!l)throw new ae(`Graph.${e}: could not find the "${r}" node in the graph.`);d=o,p=a}else if(t===El){if(o=""+o,h=n._edges.get(o),!h)throw new ae(`Graph.${e}: could not find the "${o}" edge in the graph.`);const v=h.source.key,y=h.target.key;if(r===v)l=h.target;else if(r===y)l=h.source;else throw new ae(`Graph.${e}: the "${r}" node is not attached to the "${o}" edge (${v}, ${y}).`);d=a,p=s}else{if(h=n._edges.get(r),!h)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`);t===wl?l=h.source:l=h.target,d=o,p=a}return[l,d,p]}function gv(n,e,t){n.prototype[e]=function(r,o,a){const[s,l]=Rt(this,e,t,r,o,a);return s.attributes[l]}}function vv(n,e,t){n.prototype[e]=function(r,o){const[a]=Rt(this,e,t,r,o);return a.attributes}}function yv(n,e,t){n.prototype[e]=function(r,o,a){const[s,l]=Rt(this,e,t,r,o,a);return s.attributes.hasOwnProperty(l)}}function mv(n,e,t){n.prototype[e]=function(r,o,a,s){const[l,h,d]=Rt(this,e,t,r,o,a,s);return l.attributes[h]=d,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:h}),this}}function bv(n,e,t){n.prototype[e]=function(r,o,a,s){const[l,h,d]=Rt(this,e,t,r,o,a,s);if(typeof d!="function")throw new le(`Graph.${e}: updater should be a function.`);const p=l.attributes,v=d(p[h]);return p[h]=v,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:h}),this}}function wv(n,e,t){n.prototype[e]=function(r,o,a){const[s,l]=Rt(this,e,t,r,o,a);return delete s.attributes[l],this.emit("nodeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:l}),this}}function Ev(n,e,t){n.prototype[e]=function(r,o,a){const[s,l]=Rt(this,e,t,r,o,a);if(!Pe(l))throw new le(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=l,this.emit("nodeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function xv(n,e,t){n.prototype[e]=function(r,o,a){const[s,l]=Rt(this,e,t,r,o,a);if(!Pe(l))throw new le(`Graph.${e}: provided attributes are not a plain object.`);return $e(s.attributes,l),this.emit("nodeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:l}),this}}function _v(n,e,t){n.prototype[e]=function(r,o,a){const[s,l]=Rt(this,e,t,r,o,a);if(typeof l!="function")throw new le(`Graph.${e}: provided updater is not a function.`);return s.attributes=l(s.attributes),this.emit("nodeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Sv=[{name:n=>`get${n}Attribute`,attacher:gv},{name:n=>`get${n}Attributes`,attacher:vv},{name:n=>`has${n}Attribute`,attacher:yv},{name:n=>`set${n}Attribute`,attacher:mv},{name:n=>`update${n}Attribute`,attacher:bv},{name:n=>`remove${n}Attribute`,attacher:wv},{name:n=>`replace${n}Attributes`,attacher:Ev},{name:n=>`merge${n}Attributes`,attacher:xv},{name:n=>`update${n}Attributes`,attacher:_v}];function Av(n){Sv.forEach(function({name:e,attacher:t}){t(n,e("Node"),bl),t(n,e("Source"),wl),t(n,e("Target"),pv),t(n,e("Opposite"),El)})}function kv(n,e,t){n.prototype[e]=function(r,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,l=""+o;if(o=arguments[2],a=lt(this,s,l,t),!a)throw new ae(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return a.attributes[o]}}function Cv(n,e,t){n.prototype[e]=function(r){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+arguments[1];if(o=lt(this,a,s,t),!o)throw new ae(`Graph.${e}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes}}function Dv(n,e,t){n.prototype[e]=function(r,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,l=""+o;if(o=arguments[2],a=lt(this,s,l,t),!a)throw new ae(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return a.attributes.hasOwnProperty(o)}}function Nv(n,e,t){n.prototype[e]=function(r,o,a){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+r,h=""+o;if(o=arguments[2],a=arguments[3],s=lt(this,l,h,t),!s)throw new ae(`Graph.${e}: could not find an edge for the given path ("${l}" - "${h}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[o]=a,this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:o}),this}}function Iv(n,e,t){n.prototype[e]=function(r,o,a){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+r,h=""+o;if(o=arguments[2],a=arguments[3],s=lt(this,l,h,t),!s)throw new ae(`Graph.${e}: could not find an edge for the given path ("${l}" - "${h}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof a!="function")throw new le(`Graph.${e}: updater should be a function.`);return s.attributes[o]=a(s.attributes[o]),this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:o}),this}}function Mv(n,e,t){n.prototype[e]=function(r,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,l=""+o;if(o=arguments[2],a=lt(this,s,l,t),!a)throw new ae(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete a.attributes[o],this.emit("edgeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:o}),this}}function Lv(n,e,t){n.prototype[e]=function(r,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,l=""+o;if(o=arguments[2],a=lt(this,s,l,t),!a)throw new ae(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Pe(o))throw new le(`Graph.${e}: provided attributes are not a plain object.`);return a.attributes=o,this.emit("edgeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function zv(n,e,t){n.prototype[e]=function(r,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,l=""+o;if(o=arguments[2],a=lt(this,s,l,t),!a)throw new ae(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Pe(o))throw new le(`Graph.${e}: provided attributes are not a plain object.`);return $e(a.attributes,o),this.emit("edgeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:o}),this}}function $v(n,e,t){n.prototype[e]=function(r,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,l=""+o;if(o=arguments[2],a=lt(this,s,l,t),!a)throw new ae(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof o!="function")throw new le(`Graph.${e}: provided updater is not a function.`);return a.attributes=o(a.attributes),this.emit("edgeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const Tv=[{name:n=>`get${n}Attribute`,attacher:kv},{name:n=>`get${n}Attributes`,attacher:Cv},{name:n=>`has${n}Attribute`,attacher:Dv},{name:n=>`set${n}Attribute`,attacher:Nv},{name:n=>`update${n}Attribute`,attacher:Iv},{name:n=>`remove${n}Attribute`,attacher:Mv},{name:n=>`replace${n}Attributes`,attacher:Lv},{name:n=>`merge${n}Attributes`,attacher:zv},{name:n=>`update${n}Attributes`,attacher:$v}];function Pv(n){Tv.forEach(function({name:e,attacher:t}){t(n,e("Edge"),"mixed"),t(n,e("DirectedEdge"),"directed"),t(n,e("UndirectedEdge"),"undirected")})}const Ov=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Gv(n,e,t,r){let o=!1;for(const a in e){if(a===r)continue;const s=e[a];if(o=t(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),n&&o)return s.key}}function Rv(n,e,t,r){let o,a,s,l=!1;for(const h in e)if(h!==r){o=e[h];do{if(a=o.source,s=o.target,l=t(o.key,o.attributes,a.key,s.key,a.attributes,s.attributes,o.undirected),n&&l)return o.key;o=o.next}while(o!==void 0)}}function wi(n,e){const t=Object.keys(n),r=t.length;let o,a=0;return new dt(function(){do if(o)o=o.next;else{if(a>=r)return{done:!0};const l=t[a++];if(l===e){o=void 0;continue}o=n[l]}while(!o);return{done:!1,value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected}}})}function qv(n,e,t,r){const o=e[t];if(!o)return;const a=o.source,s=o.target;if(r(o.key,o.attributes,a.key,s.key,a.attributes,s.attributes,o.undirected)&&n)return o.key}function Fv(n,e,t,r){let o=e[t];if(!o)return;let a=!1;do{if(a=r(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),n&&a)return o.key;o=o.next}while(o!==void 0)}function Ei(n,e){let t=n[e];return t.next!==void 0?new dt(function(){if(!t)return{done:!0};const r={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:r}}):dt.of({edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected})}function jv(n,e){if(n.size===0)return[];if(e==="mixed"||e===n.type)return typeof Array.from=="function"?Array.from(n._edges.keys()):fl(n._edges.keys(),n._edges.size);const t=e==="undirected"?n.undirectedSize:n.directedSize,r=new Array(t),o=e==="undirected",a=n._edges.values();let s=0,l,h;for(;l=a.next(),l.done!==!0;)h=l.value,h.undirected===o&&(r[s++]=h.key);return r}function xl(n,e,t,r){if(e.size===0)return;const o=t!=="mixed"&&t!==e.type,a=t==="undirected";let s,l,h=!1;const d=e._edges.values();for(;s=d.next(),s.done!==!0;){if(l=s.value,o&&l.undirected!==a)continue;const{key:p,attributes:v,source:y,target:b}=l;if(h=r(p,v,y.key,b.key,y.attributes,b.attributes,l.undirected),n&&h)return p}}function Bv(n,e){if(n.size===0)return dt.empty();const t=e!=="mixed"&&e!==n.type,r=e==="undirected",o=n._edges.values();return new dt(function(){let s,l;for(;;){if(s=o.next(),s.done)return s;if(l=s.value,!(t&&l.undirected!==r))break}return{value:{edge:l.key,attributes:l.attributes,source:l.source.key,target:l.target.key,sourceAttributes:l.source.attributes,targetAttributes:l.target.attributes,undirected:l.undirected},done:!1}})}function fa(n,e,t,r,o,a){const s=e?Rv:Gv;let l;if(t!=="undirected"&&(r!=="out"&&(l=s(n,o.in,a),n&&l)||r!=="in"&&(l=s(n,o.out,a,r?void 0:o.key),n&&l))||t!=="directed"&&(l=s(n,o.undirected,a),n&&l))return l}function Uv(n,e,t,r){const o=[];return fa(!1,n,e,t,r,function(a){o.push(a)}),o}function Hv(n,e,t){let r=dt.empty();return n!=="undirected"&&(e!=="out"&&typeof t.in<"u"&&(r=Ot(r,wi(t.in))),e!=="in"&&typeof t.out<"u"&&(r=Ot(r,wi(t.out,e?void 0:t.key)))),n!=="directed"&&typeof t.undirected<"u"&&(r=Ot(r,wi(t.undirected))),r}function pa(n,e,t,r,o,a,s){const l=t?Fv:qv;let h;if(e!=="undirected"&&(typeof o.in<"u"&&r!=="out"&&(h=l(n,o.in,a,s),n&&h)||typeof o.out<"u"&&r!=="in"&&(r||o.key!==a)&&(h=l(n,o.out,a,s),n&&h))||e!=="directed"&&typeof o.undirected<"u"&&(h=l(n,o.undirected,a,s),n&&h))return h}function Wv(n,e,t,r,o){const a=[];return pa(!1,n,e,t,r,o,function(s){a.push(s)}),a}function Kv(n,e,t,r){let o=dt.empty();return n!=="undirected"&&(typeof t.in<"u"&&e!=="out"&&r in t.in&&(o=Ot(o,Ei(t.in,r))),typeof t.out<"u"&&e!=="in"&&r in t.out&&(e||t.key!==r)&&(o=Ot(o,Ei(t.out,r)))),n!=="directed"&&typeof t.undirected<"u"&&r in t.undirected&&(o=Ot(o,Ei(t.undirected,r))),o}function Xv(n,e){const{name:t,type:r,direction:o}=e;n.prototype[t]=function(a,s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return jv(this,r);if(arguments.length===1){a=""+a;const l=this._nodes.get(a);if(typeof l>"u")throw new ae(`Graph.${t}: could not find the "${a}" node in the graph.`);return Uv(this.multi,r==="mixed"?this.type:r,o,l)}if(arguments.length===2){a=""+a,s=""+s;const l=this._nodes.get(a);if(!l)throw new ae(`Graph.${t}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(s))throw new ae(`Graph.${t}:  could not find the "${s}" target node in the graph.`);return Wv(r,this.multi,o,l,s)}throw new le(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Yv(n,e){const{name:t,type:r,direction:o}=e,a="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[a]=function(d,p,v){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return v=d,xl(!1,this,r,v);if(arguments.length===2){d=""+d,v=p;const y=this._nodes.get(d);if(typeof y>"u")throw new ae(`Graph.${a}: could not find the "${d}" node in the graph.`);return fa(!1,this.multi,r==="mixed"?this.type:r,o,y,v)}if(arguments.length===3){d=""+d,p=""+p;const y=this._nodes.get(d);if(!y)throw new ae(`Graph.${a}:  could not find the "${d}" source node in the graph.`);if(!this._nodes.has(p))throw new ae(`Graph.${a}:  could not find the "${p}" target node in the graph.`);return pa(!1,r,this.multi,o,y,p,v)}throw new le(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const s="map"+t[0].toUpperCase()+t.slice(1);n.prototype[s]=function(){const d=Array.prototype.slice.call(arguments),p=d.pop();let v;if(d.length===0){let y=0;r!=="directed"&&(y+=this.undirectedSize),r!=="undirected"&&(y+=this.directedSize),v=new Array(y);let b=0;d.push((_,S,C,D,k,M,x)=>{v[b++]=p(_,S,C,D,k,M,x)})}else v=[],d.push((y,b,_,S,C,D,k)=>{v.push(p(y,b,_,S,C,D,k))});return this[a].apply(this,d),v};const l="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(){const d=Array.prototype.slice.call(arguments),p=d.pop(),v=[];return d.push((y,b,_,S,C,D,k)=>{p(y,b,_,S,C,D,k)&&v.push(y)}),this[a].apply(this,d),v};const h="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[h]=function(){let d=Array.prototype.slice.call(arguments);if(d.length<2||d.length>4)throw new le(`Graph.${h}: invalid number of arguments (expecting 2, 3 or 4 and got ${d.length}).`);if(typeof d[d.length-1]=="function"&&typeof d[d.length-2]!="function")throw new le(`Graph.${h}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let p,v;d.length===2?(p=d[0],v=d[1],d=[]):d.length===3?(p=d[1],v=d[2],d=[d[0]]):d.length===4&&(p=d[2],v=d[3],d=[d[0],d[1]]);let y=v;return d.push((b,_,S,C,D,k,M)=>{y=p(y,b,_,S,C,D,k,M)}),this[a].apply(this,d),y}}function Vv(n,e){const{name:t,type:r,direction:o}=e,a="find"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[a]=function(h,d,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return p=h,xl(!0,this,r,p);if(arguments.length===2){h=""+h,p=d;const v=this._nodes.get(h);if(typeof v>"u")throw new ae(`Graph.${a}: could not find the "${h}" node in the graph.`);return fa(!0,this.multi,r==="mixed"?this.type:r,o,v,p)}if(arguments.length===3){h=""+h,d=""+d;const v=this._nodes.get(h);if(!v)throw new ae(`Graph.${a}:  could not find the "${h}" source node in the graph.`);if(!this._nodes.has(d))throw new ae(`Graph.${a}:  could not find the "${d}" target node in the graph.`);return pa(!0,r,this.multi,o,v,d,p)}throw new le(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const s="some"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(){const h=Array.prototype.slice.call(arguments),d=h.pop();return h.push((v,y,b,_,S,C,D)=>d(v,y,b,_,S,C,D)),!!this[a].apply(this,h)};const l="every"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[l]=function(){const h=Array.prototype.slice.call(arguments),d=h.pop();return h.push((v,y,b,_,S,C,D)=>!d(v,y,b,_,S,C,D)),!this[a].apply(this,h)}}function Qv(n,e){const{name:t,type:r,direction:o}=e,a=t.slice(0,-1)+"Entries";n.prototype[a]=function(s,l){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return dt.empty();if(!arguments.length)return Bv(this,r);if(arguments.length===1){s=""+s;const h=this._nodes.get(s);if(!h)throw new ae(`Graph.${a}: could not find the "${s}" node in the graph.`);return Hv(r,o,h)}if(arguments.length===2){s=""+s,l=""+l;const h=this._nodes.get(s);if(!h)throw new ae(`Graph.${a}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(l))throw new ae(`Graph.${a}:  could not find the "${l}" target node in the graph.`);return Kv(r,o,h,l)}throw new le(`Graph.${a}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Zv(n){Ov.forEach(e=>{Xv(n,e),Yv(n,e),Vv(n,e),Qv(n,e)})}const Jv=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Kn(){this.A=null,this.B=null}Kn.prototype.wrap=function(n){this.A===null?this.A=n:this.B===null&&(this.B=n)};Kn.prototype.has=function(n){return this.A!==null&&n in this.A||this.B!==null&&n in this.B};function Tr(n,e,t,r,o){for(const a in r){const s=r[a],l=s.source,h=s.target,d=l===t?h:l;if(e&&e.has(d.key))continue;const p=o(d.key,d.attributes);if(n&&p)return d.key}}function ga(n,e,t,r,o){if(e!=="mixed"){if(e==="undirected")return Tr(n,null,r,r.undirected,o);if(typeof t=="string")return Tr(n,null,r,r[t],o)}const a=new Kn;let s;if(e!=="undirected"){if(t!=="out"){if(s=Tr(n,null,r,r.in,o),n&&s)return s;a.wrap(r.in)}if(t!=="in"){if(s=Tr(n,a,r,r.out,o),n&&s)return s;a.wrap(r.out)}}if(e!=="directed"&&(s=Tr(n,a,r,r.undirected,o),n&&s))return s}function ey(n,e,t){if(n!=="mixed"){if(n==="undirected")return Object.keys(t.undirected);if(typeof e=="string")return Object.keys(t[e])}const r=[];return ga(!1,n,e,t,function(o){r.push(o)}),r}function Pr(n,e,t){const r=Object.keys(t),o=r.length;let a=0;return new dt(function(){let l=null;do{if(a>=o)return n&&n.wrap(t),{done:!0};const h=t[r[a++]],d=h.source,p=h.target;if(l=d===e?p:d,n&&n.has(l.key)){l=null;continue}}while(l===null);return{done:!1,value:{neighbor:l.key,attributes:l.attributes}}})}function ty(n,e,t){if(n!=="mixed"){if(n==="undirected")return Pr(null,t,t.undirected);if(typeof e=="string")return Pr(null,t,t[e])}let r=dt.empty();const o=new Kn;return n!=="undirected"&&(e!=="out"&&(r=Ot(r,Pr(o,t,t.in))),e!=="in"&&(r=Ot(r,Pr(o,t,t.out)))),n!=="directed"&&(r=Ot(r,Pr(o,t,t.undirected))),r}function ry(n,e){const{name:t,type:r,direction:o}=e;n.prototype[t]=function(a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];a=""+a;const s=this._nodes.get(a);if(typeof s>"u")throw new ae(`Graph.${t}: could not find the "${a}" node in the graph.`);return ey(r==="mixed"?this.type:r,o,s)}}function ny(n,e){const{name:t,type:r,direction:o}=e,a="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[a]=function(d,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;d=""+d;const v=this._nodes.get(d);if(typeof v>"u")throw new ae(`Graph.${a}: could not find the "${d}" node in the graph.`);ga(!1,r==="mixed"?this.type:r,o,v,p)};const s="map"+t[0].toUpperCase()+t.slice(1);n.prototype[s]=function(d,p){const v=[];return this[a](d,(y,b)=>{v.push(p(y,b))}),v};const l="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(d,p){const v=[];return this[a](d,(y,b)=>{p(y,b)&&v.push(y)}),v};const h="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[h]=function(d,p,v){if(arguments.length<3)throw new le(`Graph.${h}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let y=v;return this[a](d,(b,_)=>{y=p(y,b,_)}),y}}function iy(n,e){const{name:t,type:r,direction:o}=e,a=t[0].toUpperCase()+t.slice(1,-1),s="find"+a;n.prototype[s]=function(d,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;d=""+d;const v=this._nodes.get(d);if(typeof v>"u")throw new ae(`Graph.${s}: could not find the "${d}" node in the graph.`);return ga(!0,r==="mixed"?this.type:r,o,v,p)};const l="some"+a;n.prototype[l]=function(d,p){return!!this[s](d,p)};const h="every"+a;n.prototype[h]=function(d,p){return!this[s](d,(y,b)=>!p(y,b))}}function oy(n,e){const{name:t,type:r,direction:o}=e,a=t.slice(0,-1)+"Entries";n.prototype[a]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return dt.empty();s=""+s;const l=this._nodes.get(s);if(typeof l>"u")throw new ae(`Graph.${a}: could not find the "${s}" node in the graph.`);return ty(r==="mixed"?this.type:r,o,l)}}function ay(n){Jv.forEach(e=>{ry(n,e),ny(n,e),iy(n,e),oy(n,e)})}function xn(n,e,t,r,o){const a=r._nodes.values(),s=r.type;let l,h,d,p,v,y;for(;l=a.next(),l.done!==!0;){let b=!1;if(h=l.value,s!=="undirected"){p=h.out;for(d in p){v=p[d];do y=v.target,b=!0,o(h.key,y.key,h.attributes,y.attributes,v.key,v.attributes,v.undirected),v=v.next;while(v)}}if(s!=="directed"){p=h.undirected;for(d in p)if(!(e&&h.key>d)){v=p[d];do y=v.target,y.key!==d&&(y=v.source),b=!0,o(h.key,y.key,h.attributes,y.attributes,v.key,v.attributes,v.undirected),v=v.next;while(v)}}t&&!b&&o(h.key,null,h.attributes,null,null,null,null)}}function sy(n,e){const t={key:n};return pl(e.attributes)||(t.attributes=$e({},e.attributes)),t}function uy(n,e,t){const r={key:e,source:t.source.key,target:t.target.key};return pl(t.attributes)||(r.attributes=$e({},t.attributes)),n==="mixed"&&t.undirected&&(r.undirected=!0),r}function cy(n){if(!Pe(n))throw new le('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in n))throw new le("Graph.import: serialized node is missing its key.");if("attributes"in n&&(!Pe(n.attributes)||n.attributes===null))throw new le("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function ly(n){if(!Pe(n))throw new le('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in n))throw new le("Graph.import: serialized edge is missing its source.");if(!("target"in n))throw new le("Graph.import: serialized edge is missing its target.");if("attributes"in n&&(!Pe(n.attributes)||n.attributes===null))throw new le("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in n&&typeof n.undirected!="boolean")throw new le("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const dy=fv(),hy=new Set(["directed","undirected","mixed"]),$s=new Set(["domain","_events","_eventsCount","_maxListeners"]),fy=[{name:n=>`${n}Edge`,generateKey:!0},{name:n=>`${n}DirectedEdge`,generateKey:!0,type:"directed"},{name:n=>`${n}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:n=>`${n}EdgeWithKey`},{name:n=>`${n}DirectedEdgeWithKey`,type:"directed"},{name:n=>`${n}UndirectedEdgeWithKey`,type:"undirected"}],py={allowSelfLoops:!0,multi:!1,type:"mixed"};function gy(n,e,t){if(t&&!Pe(t))throw new le(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(e=""+e,t=t||{},n._nodes.has(e))throw new we(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new n.NodeDataClass(e,t);return n._nodes.set(e,r),n.emit("nodeAdded",{key:e,attributes:t}),r}function Ts(n,e,t){const r=new n.NodeDataClass(e,t);return n._nodes.set(e,r),n.emit("nodeAdded",{key:e,attributes:t}),r}function _l(n,e,t,r,o,a,s,l){if(!r&&n.type==="undirected")throw new we(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&n.type==="directed")throw new we(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(l&&!Pe(l))throw new le(`Graph.${e}: invalid attributes. Expecting an object but got "${l}"`);if(a=""+a,s=""+s,l=l||{},!n.allowSelfLoops&&a===s)throw new we(`Graph.${e}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const h=n._nodes.get(a),d=n._nodes.get(s);if(!h)throw new ae(`Graph.${e}: source node "${a}" not found.`);if(!d)throw new ae(`Graph.${e}: target node "${s}" not found.`);const p={key:null,undirected:r,source:a,target:s,attributes:l};if(t)o=n._edgeKeyGenerator();else if(o=""+o,n._edges.has(o))throw new we(`Graph.${e}: the "${o}" edge already exists in the graph.`);if(!n.multi&&(r?typeof h.undirected[s]<"u":typeof h.out[s]<"u"))throw new we(`Graph.${e}: an edge linking "${a}" to "${s}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const v=new Sr(r,o,h,d,l);n._edges.set(o,v);const y=a===s;return r?(h.undirectedDegree++,d.undirectedDegree++,y&&(h.undirectedLoops++,n._undirectedSelfLoopCount++)):(h.outDegree++,d.inDegree++,y&&(h.directedLoops++,n._directedSelfLoopCount++)),n.multi?v.attachMulti():v.attach(),r?n._undirectedSize++:n._directedSize++,p.key=o,n.emit("edgeAdded",p),o}function vy(n,e,t,r,o,a,s,l,h){if(!r&&n.type==="undirected")throw new we(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&n.type==="directed")throw new we(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(l){if(h){if(typeof l!="function")throw new le(`Graph.${e}: invalid updater function. Expecting a function but got "${l}"`)}else if(!Pe(l))throw new le(`Graph.${e}: invalid attributes. Expecting an object but got "${l}"`)}a=""+a,s=""+s;let d;if(h&&(d=l,l=void 0),!n.allowSelfLoops&&a===s)throw new we(`Graph.${e}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let p=n._nodes.get(a),v=n._nodes.get(s),y,b;if(!t&&(y=n._edges.get(o),y)){if((y.source.key!==a||y.target.key!==s)&&(!r||y.source.key!==s||y.target.key!==a))throw new we(`Graph.${e}: inconsistency detected when attempting to merge the "${o}" edge with "${a}" source & "${s}" target vs. ("${y.source.key}", "${y.target.key}").`);b=y}if(!b&&!n.multi&&p&&(b=r?p.undirected[s]:p.out[s]),b){const k=[b.key,!1,!1,!1];if(h?!d:!l)return k;if(h){const M=b.attributes;b.attributes=d(M),n.emit("edgeAttributesUpdated",{type:"replace",key:b.key,attributes:b.attributes})}else $e(b.attributes,l),n.emit("edgeAttributesUpdated",{type:"merge",key:b.key,attributes:b.attributes,data:l});return k}l=l||{},h&&d&&(l=d(l));const _={key:null,undirected:r,source:a,target:s,attributes:l};if(t)o=n._edgeKeyGenerator();else if(o=""+o,n._edges.has(o))throw new we(`Graph.${e}: the "${o}" edge already exists in the graph.`);let S=!1,C=!1;p||(p=Ts(n,a,{}),S=!0,a===s&&(v=p,C=!0)),v||(v=Ts(n,s,{}),C=!0),y=new Sr(r,o,p,v,l),n._edges.set(o,y);const D=a===s;return r?(p.undirectedDegree++,v.undirectedDegree++,D&&(p.undirectedLoops++,n._undirectedSelfLoopCount++)):(p.outDegree++,v.inDegree++,D&&(p.directedLoops++,n._directedSelfLoopCount++)),n.multi?y.attachMulti():y.attach(),r?n._undirectedSize++:n._directedSize++,_.key=o,n.emit("edgeAdded",_),[o,!0,S,C]}function dr(n,e){n._edges.delete(e.key);const{source:t,target:r,attributes:o}=e,a=e.undirected,s=t===r;a?(t.undirectedDegree--,r.undirectedDegree--,s&&(t.undirectedLoops--,n._undirectedSelfLoopCount--)):(t.outDegree--,r.inDegree--,s&&(t.directedLoops--,n._directedSelfLoopCount--)),n.multi?e.detachMulti():e.detach(),a?n._undirectedSize--:n._directedSize--,n.emit("edgeDropped",{key:e.key,attributes:o,source:t.key,target:r.key,undirected:a})}class Ne extends av.EventEmitter{constructor(e){if(super(),e=$e({},py,e),typeof e.multi!="boolean")throw new le(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!hy.has(e.type))throw new le(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new le(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const t=e.type==="mixed"?vl:e.type==="directed"?yl:ml;at(this,"NodeDataClass",t);const r="geid_"+dy()+"_";let o=0;const a=()=>{let s;do s=r+o++;while(this._edges.has(s));return s};at(this,"_attributes",{}),at(this,"_nodes",new Map),at(this,"_edges",new Map),at(this,"_directedSize",0),at(this,"_undirectedSize",0),at(this,"_directedSelfLoopCount",0),at(this,"_undirectedSelfLoopCount",0),at(this,"_edgeKeyGenerator",a),at(this,"_options",e),$s.forEach(s=>at(this,s,this[s])),pt(this,"order",()=>this._nodes.size),pt(this,"size",()=>this._edges.size),pt(this,"directedSize",()=>this._directedSize),pt(this,"undirectedSize",()=>this._undirectedSize),pt(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),pt(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),pt(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),pt(this,"multi",this._options.multi),pt(this,"type",this._options.type),pt(this,"allowSelfLoops",this._options.allowSelfLoops),pt(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,o=this._edges.get(r);return!!o&&!o.undirected}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(t):!1}throw new le(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,o=this._edges.get(r);return!!o&&o.undirected}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(t):!1}throw new le(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(t)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(t):!1}throw new le(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if(this.type==="undirected")return;if(e=""+e,t=""+t,this.multi)throw new we("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new ae(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new ae(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const o=r.out&&r.out[t]||void 0;if(o)return o.key}undirectedEdge(e,t){if(this.type==="directed")return;if(e=""+e,t=""+t,this.multi)throw new we("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new ae(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new ae(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const o=r.undirected&&r.undirected[t]||void 0;if(o)return o.key}edge(e,t){if(this.multi)throw new we("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ae(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new ae(`Graph.edge: could not find the "${t}" target node in the graph.`);const o=r.out&&r.out[t]||r.undirected&&r.undirected[t]||void 0;if(o)return o.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ae(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.in||t in r.out}areOutNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ae(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.out}areInNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ae(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ae(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:t in r.undirected}areNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ae(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(t in r.in||t in r.out)||this.type!=="directed"&&t in r.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ae(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in r.in||this.type!=="directed"&&t in r.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ae(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in r.out||this.type!=="directed"&&t in r.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.inDegree),r}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.outDegree),r}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.inDegree+t.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,o=0;return this.type!=="directed"&&(r+=t.undirectedDegree,o+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.inDegree,o+=t.directedLoops),r-o}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,o=0;return this.type!=="directed"&&(r+=t.undirectedDegree,o+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.outDegree,o+=t.directedLoops),r-o}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,o=0;return this.type!=="directed"&&(r+=t.undirectedDegree,o+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.inDegree+t.outDegree,o+=t.directedLoops*2),r-o}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ae(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ae(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ae(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const r=this._edges.get(t);if(!r)throw new ae(`Graph.opposite: could not find the "${t}" edge in the graph.`);const o=r.source.key,a=r.target.key;if(e===o)return a;if(e===a)return o;throw new ae(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${o}, ${a}).`)}hasExtremity(e,t){e=""+e,t=""+t;const r=this._edges.get(e);if(!r)throw new ae(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===t||r.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ae(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ae(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ae(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return gy(this,e,t).key}mergeNode(e,t){if(t&&!Pe(t))throw new le(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let r=this._nodes.get(e);return r?(t&&($e(r.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:t})),[e,!1]):(r=new this.NodeDataClass(e,t),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&typeof t!="function")throw new le(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let r=this._nodes.get(e);if(r){if(t){const a=r.attributes;r.attributes=t(a),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const o=t?t({}):{};return r=new this.NodeDataClass(e,o),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:o}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const o in t.out){r=t.out[o];do dr(this,r),r=r.next;while(r)}for(const o in t.in){r=t.in[o];do dr(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const o in t.undirected){r=t.undirected[o];do dr(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const r=""+arguments[0],o=""+arguments[1];if(t=lt(this,r,o,this.type),!t)throw new ae(`Graph.dropEdge: could not find the "${r}" -> "${o}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new ae(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return dr(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new we("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new we("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,t=""+t;const r=lt(this,e,t,"directed");if(!r)throw new ae(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return dr(this,r),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new we("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new we("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=lt(this,e,t,"undirected");if(!r)throw new ae(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return dr(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if(typeof t!="function")throw new le("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=t(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Pe(e))throw new le("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Pe(e))throw new le("Graph.mergeAttributes: provided attributes are not a plain object.");return $e(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new le("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if(typeof e!="function")throw new le("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!zs(t))throw new le("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let o,a;for(;o=r.next(),o.done!==!0;)a=o.value,a.attributes=e(a.key,a.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if(typeof e!="function")throw new le("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!zs(t))throw new le("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let o,a,s,l;for(;o=r.next(),o.done!==!0;)a=o.value,s=a.source,l=a.target,a.attributes=e(a.key,a.attributes,s.key,l.key,s.attributes,l.attributes,a.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new le("Graph.forEachAdjacencyEntry: expecting a callback.");xn(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new le("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");xn(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new le("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");xn(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new le("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");xn(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):fl(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new le("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let r,o;for(;r=t.next(),r.done!==!0;)o=r.value,e(o.key,o.attributes)}findNode(e){if(typeof e!="function")throw new le("Graph.findNode: expecting a callback.");const t=this._nodes.values();let r,o;for(;r=t.next(),r.done!==!0;)if(o=r.value,e(o.key,o.attributes))return o.key}mapNodes(e){if(typeof e!="function")throw new le("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let r,o;const a=new Array(this.order);let s=0;for(;r=t.next(),r.done!==!0;)o=r.value,a[s++]=e(o.key,o.attributes);return a}someNode(e){if(typeof e!="function")throw new le("Graph.someNode: expecting a callback.");const t=this._nodes.values();let r,o;for(;r=t.next(),r.done!==!0;)if(o=r.value,e(o.key,o.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new le("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let r,o;for(;r=t.next(),r.done!==!0;)if(o=r.value,!e(o.key,o.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new le("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let r,o;const a=[];for(;r=t.next(),r.done!==!0;)o=r.value,e(o.key,o.attributes)&&a.push(o.key);return a}reduceNodes(e,t){if(typeof e!="function")throw new le("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new le("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=t;const o=this._nodes.values();let a,s;for(;a=o.next(),a.done!==!0;)s=a.value,r=e(r,s.key,s.attributes);return r}nodeEntries(){const e=this._nodes.values();return new dt(()=>{const t=e.next();if(t.done)return t;const r=t.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach((o,a)=>{e[t++]=sy(a,o)});const r=new Array(this._edges.size);return t=0,this._edges.forEach((o,a)=>{r[t++]=uy(this.type,a,o)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,t=!1){if(e instanceof Ne)return e.forEachNode((h,d)=>{t?this.mergeNode(h,d):this.addNode(h,d)}),e.forEachEdge((h,d,p,v,y,b,_)=>{t?_?this.mergeUndirectedEdgeWithKey(h,p,v,d):this.mergeDirectedEdgeWithKey(h,p,v,d):_?this.addUndirectedEdgeWithKey(h,p,v,d):this.addDirectedEdgeWithKey(h,p,v,d)}),this;if(!Pe(e))throw new le("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Pe(e.attributes))throw new le("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,o,a,s,l;if(e.nodes){if(a=e.nodes,!Array.isArray(a))throw new le("Graph.import: invalid nodes. Expecting an array.");for(r=0,o=a.length;r<o;r++){s=a[r],cy(s);const{key:h,attributes:d}=s;t?this.mergeNode(h,d):this.addNode(h,d)}}if(e.edges){let h=!1;if(this.type==="undirected"&&(h=!0),a=e.edges,!Array.isArray(a))throw new le("Graph.import: invalid edges. Expecting an array.");for(r=0,o=a.length;r<o;r++){l=a[r],ly(l);const{source:d,target:p,attributes:v,undirected:y=h}=l;let b;"key"in l?(b=t?y?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:y?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,b.call(this,l.key,d,p,v)):(b=t?y?this.mergeUndirectedEdge:this.mergeDirectedEdge:y?this.addUndirectedEdge:this.addDirectedEdge,b.call(this,d,p,v))}}return this}nullCopy(e){const t=new Ne($e({},this._options,e));return t.replaceAttributes($e({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach((r,o)=>{const a=$e({},r.attributes);r=new t.NodeDataClass(o,a),t._nodes.set(o,r)}),t}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new we(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new we("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new we("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),r=this._edges.values();let o,a;for(;o=r.next(),o.done!==!0;)a=o.value,_l(t,"copy",!1,a.undirected,a.key,a.source.key,a.target.key,$e({},a.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((a,s)=>{e[s]=a.attributes});const t={},r={};this._edges.forEach((a,s)=>{const l=a.undirected?"--":"->";let h="",d=a.source.key,p=a.target.key,v;a.undirected&&d>p&&(v=d,d=p,p=v);const y=`(${d})${l}(${p})`;s.startsWith("geid_")?this.multi&&(typeof r[y]>"u"?r[y]=0:r[y]++,h+=`${r[y]}. `):h+=`[${s}]: `,h+=y,t[h]=a.attributes});const o={};for(const a in this)this.hasOwnProperty(a)&&!$s.has(a)&&typeof this[a]!="function"&&typeof a!="symbol"&&(o[a]=this[a]);return o.attributes=this._attributes,o.nodes=e,o.edges=t,at(o,"constructor",this.constructor),o}}typeof Symbol<"u"&&(Ne.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ne.prototype.inspect);fy.forEach(n=>{["add","merge","update"].forEach(e=>{const t=n.name(e),r=e==="add"?_l:vy;n.generateKey?Ne.prototype[t]=function(o,a,s){return r(this,t,!0,(n.type||this.type)==="undirected",null,o,a,s,e==="update")}:Ne.prototype[t]=function(o,a,s,l){return r(this,t,!1,(n.type||this.type)==="undirected",o,a,s,l,e==="update")}})});Av(Ne);Pv(Ne);Zv(Ne);ay(Ne);let Sl=class extends Ne{constructor(e){const t=$e({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new le("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new le('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}},Al=class extends Ne{constructor(e){const t=$e({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new le("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new le('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}};class kl extends Ne{constructor(e){const t=$e({multi:!0},e);if("multi"in t&&t.multi!==!0)throw new le("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class Cl extends Ne{constructor(e){const t=$e({type:"directed",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new le("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new le('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Dl extends Ne{constructor(e){const t=$e({type:"undirected",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new le("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new le('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function Ar(n){n.from=function(e,t){const r=$e({},e.options,t),o=new n(r);return o.import(e),o}}Ar(Ne);Ar(Sl);Ar(Al);Ar(kl);Ar(Cl);Ar(Dl);Ne.Graph=Ne;Ne.DirectedGraph=Sl;Ne.UndirectedGraph=Al;Ne.MultiGraph=kl;Ne.MultiDirectedGraph=Cl;Ne.MultiUndirectedGraph=Dl;Ne.InvalidArgumentsGraphError=le;Ne.NotFoundGraphError=ae;Ne.UsageGraphError=we;var gt={},xi,Ps;function ke(){return Ps||(Ps=1,xi=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),xi}var _i={},Os;function va(){return Os||(Os=1,_i.copyNode=function(n,e,t){return t=Object.assign({},t),n.addNode(e,t)}),_i}var hr={},Gs;function qt(){return Gs||(Gs=1,hr.addEdge=function(e,t,r,o,a,s){return t?r==null?e.addUndirectedEdge(o,a,s):e.addUndirectedEdgeWithKey(r,o,a,s):r==null?e.addDirectedEdge(o,a,s):e.addDirectedEdgeWithKey(r,o,a,s)},hr.copyEdge=function(e,t,r,o,a,s){return s=Object.assign({},s),t?r==null?e.addUndirectedEdge(o,a,s):e.addUndirectedEdgeWithKey(r,o,a,s):r==null?e.addDirectedEdge(o,a,s):e.addDirectedEdgeWithKey(r,o,a,s)},hr.mergeEdge=function(e,t,r,o,a,s){return t?r==null?e.mergeUndirectedEdge(o,a,s):e.mergeUndirectedEdgeWithKey(r,o,a,s):r==null?e.mergeDirectedEdge(o,a,s):e.mergeDirectedEdgeWithKey(r,o,a,s)},hr.updateEdge=function(e,t,r,o,a,s){return t?r==null?e.updateUndirectedEdge(o,a,s):e.updateUndirectedEdgeWithKey(r,o,a,s):r==null?e.updateDirectedEdge(o,a,s):e.updateDirectedEdgeWithKey(r,o,a,s)}),hr}var Si,Rs;function yy(){if(Rs)return Si;Rs=1;var n=ke(),e=va().copyNode,t=qt().copyEdge;return Si=function(o,a){if(!n(o)||!n(a))throw new Error("graphology-operators/disjoint-union: invalid graph.");if(o.multi!==a.multi)throw new Error("graphology-operators/disjoint-union: both graph should be simple or multi.");var s=o.nullCopy();s.mergeAttributes(o.getAttributes());var l={},h={},d=0;return o.forEachNode(function(p,v){l[p]=d,e(s,d,v),d++}),a.forEachNode(function(p,v){h[p]=d,e(s,d,v),d++}),d=0,o.forEachEdge(function(p,v,y,b,_,S,C){t(s,C,d++,l[y],l[b],b,v)}),a.forEachEdge(function(p,v,y,b,_,S,C){t(s,C,d++,h[y],h[b],b,v)}),s},Si}var Ai,qs;function my(){if(qs)return Ai;qs=1;var n=ke(),e=qt().copyEdge;return Ai=function(r){if(!n(r))throw new Error("graphology-operators/reverse: invalid graph.");var o=r.emptyCopy();return r.forEachEdge(function(a,s,l,h,d,p,v){v?e(o,!0,a,l,h,s):e(o,!1,a,h,l,s)}),o},Ai}var ki,Fs;function by(){if(Fs)return ki;Fs=1;var n=ke(),e=va().copyNode,t=qt().copyEdge;return ki=function(o,a){if(!n(o))throw new Error("graphology-operators/subgraph: invalid graph instance.");var s=o.nullCopy(),l=a;if(Array.isArray(a)){if(a.length===0)return s;a=new Set(a)}if(a instanceof Set){if(a.size===0)return s;l=function(d){return a.has(d)};var h=a;a=new Set,h.forEach(function(d){a.add(""+d)})}if(typeof l!="function")throw new Error("graphology-operators/subgraph: invalid nodes. Expecting an array or a set or a filtering function.");if(typeof a=="function"){if(o.forEachNode(function(d,p){l(d,p)&&e(s,d,p)}),s.order===0)return s}else a.forEach(function(d){if(!o.hasNode(d))throw new Error('graphology-operators/subgraph: the "'+d+'" node was not found in the graph.');e(s,d,o.getNodeAttributes(d))});return o.forEachEdge(function(d,p,v,y,b,_,S){l(v,b)&&(y!==v&&!l(y,_)||t(s,S,d,v,y,p))}),s},ki}var Ci,js;function wy(){if(js)return Ci;js=1;var n=ke(),e=qt().copyEdge;return Ci=function(r,o){if(!n(r))throw new Error("graphology-operators/to-directed: expecting a valid graphology instance.");typeof o=="function"&&(o={mergeEdge:o}),o=o||{};var a=typeof o.mergeEdge=="function"?o.mergeEdge:null;if(r.type==="directed")return r.copy();var s=r.emptyCopy({type:"directed"});return r.forEachDirectedEdge(function(l,h,d,p){e(s,!1,l,d,p,h)}),r.forEachUndirectedEdge(function(l,h,d,p){var v=!r.multi&&r.type==="mixed"&&s.edge(d,p),y=!r.multi&&r.type==="mixed"&&s.edge(p,d);v?s.replaceEdgeAttributes(v,a(s.getEdgeAttributes(v),h)):e(s,!1,null,d,p,h),d!==p&&(y?s.replaceEdgeAttributes(y,a(s.getEdgeAttributes(y),h)):e(s,!1,null,p,d,h))}),s},Ci}var Di,Bs;function Ey(){if(Bs)return Di;Bs=1;var n=ke();return Di=function(t){if(!n(t))throw new Error("graphology-operators/to-mixed: expecting a valid graphology instance.");return t.copy({type:"mixed"})},Di}var Ni,Us;function xy(){if(Us)return Ni;Us=1;var n=ke();return Ni=function(t){if(!n(t))throw new Error("graphology-operators/to-multi: expecting a valid graphology instance.");return t.copy({multi:!0})},Ni}var Ii,Hs;function _y(){if(Hs)return Ii;Hs=1;var n=ke(),e=qt().copyEdge;return Ii=function(r,o){if(!n(r))throw new Error("graphology-operators/to-simple: expecting a valid graphology instance.");typeof o=="function"&&(o={mergeEdge:o}),o=o||{};var a=typeof o.mergeEdge=="function"?o.mergeEdge:null;if(!r.multi)return r.copy();var s=r.emptyCopy({multi:!1});return r.forEachEdge(function(l,h,d,p,v,y,b){var _=b?s.undirectedEdge(d,p):s.directedEdge(d,p);if(_){a&&s.replaceEdgeAttributes(_,a(s.getEdgeAttributes(_),h));return}e(s,b,l,d,p,h)}),s},Ii}var Mi,Ws;function Sy(){if(Ws)return Mi;Ws=1;var n=ke(),e=qt().copyEdge;return Mi=function(r,o){if(!n(r))throw new Error("graphology-operators/to-undirected: expecting a valid graphology instance.");typeof o=="function"&&(o={mergeEdge:o}),o=o||{};var a=typeof o.mergeEdge=="function"?o.mergeEdge:null;if(r.type==="undirected")return r.copy();var s=r.emptyCopy({type:"undirected"});return r.forEachUndirectedEdge(function(l,h,d,p){e(s,!0,l,d,p,h)}),r.forEachDirectedEdge(function(l,h,d,p){if(!r.multi){var v=s.edge(d,p);if(v){a&&s.replaceEdgeAttributes(v,a(s.getEdgeAttributes(v),h));return}}e(s,!0,null,d,p,h)}),s},Mi}var Li,Ks;function Ay(){if(Ks)return Li;Ks=1;var n=ke();return Li=function(t,r){if(!n(t)||!n(r))throw new Error("graphology-operators/union: invalid graph.");if(t.multi!==r.multi)throw new Error("graphology-operators/union: both graph should be simple or multi.");var o=t.copy();return o.import(r,!0),o},Li}var Xs;function ky(){return Xs||(Xs=1,gt.disjointUnion=yy(),gt.reverse=my(),gt.subgraph=by(),gt.toDirected=wy(),gt.toMixed=Ey(),gt.toMulti=xy(),gt.toSimple=_y(),gt.toUndirected=Sy(),gt.union=Ay()),gt}var kt=ky();function Cy(n){n.prototype.updateSelectedNodesName=function(e){this.updateSelectedNodesAttributes({label:e})},n.prototype.updateSelectedNodesInfo=function(e){this.updateSelectedNodesAttributes({desc:e})},n.prototype.setDefaultNodeWeight=function(e=1){this.updateEachNodeAttributes((t,r)=>({...r,weight:e}))},n.prototype.getNodesForD3=function(){return this.nodes().map(e=>({...this.getNodeAttributes(e),id:Number(e)}))},n.prototype.selectNode=function(e){this.setNodeAttribute(e,"selected",!0)},n.prototype.deselectNode=function(e){this.setNodeAttribute(e,"selected",!1)},n.prototype.toggleNodeSelection=function(e){if((this.getNodeAttribute(e,"selected")||0)>0)this.setNodeAttribute(e,"selected",0);else{let r=0;this.forEachNode((o,a)=>{a.selected>r&&(r=a.selected)}),this.setNodeAttribute(e,"selected",r+1)}},n.prototype.getSelectedNodes=function(){return this.filterNodes((e,t)=>t.selected>0).sort((e,t)=>this.getNodeAttribute(e,"selected")-this.getNodeAttribute(t,"selected"))},n.prototype.updateSelectedNodesColor=function(e,t,r){!e||!t||!r?e?this.updateSelectedNodesAttributes({color:e}):t?this.updateSelectedNodesAttributes({stroke:t}):r&&this.updateSelectedNodesAttributes({labelColor:r}):this.updateSelectedNodesAttributes({color:e,stroke:t,labelColor:r})},n.prototype.updateSelectedNodesAttributes=function(e){this.getSelectedNodes().forEach(t=>{this.mergeNodeAttributes(t,e)})},n.prototype.connectSelectedNodes=function(e,t="directed"){const r=this.getSelectedNodes();if(!(r.length<1)){if(r.length>1)for(let o=0;o<r.length;o++)for(let a=o+1;a<r.length;a++){const s=r[o],l=r[a],h={color:e,selected:!1};t==="undirected"?this.mergeUndirectedEdge(s,l,h):this.mergeDirectedEdge(s,l,h)}else if(this.allowSelfLoops){const o=r[0],a={color:e,selected:!1};t==="undirected"?this.mergeUndirectedEdge(o,o,a):this.mergeDirectedEdge(o,o,a)}}},n.prototype.connectSelectedNodesInOrder=function(e,t="directed"){const r=this.getSelectedNodes();for(let o=0;o<r.length-1;o++){const a=r[o],s=r[o+1],l={color:e,selected:!1};t==="undirected"?this.mergeUndirectedEdge(a,s,l):this.mergeDirectedEdge(a,s,l)}}}function Dy(n){n.prototype.setDefaultEdgeWeight=function(e=1){this.updateEachEdgeAttributes((t,r)=>({...r,weight:e}))},n.prototype.getEdgeSourceTarget=function(e){return[this.source(e),this.target(e)]},n.prototype.updateSelectedEdgesName=function(e){this.updateSelectedEdgesAttributes({label:e})},n.prototype.updateSelectedEdgesInfo=function(e){this.updateSelectedEdgesAttributes({desc:e})},n.prototype.getEdgesForD3=function(){return this.edges().map(e=>{const{source:t,target:r,...o}=this.getEdgeAttributes(e);return{source:Number(t),target:Number(r),...o}})},n.prototype.selectEdge=function(e){this.setEdgeAttribute(e,"selected",!0)},n.prototype.deselectEdge=function(e){this.setEdgeAttribute(e,"selected",!1)},n.prototype.toggleEdgeSelection=function(e){if((this.getEdgeAttribute(e,"selected")||0)>0)this.setEdgeAttribute(e,"selected",0);else{let r=0;this.forEachEdge((o,a)=>{a.selected>r&&(r=a.selected)}),this.setEdgeAttribute(e,"selected",r+1)}},n.prototype.getSelectedEdges=function(){return this.filterEdges((e,t)=>t.selected>0).sort((e,t)=>this.getEdgeAttribute(e,"selected")-this.getEdgeAttribute(t,"selected"))},n.prototype.updateSelectedEdgesAttributes=function(e){this.getSelectedEdges().forEach(t=>{this.mergeEdgeAttributes(t,e)})},n.prototype.updateSelectedEdgesColor=function(e,t){const r={...e&&{color:e},...t&&{labelColor:t}};this.updateSelectedEdgesAttributes(r)},n.prototype.updateSelectedEdgesName=function(e){this.updateSelectedEdgesAttributes({label:e})},n.prototype.updateSelectedEdgesInfo=function(e){this.updateSelectedEdgesAttributes({desc:e})}}function Ny(n){n.prototype.addFace=function(e,t){console.log("jk");const r=e.join("_");t={...t,key:r,id:this._faces.size,nodes:e};var o=new Iy(r,e,t);this._faces.set(r,o)},n.prototype.faces=function(){return Array.from(this._faces.keys())},n.prototype.findFace=function(e){return e.sort(),e.join("_")},n.prototype.dropFace=function(e){this._faces.has(e)&&this._faces.delete(e)},n.prototype.hasFace=function(e){return this._faces.has(e)},n.prototype.faceNodeNeighbors=function(e){const t=[];return this.forEachFace((r,o)=>{o.nodes.includes(e)&&t.push(r)}),t},n.prototype.faceEdgeNeighbors=function(e){const{source:t,target:r}=this.getEdgeAttributes(e),o=[];return this.forEachFace((a,s)=>{s.nodes.includes(""+t)&&s.nodes.includes(""+r)&&o.push(a)}),o},n.prototype.forEachFace=function(e){for(const t of this._faces.values())e(t.key,t.attributes)},n.prototype.setFaceAttribute=function(e,t,r){this._faces.get(e).attributes[t]=r},n.prototype.getFaceAttribute=function(e,t){return this._faces.get(e).attributes[t]},n.prototype.getFaceAttributes=function(e){return this._faces.get(e).attributes},n.prototype.selectFace=function(e){this.setFaceAttribute(e,"selected",!0)},n.prototype.deselectFace=function(e){this.setFaceAttribute(e,"selected",!1)},n.prototype.toggleFaceSelection=function(e){if((this.getFaceAttribute(e,"selected")||0)>0)this.setFaceAttribute(e,"selected",0);else{let r=0;this.forEachFace((o,a)=>{a.selected>r&&(r=a.selected)}),this.setFaceAttribute(e,"selected",r+1)}},n.prototype.getSelectedFaces=function(){return this.faces().filter(e=>this.getFaceAttributes(e).selected>0).sort((e,t)=>this.getFaceAttribute(e,"selected")-this.getFaceAttribute(t,"selected"))},n.prototype.updateSelectedFacesAttributes=function(e){this.getSelectedFaces().forEach(t=>{const r=this.getFaceAttributes(t);this._faces.get(t).attributes={...r,...e}})},n.prototype.updateSelectedFacesColor=function(e,t){const r={...e&&{color:e},...t&&{labelColor:t}};this.updateSelectedFacesAttributes(r)},n.prototype.updateSelectedFacesName=function(e){this.updateSelectedFacesAttributes({label:e})},n.prototype.updateSelectedFacesInfo=function(e){this.updateSelectedFacesAttributes({desc:e})},n.prototype.updateSelectedFacesWeight=function(e){this.updateSelectedFacesAttributes({weight:e})},n.prototype.deleteSelectedFaces=function(){this.getSelectedFaces().forEach(e=>this.dropFace(e))}}class Iy{constructor(e,t,r){this.key=e,this.attributes=r,this.nodes=t}}class Xt extends Ne{constructor(e){super(e),this.isCustom=!0,this.on("nodeAdded",({key:t})=>{const r=this.getNodeAttributes(t);r.id||this.setNodeAttribute(t,"id",Number(t)),r.label===void 0&&this.setNodeAttribute(t,"label",void 0),r.weight===void 0&&this.setNodeAttribute(t,"weight",void 0),r.color===void 0&&this.setNodeAttribute(t,"color",void 0),r.labelColor===void 0&&this.setNodeAttribute(t,"labelColor",void 0),r.selected===void 0&&this.setNodeAttribute(t,"selected",!1),r.size===void 0&&this.setNodeAttribute(t,"size",.25),r.magnitude===void 0&&this.setNodeAttribute(t,"magnitude",1),r.desc===void 0&&this.setNodeAttribute(t,"desc",{})}),this.on("edgeAdded",({key:t,source:r,target:o})=>{const a=this.getEdgeAttributes(t);a.id||this.setEdgeAttribute(t,"id",this.size-1),a.label===void 0&&this.setEdgeAttribute(t,"label",void 0),a.weight===void 0&&this.setEdgeAttribute(t,"weight",void 0),a.color===void 0&&this.setEdgeAttribute(t,"color",void 0),a.labelColor===void 0&&this.setEdgeAttribute(t,"labelColor",void 0),a.source||this.setEdgeAttribute(t,"source",Number(r)),a.target||this.setEdgeAttribute(t,"target",Number(o)),a.selected===void 0&&this.setEdgeAttribute(t,"selected",!1),a.desc===void 0&&this.setEdgeAttribute(t,"desc",{})}),this._faces=new Map}nullCopy(e){var t=new Xt(jn({},this._options,e));return t.replaceAttributes(jn({},this.getAttributes())),t}deselectAll(){this.updateEachNodeAttributes((e,t)=>({...t,selected:0})),this.updateEachEdgeAttributes((e,t)=>({...t,selected:!1}))}deleteSelected(){this.getSelectedEdges().forEach(e=>this.dropEdge(e)),this.getSelectedNodes().forEach(e=>this.dropNode(e))}updateSelectedName(e){this.updateSelectedNodesAttributes({label:e}),this.updateSelectedEdgesAttributes({label:e})}updateSelectedInfo(e){this.updateSelectedNodesAttributes({desc:e}),this.updateSelectedEdgesAttributes({desc:e})}updateSelectedWeight(e){this.updateSelectedNodesAttributes({weight:e}),this.updateSelectedEdgesAttributes({weight:e})}selectPath(e){this.deselectAll(),e.forEach(t=>{this.hasNode(t)&&this.selectNode(t)});for(let t=0;t<e.length-1;t++){const r=e[t],o=e[t+1];if(this.hasEdge(r,o)){const a=this.edge(r,o);this.selectEdge(a)}}}copySubgraph(){const e=this.getSelectedNodes();return e.length===0?null:kt.subgraph(this,e)}cutSubgraph(){const e=this.copySubgraph();return e&&this.deleteSelected(),e}pasteSubgraph(e,t=!1,r={x:0,y:0}){if(!e)return;e.forEachNode((a,s)=>{const l={...s};"x"in l&&(l.x+=r.x),"y"in l&&(l.y+=r.y),e.replaceNodeAttributes(a,l)}),this.deselectAll();let o;return t?o=kt.union(this,e):o=kt.disjointUnion(this,e),this.clear(),this.import(o.export()),e}replace(e){this.clear(),this.import(e.export())}dropNode(e){const t=this.faceNodeNeighbors(e);t.length&&t.map(r=>{this.dropFace(r)}),super.dropNode(e)}dropEdge(e){const t=this.faceEdgeNeighbors(e);t.length&&t.map(r=>{this.dropFace(r)}),super.dropEdge(e)}export(){const e=super.export();var t=new Array(this._faces.size),r=0;return this._faces.forEach(function(o,a){t[r++]=Ly(a,o)}),e.faces=t,e}import(e){const t=super.import(e);for(const r of e.faces)this.addFace(r.nodes,r.attributes);return t}}function My(){for(var n=arguments[0],e=1,t=arguments.length;e<t;e++)if(arguments[e])for(var r in arguments[e])n[r]=arguments[e][r];return n}var jn=My;typeof Object.assign=="function"&&(jn=Object.assign);function Ly(n,e){var t={key:n,nodes:e.nodes};return Object.keys(e.attributes).length&&(t.attributes=jn({},e.attributes)),t}Cy(Xt);Dy(Xt);Ny(Xt);class zy extends Xt{constructor(e={}){const t=Object.assign({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new InvalidArgumentsGraphError("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new InvalidArgumentsGraphError(`DirectedGraph.from: inconsistent "${t.type}" type in given options!`);super(t)}}class $y extends Xt{constructor(e={}){const t=Object.assign({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new InvalidArgumentsGraphError("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new InvalidArgumentsGraphError(`UndirectedGraph.from: inconsistent "${t.type}" type in given options!`);super(t)}}var fr={},zi,Ys;function bt(){return Ys||(Ys=1,zi=function(e){return e!==null&&typeof e=="function"&&typeof e.prototype=="object"&&typeof e.prototype.addUndirectedEdgeWithKey=="function"&&typeof e.prototype.dropNode=="function"}),zi}var $i,Vs;function Ty(){if(Vs)return $i;Vs=1;var n=bt();return $i=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/complete: invalid Graph constructor.");var o=new t,a,s;for(a=0;a<r;a++)o.addNode(a);for(a=0;a<r;a++)for(s=a+1;s<r;s++)o.type!=="directed"&&o.addUndirectedEdge(a,s),o.type!=="undirected"&&(o.addDirectedEdge(a,s),o.addDirectedEdge(s,a));return o},$i}var Ti,Qs;function ya(){if(Qs)return Ti;Qs=1;var n=bt();return Ti=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/empty: invalid Graph constructor.");var o=new t,a;for(a=0;a<r;a++)o.addNode(a);return o},Ti}var Pi,Zs;function Py(){if(Zs)return Pi;Zs=1;var n=bt();return Pi=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/ladder: invalid Graph constructor.");var o=new t,a;for(a=0;a<r-1;a++)o.mergeEdge(a,a+1);for(a=r;a<r*2-1;a++)o.mergeEdge(a,a+1);for(a=0;a<r;a++)o.addEdge(a,a+r);return o},Pi}var Oi,Js;function Oy(){if(Js)return Oi;Js=1;var n=bt();return Oi=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/path: invalid Graph constructor.");for(var o=new t,a=0;a<r-1;a++)o.mergeEdge(a,a+1);return o},Oi}var eu;function Gy(){return eu||(eu=1,fr.complete=Ty(),fr.empty=ya(),fr.ladder=Py(),fr.path=Oy()),fr}var Pt=Gy(),vt={},Gi,tu;function Ry(){if(tu)return Gi;tu=1;function n(e){this.graph=e,this.stack=new Array(e.order),this.seen=new Set,this.size=0}return n.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},n.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},n.prototype.forEachNodeYetUnseen=function(e){var t=this.seen,r=this.graph;r.someNode(function(o,a){if(t.size===r.order)return!0;if(t.has(o))return!1;var s=e(o,a);return!!s})},n.prototype.has=function(e){return this.seen.has(e)},n.prototype.push=function(e){var t=this.seen.size;return this.seen.add(e),t===this.seen.size?!1:(this.stack[this.size++]=e,!0)},n.prototype.pushWith=function(e,t){var r=this.seen.size;return this.seen.add(e),r===this.seen.size?!1:(this.stack[this.size++]=t,!0)},n.prototype.pop=function(){if(this.size!==0)return this.stack[--this.size]},Gi=n,Gi}var ru;function qy(){if(ru)return vt;ru=1;var n=ke(),e=va().copyNode,t=qt().copyEdge,r=Ry();function o(b,_){if(!n(b))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(b.order){var S=new r(b),C=S.push.bind(S);S.forEachNodeYetUnseen(function(D){var k=[];S.push(D);for(var M;S.size!==0;)M=S.pop(),k.push(M),b.forEachNeighbor(M,C);_(k)})}}function a(b,_){if(!n(b))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(b.order){var S=new r(b),C=S.push.bind(S);S.forEachNodeYetUnseen(function(D){var k=0;S.push(D);for(var M;S.size!==0;)M=S.pop(),k++,b.forEachNeighbor(M,C);_(k)})}}function s(b,_,S){if(!n(b))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!b.order)return;var C=new r(b),D;function k(M,x,I,R,w,z,$){D===R&&(R=I),_(M,x,I,R,w,z,$)&&C.push(R)}C.forEachNodeYetUnseen(function(M){var x=0;for(C.push(M);C.size!==0;)D=C.pop(),x++,b.forEachEdge(D,k);S(x)})}function l(b){var _=0;return a(b,function(){_++}),_}function h(b){var _=[];return o(b,function(S){_.push(S)}),_}function d(b){if(!n(b))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!b.order)return[];var _=new r(b),S=_.push.bind(_),C=[],D;return _.forEachNodeYetUnseen(function(k){D=[],_.push(k);for(var M;_.size!==0;)M=_.pop(),D.push(M),b.forEachNeighbor(M,S);return D.length>C.length&&(C=D),C.length>_.countUnseenNodes()}),C}function p(b){var _=d(b),S=b.nullCopy();return _.forEach(function(C){e(S,C,b.getNodeAttributes(C))}),b.forEachEdge(function(C,D,k,M,x,I,R){S.hasNode(k)&&t(S,R,C,k,M,D)}),S}function v(b){var _=new Set(d(b));b.forEachNode(function(S){_.has(S)||b.dropNode(S)})}function y(b){if(!n(b))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!b.order)return[];if(b.type==="undirected")throw new Error("graphology-components: the given graph is undirected");var _=b.nodes(),S=[],C,D;if(!b.size){for(C=0,D=_.length;C<D;C++)S.push([_[C]]);return S}var k=1,M=[],x=[],I=new Map,R=new Set,w,z,$,T=function(q){var U,P=b.outboundNeighbors(q),te;I.set(q,k++),M.push(q),x.push(q);for(var J=0,F=P.length;J<F;J++)if(U=P[J],I.has(U)){if(te=I.get(U),!R.has(U))for(;I.get(M[M.length-1])>te;)M.pop()}else T(U);if(I.get(M[M.length-1])===I.get(q)){w=[];do z=x.pop(),w.push(z),R.add(z);while(z!==q);S.push(w),M.pop()}};for(C=0,D=_.length;C<D;C++)$=_[C],R.has($)||T($);return S}return vt.forEachConnectedComponent=o,vt.forEachConnectedComponentOrder=a,vt.forEachConnectedComponentOrderWithEdgeFilter=s,vt.countConnectedComponents=l,vt.connectedComponents=h,vt.largestConnectedComponent=d,vt.largestConnectedComponentSubgraph=p,vt.cropToLargestConnectedComponent=v,vt.stronglyConnectedComponents=y,vt}var _n=qy(),xt={},Jt={},Ri,nu;function ma(){if(nu)return Ri;nu=1;var n=dl(),e=n.ARRAY_BUFFER_SUPPORT,t=n.SYMBOL_SUPPORT;return Ri=function(o,a){var s,l,h,d,p;if(!o)throw new Error("obliterator/forEach: invalid iterable.");if(typeof a!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(o)||e&&ArrayBuffer.isView(o)||typeof o=="string"||o.toString()==="[object Arguments]"){for(h=0,d=o.length;h<d;h++)a(o[h],h);return}if(typeof o.forEach=="function"){o.forEach(a);return}if(t&&Symbol.iterator in o&&typeof o.next!="function"&&(o=o[Symbol.iterator]()),typeof o.next=="function"){for(s=o,h=0;p=s.next(),p.done!==!0;)a(p.value,h),h++;return}for(l in o)o.hasOwnProperty(l)&&a(o[l],l)},Ri}var qi,iu;function Fy(){if(iu)return qi;iu=1;var n=ar(),e=ma();function t(){this.clear()}return t.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},t.prototype.enqueue=function(r){return this.items.push(r),++this.size},t.prototype.dequeue=function(){if(this.size){var r=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,r}},t.prototype.peek=function(){if(this.size)return this.items[this.offset]},t.prototype.forEach=function(r,o){o=arguments.length>1?o:this;for(var a=this.offset,s=0,l=this.items.length;a<l;a++,s++)r.call(o,this.items[a],s,this)},t.prototype.toArray=function(){return this.items.slice(this.offset)},t.prototype.values=function(){var r=this.items,o=this.offset;return new n(function(){if(o>=r.length)return{done:!0};var a=r[o];return o++,{value:a,done:!1}})},t.prototype.entries=function(){var r=this.items,o=this.offset,a=0;return new n(function(){if(o>=r.length)return{done:!0};var s=r[o];return o++,{value:[a++,s],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.toString=function(){return this.toArray().join(",")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(r){var o=new t;return e(r,function(a){o.enqueue(a)}),o},t.of=function(){return t.from(arguments)},qi=t,qi}var Fi,ou;function jy(){return ou||(ou=1,Fi=function(e,t){var r=t.length;if(r!==0){var o=e.length;e.length+=r;for(var a=0;a<r;a++)e[o+a]=t[a]}}),Fi}var au;function ba(){if(au)return Jt;au=1;var n=ke(),e=Fy(),t=jy();function r(d,p,v){if(!n(d))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!d.hasNode(p))throw new Error('graphology-shortest-path: the "'+p+'" source node does not exist in the given graph.');if(!d.hasNode(v))throw new Error('graphology-shortest-path: the "'+v+'" target node does not exist in the given graph.');if(p=""+p,v=""+v,p===v)return[p];var y=d.inboundNeighbors.bind(d),b=d.outboundNeighbors.bind(d),_={},S={};_[p]=null,S[v]=null;var C=[p],D=[v],k,M,x,I,R,w,z,$,T=!1;e:for(;C.length&&D.length;)if(C.length<=D.length){for(k=C,C=[],R=0,z=k.length;R<z;R++)for(M=k[R],x=b(M),w=0,$=x.length;w<$;w++)if(I=x[w],I in _||(C.push(I),_[I]=M),I in S){T=!0;break e}}else for(k=D,D=[],R=0,z=k.length;R<z;R++)for(M=k[R],x=y(M),w=0,$=x.length;w<$;w++)if(I=x[w],I in S||(D.push(I),S[I]=M),I in _){T=!0;break e}if(!T)return null;for(var q=[];I;)q.unshift(I),I=_[I];for(I=S[q[q.length-1]];I;)q.push(I),I=S[I];return q.length?q:null}function o(d,p){if(!n(d))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!d.hasNode(p))throw new Error('graphology-shortest-path: the "'+p+'" source node does not exist in the given graph.');p=""+p;var v={},y={},b,_,S,C,D,k;for(v[p]=!0,y[p]=[p];Object.keys(v).length;){b=v,v={};for(S in b)for(_=d.outboundNeighbors(S),D=0,k=_.length;D<k;D++)C=_[D],y[C]||(y[C]=y[S].concat(C),v[C]=!0)}return y}function a(d,p,v){if(!n(p))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!p.hasNode(v))throw new Error('graphology-shortest-path: the "'+v+'" source node does not exist in the given graph.');v=""+v;var y=new Set,b={},_=0;b[v]=0;for(var S=[v],C,D,k;S.length!==0;){var M=[];for(C=0,D=S.length;C<D;C++)k=S[C],!y.has(k)&&(y.add(k),t(M,p[d](k)),b[k]=_);_++,S=M}return b}var s=a.bind(null,"outboundNeighbors"),l=a.bind(null,"neighbors");function h(d,p){p=""+p;var v=[],y={},b={},_=d.nodes(),S,C,D,k,M,x,I,R,w;for(x=0,R=_.length;x<R;x++)k=_[x],y[k]=[],b[k]=0;var z={};b[p]=1,z[p]=0;for(var $=e.of(p);$.size;)for(k=$.dequeue(),v.push(k),S=z[k],C=b[k],D=d.outboundNeighbors(k),I=0,w=D.length;I<w;I++)M=D[I],M in z||($.enqueue(M),z[M]=S+1),z[M]===S+1&&(b[M]+=C,y[M].push(k));return[v,y,b]}return Jt.bidirectional=r,Jt.singleSource=o,Jt.singleSourceLength=s,Jt.undirectedSingleSourceLength=l,Jt.brandes=h,Jt}var ji={},su;function By(){if(su)return ji;su=1;var n=function(){return!0};return ji.edgePathFromNodePath=function(e,t){var r=t.length,o,a,s,l;if(r<2)return a=t[0],l=e.multi?e.findEdge(a,a,n):e.edge(a,a),l?[l]:[];r--;var h=new Array(r);for(o=0;o<r;o++){if(a=t[o],s=t[o+1],l=e.multi?e.findOutboundEdge(a,s,n):e.edge(a,s),l===void 0)throw new Error("graphology-shortest-path: given path is impossible in given graph.");h[o]=l}return h},ji}var Or={},Gr={},uu;function kr(){if(uu)return Gr;uu=1;function n(r){return typeof r!="number"||isNaN(r)?1:r}function e(r,o){var a={},s=function(d){return typeof d>"u"?o:d};typeof o=="function"&&(s=o);var l=function(d){return s(d[r])},h=function(){return s(void 0)};return typeof r=="string"?(a.fromAttributes=l,a.fromGraph=function(d,p){return l(d.getNodeAttributes(p))},a.fromEntry=function(d,p){return l(p)}):typeof r=="function"?(a.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},a.fromGraph=function(d,p){return s(r(p,d.getNodeAttributes(p)))},a.fromEntry=function(d,p){return s(r(d,p))}):(a.fromAttributes=h,a.fromGraph=h,a.fromEntry=h),a}function t(r,o){var a={},s=function(d){return typeof d>"u"?o:d};typeof o=="function"&&(s=o);var l=function(d){return s(d[r])},h=function(){return s(void 0)};return typeof r=="string"?(a.fromAttributes=l,a.fromGraph=function(d,p){return l(d.getEdgeAttributes(p))},a.fromEntry=function(d,p){return l(p)},a.fromPartialEntry=a.fromEntry,a.fromMinimalEntry=a.fromEntry):typeof r=="function"?(a.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},a.fromGraph=function(d,p){var v=d.extremities(p);return s(r(p,d.getEdgeAttributes(p),v[0],v[1],d.getNodeAttributes(v[0]),d.getNodeAttributes(v[1]),d.isUndirected(p)))},a.fromEntry=function(d,p,v,y,b,_,S){return s(r(d,p,v,y,b,_,S))},a.fromPartialEntry=function(d,p,v,y){return s(r(d,p,v,y))},a.fromMinimalEntry=function(d,p){return s(r(d,p))}):(a.fromAttributes=h,a.fromGraph=h,a.fromEntry=h,a.fromMinimalEntry=h),a}return Gr.createNodeValueGetter=e,Gr.createEdgeValueGetter=t,Gr.createEdgeWeightGetter=function(r){return t(r,n)},Gr}var pr={},cu;function wa(){if(cu)return pr;cu=1;var n=function(o,a){return o<a?-1:o>a?1:0},e=function(o,a){return o<a?1:o>a?-1:0};function t(o){return function(a,s){return o(s,a)}}function r(o){return o===2?function(a,s){return a[0]<s[0]?-1:a[0]>s[0]?1:a[1]<s[1]?-1:a[1]>s[1]?1:0}:function(a,s){for(var l=0;l<o;){if(a[l]<s[l])return-1;if(a[l]>s[l])return 1;l++}return 0}}return pr.DEFAULT_COMPARATOR=n,pr.DEFAULT_REVERSE_COMPARATOR=e,pr.reverseComparator=t,pr.createTupleComparator=r,pr}var gr={},Bi={},lu;function Jr(){return lu||(lu=1,function(n){var e=Math.pow(2,8)-1,t=Math.pow(2,16)-1,r=Math.pow(2,32)-1,o=Math.pow(2,7)-1,a=Math.pow(2,15)-1,s=Math.pow(2,31)-1;n.getPointerArray=function(h){var d=h-1;if(d<=e)return Uint8Array;if(d<=t)return Uint16Array;if(d<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},n.getSignedPointerArray=function(h){var d=h-1;return d<=o?Int8Array:d<=a?Int16Array:d<=s?Int32Array:Float64Array},n.getNumberType=function(h){return h===(h|0)?Math.sign(h)===-1?h<=127&&h>=-128?Int8Array:h<=32767&&h>=-32768?Int16Array:Int32Array:h<=255?Uint8Array:h<=65535?Uint16Array:Uint32Array:Float64Array};var l={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};n.getMinimalRepresentation=function(h,d){var p=null,v=0,y,b,_,S,C;for(S=0,C=h.length;S<C;S++)_=d?d(h[S]):h[S],b=n.getNumberType(_),y=l[b.name],y>v&&(v=y,p=b);return p},n.isTypedArray=function(h){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(h)},n.concat=function(){var h=0,d,p,v;for(d=0,v=arguments.length;d<v;d++)h+=arguments[d].length;var y=new arguments[0].constructor(h);for(d=0,p=0;d<v;d++)y.set(arguments[d],p),p+=arguments[d].length;return y},n.indices=function(h){for(var d=n.getPointerArray(h),p=new d(h),v=0;v<h;v++)p[v]=v;return p}}(Bi)),Bi}var du;function Xn(){if(du)return gr;du=1;var n=ma(),e=Jr();function t(s){return Array.isArray(s)||e.isTypedArray(s)}function r(s){if(typeof s.length=="number")return s.length;if(typeof s.size=="number")return s.size}function o(s){var l=r(s),h=typeof l=="number"?new Array(l):[],d=0;return n(s,function(p){h[d++]=p}),h}function a(s){var l=r(s),h=typeof l=="number"?e.getPointerArray(l):Array,d=typeof l=="number"?new Array(l):[],p=typeof l=="number"?new h(l):[],v=0;return n(s,function(y){d[v]=y,p[v]=v++}),[d,p]}return gr.isArrayLike=t,gr.guessLength=r,gr.toArray=o,gr.toArrayWithIndices=a,gr}var Ui,hu;function Ea(){if(hu)return Ui;hu=1;var n=ma(),e=wa(),t=Xn(),r=e.DEFAULT_COMPARATOR,o=e.reverseComparator;function a(D,k,M,x){for(var I=k[x],R,w;x>M;){if(R=x-1>>1,w=k[R],D(I,w)<0){k[x]=w,x=R;continue}break}k[x]=I}function s(D,k,M){for(var x=k.length,I=M,R=k[M],w=2*M+1,z;w<x;)z=w+1,z<x&&D(k[w],k[z])>=0&&(w=z),k[M]=k[w],M=w,w=2*M+1;k[M]=R,a(D,k,I,M)}function l(D,k,M){k.push(M),a(D,k,0,k.length-1)}function h(D,k){var M=k.pop();if(k.length!==0){var x=k[0];return k[0]=M,s(D,k,0),x}return M}function d(D,k,M){if(k.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var x=k[0];return k[0]=M,s(D,k,0),x}function p(D,k,M){var x;return k.length!==0&&D(k[0],M)<0&&(x=k[0],k[0]=M,M=x,s(D,k,0)),M}function v(D,k){for(var M=k.length,x=M>>1,I=x;--I>=0;)s(D,k,I)}function y(D,k){for(var M=k.length,x=0,I=new Array(M);x<M;)I[x++]=h(D,k);return I}function b(D,k,M){arguments.length===2&&(M=k,k=D,D=r);var x=o(D),I,R,w,z=1/0,$;if(k===1){if(t.isArrayLike(M)){for(I=0,R=M.length;I<R;I++)w=M[I],(z===1/0||D(w,z)<0)&&(z=w);return $=new M.constructor(1),$[0]=z,$}return n(M,function(q){(z===1/0||D(q,z)<0)&&(z=q)}),[z]}if(t.isArrayLike(M)){if(k>=M.length)return M.slice().sort(D);for($=M.slice(0,k),v(x,$),I=k,R=M.length;I<R;I++)x(M[I],$[0])>0&&d(x,$,M[I]);return $.sort(D)}var T=t.guessLength(M);return T!==null&&T<k&&(k=T),$=new Array(k),I=0,n(M,function(q){I<k?$[I]=q:(I===k&&v(x,$),x(q,$[0])>0&&d(x,$,q)),I++}),$.length>I&&($.length=I),$.sort(D)}function _(D,k,M){arguments.length===2&&(M=k,k=D,D=r);var x=o(D),I,R,w,z=-1/0,$;if(k===1){if(t.isArrayLike(M)){for(I=0,R=M.length;I<R;I++)w=M[I],(z===-1/0||D(w,z)>0)&&(z=w);return $=new M.constructor(1),$[0]=z,$}return n(M,function(q){(z===-1/0||D(q,z)>0)&&(z=q)}),[z]}if(t.isArrayLike(M)){if(k>=M.length)return M.slice().sort(x);for($=M.slice(0,k),v(D,$),I=k,R=M.length;I<R;I++)D(M[I],$[0])>0&&d(D,$,M[I]);return $.sort(x)}var T=t.guessLength(M);return T!==null&&T<k&&(k=T),$=new Array(k),I=0,n(M,function(q){I<k?$[I]=q:(I===k&&v(D,$),D(q,$[0])>0&&d(D,$,q)),I++}),$.length>I&&($.length=I),$.sort(x)}function S(D){if(this.clear(),this.comparator=D||r,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}S.prototype.clear=function(){this.items=[],this.size=0},S.prototype.push=function(D){return l(this.comparator,this.items,D),++this.size},S.prototype.peek=function(){return this.items[0]},S.prototype.pop=function(){return this.size!==0&&this.size--,h(this.comparator,this.items)},S.prototype.replace=function(D){return d(this.comparator,this.items,D)},S.prototype.pushpop=function(D){return p(this.comparator,this.items,D)},S.prototype.consume=function(){return this.size=0,y(this.comparator,this.items)},S.prototype.toArray=function(){return y(this.comparator,this.items.slice())},S.prototype.inspect=function(){var D=this.toArray();return Object.defineProperty(D,"constructor",{value:S,enumerable:!1}),D},typeof Symbol<"u"&&(S.prototype[Symbol.for("nodejs.util.inspect.custom")]=S.prototype.inspect);function C(D){if(this.clear(),this.comparator=D||r,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=o(this.comparator)}return C.prototype=S.prototype,S.from=function(D,k){var M=new S(k),x;return t.isArrayLike(D)?x=D.slice():x=t.toArray(D),v(M.comparator,x),M.items=x,M.size=x.length,M},C.from=function(D,k){var M=new C(k),x;return t.isArrayLike(D)?x=D.slice():x=t.toArray(D),v(M.comparator,x),M.items=x,M.size=x.length,M},S.siftUp=s,S.siftDown=a,S.push=l,S.pop=h,S.replace=d,S.pushpop=p,S.heapify=v,S.consume=y,S.nsmallest=b,S.nlargest=_,S.MinHeap=S,S.MaxHeap=C,Ui=S,Ui}var fu;function Uy(){if(fu)return Or;fu=1;var n=ke(),e=kr().createEdgeWeightGetter,t=Ea(),r="weight";function o(v,y){return v[0]>y[0]?1:v[0]<y[0]?-1:v[1]>y[1]?1:v[1]<y[1]?-1:v[2]>y[2]?1:v[2]<y[2]?-1:0}function a(v,y){return v[0]>y[0]?1:v[0]<y[0]?-1:v[1]>y[1]?1:v[1]<y[1]?-1:v[2]>y[2]?1:v[2]<y[2]?-1:v[3]>y[3]?1:v[3]<y[3]?-1:0}function s(v,y,b,_){if(y=""+y,b=""+b,!n(v))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(y&&!v.hasNode(y))throw new Error('graphology-shortest-path/dijkstra: the "'+y+'" source node does not exist in the given graph.');if(b&&!v.hasNode(b))throw new Error('graphology-shortest-path/dijkstra: the "'+b+'" target node does not exist in the given graph.');if(_=e(_||r).fromMinimalEntry,y===b)return[0,[y]];var S=[{},{}],C=[{},{}],D=[new t(o),new t(o)],k=[{},{}];C[0][y]=[y],C[1][b]=[b],k[0][y]=0,k[1][b]=0;var M=[],x=1/0,I=0,R=1,w,z,$,T,q,U,P,te,J;for(D[0].push([0,I++,y]),D[1].push([0,I++,b]);D[0].size&&D[1].size;)if(R=1-R,w=D[R].pop(),T=w[0],q=w[2],!(q in S[R])){if(S[R][q]=T,q in S[1-R])return[x,M];for(z=R===1?v.inboundEdges(q):v.outboundEdges(q),te=0,J=z.length;te<J;te++){if(P=z[te],U=v.opposite(q,P),$=S[R][q]+_(P,v.getEdgeAttributes(P)),U in S[R]&&$<S[R][U])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(U in k[R])||$<k[R][U])&&(k[R][U]=$,D[R].push([$,I++,U]),C[R][U]=C[R][q].concat(U),U in k[0]&&U in k[1]&&(T=k[0][U]+k[1][U],(M.length===0||x>T)&&(x=T,M=C[0][U].concat(C[1][U].slice(0,-1).reverse()))))}}return[1/0,null]}function l(v,y,b,_,S,C){if(!n(v))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");b=e(b||r).fromMinimalEntry;var D={},k={},M=new t(o),x=0,I,R,w,z,$,T,q,U,P,te,J;for(U=0,te=y.length;U<te;U++)z=y[U],k[z]=0,M.push([0,x++,z]),C[z]=[z];for(;M.size;)if(R=M.pop(),q=R[0],z=R[2],!(z in D)){if(D[z]=q,z===S)break;for(I=v.outboundEdges(z),P=0,J=I.length;P<J;P++){if(T=I[P],$=v.opposite(z,T),w=b(T,v.getEdgeAttributes(T))+D[z],$ in D&&w<D[$])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!($ in k)||w<k[$])&&(k[$]=w,M.push([w,x++,$]),C[$]=C[z].concat($))}}return D}function h(v,y,b){var _={};return l(v,[y],b,0,null,_),_}function d(v,y,b,_){return s(v,y,b,_)[1]}function p(v,y,b){y=""+y,b=e(b||r).fromMinimalEntry;var _=[],S={},C={},D=v.nodes(),k,M,x,I,R,w,z,$,T,q;for(T=0,q=D.length;T<q;T++)w=D[T],S[w]=[],C[w]=0;var U={};C[y]=1;var P={};P[y]=0;var te=0,J=new t(a);for(J.push([0,te++,y,y]);J.size;)if(M=J.pop(),I=M[0],x=M[2],w=M[3],!(w in U))for(C[w]+=C[x],_.push(w),U[w]=I,k=v.outboundEdges(w),T=0,q=k.length;T<q;T++)$=k[T],z=v.opposite(w,$),R=I+b($,v.getEdgeAttributes($)),!(z in U)&&(!(z in P)||R<P[z])?(P[z]=R,J.push([R,te++,w,z]),C[z]=0,S[z]=[w]):R===P[z]&&(C[z]+=C[w],S[z].push(w));return[_,S,C]}return Or.bidirectional=d,Or.singleSource=h,Or.brandes=p,Or}var pu;function Hy(){if(pu)return xt;pu=1;var n=ba(),e=By();return xt.unweighted=n,xt.dijkstra=Uy(),xt.bidirectional=n.bidirectional,xt.singleSource=n.singleSource,xt.singleSourceLength=n.singleSourceLength,xt.undirectedSingleSourceLength=n.undirectedSingleSourceLength,xt.brandes=n.brandes,xt.edgePathFromNodePath=e.edgePathFromNodePath,xt}var gu=Hy(),qe={},_t={},Hi,vu;function Nl(){if(vu)return Hi;vu=1;var n=ke();return Hi=function(t){if(!n(t))throw new Error("graphology-metrics/simple-size: the given graph is not a valid graphology instance.");if(!t.multi)return t.size;var r=0,o=0;function a(){r++}function s(){o++}return t.forEachNode(function(l){t.type!=="directed"&&t.forEachUndirectedNeighbor(l,a),t.type!=="undirected"&&t.forEachOutNeighbor(l,s)}),r/2+o},Hi}var yu;function Il(){if(yu)return _t;yu=1;var n=ke(),e=Nl();function t(s,l){return 2*l/(s*(s-1))}function r(s,l){return l/(s*(s-1))}function o(s,l){var h=s*(s-1);return l/(h+h/2)}function a(s,l,h){var d,p;if(arguments.length>3){if(d=h,p=arguments[3],typeof d!="number"||d<0)throw new Error("graphology-metrics/density: given order is not a valid number.");if(typeof p!="number"||p<0)throw new Error("graphology-metrics/density: given size is not a valid number.")}else{if(!n(h))throw new Error("graphology-metrics/density: given graph is not a valid graphology instance.");d=h.order,p=h.size,h.multi&&l===!1&&(p=e(h))}if(d<2)return 0;s===null&&(s=h.type),l===null&&(l=h.multi);var v;return s==="undirected"?v=t:s==="directed"?v=r:v=o,v(d,p)}return _t.abstractDensity=a,_t.density=a.bind(null,null,null),_t.directedDensity=a.bind(null,"directed",!1),_t.undirectedDensity=a.bind(null,"undirected",!1),_t.mixedDensity=a.bind(null,"mixed",!1),_t.multiDirectedDensity=a.bind(null,"directed",!0),_t.multiUndirectedDensity=a.bind(null,"undirected",!0),_t.multiMixedDensity=a.bind(null,"mixed",!0),_t}var Sn={},mu;function Wy(){if(mu)return Sn;mu=1;var n=ke();function e(r,o){if(!n(r))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var a=[].concat(o),s,l,h,d={};for(h=0;h<a.length;h++)l=a[h],d[l]=[1/0,-1/0];return r.forEachNode(function(p,v){for(h=0;h<a.length;h++)l=a[h],s=v[l],s<d[l][0]&&(d[l][0]=s),s>d[l][1]&&(d[l][1]=s)}),typeof o=="string"?d[o]:d}function t(r,o){if(!n(r))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var a=[].concat(o),s,l,h,d={};for(h=0;h<a.length;h++)l=a[h],d[l]=[1/0,-1/0];return r.forEachEdge(function(p,v){for(h=0;h<a.length;h++)l=a[h],s=v[l],s<d[l][0]&&(d[l][0]=s),s>d[l][1]&&(d[l][1]=s)}),typeof o=="string"?d[o]:d}return Sn.nodeExtent=e,Sn.edgeExtent=t,Sn}var Wi,bu;function Ml(){if(bu)return Wi;bu=1;var n=ke(),e=ba().singleSourceLength;return Wi=function(r,o){if(!n(r))throw new Error("graphology-metrics/eccentricity: given graph is not a valid graphology instance.");if(r.size===0)return 1/0;var a=-1/0,s=e(r,o),l,h,d=0;for(l in s)h=s[l],h>a&&(a=h),d++;return d<r.order?1/0:a},Wi}var Ki,wu;function Ky(){if(wu)return Ki;wu=1;var n=ke(),e=Ml();return Ki=function(r){if(!n(r))throw new Error("graphology-metrics/diameter: given graph is not a valid graphology instance.");if(r.size===0)return 1/0;var o=-1/0;return r.someNode(function(a){var s=e(r,a);return s>o&&(o=s),o===1/0}),o},Ki}var Xi,Eu;function Nt(){if(Eu)return Xi;Eu=1;function n(t){return!t||typeof t!="object"||typeof t=="function"||Array.isArray(t)||t instanceof Set||t instanceof Map||t instanceof RegExp||t instanceof Date}function e(t,r){t=t||{};var o={};for(var a in r){var s=t[a],l=r[a];if(!n(l)){o[a]=e(s,l);continue}s===void 0?o[a]=l:o[a]=s}return o}return Xi=e,Xi}var Yi,xu;function xa(){if(xu)return Yi;xu=1;var n=ke();return Yi=function(t){if(!n(t))throw new Error("graphology-utils/infer-type: expecting a valid graphology instance.");var r=t.type;return r!=="mixed"?r:t.directedSize===0&&t.undirectedSize===0||t.directedSize>0&&t.undirectedSize>0?"mixed":t.directedSize>0?"directed":"undirected"},Yi}var Vi,_u;function Xy(){if(_u)return Vi;_u=1;var n=Nt(),e=ke(),t=xa(),r=kr(),o={getNodeCommunity:"community",getEdgeWeight:"weight",resolution:1};function a(k,M){var x=new Array(k.order),I=new Float64Array(k.order),R={},w=0,z=r.createEdgeWeightGetter(M.getEdgeWeight).fromEntry,$=r.createNodeValueGetter(M.getNodeCommunity).fromEntry,T=0,q={};return k.forEachNode(function(U,P){q[U]=T,x[T++]=$(U,P)}),k.forEachUndirectedEdge(function(U,P,te,J,F,A,B){var H=z(U,P,te,J,F,A,B);w+=H,R[U]=H,I[q[te]]+=H,te!==J&&(I[q[J]]+=H)}),{weights:R,communities:x,weightedDegrees:I,M:w}}function s(k,M){var x=new Array(k.order),I=new Float64Array(k.order),R=new Float64Array(k.order),w={},z=0,$=r.createEdgeWeightGetter(M.getEdgeWeight).fromEntry,T=r.createNodeValueGetter(M.getNodeCommunity).fromEntry,q=0,U={};return k.forEachNode(function(P,te){U[P]=q,x[q++]=T(P,te)}),k.forEachDirectedEdge(function(P,te,J,F,A,B,H){var Q=$(P,te,J,F,A,B,H);z+=Q,w[P]=Q,R[U[J]]+=Q,I[U[F]]+=Q}),{weights:w,communities:x,weightedInDegrees:I,weightedOutDegrees:R,M:z}}function l(k,M){var x=M.resolution,I=a(k,M),R=I.communities,w=I.weightedDegrees,z=I.M,$=k.nodes(),T,q,U,P,te,J,F=0,A=z*2;for(T=0,U=k.order;T<U;T++)for(q=0;q<U;q++)R[T]===R[q]&&(J=k.undirectedEdge($[T],$[q]),P=I.weights[J]||0,te=w[T]*w[q],T===q&&typeof J<"u"?F+=(P-te/A*x)*2:F+=P-te/A*x);return F/A}function h(k,M){var x=M.resolution,I=s(k,M),R=I.communities,w=I.weightedInDegrees,z=I.weightedOutDegrees,$=I.M,T=k.nodes(),q,U,P,te,J,F,A=0;for(q=0,P=k.order;q<P;q++)for(U=0;U<P;U++)R[q]===R[U]&&(F=k.directedEdge(T[q],T[U]),te=I.weights[F]||0,J=w[q]*z[U],A+=te-J/$*x);return A/$}function d(k,M){var x={},I={},R={},w=r.createNodeValueGetter(M.getNodeCommunity).fromEntry;return k.forEachNode(function(z,$){var T=w(z,$);if(x[z]=T,typeof T>"u")throw new Error('graphology-metrics/modularity: the "'+z+'" node is not in the partition.');I[T]=0,R[T]=0}),{communities:x,totalWeights:I,internalWeights:R}}function p(k,M){var x={},I={},R={},w={},z=r.createNodeValueGetter(M.getNodeCommunity).fromEntry;return k.forEachNode(function($,T){var q=z($,T);if(x[$]=q,typeof q>"u")throw new Error('graphology-metrics/modularity: the "'+$+'" node is not in the partition.');I[q]=0,R[q]=0,w[q]=0}),{communities:x,totalInWeights:I,totalOutWeights:R,internalWeights:w}}function v(k,M){var x=M.resolution,I=d(k,M),R=0,w=I.totalWeights,z=I.internalWeights,$=I.communities,T=r.createEdgeWeightGetter(M.getEdgeWeight).fromEntry;k.forEachUndirectedEdge(function(te,J,F,A,B,H,Q){var W=T(te,J,F,A,B,H,Q);R+=W;var Y=$[F],X=$[A];w[Y]+=W,w[X]+=W,Y===X&&(z[Y]+=W*2)});var q=0,U=R*2;for(var P in z)q+=z[P]/U-Math.pow(w[P]/U,2)*x;return q}function y(k,M){var x=M.resolution,I=p(k,M),R=0,w=I.totalInWeights,z=I.totalOutWeights,$=I.internalWeights,T=I.communities,q=r.createEdgeWeightGetter(M.getEdgeWeight).fromEntry;k.forEachDirectedEdge(function(te,J,F,A,B,H,Q){var W=q(te,J,F,A,B,H,Q);R+=W;var Y=T[F],X=T[A];z[Y]+=W,w[X]+=W,Y===X&&($[Y]+=W)});var U=0;for(var P in $)U+=$[P]/R-w[P]*z[P]/Math.pow(R,2)*x;return U}function b(k,M,x,I){return I/(2*k)-M*x/(2*(k*k))}function _(k,M,x,I,R,w){return w/k-(R*M+I*x)/(k*k)}function S(k,M){if(!e(k))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(k.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(k.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var x=t(k);if(x==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return M=n(M,o),x==="directed"?h(k,M):l(k,M)}function C(k,M){if(!e(k))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(k.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(k.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var x=t(k);if(x==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return M=n(M,o),x==="directed"?y(k,M):v(k,M)}var D=C;return D.sparse=C,D.dense=S,D.undirectedDelta=b,D.directedDelta=_,Vi=D,Vi}var Qi,Su;function Yy(){if(Su)return Qi;Su=1;var n=ke(),e=kr().createEdgeWeightGetter,t="weight";return Qi=function(o,a){if(!n(o))throw new Error("graphology-metrics/weighted-size: the given graph is not a valid graphology instance.");a=e(a||t).fromEntry;var s=0;return o.forEachEdge(function(l,h,d,p,v,y,b){s+=a(l,h,d,p,v,y,b)}),s},Qi}var Au;function Vy(){if(Au)return qe;Au=1;var n=Il(),e=Wy();return qe.diameter=Ky(),qe.modularity=Xy(),qe.simpleSize=Nl(),qe.weightedSize=Yy(),qe.abstractDensity=n.abstractDensity,qe.density=n.density,qe.directedDensity=n.directedDensity,qe.undirectedDensity=n.undirectedDensity,qe.mixedDensity=n.mixedDensity,qe.multiDirectedDensity=n.multiDirectedDensity,qe.multiUndirectedDensity=n.multiUndirectedDensity,qe.multiMixedDensity=n.multiMixedDensity,qe.nodeExtent=e.nodeExtent,qe.edgeExtent=e.edgeExtent,qe}var ku=Vy(),An={},Zi,Cu;function Ll(){if(Cu)return Zi;Cu=1;var n=ke(),e=xa(),t=Nt(),r=kr().createEdgeWeightGetter,o={edgeDisparityAttribute:"disparity",getEdgeWeight:"weight"};function a(l,h,d){if(!n(h))throw new Error("graphology-metrics/edge/disparity: the given graph is not a valid graphology instance.");if(h.multi||e(h)==="mixed")throw new Error("graphology-metrics/edge/disparity: not defined for multi nor mixed graphs.");d=t(d,o);var p=r(d.getEdgeWeight).fromEntry,v={};h.forEachNode(function(C){v[C]=0}),h.forEachEdge(function(C,D,k,M,x,I,R){var w=p(C,D,k,M,x,I,R);v[k]+=w,v[M]+=w});var y,b,_,S={};if(h.forEachAssymetricAdjacencyEntry(function(C,D,k,M,x,I,R){var w=p(x,I,C,D,k,M,R);y!==C&&(y=C,b=h.degree(C),_=v[C]);var z=h.degree(D),$=v[D],T=w/_,q=w/$,U=Math.pow(1-T,b-1),P=Math.pow(1-q,z-1);S[x]=Math.min(U,P)}),l){h.updateEachEdgeAttributes(function(C,D){return D[d.edgeDisparityAttribute]=S[C],D},{attributes:[d.edgeDisparityAttribute]});return}return S}var s=a.bind(null,!1);return s.assign=a.bind(null,!0),Zi=s,Zi}var Ji={},Du;function zl(){return Du||(Du=1,function(n){n.intersection=function(){if(arguments.length<2)throw new Error("mnemonist/Set.intersection: needs at least two arguments.");var e=new Set,t=1/0,r=null,o,a,s=arguments.length;for(a=0;a<s;a++){if(o=arguments[a],o.size===0)return e;o.size<t&&(t=o.size,r=o)}for(var l=r.values(),h,d,p,v;h=l.next(),!h.done;){for(d=h.value,p=!0,a=0;a<s;a++)if(v=arguments[a],v!==r&&!v.has(d)){p=!1;break}p&&e.add(d)}return e},n.union=function(){if(arguments.length<2)throw new Error("mnemonist/Set.union: needs at least two arguments.");var e=new Set,t,r=arguments.length,o,a;for(t=0;t<r;t++)for(o=arguments[t].values();a=o.next(),!a.done;)e.add(a.value);return e},n.difference=function(e,t){if(!e.size)return new Set;if(!t.size)return new Set(e);for(var r=new Set,o=e.values(),a;a=o.next(),!a.done;)t.has(a.value)||r.add(a.value);return r},n.symmetricDifference=function(e,t){for(var r=new Set,o=e.values(),a;a=o.next(),!a.done;)t.has(a.value)||r.add(a.value);for(o=t.values();a=o.next(),!a.done;)e.has(a.value)||r.add(a.value);return r},n.isSubset=function(e,t){var r=e.values(),o;if(e===t)return!0;if(e.size>t.size)return!1;for(;o=r.next(),!o.done;)if(!t.has(o.value))return!1;return!0},n.isSuperset=function(e,t){return n.isSubset(t,e)},n.add=function(e,t){for(var r=t.values(),o;o=r.next(),!o.done;)e.add(o.value)},n.subtract=function(e,t){for(var r=t.values(),o;o=r.next(),!o.done;)e.delete(o.value)},n.intersect=function(e,t){for(var r=e.values(),o;o=r.next(),!o.done;)t.has(o.value)||e.delete(o.value)},n.disjunct=function(e,t){for(var r=e.values(),o,a=[];o=r.next(),!o.done;)t.has(o.value)&&a.push(o.value);for(r=t.values();o=r.next(),!o.done;)e.has(o.value)||e.add(o.value);for(var s=0,l=a.length;s<l;s++)e.delete(a[s])},n.intersectionSize=function(e,t){var r;if(e.size>t.size&&(r=e,e=t,t=r),e.size===0)return 0;if(e===t)return e.size;for(var o=e.values(),a,s=0;a=o.next(),!a.done;)t.has(a.value)&&s++;return s},n.unionSize=function(e,t){var r=n.intersectionSize(e,t);return e.size+t.size-r},n.jaccard=function(e,t){var r=n.intersectionSize(e,t);if(r===0)return 0;var o=e.size+t.size-r;return r/o},n.overlap=function(e,t){var r=n.intersectionSize(e,t);return r===0?0:r/Math.min(e.size,t.size)}}(Ji)),Ji}var eo,Nu;function Qy(){if(Nu)return eo;Nu=1;var n=ke(),e=zl().intersectionSize;function t(o,a){if(!n(a))throw new Error("graphology-metrics/simmelian-strength: given graph is not a valid graphology instance.");var s={};if(a.forEachNode(function(h){s[h]=new Set(a.neighbors(h))}),!o){var l={};return a.forEachEdge(function(h,d,p,v){l[h]=e(s[p],s[v])}),l}a.updateEachEdgeAttributes(function(h,d,p,v){return d.simmelianStrength=e(s[p],s[v]),d},{attributes:["simmelianStrength"]})}var r=t.bind(null,!1);return r.assign=t.bind(null,!0),eo=r,eo}var Iu;function Zy(){return Iu||(Iu=1,An.disparity=Ll(),An.simmelianStrength=Qy()),An}var Jy=Zy(),to,Mu;function $l(){if(Mu)return to;Mu=1;var n=Xn(),e=ar();function t(r,o){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof o!="number"||o<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=r,this.capacity=o,this.items=new r(this.capacity),this.clear()}return t.prototype.clear=function(){this.start=0,this.size=0},t.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var o=this.start+this.size;return o>=this.capacity&&(o-=this.capacity),this.items[o]=r,++this.size},t.prototype.unshift=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var o=this.start-1;return this.start===0&&(o=this.capacity-1),this.items[o]=r,this.start=o,++this.size},t.prototype.pop=function(){if(this.size!==0){this.size--;var r=this.start+this.size;return r>=this.capacity&&(r-=this.capacity),this.items[r]}},t.prototype.shift=function(){if(this.size!==0){var r=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[r]}},t.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]},t.prototype.peekLast=function(){if(this.size!==0){var r=this.start+this.size-1;return r>=this.capacity&&(r-=this.capacity),this.items[r]}},t.prototype.get=function(r){if(!(this.size===0||r>=this.capacity))return r=this.start+r,r>=this.capacity&&(r-=this.capacity),this.items[r]},t.prototype.forEach=function(r,o){o=arguments.length>1?o:this;for(var a=this.capacity,s=this.size,l=this.start,h=0;h<s;)r.call(o,this.items[l],h,this),l++,h++,l===a&&(l=0)},t.prototype.toArray=function(){var r=this.start+this.size;if(r<this.capacity)return this.items.slice(this.start,r);for(var o=new this.ArrayClass(this.size),a=this.capacity,s=this.size,l=this.start,h=0;h<s;)o[h]=this.items[l],l++,h++,l===a&&(l=0);return o},t.prototype.values=function(){var r=this.items,o=this.capacity,a=this.size,s=this.start,l=0;return new e(function(){if(l>=a)return{done:!0};var h=r[s];return s++,l++,s===o&&(s=0),{value:h,done:!1}})},t.prototype.entries=function(){var r=this.items,o=this.capacity,a=this.size,s=this.start,l=0;return new e(function(){if(l>=a)return{done:!0};var h=r[s];return s++,s===o&&(s=0),{value:[l++,h],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(r,o,a){if(arguments.length<3&&(a=n.guessLength(r),typeof a!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var s=new t(o,a);if(n.isArrayLike(r)){var l,h;for(l=0,h=r.length;l<h;l++)s.items[l]=r[l];return s.size=h,s}return n.forEach(r,function(d){s.push(d)}),s},to=t,to}var ro,Lu;function em(){if(Lu)return ro;Lu=1;var n=ar(),e=Jr().getPointerArray;function t(r){var o=e(r);this.size=0,this.length=r,this.dense=new o(r),this.sparse=new o(r)}return t.prototype.clear=function(){this.size=0},t.prototype.has=function(r){var o=this.sparse[r];return o<this.size&&this.dense[o]===r},t.prototype.add=function(r){var o=this.sparse[r];return o<this.size&&this.dense[o]===r?this:(this.dense[this.size]=r,this.sparse[r]=this.size,this.size++,this)},t.prototype.delete=function(r){var o=this.sparse[r];return o>=this.size||this.dense[o]!==r?!1:(o=this.dense[this.size-1],this.dense[this.sparse[r]]=o,this.sparse[o]=this.sparse[r],this.size--,!0)},t.prototype.forEach=function(r,o){o=arguments.length>1?o:this;for(var a,s=0;s<this.size;s++)a=this.dense[s],r.call(o,a,a)},t.prototype.values=function(){var r=this.size,o=this.dense,a=0;return new n(function(){if(a<r){var s=o[a];return a++,{value:s}}return{done:!0}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.inspect=function(){for(var r=new Set,o=0;o<this.size;o++)r.add(this.dense[o]);return Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r.length=this.length,r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),ro=t,ro}var kn={},zu;function Yn(){if(zu)return kn;zu=1;var n=Jr(),e=kr().createEdgeWeightGetter;function t(a,s){return a==="outbound"||a==="inbound"?s.directedSize+s.undirectedSize*2:a==="in"||a==="out"||a==="directed"?s.directedSize:s.undirectedSize*2}function r(a,s){s=s||"outbound";var l=a[s+"Neighbors"].bind(a),h=t(s,a),d=n.getPointerArray(h),p=n.getPointerArray(a.order);this.graph=a,this.neighborhood=new p(h),this.starts=new d(a.order+1),this.nodes=a.nodes();var v={},y,b,_,S,C,D,k=0;for(y=0,b=a.order;y<b;y++)v[this.nodes[y]]=y;for(y=0,b=a.order;y<b;y++)for(C=this.nodes[y],D=l(C),this.starts[y]=k,_=0,S=D.length;_<S;_++)this.neighborhood[k++]=v[D[_]];this.starts[y]=h}r.prototype.bounds=function(a){return[this.starts[a],this.starts[a+1]]},r.prototype.project=function(){var a=this,s={};return a.nodes.forEach(function(l,h){s[l]=Array.from(a.neighborhood.slice(a.starts[h],a.starts[h+1])).map(function(d){return a.nodes[d]})}),s},r.prototype.collect=function(a){var s,l,h={};for(s=0,l=a.length;s<l;s++)h[this.nodes[s]]=a[s];return h},r.prototype.assign=function(a,s){var l=0;this.graph.updateEachNodeAttributes(function(h,d){return d[a]=s[l++],d},{attributes:[a]})},kn.NeighborhoodIndex=r;function o(a,s,l){l=l||"outbound";var h=a[l+"Edges"].bind(a),d=t(l,a),p=n.getPointerArray(d),v=n.getPointerArray(a.order),y=e(s).fromMinimalEntry;this.graph=a,this.neighborhood=new v(d),this.weights=new Float64Array(d),this.outDegrees=new Float64Array(a.order),this.starts=new p(a.order+1),this.nodes=a.nodes();var b={},_,S,C,D,k,M,x,I,R,w=0;for(_=0,S=a.order;_<S;_++)b[this.nodes[_]]=_;for(_=0,S=a.order;_<S;_++)for(k=this.nodes[_],x=h(k),this.starts[_]=w,C=0,D=x.length;C<D;C++)I=x[C],M=a.opposite(k,I),R=y(I,a.getEdgeAttributes(I)),this.neighborhood[w]=b[M],this.weights[w++]=R,this.outDegrees[_]+=R;this.starts[_]=d}return o.prototype.bounds=r.prototype.bounds,o.prototype.project=r.prototype.project,o.prototype.collect=r.prototype.collect,o.prototype.assign=r.prototype.assign,kn.WeightedNeighborhoodIndex=o,kn}var no,$u;function tm(){if($u)return no;$u=1;var n=ke(),e=Nt(),t=$l(),r=em(),o=Yn().NeighborhoodIndex,a={nodeCentralityAttribute:"closenessCentrality",wassermanFaust:!1};function s(d){this.index=new o(d,"inbound"),this.queue=new t(Array,d.order),this.seen=new r(d.order)}s.prototype.fromNode=function(d){var p=this.index,v=this.queue,y=this.seen;y.clear(),v.clear(),y.add(d),v.push([d,0]);for(var b,_,S,C,D,k,M=0,x=0;v.size!==0;)for(b=v.shift(),_=b[0],S=b[1],S!==0&&(M+=S,x+=1),D=p.starts[_+1],C=p.starts[_];C<D;C++)k=p.neighborhood[C],!y.has(k)&&(y.add(k),v.push([k,S+1]));return[x,M]};function l(d,p,v){if(!n(p))throw new Error("graphology-metrics/centrality/closeness: the given graph is not a valid graphology instance.");v=e(v,a);var y=v.wassermanFaust,b=new s(p),_=p.order,S,C,D,k,M,x=new Float64Array(_);for(S=0;S<_;S++)C=b.fromNode(S),D=C[0],k=C[1],M=0,k>0&&_>1&&(M=D/k,y&&(M*=D/(_-1))),x[S]=M;return d?b.index.assign(v.nodeCentralityAttribute,x):b.index.collect(x)}var h=l.bind(null,!1);return h.assign=l.bind(null,!0),no=h,no}var rm=tm();const nm=Ve(rm);var Rr={},Tu;function im(){if(Tu)return Rr;Tu=1;var n=ke();function e(a,s,l,h){var d=s+"Centrality";if(!n(l))throw new Error("graphology-centrality/"+d+": the given graph is not a valid graphology instance.");if(s!=="degree"&&l.type==="undirected")throw new Error("graphology-centrality/"+d+": cannot compute "+s+" centrality on an undirected graph.");h=h||{};var p=h.nodeCentralityAttribute||d,v=l.order-1,y=l[s].bind(l);if(a){l.updateEachNodeAttributes(function(_,S){return S[p]=y(_)/v,S},{attributes:[p]});return}var b={};return l.forEachNode(function(_){b[_]=y(_)/v}),b}var t=e.bind(null,!1,"degree"),r=e.bind(null,!1,"inDegree"),o=e.bind(null,!1,"outDegree");return t.assign=e.bind(null,!0,"degree"),r.assign=e.bind(null,!0,"inDegree"),o.assign=e.bind(null,!0,"outDegree"),Rr.degreeCentrality=t,Rr.inDegreeCentrality=r,Rr.outDegreeCentrality=o,Rr}var om=im(),Cn={},io,Pu;function am(){if(Pu)return io;Pu=1;var n=ar(),e=Xn();function t(r,o){if(arguments.length<2)throw new Error("mnemonist/fixed-stack: expecting an Array class and a capacity.");if(typeof o!="number"||o<=0)throw new Error("mnemonist/fixed-stack: `capacity` should be a positive number.");this.capacity=o,this.ArrayClass=r,this.items=new this.ArrayClass(this.capacity),this.clear()}return t.prototype.clear=function(){this.size=0},t.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-stack.push: stack capacity ("+this.capacity+") exceeded!");return this.items[this.size++]=r,this.size},t.prototype.pop=function(){if(this.size!==0)return this.items[--this.size]},t.prototype.peek=function(){return this.items[this.size-1]},t.prototype.forEach=function(r,o){o=arguments.length>1?o:this;for(var a=0,s=this.items.length;a<s;a++)r.call(o,this.items[s-a-1],a,this)},t.prototype.toArray=function(){for(var r=new this.ArrayClass(this.size),o=this.size-1,a=this.size;a--;)r[a]=this.items[o-a];return r},t.prototype.values=function(){var r=this.items,o=this.size,a=0;return new n(function(){if(a>=o)return{done:!0};var s=r[o-a-1];return a++,{value:s,done:!1}})},t.prototype.entries=function(){var r=this.items,o=this.size,a=0;return new n(function(){if(a>=o)return{done:!0};var s=r[o-a-1];return{value:[a++,s],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.toString=function(){return this.toArray().join(",")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(r,o,a){if(arguments.length<3&&(a=e.guessLength(r),typeof a!="number"))throw new Error("mnemonist/fixed-stack.from: could not guess iterable length. Please provide desired capacity as last argument.");var s=new t(o,a);if(e.isArrayLike(r)){var l,h;for(l=0,h=r.length;l<h;l++)s.items[l]=r[l];return s.size=h,s}return e.forEach(r,function(d){s.push(d)}),s},io=t,io}var Ou;function sm(){if(Ou)return Cn;Ou=1;var n=$l(),e=am(),t=Ea(),r=Jr(),o=Yn(),a=o.NeighborhoodIndex,s=o.WeightedNeighborhoodIndex;Cn.createUnweightedIndexedBrandes=function(d){var p=new a(d),v=p.neighborhood,y=p.starts,b=d.order,_=new e(r.getPointerArray(b),b),S=new Uint32Array(b),C=new Array(b),D=new Int32Array(b),k=new n(Uint32Array,b),M=function(x){var I,R,w,z,$,T,q;for(T=0;T<b;T++)C[T]=[],S[T]=0,D[T]=-1;for(S[x]=1,D[x]=0,k.push(x);k.size!==0;)for(T=k.shift(),_.push(T),I=D[T],R=S[T],w=y[T],z=y[T+1],$=w;$<z;$++)q=v[$],D[q]===-1&&(k.push(q),D[q]=I+1),D[q]===I+1&&(S[q]+=R,C[q].push(T));return[_,C,S]};return M.index=p,M};function l(h,d){return h[0]>d[0]?1:h[0]<d[0]?-1:h[1]>d[1]?1:h[1]<d[1]?-1:h[2]>d[2]?1:h[2]<d[2]?-1:h[3]>d[3]?1:h[3]<d[3]?-1:0}return Cn.createDijkstraIndexedBrandes=function(d,p){var v=new s(d,p||"weight"),y=v.neighborhood,b=v.weights,_=v.starts,S=d.order,C=new e(r.getPointerArray(S),S),D=new Uint32Array(S),k=new Array(S),M=new Float64Array(S),x=new Float64Array(S),I=new t(l),R=function(w){var z,$,T,q,U,P,te,J,F,A=0;for(J=0;J<S;J++)k[J]=[],D[J]=0,M[J]=-1,x[J]=-1;for(D[w]=1,x[w]=0,I.push([0,A++,w,w]);I.size!==0;)if(T=I.pop(),q=T[0],U=T[2],J=T[3],M[J]===-1)for(C.push(J),M[J]=q,D[J]+=D[U],z=_[J],$=_[J+1],te=z;te<$;te++)F=y[te],P=q+b[te],M[F]===-1&&(x[F]===-1||P<x[F])?(x[F]=P,I.push([P,A++,J,F]),D[F]=0,k[F]=[J]):P===x[F]&&(D[F]+=D[J],k[F].push(J));return[C,k,D]};return R.index=v,R},Cn}var oo,Gu;function um(){if(Gu)return oo;Gu=1;var n=ke(),e=sm(),t=Nt(),r=e.createUnweightedIndexedBrandes,o=e.createDijkstraIndexedBrandes,a={nodeCentralityAttribute:"betweennessCentrality",getEdgeWeight:"weight",normalized:!0};function s(h,d,p){if(!n(d))throw new Error("graphology-centrality/beetweenness-centrality: the given graph is not a valid graphology instance.");p=t(p,a);var v=p.nodeCentralityAttribute,y=p.normalized,b=p.getEdgeWeight?o(d,p.getEdgeWeight):r(d),_=d.order,S,C,D,k,M,x,I,R,w,z,$=new Float64Array(_),T=new Float64Array(_);for(x=0;x<_;x++){for(S=b(x),C=S[0],D=S[1],k=S[2],I=C.size;I--;)$[C.items[C.size-I]]=0;for(;C.size!==0;){for(z=C.pop(),M=(1+$[z])/k[z],I=0,R=D[z].length;I<R;I++)w=D[z][I],$[w]+=k[w]*M;z!==x&&(T[z]+=$[z])}}var q=null;if(y?q=_<=2?null:1/((_-1)*(_-2)):q=d.type==="undirected"?.5:null,q!==null)for(x=0;x<_;x++)T[x]*=q;return h?b.index.assign(v,T):b.index.collect(T)}var l=s.bind(null,!1);return l.assign=s.bind(null,!0),oo=l,oo}var cm=um();const lm=Ve(cm);var ao,Ru;function dm(){if(Ru)return ao;Ru=1;var n=ke(),e=Nt(),t=Yn().WeightedNeighborhoodIndex,r={nodeCentralityAttribute:"eigenvectorCentrality",getEdgeWeight:"weight",maxIterations:100,tolerance:1e-6};function o(l){for(var h=0,d=0,p=0,v=l.length;p<v;p++){var y=Math.abs(l[p]);y>h&&(d*=h/y*(h/y),h=y),d+=y===0&&h===0?0:y/h*(y/h)}return h===1/0?1:h*Math.sqrt(d)}function a(l,h,d){if(!n(h))throw new Error("graphology-metrics/centrality/eigenvector: the given graph is not a valid graphology instance.");d=e(d,r);var p=d.maxIterations,v=d.tolerance,y=h.order,b=new t(h,d.getEdgeWeight),_,S,C,D,k=new Float64Array(h.order);for(_=0;_<y;_++)k[_]=1/y;for(var M=0,x=0,I,R,w,z=!1;M<p;){for(R=k,k=new Float64Array(R),_=0;_<y;_++)for(C=b.starts[_+1],S=b.starts[_];S<C;S++)I=b.neighborhood[S],D=b.weights[S],k[I]+=R[_]*D;for(w=o(k),_=0;_<y;_++)k[_]/=w;for(x=0,_=0;_<y;_++)x+=Math.abs(k[_]-R[_]);if(x<y*v){z=!0;break}M++}if(!z)throw Error("graphology-metrics/centrality/eigenvector: failed to converge.");if(l){b.assign(d.nodeCentralityAttribute,k);return}return b.collect(k)}var s=a.bind(null,!1);return s.assign=a.bind(null,!0),ao=s,ao}var hm=dm();const fm=Ve(hm);var vr={},so,qu;function pm(){if(qu)return so;qu=1;var n=ke();function e(r,o){if(r.length<1)throw new Error("graphology-metrics/layout-quality/connected-closeness.max: not enough values!");for(var a=void 0,s,l=1,h=r.length;l<h;l++)s=r[l],o!==void 0&&(s=o(s)),(a===void 0||s>a)&&(a=s);return a}function t(r,o){if(r.length<1)throw new Error("graphology-metrics/layout-quality/connected-closeness.min: not enough values!");for(var a=void 0,s,l=1,h=r.length;l<h;l++)s=r[l],o!==void 0&&(s=o(s)),(a===void 0||s<a)&&(a=s);return a}return so=function(o,a){if(!n(o))throw new Error("graphology-metrics/layout-quality/connected-closeness: given graph is not a valid graphology instance.");if(o.size<2)return{deltaMax:void 0,ePercentOfDeltaMax:void 0,pPercentOfDeltaMax:void 0,pEdgeOfDeltaMax:void 0,cMax:M.C};a=a||{},a.epsilon=a.epsilon||.03,a.gridSize=a.gridSize||10;var s=a.rng||Math.random,l=I(),h=o.edges().map(function(w){var z=o.getNodeAttributes(o.source(w)),$=o.getNodeAttributes(o.target(w)),T=Math.sqrt(Math.pow(z.x-$.x,2)+Math.pow(z.y-$.y,2));return T}),d=[0,Math.max(e(l),e(h)||0)],p=0,v={},y,b,_,S,C,D=-1;do{for(S=0;S<=a.gridSize;S++)y=d[0]+(d[1]-d[0])*S/a.gridSize,v[y]===void 0&&(v[y]=x(y,o,l,h));b=p,p=0,C=Object.values(v),C.forEach(function(w,z){_=w.C,_>p&&(p=_,D=z)}),d=[C[Math.max(0,D-1)].Delta,C[Math.min(C.length-1,D+1)].Delta]}while((p-b)/p>=a.epsilon/10);var k=R(C,a.epsilon),M=x(k,o,l,h);if(M.C<.1)return{deltaMax:void 0,ePercentOfDeltaMax:void 0,pPercentOfDeltaMax:void 0,pEdgeOfDeltaMax:void 0,cMax:M.C};return{deltaMax:k,ePercentOfDeltaMax:M.ePercent,pPercentOfDeltaMax:M.pPercent,pEdgeOfDeltaMax:M.pEdge,cMax:M.C};function x(w,z,$,T){var q=T.filter(function(Q){return Q<=w}),U=$.filter(function(Q){return Q<=w}),P=q.length,te=P/T.length,J=U.length,F=J/$.length,A=te-F,B=z.undirected?1:2,H=P/(B*J*(z.order*(z.order-1))/$.length);return{Delta:w,ePercent:te,pPercent:F,pEdge:H,C:A}}function I(){if(o.order<2)return[];var w=[],z,$,T,q,U,P=o.size;if(P<1)return[];for(var te=0;te<P;te++){z=o.nodes()[Math.floor(s()*o.order)];do $=o.nodes()[Math.floor(s()*o.order)];while(z===$);T=o.getNodeAttributes(z),q=o.getNodeAttributes($),U=Math.sqrt(Math.pow(T.x-q.x,2)+Math.pow(T.y-q.y,2)),w.push(U)}return w}function R(w,z){var $=e(w,function(q){return q.C}),T=t(w.filter(function(q){return q.C>=(1-z)*$}),function(q){return q.Delta});return T}},so}var uo,Fu;function gm(){if(Fu)return uo;Fu=1;var n=ke();function e(t,r){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}return uo=function(r){if(!n(r))throw new Error("graphology-metrics/layout-quality/edge-uniformity: given graph is not a valid graphology instance.");if(r.size===0)return 0;var o=0,a=0,s,l=new Float64Array(r.size);r.forEachEdge(function(v,y,b,_,S,C){var D=e(S,C);l[a++]=D,o+=D});var h=o/r.size,d=0;for(a=0,s=r.size;a<s;a++)d+=Math.pow(h-l[a],2);var p=d/(r.size*Math.pow(h,2));return Math.sqrt(p)},uo}var co,ju;function vm(){if(ju)return co;ju=1;var n=wa(),e=Ea(),t=n.DEFAULT_COMPARATOR,r=n.reverseComparator;function o(l,h,d,p){for(var v=d,y=p,b=h[p],_=2*p+1,S;_<v;)S=_+1,S<v&&l(h[_],h[S])>=0&&(_=S),h[p]=h[_],p=_,_=2*p+1;h[p]=b,e.siftDown(l,h,y,p)}function a(l,h,d,p){for(var v=p,y=v,b=new l(p),_,S;y>0;)_=d[--y],y!==0&&(S=d[0],d[0]=_,o(h,d,--p,0),_=S),b[y]=_;return b}function s(l,h,d){if(arguments.length===2&&(d=h,h=null),this.ArrayClass=l,this.capacity=d,this.items=new l(d),this.clear(),this.comparator=h||t,typeof d!="number"&&d<=0)throw new Error("mnemonist/FixedReverseHeap.constructor: capacity should be a number > 0.");if(typeof this.comparator!="function")throw new Error("mnemonist/FixedReverseHeap.constructor: given comparator should be a function.");this.comparator=r(this.comparator)}return s.prototype.clear=function(){this.size=0},s.prototype.push=function(l){return this.size<this.capacity?(this.items[this.size]=l,e.siftDown(this.comparator,this.items,0,this.size),this.size++):this.comparator(l,this.items[0])>0&&e.replace(this.comparator,this.items,l),this.size},s.prototype.peek=function(){return this.items[0]},s.prototype.consume=function(){var l=a(this.ArrayClass,this.comparator,this.items,this.size);return this.size=0,l},s.prototype.toArray=function(){return a(this.ArrayClass,this.comparator,this.items.slice(0,this.size),this.size)},s.prototype.inspect=function(){var l=this.toArray();return Object.defineProperty(l,"constructor",{value:s,enumerable:!1}),l},typeof Symbol<"u"&&(s.prototype[Symbol.for("nodejs.util.inspect.custom")]=s.prototype.inspect),co=s,co}var Dn={},Bu;function ym(){if(Bu)return Dn;Bu=1;var n=new Float64Array(64),e=new Float64Array(64);function t(o,a,s){var l,h,d,p,v;for(n[0]=a,e[0]=s,h=0;h>=0;)if(d=n[h],p=e[h]-1,d<p){for(l=o[d];d<p;){for(;o[p]>=l&&d<p;)p--;for(d<p&&(o[d++]=o[p]);o[d]<=l&&d<p;)d++;d<p&&(o[p--]=o[d])}o[d]=l,n[h+1]=d+1,e[h+1]=e[h],e[h++]=d,e[h]-n[h]>e[h-1]-n[h-1]&&(v=n[h],n[h]=n[h-1],n[h-1]=v,v=e[h],e[h]=e[h-1],e[h-1]=v)}else h--;return o}Dn.inplaceQuickSort=t;function r(o,a,s,l){var h,d,p,v,y,b;for(n[0]=s,e[0]=l,d=0;d>=0;)if(p=n[d],v=e[d]-1,p<v){for(y=a[p],h=o[y];p<v;){for(;o[a[v]]>=h&&p<v;)v--;for(p<v&&(a[p++]=a[v]);o[a[p]]<=h&&p<v;)p++;p<v&&(a[v--]=a[p])}a[p]=y,n[d+1]=p+1,e[d+1]=e[d],e[d++]=p,e[d]-n[d]>e[d-1]-n[d-1]&&(b=n[d],n[d]=n[d-1],n[d-1]=b,b=e[d],e[d]=e[d-1],e[d-1]=b)}else d--;return a}return Dn.inplaceQuickSortIndices=r,Dn}var lo,Uu;function mm(){if(Uu)return lo;Uu=1;var n=Xn(),e=Jr(),t=wa().createTupleComparator,r=vm(),o=ym().inplaceQuickSortIndices;function a(v,y,b,_){var S,C=0,D;for(S=0;S<v;S++)D=y[S][b]-_[S],C+=D*D;return C}function s(v,y){var b=y.length,_=new Array(v),S=new Array(b),C,D=e.getPointerArray(b),k=new D(b),M,x,I,R=!0;for(M=0;M<v;M++){for(C=new Float64Array(b),x=0;x<b;x++)I=y[x],C[x]=I[1][M],R&&(S[x]=I[0],k[x]=x);R=!1,_[M]=C}return{axes:_,ids:k,labels:S}}function l(v,y,b,_){for(var S=_.length,C=e.getPointerArray(S+1),D=new C(S),k=new C(S),M=new C(S),x=[[0,0,b.length,-1,0]],I,R,w,z,$,T,q,U,P=0;x.length!==0;)I=x.pop(),U=I[0],T=I[1],q=I[2],R=I[3],w=I[4],o(y[U],b,T,q),S=q-T,z=T+(S>>>1),$=b[z],D[P]=$,R>-1&&(w===0?k[R]=P+1:M[R]=P+1),U=(U+1)%v,z!==T&&z!==q-1&&x.push([U,z+1,q,P,1]),z!==T&&x.push([U,T,z,P,0]),P++;return{axes:y,labels:_,pivots:D,lefts:k,rights:M}}function h(v,y){this.dimensions=v,this.visited=0,this.axes=y.axes,this.labels=y.labels,this.pivots=y.pivots,this.lefts=y.lefts,this.rights=y.rights,this.size=this.labels.length}h.prototype.nearestNeighbor=function(v){var y=1/0,b=null,_=this.dimensions,S=this.axes,C=this.pivots,D=this.lefts,k=this.rights,M=0;function x(I,R){M++;var w=D[R],z=k[R],$=C[R],T=a(_,S,$,v);if(!(T<y&&(b=$,y=T,T===0))){var q=S[I][$]-v[I];I=(I+1)%_,q>0?w!==0&&x(I,w-1):z!==0&&x(I,z-1),q*q<y&&(q>0?z!==0&&x(I,z-1):w!==0&&x(I,w-1))}}return x(0,0),this.visited=M,this.labels[b]};var d=t(3),p=t(2);return h.prototype.kNearestNeighbors=function(v,y){if(v<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");if(v=Math.min(v,this.size),v===1)return[this.nearestNeighbor(y)];var b=new r(Array,d,v),_=this.dimensions,S=this.axes,C=this.pivots,D=this.lefts,k=this.rights,M=0;function x(w,z){var $=D[z],T=k[z],q=C[z],U=a(_,S,q,y);b.push([U,M++,q]);var P=y[w],te=S[w][q],J=P-te;w=(w+1)%_,P<te?$!==0&&x(w,$-1):T!==0&&x(w,T-1),(J*J<b.peek()[0]||b.size<v)&&(P<te?T!==0&&x(w,T-1):$!==0&&x(w,$-1))}x(0,0),this.visited=M;for(var I=b.consume(),R=0;R<I.length;R++)I[R]=this.labels[I[R][2]];return I},h.prototype.linearKNearestNeighbors=function(v,y){if(v<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");v=Math.min(v,this.size);var b=new r(Array,p,v),_,S,C;for(_=0,S=this.size;_<S;_++)C=a(this.dimensions,this.axes,this.pivots[_],y),b.push([C,_]);var D=b.consume();for(_=0;_<D.length;_++)D[_]=this.labels[this.pivots[D[_][1]]];return D},h.prototype.inspect=function(){var v=new Map;v.dimensions=this.dimensions,Object.defineProperty(v,"constructor",{value:h,enumerable:!1});var y,b,_;for(y=0;y<this.size;y++){for(_=new Array(this.dimensions),b=0;b<this.dimensions;b++)_[b]=this.axes[b][y];v.set(this.labels[y],_)}return v},typeof Symbol<"u"&&(h.prototype[Symbol.for("nodejs.util.inspect.custom")]=h.prototype.inspect),h.from=function(v,y){var b=n.toArray(v),_=s(y,b),S=l(y,_.axes,_.ids,_.labels);return new h(y,S)},h.fromAxes=function(v,y){y||(y=e.indices(v[0].length));var b=v.length,_=l(v.length,v,e.indices(y.length),y);return new h(b,_)},lo=h,lo}var ho,Hu;function Tl(){if(Hu)return ho;Hu=1;var n=ke(),e=mm(),t=zl().intersectionSize;return ho=function(o){if(!n(o))throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: given graph is not a valid graphology instance.");if(o.order===0)throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: cannot compute stress for a null graph.");if(o.size===0)return 0;var a=[new Float64Array(o.order),new Float64Array(o.order)],s=0;o.forEachNode(function(d,p){a[0][s]=p.x,a[1][s++]=p.y});var l=e.fromAxes(a,o.nodes()),h=0;return o.forEachNode(function(d,p){var v=new Set(o.neighbors(d));if(v.size===0||v.size===o.order-1){h+=1;return}var y=l.kNearestNeighbors(v.size+1,[p.x,p.y]);y=new Set(y.slice(1));var b=t(v,y);h+=b/y.size}),h/o.order},ho}var fo,Wu;function Pl(){if(Wu)return fo;Wu=1;var n=ke(),e=ba().undirectedSingleSourceLength;function t(r,o){return Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2))}return fo=function(o){if(!n(o))throw new Error("graphology-metrics/layout-quality/stress: given graph is not a valid graphology instance.");if(o.order===0)throw new Error("graphology-metrics/layout-quality/stress: cannot compute stress for a null graph.");var a=new Array(o.order),s=new Array(o.order),l=0,h=o.order*4;o.forEachNode(function(k,M){a[l]=k,s[l++]=M});var d,p,v,y,b,_,S,C,D=0;for(l=0,p=o.order;l<p;l++)for(b=e(o,a[l]),v=s[l],d=l+1;d<p;d++)y=s[d],_=b[a[d]],typeof _>"u"&&(_=h),C=t(v,y),S=1/(_*_),D+=S*Math.pow(C-_,2);return D},fo}var Ku;function bm(){return Ku||(Ku=1,vr.connectedCloseness=pm(),vr.edgeUniformity=gm(),vr.neighborhoodPreservation=Tl(),vr.stress=Pl()),vr}var wm=bm(),Em=Pl();const xm=Ve(Em);var _m=Ml();const Sm=Ve(_m);var po,Xu;function Am(){if(Xu)return po;Xu=1;var n=ke(),e=Nt(),t=Yn().WeightedNeighborhoodIndex,r={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function o(s,l,h){if(!n(l))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");h=e(h,r);var d=h.alpha,p=h.maxIterations,v=h.tolerance,y=h.nodePagerankAttribute,b=l.order,_=1/b,S=new t(l,h.getEdgeWeight),C,D,k,M,x=new Float64Array(l.order),I=new Float64Array(S.weights.length),R=[];for(C=0;C<b;C++)for(x[C]=_,k=S.starts[C+1],M=S.outDegrees[C],M===0&&R.push(C),D=S.starts[C];D<k;D++)I[D]=S.weights[D]/M;for(var w=0,z=0,$,T,q,U=!1;w<p;){for(q=x,x=new Float64Array(l.order),$=0,C=0,k=R.length;C<k;C++)$+=q[R[C]];for($*=d,C=0;C<b;C++){for(k=S.starts[C+1],D=S.starts[C];D<k;D++)T=S.neighborhood[D],x[T]+=d*q[C]*I[D];x[C]+=$*_+(1-d)*_}for(z=0,C=0;C<b;C++)z+=Math.abs(x[C]-q[C]);if(z<b*v){U=!0;break}w++}if(!U)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(s){S.assign(y,x);return}return S.collect(x)}var a=o.bind(null,!1);return a.assign=o.bind(null,!0),po=a,po}var km=Am();const Cm=Ve(km);var Dm=Tl();const Nm=Ve(Dm);var Im=Ll();const Mm=Ve(Im),Nn=document;class Ol{constructor(e){this.graphManager=e,this.pannel=Nn.querySelector("#floating-panel .body-info")}addHeader(e){const t=Nn.createElement("h4");t.textContent=e,this.pannel.appendChild(t),console.log(e)}addInfo(e){const t=Nn.createElement("div");t.insertAdjacentHTML("beforeend",e),this.pannel.appendChild(t),console.log(e)}addLine(){const e=Nn.createElement("hr");this.pannel.appendChild(e),this.pannel.scrollTop=this.pannel.scrollHeight}addNodeInfo(e){if(typeof e=="string"){const t=this.graphManager.graph.getNodeAttributes(e);if(t.desc&&Object.keys(t.desc).length!=0||t.weight){this.addHeader(`${t.label}:`);for(let r in t.desc)this.addInfo(`${r}: ${t.desc[r]}`);t.weight&&this.addInfo(`weight: ${t.weight}`),this.addLine()}}else{const t=e;if(t.desc&&Object.keys(t.desc).length!=0||t.weight){this.addHeader(`${t.label}:`);for(let r in t.desc)this.addInfo(`${r}: ${t.desc[r]}`);t.weight&&this.addInfo(`weight: ${t.weight}`),this.addLine()}}}allNodeInfo(){for(let e of this.graphManager.graph.getSelectedNodes())this.addNodeInfo(e)}addEdgeInfo(e){if(typeof e=="string"){const t=this.graphManager.graph.getEdgeAttributes(e);if(t.desc&&Object.keys(t.desc).length!=0||t.weight){this.addHeader(`${t.label}:`);for(let r in t.desc)this.addInfo(`${r}: ${t.desc[r]}`);t.weight&&this.addInfo(`weight: ${t.weight}`),this.addLine()}}else{const t=e;if(t.desc&&Object.keys(t.desc).length!=0||t.weight){this.addHeader(`${t.label}:`);for(let r in t.desc)this.addInfo(`${r}: ${t.desc[r]}`);t.weight&&this.addInfo(`weight: ${t.weight}`),this.addLine()}}}allEdgeInfo(){for(let e of this.graphManager.graph.getSelectedEdges())this.addEdgeInfo(e)}getComponent(e){const t=this.graphManager.graph,r=_n.connectedComponents(t);for(let o of r)if(o.includes(String(e)))return o;return null}basicInfo(){const e=this.graphManager.graph;this.addHeader("Basic Informattion"),this.addInfo(`|V|: ${e.order}`),this.addInfo(`|E|: ${e.size}`);const t=e.someEdge((r,o)=>o.weight);this.addInfo(t?`Type: ${e.type}, weighted`:`Type: ${e.type}`),this.addLine()}degreeSequesnce(){this.addHeader("Degree Sequence");const e=this.graphManager.graph,r=`(${e.mapNodes((o,a)=>e.degree(o)).join(", ")})`;this.addInfo(r),this.addLine()}countComponents(){const e=this.graphManager.graph;this.addHeader("Connected Components");const t=_n.countConnectedComponents(e);this.addInfo(`Count: ${t}`),_n.forEachConnectedComponent(e,r=>{this.addInfo(r.map(o=>e.getNodeAttribute(o,"label")).join(", "))}),this.addLine()}neighbors(){const e=this.graphManager.graph;this.addHeader("Neighbors");const t=this.graphManager.graph.getSelectedNodes();if(t.length!==1){this.addInfo("Select one node"),this.addLine();return}const[r]=t,o=e.neighbors(r);this.addInfo(o.map(a=>e.getNodeAttribute(a,"label")).join(", ")),this.addLine()}shortestPath(){this.addHeader("Shortest Path");const e=this.graphManager.graph,t=this.graphManager.graph.getSelectedNodes();if(t.length!==2){this.addInfo("Select two nodes"),this.addLine();return}const[r,o]=t,a=gu.bidirectional(e,r,o);a?(this.addInfo(a.map(s=>e.getNodeAttribute(s,"label")).join(" -> ")),this.addLine(),e.selectPath(a),this.graphManager.app.drawGraph()):(this.addInfo("They are not connected"),this.addLine())}density(){this.addHeader("Density");const e=this.graphManager.graph,t=ku.density(e);this.addInfo(t),this.addLine()}diameter(){this.addHeader("Diameter");const e=this.graphManager.graph,t=ku.diameter(e);this.addInfo(t),this.addLine()}eccentricity(){this.addHeader("Eccentricity");const e=this.graphManager.graph,t=this.graphManager.graph.getSelectedNodes();if(t.length!==1){this.addInfo("Select one node"),this.addLine();return}const[r]=t,o=Sm(e,r);this.addInfo(o),this.addLine()}simmelianStrength(){this.addHeader("Simmelian strength");const e=this.graphManager.graph,t=Jy.simmelianStrength(e);for(const r in t){const{source:o,target:a}=e.getEdgeAttributes(r);this.addInfo(`${e.getNodeAttribute(o,"label")}, ${e.getNodeAttribute(a,"label")} : ${t[r]}`)}this.addLine()}betweennessCentrality(){this.addHeader("Betweenness centrality");const e=this.graphManager.graph,t=lm(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}closenessCentrality(){this.addHeader("Closeness centrality");const e=this.graphManager.graph,t=nm(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}degreeCentrality(){this.addHeader("Degree centrality");const e=this.graphManager.graph,t=om.degreeCentrality(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}eigenvectorCentrality(){this.addHeader("Eigenvector centrality");const e=this.graphManager.graph,t=fm(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}pagerank(){this.addHeader("Pagerank");const e=this.graphManager.graph,t=Cm(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}edgeUniformity(){this.addHeader("Edge Uniformity");const e=this.graphManager.graph,t=wm.edgeUniformity(e);this.addInfo(t),this.addLine()}neighborhoodPreservation(){this.addHeader("Neighborhood preservation");const e=this.graphManager.graph,t=Nm(e);this.addInfo(t),this.addLine()}stress(){this.addHeader("Stress");const e=this.graphManager.graph,t=xm(e);this.addInfo(t),this.addLine()}disparity(){this.addHeader("Disparity");const e=this.graphManager.graph,t=Mm(e);for(const r in t){const{source:o,target:a}=e.getEdgeAttributes(r);this.addInfo(`${e.getNodeAttribute(o,"label")}, ${e.getNodeAttribute(a,"label")} : ${t[r]}`)}this.addLine()}_isCycle(e){if(e.order==e.size&&_n.countConnectedComponents(e)==1){const t=e.edges()[0],{source:r,target:o}=e.getEdgeAttributes(t);return e.dropEdge(t),gu.bidirectional(e,o,r)}return!1}liesOnCycle(){this.addHeader("Lies on cycle");const e=this.graphManager.graph,t=this.graphManager.graph.getSelectedNodes();if(t.length<3){this.addInfo("Select at least 3 nodes"),this.addLine();return}const r=kt.subgraph(e,t);this.addInfo(!!this._isCycle(r)),this.addLine()}}var In={},go,Yu;function Lm(){if(Yu)return go;Yu=1;var n=bt(),e=ya();return go=function(r,o,a){if(!n(r))throw new Error("graphology-generators/community/caveman: invalid Graph constructor.");var s=o*a,l=e(r,s);if(a<2)return l;var h,d,p;for(h=0;h<s;h+=a)for(d=h;d<h+a;d++)for(p=d+1;p<h+a;p++)l.addEdge(d,p);return l},go}var vo,Vu;function zm(){if(Vu)return vo;Vu=1;var n=bt(),e=ya();return vo=function(r,o,a){if(!n(r))throw new Error("graphology-generators/community/connected-caveman: invalid Graph constructor.");var s=o*a,l=e(r,s);if(a<2)return l;var h,d,p;for(h=0;h<s;h+=a){for(d=h;d<h+a;d++)for(p=d+1;p<h+a;p++)(d!==h||d!==p-1)&&l.addEdge(d,p);h>0&&l.addEdge(h,(h-1)%s)}return l.addEdge(0,s-1),l},vo}var Qu;function $m(){return Qu||(Qu=1,In.caveman=Lm(),In.connectedCaveman=zm()),In}var Zu=$m(),qr={},yo,Ju;function Tm(){if(Ju)return yo;Ju=1;var n=bt();return yo=function(e,t){if(!n(e))throw new Error("graphology-generators/random/clusters: invalid Graph constructor.");t=t||{};var r="clusterDensity"in t?t.clusterDensity:.5,o=t.rng||Math.random,a=t.order,s=t.size,l=t.clusters;if(typeof r!="number"||r>1||r<0)throw new Error("graphology-generators/random/clusters: `clusterDensity` option should be a number between 0 and 1.");if(typeof o!="function")throw new Error("graphology-generators/random/clusters: `rng` option should be a function.");if(typeof a!="number"||a<=0)throw new Error("graphology-generators/random/clusters: `order` option should be a positive number.");if(typeof s!="number"||s<=0)throw new Error("graphology-generators/random/clusters: `size` option should be a positive number.");if(typeof l!="number"||l<=0)throw new Error("graphology-generators/random/clusters: `clusters` option should be a positive number.");var h=new e;if(!a)return h;var d=new Array(l),p,v,y;for(y=0;y<l;y++)d[y]=[];for(y=0;y<a;y++)p=o()*l|0,h.addNode(y,{cluster:p}),d[p].push(y);if(!s)return h;var b,_,S;for(y=0;y<s;y++){if(o()<1-r){b=o()*a|0;do _=o()*a|0;while(b===_)}else{if(p=o()*l|0,v=d[p],S=v.length,!S||S<2)continue;b=v[o()*S|0];do _=v[o()*S|0];while(b===_)}h.multi?h.addEdge(b,_):h.mergeEdge(b,_)}return h},yo}var mo,ec;function Pm(){if(ec)return mo;ec=1;var n=bt(),e=Il().abstractDensity;function t(o,a){if(!n(o))throw new Error("graphology-generators/random/erdos-renyi: invalid Graph constructor.");var s=a.order,l=a.probability,h=a.rng||Math.random,d=new o;if(typeof a.approximateSize=="number"&&(l=e(d.type,!1,s,a.approximateSize)),typeof s!="number"||s<=0)throw new Error("graphology-generators/random/erdos-renyi: invalid `order`. Should be a positive number.");if(typeof l!="number"||l<0||l>1)throw new Error("graphology-generators/random/erdos-renyi: invalid `probability`. Should be a number between 0 and 1. Or maybe you gave an `approximateSize` exceeding the graph's density.");if(typeof h!="function")throw new Error("graphology-generators/random/erdos-renyi: invalid `rng`. Should be a function.");var p,v;for(p=0;p<s;p++)d.addNode(p);if(l<=0)return d;for(p=0;p<s;p++)for(v=p+1;v<s;v++)d.type!=="directed"&&h()<l&&d.addUndirectedEdge(p,v),d.type!=="undirected"&&(h()<l&&d.addDirectedEdge(p,v),h()<l&&d.addDirectedEdge(v,p));return d}function r(o,a){if(!n(o))throw new Error("graphology-generators/random/erdos-renyi: invalid Graph constructor.");var s=a.order,l=a.probability,h=a.rng||Math.random,d=new o;if(typeof a.approximateSize=="number"&&(l=e(d.type,!1,s,a.approximateSize)),typeof s!="number"||s<=0)throw new Error("graphology-generators/random/erdos-renyi: invalid `order`. Should be a positive number.");if(typeof l!="number"||l<0||l>1)throw new Error("graphology-generators/random/erdos-renyi: invalid `probability`. Should be a number between 0 and 1. Or maybe you gave an `approximateSize` exceeding the graph's density.");if(typeof h!="function")throw new Error("graphology-generators/random/erdos-renyi: invalid `rng`. Should be a function.");for(var p=0;p<s;p++)d.addNode(p);if(l<=0)return d;var v=-1,y=Math.log(1-l),b,_;if(d.type!=="undirected")for(_=0;_<s;){for(b=Math.log(1-h()),v+=1+(b/y|0),_===v&&v++;_<s&&s<=v;)v-=s,_++,_===v&&v++;_<s&&d.addDirectedEdge(_,v)}if(v=-1,d.type!=="directed")for(_=1;_<s;){for(b=Math.log(1-h()),v+=1+(b/y|0);v>=_&&_<s;)v-=_,_++;_<s&&d.addUndirectedEdge(_,v)}return d}return t.sparse=r,mo=t,mo}var bo,tc;function Om(){if(tc)return bo;tc=1;var n=bt();return bo=function(t,r){if(!n(t))throw new Error("graphology-generators/random/girvan-newman: invalid Graph constructor.");var o=r.zOut,a=r.rng||Math.random;if(typeof o!="number")throw new Error("graphology-generators/random/girvan-newman: invalid `zOut`. Should be a number.");if(typeof a!="function")throw new Error("graphology-generators/random/girvan-newman: invalid `rng`. Should be a function.");var s=o/96,l=(16-s*96)/31,h=new t,d,p,v;for(p=0;p<128;p++)h.addNode(p);for(p=0;p<128;p++)for(v=p+1;v<128;v++)d=a(),p%4===v%4?d<l&&h.addEdge(p,v):d<s&&h.addEdge(p,v);return h},bo}var rc;function Gm(){return rc||(rc=1,qr.clusters=Tm(),qr.erdosRenyi=Pm(),qr.girvanNewman=Om()),qr}var wo=Gm(),St={},Eo,nc;function Rm(){return nc||(nc=1,Eo=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,o,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(!n(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;for(o of e.entries())if(!n(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[o]))return!1;for(o=r;o--!==0;){var s=a[o];if(!n(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}),Eo}var ic;function qm(){if(ic)return St;ic=1;var n=Rm(),e=Symbol("size");function t(p,v){var y=p.length,b=v.length;if(y!==b)return!1;var _,S,C,D,k=new Set;e:for(C=0;C<y;C++){for(_=p[C],D=0;D<b;D++)if(!k.has(D)&&(S=v[D],n(_,S))){k.add(D);continue e}return!1}return!0}function r(p,v){if(p[e]!==v[e])return!1;for(var y in p)if(!t(p[y],v[y]))return!1;return!0}function o(p,v){var y={},b;return p.forEachOutEdge(v,function(_,S,C,D){b=y[D]||0,b++,y[D]=b}),y}function a(p,v){var y={},b;return p.forEachUndirectedEdge(v,function(_,S,C,D){D=v===C?D:C,!(v>D)&&(b=y[D]||0,b++,y[D]=b)}),y}function s(p,v){var y={};y[e]=0;var b;return p.forEachOutEdge(v,function(_,S,C,D){b=y[D],b||(b=[],y[e]+=1,y[D]=b),b.push(S)}),y}function l(p,v){var y={};y[e]=0;var b;return p.forEachUndirectedEdge(v,function(_,S,C,D){D=v===C?D:C,!(v>D)&&(b=y[D],b||(b=[],y[e]+=1,y[D]=b),b.push(S))}),y}function h(p,v,y){return v===y?!0:v.order!==y.order?!1:v.everyNode(function(b,_){return y.hasNode(b)?p?n(_,y.getNodeAttributes(b)):!0:!1})}function d(p,v,y,b){if(y===b)return!0;if(v){if(y.type==="directed"&&b.type==="undirected"||y.type==="undirected"&&b.type==="directed")return!1}else if(y.type!==b.type||y.allowSelfLoops!==b.allowSelfLoops||y.multi!==b.multi)return!1;if(y.directedSize!==b.directedSize||y.undirectedSize!==b.undirectedSize||!h(p,y,b))return!1;var _=!1,S=!1;if(!y.multi&&!b.multi){if(_=y.everyDirectedEdge(function(k,M,x,I){return b.hasDirectedEdge(x,I)?p?n(y.getDirectedEdgeAttributes(x,I),b.getDirectedEdgeAttributes(x,I)):!0:!1}),!_||(S=y.everyUndirectedEdge(function(k,M,x,I){return b.hasUndirectedEdge(x,I)?p?n(y.getUndirectedEdgeAttributes(x,I),b.getUndirectedEdgeAttributes(x,I)):!0:!1}),!S))return!1}else{var C=p?s:o,D=p?r:n;if(_=y.everyNode(function(k){var M=C(y,k),x=C(b,k);return D(M,x)}),!_||(C=p?l:a,S=y.everyNode(function(k){var M=C(y,k),x=C(b,k);return D(M,x)}),!S))return!1}return!0}return St.isGraph=ke(),St.isGraphConstructor=bt(),St.haveSameNodes=h.bind(null,!1),St.haveSameNodesDeep=h.bind(null,!0),St.areSameGraphs=d.bind(null,!1,!1),St.areSameGraphsDeep=d.bind(null,!0,!1),St.haveSameEdges=d.bind(null,!1,!0),St.haveSameEdgesDeep=d.bind(null,!0,!0),St}var xo,oc;function Fm(){return oc||(oc=1,xo=qm()),xo}var _a=Fm(),ac=["0111111110111100010101000000000100","1011000100000100010101000000001000","1101000111000100000000000001100010","1110000100001100000000000000000000","1000001000100000000000000000000000","1000001000100000100000000000000000","1000110000000000100000000000000000","1111000000000000000000000000000000","1010000000000000000000000000001011","0010000000000000000000000000000001","1000110000000000000000000000000000","1000000000000000000000000000000000","1001000000000000000000000000000000","1111000000000000000000000000000001","0000000000000000000000000000000011","0000000000000000000000000000000011","0000011000000000000000000000000000","1100000000000000000000000000000000","0000000000000000000000000000000011","1100000000000000000000000000000001","0000000000000000000000000000000011","1100000000000000000000000000000000","0000000000000000000000000000000011","0000000000000000000000000101010011","0000000000000000000000000101000100","0000000000000000000000011000000100","0000000000000000000000000000010001","0010000000000000000000011000000001","0010000000000000000000000000000101","0000000000000000000000010010000011","0100000010000000000000000000000011","1000000000000000000000001100100011","0010000010000011001010110000011101","0000000011000111001110110011111110"],jm=new Set([0,1,2,3,4,5,6,7,8,10,11,12,13,16,17,19,21]);function Bm(n,e={}){if(!_a.isGraphConstructor(n))throw new Error("graphology-generators/social/karate: invalid Graph constructor.");for(var t=new n(e),r,o=0;o<34;o++)r=jm.has(o)?"Mr. Hi":"Officer",t.addNode(o,{club:r});var a,s,l,h,d,p;for(l=0,d=ac.length;l<d;l++)for(a=ac[l].split(""),h=l+1,p=a.length;h<p;h++)s=+a[h],s&&t.addEdgeWithKey(l+"->"+h,l,h);return t}var _o=[[0,1],[2,3],[2,4],[2,5],[1,5],[1,6],[1,7],[1,8],[1,9],[9,10],[3,4],[3,11],[4,6],[4,11],[6,7],[7,12],[8,13],[8,12],[11,12],[12,14]];function Um(n,e={}){if(!_a.isGraphConstructor(n))throw new Error("graphology-generators/social/florentine-families: invalid Graph constructor.");var t=new n(e),r,o;for(r=0,o=_o.length;r<o;r++)t.mergeEdge(_o[r][0],_o[r][1]);return t}var st={},So,sc;function Hm(){if(sc)return So;sc=1;var n=ke();return So=function(t){if(!n(t))throw new Error("graphology-utils/infer-multi: expecting a valid graphology instance.");if(!t.multi||t.order===0||t.size<2)return!1;var r=!1,o,a,s,l;return t.forEachAssymetricAdjacencyEntry(function(h,d,p,v,y,b,_){if(!r){if(_&&h>d&&(l=d,d=h,h=l),h===o&&d===a&&_===s){r=!0;return}o=h,a=d,s=_}}),r},So}var Ao,uc;function Wm(){return uc||(uc=1,Ao=function(e,t){if(t.length!==0){var r,o,a,s,l;for(a=0,l=t.length;a<l;a++)for(r=t[a],s=a+1;s<l;s++)o=t[s],e.mergeEdge(r,o)}}),Ao}var ko,cc;function Km(){return cc||(cc=1,ko=function(e,t){if(t.length!==0){var r,o,a,s;if(e.mergeNode(t[0]),t.length!==1){for(a=1,s=t.length;a<s;a++)r=t[a-1],o=t[a],e.mergeEdge(r,o);e.mergeEdge(o,t[0])}}}),ko}var Co,lc;function Xm(){return lc||(lc=1,Co=function(e,t){if(t.length!==0){var r,o,a,s;for(e.mergeNode(t[0]),a=1,s=t.length;a<s;a++)r=t[a-1],o=t[a],e.mergeEdge(r,o)}}),Co}var Do,dc;function Ym(){return dc||(dc=1,Do=function(e,t){if(t.length!==0){var r,o,a,s=t[0];for(e.mergeNode(s),o=1,a=t.length;o<a;o++)r=t[o],e.mergeEdge(s,r)}}),Do}var No,hc;function Vm(){if(hc)return No;hc=1;var n=qt().copyEdge;return No=function(t,r,o){typeof r>"u"&&(r={}),typeof o>"u"&&(o={});var a=t.nullCopy();t.forEachNode(function(h,d){var p=r[h];typeof p>"u"&&(p=h),a.addNode(p,d)});var s,l;return t.forEachAssymetricAdjacencyEntry(function(h,d,p,v,y,b,_){h!==s&&(s=h,l=r[h],typeof l>"u"&&(l=h));var S=r[d];typeof S>"u"&&(S=d);var C=o[y];typeof C>"u"&&(C=y),n(a,_,C,l,S,b)}),a},No}var Io,fc;function Qm(){if(fc)return Io;fc=1;var n=qt().copyEdge;return Io=function(t,r,o){var a=t.nullCopy();t.forEachNode(function(h,d){var p=r?r(h,d):h;a.addNode(p,d)});var s,l;return t.forEachAssymetricAdjacencyEntry(function(h,d,p,v,y,b,_){h!==s&&(s=h,l=r?r(h,p):h);var S=r?r(d,v):d,C=o?o(y,b,h,d,p,v,_):y;n(a,_,C,l,S,b)}),a},Io}var pc;function Zm(){return pc||(pc=1,st.inferMulti=Hm(),st.inferType=xa(),st.isGraph=ke(),st.isGraphConstructor=bt(),st.mergeClique=Wm(),st.mergeCycle=Km(),st.mergePath=Xm(),st.mergeStar=Ym(),st.renameGraphKeys=Vm(),st.updateGraphKeys=Qm()),st}var Mo,gc;function Jm(){return gc||(gc=1,Mo=Zm()),Mo}var e0=Jm(),vc=[[0,1,2,3,4],[1,0,5,6],[2,0,3,4],[3,0,1,2,5,4,6],[5,1,3,6],[4,0,2,3,6,7],[6,1,3,5,4,7],[7,4,6,8],[8,7,9],[9,8]];function t0(n,e={}){if(!_a.isGraphConstructor(n))throw new Error("invalid Graph constructor.");var t=new n(e),r,o;for(r=0,o=vc.length;r<o;r++)e0.mergeStar(t,vc[r]);return t}const r0={stars:[{id:0,label:"Hamal",ra:"02 08 34.7",dec:"23 34 50.5",magnitude:2.17},{id:1,label:"Sheratan",ra:"01 56 01.0",dec:"20 55 48.5",magnitude:2.7},{id:2,label:"Gamma",ra:"01 54 53.8",dec:"19 24 58.7",magnitude:3.84},{id:3,label:"41 Arietis",ra:"02 51 27.2",dec:"27 21 50.6",magnitude:3.58}],edges:[[0,1],[1,2],[0,3]]},n0={stars:[{id:0,label:"Aldebaran",ra:"04 37 21.6",dec:"16 33 34.5",magnitude:1},{id:1,label:"Elnath",ra:"05 26 17.5",dec:"28 36 27.0",magnitude:1.65},{id:2,label:"Zeta",ra:"05 37 38.7",dec:"21 08 33.0",magnitude:2.97},{id:3,label:"Theta2",ra:"04 30 05.6",dec:"15 55 34.7",magnitude:3.45},{id:4,label:"Lambda",ra:"04 02 04.1",dec:"12 33 38.8",magnitude:3.38},{id:5,label:"Omicron",ra:"03 26 09.5",dec:"09 06 59.4",magnitude:3.77},{id:6,label:"Gamma",ra:"04 21 13.2",dec:"15 41 16.8",magnitude:3.8},{id:7,label:"Delta",ra:"04 24 22.8",dec:"17 36 04.5",magnitude:3.92},{id:8,label:"Delta3",ra:"04 26 56.4",dec:"17 59 06.4",magnitude:4.31},{id:9,label:"Ain",ra:"04 30 04.9",dec:"19 14 09.9",magnitude:3.69},{id:10,label:"Tau",ra:"04 43 45.1",dec:"23 00 19.2",magnitude:4.22},{id:11,label:"Atlas",ra:"03 50 39.0",dec:"24 07 49.6",magnitude:4.22}],edges:[[0,3],[0,2],[6,4],[4,5],[3,6],[6,7],[8,7],[8,9],[9,0],[9,10],[1,10],[11,7]]},i0={stars:[{id:0,label:"Castor",ra:"07 36 12.8",dec:"31 50 01.2",magnitude:1.58},{id:1,label:"Pollux",ra:"07 46 52.0",dec:"27 57 57.2",magnitude:1.29},{id:2,label:"Kappa",ra:"07 45 58.6",dec:"24 20 15.9",magnitude:3.72},{id:3,label:"Upsilon",ra:"07 37 29.0",dec:"26 50 24.6",magnitude:4.16},{id:4,label:"Iota",ra:"07 27 17.9",dec:"27 44 54.9",magnitude:3.94},{id:5,label:"Tau",ra:"07 12 44.9",dec:"30 12 16.7",magnitude:4.53},{id:6,label:"Theta",ra:"06 54 27.2",dec:"33 55 55.1",magnitude:3.63},{id:7,label:"Wasat",ra:"07 21 38.1",dec:"21 56 09.7",magnitude:3.59},{id:8,label:"Mekbuda",ra:"07 05 36.5",dec:"20 32 00.0",magnitude:4.16},{id:9,label:"Alhena",ra:"06 39 10.1",dec:"16 22 38.5",magnitude:1.92},{id:10,label:"Lambda",ra:"07 19 32.8",dec:"16 29 40.3",magnitude:3.61},{id:11,label:"Xi",ra:"06 46 42.4",dec:"12 52 04.2",magnitude:3.44},{id:12,label:"Mebsuta",ra:"06 45 29.1",dec:"25 06 23.7",magnitude:3.19},{id:13,label:"Nu",ra:"06 30 27.6",dec:"20 11 46.3",magnitude:4.09},{id:14,label:"Tejat",ra:"06 24 29.2",dec:"22 30 03.1",magnitude:2.91},{id:15,label:"Propus",ra:"06 16 24.0",dec:"22 29 58.9",magnitude:3.28},{id:16,label:"1",ra:"06 05 39.1",dec:"23 15 43.8",magnitude:4.31}],edges:[[0,5],[1,3],[3,2],[3,4],[4,5],[5,6],[3,7],[7,8],[7,10],[8,9],[10,11],[5,12],[12,13],[12,14],[14,15],[15,16]]},o0={stars:[{id:0,label:"Acubens",ra:"08 59 52.7",dec:"11 45 32.4",magnitude:4.28},{id:1,label:"Beta",ra:"08 17 53.5",dec:"09 06 24.1",magnitude:3.66},{id:2,label:"Asellus Australis",ra:"08 46 07.7",dec:"18 03 39.9",magnitude:4.09},{id:3,label:"Asellus Borealis",ra:"08 44 45.4",dec:"21 22 39.2",magnitude:4.66},{id:4,label:"Chi",ra:"08 21 36.4",dec:"27 08 10.9",magnitude:5.22},{id:5,label:"Iota",ra:"08 48 14.1",dec:"28 40 04.4",magnitude:4.19}],edges:[[0,2],[1,2],[2,3],[3,4],[3,5]]},a0={stars:[{id:0,label:"Regulus",ra:"10 09 44.0",dec:"11 50 33.1",magnitude:1.32},{id:1,label:"Algieba",ra:"10 21 22.9",dec:"19 42 46.3",magnitude:2.16},{id:2,label:"Zosma",ra:"11 15 28.3",dec:"20 23 02.6",magnitude:2.58},{id:3,label:"Adhafera",ra:"10 18 06.7",dec:"23 17 27.1",magnitude:3.5},{id:4,label:"Denebola",ra:"11 50 22.2",dec:"14 25 44.7",magnitude:2.16},{id:5,label:"Chertan",ra:"11 15 35.1",dec:"15 17 24.1",magnitude:3.33},{id:6,label:"Eta",ra:"10 08 43.5",dec:"16 38 18.8",magnitude:3.5},{id:7,label:"Rasalas",ra:"09 54 12.9",dec:"25 53 16.1",magnitude:4.03},{id:8,label:"Epsilon",ra:"09 47 18.0",dec:"23 39 27.6",magnitude:3.11}],edges:[[1,3],[2,5],[5,4],[1,6],[2,1],[6,0],[0,5],[3,7],[7,8],[2,4]]},s0={stars:[{id:0,label:"Nu",ra:"11 47 10.7",dec:"06 23 09.0",magnitude:4.13},{id:1,label:"Zaniah",ra:"12 21 13.2",dec:"-00 48 34.3",magnitude:3.89},{id:2,label:"Porrima",ra:"12 42 57.7",dec:"-01 35 23.7",magnitude:2.81},{id:3,label:"Spica",ra:"13 26 32.8",dec:"-11 17 43.6",magnitude:.89},{id:4,label:"Kappa",ra:"14 14 15.9",dec:"-10 23 36.5",magnitude:4.31},{id:5,label:"Syrma",ra:"14 17 21.6",dec:"-06 07 24.0",magnitude:4.16},{id:6,label:"Mu",ra:"14 44 24.8",dec:"-05 46 13.4",magnitude:3.95},{id:7,label:"109",ra:"14 47 32.8",dec:"01 47 01.4",magnitude:3.73},{id:8,label:"Tau",ra:"14 02 57.3",dec:"01 25 10.9",magnitude:4.25},{id:9,label:"Heze",ra:"13 36 00.2",dec:"-00 43 38.6",magnitude:3.41},{id:10,label:"Delta",ra:"12 56 53.9",dec:"03 15 28.1",magnitude:3.44},{id:11,label:"Vindemiatrix",ra:"13 03 27.4",dec:"10 49 15.5",magnitude:2.98}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[7,8],[8,9],[9,10],[10,11],[2,10],[3,9]]},u0={stars:[{id:0,label:"Zubenelgenubi II",ra:"14 52 17.9",dec:"-16 08 54.7",magnitude:2.78},{id:1,label:"Sigma",ra:"15 05 34.3",dec:"-25 22 56.3",magnitude:3.3},{id:2,label:"Zubeneschamali",ra:"15 18 23.1",dec:"-09 28 41.6",magnitude:2.56},{id:3,label:"Gamma",ra:"15 36 57.5",dec:"-14 52 31.6",magnitude:4.06},{id:4,label:"Theta",ra:"15 55 16.9",dec:"-16 48 17.5",magnitude:4.28},{id:5,label:"Upsilon",ra:"15 38 34.7",dec:"-28 13 09.8",magnitude:3.73}],edges:[[0,1],[0,2],[2,3],[3,4],[2,1],[1,5]]},c0={stars:[{id:0,label:"Acrab",ra:"16 06 55.3",dec:"-19 52 32.6",magnitude:2.59},{id:1,label:"Dschubba",ra:"16 01 50.6",dec:"-22 41 40.4",magnitude:2.25},{id:2,label:"Pi",ra:"16 00 23.8",dec:"-26 11 14.7",magnitude:2.81},{id:3,label:"Antares",ra:"16 30 58.3",dec:"-26 29 18.3",magnitude:.97},{id:4,label:"Tau",ra:"16 37 28.1",dec:"-28 16 06.8",magnitude:2.73},{id:5,label:"Epsilon",ra:"16 51 48.9",dec:"-34 20 18.8",magnitude:2.45},{id:6,label:"Mu1",ra:"16 53 35.8",dec:"-38 05 23.0",magnitude:2.92},{id:7,label:"Zeta2",ra:"16 56 22.6",dec:"-42 24 11.1",magnitude:3.75},{id:8,label:"Eta",ra:"17 13 58.6",dec:"-43 16 14.8",magnitude:3.41},{id:9,label:"Sargas",ra:"17 39 08.6",dec:"-43 00 43.4",magnitude:1.92},{id:10,label:"Iota1",ra:"17 49 21.5",dec:"-40 08 06.6",magnitude:3.09},{id:11,label:"Kappa",ra:"17 44 14.6",dec:"-39 02 29.6",magnitude:2.31},{id:12,label:"Shaula",ra:"17 35 19.9",dec:"-37 07 15.9",magnitude:1.52},{id:13,label:"Lesath",ra:"17 32 29.4",dec:"-37 18 53.3",magnitude:2.59}],edges:[[0,3],[1,3],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[11,12]]},l0={stars:[{id:0,label:"51",ra:"17 22 58.0",dec:"-23 58 57.0",magnitude:4.78},{id:1,label:"Sabik",ra:"17 11 50.2",dec:"-15 45 26.7",magnitude:2.44},{id:2,label:"Zeta",ra:"16 38 33.8",dec:"-10 37 12.4",magnitude:2.56},{id:3,label:"Yed",ra:"16 19 40.3",dec:"-04 45 23.3",magnitude:3.38},{id:4,label:"Kappa",ra:"16 58 52.5",dec:"09 19 55.5",magnitude:3.36},{id:5,label:"Resalhague",ra:"17 36 06.9",dec:"12 32 15.6",magnitude:2.13},{id:6,label:"Cabalrai",ra:"17 44 43.7",dec:"04 33 12.4",magnitude:2.92},{id:7,label:"Gaia DR2",ra:"15 50 57.4",dec:"-03 30 35.9",magnitude:3.33},{id:8,label:"Epsilon",ra:"15 52 05.6",dec:"04 23 55.1",magnitude:3.75},{id:9,label:"Unukalhai",ra:"15 45 31.8",dec:"06 20 34.7",magnitude:2.8},{id:10,label:"Delta A",ra:"15 36 01.6",dec:"10 27 03.7",magnitude:3.86},{id:11,label:"Beta",ra:"15 47 22.3",dec:"15 20 20.6",magnitude:3.67},{id:12,label:"Gamma",ra:"15 57 38.2",dec:"15 34 31.3",magnitude:3.94},{id:13,label:"Kappa",ra:"15 49 53.7",dec:"18 03 34.6",magnitude:4.19},{id:14,label:"Nu",ra:"17 22 15.5",dec:"-12 52 26.5",magnitude:4.34},{id:15,label:"Xi",ra:"17 39 02.5",dec:"-15 24 56.5",magnitude:3.59},{id:16,label:"Omicron",ra:"17 42 50.5",dec:"-12 53 25.2",magnitude:4.25},{id:17,label:"Eta",ra:"18 22 37.2",dec:"-02 53 41.5",magnitude:3.39},{id:18,label:"Alya",ra:"18 57 28.5",dec:"04 13 59.3",magnitude:4.66}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,1],[14,15],[15,16],[16,17],[17,18],[7,8],[8,9],[9,10],[10,11],[11,12],[12,13],[13,11]]},d0={stars:[{id:0,label:"Beta2",ra:"19 25 02.3",dec:"-44 45 00.2",magnitude:4.34},{id:1,label:"Rukbat",ra:"19 25 37.9",dec:"-40 34 00.1",magnitude:3.92},{id:2,label:"Iota",ra:"19 56 59.7",dec:"-41 48 00.9",magnitude:4.25},{id:3,label:"Theta1",ra:"20 01 22.3",dec:"-35 12 25.3",magnitude:4.28},{id:4,label:"62",ra:"20 04 12.2",dec:"-27 38 22.1",magnitude:4.44},{id:5,label:"h2",ra:"19 38 14.3",dec:"-24 49 40.7",magnitude:4.56},{id:6,label:"Tau",ra:"19 08 30.9",dec:"-27 37 59.7",magnitude:3.47},{id:7,label:"Nunki",ra:"18 56 49.9",dec:"-26 15 54.9",magnitude:2},{id:8,label:"Xi2",ra:"18 59 14.2",dec:"-21 04 26.3",magnitude:3.69},{id:9,label:"Omicron",ra:"19 06 11.7",dec:"-21 42 17.7",magnitude:3.91},{id:10,label:"43",ra:"19 19 06.6",dec:"-18 54 31.3",magnitude:5.03},{id:11,label:"Rho1",ra:"19 23 08.0",dec:"-17 48 01.9",magnitude:3.98},{id:12,label:"Eta",ra:"18 19 20.5",dec:"-36 45 10.2",magnitude:3.14},{id:13,label:"Kaus Australis",ra:"18 25 51.1",dec:"-34 22 17.9",magnitude:1.8},{id:14,label:"Ascella",ra:"19 04 13.1",dec:"-29 50 36.0",magnitude:2.61},{id:15,label:"Phi",ra:"18 47 14.1",dec:"-26 57 52.7",magnitude:3.13},{id:16,label:"Kaus Media",ra:"18 22 36.8",dec:"-29 49 00.8",magnitude:2.86},{id:17,label:"Alnsal",ra:"18 07 26.2",dec:"-30 25 23.7",magnitude:3.13},{id:18,label:"3",ra:"17 49 09.4",dec:"-27 50 24.9",magnitude:4.66},{id:19,label:"Kaus Borealis",ra:"18 29 32.0",dec:"-25 24 28.0",magnitude:2.97},{id:20,label:"Mu",ra:"18 15 16.7",dec:"-21 03 09.9",magnitude:3.86},{id:21,label:"HD 180885",ra:"19 21 20.2",dec:"-35 22 27.8",magnitude:5.53},{id:22,label:"V4089",ra:"19 35 52.0",dec:"-39 58 43.5",magnitude:5.91}],edges:[[0,1],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[12,13],[16,17],[17,18],[19,20],[7,15],[6,14],[15,19],[16,19],[14,21],[5,21],[2,22],[1,21],[21,22],[13,16],[13,17],[15,14],[15,16]]},h0={stars:[{id:0,label:"Algedi",ra:"20 19 26.8",dec:"-12 28 05.0",magnitude:3.73},{id:1,label:"Dabih",ra:"20 22 25.3",dec:"-14 42 10.1",magnitude:3.2},{id:2,label:"Psi",ra:"20 47 34.8",dec:"-25 10 49.4",magnitude:4.22},{id:3,label:"Omega",ra:"20 53 18.9",dec:"-26 49 29.2",magnitude:4.22},{id:4,label:"Theta",ra:"21 07 21.2",dec:"-17 08 01.0",magnitude:4.06},{id:5,label:"Zeta",ra:"21 28 05.7",dec:"-22 18 09.6",magnitude:3.92},{id:6,label:"Iota",ra:"21 23 38.3",dec:"-16 43 41.4",magnitude:4.44},{id:7,label:"Nashira",ra:"21 41 28.5",dec:"-16 32 58.0",magnitude:3.77},{id:8,label:"Deneb",ra:"21 48 25.1",dec:"-16 00 50.3",magnitude:2.94},{id:9,label:"Nu",ra:"20 22 03.4",dec:"-12 40 51.8",magnitude:4.72},{id:10,label:"Sigma",ra:"20 20 50.5",dec:"-19 02 25.9",magnitude:5.41}],edges:[[0,1],[1,2],[3,4],[4,1],[4,5],[5,6],[4,6],[6,7],[7,8],[1,9],[1,10]]},f0={stars:[{id:0,label:"c2",ra:"23 10 46.4",dec:"-21 02 11.8",magnitude:3.84},{id:1,label:"Skat",ra:"22 55 58.3",dec:"-15 41 17.0",magnitude:3.28},{id:2,label:"Tua",ra:"22 50 54.6",dec:"-13 27 39.6",magnitude:4.13},{id:3,label:"Sigma",ra:"22 31 57.9",dec:"-10 33 01.7",magnitude:4.81},{id:4,label:"Ancha",ra:"22 18 09.0",dec:"-07 39 34.2",magnitude:4.31},{id:5,label:"Sadalmelik",ra:"22 07 03.9",dec:"-00 11 58.6",magnitude:3.09},{id:6,label:"Sadachbia",ra:"22 22 56.6",dec:"-01 15 44.7",magnitude:3.83},{id:7,label:"Zeta",ra:"22 30 06.8",dec:"00 06 25.3",magnitude:3.73},{id:8,label:"Eta",ra:"22 36 38.2",dec:"00 00 37.0",magnitude:4},{id:9,label:"Lambda",ra:"22 53 54.9",dec:"-07 26 50.0",magnitude:3.8},{id:10,label:"Psi1",ra:"23 17 11.7",dec:"-08 57 07.4",magnitude:4.41},{id:11,label:"b1",ra:"23 24 16.6",dec:"-19 57 51.0",magnitude:4.09},{id:12,label:"Iota",ra:"22 07 47.0",dec:"-13 44 55.3",magnitude:4.25},{id:13,label:"Sadalsuud",ra:"21 32 52.4",dec:"-05 27 43.9",magnitude:3.03},{id:14,label:"Albali",ra:"20 49 01.9",dec:"-09 24 18.4",magnitude:3.78}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[4,12],[13,14],[5,13]]},p0={stars:[{id:0,label:"Upsilon",ra:"25 20 50.0",dec:"27 23 43.0",magnitude:4.75},{id:1,label:"Sigma",ra:"25 04 10.7",dec:"31 56 17.7",magnitude:5.47},{id:2,label:"Phi",ra:"25 15 06.0",dec:"24 42 57.1",magnitude:4.81},{id:3,label:"Eta",ra:"25 32 49.0",dec:"15 28 27.7",magnitude:3.78},{id:4,label:"Omicron",ra:"25 46 42.6",dec:"09 16 58.9",magnitude:4.41},{id:5,label:"Alrescha",ra:"26 03 20.2",dec:"02 53 02.2",magnitude:3.81},{id:6,label:"Xi",ra:"25 54 50.8",dec:"03 18 37.5",magnitude:4.75},{id:7,label:"Nu",ra:"25 42 43.7",dec:"05 36 49.0",magnitude:4.56},{id:8,label:"Mu",ra:"25 31 29.4",dec:"06 16 19.8",magnitude:4.97},{id:9,label:"Epsilon",ra:"25 04 14.1",dec:"08 01 26.9",magnitude:4.41},{id:10,label:"Delta",ra:"24 49 58.4",dec:"07 43 13.8",magnitude:4.53},{id:11,label:"41",ra:"24 21 52.7",dec:"08 19 42.0",magnitude:5.53},{id:12,label:"Omega",ra:"24 00 35.3",dec:"07 00 03.0",magnitude:4.09},{id:13,label:"Iota",ra:"23 41 13.8",dec:"05 45 38.8",magnitude:4.22},{id:14,label:"Theta",ra:"23 29 13.8",dec:"06 30 54.9",magnitude:4.44},{id:15,label:"Gamma",ra:"23 18 27.4",dec:"03 25 04.4",magnitude:3.84},{id:16,label:"Kappa",ra:"23 28 12.5",dec:"01 23 29.7",magnitude:4.94},{id:17,label:"Lambda",ra:"23 43 18.9",dec:"01 55 00.3",magnitude:4.53}],edges:[[0,1],[1,2],[0,2],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[11,12],[12,13],[13,14],[14,15],[15,16],[16,17],[17,13]]},g0={aries:r0,taurus:n0,gemini:i0,cancer:o0,leo:a0,virgo:s0,libra:u0,scorpius:c0,ophiuchus:l0,sagittarius:d0,capricornus:h0,aquarius:f0,pisces:p0};class v0{constructor(e){this.graphManager=e,this.settings=e.settings,this.layout=e.layout}load(e){const t=g0[e.toLowerCase()];t?(this.graphManager.graph=w0(e,t.stars,t.edges,this.graphManager.graphClass[this.settings.type]),this.layout.applyLayout("rotate180")):console.warn(`Constellation "${e}" not found.`)}aries(){this.load("aries")}taurus(){this.load("taurus")}gemini(){this.load("gemini")}cancer(){this.load("cancer")}leo(){this.load("leo")}virgo(){this.load("virgo")}libra(){this.load("libra")}scorpius(){this.load("scorpius")}ophiuchus(){this.load("ophiuchus")}sagittarius(){this.load("sagittarius")}capricornus(){this.load("capricornus")}aquarius(){this.load("aquarius")}pisces(){this.load("pisces")}orion(){this.load("orion")}}function y0(n=3){return Math.pow(.8,n)}function m0(n){const[e,t,r]=n.split(" ").map(parseFloat);return(e+t/60+r/3600)*15}function b0(n){const e=n.trim().startsWith("-")?-1:1,t=n.trim().replace("+","").replace("-","").split(" ").map(parseFloat),[r,o,a]=t;return e*(r+o/60+a/3600)}function w0(n,e,t,r){const o=new r;return e.forEach(a=>{const s=m0(a.ra),l=b0(a.dec);o.addNode(a.id,{label:a.label,x:s,y:l,magnitude:a.magnitude,size:y0(a.magnitude),desc:{name:a.label,magnitude:a.magnitude,RA:E0(a.ra),DEC:a.dec}})}),t.forEach(([a,s])=>{o.mergeEdge(a,s)}),o}function E0(n){let[e=0,t=0,r=0]=n.split(" ").map(Number);r=r%60,t=t%60,e=e%24;const o=String(e).padStart(2,"0"),a=String(t).padStart(2,"0"),s=r.toFixed(1).padStart(4,"0");return[o,a,s].join(" ")}class x0{constructor(e){this.graphManager=e,this.settings=e.settings,this.layout=e.layout,this.zodiac=new v0(e)}empty(e){this.graphManager.graph=Pt.empty(this.graphManager.graphClass[this.settings.type],Number(e)),this.layout.applyLayout("circle")}complete(e){this.graphManager.graph=Pt.complete(this.graphManager.graphClass[this.settings.type],Number(e)),this.layout.applyLayout("circle")}ladder(e){this.graphManager.graph=Pt.ladder(this.graphManager.graphClass[this.settings.type],Number(e)),this.layout.applyLayout("twoLine",{line1Count:Number(e),Y:50})}completeBipartite(e,t){this.graphManager.graph=Pt.empty(this.graphManager.graphClass[this.settings.type],Number(e)+Number(t));for(let r=0;r<Number(e);r++)for(let o=Number(e);o<Number(e)+Number(t);o++)this.graphManager.graph.addEdge(r,o);this.layout.applyLayout("twoLine",{line1Count:Number(e),Y:50})}cycle(e){this.graphManager.graph=Pt.path(this.graphManager.graphClass[this.settings.type],Number(e)),this.graphManager.graph.addEdge(0,Number(e)-1),this.layout.applyLayout("circle")}path(e){this.graphManager.graph=Pt.path(this.graphManager.graphClass[this.settings.type],Number(e)),this.layout.applyLayout("oneLine")}caveman(e,t){this.graphManager.graph=Zu.caveman(this.graphManager.graphClass[this.settings.type],Number(e),Number(t)),this.layout.applyLayout("circle")}connectedCaveman(e,t){this.graphManager.graph=Zu.connectedCaveman(this.graphManager.graphClass[this.settings.type],Number(e),Number(t)),this.layout.applyLayout("circle")}clusters(e,t,r){this.graphManager.graph=wo.clusters(this.graphManager.graphClass[this.settings.type],{order:Number(e),size:Number(t),clusters:Number(r)}),this.layout.applyLayout("random")}erdosRenyi(e,t){this.graphManager.graph=wo.erdosRenyi(this.graphManager.graphClass[this.settings.type],{order:Number(e),probability:Number(t)}),this.layout.applyLayout("circle")}girvanNewman(e){this.graphManager.graph=wo.girvanNewman(this.graphManager.graphClass[this.settings.type],{zOut:4}),this.layout.applyLayout("circle")}krackhardtkite(){this.graphManager.graph=t0(this.graphManager.graphClass[this.settings.type]),this.layout.applyLayout("oneLine")}florentineFamilies(){this.graphManager.graph=Um(this.graphManager.graphClass[this.settings.type]),this.layout.applyLayout("circle")}karateClub(){this.graphManager.graph=Bm(this.graphManager.graphClass[this.settings.type]),this.layout.applyLayout("circle")}}const yc=document;class _0{constructor(e){this.app=e.app,this.eventBus=this.app.eventBus,this.graphManager=e,this.panel=yc.querySelector("widgets #graphs-panel"),this.ul=this.panel.querySelector("ul"),this.index=0}init(){this.listeners()}lis(e="id"){const t=this.ul.querySelectorAll("li.select");return e=="id"?[...t].map(r=>r.id.split("-")[1]):t}selectLis(e){if(this.index=e.split("-")[1],this.selectLi(this.index),this.app.keyHandler.isCtrlHold())this.graphManager.graphIndex=this.index;else{let t=this.lis().map(r=>this.graphManager.graphs[r].nodes());t=new Set(t.flat()),this.graphManager.selectAllNode(t)}}updateGraphsPanel(){this.ul.innerHTML="",this.graphManager.graphs.forEach((e,t)=>{e.getAttribute("label")==="Graph"?e.setAttribute("id",0):e.setAttribute("id",t),e.getAttribute("label")||e.setAttribute("label",`graph ${t}`);const r=yc.createElement("li");r.id=`graphs-${e.getAttribute("id")}`,r.setAttribute("name","graphs"),r.textContent=e.getAttribute("label"),this.ul.appendChild(r)})}listeners(){this.panel.addEventListener("click",e=>{e.target.id=="graphs-panel"&&this.deselectLis()})}selectLi(e){this.app.keyHandler.isCtrlHold()&&this.deselectLis();const t=this.ul.querySelector(`#graphs-${e}`);t&&t.classList.toggle("select")}deselectLis(){this.lis("node").forEach(e=>e.classList.remove("select")),this.graphManager.deselectAll()}}const mc=document;class S0{constructor(e){this.app=e.app,this.eventBus=this.app.eventBus,this.graphManager=e,this.settings=e.settings,this.panel=mc.querySelector("widgets #face-panel"),this.ul=this.panel.querySelector("ul"),this.index=0}init(){this.listeners(),this.events()}lis(e="id"){const t=this.ul.querySelectorAll("li.select");return e=="id"?[...t].map(r=>r.id.split("-")[1]):t}selectLis(e){const t=this.graphManager.graph,r=e.split("-")[1];t.getFaceAttributes(r),this.selectLi(r);let o=this.lis().map(a=>t.getFaceAttribute(a,"nodes"));o=new Set(o.flat()),this.graphManager.selectAllNode(o)}updateFacePanel(){this.ul.innerHTML="";const e=this.graphManager.graph;let t=1;e.forEachFace((r,o)=>{e.getFaceAttribute(r,"id")===void 0&&e.setFaceAttribute(r,"id",index),e.getFaceAttribute(r,"label")||e.setFaceAttribute(r,"label",`face ${t++}`);const a=mc.createElement("li");a.id=`face-${r}`,a.setAttribute("name","faces"),a.setAttribute("key",r),a.textContent=e.getFaceAttribute(r,"label"),this.ul.appendChild(a)})}listeners(){this.panel.addEventListener("click",e=>{e.target.id=="face-panel"&&this.deselectLis()})}events(){this.eventBus.on("key:down",e=>{[...e.detail.key].join("")})}selectLi(e){const t=this.ul.querySelector(`#face-${e}`);if(t&&t.classList.toggle("select"),console.log(5),this.settings.colorPicker){const r=this.graphManager.graph.getFaceAttribute(e,"color"),o=this.graphManager.graph.getFaceAttribute(e,"labelColor");this.app.colorPicker.setColor("face",r),this.app.colorPicker.setColor("label",o)}}deselectLis(){this.lis("node").forEach(e=>e.classList.remove("select")),this.graphManager.deselectAll()}}class A0{constructor(e,t,r="mixed"){this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.layout=e.layout,this.generator=new x0(this),this.metric=new Ol(this),this.graphsPanel=new _0(this),this.facePanel=new S0(this),this.limit=t,this.index=0,this.cut=!1,this.graphClass={directed:zy,undirected:$y,mixed:Xt},this.graphIndex=0,this._graph=Pt.empty(this.graphClass[r],0),this._graph.updateAttributes(o=>({...o,label:"Graph",id:0})),this.graphs=[this._graph],this.history=[this.graphs.map(o=>o.export())],this.selectNodeIndex=0,this.selectEdgeIndex=0,this.subGraph=void 0,this.init()}init(){this.setupEventListeners(),this.graphsPanel.init(),this.facePanel.init()}get graph(){return this.graphs[this.graphIndex]}set graph(e){e.mergeAttributes(this.graphs[this.graphIndex].getAttributes()),this.graphs=[e]}addNode(e,t){this.graph.addNode(e,t),this.saveGraphState()}getHistory(){return this.history}getIndex(e){return this.history[e]??void 0}updateIndex(e){if(e<0)return console.log("Nothing to Undo..."),!1;if(e>=this.history.length)return console.log("Nothing to Redo..."),!1;this.index=e,this.graphs=[];for(const t of this.history[this.index]){const r=Pt.empty(this.graphClass[t.options.type],0);this.graphs.push(r.import(t))}return this.eventBus.emit("updateSetting",{key:"type",value:this.history[this.index][0].options.type}),this.graphIndex=0,this.graphsPanel.updateGraphsPanel(),this.facePanel.updateFacePanel(),this.settings.forceSimulation&&this.app.updateSimulation(),!0}clearTo(e="mixed"){this.eventBus.emit("updateSetting",{key:"type",value:e}),this.graph=Pt.empty(this.graphClass[e],0),this.saveGraphState()}setupEventListeners(){this.eventBus.on("redo",e=>{this.updateIndex(this.index+1)&&this.eventBus.emit("graph:updated",{type:"redo"})}),this.eventBus.on("undo",e=>{this.updateIndex(this.index-1)&&this.eventBus.emit("graph:updated",{type:"undo"})})}push(e){this.history.push(e),this.index++,this.history.length>=this.limit&&(this.history=this.history.slice(-this.limit),this.index=this.history.length-1)}saveGraphState(e=!0){this.history.length!=this.index+1&&(this.history.length=this.index+1),this.push(this.graphs.map(t=>t.export())),this.settings.saveHistory&&this.saveHistoryToLocalStorage(),this.graphsPanel.updateGraphsPanel(),this.facePanel.updateFacePanel(),e&&this.app.updateSimulation()}makeGraphComplete(e="directed"){for(let t=0;t<this.graph.order;t++)for(let r=t+1;r<this.graph.order;r++)this.graph.type=="mixed"?e=="undirected"?this.graph.mergeUndirectedEdge(t,r):this.graph.mergeDirectedEdge(t,r):this.graph.mergeEdge(t,r);this.saveGraphState()}dropSelectedNodesEdges(){const e=this.graph.getSelectedEdges(),t=this.graph.getSelectedNodes();this.graphs.forEach((r,o)=>{e.forEach(a=>{r.hasEdge(a)&&r.dropEdge(a)}),t.forEach(a=>{r.hasNode(a)&&r.dropNode(a)})}),this.saveGraphState()}connectSelectedNodes(e="directed"){this.graph.connectSelectedNodes(this.settings.edge_color,e),this.saveGraphState()}connectSelectedNodesInOrder(e="directed"){this.graph.connectSelectedNodesInOrder(this.settings.edge_color,e),this.saveGraphState()}updateSelectedNodesEdgesColor(e=!0,t=!0,r=!0,o=!0){this.graph.updateSelectedNodesColor(e?this.settings.node_color:!1,t?this.settings.stroke_color:!1,o?this.settings.label_color:!1),this.graph.updateSelectedEdgesColor(r?this.settings.edge_color:!1,o?this.settings.label_color:!1),this.saveGraphState(!1)}updateSelectedName(e){e?this.graph.updateSelectedName(e):this.graph.updateSelectedName(""),this.saveGraphState(!1)}updateSelectedInfo(e){e?this.graph.updateSelectedInfo({"":e}):this.graph.updateSelectedInfo({}),this.saveGraphState(!1)}updateSelectedWeight(e){const t=parseFloat(e);t?this.graph.updateSelectedWeight(t):this.graph.updateSelectedWeight(void 0),this.saveGraphState(!1)}deselectAll(){this.deselectAllNode(),this.deselectAllEdge()}deselectAllNode(){this.graph.updateEachNodeAttributes((e,t)=>({...t,selected:!1})),this.app.rect.scale.active=!1}deselectAllEdge(){this.graph.updateEachEdgeAttributes((e,t)=>({...t,selected:!1})),this.app.rect.scale.active=!1}selectAll(e=null){this.selectAllNode(e),this.selectAllEdge(e)}selectAllEdge(e){e||this.graph.updateEachEdgeAttributes((t,r)=>({...r,selected:r.id+1}))}selectAllNode(e){e?(this.deselectAllNode(),e.forEach(t=>{this.graph.hasNode(t)&&this.graph.updateNodeAttributes(t,r=>({...r,selected:r.id+1}))})):this.graph.updateEachNodeAttributes((t,r)=>({...r,selected:r.id+1}))}selectNode(e){this.graph.selectNode(e)}selectNextNode(){this.app.keyHandler.isShiftHold()||this.deselectAllNode(),this.selectNodeIndex=bn(this.selectNodeIndex+1,this.graph.order);const e=this.graph.nodes()[this.selectNodeIndex];this.graph.selectNode(e)}selectPerviousNode(){this.app.keyHandler.isShiftHold()||this.deselectAllNode(),this.selectNodeIndex=bn(this.selectNodeIndex-1,this.graph.order);const e=this.graph.nodes()[this.selectNodeIndex];this.graph.selectNode(e)}selectNextEdge(){this.app.keyHandler.isShiftHold()||this.deselectAllEdge(),this.selectEdgeIndex=bn(this.selectEdgeIndex+1,this.graph.size);const e=this.graph.edges()[this.selectEdgeIndex];this.graph.selectEdge(e)}selectPerviousEdge(){this.app.keyHandler.isShiftHold()||this.deselectAllEdge(),this.selectEdgeIndex=bn(this.selectEdgeIndex+1,this.graph.size);const e=this.graph.edges()[this.selectEdgeIndex];this.graph.selectEdge(e)}copySubgraph(){this.subGraph=this.graph.copySubgraph(),this.cut=!1}cutSubgraph(){this.subGraph=this.graph.cutSubgraph(),this.cut=!0}pasteSubgraph(e=!1,t={x:150,y:100}){this.subGraph=this.graph.pasteSubgraph(this.subGraph,this.cut,t),e&&this.subgraph(),this.cut=!1,this.saveGraphState()}reverseGraph(){if(this.graph.type!=="undirected"){const e=kt.reverse(this.graph);this.graph.replace(e),this.saveGraphState()}}toDirectedGraph(){if(this.graph.type!=="directed"){const e=kt.toDirected(this.graph);this.clearTo("directed"),this.graph.replace(e),this.eventBus.emit("updateSetting",{key:"type",value:"directed"}),this.saveGraphState()}}toMixedGraph(){if(this.graph.type!=="mixed"){const e=kt.toMixed(this.graph);this.clearTo("mixed"),this.graph.replace(e),this.eventBus.emit("updateSetting",{key:"type",value:"mixed"}),this.saveGraphState()}}toUndirectedGraph(){if(this.graph.type!=="undirected"){const e=kt.toUndirected(this.graph);this.clearTo("undirected"),this.graph.replace(e),this.eventBus.emit("updateSetting",{key:"type",value:"undirected"}),this.saveGraphState()}}toWeighted(){this.graph.updateEachEdgeAttributes((e,t)=>({...t,weight:1})),this.saveGraphState()}toUnweighted(){this.graph.updateEachEdgeAttributes((e,t)=>({...t,weight:void 0})),this.saveGraphState()}saveHistoryToLocalStorage(){if(!this.validateHistory(this.history))return console.warn("Cannot save: history data is invalid."),!1;try{const e=JSON.stringify(this.history);return localStorage.setItem("graphStudio-history",e),!0}catch(e){return console.error("Failed to save history to local storage:",e),!1}}loadHitoryFromLocalStorage(){const e=localStorage.getItem("graphStudio-history");if(e)try{const t=JSON.parse(e);if(this.validateHistory(t))return this.history=t,this.updateIndex(this.history.length-1),!0}catch{console.warn("Invalid JSON format in localStorage.")}}cleanLocalStorage(){localStorage.removeItem("graphStudio-history")}validateHistory(e){if(!Array.isArray(e))return console.error("Graph data must be an array."),!1;for(const t of e){const r=t[0];if(!r)return console.error(`Graph at index ${i} is missing.`),!1;if(!Array.isArray(r.nodes))return console.error(`Graph at index ${i} has invalid or missing nodes.`),!1;for(const o of r.nodes){if(typeof o.key!="string")return console.error(`Node missing or invalid key at graph ${i}.`),!1;if(typeof o.attributes!="object"||o.attributes===null)return console.error(`Node ${o.key} missing attributes at graph ${i}.`),!1;if(!("id"in o.attributes))return console.error(`Node ${o.key} missing id at graph ${i}.`),!1}if(!Array.isArray(r.edges))return console.error(`Graph at index ${i} has invalid or missing edges.`),!1;for(const o of r.edges){if(typeof o.key!="string")return console.error(`Edge missing or invalid key at graph ${i}.`),!1;if(typeof o.source!="string"||typeof o.target!="string")return console.error(`Edge ${o.key} missing or invalid source/target at graph ${i}.`),!1;if(typeof o.attributes!="object"||o.attributes===null)return console.error(`Edge ${o.key} missing attributes at graph ${i}.`),!1}}return!0}subgraph(){if(!this.graph.getSelectedNodes().length){this.metric.addHeader("Graphs"),this.metric.addInfo("Select at least one node"),this.metric.addLine();return}const t=this.graph.copySubgraph();t.removeAttribute("id"),t.removeAttribute("label"),this.graphs.push(t),t.deselectAll(),this.deselectAll(),this.saveGraphState()}addFace(){const e=this.graph.getSelectedNodes(),t=kt.subgraph(this.graph,e);this.metric._isCycle(t)&&(this.graph.addFace(e),this.saveGraphState())}}const k0="Shortcuts",C0={n:{desc:"New graph",action:"new-mixed-btn"},o:{desc:"Import graph",action:"import-graph"},s:{desc:"Scale",action:"toggle-scale-btn",value:!0},u:{desc:"Undo",action:"undo-btn"},d:{desc:"Delete",action:"remove-selection-btn"},c:{desc:"Update color",action:"color-selection-btn"},e:{desc:"Add edge",action:"add-edge-btn"},"alt+e":{desc:"Add edge",action:"add-edge-in-order-btn"},a:{desc:"All node info",action:"all-node-info-btn"},q:{desc:"Clear panel",action:"clear-info-panel-btn"},y:{desc:"Copy",action:"copy-subgraph"},x:{desc:"Cut",action:"cut-subgraph"},p:{desc:"Paste",action:"paste-subgraph"},"ctrl+p":{desc:"Paste",action:"paste-subgraph-seprate"},r:{desc:"Rename",action:"rename-btn"},i:{desc:"Info",action:"desc-btn"},w:{desc:"weight",action:"weight-btn"},f:{desc:"Force Simulation",action:"toggle-force-btn",value:!0},"ctrl+f":{desc:"Force Simulation",action:"add-face-btn"},t:{desc:"Tree",action:"toggle-tree-btn",value:!0},F5:{desc:"Reload",action:"reload"},ArrowUp:{desc:"Select all node",action:"select-all-node"},ArrowDown:{desc:"Deselect all node",action:"deselect-all-node"},ArrowRight:{desc:"Select next node",action:"select-next-node"},ArrowLeft:{desc:"Select previous node",action:"select-pervious-node"},"shift+ArrowRight":{desc:"Select next node",action:"select-next-node"},"shift+ArrowLeft":{desc:"Select previous node",action:"select-pervious-node"},shift:{desc:"Tree",action:"toggle-select-btn",value:!0},alt:{desc:"Component",action:"toggle-component-btn",value:!0},ctrl:{desc:"Panning",action:"toggle-panning-btn",value:!0},"alt+a":{desc:"All edge info",action:"all-edge-info-btn"},"alt+ArrowUp":{desc:"Select all edge",action:"select-all-edge"},"alt+ArrowDown":{desc:"Deselect all edge",action:"deselect-all-edge"},"alt+ArrowRight":{desc:"Select next edge",action:"select-next-edge"},"alt+ArrowLeft":{desc:"Select previous edge",action:"select-pervious-edge"},"shift+alt+ArrowRight":{desc:"Select next edge",action:"select-next-edge"},"shift+alt+ArrowLeft":{desc:"Select previous edge",action:"select-pervious-edge"},"ctrl+r":{desc:"Redo",action:"redo-btn"},"ctrl+s":{desc:"Export graph",action:"export-graph"},C:{desc:"Complete",action:"complete-btn"},"alt+C":{desc:"Complete",action:"complete-directed-btn"},O:{desc:"Organize circle",action:"organize-circle"},E:{desc:"Add directed edge",action:"add-directed-edge-btn"},"alt+E":{desc:"Add directed edge",action:"add-directed-edge-in-order-btn"},P:{desc:"Export PNG",action:"export-png"},"shift+C":{desc:"Complete",action:"complete-btn"},"shift+alt+C":{desc:"Complete",action:"complete-directed-btn"},"shift+O":{desc:"Organize circle",action:"organize-circle"},"shift+alt+E":{desc:"Add directed edge",action:"add-directed-edge-in-order-btn"},"shift+E":{desc:"Add directed edge",action:"add-directed-edge-btn"},"shift+P":{desc:"Export PNG",action:"export-png"},space:{desc:"Home",action:{c:{desc:"+ Color",action:{c:{desc:"Color Picker",action:"color-picker-btn"},n:{desc:"Update Node Color",action:"update-node-color"},s:{desc:"Update Stroke Color",action:"update-stroke-color"},e:{desc:"Update Edge Color",action:"update-edge-color"},l:{desc:"Update Label Color",action:"update-label-color"}}},n:{desc:"+ New Graph",action:{m:{desc:"Mixed Graph",action:"new-mixed-btn"},d:{desc:"Directed Graph",action:"new-digraph-btn"},u:{desc:"Undirected Graph",action:"new-undirected-graph-btn"}}},"⇒":{desc:"Next Node (Alt for Edge)",action:""},"⇐":{desc:"Pervious Node (Alt for Edge)",action:""},"⇑":{desc:"Select all Nodes (Alt for Edges)",action:""},"⇓":{desc:"Deselect all Nodes (Alt for Edges)",action:""}}}},Mn={desc:k0,action:C0},Ze=document;class D0{constructor(e){this.app=e,this.eventBus=e.eventBus,this.eventKeyMap={AltRight:"alt",ControlRight:"ctrl",ShiftRight:"shift",AltLeft:"alt",ControlLeft:"ctrl",ShiftLeft:"shift",Space:"space"},this.pressedKeys=new Set,this.lastChord=Mn.action.space.action,this.modalChord=Ze.querySelector(".modal-chord"),this.inputModal=Ze.querySelector(".modal-input"),this._input=!1,this.header=Ze.querySelector(".modal-chord .shortcut-chord .header"),this.fakeHeader=Ze.querySelector(".modal-chord  .shortcut-chord-fake .header"),this._Chord=Ze.querySelector(".shortcut-chord"),this.fakeChord=Ze.querySelector(".shortcut-chord-fake"),this.exceptionKey=["ArrowUp","ArrowDown","arrowLeft","ArrowRight"]}init(){this.chordGenerator(this.lastChord),Ze.addEventListener("keydown",t=>{if(t.repeat&&!this.exceptionKey.includes(t.key))return;const r=this.updatePressedKeys(t,"add");if(this._input){if(r==="Escape"&&this.toggleInput("rename",!1),r==="Enter"){const o=Ze.querySelector(".input-chord input");this.app.menu.handleMenuAction(this._input,o.value),this.toggleInput("rename",!1)}}else{this.isChordVisible()&&this.eventBus.emit("key:down",{key:this.pressedKeys});const o=this.findKey();o&&t.preventDefault(),this.action(o)}}),Ze.addEventListener("keyup",t=>{if(t.repeat&&!this.exceptionKey.includes(t.key))return;const r=this.updatePressedKeys(t,"delete");this._input||(t.preventDefault(),this.lastChord[r]&&typeof this.lastChord[r].value=="boolean"&&this.app.menu.handleMenuAction(this.lastChord[r].action,!this.lastChord[r].value)),this.eventBus.emit("key:up",{key:this.pressedKeys})});const e=Ze.querySelectorAll(".modal, .modal-chord, .modal-input");e.length>0&&e.forEach(t=>{t.addEventListener("click",r=>{r.target===t&&(t.style.display="none",this.lastChord=Mn.action,this._input=!1)})})}chordGenerator(e){const t=Ze.createElement("ul");for(const a in e){const s=e[a].desc,l=Ze.createElement("li");l.innerHTML=`
      <span class="title">${a}</span>
      <span class="arrow">→</span>
      <span class="desc">${s}</span>
    `,t.appendChild(l)}const r=this._Chord.querySelector("ul");r&&this._Chord.removeChild(r);const o=this.fakeChord.querySelector("ul");o&&this.fakeChord.removeChild(o),this._Chord.appendChild(t),this.fakeChord.appendChild(t.cloneNode(!0))}action(e){const t=this.lastChord[e];t?typeof t.action=="string"?(this.app.menu.handleMenuAction(t.action,t.value),this.lastChord=Mn.action,this.toggleChord(!1)):(this.lastChord=t.action,this.chordGenerator(this.lastChord),this.toggleChord(!0)):(this.toggleChord(!1),this.lastChord=Mn.action)}toggleChord(e=!0){e?this.modalChord.style.display="flex":this.modalChord.style.display="none"}toggleInput(e="rename",t=!0){const r=Ze.querySelector(".input-chord .header"),o=Ze.querySelector(".input-chord input");switch(e){case"rename":r.textContent="Rename",o.name="rename",o.placeholder="Enter New Name ...";break;case"desc":r.textContent="Description",o.name="desc",o.placeholder="Enter New Description ...";break;case"weight":r.textContent="Weight",o.name="weight",o.placeholder="Enter New Weight ...";break}t?(this.inputModal.style.display="flex",o.focus(),this._input=e):(this.inputModal.style.display="none",this._input=!1),setTimeout(()=>{o.value=""},1)}findKey(){return Object.keys(this.lastChord).find(r=>{const o=r.split("+");return this.isCombo(...o)})}isCombo(...e){return e.every(t=>this.pressedKeys.has(t))&&this.pressedKeys.size===e.length}updatePressedKeys(e,t="add"){const r=this.eventKeyMap[e.code]||e.key;return t==="add"&&r!=="meta"?this.pressedKeys.add(r):this.pressedKeys.delete(r),r}isShiftHold(){return this.pressedKeys.has("shift")}isCtrlHold(){return this.pressedKeys.has("ctrl")}isChordVisible(){return this.modalChord.style.display!=="none"}}var rr;const br=class br{constructor(e){os(this,rr,!0);if(this.app=e,this.eventBus=e.eventBus,br.instance)return br.instance;br.instance=this,this.debounceTimer=null,this.defaultSettings={background_color:"#ffffff",colorPicker:!1,component:!1,console_panel:!0,directed:!0,directed_edge:!0,edgeLabel:!0,edge_color:"#4682b4",edge_size:2,forceSimulation:!0,grid:20,type:"mixed",grid_color:"#00000020",info_panel:!0,label_color:"#000000",label_pos:{x:0,y:0},label_size:15,node_color:"#ffffff",face_color:"#4682b455",node_radius:40,panning:!1,scale:!1,select:!1,stroke_color:"#4682b4",stroke_size:2,tools_panel:!0,tree:!0,vertexLabel:!0,faceLabel:!0,weightLabel:!0,saveHistory:!0,historyLimit:100,graphs_panel:!0,face_panel:!0},this.nightSkyTheme={background_color:"#0d1b2a",edge_color:"#60a5fa",edge_size:1,forceSimulation:!1,grid_color:"#ffffff10",label_color:"#d1d5db",label_pos:{x:-20,y:-20},node_color:"#ffffff",node_radius:10,stroke_color:"#ffffff",stroke_size:0},this.settings=this.loadFromLocalStorage(),this.registerEventListeners()}init(){nv(this.settings,this.app.canvas)}registerEventListeners(){this.eventBus.on("updateSetting",e=>{const{key:t,value:r}=e.detail;if(this.setSetting(t,r),t=="grid"){const o=document.documentElement;document.querySelector(".container").classList.toggle("grid-hidden",this.settings.grid<=2),o.style.setProperty("--grid-size",`${this.settings.grid}px`)}else t&&r!==void 0&&this.eventBus.emit("graph:updated",{type:t})}),this.eventBus.on("updateAllSettings",e=>{const t=e.detail;t&&typeof t=="object"&&this.setAllSettings(t)}),this.eventBus.on("resetSettings",()=>{this.resetToDefault()}),this.eventBus.on("toggleSetting",e=>{const{key:t,value:r}=e.detail;t&&(this.toggleSetting(t,r),(t=="vertexLabel"||t=="directed_edge"||t=="edgeLabel"||t=="weightLabel")&&this.eventBus.emit("graph:updated",{type:"vertexLabel"}))})}loadFromLocalStorage(){const e=localStorage.getItem("appSettings");if(e)try{const t=JSON.parse(e);return this.validateSettings(t)}catch{console.warn("Invalid settings in localStorage. Using defaults.")}return{...this.defaultSettings}}saveToLocalStorage(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{localStorage.setItem("appSettings",JSON.stringify(this.settings)),console.log("Settings saved to localStorage"),this.eventBus.emit("settingsChanged",this.getAllSettings())},500)}resetToDefault(){this.setAllSettings(this.defaultSettings)}getSetting(e){return this.settings[e]}getAllSettings(){return{...this.settings}}setSetting(e,t){e in this.settings?this.settings[e]!==t&&(this.settings[e]=t,this.eventBus.emit("settingChanged",{key:e,value:t}),pn(this,rr)&&this.saveToLocalStorage()):console.warn(`Setting "${e}" does not exist.`)}setAllSettings(e){Object.keys(e).forEach(t=>{t in this.settings&&(this.settings[t]=e[t])}),this.eventBus.emit("settingsChanged",this.getAllSettings()),pn(this,rr)&&this.saveToLocalStorage(),this.init(),this.app.drawGraph()}toggleSetting(e,t=null){const r=["scale","panning","select","component"];e in this.settings&&typeof this.settings[e]=="boolean"?(t===null?this.settings[e]=!this.settings[e]:this.settings[e]=t,r.includes(e)&&r.forEach(o=>{o!=e&&this.settings[e]&&(this.settings[o]=!1)}),(e==="component"&&this.settings.component||e==="scale"&&this.settings.scale||e==="panning"&&this.settings.panning)&&(this.settings.forceSimulation=!1,this.eventBus.emit("settingToggled",{key:"forceSimulation",value:this.settings.forceSimulation})),e==="forceSimulation"&&this.settings.forceSimulation&&(this.settings.component=!1,this.settings.scale=!1,this.settings.panning=!1),this.eventBus.emit("settingToggled",{key:e,value:this.settings[e]}),pn(this,rr)&&t===null&&this.saveToLocalStorage(),this.init(),this.app.widget.init()):console.warn(`Setting "${e}" does not exist or is not a boolean.`)}setAutoSave(e){as(this,rr,e)}validateSettings(e){return Object.keys(this.defaultSettings).reduce((t,r)=>(t[r]=e&&e.hasOwnProperty(r)?e[r]:this.defaultSettings[r],t),{})}loadNightSkyTheme(){this.setAllSettings(this.nightSkyTheme)}};rr=new WeakMap,Re(br,"instance",null);let ra=br;const be=document;class N0{constructor(e,t,r="menu-bar"){if(this.app=e,this.eventBus=e.eventBus,this.graphManager=e.graphManager,this.appSettings=e.appSettings,this.layout=e.layout,this.menuData=t,this.container=be.getElementById(r),!this.container){console.error("Menu container not found!");return}this.spaceEvent=new KeyboardEvent("keydown",{key:" ",code:"Space",keyCode:32,which:32,bubbles:!0})}init(){this.renderMenu(),this.attachEventListeners()}renderMenu(){this.container.innerHTML="";const e=be.createElement("ul");this.menuData.forEach(t=>{const r=this.createMenu(t);e.appendChild(r)}),this.container.appendChild(e)}createMenu(e){const t=be.createElement("li");if(e.id&&(t.id=e.id),e.title&&(t.textContent=e.title),e.submenu){const r=this.createSubmenu(e.submenu);t.appendChild(r)}return t}createSubmenu(e){const t=be.createElement("ul");return e.forEach(r=>{if(r.type==="divider"){t.appendChild(be.createElement("hr"));return}const o=be.createElement("li");if(r.id&&(o.id=r.id),r.title){const a=be.createElement("label");if(a.textContent=r.title,r.link){const s=be.createElement("a");s.href=r.link,s.target="_blank",r.label?s.textContent=r.label:(s.textContent="?",s.classList.add("border")),a.insertBefore(s,a.firstChild)}o.appendChild(a)}if(r.shortcut){const a=be.createElement("span");a.textContent=r.shortcut,o.appendChild(a)}if("check"in r&&!r.shortcut){const a=be.createElement("span");a.innerHTML="&#10004;",a.classList.add("check"),r.check||a.classList.add("hidden"),o.appendChild(a)}if(r.input)if(r.id==="import-graph")o.appendChild(this.createInput(r.input[0]));else{const a=be.createElement("div");r.input.forEach(s=>{a.appendChild(this.createInput(s))}),o.appendChild(a)}r.name&&o.setAttribute("name",r.name),r.submenu&&o.appendChild(this.createSubmenu(r.submenu)),t.appendChild(o)}),t}createInput(e){const t=be.createElement("input");return t.type=e.type||"text",t.id=e.id,"hidden"in e&&(t.hidden=e.hidden),e.name&&(t.name=e.name),e.placeholder&&(t.placeholder=e.placeholder),e.required&&(t.required=!0),["number","range","date"].includes(t.type)&&(e.min!==void 0&&(t.min=e.min),e.max!==void 0&&(t.max=e.max),e.step!==void 0&&(t.step=e.step)),e.value!==void 0&&(e.type==="checkbox"||e.type==="radio"?t.checked=e.value:t.value=e.value),t}handleMenuAction(e,t){const r={"new-mixed-btn":()=>{this.graphManager.clearTo("mixed")},"new-digraph-btn":()=>{this.graphManager.clearTo("directed")},"new-undirected-graph-btn":()=>{this.graphManager.clearTo("undirected")},"import-graph":()=>this.eventBus.emit("import"),"export-graph":()=>this.eventBus.emit("export",{type:"json"}),"export-png":()=>this.eventBus.emit("export",{type:"png"}),"default-settings-btn":()=>this.appSettings.resetToDefault(),"sky-night-theme-btn":()=>this.appSettings.loadNightSkyTheme(),reload:()=>location.reload(),"add-edge-btn":()=>this.graphManager.connectSelectedNodes("undirected"),"add-face-btn":()=>this.graphManager.addFace(),"add-edge-in-order-btn":()=>this.graphManager.connectSelectedNodesInOrder("undirected"),"add-directed-edge-btn":()=>this.graphManager.connectSelectedNodes("directed"),"add-directed-edge-in-order-btn":()=>this.graphManager.connectSelectedNodesInOrder("directed"),"remove-selection-btn":()=>this.graphManager.dropSelectedNodesEdges(),"color-selection-btn":()=>this.graphManager.updateSelectedNodesEdgesColor(!0,!0,!0,!0),"complete-btn":()=>this.graphManager.makeGraphComplete("undirected"),"complete-directed-btn":()=>this.graphManager.makeGraphComplete("directed"),"node-color":()=>this.eventBus.emit("updateSetting",{key:"node_color",value:t}),"edge-color":()=>this.eventBus.emit("updateSetting",{key:"edge_color",value:t}),"label-color":()=>this.eventBus.emit("updateSetting",{key:"label_color",value:t}),"stroke-color":()=>this.eventBus.emit("updateSetting",{key:"stroke_color",value:t}),"background-color":()=>{be.querySelector(".container").style.backgroundColor=t,this.eventBus.emit("updateSetting",{key:"background_color",value:t})},"grid-color":()=>{be.documentElement.style.setProperty("--grid-color",t),this.eventBus.emit("updateSetting",{key:"grid_color",value:t})},rename:()=>this.graphManager.updateSelectedName(t),"rename-btn":()=>this.app.keyHandler.toggleInput("rename"),desc:()=>this.graphManager.updateSelectedInfo(t),"desc-btn":()=>this.app.keyHandler.toggleInput("desc"),weight:()=>this.graphManager.updateSelectedWeight(t),"weight-btn":()=>this.app.keyHandler.toggleInput("weight"),"redo-btn":()=>this.eventBus.emit("redo"),"undo-btn":()=>this.eventBus.emit("undo"),"panel-btn":()=>this.eventBus.emit("toggleSetting",{key:"info_panel"}),"tools-btn":()=>this.eventBus.emit("toggleSetting",{key:"tools_panel"}),"graphs-btn":()=>this.eventBus.emit("toggleSetting",{key:"graphs_panel"}),"faces-btn":()=>this.eventBus.emit("toggleSetting",{key:"face_panel"}),"shortcut-chord-btn":()=>be.dispatchEvent(this.spaceEvent),"component-btn":()=>this.eventBus.emit("toggleSetting",{key:"component"}),"scale-btn":()=>this.eventBus.emit("toggleSetting",{key:"scale"}),"tree-btn":()=>this.eventBus.emit("toggleSetting",{key:"tree"}),"force-btn":()=>this.eventBus.emit("toggleSetting",{key:"forceSimulation"}),"panning-btn":()=>this.eventBus.emit("toggleSetting",{key:"panning"}),"select-btn":()=>this.eventBus.emit("toggleSetting",{key:"select"}),"toggle-component-btn":()=>this.eventBus.emit("toggleSetting",{key:"component",value:t}),"toggle-scale-btn":()=>this.eventBus.emit("toggleSetting",{key:"scale",value:t}),"toggle-tree-btn":()=>this.eventBus.emit("toggleSetting",{key:"tree",value:t}),"toggle-force-btn":()=>this.eventBus.emit("toggleSetting",{key:"forceSimulation",value:t}),"toggle-panning-btn":()=>this.eventBus.emit("toggleSetting",{key:"panning",value:t}),"toggle-select-btn":()=>this.eventBus.emit("toggleSetting",{key:"select",value:t}),"color-picker-btn":()=>this.eventBus.emit("toggleSetting",{key:"colorPicker"}),"vertex-label":()=>this.eventBus.emit("toggleSetting",{key:"vertexLabel"}),"edge-label":()=>this.eventBus.emit("toggleSetting",{key:"edgeLabel"}),"face-label":()=>this.eventBus.emit("toggleSetting",{key:"faceLabel"}),"weight-label":()=>this.eventBus.emit("toggleSetting",{key:"weightLabel"}),"vertex-size-1":()=>this.eventBus.emit("updateSetting",{key:"node_radius",value:t}),"edge-size-1":()=>this.eventBus.emit("updateSetting",{key:"edge_size",value:t}),"label-size-1":()=>this.eventBus.emit("updateSetting",{key:"label_size",value:t}),"grid-size-1":()=>this.eventBus.emit("updateSetting",{key:"grid",value:t}),"stroke-size-1":()=>this.eventBus.emit("updateSetting",{key:"stroke_size",value:t}),"save-history":()=>this.eventBus.emit("toggleSetting",{key:"saveHistory"}),"clear-histoory-btn":()=>this.graphManager.cleanLocalStorage(),"history-limit-1":()=>{this.graphManager.limit=t,this.eventBus.emit("updateSetting",{key:"historyLimit",value:t})},"basic-info-btn":()=>this.graphManager.metric.basicInfo(),"lies-on-cycle-btn":()=>this.graphManager.metric.liesOnCycle(),"list-degrees-btn":()=>this.graphManager.metric.degreeSequesnce(),"components-btn":()=>this.graphManager.metric.countComponents(),"neighbors-btn":()=>this.graphManager.metric.neighbors(),"shortest-path-btn":()=>this.graphManager.metric.shortestPath(),"density-btn":()=>this.graphManager.metric.density(),"diameter-btn":()=>this.graphManager.metric.diameter(),"eccentricity-btn":()=>this.graphManager.metric.eccentricity(),"simmelian-strength-btn":()=>this.graphManager.metric.simmelianStrength(),"betweenness-centrality-btn":()=>this.graphManager.metric.betweennessCentrality(),"closeness-centrality-btn":()=>this.graphManager.metric.closenessCentrality(),"degree-centrality-btn":()=>this.graphManager.metric.degreeCentrality(),"eigenvector-centrality-btn":()=>this.graphManager.metric.eigenvectorCentrality(),"pagerank-btn":()=>this.graphManager.metric.pagerank(),"edge-uniformity-btn":()=>this.graphManager.metric.edgeUniformity(),"neighborhood-preservation-btn":()=>this.graphManager.metric.neighborhoodPreservation(),"stress-btn":()=>this.graphManager.metric.stress(),"disparity-btn":()=>this.graphManager.metric.disparity(),"clear-info-panel-btn":()=>be.querySelector("#floating-panel .body-info").innerHTML="","all-node-info-btn":()=>this.graphManager.metric.allNodeInfo(),"all-edge-info-btn":()=>this.graphManager.metric.allEdgeInfo(),empty:()=>this.graphManager.generator.empty(be.getElementById("g-empty-1").value),"g-empty-1":()=>this.graphManager.generator.empty(t),cycle:()=>this.graphManager.generator.cycle(be.getElementById("g-cycle-1").value),"g-cycle-1":()=>this.graphManager.generator.cycle(t),path:()=>this.graphManager.generator.path(be.getElementById("g-path-1").value),"g-path-1":()=>this.graphManager.generator.path(t),ladder:()=>this.graphManager.generator.ladder(be.getElementById("g-ladder-1").value),"g-ladder-1":()=>this.graphManager.generator.ladder(t),complete:()=>this.graphManager.generator.complete(be.getElementById("g-complete-1").value),"g-complete-1":()=>this.graphManager.generator.complete(t),"complete-bipartite":()=>this.graphManager.generator.completeBipartite(be.getElementById("g-complete-bipartite-1").value,be.getElementById("g-complete-bipartite-2").value),"g-complete-bipartite-1":()=>this.graphManager.generator.completeBipartite(t,be.getElementById("g-complete-bipartite-2").value),"g-complete-bipartite-2":()=>this.graphManager.generator.completeBipartite(be.getElementById("g-complete-bipartite-1").value,t),caveman:()=>this.graphManager.generator.caveman(be.getElementById("g-caveman-1").value,be.getElementById("g-caveman-2").value),"g-caveman-1":()=>this.graphManager.generator.caveman(t,be.getElementById("g-caveman-2").value),"g-caveman-2":()=>this.graphManager.generator.caveman(be.getElementById("g-caveman-1").value,t),"connected-caveman":()=>this.graphManager.generator.connectedCaveman(be.getElementById("g-connected-caveman-1").value,be.getElementById("g-connected-caveman-2").value),"g-connected-caveman-1":()=>this.graphManager.generator.connectedCaveman(t,be.getElementById("g-connected-caveman-2").value),"g-connected-caveman-2":()=>this.graphManager.generator.connectedCaveman(be.getElementById("g-connected-caveman-1").value,t),clusters:()=>this.graphManager.generator.clusters(be.getElementById("g-clusters-1").value,be.getElementById("g-clusters-2").value,be.getElementById("g-clusters-3").value),"g-clusters-1":()=>this.graphManager.generator.clusters(t,be.getElementById("g-clusters-2").value,be.getElementById("g-clusters-3").value),"g-clusters-2":()=>this.graphManager.generator.clusters(be.getElementById("g-clusters-1").value,t,be.getElementById("g-clusters-3").value),"g-clusters-3":()=>this.graphManager.generator.clusters(be.getElementById("g-clusters-1").value,be.getElementById("g-clusters-2").value,t),"erdos-renyi":()=>this.graphManager.generator.erdosRenyi(be.getElementById("g-erdos-renyi-1").value,be.getElementById("g-erdos-renyi-2").value),"g-erdos-renyi-1":()=>this.graphManager.generator.erdosRenyi(t,be.getElementById("g-erdos-renyi-2").value),"g-erdos-renyi-2":()=>this.graphManager.generator.erdosRenyi(be.getElementById("g-erdos-renyi-1").value,t),"griven-newmn":()=>this.graphManager.generator.girvanNewman(be.getElementById("g-girvan-newman-1").value),"g-girvan-newman-1":()=>this.graphManager.generator.girvanNewman(t),"krackhardt-kite":()=>this.graphManager.generator.krackhardtkite(),"florentine-families":()=>this.graphManager.generator.florentineFamilies(),"karate-club":()=>this.graphManager.generator.karateClub(),aries:()=>this.graphManager.generator.zodiac.aries(),taurus:()=>this.graphManager.generator.zodiac.taurus(),gemini:()=>this.graphManager.generator.zodiac.gemini(),cancer:()=>this.graphManager.generator.zodiac.cancer(),leo:()=>this.graphManager.generator.zodiac.leo(),virgo:()=>this.graphManager.generator.zodiac.virgo(),libra:()=>this.graphManager.generator.zodiac.libra(),scorpius:()=>this.graphManager.generator.zodiac.scorpius(),ophiuchus:()=>this.graphManager.generator.zodiac.ophiuchus(),sagittarius:()=>this.graphManager.generator.zodiac.sagittarius(),capricornus:()=>this.graphManager.generator.zodiac.capricornus(),aquarius:()=>this.graphManager.generator.zodiac.aquarius(),pisces:()=>this.graphManager.generator.zodiac.pisces(),"organize-circle":()=>this.layout.applyLayout("circle"),"center-layout":()=>this.layout.applyLayout("center"),"random-layout":()=>this.layout.applyLayout("random"),"rotate-layout-1":()=>this.layout.applyLayout("rotate",t),"rotate-layout":()=>{const o=be.getElementById("rotate-layout-1").value;return this.layout.applyLayout("rotate",o)},"hflip-layout":()=>this.layout.applyLayout("h-flip"),"vflip-layout":()=>this.layout.applyLayout("v-flip"),"force-layout":()=>this.layout.applyLayout("force"),"noverlap-layout":()=>this.layout.applyLayout("noverlap"),"reverse-direction":()=>this.graphManager.reverseGraph(),"to-undirected":()=>this.graphManager.toUndirectedGraph(),"to-directed":()=>this.graphManager.toDirectedGraph(),"to-mixed":()=>this.graphManager.toMixedGraph(),"to-weighted":()=>this.graphManager.toWeighted(),"to-unweighted":()=>this.graphManager.toUnweighted(),"subgraph-btn":()=>this.graphManager.subgraph(),graphs:()=>this.graphManager.graphsPanel.selectLis(t),faces:()=>this.graphManager.facePanel.selectLis(t),"how-to-use":()=>window.open("https://www.youtube.com/playlist?list=PLaa8UNGS4QED9DUhAZt7O963qkScAWah3","_blank"),command:()=>{be.querySelector(".modal").style.display="flex",be.querySelector(".modal .help-panel").style.display="block"},about:()=>window.open("http://picinfiniti.net/","_blank"),"select-all-node":()=>this.graphManager.selectAllNode(),"deselect-all-node":()=>this.graphManager.deselectAllNode(),"select-next-node":()=>this.graphManager.selectNextNode(),"select-pervious-node":()=>this.graphManager.selectPerviousNode(),"select-all-edge":()=>this.graphManager.selectAllEdge(),"deselect-all-edge":()=>this.graphManager.deselectAllEdge(),"select-next-edge":()=>this.graphManager.selectNextEdge(),"select-pervious-edge":()=>this.graphManager.selectPerviousEdge(),"copy-subgraph":()=>this.graphManager.copySubgraph(),"cut-subgraph":()=>this.graphManager.cutSubgraph(),"paste-subgraph":()=>this.graphManager.pasteSubgraph(),"paste-subgraph-seprate":()=>this.graphManager.pasteSubgraph(!0),"update-node-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!0,!1,!1,!1),"update-stroke-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!1,!0,!1,!1),"update-edge-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!1,!1,!0,!1),"update-label-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!1,!1,!1,!0)};r[e]?r[e]():console.log(`No action defined for: ${e}`)}attachEventListeners(){be.addEventListener("click",e=>{if(e.target.tagName==="INPUT")return;const t=e.target.closest("li");if(!t)return;const r=t.getAttribute("name")||t.id;r&&this.handleMenuAction(r,t.id)}),be.addEventListener("input",e=>{const t=e.target;if(!t||t.name=="rename"||t.name=="desc"||t.name=="weight")return;const r=t.id||t.getAttribute("name");r&&this.handleMenuAction(r,t.value)})}}const Ht=document;class I0{constructor(e){this.app=e,this.eventBus=e.eventBus}init(){this.app.eventBus.on("settingToggled",e=>{const{key:t,value:r}=e.detail;t=="forceSimulation"&&(r?this.app.startSimulation():this.app.stopSimulation())}),this.app.eventBus.on("import",e=>{Ht.getElementById("file-input").click()}),this.app.eventBus.on("export",e=>{if(e.detail.type==="json"){const t=this.app.graphManager.history,r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2)),o=Ht.createElement("a");o.href=r,o.download="graph.json",Ht.body.appendChild(o),o.click(),Ht.body.removeChild(o)}e.detail.type==="png"&&this.app.canvas.toBlob(function(t){let r=Ht.createElement("a");r.href=URL.createObjectURL(t),r.download="d3-canvas-export.png",Ht.body.appendChild(r),r.click(),Ht.body.removeChild(r)},"image/png")}),Ht.getElementById("file-input").addEventListener("change",e=>{const t=e.target.files[0];if(t){const r=new FileReader;r.onload=o=>{const a=JSON.parse(o.target.result);this.app.graphManager.history.push(...a),this.app.graphManager.updateIndex(this.app.graphManager.history.length-1)},r.readAsText(t)}e.target.value=""})}}const M0=[{title:"File",id:"file",submenu:[{title:"🆕 New Graph",id:"new-mixed-btn",shortcut:"(n)"},{title:"📂 Import",id:"import-graph",shortcut:"(o)",input:[{type:"file",id:"file-input",hidden:!0}]},{title:"💾 Export",id:"export-graph",shortcut:"(Ctrl+s)"},{title:"🖼️ Export to PNG",id:"export-png",shortcut:"(P)"},{type:"divider"},{title:"⚙️ Default Setting",id:"default-settings-btn"},{title:"🌙 Sky Night",id:"sky-night-theme-btn"},{type:"divider"},{title:"🔄 Reload",id:"reload",shortcut:"(F5)"}]},{title:"Edit",id:"edit",submenu:[{title:"Delete",name:"remove-selection-btn",shortcut:"(d)"},{title:"Assign Color",name:"color-selection-btn",shortcut:"(c)"},{title:"Add Edge",name:"add-edge-btn",shortcut:"(alt-e)"},{title:"Add Directed Edge",name:"add-directed-edge-btn",shortcut:"(alt-E)"},{title:"Add Face",name:"add-face-btn",shortcut:"(ctrl+f)"},{type:"divider"},{title:"Copy",name:"copy-subgraph",shortcut:"(y)"},{title:"Cut",name:"cut-subgraph",shortcut:"(x)"},{title:"Paste",name:"paste-subgraph",shortcut:"(p)"},{type:"divider"},{title:"Rename",name:"rename-btn",shortcut:"(r)"},{title:"Edit Info",name:"desc-btn",shortcut:"(i)"},{title:"Edit Weight",name:"weight-btn",shortcut:"(w)"},{type:"divider"},{title:"Undo",name:"undo-btn",shortcut:"(u)"},{title:"Redo",name:"redo-btn",shortcut:"(Ctrl+r)"}]},{title:"Settings",id:"settings",submenu:[{title:"Graph",id:"graph-settings",shortcut:">",submenu:[{title:"Vertex",id:"vertex-label",check:!0},{title:"Edge",id:"edge-label",check:!0},{title:"Face",id:"face-label",check:!0},{title:"Weight",id:"weight-label",check:!0},{type:"divider"},{title:"Grid",id:"gride-size",input:[{type:"range",id:"grid-size-1",min:0,max:100,value:20}]},{title:"Node",id:"vertex-size",input:[{type:"range",id:"vertex-size-1",min:0,max:200,value:10,step:.1}]},{title:"Edge",id:"edge-size",input:[{type:"range",id:"edge-size-1",min:1,max:100,value:2}]},{title:"Label",id:"label-size",input:[{type:"range",id:"label-size-1",min:0,max:100,value:15}]},{title:"Stroke",id:"stroke-size",input:[{type:"range",id:"stroke-size-1",min:0,max:50,value:5,step:.1}]}]},{title:"View",id:"view",shortcut:">",submenu:[{title:"Info Panel",id:"panel-btn",check:!0},{title:"Tools Panel",id:"tools-btn",check:!0},{title:"Graphs Panel",id:"graphs-btn",check:!0},{title:"Face Panel",id:"faces-btn",check:!0},{type:"divider"},{title:"Key Chord",id:"shortcut-chord-btn",shortcut:"⎵"}]},{type:"divider"},{title:"History",id:"History",shortcut:">",submenu:[{title:"History Limit",id:"history-limit",input:[{type:"number",id:"history-limit-1",min:5,max:1e4,value:5}]},{title:"Save History",id:"save-history",check:!0},{title:"Clear History",id:"clear-histoory-btn"}]}]},{title:"Tools",id:"tools",submenu:[{title:"Scale",id:"scale-btn",check:!1,shortcut:"(s)"},{title:"Panning",id:"panning-btn",check:!1,shortcut:"Ctrl"},{title:"Selecting",id:"select-btn",check:!1,shortcut:"Shift"},{title:"Component",id:"component-btn",check:!1,shortcut:"Alt"},{type:"divider"},{title:"Tree",id:"tree-btn",check:!1,shortcut:"(t)"},{title:"Force Simulation",id:"force-btn",check:!1,shortcut:"(f)"},{type:"divider"},{title:"Color Picker",id:"color-picker-btn",check:!1,shortcut:"⎵ cc"}]},{title:"Generator",id:"generator",submenu:[{title:"Classic",id:"classic",shortcut:">",submenu:[{title:"Empty",id:"empty",input:[{type:"number",id:"g-empty-1",min:1,max:500,value:5}]},{title:"Kₙ",id:"complete",link:"https://en.wikipedia.org/wiki/Complete_graph",input:[{type:"number",id:"g-complete-1",min:1,max:500,value:5}]},{title:"Kₙ,ₙ",id:"complete-bipartite",link:"https://en.wikipedia.org/wiki/Complete_bipartite_graph",input:[{type:"number",id:"g-complete-bipartite-1",min:1,max:500,value:5},{type:"number",id:"g-complete-bipartite-2",min:1,max:500,value:5}]},{title:"Pₙ",id:"path",link:"https://en.wikipedia.org/wiki/Path_graph",input:[{type:"number",id:"g-path-1",min:2,max:500,value:5}]},{title:"Cₙ",id:"cycle",link:"https://en.wikipedia.org/wiki/Cycle_graph",input:[{type:"number",id:"g-cycle-1",min:3,max:500,value:5}]},{title:"Lₙ",id:"ladder",link:"https://en.wikipedia.org/wiki/Ladder_graph",input:[{type:"number",id:"g-ladder-1",min:2,max:500,value:5}]}]},{title:"Community",id:"community",shortcut:">",submenu:[{title:"Cₙ,ₙ",id:"caveman",link:"https://mathworld.wolfram.com/CavemanGraph.html",input:[{type:"number",id:"g-caveman-1",min:1,max:500,value:5},{type:"number",id:"g-caveman-2",min:1,max:500,value:5}]},{title:"Qₙ,ₙ",id:"connected-caveman",link:"https://mathworld.wolfram.com/CavemanGraph.html",input:[{type:"number",id:"g-connected-caveman-1",min:1,max:500,value:5},{type:"number",id:"g-connected-caveman-2",min:1,max:500,value:5}]}]},{title:"Random",id:"random",shortcut:">",submenu:[{title:"Clusters",id:"clusters",input:[{type:"number",id:"g-clusters-1",min:2,max:500,value:20},{type:"number",id:"g-clusters-2",min:2,max:500,value:20},{type:"number",id:"g-clusters-3",min:2,max:500,value:10}]},{title:"erdos Renyi",id:"erdos-renyi",link:"https://en.wikipedia.org/wiki/Erd%C5%91s%E2%80%93R%C3%A9nyi_model",input:[{type:"number",id:"g-erdos-renyi-1",min:1,max:500,value:10},{type:"number",id:"g-erdos-renyi-2",min:0,max:1,step:.1,value:.5}]},{title:"Girvan Newman",id:"griven-newmn",link:"https://www.pnas.org/doi/pdf/10.1073/pnas.122653799",input:[{type:"number",id:"g-girvan-newman-1",min:1,max:500,value:5}]}]},{title:"Small",id:"small",shortcut:">",submenu:[{title:"Krackhardt kite",id:"krackhardt-kite",link:"https://en.wikipedia.org/wiki/Krackhardt_kite_graph"}]},{title:"Social",id:"social",shortcut:">",submenu:[{title:"Florentine families",id:"florentine-families"},{title:"Zachary’s karate club",id:"karate-club",link:"https://en.wikipedia.org/wiki/Zachary%27s_karate_club"}]},{type:"divider"},{title:"Zodiac",id:"zodiac",shortcut:">",submenu:[{title:"Aries",id:"aries",label:"♈",link:"https://en.wikipedia.org/wiki/Aries_(astrology)"},{title:"Taurus",id:"taurus",label:"♉",link:"https://en.wikipedia.org/wiki/Taurus_(astrology)"},{title:"Gemini",id:"gemini",label:"♊",link:"https://en.wikipedia.org/wiki/Gemini_(astrology)"},{title:"Cancer",id:"cancer",label:"♋",link:"https://en.wikipedia.org/wiki/Cancer_(astrology)"},{title:"Leo",id:"leo",label:"♌",link:"https://en.wikipedia.org/wiki/Leo_(astrology)"},{title:"Virgo",id:"virgo",label:"♍",link:"https://en.wikipedia.org/wiki/Virgo_(astrology)"},{title:"Libra",id:"libra",label:"♎",link:"https://en.wikipedia.org/wiki/Libra_(astrology)"},{title:"Scorpius",id:"scorpius",label:"♏",link:"https://en.wikipedia.org/wiki/Scorpio_(astrology)"},{title:"Ophiuchus",id:"ophiuchus",label:"⛎",link:"https://en.wikipedia.org/wiki/Ophiuchus_(astrology)"},{title:"Sagittarius",id:"sagittarius",label:"♐",link:"https://en.wikipedia.org/wiki/Sagittarius_(astrology)"},{title:"Capricornus",id:"capricornus",label:"♑",link:"https://en.wikipedia.org/wiki/Capricorn_(astrology)"},{title:"Aquarius",id:"aquarius",label:"♒",link:"https://en.wikipedia.org/wiki/Aquarius_(astrology)"},{title:"Pisces",id:"pisces",label:"♓",link:"https://en.wikipedia.org/wiki/Pisces_(astrology)"}]}]},{title:"Metrics",id:"metrics",submenu:[{title:"Basic",id:"basic",shortcut:">",submenu:[{title:"Basic Information",id:"basic-info-btn"},{title:"Components",id:"components-btn"},{title:"Lies On Cycle",id:"lies-on-cycle-btn"},{title:"Degree Sequence",id:"list-degrees-btn"},{title:"Density",id:"density-btn"},{title:"Diameter",id:"diameter-btn"}]},{title:"Centrality",id:"centrality",shortcut:">",submenu:[{title:"Betweenness Centrality",id:"betweenness-centrality-btn"},{title:"Closeness Centrality",id:"closeness-centrality-btn"},{title:"Degree Centrality",id:"degree-centrality-btn"},{title:"Eccentricity",id:"eccentricity-btn"},{title:"Eigenvector Centrality",id:"eigenvector-centrality-btn"},{title:"PageRank",id:"pagerank-btn"}]},{title:"Layout Quality",id:"layout-quality",shortcut:">",submenu:[{title:"Edge Uniformity",id:"edge-uniformity-btn"},{title:"Neighborhood Preservation",id:"neighborhood-preservation-btn"},{title:"Stress",id:"stress-btn"}]},{title:"Other",shortcut:">",id:"other",submenu:[{title:"Simmelian Strength",id:"simmelian-strength-btn"},{title:"Disparity",id:"disparity-btn"}]},{type:"divider"},{title:"Neighbors",id:"neighbors-btn"},{title:"Shortest Path",id:"shortest-path-btn"},{title:"Selected Nodes Info",id:"all-node-info-btn",shortcut:"(a)"},{title:"Selected Edges Info",id:"all-edge-info-btn",shortcut:"(Alt+a)"},{type:"divider"},{title:"Clear Panel",id:"clear-info-panel-btn",shortcut:"(q)"}]},{title:"Operators",id:"help",submenu:[{title:"Layout",id:"layout",shortcut:">",submenu:[{title:"Center Nodes",name:"center-layout"},{title:"Organize Nodes",name:"organize-circle",shortcut:"(O)"},{title:"Random",name:"random-layout"},{title:"Vertical Flip",name:"vflip-layout"},{title:"Horizontal Flip",name:"hflip-layout"},{title:"Rotate",name:"rotate-layout",input:[{type:"number",id:"rotate-layout-1",min:-180,max:180,value:45}]},{type:"divider"},{title:"Force Atlas",name:"force-layout",link:"https://graphology.github.io/standard-library/layout-forceatlas2.html"}]},{title:"Converter",id:"converter",shortcut:">",submenu:[{title:"To Mixed",id:"to-mixed"},{title:"To Undirected",id:"to-undirected"},{title:"To Directed",id:"to-directed"},{title:"To Weighted",id:"to-weighted"},{title:"To Unweighted",id:"to-unweighted"}]},{title:"Reverse Direction",id:"reverse-direction"},{title:"Subgraph",id:"subgraph-btn"},{title:"Complete Graph",name:"complete-btn",shortcut:"(alt-C)"}]},{title:"Help",id:"help",submenu:[{title:"Mouse Commnads",id:"command",name:"command-btn"},{title:"How to use",id:"how-to-use"},{title:"About",id:"about",shortcut:"version: 1.4.0"}]}];var yr={},bc;function L0(){if(bc)return yr;bc=1;var n=ke();function e(l){return typeof l=="number"&&!isNaN(l)}var t=["x","y"];function r(l,h){if(!n(l))throw new Error("graphology-layout/utils.collectLayout: the given graph is not a valid graphology instance.");h=h||{};var d=h.dimensions,p=h.exhaustive!==!1;d||(d=t);var v={},y=d.length;return l.forEachNode(function(b,_){var S=0,C={},D;for(D=0;D<y;D++){var k=d[D],M=_[k];e(M)&&(C[k]=M,S++)}p?S===y&&(v[b]=C):S&&(v[b]=C)}),v}function o(l,h,d){if(!n(l))throw new Error("graphology-layout/utils.assignLayout: the given graph is not a valid graphology instance.");d=d||{};var p=d.dimensions||t,v=p.length,y;l.updateEachNodeAttributes(function(b,_){var S=h[b];if(!S)return _;for(var C=0;C<v;C++)y=p[C],_[y]=S[y];return _},{attributes:p})}function a(l,h){if(!n(l))throw new Error("graphology-layout/utils.collectLayout: the given graph is not a valid graphology instance.");h=h||{};var d=h.dimensions,p=h.type||Float64Array;d||(d=t);var v=d.length,y=new p(l.order*v),b=0;return l.forEachNode(function(_,S){var C;for(C=0;C<v;C++){var D=d[C],k=S[D];e(k)||(k=0),y[b++]=k}}),y}function s(l,h,d){if(!n(l))throw new Error("graphology-layout/utils.assignLayoutAsFlatArray: the given graph is not a valid graphology instance.");d=d||{};var p=d.dimensions;p||(p=t);var v=p.length;if(h.length!==l.order*v)throw new Error("graphology-layout/utils.assignLayoutAsFlatArray: given layout has an incorrect length wrt number of nodes & dimenions.");var y=0;l.updateEachNodeAttributes(function(b,_){for(var S=0;S<v;S++)_[p[S]]=h[y++];return _},{attributes:p})}return yr.collectLayout=r,yr.assignLayout=o,yr.collectLayoutAsFlatArray=a,yr.assignLayoutAsFlatArray=s,yr}var At=L0(),mr={},Lo,wc;function z0(){if(wc)return Lo;wc=1;function n(t){return function(r,o){return r+Math.floor(t()*(o-r+1))}}var e=n(Math.random);return e.createRandom=n,Lo=e,Lo}var zo,Ec;function $0(){if(Ec)return zo;Ec=1;var n=z0().createRandom;function e(r){var o=n(r);return function(a){for(var s=a.length,l=s-1,h=-1;++h<s;){var d=o(h,l),p=a[d];a[d]=a[h],a[h]=p}}}var t=e(Math.random);return t.createShuffleInPlace=e,zo=t,zo}var $o,xc;function T0(){if(xc)return $o;xc=1;var n=Nt(),e=ke(),t=$0(),r={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function o(w,z,$,T,q){this.wrappedCircle=q||null,this.children={},this.countChildren=0,this.id=w||null,this.next=null,this.previous=null,this.x=z||null,this.y=$||null,q?this.r=1010101:this.r=T||999}o.prototype.hasChildren=function(){return this.countChildren>0},o.prototype.addChild=function(w,z){this.children[w]=z,++this.countChildren},o.prototype.getChild=function(w){if(!this.children.hasOwnProperty(w)){var z=new o;this.children[w]=z,++this.countChildren}return this.children[w]},o.prototype.applyPositionToChildren=function(){if(this.hasChildren()){var w=this;for(var z in w.children){var $=w.children[z];$.x+=w.x,$.y+=w.y,$.applyPositionToChildren()}}};function a(w,z,$){for(var T in z.children){var q=z.children[T];q.hasChildren()?a(w,q,$):$[q.id]={x:q.x,y:q.y}}}function s(w,z){var $=w.r-z.r,T=z.x-w.x,q=z.y-w.y;return $<0||$*$<T*T+q*q}function l(w,z){var $=w.r-z.r+1e-6,T=z.x-w.x,q=z.y-w.y;return $>0&&$*$>T*T+q*q}function h(w,z){for(var $=0;$<z.length;++$)if(!l(w,z[$]))return!1;return!0}function d(w){return new o(null,w.x,w.y,w.r)}function p(w,z){var $=w.x,T=w.y,q=w.r,U=z.x,P=z.y,te=z.r,J=U-$,F=P-T,A=te-q,B=Math.sqrt(J*J+F*F);return new o(null,($+U+J/B*A)/2,(T+P+F/B*A)/2,(B+q+te)/2)}function v(w,z,$){var T=w.x,q=w.y,U=w.r,P=z.x,te=z.y,J=z.r,F=$.x,A=$.y,B=$.r,H=T-P,Q=T-F,W=q-te,Y=q-A,X=J-U,ee=B-U,se=T*T+q*q-U*U,fe=se-P*P-te*te+J*J,pe=se-F*F-A*A+B*B,Ee=Q*W-H*Y,re=(W*pe-Y*fe)/(Ee*2)-T,de=(Y*X-W*ee)/Ee,ve=(Q*fe-H*pe)/(Ee*2)-q,me=(H*ee-Q*X)/Ee,De=de*de+me*me-1,ge=2*(U+re*de+ve*me),ue=re*re+ve*ve-U*U,V=-(De?(ge+Math.sqrt(ge*ge-4*De*ue))/(2*De):ue/ge);return new o(null,T+re+de*V,q+ve+me*V,V)}function y(w){switch(w.length){case 1:return d(w[0]);case 2:return p(w[0],w[1]);case 3:return v(w[0],w[1],w[2]);default:throw new Error("graphology-layout/circlepack: Invalid basis length "+w.length)}}function b(w,z){var $,T;if(h(z,w))return[z];for($=0;$<w.length;++$)if(s(z,w[$])&&h(p(w[$],z),w))return[w[$],z];for($=0;$<w.length-1;++$)for(T=$+1;T<w.length;++T)if(s(p(w[$],w[T]),z)&&s(p(w[$],z),w[T])&&s(p(w[T],z),w[$])&&h(v(w[$],w[T],z),w))return[w[$],w[T],z];throw new Error("graphology-layout/circlepack: extendBasis failure !")}function _(w){var z=w.wrappedCircle,$=w.next.wrappedCircle,T=z.r+$.r,q=(z.x*$.r+$.x*z.r)/T,U=(z.y*$.r+$.y*z.r)/T;return q*q+U*U}function S(w,z){var $=0,T=w.slice(),q=w.length,U=[],P,te;for(z(T);$<q;)P=T[$],te&&l(te,P)?++$:(U=b(U,P),te=y(U),$=0);return te}function C(w,z,$){var T=w.x-z.x,q,U,P=w.y-z.y,te,J,F=T*T+P*P;F?(U=z.r+$.r,U*=U,J=w.r+$.r,J*=J,U>J?(q=(F+J-U)/(2*F),te=Math.sqrt(Math.max(0,J/F-q*q)),$.x=w.x-q*T-te*P,$.y=w.y-q*P+te*T):(q=(F+U-J)/(2*F),te=Math.sqrt(Math.max(0,U/F-q*q)),$.x=z.x+q*T-te*P,$.y=z.y+q*P+te*T)):($.x=z.x+$.r,$.y=z.y)}function D(w,z){var $=w.r+z.r-1e-6,T=z.x-w.x,q=z.y-w.y;return $>0&&$*$>T*T+q*q}function k(w,z){var $=w.length;if($===0)return 0;var T,q,U,P,te,J,F,A,B,H;if(T=w[0],T.x=0,T.y=0,$<=1)return T.r;if(q=w[1],T.x=-q.r,q.x=T.r,q.y=0,$<=2)return T.r+q.r;U=w[2],C(q,T,U),T=new o(null,null,null,null,T),q=new o(null,null,null,null,q),U=new o(null,null,null,null,U),T.next=U.previous=q,q.next=T.previous=U,U.next=q.previous=T;e:for(J=3;J<$;++J){U=w[J],C(T.wrappedCircle,q.wrappedCircle,U),U=new o(null,null,null,null,U),F=q.next,A=T.previous,B=q.wrappedCircle.r,H=T.wrappedCircle.r;do if(B<=H){if(D(F.wrappedCircle,U.wrappedCircle)){q=F,T.next=q,q.previous=T,--J;continue e}B+=F.wrappedCircle.r,F=F.next}else{if(D(A.wrappedCircle,U.wrappedCircle)){T=A,T.next=q,q.previous=T,--J;continue e}H+=A.wrappedCircle.r,A=A.previous}while(F!==A.next);for(U.previous=T,U.next=q,T.next=q.previous=q=U,P=_(T);(U=U.next)!==q;)(te=_(U))<P&&(T=U,P=te);q=T.next}T=[q.wrappedCircle],U=q;for(var Q=1e4;(U=U.next)!==q&&--Q!==0;)T.push(U.wrappedCircle);for(U=S(T,z),J=0;J<$;++J)T=w[J],T.x-=U.x,T.y-=U.y;return U.r}function M(w,z){var $=0;if(w.hasChildren()){for(var T in w.children){var q=w.children[T];q.hasChildren()&&(q.r=M(q,z))}$=k(Object.values(w.children),z)}return $}function x(w,z){M(w,z);for(var $ in w.children){var T=w.children[$];T.applyPositionToChildren()}}function I(w,z,$){if(!e(z))throw new Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");$=n($,r);var T={},q={},U=z.nodes(),P=$.center,te=$.hierarchyAttributes,J=t.createShuffleInPlace($.rng),F=$.scale,A=new o;z.forEachNode(function(X,ee){var se=ee.size?ee.size:1,fe=new o(X,null,null,se),pe=A;te.forEach(function(Ee){var re=ee[Ee];pe=pe.getChild(re)}),pe.addChild(X,fe)}),x(A,J),a(z,A,T);var B=U.length,H,Q,W;for(W=0;W<B;W++){var Y=U[W];H=P+F*T[Y].x,Q=P+F*T[Y].y,q[Y]={x:H,y:Q},w&&(z.setNodeAttribute(Y,$.attributes.x,H),z.setNodeAttribute(Y,$.attributes.y,Q))}return q}var R=I.bind(null,!1);return R.assign=I.bind(null,!0),$o=R,$o}var To,_c;function P0(){if(_c)return To;_c=1;var n=Nt(),e=ke(),t={dimensions:["x","y"],center:.5,scale:1};function r(a,s,l){if(!e(s))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");l=n(l,t);var h=l.dimensions;if(!Array.isArray(h)||h.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var d=l.center,p=l.scale,v=Math.PI*2,y=(d-.5)*p,b=s.order,_=h[0],S=h[1];function C(M,x){return x[_]=p*Math.cos(M*v/b)+y,x[S]=p*Math.sin(M*v/b)+y,x}var D=0;if(!a){var k={};return s.forEachNode(function(M){k[M]=C(D++,{})}),k}s.updateEachNodeAttributes(function(M,x){return C(D++,x),x},{attributes:h})}var o=r.bind(null,!1);return o.assign=r.bind(null,!0),To=o,To}var Po,Sc;function O0(){if(Sc)return Po;Sc=1;var n=Nt(),e=ke(),t={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function r(a,s,l){if(!e(s))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");l=n(l,t);var h=l.dimensions;if(!Array.isArray(h)||h.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var d=h.length,p=l.center,v=l.rng,y=l.scale,b=(p-.5)*y;function _(C){for(var D=0;D<d;D++)C[h[D]]=v()*y+b;return C}if(!a){var S={};return s.forEachNode(function(C){S[C]=_({})}),S}s.updateEachNodeAttributes(function(C,D){return _(D),D},{attributes:h})}var o=r.bind(null,!1);return o.assign=r.bind(null,!0),Po=o,Po}var Oo,Ac;function G0(){if(Ac)return Oo;Ac=1;var n=Nt(),e=ke(),t=Math.PI/180,r={dimensions:["x","y"],centeredOnZero:!1,degrees:!1};function o(s,l,h,d){if(!e(l))throw new Error("graphology-layout/rotation: the given graph is not a valid graphology instance.");d=n(d,r),d.degrees&&(h*=t);var p=d.dimensions;if(!Array.isArray(p)||p.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");if(l.order===0)return s?void 0:{};var v=p[0],y=p[1],b=0,_=0;if(!d.centeredOnZero){var S=1/0,C=-1/0,D=1/0,k=-1/0;l.forEachNode(function(w,z){var $=z[v],T=z[y];$<S&&(S=$),$>C&&(C=$),T<D&&(D=T),T>k&&(k=T)}),b=(S+C)/2,_=(D+k)/2}var M=Math.cos(h),x=Math.sin(h);function I(w){var z=w[v],$=w[y];return w[v]=b+(z-b)*M-($-_)*x,w[y]=_+(z-b)*x+($-_)*M,w}if(!s){var R={};return l.forEachNode(function(w,z){var $={};$[v]=z[v],$[y]=z[y],R[w]=I($)}),R}l.updateEachNodeAttributes(function(w,z){return I(z),z},{attributes:p})}var a=o.bind(null,!1);return a.assign=o.bind(null,!0),Oo=a,Oo}var kc;function R0(){return kc||(kc=1,mr.circlepack=T0(),mr.circular=P0(),mr.random=O0(),mr.rotation=G0()),mr}var Go,Cc;function q0(){return Cc||(Cc=1,Go=R0()),Go}var Ro=q0(),qo,Dc;function F0(){if(Dc)return qo;Dc=1;var n=0,e=1,t=2,r=3,o=4,a=5,s=6,l=7,h=8,d=9,p=0,v=1,y=2,b=0,_=1,S=2,C=3,D=4,k=5,M=6,x=7,I=8,R=3,w=10,z=3,$=9,T=10;return qo=function(U,P,te){var J,F,A,B,H,Q,W,Y,X,ee,se=P.length,fe=te.length,pe=U.adjustSizes,Ee=U.barnesHutTheta*U.barnesHutTheta,re,de,ve,me,De,ge,ue,V=[];for(A=0;A<se;A+=w)P[A+o]=P[A+t],P[A+a]=P[A+r],P[A+t]=0,P[A+r]=0;if(U.outboundAttractionDistribution){for(re=0,A=0;A<se;A+=w)re+=P[A+s];re/=se/w}if(U.barnesHutOptimize){var Fe=1/0,ze=-1/0,Qe=1/0,Te=-1/0,Ie,Oe,je;for(A=0;A<se;A+=w)Fe=Math.min(Fe,P[A+n]),ze=Math.max(ze,P[A+n]),Qe=Math.min(Qe,P[A+e]),Te=Math.max(Te,P[A+e]);var Be=ze-Fe,wt=Te-Qe;for(Be>wt?(Qe-=(Be-wt)/2,Te=Qe+Be):(Fe-=(wt-Be)/2,ze=Fe+wt),V[0+b]=-1,V[0+_]=(Fe+ze)/2,V[0+S]=(Qe+Te)/2,V[0+C]=Math.max(ze-Fe,Te-Qe),V[0+D]=-1,V[0+k]=-1,V[0+M]=0,V[0+x]=0,V[0+I]=0,J=1,A=0;A<se;A+=w)for(F=0,je=R;;)if(V[F+k]>=0){P[A+n]<V[F+_]?P[A+e]<V[F+S]?Ie=V[F+k]:Ie=V[F+k]+$:P[A+e]<V[F+S]?Ie=V[F+k]+$*2:Ie=V[F+k]+$*3,V[F+x]=(V[F+x]*V[F+M]+P[A+n]*P[A+s])/(V[F+M]+P[A+s]),V[F+I]=(V[F+I]*V[F+M]+P[A+e]*P[A+s])/(V[F+M]+P[A+s]),V[F+M]+=P[A+s],F=Ie;continue}else if(V[F+b]<0){V[F+b]=A;break}else{if(V[F+k]=J*$,Y=V[F+C]/2,X=V[F+k],V[X+b]=-1,V[X+_]=V[F+_]-Y,V[X+S]=V[F+S]-Y,V[X+C]=Y,V[X+D]=X+$,V[X+k]=-1,V[X+M]=0,V[X+x]=0,V[X+I]=0,X+=$,V[X+b]=-1,V[X+_]=V[F+_]-Y,V[X+S]=V[F+S]+Y,V[X+C]=Y,V[X+D]=X+$,V[X+k]=-1,V[X+M]=0,V[X+x]=0,V[X+I]=0,X+=$,V[X+b]=-1,V[X+_]=V[F+_]+Y,V[X+S]=V[F+S]-Y,V[X+C]=Y,V[X+D]=X+$,V[X+k]=-1,V[X+M]=0,V[X+x]=0,V[X+I]=0,X+=$,V[X+b]=-1,V[X+_]=V[F+_]+Y,V[X+S]=V[F+S]+Y,V[X+C]=Y,V[X+D]=V[F+D],V[X+k]=-1,V[X+M]=0,V[X+x]=0,V[X+I]=0,J+=4,P[V[F+b]+n]<V[F+_]?P[V[F+b]+e]<V[F+S]?Ie=V[F+k]:Ie=V[F+k]+$:P[V[F+b]+e]<V[F+S]?Ie=V[F+k]+$*2:Ie=V[F+k]+$*3,V[F+M]=P[V[F+b]+s],V[F+x]=P[V[F+b]+n],V[F+I]=P[V[F+b]+e],V[Ie+b]=V[F+b],V[F+b]=-1,P[A+n]<V[F+_]?P[A+e]<V[F+S]?Oe=V[F+k]:Oe=V[F+k]+$:P[A+e]<V[F+S]?Oe=V[F+k]+$*2:Oe=V[F+k]+$*3,Ie===Oe)if(je--){F=Ie;continue}else{je=R;break}V[Oe+b]=A;break}}if(U.barnesHutOptimize)for(de=U.scalingRatio,A=0;A<se;A+=w)for(F=0;;)if(V[F+k]>=0)if(ge=Math.pow(P[A+n]-V[F+x],2)+Math.pow(P[A+e]-V[F+I],2),ee=V[F+C],4*ee*ee/ge<Ee){if(ve=P[A+n]-V[F+x],me=P[A+e]-V[F+I],pe===!0?ge>0?(ue=de*P[A+s]*V[F+M]/ge,P[A+t]+=ve*ue,P[A+r]+=me*ue):ge<0&&(ue=-de*P[A+s]*V[F+M]/Math.sqrt(ge),P[A+t]+=ve*ue,P[A+r]+=me*ue):ge>0&&(ue=de*P[A+s]*V[F+M]/ge,P[A+t]+=ve*ue,P[A+r]+=me*ue),F=V[F+D],F<0)break;continue}else{F=V[F+k];continue}else{if(Q=V[F+b],Q>=0&&Q!==A&&(ve=P[A+n]-P[Q+n],me=P[A+e]-P[Q+e],ge=ve*ve+me*me,pe===!0?ge>0?(ue=de*P[A+s]*P[Q+s]/ge,P[A+t]+=ve*ue,P[A+r]+=me*ue):ge<0&&(ue=-de*P[A+s]*P[Q+s]/Math.sqrt(ge),P[A+t]+=ve*ue,P[A+r]+=me*ue):ge>0&&(ue=de*P[A+s]*P[Q+s]/ge,P[A+t]+=ve*ue,P[A+r]+=me*ue)),F=V[F+D],F<0)break;continue}else for(de=U.scalingRatio,B=0;B<se;B+=w)for(H=0;H<B;H+=w)ve=P[B+n]-P[H+n],me=P[B+e]-P[H+e],pe===!0?(ge=Math.sqrt(ve*ve+me*me)-P[B+h]-P[H+h],ge>0?(ue=de*P[B+s]*P[H+s]/ge/ge,P[B+t]+=ve*ue,P[B+r]+=me*ue,P[H+t]-=ve*ue,P[H+r]-=me*ue):ge<0&&(ue=100*de*P[B+s]*P[H+s],P[B+t]+=ve*ue,P[B+r]+=me*ue,P[H+t]-=ve*ue,P[H+r]-=me*ue)):(ge=Math.sqrt(ve*ve+me*me),ge>0&&(ue=de*P[B+s]*P[H+s]/ge/ge,P[B+t]+=ve*ue,P[B+r]+=me*ue,P[H+t]-=ve*ue,P[H+r]-=me*ue));for(X=U.gravity/U.scalingRatio,de=U.scalingRatio,A=0;A<se;A+=w)ue=0,ve=P[A+n],me=P[A+e],ge=Math.sqrt(Math.pow(ve,2)+Math.pow(me,2)),U.strongGravityMode?ge>0&&(ue=de*P[A+s]*X):ge>0&&(ue=de*P[A+s]*X/ge),P[A+t]-=ve*ue,P[A+r]-=me*ue;for(de=1*(U.outboundAttractionDistribution?re:1),W=0;W<fe;W+=z)B=te[W+p],H=te[W+v],Y=te[W+y],De=Math.pow(Y,U.edgeWeightInfluence),ve=P[B+n]-P[H+n],me=P[B+e]-P[H+e],pe===!0?(ge=Math.sqrt(ve*ve+me*me)-P[B+h]-P[H+h],U.linLogMode?U.outboundAttractionDistribution?ge>0&&(ue=-de*De*Math.log(1+ge)/ge/P[B+s]):ge>0&&(ue=-de*De*Math.log(1+ge)/ge):U.outboundAttractionDistribution?ge>0&&(ue=-de*De/P[B+s]):ge>0&&(ue=-de*De)):(ge=Math.sqrt(Math.pow(ve,2)+Math.pow(me,2)),U.linLogMode?U.outboundAttractionDistribution?ge>0&&(ue=-de*De*Math.log(1+ge)/ge/P[B+s]):ge>0&&(ue=-de*De*Math.log(1+ge)/ge):U.outboundAttractionDistribution?(ge=1,ue=-de*De/P[B+s]):(ge=1,ue=-de*De)),ge>0&&(P[B+t]+=ve*ue,P[B+r]+=me*ue,P[H+t]-=ve*ue,P[H+r]-=me*ue);var et,tt,Ue,Ge,it,ot;if(pe===!0)for(A=0;A<se;A+=w)P[A+d]!==1&&(et=Math.sqrt(Math.pow(P[A+t],2)+Math.pow(P[A+r],2)),et>T&&(P[A+t]=P[A+t]*T/et,P[A+r]=P[A+r]*T/et),tt=P[A+s]*Math.sqrt((P[A+o]-P[A+t])*(P[A+o]-P[A+t])+(P[A+a]-P[A+r])*(P[A+a]-P[A+r])),Ue=Math.sqrt((P[A+o]+P[A+t])*(P[A+o]+P[A+t])+(P[A+a]+P[A+r])*(P[A+a]+P[A+r]))/2,Ge=.1*Math.log(1+Ue)/(1+Math.sqrt(tt)),it=P[A+n]+P[A+t]*(Ge/U.slowDown),P[A+n]=it,ot=P[A+e]+P[A+r]*(Ge/U.slowDown),P[A+e]=ot);else for(A=0;A<se;A+=w)P[A+d]!==1&&(tt=P[A+s]*Math.sqrt((P[A+o]-P[A+t])*(P[A+o]-P[A+t])+(P[A+a]-P[A+r])*(P[A+a]-P[A+r])),Ue=Math.sqrt((P[A+o]+P[A+t])*(P[A+o]+P[A+t])+(P[A+a]+P[A+r])*(P[A+a]+P[A+r]))/2,Ge=P[A+l]*Math.log(1+Ue)/(1+Math.sqrt(tt)),P[A+l]=Math.min(1,Math.sqrt(Ge*(Math.pow(P[A+t],2)+Math.pow(P[A+r],2))/(1+Math.sqrt(tt)))),it=P[A+n]+P[A+t]*(Ge/U.slowDown),P[A+n]=it,ot=P[A+e]+P[A+r]*(Ge/U.slowDown),P[A+e]=ot);return{}},qo}var Tt={},Nc;function j0(){if(Nc)return Tt;Nc=1;var n=10,e=3;return Tt.assign=function(t){t=t||{};var r=Array.prototype.slice.call(arguments).slice(1),o,a,s;for(o=0,s=r.length;o<s;o++)if(r[o])for(a in r[o])t[a]=r[o][a];return t},Tt.validateSettings=function(t){return"linLogMode"in t&&typeof t.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in t&&typeof t.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in t&&typeof t.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in t&&typeof t.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in t&&!(typeof t.scalingRatio=="number"&&t.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in t&&typeof t.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in t&&!(typeof t.gravity=="number"&&t.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in t&&!(typeof t.slowDown=="number"||t.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in t&&typeof t.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in t&&!(typeof t.barnesHutTheta=="number"&&t.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},Tt.graphToByteArrays=function(t,r){var o=t.order,a=t.size,s={},l,h=new Float32Array(o*n),d=new Float32Array(a*e);return l=0,t.forEachNode(function(p,v){s[p]=l,h[l]=v.x,h[l+1]=v.y,h[l+2]=0,h[l+3]=0,h[l+4]=0,h[l+5]=0,h[l+6]=1,h[l+7]=1,h[l+8]=v.size||1,h[l+9]=v.fixed?1:0,l+=n}),l=0,t.forEachEdge(function(p,v,y,b,_,S,C){var D=s[y],k=s[b],M=r(p,v,y,b,_,S,C);h[D+6]+=M,h[k+6]+=M,d[l]=D,d[l+1]=k,d[l+2]=M,l+=e}),{nodes:h,edges:d}},Tt.assignLayoutChanges=function(t,r,o){var a=0;t.updateEachNodeAttributes(function(s,l){return l.x=r[a],l.y=r[a+1],a+=n,o?o(s,l):l})},Tt.readGraphPositions=function(t,r){var o=0;t.forEachNode(function(a,s){r[o]=s.x,r[o+1]=s.y,o+=n})},Tt.collectLayoutChanges=function(t,r,o){for(var a=t.nodes(),s={},l=0,h=0,d=r.length;l<d;l+=n){if(o){var p=Object.assign({},t.getNodeAttributes(a[h]));p.x=r[l],p.y=r[l+1],p=o(a[h],p),s[a[h]]={x:p.x,y:p.y}}else s[a[h]]={x:r[l],y:r[l+1]};h++}return s},Tt.createWorker=function(r){var o=window.URL||window.webkitURL,a=r.toString(),s=o.createObjectURL(new Blob(["("+a+").call(this);"],{type:"text/javascript"})),l=new Worker(s);return o.revokeObjectURL(s),l},Tt}var Fo,Ic;function B0(){return Ic||(Ic=1,Fo={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),Fo}var jo,Mc;function U0(){if(Mc)return jo;Mc=1;var n=ke(),e=kr().createEdgeWeightGetter,t=F0(),r=j0(),o=B0();function a(h,d,p){if(!n(d))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof p=="number"&&(p={iterations:p});var v=p.iterations;if(typeof v!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(v<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var y=e("getEdgeWeight"in p?p.getEdgeWeight:"weight").fromEntry,b=typeof p.outputReducer=="function"?p.outputReducer:null,_=r.assign({},o,p.settings),S=r.validateSettings(_);if(S)throw new Error("graphology-layout-forceatlas2: "+S.message);var C=r.graphToByteArrays(d,y),D;for(D=0;D<v;D++)t(_,C.nodes,C.edges);if(h){r.assignLayoutChanges(d,C.nodes,b);return}return r.collectLayoutChanges(d,C.nodes)}function s(h){var d=typeof h=="number"?h:h.order;return{barnesHutOptimize:d>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(d)}}var l=a.bind(null,!1);return l.assign=a.bind(null,!0),l.inferSettings=s,jo=l,jo}var H0=U0();const W0=Ve(H0);var Bo,Lc;function K0(){if(Lc)return Bo;Lc=1;var n=0,e=1,t=2,r=3;function o(s,l){return s+"§"+l}function a(){return .01*(.5-Math.random())}return Bo=function(l,h){var d=l.margin,p=l.ratio,v=l.expansion,y=l.gridSize,b=l.speed,_,S,C,D,k,M,x=!0,I=h.length,R=I/r|0,w=new Float32Array(R),z=new Float32Array(R),$=1/0,T=1/0,q=-1/0,U=-1/0;for(_=0;_<I;_+=r)C=h[_+n],D=h[_+e],M=h[_+t]*p+d,$=Math.min($,C-M),q=Math.max(q,C+M),T=Math.min(T,D-M),U=Math.max(U,D+M);var P=q-$,te=U-T,J=($+q)/2,F=(T+U)/2;$=J-v*P/2,q=J+v*P/2,T=F-v*te/2,U=F+v*te/2;var A=new Array(y*y),B=A.length,H;for(H=0;H<B;H++)A[H]=[];var Q,W,Y,X,ee,se,fe,pe,Ee,re;for(_=0;_<I;_+=r)for(C=h[_+n],D=h[_+e],M=h[_+t]*p+d,Q=C-M,W=C+M,Y=D-M,X=D+M,ee=Math.floor(y*(Q-$)/(q-$)),se=Math.floor(y*(W-$)/(q-$)),fe=Math.floor(y*(Y-T)/(U-T)),pe=Math.floor(y*(X-T)/(U-T)),Ee=ee;Ee<=se;Ee++)for(re=fe;re<=pe;re++)A[Ee*y+re].push(_);var de,ve=new Set,me,De,ge,ue,V,Fe,ze,Qe,Te,Ie,Oe,je,Be;for(H=0;H<B;H++)for(de=A[H],_=0,k=de.length;_<k;_++)for(me=de[_],ge=h[me+n],V=h[me+e],ze=h[me+t],S=_+1;S<k;S++)De=de[S],Te=o(me,De),!(B>1&&ve.has(Te))&&(B>1&&ve.add(Te),ue=h[De+n],Fe=h[De+e],Qe=h[De+t],Ie=ue-ge,Oe=Fe-V,je=Math.sqrt(Ie*Ie+Oe*Oe),Be=je<ze*p+d+(Qe*p+d),Be&&(x=!1,De=De/r|0,je>0?(w[De]+=Ie/je*(1+ze),z[De]+=Oe/je*(1+ze)):(w[De]+=P*a(),z[De]+=te*a())));for(_=0,S=0;_<I;_+=r,S++)h[_+n]+=w[S]*.1*b,h[_+e]+=z[S]*.1*b;return{converged:x}},Bo}var er={},zc;function X0(){if(zc)return er;zc=1;var n=3;return er.validateSettings=function(e){return"gridSize"in e&&typeof e.gridSize!="number"||e.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in e&&typeof e.margin!="number"||e.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in e&&typeof e.expansion!="number"||e.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in e&&typeof e.ratio!="number"||e.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in e&&typeof e.speed!="number"||e.speed<=0?{message:"the `speed` setting should be a positive number."}:null},er.graphToByteArray=function(e,t){var r=e.order,o=new Float32Array(r*n),a=0;return e.forEachNode(function(s,l){typeof t=="function"&&(l=t(s,l)),o[a]=l.x,o[a+1]=l.y,o[a+2]=l.size||1,a+=n}),o},er.assignLayoutChanges=function(e,t,r){var o=0;e.forEachNode(function(a){var s={x:t[o],y:t[o+1]};typeof r=="function"&&(s=r(a,s)),e.mergeNodeAttributes(a,s),o+=n})},er.collectLayoutChanges=function(e,t,r){var o={},a=0;return e.forEachNode(function(s){var l={x:t[a],y:t[a+1]};typeof r=="function"&&(l=r(s,l)),o[s]=l,a+=n}),o},er.createWorker=function(t){var r=window.URL||window.webkitURL,o=t.toString(),a=r.createObjectURL(new Blob(["("+o+").call(this);"],{type:"text/javascript"})),s=new Worker(a);return r.revokeObjectURL(a),s},er}var Uo,$c;function Y0(){return $c||($c=1,Uo={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3}),Uo}var Ho,Tc;function V0(){if(Tc)return Ho;Tc=1;var n=ke(),e=K0(),t=X0(),r=Y0(),o=500;function a(l,h,d){if(!n(h))throw new Error("graphology-layout-noverlap: the given graph is not a valid graphology instance.");typeof d=="number"?d={maxIterations:d}:d=d||{};var p=d.maxIterations||o;if(typeof p!="number"||p<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");var v=Object.assign({},r,d.settings),y=t.validateSettings(v);if(y)throw new Error("graphology-layout-noverlap: "+y.message);var b=t.graphToByteArray(h,d.inputReducer),_=!1,S;for(S=0;S<p&&!_;S++)_=e(v,b).converged;if(l){t.assignLayoutChanges(h,b,d.outputReducer);return}return t.collectLayoutChanges(h,b,d.outputReducer)}var s=a.bind(null,!1);return s.assign=a.bind(null,!0),Ho=s,Ho}var Q0=V0();const Z0=Ve(Q0);class J0{constructor(e){this.app=e,this.eventBus=e.eventBus,this.canvas=e.canvas}init(){}applyLayout(e,t){let r=!0;switch(e){case"force":this.force();break;case"noverlap":this.noverlap();break;case"rotate180":this.rotate180();break;case"rotate":this.rotate(t);break;case"h-flip":this.hFlip();break;case"v-flip":this.vFlip();break;case"center":this.center();break;case"random":this.random();break;case"circle":this.organizeNodesInCircle();break;case"oneLine":this.organizeNodesInLine();break;case"twoLine":this.organizeNodesInTwoLines(t.line1Count,t.Y);break;default:r=!1;break}r&&this.app.graphManager.saveGraphState()}noverlap(){const e=this.app.graphManager.graph,t=Z0(e,{maxIterations:50,settings:{ratio:100,expansion:1.5,gridSize:5}});this.center(t)}force(){const e=this.app.graphManager.graph,t=W0(e,{iterations:5,settings:{gravity:10,scalingRatio:100}});this.center(t)}hFlip(){const e=this.canvas.width/2,t=this.app.graphManager.graph,r=At.collectLayout(t);Object.values(r).forEach(o=>{const a=e-o.x;o.x+=2*a}),At.assignLayout(t,r)}vFlip(){const e=this.canvas.height/2,t=this.app.graphManager.graph,r=At.collectLayout(t);Object.values(r).forEach(o=>{const a=e-o.y;o.y+=2*a}),At.assignLayout(t,r)}rotate(e=90){const t=this.app.graphManager.graph,r=e*Math.PI/-180,o=Ro.rotation(t,r);this.center(o)}center(e=void 0){const t=this.canvas.width/2,r=this.canvas.height/2,o=this.app.graphManager.graph;e||(e=At.collectLayout(o));const a={x:Tn(Object.values(e),h=>h.x),y:Tn(Object.values(e),h=>h.y)},s=t-a.x,l=r-a.y;Object.values(e).forEach(h=>{h.x+=s,h.y+=l}),At.assignLayout(o,e)}random(){const e=this.canvas.width/2,t=this.canvas.height/2,r=this.app.graphManager.graph,o=Ro.random(r,{scale:Math.max(e,t)-200});this.center(o)}organizeNodesInCircle(){const e=this.canvas.width/2,t=this.canvas.height/2,r=this.app.graphManager.graph,o=Math.min(e*.5,t*.5),a=Ro.circular(r,{scale:o,dimensions:["x","y"]});Object.values(a).forEach(s=>{s.x+=e,s.y+=t}),At.assignLayout(r,a)}organizeNodesInLine(){const e=this.canvas.width/2,t=this.canvas.height/2,r=e*.1,o=this.app.graphManager.graph,a=this.app.graphManager.graph.nodes(),s={};if(o.order===0)return;const l=(this.canvas.width-2*r)/Math.max(1,o.order-1);a.forEach((h,d)=>{s[h]={x:r+d*l,y:t}}),At.assignLayout(o,s)}organizeNodesInTwoLines(e,t=50){const r=this.canvas.width/2,o=this.canvas.height/2,a=r*.1,s=t,l=this.app.graphManager.graph,h=this.app.graphManager.graph.nodes(),d={};if(l.order===0)return;if(e>l.order){console.error("Line1 count exceeds total nodes.");return}const p=h.slice(0,e),v=h.slice(e),y=p.length,b=v.length,_=y>1?(this.canvas.width-2*a)/(y-1):0,S=b>1?(this.canvas.width-2*a)/(b-1):0,C=o-s,D=o+s;p.forEach((k,M)=>{d[k]={x:a+M*_,y:C}}),v.forEach((k,M)=>{d[k]={x:a+M*S,y:D}}),At.assignLayout(l,d)}rotate180(){const e=this.canvas.width,t=this.canvas.height,r=e*.15,o=this.app.graphManager.graph,a=o.nodes(),s={};if(o.order===0)return;let l=1/0,h=1/0,d=-1/0,p=-1/0;a.forEach(k=>{const{x:M,y:x}=o.getNodeAttributes(k);M<l&&(l=M),x<h&&(h=x),M>d&&(d=M),x>p&&(p=x)});const v=d-l,y=p-h,b=(e-2*r)/v,_=(t-2*r)/y,S=Math.min(b,_),C=(e-v*S)/2,D=(t-y*S)/2;o.forEachNode((k,M)=>{const x=e-((M.x-l)*S+C),I=t-((M.y-h)*S+D);s[k]={x,y:I}}),At.assignLayout(o,s)}}var Ur={exports:{}},eb=Ur.exports,Pc;function tb(){return Pc||(Pc=1,function(n,e){(function(t,r){n.exports=r()})(eb,function(){function t(c,u){var f=Object.keys(c);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(c);u&&(g=g.filter(function(m){return Object.getOwnPropertyDescriptor(c,m).enumerable})),f.push.apply(f,g)}return f}function r(c){for(var u=1;u<arguments.length;u++){var f=arguments[u]!=null?arguments[u]:{};u%2?t(Object(f),!0).forEach(function(g){h(c,g,f[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(f)):t(Object(f)).forEach(function(g){Object.defineProperty(c,g,Object.getOwnPropertyDescriptor(f,g))})}return c}function o(c){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},o(c)}function a(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function s(c,u){for(var f=0;f<u.length;f++){var g=u[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(c,S(g.key),g)}}function l(c,u,f){return u&&s(c.prototype,u),Object.defineProperty(c,"prototype",{writable:!1}),c}function h(c,u,f){return(u=S(u))in c?Object.defineProperty(c,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):c[u]=f,c}function d(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(u&&u.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),u&&v(c,u)}function p(c){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)},p(c)}function v(c,u){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,g){return f.__proto__=g,f},v(c,u)}function y(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function b(c){var u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var f,g=p(c);if(u){var m=p(this).constructor;f=Reflect.construct(g,arguments,m)}else f=g.apply(this,arguments);return function(E,N){if(N&&(typeof N=="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(E)}(this,f)}}function _(){return _=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(c,u,f){var g=function(E,N){for(;!Object.prototype.hasOwnProperty.call(E,N)&&(E=p(E))!==null;);return E}(c,u);if(g){var m=Object.getOwnPropertyDescriptor(g,u);return m.get?m.get.call(arguments.length<3?c:f):m.value}},_.apply(this,arguments)}function S(c){var u=function(f,g){if(typeof f!="object"||f===null)return f;var m=f[Symbol.toPrimitive];if(m!==void 0){var E=m.call(f,g);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(c,"string");return typeof u=="symbol"?u:u+""}var C=function(c){return!(!c||!c.Window)&&c instanceof c.Window},D=void 0,k=void 0;function M(c){D=c;var u=c.document.createTextNode("");u.ownerDocument!==c.document&&typeof c.wrap=="function"&&c.wrap(u)===u&&(c=c.wrap(c)),k=c}function x(c){return C(c)?c:(c.ownerDocument||c).defaultView||k.window}typeof window<"u"&&window&&M(window);var I=function(c){return!!c&&o(c)==="object"},R=function(c){return typeof c=="function"},w={window:function(c){return c===k||C(c)},docFrag:function(c){return I(c)&&c.nodeType===11},object:I,func:R,number:function(c){return typeof c=="number"},bool:function(c){return typeof c=="boolean"},string:function(c){return typeof c=="string"},element:function(c){if(!c||o(c)!=="object")return!1;var u=x(c)||k;return/object|function/.test(typeof Element>"u"?"undefined":o(Element))?c instanceof Element||c instanceof u.Element:c.nodeType===1&&typeof c.nodeName=="string"},plainObject:function(c){return I(c)&&!!c.constructor&&/function Object\b/.test(c.constructor.toString())},array:function(c){return I(c)&&c.length!==void 0&&R(c.splice)}};function z(c){var u=c.interaction;if(u.prepared.name==="drag"){var f=u.prepared.axis;f==="x"?(u.coords.cur.page.y=u.coords.start.page.y,u.coords.cur.client.y=u.coords.start.client.y,u.coords.velocity.client.y=0,u.coords.velocity.page.y=0):f==="y"&&(u.coords.cur.page.x=u.coords.start.page.x,u.coords.cur.client.x=u.coords.start.client.x,u.coords.velocity.client.x=0,u.coords.velocity.page.x=0)}}function $(c){var u=c.iEvent,f=c.interaction;if(f.prepared.name==="drag"){var g=f.prepared.axis;if(g==="x"||g==="y"){var m=g==="x"?"y":"x";u.page[m]=f.coords.start.page[m],u.client[m]=f.coords.start.client[m],u.delta[m]=0}}}var T={id:"actions/drag",install:function(c){var u=c.actions,f=c.Interactable,g=c.defaults;f.prototype.draggable=T.draggable,u.map.drag=T,u.methodDict.drag="draggable",g.actions.drag=T.defaults},listeners:{"interactions:before-action-move":z,"interactions:action-resume":z,"interactions:action-move":$,"auto-start:check":function(c){var u=c.interaction,f=c.interactable,g=c.buttons,m=f.options.drag;if(m&&m.enabled&&(!u.pointerIsDown||!/mouse|pointer/.test(u.pointerType)||g&f.options.drag.mouseButtons))return c.action={name:"drag",axis:m.lockAxis==="start"?m.startAxis:m.lockAxis},!1}},draggable:function(c){return w.object(c)?(this.options.drag.enabled=c.enabled!==!1,this.setPerAction("drag",c),this.setOnEvents("drag",c),/^(xy|x|y|start)$/.test(c.lockAxis)&&(this.options.drag.lockAxis=c.lockAxis),/^(xy|x|y)$/.test(c.startAxis)&&(this.options.drag.startAxis=c.startAxis),this):w.bool(c)?(this.options.drag.enabled=c,this):this.options.drag},beforeMove:z,move:$,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(c){return c.search("drag")===0}},q=T,U={init:function(c){var u=c;U.document=u.document,U.DocumentFragment=u.DocumentFragment||P,U.SVGElement=u.SVGElement||P,U.SVGSVGElement=u.SVGSVGElement||P,U.SVGElementInstance=u.SVGElementInstance||P,U.Element=u.Element||P,U.HTMLElement=u.HTMLElement||U.Element,U.Event=u.Event,U.Touch=u.Touch||P,U.PointerEvent=u.PointerEvent||u.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function P(){}var te=U,J={init:function(c){var u=te.Element,f=c.navigator||{};J.supportsTouch="ontouchstart"in c||w.func(c.DocumentTouch)&&te.document instanceof c.DocumentTouch,J.supportsPointerEvent=f.pointerEnabled!==!1&&!!te.PointerEvent,J.isIOS=/iP(hone|od|ad)/.test(f.platform),J.isIOS7=/iP(hone|od|ad)/.test(f.platform)&&/OS 7[^\d]/.test(f.appVersion),J.isIe9=/MSIE 9/.test(f.userAgent),J.isOperaMobile=f.appName==="Opera"&&J.supportsTouch&&/Presto/.test(f.userAgent),J.prefixedMatchesSelector="matches"in u.prototype?"matches":"webkitMatchesSelector"in u.prototype?"webkitMatchesSelector":"mozMatchesSelector"in u.prototype?"mozMatchesSelector":"oMatchesSelector"in u.prototype?"oMatchesSelector":"msMatchesSelector",J.pEventTypes=J.supportsPointerEvent?te.PointerEvent===c.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,J.wheelEvent=te.document&&"onmousewheel"in te.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},F=J;function A(c,u){if(c.contains)return c.contains(u);for(;u;){if(u===c)return!0;u=u.parentNode}return!1}function B(c,u){for(;w.element(c);){if(Q(c,u))return c;c=H(c)}return null}function H(c){var u=c.parentNode;if(w.docFrag(u)){for(;(u=u.host)&&w.docFrag(u););return u}return u}function Q(c,u){return k!==D&&(u=u.replace(/\/deep\//g," ")),c[F.prefixedMatchesSelector](u)}var W=function(c){return c.parentNode||c.host};function Y(c,u){for(var f,g=[],m=c;(f=W(m))&&m!==u&&f!==m.ownerDocument;)g.unshift(m),m=f;return g}function X(c,u,f){for(;w.element(c);){if(Q(c,u))return!0;if((c=H(c))===f)return Q(c,u)}return!1}function ee(c){return c.correspondingUseElement||c}function se(c){var u=c instanceof te.SVGElement?c.getBoundingClientRect():c.getClientRects()[0];return u&&{left:u.left,right:u.right,top:u.top,bottom:u.bottom,width:u.width||u.right-u.left,height:u.height||u.bottom-u.top}}function fe(c){var u,f=se(c);if(!F.isIOS7&&f){var g={x:(u=(u=x(c))||k).scrollX||u.document.documentElement.scrollLeft,y:u.scrollY||u.document.documentElement.scrollTop};f.left+=g.x,f.right+=g.x,f.top+=g.y,f.bottom+=g.y}return f}function pe(c){for(var u=[];c;)u.push(c),c=H(c);return u}function Ee(c){return!!w.string(c)&&(te.document.querySelector(c),!0)}function re(c,u){for(var f in u)c[f]=u[f];return c}function de(c,u,f){return c==="parent"?H(f):c==="self"?u.getRect(f):B(f,c)}function ve(c,u,f,g){var m=c;return w.string(m)?m=de(m,u,f):w.func(m)&&(m=m.apply(void 0,g)),w.element(m)&&(m=fe(m)),m}function me(c){return c&&{x:"x"in c?c.x:c.left,y:"y"in c?c.y:c.top}}function De(c){return!c||"x"in c&&"y"in c||((c=re({},c)).x=c.left||0,c.y=c.top||0,c.width=c.width||(c.right||0)-c.x,c.height=c.height||(c.bottom||0)-c.y),c}function ge(c,u,f){c.left&&(u.left+=f.x),c.right&&(u.right+=f.x),c.top&&(u.top+=f.y),c.bottom&&(u.bottom+=f.y),u.width=u.right-u.left,u.height=u.bottom-u.top}function ue(c,u,f){var g=f&&c.options[f];return me(ve(g&&g.origin||c.options.origin,c,u,[c&&u]))||{x:0,y:0}}function V(c,u){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(O){return!0},g=arguments.length>3?arguments[3]:void 0;if(g=g||{},w.string(c)&&c.search(" ")!==-1&&(c=Fe(c)),w.array(c))return c.forEach(function(O){return V(O,u,f,g)}),g;if(w.object(c)&&(u=c,c=""),w.func(u)&&f(c))g[c]=g[c]||[],g[c].push(u);else if(w.array(u))for(var m=0,E=u;m<E.length;m++){var N=E[m];V(c,N,f,g)}else if(w.object(u))for(var L in u)V(Fe(L).map(function(O){return"".concat(c).concat(O)}),u[L],f,g);return g}function Fe(c){return c.trim().split(/ +/)}var ze=function(c,u){return Math.sqrt(c*c+u*u)},Qe=["webkit","moz"];function Te(c,u){c.__set||(c.__set={});var f=function(m){if(Qe.some(function(E){return m.indexOf(E)===0}))return 1;typeof c[m]!="function"&&m!=="__set"&&Object.defineProperty(c,m,{get:function(){return m in c.__set?c.__set[m]:c.__set[m]=u[m]},set:function(E){c.__set[m]=E},configurable:!0})};for(var g in u)f(g);return c}function Ie(c,u){c.page=c.page||{},c.page.x=u.page.x,c.page.y=u.page.y,c.client=c.client||{},c.client.x=u.client.x,c.client.y=u.client.y,c.timeStamp=u.timeStamp}function Oe(c){c.page.x=0,c.page.y=0,c.client.x=0,c.client.y=0}function je(c){return c instanceof te.Event||c instanceof te.Touch}function Be(c,u,f){return c=c||"page",(f=f||{}).x=u[c+"X"],f.y=u[c+"Y"],f}function wt(c,u){return u=u||{x:0,y:0},F.isOperaMobile&&je(c)?(Be("screen",c,u),u.x+=window.scrollX,u.y+=window.scrollY):Be("page",c,u),u}function et(c){return w.number(c.pointerId)?c.pointerId:c.identifier}function tt(c,u,f){var g=u.length>1?Ge(u):u[0];wt(g,c.page),function(m,E){E=E||{},F.isOperaMobile&&je(m)?Be("screen",m,E):Be("client",m,E)}(g,c.client),c.timeStamp=f}function Ue(c){var u=[];return w.array(c)?(u[0]=c[0],u[1]=c[1]):c.type==="touchend"?c.touches.length===1?(u[0]=c.touches[0],u[1]=c.changedTouches[0]):c.touches.length===0&&(u[0]=c.changedTouches[0],u[1]=c.changedTouches[1]):(u[0]=c.touches[0],u[1]=c.touches[1]),u}function Ge(c){for(var u={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},f=0;f<c.length;f++){var g=c[f];for(var m in u)u[m]+=g[m]}for(var E in u)u[E]/=c.length;return u}function it(c){if(!c.length)return null;var u=Ue(c),f=Math.min(u[0].pageX,u[1].pageX),g=Math.min(u[0].pageY,u[1].pageY),m=Math.max(u[0].pageX,u[1].pageX),E=Math.max(u[0].pageY,u[1].pageY);return{x:f,y:g,left:f,top:g,right:m,bottom:E,width:m-f,height:E-g}}function ot(c,u){var f=u+"X",g=u+"Y",m=Ue(c),E=m[0][f]-m[1][f],N=m[0][g]-m[1][g];return ze(E,N)}function Yt(c,u){var f=u+"X",g=u+"Y",m=Ue(c),E=m[1][f]-m[0][f],N=m[1][g]-m[0][g];return 180*Math.atan2(N,E)/Math.PI}function sr(c){return w.string(c.pointerType)?c.pointerType:w.number(c.pointerType)?[void 0,void 0,"touch","pen","mouse"][c.pointerType]:/touch/.test(c.type||"")||c instanceof te.Touch?"touch":"mouse"}function en(c){var u=w.func(c.composedPath)?c.composedPath():c.path;return[ee(u?u[0]:c.target),ee(c.currentTarget)]}var ur=function(){function c(u){a(this,c),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=u}return l(c,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),c}();Object.defineProperty(ur.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var tn=function(c,u){for(var f=0;f<u.length;f++){var g=u[f];c.push(g)}return c},rn=function(c){return tn([],c)},It=function(c,u){for(var f=0;f<c.length;f++)if(u(c[f],f,c))return f;return-1},ht=function(c,u){return c[It(c,u)]},Et=function(c){d(f,c);var u=b(f);function f(g,m,E){var N;a(this,f),(N=u.call(this,m._interaction)).dropzone=void 0,N.dragEvent=void 0,N.relatedTarget=void 0,N.draggable=void 0,N.propagationStopped=!1,N.immediatePropagationStopped=!1;var L=E==="dragleave"?g.prev:g.cur,O=L.element,j=L.dropzone;return N.type=E,N.target=O,N.currentTarget=O,N.dropzone=j,N.dragEvent=m,N.relatedTarget=m.target,N.draggable=m.interactable,N.timeStamp=m.timeStamp,N}return l(f,[{key:"reject",value:function(){var g=this,m=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&m.cur.dropzone===this.dropzone&&m.cur.element===this.target)if(m.prev.dropzone=this.dropzone,m.prev.element=this.target,m.rejected=!0,m.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var E=m.activeDrops,N=It(E,function(O){var j=O.dropzone,G=O.element;return j===g.dropzone&&G===g.target});m.activeDrops.splice(N,1);var L=new f(m,this.dragEvent,"dropdeactivate");L.dropzone=this.dropzone,L.target=this.target,this.dropzone.fire(L)}else this.dropzone.fire(new f(m,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),f}(ur);function Vt(c,u){for(var f=0,g=c.slice();f<g.length;f++){var m=g[f],E=m.dropzone,N=m.element;u.dropzone=E,u.target=N,E.fire(u),u.propagationStopped=u.immediatePropagationStopped=!1}}function cr(c,u){for(var f=function(E,N){for(var L=[],O=0,j=E.interactables.list;O<j.length;O++){var G=j[O];if(G.options.drop.enabled){var K=G.options.drop.accept;if(!(w.element(K)&&K!==N||w.string(K)&&!Q(N,K)||w.func(K)&&!K({dropzone:G,draggableElement:N})))for(var Z=0,ie=G.getAllElements();Z<ie.length;Z++){var ne=ie[Z];ne!==N&&L.push({dropzone:G,element:ne,rect:G.getRect(ne)})}}}return L}(c,u),g=0;g<f.length;g++){var m=f[g];m.rect=m.dropzone.getRect(m.element)}return f}function nn(c,u,f){for(var g=c.dropState,m=c.interactable,E=c.element,N=[],L=0,O=g.activeDrops;L<O.length;L++){var j=O[L],G=j.dropzone,K=j.element,Z=j.rect,ie=G.dropCheck(u,f,m,E,K,Z);N.push(ie?K:null)}var ne=function(oe){for(var he,ce,ye,Se=[],Ce=0;Ce<oe.length;Ce++){var xe=oe[Ce],Ae=oe[he];if(xe&&Ce!==he)if(Ae){var We=W(xe),Me=W(Ae);if(We!==xe.ownerDocument)if(Me!==xe.ownerDocument)if(We!==Me){Se=Se.length?Se:Y(Ae);var rt=void 0;if(Ae instanceof te.HTMLElement&&xe instanceof te.SVGElement&&!(xe instanceof te.SVGSVGElement)){if(xe===Me)continue;rt=xe.ownerSVGElement}else rt=xe;for(var ft=Y(rt,Ae.ownerDocument),zt=0;ft[zt]&&ft[zt]===Se[zt];)zt++;var fn=[ft[zt-1],ft[zt],Se[zt]];if(fn[0])for(var zr=fn[0].lastChild;zr;){if(zr===fn[1]){he=Ce,Se=ft;break}if(zr===fn[2])break;zr=zr.previousSibling}}else ye=Ae,(parseInt(x(ce=xe).getComputedStyle(ce).zIndex,10)||0)>=(parseInt(x(ye).getComputedStyle(ye).zIndex,10)||0)&&(he=Ce);else he=Ce}else he=Ce}return he}(N);return g.activeDrops[ne]||null}function Cr(c,u,f){var g=c.dropState,m={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return f.type==="dragstart"&&(m.activate=new Et(g,f,"dropactivate"),m.activate.target=null,m.activate.dropzone=null),f.type==="dragend"&&(m.deactivate=new Et(g,f,"dropdeactivate"),m.deactivate.target=null,m.deactivate.dropzone=null),g.rejected||(g.cur.element!==g.prev.element&&(g.prev.dropzone&&(m.leave=new Et(g,f,"dragleave"),f.dragLeave=m.leave.target=g.prev.element,f.prevDropzone=m.leave.dropzone=g.prev.dropzone),g.cur.dropzone&&(m.enter=new Et(g,f,"dragenter"),f.dragEnter=g.cur.element,f.dropzone=g.cur.dropzone)),f.type==="dragend"&&g.cur.dropzone&&(m.drop=new Et(g,f,"drop"),f.dropzone=g.cur.dropzone,f.relatedTarget=g.cur.element),f.type==="dragmove"&&g.cur.dropzone&&(m.move=new Et(g,f,"dropmove"),f.dropzone=g.cur.dropzone)),m}function Vn(c,u){var f=c.dropState,g=f.activeDrops,m=f.cur,E=f.prev;u.leave&&E.dropzone.fire(u.leave),u.enter&&m.dropzone.fire(u.enter),u.move&&m.dropzone.fire(u.move),u.drop&&m.dropzone.fire(u.drop),u.deactivate&&Vt(g,u.deactivate),f.prev.dropzone=m.dropzone,f.prev.element=m.element}function Sa(c,u){var f=c.interaction,g=c.iEvent,m=c.event;if(g.type==="dragmove"||g.type==="dragend"){var E=f.dropState;u.dynamicDrop&&(E.activeDrops=cr(u,f.element));var N=g,L=nn(f,N,m);E.rejected=E.rejected&&!!L&&L.dropzone===E.cur.dropzone&&L.element===E.cur.element,E.cur.dropzone=L&&L.dropzone,E.cur.element=L&&L.element,E.events=Cr(f,0,N)}}var Aa={id:"actions/drop",install:function(c){var u=c.actions,f=c.interactStatic,g=c.Interactable,m=c.defaults;c.usePlugin(q),g.prototype.dropzone=function(E){return function(N,L){if(w.object(L)){if(N.options.drop.enabled=L.enabled!==!1,L.listeners){var O=V(L.listeners),j=Object.keys(O).reduce(function(K,Z){return K[/^(enter|leave)/.test(Z)?"drag".concat(Z):/^(activate|deactivate|move)/.test(Z)?"drop".concat(Z):Z]=O[Z],K},{}),G=N.options.drop.listeners;G&&N.off(G),N.on(j),N.options.drop.listeners=j}return w.func(L.ondrop)&&N.on("drop",L.ondrop),w.func(L.ondropactivate)&&N.on("dropactivate",L.ondropactivate),w.func(L.ondropdeactivate)&&N.on("dropdeactivate",L.ondropdeactivate),w.func(L.ondragenter)&&N.on("dragenter",L.ondragenter),w.func(L.ondragleave)&&N.on("dragleave",L.ondragleave),w.func(L.ondropmove)&&N.on("dropmove",L.ondropmove),/^(pointer|center)$/.test(L.overlap)?N.options.drop.overlap=L.overlap:w.number(L.overlap)&&(N.options.drop.overlap=Math.max(Math.min(1,L.overlap),0)),"accept"in L&&(N.options.drop.accept=L.accept),"checker"in L&&(N.options.drop.checker=L.checker),N}return w.bool(L)?(N.options.drop.enabled=L,N):N.options.drop}(this,E)},g.prototype.dropCheck=function(E,N,L,O,j,G){return function(K,Z,ie,ne,oe,he,ce){var ye=!1;if(!(ce=ce||K.getRect(he)))return!!K.options.drop.checker&&K.options.drop.checker(Z,ie,ye,K,he,ne,oe);var Se=K.options.drop.overlap;if(Se==="pointer"){var Ce=ue(ne,oe,"drag"),xe=wt(Z);xe.x+=Ce.x,xe.y+=Ce.y;var Ae=xe.x>ce.left&&xe.x<ce.right,We=xe.y>ce.top&&xe.y<ce.bottom;ye=Ae&&We}var Me=ne.getRect(oe);if(Me&&Se==="center"){var rt=Me.left+Me.width/2,ft=Me.top+Me.height/2;ye=rt>=ce.left&&rt<=ce.right&&ft>=ce.top&&ft<=ce.bottom}return Me&&w.number(Se)&&(ye=Math.max(0,Math.min(ce.right,Me.right)-Math.max(ce.left,Me.left))*Math.max(0,Math.min(ce.bottom,Me.bottom)-Math.max(ce.top,Me.top))/(Me.width*Me.height)>=Se),K.options.drop.checker&&(ye=K.options.drop.checker(Z,ie,ye,K,he,ne,oe)),ye}(this,E,N,L,O,j,G)},f.dynamicDrop=function(E){return w.bool(E)?(c.dynamicDrop=E,f):c.dynamicDrop},re(u.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),u.methodDict.drop="dropzone",c.dynamicDrop=!1,m.actions.drop=Aa.defaults},listeners:{"interactions:before-action-start":function(c){var u=c.interaction;u.prepared.name==="drag"&&(u.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(c,u){var f=c.interaction,g=(c.event,c.iEvent);if(f.prepared.name==="drag"){var m=f.dropState;m.activeDrops=[],m.events={},m.activeDrops=cr(u,f.element),m.events=Cr(f,0,g),m.events.activate&&(Vt(m.activeDrops,m.events.activate),u.fire("actions/drop:start",{interaction:f,dragEvent:g}))}},"interactions:action-move":Sa,"interactions:after-action-move":function(c,u){var f=c.interaction,g=c.iEvent;if(f.prepared.name==="drag"){var m=f.dropState;Vn(f,m.events),u.fire("actions/drop:move",{interaction:f,dragEvent:g}),m.events={}}},"interactions:action-end":function(c,u){if(c.interaction.prepared.name==="drag"){var f=c.interaction,g=c.iEvent;Sa(c,u),Vn(f,f.dropState.events),u.fire("actions/drop:end",{interaction:f,dragEvent:g})}},"interactions:stop":function(c){var u=c.interaction;if(u.prepared.name==="drag"){var f=u.dropState;f&&(f.activeDrops=null,f.events=null,f.cur.dropzone=null,f.cur.element=null,f.prev.dropzone=null,f.prev.element=null,f.rejected=!1)}}},getActiveDrops:cr,getDrop:nn,getDropEvents:Cr,fireDropEvents:Vn,filterEventType:function(c){return c.search("drag")===0||c.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},Gl=Aa;function Qn(c){var u=c.interaction,f=c.iEvent,g=c.phase;if(u.prepared.name==="gesture"){var m=u.pointers.map(function(j){return j.pointer}),E=g==="start",N=g==="end",L=u.interactable.options.deltaSource;if(f.touches=[m[0],m[1]],E)f.distance=ot(m,L),f.box=it(m),f.scale=1,f.ds=0,f.angle=Yt(m,L),f.da=0,u.gesture.startDistance=f.distance,u.gesture.startAngle=f.angle;else if(N||u.pointers.length<2){var O=u.prevEvent;f.distance=O.distance,f.box=O.box,f.scale=O.scale,f.ds=0,f.angle=O.angle,f.da=0}else f.distance=ot(m,L),f.box=it(m),f.scale=f.distance/u.gesture.startDistance,f.angle=Yt(m,L),f.ds=f.scale-u.gesture.scale,f.da=f.angle-u.gesture.angle;u.gesture.distance=f.distance,u.gesture.angle=f.angle,w.number(f.scale)&&f.scale!==1/0&&!isNaN(f.scale)&&(u.gesture.scale=f.scale)}}var Zn={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(c){var u=c.actions,f=c.Interactable,g=c.defaults;f.prototype.gesturable=function(m){return w.object(m)?(this.options.gesture.enabled=m.enabled!==!1,this.setPerAction("gesture",m),this.setOnEvents("gesture",m),this):w.bool(m)?(this.options.gesture.enabled=m,this):this.options.gesture},u.map.gesture=Zn,u.methodDict.gesture="gesturable",g.actions.gesture=Zn.defaults},listeners:{"interactions:action-start":Qn,"interactions:action-move":Qn,"interactions:action-end":Qn,"interactions:new":function(c){c.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(c){if(!(c.interaction.pointers.length<2)){var u=c.interactable.options.gesture;if(u&&u.enabled)return c.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(c){return c.search("gesture")===0}},Rl=Zn;function ql(c,u,f,g,m,E,N){if(!u)return!1;if(u===!0){var L=w.number(E.width)?E.width:E.right-E.left,O=w.number(E.height)?E.height:E.bottom-E.top;if(N=Math.min(N,Math.abs((c==="left"||c==="right"?L:O)/2)),L<0&&(c==="left"?c="right":c==="right"&&(c="left")),O<0&&(c==="top"?c="bottom":c==="bottom"&&(c="top")),c==="left"){var j=L>=0?E.left:E.right;return f.x<j+N}if(c==="top"){var G=O>=0?E.top:E.bottom;return f.y<G+N}if(c==="right")return f.x>(L>=0?E.right:E.left)-N;if(c==="bottom")return f.y>(O>=0?E.bottom:E.top)-N}return!!w.element(g)&&(w.element(u)?u===g:X(g,u,m))}function ka(c){var u=c.iEvent,f=c.interaction;if(f.prepared.name==="resize"&&f.resizeAxes){var g=u;f.interactable.options.resize.square?(f.resizeAxes==="y"?g.delta.x=g.delta.y:g.delta.y=g.delta.x,g.axes="xy"):(g.axes=f.resizeAxes,f.resizeAxes==="x"?g.delta.y=0:f.resizeAxes==="y"&&(g.delta.x=0))}}var Mt,Qt,Lt={id:"actions/resize",before:["actions/drag"],install:function(c){var u=c.actions,f=c.browser,g=c.Interactable,m=c.defaults;Lt.cursors=function(E){return E.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(f),Lt.defaultMargin=f.supportsTouch||f.supportsPointerEvent?20:10,g.prototype.resizable=function(E){return function(N,L,O){return w.object(L)?(N.options.resize.enabled=L.enabled!==!1,N.setPerAction("resize",L),N.setOnEvents("resize",L),w.string(L.axis)&&/^x$|^y$|^xy$/.test(L.axis)?N.options.resize.axis=L.axis:L.axis===null&&(N.options.resize.axis=O.defaults.actions.resize.axis),w.bool(L.preserveAspectRatio)?N.options.resize.preserveAspectRatio=L.preserveAspectRatio:w.bool(L.square)&&(N.options.resize.square=L.square),N):w.bool(L)?(N.options.resize.enabled=L,N):N.options.resize}(this,E,c)},u.map.resize=Lt,u.methodDict.resize="resizable",m.actions.resize=Lt.defaults},listeners:{"interactions:new":function(c){c.interaction.resizeAxes="xy"},"interactions:action-start":function(c){(function(u){var f=u.iEvent,g=u.interaction;if(g.prepared.name==="resize"&&g.prepared.edges){var m=f,E=g.rect;g._rects={start:re({},E),corrected:re({},E),previous:re({},E),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},m.edges=g.prepared.edges,m.rect=g._rects.corrected,m.deltaRect=g._rects.delta}})(c),ka(c)},"interactions:action-move":function(c){(function(u){var f=u.iEvent,g=u.interaction;if(g.prepared.name==="resize"&&g.prepared.edges){var m=f,E=g.interactable.options.resize.invert,N=E==="reposition"||E==="negate",L=g.rect,O=g._rects,j=O.start,G=O.corrected,K=O.delta,Z=O.previous;if(re(Z,G),N){if(re(G,L),E==="reposition"){if(G.top>G.bottom){var ie=G.top;G.top=G.bottom,G.bottom=ie}if(G.left>G.right){var ne=G.left;G.left=G.right,G.right=ne}}}else G.top=Math.min(L.top,j.bottom),G.bottom=Math.max(L.bottom,j.top),G.left=Math.min(L.left,j.right),G.right=Math.max(L.right,j.left);for(var oe in G.width=G.right-G.left,G.height=G.bottom-G.top,G)K[oe]=G[oe]-Z[oe];m.edges=g.prepared.edges,m.rect=G,m.deltaRect=K}})(c),ka(c)},"interactions:action-end":function(c){var u=c.iEvent,f=c.interaction;if(f.prepared.name==="resize"&&f.prepared.edges){var g=u;g.edges=f.prepared.edges,g.rect=f._rects.corrected,g.deltaRect=f._rects.delta}},"auto-start:check":function(c){var u=c.interaction,f=c.interactable,g=c.element,m=c.rect,E=c.buttons;if(m){var N=re({},u.coords.cur.page),L=f.options.resize;if(L&&L.enabled&&(!u.pointerIsDown||!/mouse|pointer/.test(u.pointerType)||E&L.mouseButtons)){if(w.object(L.edges)){var O={left:!1,right:!1,top:!1,bottom:!1};for(var j in O)O[j]=ql(j,L.edges[j],N,u._latestPointer.eventTarget,g,m,L.margin||Lt.defaultMargin);O.left=O.left&&!O.right,O.top=O.top&&!O.bottom,(O.left||O.right||O.top||O.bottom)&&(c.action={name:"resize",edges:O})}else{var G=L.axis!=="y"&&N.x>m.right-Lt.defaultMargin,K=L.axis!=="x"&&N.y>m.bottom-Lt.defaultMargin;(G||K)&&(c.action={name:"resize",axes:(G?"x":"")+(K?"y":"")})}return!c.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(c){var u=c.edges,f=c.axis,g=c.name,m=Lt.cursors,E=null;if(f)E=m[g+f];else if(u){for(var N="",L=0,O=["top","bottom","left","right"];L<O.length;L++){var j=O[L];u[j]&&(N+=j)}E=m[N]}return E},filterEventType:function(c){return c.search("resize")===0},defaultMargin:null},Fl=Lt,jl={id:"actions",install:function(c){c.usePlugin(Rl),c.usePlugin(Fl),c.usePlugin(q),c.usePlugin(Gl)}},Ca=0,Ft={request:function(c){return Mt(c)},cancel:function(c){return Qt(c)},init:function(c){if(Mt=c.requestAnimationFrame,Qt=c.cancelAnimationFrame,!Mt)for(var u=["ms","moz","webkit","o"],f=0;f<u.length;f++){var g=u[f];Mt=c["".concat(g,"RequestAnimationFrame")],Qt=c["".concat(g,"CancelAnimationFrame")]||c["".concat(g,"CancelRequestAnimationFrame")]}Mt=Mt&&Mt.bind(c),Qt=Qt&&Qt.bind(c),Mt||(Mt=function(m){var E=Date.now(),N=Math.max(0,16-(E-Ca)),L=c.setTimeout(function(){m(E+N)},N);return Ca=E+N,L},Qt=function(m){return clearTimeout(m)})}},_e={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(c){_e.isScrolling=!0,Ft.cancel(_e.i),c.autoScroll=_e,_e.interaction=c,_e.prevTime=_e.now(),_e.i=Ft.request(_e.scroll)},stop:function(){_e.isScrolling=!1,_e.interaction&&(_e.interaction.autoScroll=null),Ft.cancel(_e.i)},scroll:function(){var c=_e.interaction,u=c.interactable,f=c.element,g=c.prepared.name,m=u.options[g].autoScroll,E=Da(m.container,u,f),N=_e.now(),L=(N-_e.prevTime)/1e3,O=m.speed*L;if(O>=1){var j={x:_e.x*O,y:_e.y*O};if(j.x||j.y){var G=Na(E);w.window(E)?E.scrollBy(j.x,j.y):E&&(E.scrollLeft+=j.x,E.scrollTop+=j.y);var K=Na(E),Z={x:K.x-G.x,y:K.y-G.y};(Z.x||Z.y)&&u.fire({type:"autoscroll",target:f,interactable:u,delta:Z,interaction:c,container:E})}_e.prevTime=N}_e.isScrolling&&(Ft.cancel(_e.i),_e.i=Ft.request(_e.scroll))},check:function(c,u){var f;return(f=c.options[u].autoScroll)==null?void 0:f.enabled},onInteractionMove:function(c){var u=c.interaction,f=c.pointer;if(u.interacting()&&_e.check(u.interactable,u.prepared.name))if(u.simulation)_e.x=_e.y=0;else{var g,m,E,N,L=u.interactable,O=u.element,j=u.prepared.name,G=L.options[j].autoScroll,K=Da(G.container,L,O);if(w.window(K))N=f.clientX<_e.margin,g=f.clientY<_e.margin,m=f.clientX>K.innerWidth-_e.margin,E=f.clientY>K.innerHeight-_e.margin;else{var Z=se(K);N=f.clientX<Z.left+_e.margin,g=f.clientY<Z.top+_e.margin,m=f.clientX>Z.right-_e.margin,E=f.clientY>Z.bottom-_e.margin}_e.x=m?1:N?-1:0,_e.y=E?1:g?-1:0,_e.isScrolling||(_e.margin=G.margin,_e.speed=G.speed,_e.start(u))}}};function Da(c,u,f){return(w.string(c)?de(c,u,f):c)||x(f)}function Na(c){return w.window(c)&&(c=window.document.body),{x:c.scrollLeft,y:c.scrollTop}}var Bl={id:"auto-scroll",install:function(c){var u=c.defaults,f=c.actions;c.autoScroll=_e,_e.now=function(){return c.now()},f.phaselessTypes.autoscroll=!0,u.perAction.autoScroll=_e.defaults},listeners:{"interactions:new":function(c){c.interaction.autoScroll=null},"interactions:destroy":function(c){c.interaction.autoScroll=null,_e.stop(),_e.interaction&&(_e.interaction=null)},"interactions:stop":_e.stop,"interactions:action-move":function(c){return _e.onInteractionMove(c)}}},Ul=Bl;function Dr(c,u){var f=!1;return function(){return f||(k.console.warn(u),f=!0),c.apply(this,arguments)}}function Jn(c,u){return c.name=u.name,c.axis=u.axis,c.edges=u.edges,c}function Hl(c){return w.bool(c)?(this.options.styleCursor=c,this):c===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Wl(c){return w.func(c)?(this.options.actionChecker=c,this):c===null?(delete this.options.actionChecker,this):this.options.actionChecker}var Kl={id:"auto-start/interactableMethods",install:function(c){var u=c.Interactable;u.prototype.getAction=function(f,g,m,E){var N=function(L,O,j,G,K){var Z=L.getRect(G),ie=O.buttons||{0:1,1:4,3:8,4:16}[O.button],ne={action:null,interactable:L,interaction:j,element:G,rect:Z,buttons:ie};return K.fire("auto-start:check",ne),ne.action}(this,g,m,E,c);return this.options.actionChecker?this.options.actionChecker(f,g,N,this,E,m):N},u.prototype.ignoreFrom=Dr(function(f){return this._backCompatOption("ignoreFrom",f)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),u.prototype.allowFrom=Dr(function(f){return this._backCompatOption("allowFrom",f)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),u.prototype.actionChecker=Wl,u.prototype.styleCursor=Hl}};function Ia(c,u,f,g,m){return u.testIgnoreAllow(u.options[c.name],f,g)&&u.options[c.name].enabled&&on(u,f,c,m)?c:null}function Xl(c,u,f,g,m,E,N){for(var L=0,O=g.length;L<O;L++){var j=g[L],G=m[L],K=j.getAction(u,f,c,G);if(K){var Z=Ia(K,j,G,E,N);if(Z)return{action:Z,interactable:j,element:G}}}return{action:null,interactable:null,element:null}}function Ma(c,u,f,g,m){var E=[],N=[],L=g;function O(G){E.push(G),N.push(L)}for(;w.element(L);){E=[],N=[],m.interactables.forEachMatch(L,O);var j=Xl(c,u,f,E,N,g,m);if(j.action&&!j.interactable.options[j.action.name].manualStart)return j;L=H(L)}return{action:null,interactable:null,element:null}}function La(c,u,f){var g=u.action,m=u.interactable,E=u.element;g=g||{name:null},c.interactable=m,c.element=E,Jn(c.prepared,g),c.rect=m&&g.name?m.getRect(E):null,$a(c,f),f.fire("autoStart:prepared",{interaction:c})}function on(c,u,f,g){var m=c.options,E=m[f.name].max,N=m[f.name].maxPerElement,L=g.autoStart.maxInteractions,O=0,j=0,G=0;if(!(E&&N&&L))return!1;for(var K=0,Z=g.interactions.list;K<Z.length;K++){var ie=Z[K],ne=ie.prepared.name;if(ie.interacting()&&(++O>=L||ie.interactable===c&&((j+=ne===f.name?1:0)>=E||ie.element===u&&(G++,ne===f.name&&G>=N))))return!1}return L>0}function za(c,u){return w.number(c)?(u.autoStart.maxInteractions=c,this):u.autoStart.maxInteractions}function ei(c,u,f){var g=f.autoStart.cursorElement;g&&g!==c&&(g.style.cursor=""),c.ownerDocument.documentElement.style.cursor=u,c.style.cursor=u,f.autoStart.cursorElement=u?c:null}function $a(c,u){var f=c.interactable,g=c.element,m=c.prepared;if(c.pointerType==="mouse"&&f&&f.options.styleCursor){var E="";if(m.name){var N=f.options[m.name].cursorChecker;E=w.func(N)?N(m,f,g,c._interacting):u.actions.map[m.name].getCursor(m)}ei(c.element,E||"",u)}else u.autoStart.cursorElement&&ei(u.autoStart.cursorElement,"",u)}var Yl={id:"auto-start/base",before:["actions"],install:function(c){var u=c.interactStatic,f=c.defaults;c.usePlugin(Kl),f.base.actionChecker=null,f.base.styleCursor=!0,re(f.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),u.maxInteractions=function(g){return za(g,c)},c.autoStart={maxInteractions:1/0,withinInteractionLimit:on,cursorElement:null}},listeners:{"interactions:down":function(c,u){var f=c.interaction,g=c.pointer,m=c.event,E=c.eventTarget;f.interacting()||La(f,Ma(f,g,m,E,u),u)},"interactions:move":function(c,u){(function(f,g){var m=f.interaction,E=f.pointer,N=f.event,L=f.eventTarget;m.pointerType!=="mouse"||m.pointerIsDown||m.interacting()||La(m,Ma(m,E,N,L,g),g)})(c,u),function(f,g){var m=f.interaction;if(m.pointerIsDown&&!m.interacting()&&m.pointerWasMoved&&m.prepared.name){g.fire("autoStart:before-start",f);var E=m.interactable,N=m.prepared.name;N&&E&&(E.options[N].manualStart||!on(E,m.element,m.prepared,g)?m.stop():(m.start(m.prepared,E,m.element),$a(m,g)))}}(c,u)},"interactions:stop":function(c,u){var f=c.interaction,g=f.interactable;g&&g.options.styleCursor&&ei(f.element,"",u)}},maxInteractions:za,withinInteractionLimit:on,validateAction:Ia},ti=Yl,Vl={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(c,u){var f=c.interaction,g=c.eventTarget,m=c.dx,E=c.dy;if(f.prepared.name==="drag"){var N=Math.abs(m),L=Math.abs(E),O=f.interactable.options.drag,j=O.startAxis,G=N>L?"x":N<L?"y":"xy";if(f.prepared.axis=O.lockAxis==="start"?G[0]:O.lockAxis,G!=="xy"&&j!=="xy"&&j!==G){f.prepared.name=null;for(var K=g,Z=function(ne){if(ne!==f.interactable){var oe=f.interactable.options.drag;if(!oe.manualStart&&ne.testIgnoreAllow(oe,K,g)){var he=ne.getAction(f.downPointer,f.downEvent,f,K);if(he&&he.name==="drag"&&function(ce,ye){if(!ye)return!1;var Se=ye.options.drag.startAxis;return ce==="xy"||Se==="xy"||Se===ce}(G,ne)&&ti.validateAction(he,ne,K,g,u))return ne}}};w.element(K);){var ie=u.interactables.forEachMatch(K,Z);if(ie){f.prepared.name="drag",f.interactable=ie,f.element=K;break}K=H(K)}}}}}};function ri(c){var u=c.prepared&&c.prepared.name;if(!u)return null;var f=c.interactable.options;return f[u].hold||f[u].delay}var Ql={id:"auto-start/hold",install:function(c){var u=c.defaults;c.usePlugin(ti),u.perAction.hold=0,u.perAction.delay=0},listeners:{"interactions:new":function(c){c.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(c){var u=c.interaction,f=ri(u);f>0&&(u.autoStartHoldTimer=setTimeout(function(){u.start(u.prepared,u.interactable,u.element)},f))},"interactions:move":function(c){var u=c.interaction,f=c.duplicate;u.autoStartHoldTimer&&u.pointerWasMoved&&!f&&(clearTimeout(u.autoStartHoldTimer),u.autoStartHoldTimer=null)},"autoStart:before-start":function(c){var u=c.interaction;ri(u)>0&&(u.prepared.name=null)}},getHoldDuration:ri},Zl=Ql,Jl={id:"auto-start",install:function(c){c.usePlugin(ti),c.usePlugin(Zl),c.usePlugin(Vl)}},ed=function(c){return/^(always|never|auto)$/.test(c)?(this.options.preventDefault=c,this):w.bool(c)?(this.options.preventDefault=c?"always":"never",this):this.options.preventDefault};function td(c){var u=c.interaction,f=c.event;u.interactable&&u.interactable.checkAndPreventDefault(f)}var Ta={id:"core/interactablePreventDefault",install:function(c){var u=c.Interactable;u.prototype.preventDefault=ed,u.prototype.checkAndPreventDefault=function(f){return function(g,m,E){var N=g.options.preventDefault;if(N!=="never")if(N!=="always"){if(m.events.supportsPassive&&/^touch(start|move)$/.test(E.type)){var L=x(E.target).document,O=m.getDocOptions(L);if(!O||!O.events||O.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(E.type)||w.element(E.target)&&Q(E.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||E.preventDefault()}else E.preventDefault()}(this,c,f)},c.interactions.docEvents.push({type:"dragstart",listener:function(f){for(var g=0,m=c.interactions.list;g<m.length;g++){var E=m[g];if(E.element&&(E.element===f.target||A(E.element,f.target)))return void E.interactable.checkAndPreventDefault(f)}}})},listeners:["down","move","up","cancel"].reduce(function(c,u){return c["interactions:".concat(u)]=td,c},{})};function an(c,u){if(u.phaselessTypes[c])return!0;for(var f in u.map)if(c.indexOf(f)===0&&c.substr(f.length)in u.phases)return!0;return!1}function lr(c){var u={};for(var f in c){var g=c[f];w.plainObject(g)?u[f]=lr(g):w.array(g)?u[f]=rn(g):u[f]=g}return u}var ni=function(){function c(u){a(this,c),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=u,this.result=sn(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return l(c,[{key:"start",value:function(u,f){var g,m,E=u.phase,N=this.interaction,L=function(j){var G=j.interactable.options[j.prepared.name],K=G.modifiers;return K&&K.length?K:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(Z){var ie=G[Z];return ie&&ie.enabled&&{options:ie,methods:ie._methods}}).filter(function(Z){return!!Z})}(N);this.prepareStates(L),this.startEdges=re({},N.edges),this.edges=re({},this.startEdges),this.startOffset=(g=N.rect,m=f,g?{left:m.x-g.left,top:m.y-g.top,right:g.right-m.x,bottom:g.bottom-m.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var O=this.fillArg({phase:E,pageCoords:f,preEnd:!1});return this.result=sn(),this.startAll(O),this.result=this.setAll(O)}},{key:"fillArg",value:function(u){var f=this.interaction;return u.interaction=f,u.interactable=f.interactable,u.element=f.element,u.rect||(u.rect=f.rect),u.edges||(u.edges=this.startEdges),u.startOffset=this.startOffset,u}},{key:"startAll",value:function(u){for(var f=0,g=this.states;f<g.length;f++){var m=g[f];m.methods.start&&(u.state=m,m.methods.start(u))}}},{key:"setAll",value:function(u){var f=u.phase,g=u.preEnd,m=u.skipModifiers,E=u.rect,N=u.edges;u.coords=re({},u.pageCoords),u.rect=re({},E),u.edges=re({},N);for(var L=m?this.states.slice(m):this.states,O=sn(u.coords,u.rect),j=0;j<L.length;j++){var G,K=L[j],Z=K.options,ie=re({},u.coords),ne=null;(G=K.methods)!=null&&G.set&&this.shouldDo(Z,g,f)&&(u.state=K,ne=K.methods.set(u),ge(u.edges,u.rect,{x:u.coords.x-ie.x,y:u.coords.y-ie.y})),O.eventProps.push(ne)}re(this.edges,u.edges),O.delta.x=u.coords.x-u.pageCoords.x,O.delta.y=u.coords.y-u.pageCoords.y,O.rectDelta.left=u.rect.left-E.left,O.rectDelta.right=u.rect.right-E.right,O.rectDelta.top=u.rect.top-E.top,O.rectDelta.bottom=u.rect.bottom-E.bottom;var oe=this.result.coords,he=this.result.rect;if(oe&&he){var ce=O.rect.left!==he.left||O.rect.right!==he.right||O.rect.top!==he.top||O.rect.bottom!==he.bottom;O.changed=ce||oe.x!==O.coords.x||oe.y!==O.coords.y}return O}},{key:"applyToInteraction",value:function(u){var f=this.interaction,g=u.phase,m=f.coords.cur,E=f.coords.start,N=this.result,L=this.startDelta,O=N.delta;g==="start"&&re(this.startDelta,N.delta);for(var j=0,G=[[E,L],[m,O]];j<G.length;j++){var K=G[j],Z=K[0],ie=K[1];Z.page.x+=ie.x,Z.page.y+=ie.y,Z.client.x+=ie.x,Z.client.y+=ie.y}var ne=this.result.rectDelta,oe=u.rect||f.rect;oe.left+=ne.left,oe.right+=ne.right,oe.top+=ne.top,oe.bottom+=ne.bottom,oe.width=oe.right-oe.left,oe.height=oe.bottom-oe.top}},{key:"setAndApply",value:function(u){var f=this.interaction,g=u.phase,m=u.preEnd,E=u.skipModifiers,N=this.setAll(this.fillArg({preEnd:m,phase:g,pageCoords:u.modifiedCoords||f.coords.cur.page}));if(this.result=N,!N.changed&&(!E||E<this.states.length)&&f.interacting())return!1;if(u.modifiedCoords){var L=f.coords.cur.page,O={x:u.modifiedCoords.x-L.x,y:u.modifiedCoords.y-L.y};N.coords.x+=O.x,N.coords.y+=O.y,N.delta.x+=O.x,N.delta.y+=O.y}this.applyToInteraction(u)}},{key:"beforeEnd",value:function(u){var f=u.interaction,g=u.event,m=this.states;if(m&&m.length){for(var E=!1,N=0;N<m.length;N++){var L=m[N];u.state=L;var O=L.options,j=L.methods,G=j.beforeEnd&&j.beforeEnd(u);if(G)return this.endResult=G,!1;E=E||!E&&this.shouldDo(O,!0,u.phase,!0)}E&&f.move({event:g,preEnd:!0})}}},{key:"stop",value:function(u){var f=u.interaction;if(this.states&&this.states.length){var g=re({states:this.states,interactable:f.interactable,element:f.element,rect:null},u);this.fillArg(g);for(var m=0,E=this.states;m<E.length;m++){var N=E[m];g.state=N,N.methods.stop&&N.methods.stop(g)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(u){this.states=[];for(var f=0;f<u.length;f++){var g=u[f],m=g.options,E=g.methods,N=g.name;this.states.push({options:m,methods:E,index:f,name:N})}return this.states}},{key:"restoreInteractionCoords",value:function(u){var f=u.interaction,g=f.coords,m=f.rect,E=f.modification;if(E.result){for(var N=E.startDelta,L=E.result,O=L.delta,j=L.rectDelta,G=0,K=[[g.start,N],[g.cur,O]];G<K.length;G++){var Z=K[G],ie=Z[0],ne=Z[1];ie.page.x-=ne.x,ie.page.y-=ne.y,ie.client.x-=ne.x,ie.client.y-=ne.y}m.left-=j.left,m.right-=j.right,m.top-=j.top,m.bottom-=j.bottom}}},{key:"shouldDo",value:function(u,f,g,m){return!(!u||u.enabled===!1||m&&!u.endOnly||u.endOnly&&!f||g==="start"&&!u.setStart)}},{key:"copyFrom",value:function(u){this.startOffset=u.startOffset,this.startDelta=u.startDelta,this.startEdges=u.startEdges,this.edges=u.edges,this.states=u.states.map(function(f){return lr(f)}),this.result=sn(re({},u.result.coords),re({},u.result.rect))}},{key:"destroy",value:function(){for(var u in this)this[u]=null}}]),c}();function sn(c,u){return{rect:u,coords:c,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function jt(c,u){var f=c.defaults,g={start:c.start,set:c.set,beforeEnd:c.beforeEnd,stop:c.stop},m=function(E){var N=E||{};for(var L in N.enabled=N.enabled!==!1,f)L in N||(N[L]=f[L]);var O={options:N,methods:g,name:u,enable:function(){return N.enabled=!0,O},disable:function(){return N.enabled=!1,O}};return O};return u&&typeof u=="string"&&(m._defaults=f,m._methods=g),m}function Nr(c){var u=c.iEvent,f=c.interaction.modification.result;f&&(u.modifiers=f.eventProps)}var rd={id:"modifiers/base",before:["actions"],install:function(c){c.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(c){var u=c.interaction;u.modification=new ni(u)},"interactions:before-action-start":function(c){var u=c.interaction,f=c.interaction.modification;f.start(c,u.coords.start.page),u.edges=f.edges,f.applyToInteraction(c)},"interactions:before-action-move":function(c){var u=c.interaction,f=u.modification,g=f.setAndApply(c);return u.edges=f.edges,g},"interactions:before-action-end":function(c){var u=c.interaction,f=u.modification,g=f.beforeEnd(c);return u.edges=f.startEdges,g},"interactions:action-start":Nr,"interactions:action-move":Nr,"interactions:action-end":Nr,"interactions:after-action-start":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:after-action-move":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:stop":function(c){return c.interaction.modification.stop(c)}}},Pa=rd,Oa={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},ii=function(c){d(f,c);var u=b(f);function f(g,m,E,N,L,O,j){var G;a(this,f),(G=u.call(this,g)).relatedTarget=null,G.screenX=void 0,G.screenY=void 0,G.button=void 0,G.buttons=void 0,G.ctrlKey=void 0,G.shiftKey=void 0,G.altKey=void 0,G.metaKey=void 0,G.page=void 0,G.client=void 0,G.delta=void 0,G.rect=void 0,G.x0=void 0,G.y0=void 0,G.t0=void 0,G.dt=void 0,G.duration=void 0,G.clientX0=void 0,G.clientY0=void 0,G.velocity=void 0,G.speed=void 0,G.swipe=void 0,G.axes=void 0,G.preEnd=void 0,L=L||g.element;var K=g.interactable,Z=(K&&K.options||Oa).deltaSource,ie=ue(K,L,E),ne=N==="start",oe=N==="end",he=ne?y(G):g.prevEvent,ce=ne?g.coords.start:oe?{page:he.page,client:he.client,timeStamp:g.coords.cur.timeStamp}:g.coords.cur;return G.page=re({},ce.page),G.client=re({},ce.client),G.rect=re({},g.rect),G.timeStamp=ce.timeStamp,oe||(G.page.x-=ie.x,G.page.y-=ie.y,G.client.x-=ie.x,G.client.y-=ie.y),G.ctrlKey=m.ctrlKey,G.altKey=m.altKey,G.shiftKey=m.shiftKey,G.metaKey=m.metaKey,G.button=m.button,G.buttons=m.buttons,G.target=L,G.currentTarget=L,G.preEnd=O,G.type=j||E+(N||""),G.interactable=K,G.t0=ne?g.pointers[g.pointers.length-1].downTime:he.t0,G.x0=g.coords.start.page.x-ie.x,G.y0=g.coords.start.page.y-ie.y,G.clientX0=g.coords.start.client.x-ie.x,G.clientY0=g.coords.start.client.y-ie.y,G.delta=ne||oe?{x:0,y:0}:{x:G[Z].x-he[Z].x,y:G[Z].y-he[Z].y},G.dt=g.coords.delta.timeStamp,G.duration=G.timeStamp-G.t0,G.velocity=re({},g.coords.velocity[Z]),G.speed=ze(G.velocity.x,G.velocity.y),G.swipe=oe||N==="inertiastart"?G.getSwipe():null,G}return l(f,[{key:"getSwipe",value:function(){var g=this._interaction;if(g.prevEvent.speed<600||this.timeStamp-g.prevEvent.timeStamp>150)return null;var m=180*Math.atan2(g.prevEvent.velocityY,g.prevEvent.velocityX)/Math.PI;m<0&&(m+=360);var E=112.5<=m&&m<247.5,N=202.5<=m&&m<337.5;return{up:N,down:!N&&22.5<=m&&m<157.5,left:E,right:!E&&(292.5<=m||m<67.5),angle:m,speed:g.prevEvent.speed,velocity:{x:g.prevEvent.velocityX,y:g.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),f}(ur);Object.defineProperties(ii.prototype,{pageX:{get:function(){return this.page.x},set:function(c){this.page.x=c}},pageY:{get:function(){return this.page.y},set:function(c){this.page.y=c}},clientX:{get:function(){return this.client.x},set:function(c){this.client.x=c}},clientY:{get:function(){return this.client.y},set:function(c){this.client.y=c}},dx:{get:function(){return this.delta.x},set:function(c){this.delta.x=c}},dy:{get:function(){return this.delta.y},set:function(c){this.delta.y=c}},velocityX:{get:function(){return this.velocity.x},set:function(c){this.velocity.x=c}},velocityY:{get:function(){return this.velocity.y},set:function(c){this.velocity.y=c}}});var nd=l(function c(u,f,g,m,E){a(this,c),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=u,this.pointer=f,this.event=g,this.downTime=m,this.downTarget=E}),id=function(c){return c.interactable="",c.element="",c.prepared="",c.pointerIsDown="",c.pointerWasMoved="",c._proxy="",c}({}),Ga=function(c){return c.start="",c.move="",c.end="",c.stop="",c.interacting="",c}({}),od=0,ad=function(){function c(u){var f=this,g=u.pointerType,m=u.scopeFire;a(this,c),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Dr(function(G){this.move(G)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=od++,this._scopeFire=m,this.pointerType=g;var E=this;this._proxy={};var N=function(G){Object.defineProperty(f._proxy,G,{get:function(){return E[G]}})};for(var L in id)N(L);var O=function(G){Object.defineProperty(f._proxy,G,{value:function(){return E[G].apply(E,arguments)}})};for(var j in Ga)O(j);this._scopeFire("interactions:new",{interaction:this})}return l(c,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(u,f,g){var m=this.updatePointer(u,f,g,!0),E=this.pointers[m];this._scopeFire("interactions:down",{pointer:u,event:f,eventTarget:g,pointerIndex:m,pointerInfo:E,type:"down",interaction:this})}},{key:"start",value:function(u,f,g){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(u.name==="gesture"?2:1)||!f.options[u.name].enabled)&&(Jn(this.prepared,u),this.interactable=f,this.element=g,this.rect=f.getRect(g),this.edges=this.prepared.edges?re({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(u,f,g){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(u,f,g,!1);var m,E,N=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(m=this.coords.cur.client.x-this.coords.start.client.x,E=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=ze(m,E)>this.pointerMoveTolerance);var L,O,j,G=this.getPointerIndex(u),K={pointer:u,pointerIndex:G,pointerInfo:this.pointers[G],event:f,type:"move",eventTarget:g,dx:m,dy:E,duplicate:N,interaction:this};N||(L=this.coords.velocity,O=this.coords.delta,j=Math.max(O.timeStamp/1e3,.001),L.page.x=O.page.x/j,L.page.y=O.page.y/j,L.client.x=O.client.x/j,L.client.y=O.client.y/j,L.timeStamp=j),this._scopeFire("interactions:move",K),N||this.simulation||(this.interacting()&&(K.type=null,this.move(K)),this.pointerWasMoved&&Ie(this.coords.prev,this.coords.cur))}},{key:"move",value:function(u){u&&u.event||Oe(this.coords.delta),(u=re({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},u||{})).phase="move",this._doPhase(u)}},{key:"pointerUp",value:function(u,f,g,m){var E=this.getPointerIndex(u);E===-1&&(E=this.updatePointer(u,f,g,!1));var N=/cancel$/i.test(f.type)?"cancel":"up";this._scopeFire("interactions:".concat(N),{pointer:u,pointerIndex:E,pointerInfo:this.pointers[E],event:f,eventTarget:g,type:N,curEventTarget:m,interaction:this}),this.simulation||this.end(f),this.removePointer(u,f)}},{key:"documentBlur",value:function(u){this.end(u),this._scopeFire("interactions:blur",{event:u,type:"blur",interaction:this})}},{key:"end",value:function(u){var f;this._ending=!0,u=u||this._latestPointer.event,this.interacting()&&(f=this._doPhase({event:u,interaction:this,phase:"end"})),this._ending=!1,f===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(u){var f=et(u);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:It(this.pointers,function(g){return g.id===f})}},{key:"getPointerInfo",value:function(u){return this.pointers[this.getPointerIndex(u)]}},{key:"updatePointer",value:function(u,f,g,m){var E,N,L,O=et(u),j=this.getPointerIndex(u),G=this.pointers[j];return m=m!==!1&&(m||/(down|start)$/i.test(f.type)),G?G.pointer=u:(G=new nd(O,u,f,null,null),j=this.pointers.length,this.pointers.push(G)),tt(this.coords.cur,this.pointers.map(function(K){return K.pointer}),this._now()),E=this.coords.delta,N=this.coords.prev,L=this.coords.cur,E.page.x=L.page.x-N.page.x,E.page.y=L.page.y-N.page.y,E.client.x=L.client.x-N.client.x,E.client.y=L.client.y-N.client.y,E.timeStamp=L.timeStamp-N.timeStamp,m&&(this.pointerIsDown=!0,G.downTime=this.coords.cur.timeStamp,G.downTarget=g,Te(this.downPointer,u),this.interacting()||(Ie(this.coords.start,this.coords.cur),Ie(this.coords.prev,this.coords.cur),this.downEvent=f,this.pointerWasMoved=!1)),this._updateLatestPointer(u,f,g),this._scopeFire("interactions:update-pointer",{pointer:u,event:f,eventTarget:g,down:m,pointerInfo:G,pointerIndex:j,interaction:this}),j}},{key:"removePointer",value:function(u,f){var g=this.getPointerIndex(u);if(g!==-1){var m=this.pointers[g];this._scopeFire("interactions:remove-pointer",{pointer:u,event:f,eventTarget:null,pointerIndex:g,pointerInfo:m,interaction:this}),this.pointers.splice(g,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(u,f,g){this._latestPointer.pointer=u,this._latestPointer.event=f,this._latestPointer.eventTarget=g}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(u,f,g,m){return new ii(this,u,this.prepared.name,f,this.element,g,m)}},{key:"_fireEvent",value:function(u){var f;(f=this.interactable)==null||f.fire(u),(!this.prevEvent||u.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=u)}},{key:"_doPhase",value:function(u){var f=u.event,g=u.phase,m=u.preEnd,E=u.type,N=this.rect;if(N&&g==="move"&&(ge(this.edges,N,this.coords.delta[this.interactable.options.deltaSource]),N.width=N.right-N.left,N.height=N.bottom-N.top),this._scopeFire("interactions:before-action-".concat(g),u)===!1)return!1;var L=u.iEvent=this._createPreparedEvent(f,g,m,E);return this._scopeFire("interactions:action-".concat(g),u),g==="start"&&(this.prevEvent=L),this._fireEvent(L),this._scopeFire("interactions:after-action-".concat(g),u),!0}},{key:"_now",value:function(){return Date.now()}}]),c}();function Ra(c){qa(c.interaction)}function qa(c){if(!function(f){return!(!f.offset.pending.x&&!f.offset.pending.y)}(c))return!1;var u=c.offset.pending;return oi(c.coords.cur,u),oi(c.coords.delta,u),ge(c.edges,c.rect,u),u.x=0,u.y=0,!0}function sd(c){var u=c.x,f=c.y;this.offset.pending.x+=u,this.offset.pending.y+=f,this.offset.total.x+=u,this.offset.total.y+=f}function oi(c,u){var f=c.page,g=c.client,m=u.x,E=u.y;f.x+=m,f.y+=E,g.x+=m,g.y+=E}Ga.offsetBy="";var ud={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(c){c.Interaction.prototype.offsetBy=sd},listeners:{"interactions:new":function(c){c.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(c){return function(u){u.pointerIsDown&&(oi(u.coords.cur,u.offset.total),u.offset.pending.x=0,u.offset.pending.y=0)}(c.interaction)},"interactions:before-action-start":Ra,"interactions:before-action-move":Ra,"interactions:before-action-end":function(c){var u=c.interaction;if(qa(u))return u.move({offset:!0}),u.end(),!1},"interactions:stop":function(c){var u=c.interaction;u.offset.total.x=0,u.offset.total.y=0,u.offset.pending.x=0,u.offset.pending.y=0}}},Fa=ud,cd=function(){function c(u){a(this,c),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=u}return l(c,[{key:"start",value:function(u){var f=this.interaction,g=un(f);if(!g||!g.enabled)return!1;var m=f.coords.velocity.client,E=ze(m.x,m.y),N=this.modification||(this.modification=new ni(f));if(N.copyFrom(f.modification),this.t0=f._now(),this.allowResume=g.allowResume,this.v0=E,this.currentOffset={x:0,y:0},this.startCoords=f.coords.cur.page,this.modifierArg=N.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-f.coords.cur.timeStamp<50&&E>g.minSpeed&&E>g.endSpeed)this.startInertia();else{if(N.result=N.setAll(this.modifierArg),!N.result.changed)return!1;this.startSmoothEnd()}return f.modification.result.rect=null,f.offsetBy(this.targetOffset),f._doPhase({interaction:f,event:u,phase:"inertiastart"}),f.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),f.modification.result.rect=null,this.active=!0,f.simulation=this,!0}},{key:"startInertia",value:function(){var u=this,f=this.interaction.coords.velocity.client,g=un(this.interaction),m=g.resistance,E=-Math.log(g.endSpeed/this.v0)/m;this.targetOffset={x:(f.x-E)/m,y:(f.y-E)/m},this.te=E,this.lambda_v0=m/this.v0,this.one_ve_v0=1-g.endSpeed/this.v0;var N=this.modification,L=this.modifierArg;L.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},N.result=N.setAll(L),N.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+N.result.delta.x,y:this.targetOffset.y+N.result.delta.y}),this.onNextFrame(function(){return u.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var u=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return u.smoothEndTick()})}},{key:"onNextFrame",value:function(u){var f=this;this.timeout=Ft.request(function(){f.active&&u()})}},{key:"inertiaTick",value:function(){var u,f,g,m,E,N,L,O=this,j=this.interaction,G=un(j).resistance,K=(j._now()-this.t0)/1e3;if(K<this.te){var Z,ie=1-(Math.exp(-G*K)-this.lambda_v0)/this.one_ve_v0;this.isModified?(u=0,f=0,g=this.targetOffset.x,m=this.targetOffset.y,E=this.modifiedOffset.x,N=this.modifiedOffset.y,Z={x:ja(L=ie,u,g,E),y:ja(L,f,m,N)}):Z={x:this.targetOffset.x*ie,y:this.targetOffset.y*ie};var ne={x:Z.x-this.currentOffset.x,y:Z.y-this.currentOffset.y};this.currentOffset.x+=ne.x,this.currentOffset.y+=ne.y,j.offsetBy(ne),j.move(),this.onNextFrame(function(){return O.inertiaTick()})}else j.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var u=this,f=this.interaction,g=f._now()-this.t0,m=un(f).smoothEndDuration;if(g<m){var E={x:Ba(g,0,this.targetOffset.x,m),y:Ba(g,0,this.targetOffset.y,m)},N={x:E.x-this.currentOffset.x,y:E.y-this.currentOffset.y};this.currentOffset.x+=N.x,this.currentOffset.y+=N.y,f.offsetBy(N),f.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return u.smoothEndTick()})}else f.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(u){var f=u.pointer,g=u.event,m=u.eventTarget,E=this.interaction;E.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),E.updatePointer(f,g,m,!0),E._doPhase({interaction:E,event:g,phase:"resume"}),Ie(E.coords.prev,E.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Ft.cancel(this.timeout)}}]),c}();function un(c){var u=c.interactable,f=c.prepared;return u&&u.options&&f.name&&u.options[f.name].inertia}var ld={id:"inertia",before:["modifiers","actions"],install:function(c){var u=c.defaults;c.usePlugin(Fa),c.usePlugin(Pa),c.actions.phases.inertiastart=!0,c.actions.phases.resume=!0,u.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(c){var u=c.interaction;u.inertia=new cd(u)},"interactions:before-action-end":function(c){var u=c.interaction,f=c.event;return(!u._interacting||u.simulation||!u.inertia.start(f))&&null},"interactions:down":function(c){var u=c.interaction,f=c.eventTarget,g=u.inertia;if(g.active)for(var m=f;w.element(m);){if(m===u.element){g.resume(c);break}m=H(m)}},"interactions:stop":function(c){var u=c.interaction.inertia;u.active&&u.stop()},"interactions:before-action-resume":function(c){var u=c.interaction.modification;u.stop(c),u.start(c,c.interaction.coords.cur.page),u.applyToInteraction(c)},"interactions:before-action-inertiastart":function(c){return c.interaction.modification.setAndApply(c)},"interactions:action-resume":Nr,"interactions:action-inertiastart":Nr,"interactions:after-action-inertiastart":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:after-action-resume":function(c){return c.interaction.modification.restoreInteractionCoords(c)}}};function ja(c,u,f,g){var m=1-c;return m*m*u+2*m*c*f+c*c*g}function Ba(c,u,f,g){return-f*(c/=g)*(c-2)+u}var dd=ld;function Ua(c,u){for(var f=0;f<u.length;f++){var g=u[f];if(c.immediatePropagationStopped)break;g(c)}}var Ha=function(){function c(u){a(this,c),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=re({},u||{})}return l(c,[{key:"fire",value:function(u){var f,g=this.global;(f=this.types[u.type])&&Ua(u,f),!u.propagationStopped&&g&&(f=g[u.type])&&Ua(u,f)}},{key:"on",value:function(u,f){var g=V(u,f);for(u in g)this.types[u]=tn(this.types[u]||[],g[u])}},{key:"off",value:function(u,f){var g=V(u,f);for(u in g){var m=this.types[u];if(m&&m.length)for(var E=0,N=g[u];E<N.length;E++){var L=N[E],O=m.indexOf(L);O!==-1&&m.splice(O,1)}}}},{key:"getRect",value:function(u){return null}}]),c}(),hd=function(){function c(u){a(this,c),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=u,Te(this,u)}return l(c,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),c}();function Ir(c){return w.object(c)?{capture:!!c.capture,passive:!!c.passive}:{capture:!!c,passive:!1}}function cn(c,u){return c===u||(typeof c=="boolean"?!!u.capture===c&&!u.passive:!!c.capture==!!u.capture&&!!c.passive==!!u.passive)}var fd={id:"events",install:function(c){var u,f=[],g={},m=[],E={add:N,remove:L,addDelegate:function(G,K,Z,ie,ne){var oe=Ir(ne);if(!g[Z]){g[Z]=[];for(var he=0;he<m.length;he++){var ce=m[he];N(ce,Z,O),N(ce,Z,j,!0)}}var ye=g[Z],Se=ht(ye,function(Ce){return Ce.selector===G&&Ce.context===K});Se||(Se={selector:G,context:K,listeners:[]},ye.push(Se)),Se.listeners.push({func:ie,options:oe})},removeDelegate:function(G,K,Z,ie,ne){var oe,he=Ir(ne),ce=g[Z],ye=!1;if(ce)for(oe=ce.length-1;oe>=0;oe--){var Se=ce[oe];if(Se.selector===G&&Se.context===K){for(var Ce=Se.listeners,xe=Ce.length-1;xe>=0;xe--){var Ae=Ce[xe];if(Ae.func===ie&&cn(Ae.options,he)){Ce.splice(xe,1),Ce.length||(ce.splice(oe,1),L(K,Z,O),L(K,Z,j,!0)),ye=!0;break}}if(ye)break}}},delegateListener:O,delegateUseCapture:j,delegatedEvents:g,documents:m,targets:f,supportsOptions:!1,supportsPassive:!1};function N(G,K,Z,ie){if(G.addEventListener){var ne=Ir(ie),oe=ht(f,function(he){return he.eventTarget===G});oe||(oe={eventTarget:G,events:{}},f.push(oe)),oe.events[K]||(oe.events[K]=[]),ht(oe.events[K],function(he){return he.func===Z&&cn(he.options,ne)})||(G.addEventListener(K,Z,E.supportsOptions?ne:ne.capture),oe.events[K].push({func:Z,options:ne}))}}function L(G,K,Z,ie){if(G.addEventListener&&G.removeEventListener){var ne=It(f,function(We){return We.eventTarget===G}),oe=f[ne];if(oe&&oe.events)if(K!=="all"){var he=!1,ce=oe.events[K];if(ce){if(Z==="all"){for(var ye=ce.length-1;ye>=0;ye--){var Se=ce[ye];L(G,K,Se.func,Se.options)}return}for(var Ce=Ir(ie),xe=0;xe<ce.length;xe++){var Ae=ce[xe];if(Ae.func===Z&&cn(Ae.options,Ce)){G.removeEventListener(K,Z,E.supportsOptions?Ce:Ce.capture),ce.splice(xe,1),ce.length===0&&(delete oe.events[K],he=!0);break}}}he&&!Object.keys(oe.events).length&&f.splice(ne,1)}else for(K in oe.events)oe.events.hasOwnProperty(K)&&L(G,K,"all")}}function O(G,K){for(var Z=Ir(K),ie=new hd(G),ne=g[G.type],oe=en(G)[0],he=oe;w.element(he);){for(var ce=0;ce<ne.length;ce++){var ye=ne[ce],Se=ye.selector,Ce=ye.context;if(Q(he,Se)&&A(Ce,oe)&&A(Ce,he)){var xe=ye.listeners;ie.currentTarget=he;for(var Ae=0;Ae<xe.length;Ae++){var We=xe[Ae];cn(We.options,Z)&&We.func(ie)}}}he=H(he)}}function j(G){return O(G,!0)}return(u=c.document)==null||u.createElement("div").addEventListener("test",null,{get capture(){return E.supportsOptions=!0},get passive(){return E.supportsPassive=!0}}),c.events=E,E}},ai={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(c){for(var u=0,f=ai.methodOrder;u<f.length;u++){var g=f[u],m=ai[g](c);if(m)return m}return null},simulationResume:function(c){var u=c.pointerType,f=c.eventType,g=c.eventTarget,m=c.scope;if(!/down|start/i.test(f))return null;for(var E=0,N=m.interactions.list;E<N.length;E++){var L=N[E],O=g;if(L.simulation&&L.simulation.allowResume&&L.pointerType===u)for(;O;){if(O===L.element)return L;O=H(O)}}return null},mouseOrPen:function(c){var u,f=c.pointerId,g=c.pointerType,m=c.eventType,E=c.scope;if(g!=="mouse"&&g!=="pen")return null;for(var N=0,L=E.interactions.list;N<L.length;N++){var O=L[N];if(O.pointerType===g){if(O.simulation&&!Wa(O,f))continue;if(O.interacting())return O;u||(u=O)}}if(u)return u;for(var j=0,G=E.interactions.list;j<G.length;j++){var K=G[j];if(!(K.pointerType!==g||/down/i.test(m)&&K.simulation))return K}return null},hasPointer:function(c){for(var u=c.pointerId,f=0,g=c.scope.interactions.list;f<g.length;f++){var m=g[f];if(Wa(m,u))return m}return null},idle:function(c){for(var u=c.pointerType,f=0,g=c.scope.interactions.list;f<g.length;f++){var m=g[f];if(m.pointers.length===1){var E=m.interactable;if(E&&(!E.options.gesture||!E.options.gesture.enabled))continue}else if(m.pointers.length>=2)continue;if(!m.interacting()&&u===m.pointerType)return m}return null}};function Wa(c,u){return c.pointers.some(function(f){return f.id===u})}var pd=ai,si=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Ka(c,u){return function(f){var g=u.interactions.list,m=sr(f),E=en(f),N=E[0],L=E[1],O=[];if(/^touch/.test(f.type)){u.prevTouchTime=u.now();for(var j=0,G=f.changedTouches;j<G.length;j++){var K=G[j],Z={pointer:K,pointerId:et(K),pointerType:m,eventType:f.type,eventTarget:N,curEventTarget:L,scope:u},ie=Xa(Z);O.push([Z.pointer,Z.eventTarget,Z.curEventTarget,ie])}}else{var ne=!1;if(!F.supportsPointerEvent&&/mouse/.test(f.type)){for(var oe=0;oe<g.length&&!ne;oe++)ne=g[oe].pointerType!=="mouse"&&g[oe].pointerIsDown;ne=ne||u.now()-u.prevTouchTime<500||f.timeStamp===0}if(!ne){var he={pointer:f,pointerId:et(f),pointerType:m,eventType:f.type,curEventTarget:L,eventTarget:N,scope:u},ce=Xa(he);O.push([he.pointer,he.eventTarget,he.curEventTarget,ce])}}for(var ye=0;ye<O.length;ye++){var Se=O[ye],Ce=Se[0],xe=Se[1],Ae=Se[2];Se[3][c](Ce,f,xe,Ae)}}}function Xa(c){var u=c.pointerType,f=c.scope,g={interaction:pd.search(c),searchDetails:c};return f.fire("interactions:find",g),g.interaction||f.interactions.new({pointerType:u})}function ui(c,u){var f=c.doc,g=c.scope,m=c.options,E=g.interactions.docEvents,N=g.events,L=N[u];for(var O in g.browser.isIOS&&!m.events&&(m.events={passive:!1}),N.delegatedEvents)L(f,O,N.delegateListener),L(f,O,N.delegateUseCapture,!0);for(var j=m&&m.events,G=0;G<E.length;G++){var K=E[G];L(f,K.type,K.listener,j)}}var gd={id:"core/interactions",install:function(c){for(var u={},f=0;f<si.length;f++){var g=si[f];u[g]=Ka(g,c)}var m,E=F.pEventTypes;function N(){for(var L=0,O=c.interactions.list;L<O.length;L++){var j=O[L];if(j.pointerIsDown&&j.pointerType==="touch"&&!j._interacting)for(var G=function(){var ie=Z[K];c.documents.some(function(ne){return A(ne.doc,ie.downTarget)})||j.removePointer(ie.pointer,ie.event)},K=0,Z=j.pointers;K<Z.length;K++)G()}}(m=te.PointerEvent?[{type:E.down,listener:N},{type:E.down,listener:u.pointerDown},{type:E.move,listener:u.pointerMove},{type:E.up,listener:u.pointerUp},{type:E.cancel,listener:u.pointerUp}]:[{type:"mousedown",listener:u.pointerDown},{type:"mousemove",listener:u.pointerMove},{type:"mouseup",listener:u.pointerUp},{type:"touchstart",listener:N},{type:"touchstart",listener:u.pointerDown},{type:"touchmove",listener:u.pointerMove},{type:"touchend",listener:u.pointerUp},{type:"touchcancel",listener:u.pointerUp}]).push({type:"blur",listener:function(L){for(var O=0,j=c.interactions.list;O<j.length;O++)j[O].documentBlur(L)}}),c.prevTouchTime=0,c.Interaction=function(L){d(j,L);var O=b(j);function j(){return a(this,j),O.apply(this,arguments)}return l(j,[{key:"pointerMoveTolerance",get:function(){return c.interactions.pointerMoveTolerance},set:function(G){c.interactions.pointerMoveTolerance=G}},{key:"_now",value:function(){return c.now()}}]),j}(ad),c.interactions={list:[],new:function(L){L.scopeFire=function(j,G){return c.fire(j,G)};var O=new c.Interaction(L);return c.interactions.list.push(O),O},listeners:u,docEvents:m,pointerMoveTolerance:1},c.usePlugin(Ta)},listeners:{"scope:add-document":function(c){return ui(c,"add")},"scope:remove-document":function(c){return ui(c,"remove")},"interactable:unset":function(c,u){for(var f=c.interactable,g=u.interactions.list.length-1;g>=0;g--){var m=u.interactions.list[g];m.interactable===f&&(m.stop(),u.fire("interactions:destroy",{interaction:m}),m.destroy(),u.interactions.list.length>2&&u.interactions.list.splice(g,1))}}},onDocSignal:ui,doOnInteractions:Ka,methodNames:si},vd=gd,Bt=function(c){return c[c.On=0]="On",c[c.Off=1]="Off",c}(Bt||{}),yd=function(){function c(u,f,g,m){a(this,c),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new Ha,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=f.actions,this.target=u,this._context=f.context||g,this._win=x(Ee(u)?this._context:u),this._doc=this._win.document,this._scopeEvents=m,this.set(f)}return l(c,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(u,f){return w.func(f.onstart)&&this.on("".concat(u,"start"),f.onstart),w.func(f.onmove)&&this.on("".concat(u,"move"),f.onmove),w.func(f.onend)&&this.on("".concat(u,"end"),f.onend),w.func(f.oninertiastart)&&this.on("".concat(u,"inertiastart"),f.oninertiastart),this}},{key:"updatePerActionListeners",value:function(u,f,g){var m,E=this,N=(m=this._actions.map[u])==null?void 0:m.filterEventType,L=function(O){return(N==null||N(O))&&an(O,E._actions)};(w.array(f)||w.object(f))&&this._onOff(Bt.Off,u,f,void 0,L),(w.array(g)||w.object(g))&&this._onOff(Bt.On,u,g,void 0,L)}},{key:"setPerAction",value:function(u,f){var g=this._defaults;for(var m in f){var E=m,N=this.options[u],L=f[E];E==="listeners"&&this.updatePerActionListeners(u,N.listeners,L),w.array(L)?N[E]=rn(L):w.plainObject(L)?(N[E]=re(N[E]||{},lr(L)),w.object(g.perAction[E])&&"enabled"in g.perAction[E]&&(N[E].enabled=L.enabled!==!1)):w.bool(L)&&w.object(g.perAction[E])?N[E].enabled=L:N[E]=L}}},{key:"getRect",value:function(u){return u=u||(w.element(this.target)?this.target:null),w.string(this.target)&&(u=u||this._context.querySelector(this.target)),fe(u)}},{key:"rectChecker",value:function(u){var f=this;return w.func(u)?(this.getRect=function(g){var m=re({},u.apply(f,g));return"width"in m||(m.width=m.right-m.left,m.height=m.bottom-m.top),m},this):u===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(u,f){if(Ee(f)||w.object(f)){for(var g in this.options[u]=f,this._actions.map)this.options[g][u]=f;return this}return this.options[u]}},{key:"origin",value:function(u){return this._backCompatOption("origin",u)}},{key:"deltaSource",value:function(u){return u==="page"||u==="client"?(this.options.deltaSource=u,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var u=this.target;return w.string(u)?Array.from(this._context.querySelectorAll(u)):w.func(u)&&u.getAllElements?u.getAllElements():w.element(u)?[u]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(u){return this._context===u.ownerDocument||A(this._context,u)}},{key:"testIgnoreAllow",value:function(u,f,g){return!this.testIgnore(u.ignoreFrom,f,g)&&this.testAllow(u.allowFrom,f,g)}},{key:"testAllow",value:function(u,f,g){return!u||!!w.element(g)&&(w.string(u)?X(g,u,f):!!w.element(u)&&A(u,g))}},{key:"testIgnore",value:function(u,f,g){return!(!u||!w.element(g))&&(w.string(u)?X(g,u,f):!!w.element(u)&&A(u,g))}},{key:"fire",value:function(u){return this.events.fire(u),this}},{key:"_onOff",value:function(u,f,g,m,E){w.object(f)&&!w.array(f)&&(m=g,g=null);var N=V(f,g,E);for(var L in N){L==="wheel"&&(L=F.wheelEvent);for(var O=0,j=N[L];O<j.length;O++){var G=j[O];an(L,this._actions)?this.events[u===Bt.On?"on":"off"](L,G):w.string(this.target)?this._scopeEvents[u===Bt.On?"addDelegate":"removeDelegate"](this.target,this._context,L,G,m):this._scopeEvents[u===Bt.On?"add":"remove"](this.target,L,G,m)}}return this}},{key:"on",value:function(u,f,g){return this._onOff(Bt.On,u,f,g)}},{key:"off",value:function(u,f,g){return this._onOff(Bt.Off,u,f,g)}},{key:"set",value:function(u){var f=this._defaults;for(var g in w.object(u)||(u={}),this.options=lr(f.base),this._actions.methodDict){var m=g,E=this._actions.methodDict[m];this.options[m]={},this.setPerAction(m,re(re({},f.perAction),f.actions[m])),this[E](u[m])}for(var N in u)N!=="getRect"?w.func(this[N])&&this[N](u[N]):this.rectChecker(u.getRect);return this}},{key:"unset",value:function(){if(w.string(this.target))for(var u in this._scopeEvents.delegatedEvents)for(var f=this._scopeEvents.delegatedEvents[u],g=f.length-1;g>=0;g--){var m=f[g],E=m.selector,N=m.context,L=m.listeners;E===this.target&&N===this._context&&f.splice(g,1);for(var O=L.length-1;O>=0;O--)this._scopeEvents.removeDelegate(this.target,this._context,u,L[O][0],L[O][1])}else this._scopeEvents.remove(this.target,"all")}}]),c}(),md=function(){function c(u){var f=this;a(this,c),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=u,u.addListeners({"interactable:unset":function(g){var m=g.interactable,E=m.target,N=w.string(E)?f.selectorMap[E]:E[f.scope.id],L=It(N,function(O){return O===m});N.splice(L,1)}})}return l(c,[{key:"new",value:function(u,f){f=re(f||{},{actions:this.scope.actions});var g=new this.scope.Interactable(u,f,this.scope.document,this.scope.events);return this.scope.addDocument(g._doc),this.list.push(g),w.string(u)?(this.selectorMap[u]||(this.selectorMap[u]=[]),this.selectorMap[u].push(g)):(g.target[this.scope.id]||Object.defineProperty(u,this.scope.id,{value:[],configurable:!0}),u[this.scope.id].push(g)),this.scope.fire("interactable:new",{target:u,options:f,interactable:g,win:this.scope._win}),g}},{key:"getExisting",value:function(u,f){var g=f&&f.context||this.scope.document,m=w.string(u),E=m?this.selectorMap[u]:u[this.scope.id];if(E)return ht(E,function(N){return N._context===g&&(m||N.inContext(u))})}},{key:"forEachMatch",value:function(u,f){for(var g=0,m=this.list;g<m.length;g++){var E=m[g],N=void 0;if((w.string(E.target)?w.element(u)&&Q(u,E.target):u===E.target)&&E.inContext(u)&&(N=f(E)),N!==void 0)return N}}}]),c}(),bd=function(){function c(){var u=this;a(this,c),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=F,this.defaults=lr(Oa),this.Eventable=Ha,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(g){var m=function E(N,L){var O=g.interactables.getExisting(N,L);return O||((O=g.interactables.new(N,L)).events.global=E.globalEvents),O};return m.getPointerAverage=Ge,m.getTouchBBox=it,m.getTouchDistance=ot,m.getTouchAngle=Yt,m.getElementRect=fe,m.getElementClientRect=se,m.matchesSelector=Q,m.closest=B,m.globalEvents={},m.version="1.10.27",m.scope=g,m.use=function(E,N){return this.scope.usePlugin(E,N),this},m.isSet=function(E,N){return!!this.scope.interactables.get(E,N&&N.context)},m.on=Dr(function(E,N,L){if(w.string(E)&&E.search(" ")!==-1&&(E=E.trim().split(/ +/)),w.array(E)){for(var O=0,j=E;O<j.length;O++){var G=j[O];this.on(G,N,L)}return this}if(w.object(E)){for(var K in E)this.on(K,E[K],N);return this}return an(E,this.scope.actions)?this.globalEvents[E]?this.globalEvents[E].push(N):this.globalEvents[E]=[N]:this.scope.events.add(this.scope.document,E,N,{options:L}),this},"The interact.on() method is being deprecated"),m.off=Dr(function(E,N,L){if(w.string(E)&&E.search(" ")!==-1&&(E=E.trim().split(/ +/)),w.array(E)){for(var O=0,j=E;O<j.length;O++){var G=j[O];this.off(G,N,L)}return this}if(w.object(E)){for(var K in E)this.off(K,E[K],N);return this}var Z;return an(E,this.scope.actions)?E in this.globalEvents&&(Z=this.globalEvents[E].indexOf(N))!==-1&&this.globalEvents[E].splice(Z,1):this.scope.events.remove(this.scope.document,E,N,L),this},"The interact.off() method is being deprecated"),m.debug=function(){return this.scope},m.supportsTouch=function(){return F.supportsTouch},m.supportsPointerEvent=function(){return F.supportsPointerEvent},m.stop=function(){for(var E=0,N=this.scope.interactions.list;E<N.length;E++)N[E].stop();return this},m.pointerMoveTolerance=function(E){return w.number(E)?(this.scope.interactions.pointerMoveTolerance=E,this):this.scope.interactions.pointerMoveTolerance},m.addDocument=function(E,N){this.scope.addDocument(E,N)},m.removeDocument=function(E){this.scope.removeDocument(E)},m}(this),this.InteractEvent=ii,this.Interactable=void 0,this.interactables=new md(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(g){return u.removeDocument(g.target)};var f=this;this.Interactable=function(g){d(E,g);var m=b(E);function E(){return a(this,E),m.apply(this,arguments)}return l(E,[{key:"_defaults",get:function(){return f.defaults}},{key:"set",value:function(N){return _(p(E.prototype),"set",this).call(this,N),f.fire("interactable:set",{options:N,interactable:this}),this}},{key:"unset",value:function(){_(p(E.prototype),"unset",this).call(this);var N=f.interactables.list.indexOf(this);N<0||(f.interactables.list.splice(N,1),f.fire("interactable:unset",{interactable:this}))}}]),E}(yd)}return l(c,[{key:"addListeners",value:function(u,f){this.listenerMaps.push({id:f,map:u})}},{key:"fire",value:function(u,f){for(var g=0,m=this.listenerMaps;g<m.length;g++){var E=m[g].map[u];if(E&&E(f,this,u)===!1)return!1}}},{key:"init",value:function(u){return this.isInitialized?this:function(f,g){return f.isInitialized=!0,w.window(g)&&M(g),te.init(g),F.init(g),Ft.init(g),f.window=g,f.document=g.document,f.usePlugin(vd),f.usePlugin(fd),f}(this,u)}},{key:"pluginIsInstalled",value:function(u){var f=u.id;return f?!!this._plugins.map[f]:this._plugins.list.indexOf(u)!==-1}},{key:"usePlugin",value:function(u,f){if(!this.isInitialized)return this;if(this.pluginIsInstalled(u))return this;if(u.id&&(this._plugins.map[u.id]=u),this._plugins.list.push(u),u.install&&u.install(this,f),u.listeners&&u.before){for(var g=0,m=this.listenerMaps.length,E=u.before.reduce(function(L,O){return L[O]=!0,L[Ya(O)]=!0,L},{});g<m;g++){var N=this.listenerMaps[g].id;if(N&&(E[N]||E[Ya(N)]))break}this.listenerMaps.splice(g,0,{id:u.id,map:u.listeners})}else u.listeners&&this.listenerMaps.push({id:u.id,map:u.listeners});return this}},{key:"addDocument",value:function(u,f){if(this.getDocIndex(u)!==-1)return!1;var g=x(u);f=f?re({},f):{},this.documents.push({doc:u,options:f}),this.events.documents.push(u),u!==this.document&&this.events.add(g,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:u,window:g,scope:this,options:f})}},{key:"removeDocument",value:function(u){var f=this.getDocIndex(u),g=x(u),m=this.documents[f].options;this.events.remove(g,"unload",this.onWindowUnload),this.documents.splice(f,1),this.events.documents.splice(f,1),this.fire("scope:remove-document",{doc:u,window:g,scope:this,options:m})}},{key:"getDocIndex",value:function(u){for(var f=0;f<this.documents.length;f++)if(this.documents[f].doc===u)return f;return-1}},{key:"getDocOptions",value:function(u){var f=this.getDocIndex(u);return f===-1?null:this.documents[f].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),c}();function Ya(c){return c&&c.replace(/\/.*$/,"")}var Va=new bd,He=Va.interactStatic,wd=typeof globalThis<"u"?globalThis:window;Va.init(wd);var Ed=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(c){var u=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(g){var m=g[0],E=g[1];return m in c||E in c}),f=function(g,m){for(var E=c.range,N=c.limits,L=N===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:N,O=c.offset,j=O===void 0?{x:0,y:0}:O,G={range:E,grid:c,x:null,y:null},K=0;K<u.length;K++){var Z=u[K],ie=Z[0],ne=Z[1],oe=Math.round((g-j.x)/c[ie]),he=Math.round((m-j.y)/c[ne]);G[ie]=Math.max(L.left,Math.min(L.right,oe*c[ie]+j.x)),G[ne]=Math.max(L.top,Math.min(L.bottom,he*c[ne]+j.y))}return G};return f.grid=c,f.coordFields=u,f}}),xd={id:"snappers",install:function(c){var u=c.interactStatic;u.snappers=re(u.snappers||{},Ed),u.createSnapGrid=u.snappers.grid}},_d=xd,Sd={start:function(c){var u=c.state,f=c.rect,g=c.edges,m=c.pageCoords,E=u.options,N=E.ratio,L=E.enabled,O=u.options,j=O.equalDelta,G=O.modifiers;N==="preserve"&&(N=f.width/f.height),u.startCoords=re({},m),u.startRect=re({},f),u.ratio=N,u.equalDelta=j;var K=u.linkedEdges={top:g.top||g.left&&!g.bottom,left:g.left||g.top&&!g.right,bottom:g.bottom||g.right&&!g.top,right:g.right||g.bottom&&!g.left};if(u.xIsPrimaryAxis=!(!g.left&&!g.right),u.equalDelta){var Z=(K.left?1:-1)*(K.top?1:-1);u.edgeSign={x:Z,y:Z}}else u.edgeSign={x:K.left?-1:1,y:K.top?-1:1};if(L!==!1&&re(g,K),G!=null&&G.length){var ie=new ni(c.interaction);ie.copyFrom(c.interaction.modification),ie.prepareStates(G),u.subModification=ie,ie.startAll(r({},c))}},set:function(c){var u=c.state,f=c.rect,g=c.coords,m=u.linkedEdges,E=re({},g),N=u.equalDelta?Ad:kd;if(re(c.edges,m),N(u,u.xIsPrimaryAxis,g,f),!u.subModification)return null;var L=re({},f);ge(m,L,{x:g.x-E.x,y:g.y-E.y});var O=u.subModification.setAll(r(r({},c),{},{rect:L,edges:m,pageCoords:g,prevCoords:g,prevRect:L})),j=O.delta;return O.changed&&(N(u,Math.abs(j.x)>Math.abs(j.y),O.coords,O.rect),re(g,O.coords)),O.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Ad(c,u,f){var g=c.startCoords,m=c.edgeSign;u?f.y=g.y+(f.x-g.x)*m.y:f.x=g.x+(f.y-g.y)*m.x}function kd(c,u,f,g){var m=c.startRect,E=c.startCoords,N=c.ratio,L=c.edgeSign;if(u){var O=g.width/N;f.y=E.y+(O-m.height)*L.y}else{var j=g.height*N;f.x=E.x+(j-m.width)*L.x}}var Cd=jt(Sd,"aspectRatio"),Qa=function(){};Qa._defaults={};var ln=Qa;function Zt(c,u,f){return w.func(c)?ve(c,u.interactable,u.element,[f.x,f.y,u]):ve(c,u.interactable,u.element)}var dn={start:function(c){var u=c.rect,f=c.startOffset,g=c.state,m=c.interaction,E=c.pageCoords,N=g.options,L=N.elementRect,O=re({left:0,top:0,right:0,bottom:0},N.offset||{});if(u&&L){var j=Zt(N.restriction,m,E);if(j){var G=j.right-j.left-u.width,K=j.bottom-j.top-u.height;G<0&&(O.left+=G,O.right+=G),K<0&&(O.top+=K,O.bottom+=K)}O.left+=f.left-u.width*L.left,O.top+=f.top-u.height*L.top,O.right+=f.right-u.width*(1-L.right),O.bottom+=f.bottom-u.height*(1-L.bottom)}g.offset=O},set:function(c){var u=c.coords,f=c.interaction,g=c.state,m=g.options,E=g.offset,N=Zt(m.restriction,f,u);if(N){var L=function(O){return!O||"left"in O&&"top"in O||((O=re({},O)).left=O.x||0,O.top=O.y||0,O.right=O.right||O.left+O.width,O.bottom=O.bottom||O.top+O.height),O}(N);u.x=Math.max(Math.min(L.right-E.right,u.x),L.left+E.left),u.y=Math.max(Math.min(L.bottom-E.bottom,u.y),L.top+E.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},Dd=jt(dn,"restrict"),Za={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Ja={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function es(c,u){for(var f=0,g=["top","left","bottom","right"];f<g.length;f++){var m=g[f];m in c||(c[m]=u[m])}return c}var Mr={noInner:Za,noOuter:Ja,start:function(c){var u,f=c.interaction,g=c.startOffset,m=c.state,E=m.options;E&&(u=me(Zt(E.offset,f,f.coords.start.page))),u=u||{x:0,y:0},m.offset={top:u.y+g.top,left:u.x+g.left,bottom:u.y-g.bottom,right:u.x-g.right}},set:function(c){var u=c.coords,f=c.edges,g=c.interaction,m=c.state,E=m.offset,N=m.options;if(f){var L=re({},u),O=Zt(N.inner,g,L)||{},j=Zt(N.outer,g,L)||{};es(O,Za),es(j,Ja),f.top?u.y=Math.min(Math.max(j.top+E.top,L.y),O.top+E.top):f.bottom&&(u.y=Math.max(Math.min(j.bottom+E.bottom,L.y),O.bottom+E.bottom)),f.left?u.x=Math.min(Math.max(j.left+E.left,L.x),O.left+E.left):f.right&&(u.x=Math.max(Math.min(j.right+E.right,L.x),O.right+E.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},Nd=jt(Mr,"restrictEdges"),Id=re({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(c){}},dn.defaults),Md=jt({start:dn.start,set:dn.set,defaults:Id},"restrictRect"),Ld={width:-1/0,height:-1/0},zd={width:1/0,height:1/0},$d=jt({start:function(c){return Mr.start(c)},set:function(c){var u=c.interaction,f=c.state,g=c.rect,m=c.edges,E=f.options;if(m){var N=De(Zt(E.min,u,c.coords))||Ld,L=De(Zt(E.max,u,c.coords))||zd;f.options={endOnly:E.endOnly,inner:re({},Mr.noInner),outer:re({},Mr.noOuter)},m.top?(f.options.inner.top=g.bottom-N.height,f.options.outer.top=g.bottom-L.height):m.bottom&&(f.options.inner.bottom=g.top+N.height,f.options.outer.bottom=g.top+L.height),m.left?(f.options.inner.left=g.right-N.width,f.options.outer.left=g.right-L.width):m.right&&(f.options.inner.right=g.left+N.width,f.options.outer.right=g.left+L.width),Mr.set(c),f.options=E}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),ci={start:function(c){var u,f=c.interaction,g=c.interactable,m=c.element,E=c.rect,N=c.state,L=c.startOffset,O=N.options,j=O.offsetWithOrigin?function(Z){var ie=Z.interaction.element,ne=me(ve(Z.state.options.origin,null,null,[ie])),oe=ne||ue(Z.interactable,ie,Z.interaction.prepared.name);return oe}(c):{x:0,y:0};if(O.offset==="startCoords")u={x:f.coords.start.page.x,y:f.coords.start.page.y};else{var G=ve(O.offset,g,m,[f]);(u=me(G)||{x:0,y:0}).x+=j.x,u.y+=j.y}var K=O.relativePoints;N.offsets=E&&K&&K.length?K.map(function(Z,ie){return{index:ie,relativePoint:Z,x:L.left-E.width*Z.x+u.x,y:L.top-E.height*Z.y+u.y}}):[{index:0,relativePoint:null,x:u.x,y:u.y}]},set:function(c){var u=c.interaction,f=c.coords,g=c.state,m=g.options,E=g.offsets,N=ue(u.interactable,u.element,u.prepared.name),L=re({},f),O=[];m.offsetWithOrigin||(L.x-=N.x,L.y-=N.y);for(var j=0,G=E;j<G.length;j++)for(var K=G[j],Z=L.x-K.x,ie=L.y-K.y,ne=0,oe=m.targets.length;ne<oe;ne++){var he=m.targets[ne],ce=void 0;(ce=w.func(he)?he(Z,ie,u._proxy,K,ne):he)&&O.push({x:(w.number(ce.x)?ce.x:Z)+K.x,y:(w.number(ce.y)?ce.y:ie)+K.y,range:w.number(ce.range)?ce.range:m.range,source:he,index:ne,offset:K})}for(var ye={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},Se=0;Se<O.length;Se++){var Ce=O[Se],xe=Ce.range,Ae=Ce.x-L.x,We=Ce.y-L.y,Me=ze(Ae,We),rt=Me<=xe;xe===1/0&&ye.inRange&&ye.range!==1/0&&(rt=!1),ye.target&&!(rt?ye.inRange&&xe!==1/0?Me/xe<ye.distance/ye.range:xe===1/0&&ye.range!==1/0||Me<ye.distance:!ye.inRange&&Me<ye.distance)||(ye.target=Ce,ye.distance=Me,ye.range=xe,ye.inRange=rt,ye.delta.x=Ae,ye.delta.y=We)}return ye.inRange&&(f.x=ye.target.x,f.y=ye.target.y),g.closest=ye,ye},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},Td=jt(ci,"snap"),hn={start:function(c){var u=c.state,f=c.edges,g=u.options;if(!f)return null;c.state={options:{targets:null,relativePoints:[{x:f.left?0:1,y:f.top?0:1}],offset:g.offset||"self",origin:{x:0,y:0},range:g.range}},u.targetFields=u.targetFields||[["width","height"],["x","y"]],ci.start(c),u.offsets=c.state.offsets,c.state=u},set:function(c){var u=c.interaction,f=c.state,g=c.coords,m=f.options,E=f.offsets,N={x:g.x-E[0].x,y:g.y-E[0].y};f.options=re({},m),f.options.targets=[];for(var L=0,O=m.targets||[];L<O.length;L++){var j=O[L],G=void 0;if(G=w.func(j)?j(N.x,N.y,u):j){for(var K=0,Z=f.targetFields;K<Z.length;K++){var ie=Z[K],ne=ie[0],oe=ie[1];if(ne in G||oe in G){G.x=G[ne],G.y=G[oe];break}}f.options.targets.push(G)}}var he=ci.set(c);return f.options=m,he},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},Pd=jt(hn,"snapSize"),li={aspectRatio:Cd,restrictEdges:Nd,restrict:Dd,restrictRect:Md,restrictSize:$d,snapEdges:jt({start:function(c){var u=c.edges;return u?(c.state.targetFields=c.state.targetFields||[[u.left?"left":"right",u.top?"top":"bottom"]],hn.start(c)):null},set:hn.set,defaults:re(lr(hn.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:Td,snapSize:Pd,spring:ln,avoid:ln,transform:ln,rubberband:ln},Od={id:"modifiers",install:function(c){var u=c.interactStatic;for(var f in c.usePlugin(Pa),c.usePlugin(_d),u.modifiers=li,li){var g=li[f],m=g._defaults,E=g._methods;m._methods=E,c.defaults.perAction[f]=m}}},Gd=Od,ts=function(c){d(f,c);var u=b(f);function f(g,m,E,N,L,O){var j;if(a(this,f),Te(y(j=u.call(this,L)),E),E!==m&&Te(y(j),m),j.timeStamp=O,j.originalEvent=E,j.type=g,j.pointerId=et(m),j.pointerType=sr(m),j.target=N,j.currentTarget=null,g==="tap"){var G=L.getPointerIndex(m);j.dt=j.timeStamp-L.pointers[G].downTime;var K=j.timeStamp-L.tapTime;j.double=!!L.prevTap&&L.prevTap.type!=="doubletap"&&L.prevTap.target===j.target&&K<500}else g==="doubletap"&&(j.dt=m.timeStamp-L.tapTime,j.double=!0);return j}return l(f,[{key:"_subtractOrigin",value:function(g){var m=g.x,E=g.y;return this.pageX-=m,this.pageY-=E,this.clientX-=m,this.clientY-=E,this}},{key:"_addOrigin",value:function(g){var m=g.x,E=g.y;return this.pageX+=m,this.pageY+=E,this.clientX+=m,this.clientY+=E,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),f}(ur),Lr={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(c){c.pointerEvents=Lr,c.defaults.actions.pointerEvents=Lr.defaults,re(c.actions.phaselessTypes,Lr.types)},listeners:{"interactions:new":function(c){var u=c.interaction;u.prevTap=null,u.tapTime=0},"interactions:update-pointer":function(c){var u=c.down,f=c.pointerInfo;!u&&f.hold||(f.hold={duration:1/0,timeout:null})},"interactions:move":function(c,u){var f=c.interaction,g=c.pointer,m=c.event,E=c.eventTarget;c.duplicate||f.pointerIsDown&&!f.pointerWasMoved||(f.pointerIsDown&&di(c),Ut({interaction:f,pointer:g,event:m,eventTarget:E,type:"move"},u))},"interactions:down":function(c,u){(function(f,g){for(var m=f.interaction,E=f.pointer,N=f.event,L=f.eventTarget,O=f.pointerIndex,j=m.pointers[O].hold,G=pe(L),K={interaction:m,pointer:E,event:N,eventTarget:L,type:"hold",targets:[],path:G,node:null},Z=0;Z<G.length;Z++){var ie=G[Z];K.node=ie,g.fire("pointerEvents:collect-targets",K)}if(K.targets.length){for(var ne=1/0,oe=0,he=K.targets;oe<he.length;oe++){var ce=he[oe].eventable.options.holdDuration;ce<ne&&(ne=ce)}j.duration=ne,j.timeout=setTimeout(function(){Ut({interaction:m,eventTarget:L,pointer:E,event:N,type:"hold"},g)},ne)}})(c,u),Ut(c,u)},"interactions:up":function(c,u){di(c),Ut(c,u),function(f,g){var m=f.interaction,E=f.pointer,N=f.event,L=f.eventTarget;m.pointerWasMoved||Ut({interaction:m,eventTarget:L,pointer:E,event:N,type:"tap"},g)}(c,u)},"interactions:cancel":function(c,u){di(c),Ut(c,u)}},PointerEvent:ts,fire:Ut,collectEventTargets:rs,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Ut(c,u){var f=c.interaction,g=c.pointer,m=c.event,E=c.eventTarget,N=c.type,L=c.targets,O=L===void 0?rs(c,u):L,j=new ts(N,g,m,E,f,u.now());u.fire("pointerEvents:new",{pointerEvent:j});for(var G={interaction:f,pointer:g,event:m,eventTarget:E,targets:O,type:N,pointerEvent:j},K=0;K<O.length;K++){var Z=O[K];for(var ie in Z.props||{})j[ie]=Z.props[ie];var ne=ue(Z.eventable,Z.node);if(j._subtractOrigin(ne),j.eventable=Z.eventable,j.currentTarget=Z.node,Z.eventable.fire(j),j._addOrigin(ne),j.immediatePropagationStopped||j.propagationStopped&&K+1<O.length&&O[K+1].node!==j.currentTarget)break}if(u.fire("pointerEvents:fired",G),N==="tap"){var oe=j.double?Ut({interaction:f,pointer:g,event:m,eventTarget:E,type:"doubletap"},u):j;f.prevTap=oe,f.tapTime=oe.timeStamp}return j}function rs(c,u){var f=c.interaction,g=c.pointer,m=c.event,E=c.eventTarget,N=c.type,L=f.getPointerIndex(g),O=f.pointers[L];if(N==="tap"&&(f.pointerWasMoved||!O||O.downTarget!==E))return[];for(var j=pe(E),G={interaction:f,pointer:g,event:m,eventTarget:E,type:N,path:j,targets:[],node:null},K=0;K<j.length;K++){var Z=j[K];G.node=Z,u.fire("pointerEvents:collect-targets",G)}return N==="hold"&&(G.targets=G.targets.filter(function(ie){var ne,oe;return ie.eventable.options.holdDuration===((ne=f.pointers[L])==null||(oe=ne.hold)==null?void 0:oe.duration)})),G.targets}function di(c){var u=c.interaction,f=c.pointerIndex,g=u.pointers[f].hold;g&&g.timeout&&(clearTimeout(g.timeout),g.timeout=null)}var Rd=Object.freeze({__proto__:null,default:Lr});function qd(c){var u=c.interaction;u.holdIntervalHandle&&(clearInterval(u.holdIntervalHandle),u.holdIntervalHandle=null)}var Fd={id:"pointer-events/holdRepeat",install:function(c){c.usePlugin(Lr);var u=c.pointerEvents;u.defaults.holdRepeatInterval=0,u.types.holdrepeat=c.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(c,u){return c["pointerEvents:".concat(u)]=qd,c},{"pointerEvents:new":function(c){var u=c.pointerEvent;u.type==="hold"&&(u.count=(u.count||0)+1)},"pointerEvents:fired":function(c,u){var f=c.interaction,g=c.pointerEvent,m=c.eventTarget,E=c.targets;if(g.type==="hold"&&E.length){var N=E[0].eventable.options.holdRepeatInterval;N<=0||(f.holdIntervalHandle=setTimeout(function(){u.pointerEvents.fire({interaction:f,eventTarget:m,type:"hold",pointer:g,event:g},u)},N))}}})},jd=Fd,Bd={id:"pointer-events/interactableTargets",install:function(c){var u=c.Interactable;u.prototype.pointerEvents=function(g){return re(this.events.options,g),this};var f=u.prototype._backCompatOption;u.prototype._backCompatOption=function(g,m){var E=f.call(this,g,m);return E===this&&(this.events.options[g]=m),E}},listeners:{"pointerEvents:collect-targets":function(c,u){var f=c.targets,g=c.node,m=c.type,E=c.eventTarget;u.interactables.forEachMatch(g,function(N){var L=N.events,O=L.options;L.types[m]&&L.types[m].length&&N.testIgnoreAllow(O,g,E)&&f.push({node:g,eventable:L,props:{interactable:N}})})},"interactable:new":function(c){var u=c.interactable;u.events.getRect=function(f){return u.getRect(f)}},"interactable:set":function(c,u){var f=c.interactable,g=c.options;re(f.events.options,u.pointerEvents.defaults),re(f.events.options,g.pointerEvents||{})}}},Ud=Bd,Hd={id:"pointer-events",install:function(c){c.usePlugin(Rd),c.usePlugin(jd),c.usePlugin(Ud)}},Wd=Hd,Kd={id:"reflow",install:function(c){var u=c.Interactable;c.actions.phases.reflow=!0,u.prototype.reflow=function(f){return function(g,m,E){for(var N=g.getAllElements(),L=E.window.Promise,O=L?[]:null,j=function(){var K=N[G],Z=g.getRect(K);if(!Z)return 1;var ie,ne=ht(E.interactions.list,function(ce){return ce.interacting()&&ce.interactable===g&&ce.element===K&&ce.prepared.name===m.name});if(ne)ne.move(),O&&(ie=ne._reflowPromise||new L(function(ce){ne._reflowResolve=ce}));else{var oe=De(Z),he=function(ce){return{coords:ce,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:oe.x,y:oe.y},client:{x:oe.x,y:oe.y},timeStamp:E.now()});ie=function(ce,ye,Se,Ce,xe){var Ae=ce.interactions.new({pointerType:"reflow"}),We={interaction:Ae,event:xe,pointer:xe,eventTarget:Se,phase:"reflow"};Ae.interactable=ye,Ae.element=Se,Ae.prevEvent=xe,Ae.updatePointer(xe,xe,Se,!0),Oe(Ae.coords.delta),Jn(Ae.prepared,Ce),Ae._doPhase(We);var Me=ce.window,rt=Me.Promise,ft=rt?new rt(function(zt){Ae._reflowResolve=zt}):void 0;return Ae._reflowPromise=ft,Ae.start(Ce,ye,Se),Ae._interacting?(Ae.move(We),Ae.end(xe)):(Ae.stop(),Ae._reflowResolve()),Ae.removePointer(xe,xe),ft}(E,g,K,m,he)}O&&O.push(ie)},G=0;G<N.length&&!j();G++);return O&&L.all(O).then(function(){return g})}(this,f,c)}},listeners:{"interactions:stop":function(c,u){var f=c.interaction;f.pointerType==="reflow"&&(f._reflowResolve&&f._reflowResolve(),function(g,m){g.splice(g.indexOf(m),1)}(u.interactions.list,f))}}},Xd=Kd;if(He.use(Ta),He.use(Fa),He.use(Wd),He.use(dd),He.use(Gd),He.use(Jl),He.use(jl),He.use(Ul),He.use(Xd),He.default=He,o(n)==="object"&&n)try{n.exports=He}catch{}return He.default=He,He})}(Ur,Ur.exports)),Ur.exports}var rb=tb();const nb=Ve(rb),ut=document;class ib{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.metric=new Ol(e),this.panels={info:ut.getElementById("floating-panel"),tools:ut.getElementById("tools-panel"),graphs:ut.getElementById("graphs-panel"),faces:ut.getElementById("face-panel")},this.handles={info:"#info",tools:"#tools",graphs:"#graphs",faces:"#faces"},this.addEventListeners(),this.makePanelsDraggable(),this.registerToolListeners(),this.setupContextMenu()}init(){this.togglePanel("info","#panel-btn .check",this.settings.info_panel),this.togglePanel("tools","#tools-btn .check",this.settings.tools_panel),this.togglePanel("graphs","#graphs-btn .check",this.settings.graphs_panel),this.togglePanel("faces","#faces-btn .check",this.settings.face_panel)}setupContextMenu(){const e=ut.getElementById("custom-context-menu");ut.addEventListener("contextmenu",t=>{t.preventDefault();const{offsetWidth:r,offsetHeight:o}=e,{innerWidth:a,innerHeight:s}=window;let{pageX:l,pageY:h}=t;l+r>a&&(l-=r),h+o>s&&(h-=o),Object.assign(e.style,{left:`${l}px`,top:`${h}px`,display:"block"})}),ut.addEventListener("click",()=>{e.style.display="none"})}togglePanel(e,t,r){const o=this.panels[e],a=ut.querySelector(t);a==null||a.classList.toggle("hidden",!r),o&&(o.style.display=r?"flex":"none",r||this.resetPanel(o))}resetPanel(e){e.style.transform="translate(0px, 0px)",e.setAttribute("data-x",0),e.setAttribute("data-y",0)}addEventListeners(){const e=(r,o)=>{var a;(a=ut.querySelector(r))==null||a.addEventListener("click",()=>{this.eventBus.emit("toggleSetting",{key:o})})};e("#floating-panel .close","info_panel"),e("#tools-panel .close","tools_panel"),e("#graphs-panel .close","graphs_panel"),e("#face-panel .close","face_panel");const t=ut.querySelector("#floating-panel .max");t==null||t.addEventListener("click",()=>{var r;this.resetPanel(this.panels.info),(r=ut.getElementById("floating-panel"))==null||r.classList.toggle("MAX")})}makePanelsDraggable(){Object.entries(this.panels).forEach(([e,t])=>{const r=this.handles[e];t&&r&&this.makeDraggable(t,r)})}makeDraggable(e,t){nb(e).draggable({allowFrom:t,listeners:{move(r){const o=r.target,a=(parseFloat(o.getAttribute("data-x"))||0)+r.dx,s=(parseFloat(o.getAttribute("data-y"))||0)+r.dy;o.style.transform=`translate(${a}px, ${s}px)`,o.setAttribute("data-x",a),o.setAttribute("data-y",s)}}})}registerToolListeners(){Object.entries({scale:"scale",tree:"tree",force:"forceSimulation",panning:"panning",select:"select",component:"component","color-picker":"colorPicker"}).forEach(([t,r])=>{var o;(o=ut.querySelector(`widgets #tools-panel .${t}`))==null||o.addEventListener("click",()=>{this.eventBus.emit("toggleSetting",{key:r})})})}}class ob{constructor(e,t){this.app=e,this.settings=e.settings,this.canvas=e.canvas,this.ctx=e._canvas.ctx,this.selection={x:0,y:0,width:0,height:0,active:!1},this.scale={isDragging:!1,active:!1,activeHandle:null,scaleData:{},rect:{x:100,y:100,width:200,height:150},prevMouse:{x:0,y:0},offsetX:0,offsetY:0,handleSize:10,handles:["nw","n","ne","e","se","s","sw","w"],cursorMap:{nw:"nwse-resize",n:"ns-resize",ne:"nesw-resize",e:"ew-resize",se:"nwse-resize",s:"ns-resize",sw:"nesw-resize",w:"ew-resize"}}}init(){this.canvas.addEventListener("mousedown",this.startSelection.bind(this)),this.canvas.addEventListener("mousemove",this.updateSelection.bind(this)),this.canvas.addEventListener("mouseup",this.endSelection.bind(this)),this.app.drawGraph()}draw(){(this.settings.select||this.settings.scale)&&(this.selection.active&&this.drawSelect(this.selection),this.settings.scale&&this.drawScale())}drawSelect(e){if(!e)return;const t=this.ctx;t.fillStyle="rgba(0, 0, 0, 0.1)",t.fillRect(e.x,e.y,e.width,e.height),t.strokeStyle="rgba(0, 0, 255, 0.7)",t.lineWidth=2,t.setLineDash([5,5]),t.strokeRect(e.x,e.y,e.width,e.height),t.setLineDash([])}drawScale(){this.scale.active&&this.drawScaleBox(this.scale.rect,this.ctx)}startSelection(e){if(this.settings.select||this.settings.scale){const[t,r]=ct(e,this.canvas);if(this.selection.x=t,this.selection.y=r,this.selection.width=0,this.selection.height=0,this.selection.active=!this.scale.active,this.settings.scale&&this.scale.active){const[o,a]=ct(e);if(this.scale.prevMouse={x:o,y:a},this.scale.activeHandle=this.hitTestHandle(o,a),this.scale.activeHandle)return;o>=this.scale.rect.x&&o<=this.scale.rect.x+this.scale.rect.width&&a>=this.scale.rect.y&&a<=this.scale.rect.y+this.scale.rect.height&&(this.scale.isDragging=!0,this.scale.offsetX=o-this.scale.rect.x,this.scale.offsetY=a-this.scale.rect.y),this.app.graphManager.saveGraphState()}}else this.selection.active=!1,this.scale.active=!1}updateSelection(e){const t=this.selection,r=this.scale.rect,o=this.app.graphManager.graph.getSelectedNodes();if(t.active&&!this.scale.active){const[a,s]=ct(e,this.canvas);t.width=a-t.x,t.height=s-t.y,this.app.drawGraph();return}if(this.scale.active){const[a,s]=ct(e);if(this.scale.activeHandle){this.resizeRect(this.scale.activeHandle,a,s);for(let h of o)this.app.graphManager.graph.updateNodeAttributes(h,d=>({...d,x:r.x+r.width*this.scale.scaleData[h].x,y:r.y+r.height*this.scale.scaleData[h].y}));this.app.drawGraph();return}if(this.scale.isDragging){this.scale.rect.x=a-this.scale.offsetX,this.scale.rect.y=s-this.scale.offsetY;const h=a-this.scale.prevMouse.x,d=s-this.scale.prevMouse.y;for(let p of o)this.app.graphManager.graph.updateNodeAttributes(p,v=>({...v,x:v.x+h,y:v.y+d}));this.scale.prevMouse={x:a,y:s},this.app.drawGraph();return}const l=this.hitTestHandle(a,s);l?this.canvas.style.cursor=this.scale.cursorMap[l]:a>=this.scale.rect.x&&a<=this.scale.rect.x+this.scale.rect.width&&s>=this.scale.rect.y&&s<=this.scale.rect.y+this.scale.rect.height?this.canvas.style.cursor="move":this.canvas.style.cursor="default"}}endSelection(e){this.selection.active=!1,this.scale.isDragging=!1,this.scale.activeHandle=null,this.pointsInRect(this.selection).forEach(a=>{this.app.graphManager.graph.toggleNodeSelection(a)}),this.linesInRect(this.selection).forEach(a=>{this.app.graphManager.graph.toggleEdgeSelection(a)});const o=this.app.graphManager.graph.getSelectedNodes();this.settings.scale&&o.length>0&&!this.scale.active&&(this.scale.active=!0,this.scale.rect=ab(this.app.graphManager.graph,o,this.settings.node_radius),this.scaleData={},o.forEach(a=>{const s=this.app.graphManager.graph.getNodeAttributes(a);this.scale.scaleData[a]={id:a,x:(s.x-this.scale.rect.x)/this.scale.rect.width,y:(s.y-this.scale.rect.y)/this.scale.rect.height}})),this.app.drawGraph()}pointsInRect(e){const[t,r,o,a]=Oc(e);return this.app.graphManager.graph.filterNodes((s,l)=>Wo(l.x,l.y,t,r,o,a))}linesInRect(e){const t=Oc(e);return this.app.graphManager.graph.filterEdges((r,o,a,s,l,h)=>this.lineIntersectsRect([l.x,l.y,h.x,h.y],t))}lineIntersectsRect(e,t){let[r,o,a,s]=e,[l,h,d,p]=t;const v=this.settings.node_radius/2+20;return!!(Gc([r,o,a,s],[l,h,d,p])||Gc([r,o,a,s],[l,p,d,h])||Wo(r,o,l+v,h+v,d-v,p-v)||Wo(a,s,l+v,h+v,d-v,p-v))}drawScaleBox(e,t){e&&(t.fillStyle="#cce5ff20",t.strokeStyle="#3399ff",t.lineWidth=2,t.fillRect(e.x,e.y,e.width,e.height),t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="#fff",t.strokeStyle="#000",this.scale.handles.forEach(r=>{const[o,a]=this.getHandlePosition(r);t.fillRect(o,a,this.scale.handleSize,this.scale.handleSize),t.strokeRect(o,a,this.scale.handleSize,this.scale.handleSize)}))}getHandlePosition(e){const{x:t,y:r,width:o,height:a}=this.scale.rect,s=this.scale.handleSize/2;switch(e){case"nw":return[t-s,r-s];case"n":return[t+o/2-s,r-s];case"ne":return[t+o-s,r-s];case"e":return[t+o-s,r+a/2-s];case"se":return[t+o-s,r+a-s];case"s":return[t+o/2-s,r+a-s];case"sw":return[t-s,r+a-s];case"w":return[t-s,r+a/2-s]}}hitTestHandle(e,t){return this.scale.handles.find(r=>{const[o,a]=this.getHandlePosition(r);return e>=o&&e<=o+this.scale.handleSize&&t>=a&&t<=a+this.scale.handleSize})}resizeRect(e,t,r){const a=t-this.scale.prevMouse.x,s=r-this.scale.prevMouse.y;let{x:l,y:h,width:d,height:p}=this.scale.rect;switch(e){case"nw":l+=a,h+=s,d-=a,p-=s;break;case"n":h+=s,p-=s;break;case"ne":h+=s,d+=a,p-=s;break;case"e":d+=a;break;case"se":d+=a,p+=s;break;case"s":p+=s;break;case"sw":l+=a,d-=a,p+=s;break;case"w":l+=a,d-=a;break}if(d<20){const v=20-d;e.includes("w")&&(l-=v),d=20}if(p<20){const v=20-p;e.includes("n")&&(h-=v),p=20}this.scale.rect.x=l,this.scale.rect.y=h,this.scale.rect.width=d,this.scale.rect.height=p,this.scale.prevMouse={x:t,y:r}}}function Wo(n,e,t,r,o,a){return n>=t&&n<=o&&e>=r&&e<=a}function Oc(n){const e=Math.min(n.x,n.x+n.width),t=Math.min(n.y,n.y+n.height),r=Math.max(n.x,n.x+n.width),o=Math.max(n.y,n.y+n.height);return[e,t,r,o]}function Gc(n,e){var t,r,o;const[a,s,l,h]=n,[d,p,v,y]=e;return t=(l-a)*(y-p)-(v-d)*(h-s),t===0?!1:(o=((y-p)*(v-a)+(d-v)*(y-s))/t,r=((s-h)*(v-a)+(l-a)*(y-s))/t,0<o&&o<1&&0<r&&r<1)}function ab(n,e,t){if(!e.length)return null;let r=1/0,o=1/0,a=-1/0,s=-1/0;e.forEach(h=>{const d=n.getNodeAttributes(h);d.x<r&&(r=d.x),d.y<o&&(o=d.y),d.x>a&&(a=d.x),d.y>s&&(s=d.y)});const l=t*1.5;return{x:r-l,y:o-l,width:a-r+2*l,height:s-o+2*l}}var Ko={exports:{}};/*! Pickr 1.9.1 MIT | https://github.com/Simonwep/pickr */var Rc;function sb(){return Rc||(Rc=1,function(n,e){(function(t,r){n.exports=r()})(self,()=>(()=>{var t={d:(F,A)=>{for(var B in A)t.o(A,B)&&!t.o(F,B)&&Object.defineProperty(F,B,{enumerable:!0,get:A[B]})},o:(F,A)=>Object.prototype.hasOwnProperty.call(F,A),r:F=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})}},r={};t.d(r,{default:()=>te});var o={};function a(F,A,B,H,Q={}){A instanceof HTMLCollection||A instanceof NodeList?A=Array.from(A):Array.isArray(A)||(A=[A]),Array.isArray(B)||(B=[B]);for(const W of A)for(const Y of B)W[F](Y,H,{capture:!1,...Q});return Array.prototype.slice.call(arguments,1)}t.r(o),t.d(o,{adjustableInputNumbers:()=>y,createElementFromString:()=>h,createFromTemplate:()=>d,eventPath:()=>p,off:()=>l,on:()=>s,resolveElement:()=>v});const s=a.bind(null,"addEventListener"),l=a.bind(null,"removeEventListener");function h(F){const A=document.createElement("div");return A.innerHTML=F.trim(),A.firstElementChild}function d(F){const A=(H,Q)=>{const W=H.getAttribute(Q);return H.removeAttribute(Q),W},B=(H,Q={})=>{const W=A(H,":obj"),Y=A(H,":ref"),X=W?Q[W]={}:Q;Y&&(Q[Y]=H);for(const ee of Array.from(H.children)){const se=A(ee,":arr"),fe=B(ee,se?{}:X);se&&(X[se]||(X[se]=[])).push(Object.keys(fe).length?fe:ee)}return Q};return B(h(F))}function p(F){let A=F.path||F.composedPath&&F.composedPath();if(A)return A;let B=F.target.parentElement;for(A=[F.target,B];B=B.parentElement;)A.push(B);return A.push(document,window),A}function v(F){return F instanceof Element?F:typeof F=="string"?F.split(/>>/g).reduce((A,B,H,Q)=>(A=A.querySelector(B),H<Q.length-1?A.shadowRoot:A),document):null}function y(F,A=B=>B){function B(H){const Q=[.001,.01,.1][Number(H.shiftKey||2*H.ctrlKey)]*(H.deltaY<0?1:-1);let W=0,Y=F.selectionStart;F.value=F.value.replace(/[\d.]+/g,(X,ee)=>ee<=Y&&ee+X.length>=Y?(Y=ee,A(Number(X),Q,W)):(W++,X)),F.focus(),F.setSelectionRange(Y,Y),H.preventDefault(),F.dispatchEvent(new Event("input"))}s(F,"focus",()=>s(window,"wheel",B,{passive:!1})),s(F,"blur",()=>l(window,"wheel",B))}const{min:b,max:_,floor:S,round:C}=Math;function D(F,A,B){A/=100,B/=100;const H=S(F=F/360*6),Q=F-H,W=B*(1-A),Y=B*(1-Q*A),X=B*(1-(1-Q)*A),ee=H%6;return[255*[B,Y,W,W,X,B][ee],255*[X,B,B,Y,W,W][ee],255*[W,W,X,B,B,Y][ee]]}function k(F,A,B){const H=(2-(A/=100))*(B/=100)/2;return H!==0&&(A=H===1?0:H<.5?A*B/(2*H):A*B/(2-2*H)),[F,100*A,100*H]}function M(F,A,B){const H=b(F/=255,A/=255,B/=255),Q=_(F,A,B),W=Q-H;let Y,X;if(W===0)Y=X=0;else{X=W/Q;const ee=((Q-F)/6+W/2)/W,se=((Q-A)/6+W/2)/W,fe=((Q-B)/6+W/2)/W;F===Q?Y=fe-se:A===Q?Y=1/3+ee-fe:B===Q&&(Y=2/3+se-ee),Y<0?Y+=1:Y>1&&(Y-=1)}return[360*Y,100*X,100*Q]}function x(F,A,B,H){return A/=100,B/=100,[...M(255*(1-b(1,(F/=100)*(1-(H/=100))+H)),255*(1-b(1,A*(1-H)+H)),255*(1-b(1,B*(1-H)+H)))]}function I(F,A,B){A/=100;const H=2*(A*=(B/=100)<.5?B:1-B)/(B+A)*100,Q=100*(B+A);return[F,isNaN(H)?0:H,Q]}function R(F){return M(...F.match(/.{2}/g).map(A=>parseInt(A,16)))}function w(F){F=F.match(/^[a-zA-Z]+$/)?function(Q){if(Q.toLowerCase()==="black")return"#000";const W=document.createElement("canvas").getContext("2d");return W.fillStyle=Q,W.fillStyle==="#000"?null:W.fillStyle}(F):F;const A={cmyk:/^cmyk\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)/i,rgba:/^rgba?\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D*?(([\d.]+)(%?)|$)/i,hsla:/^hsla?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hsva:/^hsva?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},B=Q=>Q.map(W=>/^(|\d+)\.\d+|\d+$/.test(W)?Number(W):void 0);let H;e:for(const Q in A)if(H=A[Q].exec(F))switch(Q){case"cmyk":{const[,W,Y,X,ee]=B(H);if(W>100||Y>100||X>100||ee>100)break e;return{values:x(W,Y,X,ee),type:Q}}case"rgba":{let[,W,,Y,,X,,,ee]=B(H);if(W=H[2]==="%"?W/100*255:W,Y=H[4]==="%"?Y/100*255:Y,X=H[6]==="%"?X/100*255:X,ee=H[9]==="%"?ee/100:ee,W>255||Y>255||X>255||ee<0||ee>1)break e;return{values:[...M(W,Y,X),ee],a:ee,type:Q}}case"hexa":{let[,W]=H;W.length!==4&&W.length!==3||(W=W.split("").map(ee=>ee+ee).join(""));const Y=W.substring(0,6);let X=W.substring(6);return X=X?parseInt(X,16)/255:void 0,{values:[...R(Y),X],a:X,type:Q}}case"hsla":{let[,W,Y,X,,ee]=B(H);if(ee=H[6]==="%"?ee/100:ee,W>360||Y>100||X>100||ee<0||ee>1)break e;return{values:[...I(W,Y,X),ee],a:ee,type:Q}}case"hsva":{let[,W,Y,X,,ee]=B(H);if(ee=H[6]==="%"?ee/100:ee,W>360||Y>100||X>100||ee<0||ee>1)break e;return{values:[W,Y,X,ee],a:ee,type:Q}}}return{values:null,type:null}}function z(F=0,A=0,B=0,H=1){const Q=(Y,X)=>(ee=-1)=>X(~ee?Y.map(se=>Number(se.toFixed(ee))):Y),W={h:F,s:A,v:B,a:H,toHSVA(){const Y=[W.h,W.s,W.v,W.a];return Y.toString=Q(Y,X=>`hsva(${X[0]}, ${X[1]}%, ${X[2]}%, ${W.a})`),Y},toHSLA(){const Y=[...k(W.h,W.s,W.v),W.a];return Y.toString=Q(Y,X=>`hsla(${X[0]}, ${X[1]}%, ${X[2]}%, ${W.a})`),Y},toRGBA(){const Y=[...D(W.h,W.s,W.v),W.a];return Y.toString=Q(Y,X=>`rgba(${X[0]}, ${X[1]}, ${X[2]}, ${W.a})`),Y},toCMYK(){const Y=function(X,ee,se){const fe=D(X,ee,se),pe=fe[0]/255,Ee=fe[1]/255,re=fe[2]/255,de=b(1-pe,1-Ee,1-re);return[100*(de===1?0:(1-pe-de)/(1-de)),100*(de===1?0:(1-Ee-de)/(1-de)),100*(de===1?0:(1-re-de)/(1-de)),100*de]}(W.h,W.s,W.v);return Y.toString=Q(Y,X=>`cmyk(${X[0]}%, ${X[1]}%, ${X[2]}%, ${X[3]}%)`),Y},toHEXA(){const Y=function(ee,se,fe){return D(ee,se,fe).map(pe=>C(pe).toString(16).padStart(2,"0"))}(W.h,W.s,W.v),X=W.a>=1?"":Number((255*W.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return X&&Y.push(X),Y.toString=()=>`#${Y.join("").toUpperCase()}`,Y},clone:()=>z(W.h,W.s,W.v,W.a)};return W}const $=F=>Math.max(Math.min(F,1),0);function T(F){const A={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},F),_keyboard(W){const{options:Y}=A,{type:X,key:ee}=W;if(document.activeElement===Y.wrapper){const{lock:se}=A.options,fe=ee==="ArrowUp",pe=ee==="ArrowRight",Ee=ee==="ArrowDown",re=ee==="ArrowLeft";if(X==="keydown"&&(fe||pe||Ee||re)){let de=0,ve=0;se==="v"?de=fe||pe?1:-1:se==="h"?de=fe||pe?-1:1:(ve=fe?-1:Ee?1:0,de=re?-1:pe?1:0),A.update($(A.cache.x+.01*de),$(A.cache.y+.01*ve)),W.preventDefault()}else ee.startsWith("Arrow")&&(A.options.onstop(),W.preventDefault())}},_tapstart(W){s(document,["mouseup","touchend","touchcancel"],A._tapstop),s(document,["mousemove","touchmove"],A._tapmove),W.cancelable&&W.preventDefault(),A._tapmove(W)},_tapmove(W){const{options:Y,cache:X}=A,{lock:ee,element:se,wrapper:fe}=Y,pe=fe.getBoundingClientRect();let Ee=0,re=0;if(W){const me=W&&W.touches&&W.touches[0];Ee=W?(me||W).clientX:0,re=W?(me||W).clientY:0,Ee<pe.left?Ee=pe.left:Ee>pe.left+pe.width&&(Ee=pe.left+pe.width),re<pe.top?re=pe.top:re>pe.top+pe.height&&(re=pe.top+pe.height),Ee-=pe.left,re-=pe.top}else X&&(Ee=X.x*pe.width,re=X.y*pe.height);ee!=="h"&&(se.style.left=`calc(${Ee/pe.width*100}% - ${se.offsetWidth/2}px)`),ee!=="v"&&(se.style.top=`calc(${re/pe.height*100}% - ${se.offsetHeight/2}px)`),A.cache={x:Ee/pe.width,y:re/pe.height};const de=$(Ee/pe.width),ve=$(re/pe.height);switch(ee){case"v":return Y.onchange(de);case"h":return Y.onchange(ve);default:return Y.onchange(de,ve)}},_tapstop(){A.options.onstop(),l(document,["mouseup","touchend","touchcancel"],A._tapstop),l(document,["mousemove","touchmove"],A._tapmove)},trigger(){A._tapmove()},update(W=0,Y=0){const{left:X,top:ee,width:se,height:fe}=A.options.wrapper.getBoundingClientRect();A.options.lock==="h"&&(Y=W),A._tapmove({clientX:X+se*W,clientY:ee+fe*Y})},destroy(){const{options:W,_tapstart:Y,_keyboard:X}=A;l(document,["keydown","keyup"],X),l([W.wrapper,W.element],"mousedown",Y),l([W.wrapper,W.element],"touchstart",Y,{passive:!1})}},{options:B,_tapstart:H,_keyboard:Q}=A;return s([B.wrapper,B.element],"mousedown",H),s([B.wrapper,B.element],"touchstart",H,{passive:!1}),s(document,["keydown","keyup"],Q),A}function q(F={}){F=Object.assign({onchange:()=>0,className:"",elements:[]},F);const A=s(F.elements,"click",B=>{F.elements.forEach(H=>H.classList[B.target===H?"add":"remove"](F.className)),F.onchange(B),B.stopPropagation()});return{destroy:()=>l(...A)}}const U={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},P=(F,A,B)=>{const H=typeof F!="object"||F instanceof HTMLElement?{reference:F,popper:A,...B}:F;return{update(Q=H){const{reference:W,popper:Y}=Object.assign(H,Q);if(!Y||!W)throw new Error("Popper- or reference-element missing.");return((X,ee,se)=>{const{container:fe,arrow:pe,margin:Ee,padding:re,position:de,variantFlipOrder:ve,positionFlipOrder:me}={container:document.documentElement.getBoundingClientRect(),...U,...se},{left:De,top:ge}=ee.style;ee.style.left="0",ee.style.top="0";const ue=X.getBoundingClientRect(),V=ee.getBoundingClientRect(),Fe={t:ue.top-V.height-Ee,b:ue.bottom+Ee,r:ue.right+Ee,l:ue.left-V.width-Ee},ze={vs:ue.left,vm:ue.left+ue.width/2-V.width/2,ve:ue.left+ue.width-V.width,hs:ue.top,hm:ue.bottom-ue.height/2-V.height/2,he:ue.bottom-V.height},[Qe,Te="middle"]=de.split("-"),Ie=me[Qe],Oe=ve[Te],{top:je,left:Be,bottom:wt,right:et}=fe;for(const tt of Ie){const Ue=tt==="t"||tt==="b";let Ge=Fe[tt];const[it,ot]=Ue?["top","left"]:["left","top"],[Yt,sr]=Ue?[V.height,V.width]:[V.width,V.height],[en,ur]=Ue?[wt,et]:[et,wt],[tn,rn]=Ue?[je,Be]:[Be,je];if(!(Ge<tn||Ge+Yt+re>en))for(const It of Oe){let ht=ze[(Ue?"v":"h")+It];if(!(ht<rn||ht+sr+re>ur)){if(ht-=V[ot],Ge-=V[it],ee.style[ot]=`${ht}px`,ee.style[it]=`${Ge}px`,pe){const Et=Ue?ue.width/2:ue.height/2,Vt=sr/2,cr=Et>Vt,nn=ht+{s:cr?Vt:Et,m:Vt,e:cr?Vt:sr-Et}[It],Cr=Ge+{t:Yt,b:0,r:0,l:Yt}[tt];pe.style[ot]=`${nn}px`,pe.style[it]=`${Cr}px`}return tt+It}}}return ee.style.left=De,ee.style.top=ge,null})(W,Y,H)}}},J=class J{constructor(A){Re(this,"_initializingActive",!0);Re(this,"_recalc",!0);Re(this,"_nanopop",null);Re(this,"_root",null);Re(this,"_color",z());Re(this,"_lastColor",z());Re(this,"_swatchColors",[]);Re(this,"_setupAnimationFrame",null);Re(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]});this.options=A=Object.assign({...J.DEFAULT_OPTIONS},A);const{swatches:B,components:H,theme:Q,sliders:W,lockOpacity:Y,padding:X}=A;["nano","monolith"].includes(Q)&&!W&&(A.sliders="h"),H.interaction||(H.interaction={});const{preview:ee,opacity:se,hue:fe,palette:pe}=H;H.opacity=!Y&&se,H.palette=pe||ee||se||fe,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),B&&B.length&&B.forEach(ve=>this.addSwatch(ve));const{button:Ee,app:re}=this._root;this._nanopop=P(Ee,re,{margin:X}),Ee.setAttribute("role","button"),Ee.setAttribute("aria-label",this._t("btn:toggle"));const de=this;this._setupAnimationFrame=requestAnimationFrame(function ve(){if(!re.offsetWidth)return requestAnimationFrame(ve);de.setColor(A.default),de._rePositioningPicker(),A.defaultRepresentation&&(de._representation=A.defaultRepresentation,de.setColorRepresentation(de._representation)),A.showAlways&&de.show(),de._initializingActive=!1,de._emit("init")})}_preBuild(){const{options:A}=this;for(const B of["el","container"])A[B]=v(A[B]);this._root=(B=>{const{components:H,useAsButton:Q,inline:W,appClass:Y,theme:X,lockOpacity:ee}=B.options,se=re=>re?"":'style="display:none" hidden',fe=re=>B._t(re),pe=d(`
      <div :ref="root" class="pickr">

        ${Q?"":'<button type="button" :ref="button" class="pcr-button"></button>'}

        <div :ref="app" class="pcr-app ${Y||""}" data-theme="${X}" ${W?'style="position: unset"':""} aria-label="${fe("ui:dialog")}" role="window">
          <div class="pcr-selection" ${se(H.palette)}>
            <div :obj="preview" class="pcr-color-preview" ${se(H.preview)}>
              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${fe("btn:last-color")}"></button>
              <div :ref="currentColor" class="pcr-current-color"></div>
            </div>

            <div :obj="palette" class="pcr-color-palette">
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${fe("aria:palette")}" role="listbox"></div>
            </div>

            <div :obj="hue" class="pcr-color-chooser" ${se(H.hue)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${fe("aria:hue")}" role="slider"></div>
            </div>

            <div :obj="opacity" class="pcr-color-opacity" ${se(H.opacity)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${fe("aria:opacity")}" role="slider"></div>
            </div>
          </div>

          <div class="pcr-swatches ${H.palette?"":"pcr-last"}" :ref="swatches"></div>

          <div :obj="interaction" class="pcr-interaction" ${se(Object.keys(H.interaction).length)}>
            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${se(H.interaction.input)} aria-label="${fe("aria:input")}">

            <input :arr="options" class="pcr-type" data-type="HEXA" value="${ee?"HEX":"HEXA"}" type="button" ${se(H.interaction.hex)}>
            <input :arr="options" class="pcr-type" data-type="RGBA" value="${ee?"RGB":"RGBA"}" type="button" ${se(H.interaction.rgba)}>
            <input :arr="options" class="pcr-type" data-type="HSLA" value="${ee?"HSL":"HSLA"}" type="button" ${se(H.interaction.hsla)}>
            <input :arr="options" class="pcr-type" data-type="HSVA" value="${ee?"HSV":"HSVA"}" type="button" ${se(H.interaction.hsva)}>
            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${se(H.interaction.cmyk)}>

            <input :ref="save" class="pcr-save" value="${fe("btn:save")}" type="button" ${se(H.interaction.save)} aria-label="${fe("aria:btn:save")}">
            <input :ref="cancel" class="pcr-cancel" value="${fe("btn:cancel")}" type="button" ${se(H.interaction.cancel)} aria-label="${fe("aria:btn:cancel")}">
            <input :ref="clear" class="pcr-clear" value="${fe("btn:clear")}" type="button" ${se(H.interaction.clear)} aria-label="${fe("aria:btn:clear")}">
          </div>
        </div>
      </div>
    `),Ee=pe.interaction;return Ee.options.find(re=>!re.hidden&&!re.classList.add("active")),Ee.type=()=>Ee.options.find(re=>re.classList.contains("active")),pe})(this),A.useAsButton&&(this._root.button=A.el),A.container.appendChild(this._root.root)}_finalBuild(){const A=this.options,B=this._root;if(A.container.removeChild(B.root),A.inline){const H=A.el.parentElement;A.el.nextSibling?H.insertBefore(B.app,A.el.nextSibling):H.appendChild(B.app)}else A.container.appendChild(B.app);A.useAsButton?A.inline&&A.el.remove():A.el.parentNode.replaceChild(B.root,A.el),A.disabled&&this.disable(),A.comparison||(B.button.style.transition="none",A.useAsButton||(B.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const A=this,B=this.options.components,H=(A.options.sliders||"v").repeat(2),[Q,W]=H.match(/^[vh]+$/g)?H:[],Y=()=>this._color||(this._color=this._lastColor.clone()),X={palette:T({element:A._root.palette.picker,wrapper:A._root.palette.palette,onstop:()=>A._emit("changestop","slider",A),onchange(ee,se){if(!B.palette)return;const fe=Y(),{_root:pe,options:Ee}=A,{lastColor:re,currentColor:de}=pe.preview;A._recalc&&(fe.s=100*ee,fe.v=100-100*se,fe.v<0&&(fe.v=0),A._updateOutput("slider"));const ve=fe.toRGBA().toString(0);this.element.style.background=ve,this.wrapper.style.background=`
                        linear-gradient(to top, rgba(0, 0, 0, ${fe.a}), transparent),
                        linear-gradient(to left, hsla(${fe.h}, 100%, 50%, ${fe.a}), rgba(255, 255, 255, ${fe.a}))
                    `,Ee.comparison?Ee.useAsButton||A._lastColor||re.style.setProperty("--pcr-color",ve):(pe.button.style.setProperty("--pcr-color",ve),pe.button.classList.remove("clear"));const me=fe.toHEXA().toString();for(const{el:De,color:ge}of A._swatchColors)De.classList[me===ge.toHEXA().toString()?"add":"remove"]("pcr-active");de.style.setProperty("--pcr-color",ve)}}),hue:T({lock:W==="v"?"h":"v",element:A._root.hue.picker,wrapper:A._root.hue.slider,onstop:()=>A._emit("changestop","slider",A),onchange(ee){if(!B.hue||!B.palette)return;const se=Y();A._recalc&&(se.h=360*ee),this.element.style.backgroundColor=`hsl(${se.h}, 100%, 50%)`,X.palette.trigger()}}),opacity:T({lock:Q==="v"?"h":"v",element:A._root.opacity.picker,wrapper:A._root.opacity.slider,onstop:()=>A._emit("changestop","slider",A),onchange(ee){if(!B.opacity||!B.palette)return;const se=Y();A._recalc&&(se.a=Math.round(100*ee)/100),this.element.style.background=`rgba(0, 0, 0, ${se.a})`,X.palette.trigger()}}),selectable:q({elements:A._root.interaction.options,className:"active",onchange(ee){A._representation=ee.target.getAttribute("data-type").toUpperCase(),A._recalc&&A._updateOutput("swatch")}})};this._components=X}_bindEvents(){const{_root:A,options:B}=this,H=[s(A.interaction.clear,"click",()=>this._clearColor()),s([A.interaction.cancel,A.preview.lastColor],"click",()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")}),s(A.interaction.save,"click",()=>{!this.applyColor()&&!B.showAlways&&this.hide()}),s(A.interaction.result,["keyup","input"],Q=>{this.setColor(Q.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),Q.stopImmediatePropagation()}),s(A.interaction.result,["focus","blur"],Q=>{this._recalc=Q.type==="blur",this._recalc&&this._updateOutput(null)}),s([A.palette.palette,A.palette.picker,A.hue.slider,A.hue.picker,A.opacity.slider,A.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0,{passive:!0})];if(!B.showAlways){const Q=B.closeWithKey;H.push(s(A.button,"click",()=>this.isOpen()?this.hide():this.show()),s(document,"keyup",W=>this.isOpen()&&(W.key===Q||W.code===Q)&&this.hide()),s(document,["touchstart","mousedown"],W=>{this.isOpen()&&!p(W).some(Y=>Y===A.app||Y===A.button)&&this.hide()},{capture:!0}))}if(B.adjustableNumbers){const Q={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};y(A.interaction.result,(W,Y,X)=>{const ee=Q[this.getColorRepresentation().toLowerCase()];if(ee){const se=ee[X],fe=W+(se>=100?1e3*Y:Y);return fe<=0?0:Number((fe<se?fe:se).toPrecision(3))}return W})}if(B.autoReposition&&!B.inline){let Q=null;const W=this;H.push(s(window,["scroll","resize"],()=>{W.isOpen()&&(B.closeOnScroll&&W.hide(),Q===null?(Q=setTimeout(()=>Q=null,100),requestAnimationFrame(function Y(){W._rePositioningPicker(),Q!==null&&requestAnimationFrame(Y)})):(clearTimeout(Q),Q=setTimeout(()=>Q=null,100)))},{capture:!0}))}this._eventBindings=H}_rePositioningPicker(){const{options:A}=this;if(!A.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:A.position})){const B=this._root.app,H=B.getBoundingClientRect();B.style.top=(window.innerHeight-H.height)/2+"px",B.style.left=(window.innerWidth-H.width)/2+"px"}}_updateOutput(A){const{_root:B,_color:H,options:Q}=this;if(B.interaction.type()){const W=`to${B.interaction.type().getAttribute("data-type")}`;B.interaction.result.value=typeof H[W]=="function"?H[W]().toString(Q.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",H,A,this)}_clearColor(A=!1){const{_root:B,options:H}=this;H.useAsButton||B.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),B.button.classList.add("clear"),H.showAlways||this.hide(),this._lastColor=null,this._initializingActive||A||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(A){const{values:B,type:H,a:Q}=w(A),{lockOpacity:W}=this.options,Y=Q!==void 0&&Q!==1;return B&&B.length===3&&(B[3]=void 0),{values:!B||W&&Y?null:B,type:H}}_t(A){return this.options.i18n[A]||J.I18N_DEFAULTS[A]}_emit(A,...B){this._eventListener[A].forEach(H=>H(...B,this))}on(A,B){return this._eventListener[A].push(B),this}off(A,B){const H=this._eventListener[A]||[],Q=H.indexOf(B);return~Q&&H.splice(Q,1),this}addSwatch(A){const{values:B}=this._parseLocalColor(A);if(B){const{_swatchColors:H,_root:Q}=this,W=z(...B),Y=h(`<button type="button" style="--pcr-color: ${W.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return Q.swatches.appendChild(Y),H.push({el:Y,color:W}),this._eventBindings.push(s(Y,"click",()=>{this.setHSVA(...W.toHSVA(),!0),this._emit("swatchselect",W),this._emit("change",W,"swatch",this)})),!0}return!1}removeSwatch(A){const B=this._swatchColors[A];if(B){const{el:H}=B;return this._root.swatches.removeChild(H),this._swatchColors.splice(A,1),!0}return!1}applyColor(A=!1){const{preview:B,button:H}=this._root,Q=this._color.toRGBA().toString(0);return B.lastColor.style.setProperty("--pcr-color",Q),this.options.useAsButton||H.style.setProperty("--pcr-color",Q),H.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||A||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach(A=>l(...A)),Object.keys(this._components).forEach(A=>this._components[A].destroy())}destroyAndRemove(){this.destroy();const{root:A,app:B}=this._root;A.parentElement&&A.parentElement.removeChild(A),B.parentElement.removeChild(B),Object.keys(this).forEach(H=>this[H]=null)}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(A=360,B=0,H=0,Q=1,W=!1){const Y=this._recalc;if(this._recalc=!1,A<0||A>360||B<0||B>100||H<0||H>100||Q<0||Q>1)return!1;this._color=z(A,B,H,Q);const{hue:X,opacity:ee,palette:se}=this._components;return X.update(A/360),ee.update(Q),se.update(B/100,1-H/100),W||this.applyColor(),Y&&this._updateOutput(),this._recalc=Y,!0}setColor(A,B=!1){if(A===null)return this._clearColor(B),!0;const{values:H,type:Q}=this._parseLocalColor(A);if(H){const W=Q.toUpperCase(),{options:Y}=this._root.interaction,X=Y.find(ee=>ee.getAttribute("data-type")===W);if(X&&!X.hidden)for(const ee of Y)ee.classList[ee===X?"add":"remove"]("active");return!!this.setHSVA(...H,B)&&this.setColorRepresentation(W)}return!1}setColorRepresentation(A){return A=A.toUpperCase(),!!this._root.interaction.options.find(B=>B.getAttribute("data-type").startsWith(A)&&!B.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}};Re(J,"utils",o),Re(J,"version","1.9.1"),Re(J,"I18N_DEFAULTS",{"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"}),Re(J,"DEFAULT_OPTIONS",{appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"}),Re(J,"create",A=>new J(A));let te=J;return r=r.default})())}(Ko)),Ko.exports}var ub=sb();const cb=Ve(ub);class lb{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.pickrs={},["node","stroke","edge","face","label","background","grid"].forEach(r=>{const o=`#${r}-color`;this.pickrs[r]=cb.create({el:o,theme:"nano",default:this.settings[`${r}_color`],components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!0,rgba:!0,input:!0,save:!0}}})})}init(){for(const e in this.pickrs){const t=this.pickrs[e];t.on("change",r=>{const o=r.toRGBA().toString();t.setColor(o),this.eventBus.emit("updateSetting",{key:`${e}_color`,value:o})})}}setColor(e,t){const r=this.pickrs[e];r&&(r.setColor(t),this.eventBus.emit("updateSetting",{key:`${e}_color`,value:t}))}getColor(e){const t=this.pickrs[e];return t?t.getColor().toRGBA().toString():null}resetColors(){for(const e in this.pickrs)this.setColor(e,this.settings[`${e}_color`])}}class db{constructor(){this.eventBus=tv,this.appSettings=new ra(this),this.settings=this.appSettings.settings,this._canvas=new iv(this),this.canvas=this._canvas.canvas,this.layout=new J0(this),this.graphManager=new A0(this,this.settings.historyLimit,this.settings.type),this.rect=new ob(this),this.menu=new N0(this,M0),this.widget=new ib(this),this.keyHandler=new D0(this),this.eventHanders=new I0(this),this.colorPicker=new lb(this),this.simulation=null,this.nodes=[],this.links=[],this.init()}init(){this.menu.init(),this.appSettings.init(),this.widget.init(),this._canvas.init(),this.rect.init(),this.keyHandler.init(),this.eventHanders.init(),this.initSimulation(),this.loadInitialGraph(),this.colorPicker.init(),this.startAnimationLoop()}initSimulation(){this.nodes=this.graphManager.graph.getNodesForD3(),this.links=this.graphManager.graph.getEdgesForD3(),this.simulation=Qg(this.nodes).force("link",Bg(this.links).id(e=>e.id).distance(10).strength(.5)).force("charge",Zg().strength(-300)).force("collide",Fg(20)).force("center",xg(this.canvas.width/2,this.canvas.height/2)).force("x",Jg(this.canvas.width/2).strength(.05)).force("y",ev(this.canvas.height/1).strength(.05)).velocityDecay(.3).alphaDecay(.02),this.appSettings.settings.forceSimulation||this.simulation.stop()}loadInitialGraph(){this.graphManager.loadHitoryFromLocalStorage()||this.graphManager.generator.clusters(20,20,10)}drawGraph(){const e=this.graphManager.graph,t=this.canvas,r=this.appSettings.settings,o=this._canvas.ctx;o.clearRect(0,0,t.width,t.height),e.forEachFace((a,s)=>{s.color||e.setFaceAttribute(a,"color",r.face_color),s.labelColor||e.setFaceAttribute(a,"labelColor",r.label_color),kt.subgraph(e,s.nodes);const l=s.nodes.map(d=>{const p=e.getNodeAttributes(d);return[p.x,p.y]}),h={x:Tn(l,d=>d[0]),y:Tn(l,d=>d[1])};if(l){o.fillStyle=s.color,o.beginPath(),o.moveTo(l[0][0],l[0][1]);for(let d=1;d<l.length;d++)o.lineTo(l[d][0],l[d][1]);o.closePath(),o.fill()}r.faceLabel&&(o.fillStyle=s.labelColor||"#000",o.font=`${r.label_size}px sans-serif`,o.textAlign="center",o.textBaseline="middle",o.fillText(s.label,h.x,h.y))}),e.forEachEdge((a,s,l,h,d,p)=>{if(s.label===void 0){const v=Hr(s.id);e.setEdgeAttribute(a,"label",v)}if(s.color||e.setEdgeAttribute(a,"color",r.edge_color),s.labelColor||e.setEdgeAttribute(a,"labelColor",r.label_color),e.isDirected(a)){const v=p.x-d.x,y=p.y-d.y,b=Math.sqrt(v*v+y*y),_=12+Number(r.edge_size),S=v/b*_,C=y/b*_,D=e.hasEdge(h,l),k=D?d.x+S:d.x,M=D?d.y+C:d.y,x=p.x-S,I=p.y-C;o.beginPath(),o.moveTo(k,M),o.lineTo(x,I),o.strokeStyle=s.selected?"orange":s.color,o.lineWidth=r.edge_size,o.stroke(),o.closePath()}else o.beginPath(),o.moveTo(d.x,d.y),o.lineTo(p.x,p.y),o.strokeStyle=s.selected?"orange":s.color,o.lineWidth=r.edge_size,o.stroke(),o.closePath();if(e.isDirected(a)){const v=14+Number(r.edge_size),y=Math.atan2(p.y-d.y,p.x-d.x),b=p.x-Math.cos(y)*r.node_radius/4,_=p.y-Math.sin(y)*r.node_radius/4;o.beginPath(),o.moveTo(b,_),o.lineTo(b-v*Math.cos(y-Math.PI/6),_-v*Math.sin(y-Math.PI/6)),o.lineTo(b-v*Math.cos(y+Math.PI/6),_-v*Math.sin(y+Math.PI/6)),o.closePath(),o.fillStyle=s.selected?"orange":s.color,o.fill()}if(r.edgeLabel||r.weightLabel){o.fillStyle=s.labelColor,o.font=`${r.label_size}px sans-serif`,o.textAlign="center",o.textBaseline="middle";const v=(d.x+p.x)/2,y=(d.y+p.y)/2,b=p.x-d.x,_=p.y-d.y,S=Math.sqrt(b*b+_*_),C=10,D=-_/S,k=b/S,M=v+D*C+r.label_pos.x,x=y+k*C+r.label_pos.y;r.edgeLabel&&r.weightLabel?s.weight?o.fillText(`${s.label}, ${s.weight}`,M,x):o.fillText(s.label,M,x):!r.edgeLabel&&r.weightLabel&&s.weight?o.fillText(s.weight,M,x):r.edgeLabel&&!r.weightLabel&&o.fillText(s.label,M,x)}}),e.forEachNode((a,s)=>{if(s.label===void 0){const l=Hr(a);e.setNodeAttribute(a,"label",l)}s.color||e.setNodeAttribute(a,"color",r.node_color),s.stroke||e.setNodeAttribute(a,"stroke",r.stroke_color),s.labelColor||e.setNodeAttribute(a,"labelColor",r.label_color),o.beginPath(),o.arc(s.x,s.y,r.node_radius*s.size,0,2*Math.PI),o.fillStyle=s.selected?"orange":s.color,o.fill(),this.settings.stroke_size!=0&&(o.lineWidth=this.settings.stroke_size,o.strokeStyle=s.selected?"orange":s.stroke,o.stroke()),o.closePath(),r.vertexLabel&&(o.fillStyle=s.labelColor,o.font=`${r.label_size}px sans-serif`,o.textAlign="center",o.textBaseline="middle",o.fillText(s.label,s.x+r.label_pos.x,s.y+r.label_pos.y))}),this.rect.draw()}ticked(){this.nodes.forEach(e=>{this.graphManager.graph.updateNodeAttributes(e.id,t=>({...t,x:e.x,y:e.y}))}),this.eventBus.emit("graph:updated",{type:"tick"})}startSimulation(){this.simulation.alpha(.3).restart()}stopSimulation(){this.simulation.stop()}updateSimulation(){this.nodes.length=0,this.nodes=this.graphManager.graph.getNodesForD3(),this.links.length=0,this.links=this.graphManager.graph.getEdgesForD3(),this.simulation.nodes(this.nodes),this.simulation.force("link").links(this.links),this.appSettings.settings.forceSimulation?this.startSimulation():this.stopSimulation()}updateForce(){const e=this.graphManager.graph;this.nodes.length=0,e.forEachNode((t,r)=>{this.nodes.push({id:Number(t),x:r.x,y:r.y})}),this.links.length=0,e.forEachEdge(function(t,r,o,a,s,l){this.links.push({source:Number(o),target:Number(a)})})}startAnimationLoop(){const e=()=>{this.appSettings.settings.forceSimulation&&(this.simulation.tick(),this.ticked()),this.drawGraph(),requestAnimationFrame(e)};requestAnimationFrame(e)}}document.addEventListener("DOMContentLoaded",()=>{const n=new db;window.graphStudio=n,window.addEventListener("resize",()=>{n.canvas.width=window.innerWidth,n.canvas.height=window.innerHeight,n.drawGraph()}),document.querySelectorAll("img").forEach(e=>{e.setAttribute("draggable","false")})});
