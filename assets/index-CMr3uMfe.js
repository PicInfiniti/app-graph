var Jl=Object.defineProperty;var Ca=n=>{throw TypeError(n)};var ed=(n,e,t)=>e in n?Jl(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ia=(n,e,t)=>ed(n,typeof e!="symbol"?e+"":e,t),za=(n,e,t)=>e.has(n)||Ca("Cannot "+t);var On=(n,e,t)=>(za(n,e,"read from private field"),t?t.call(n):e.get(n)),Ta=(n,e,t)=>e.has(n)?Ca("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Pa=(n,e,t,r)=>(za(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var td={value:()=>{}};function dr(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new er(t)}function er(n){this._=n}function nd(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}er.prototype=dr.prototype={constructor:er,on:function(n,e){var t=this._,r=nd(n+"",t),i,o=-1,u=r.length;if(arguments.length<2){for(;++o<u;)if((i=(n=r[o]).type)&&(i=rd(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<u;)if(i=(n=r[o]).type)t[i]=La(t[i],n.name,e);else if(e==null)for(i in t)t[i]=La(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new er(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,o;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],r=0,i=o.length;r<i;++r)o[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,o=r.length;i<o;++i)r[i].value.apply(e,t)}};function rd(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function La(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=td,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var oo="http://www.w3.org/1999/xhtml";const $a={svg:"http://www.w3.org/2000/svg",xhtml:oo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hr(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),$a.hasOwnProperty(e)?{space:$a[e],local:n}:n}function id(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===oo&&e.documentElement.namespaceURI===oo?e.createElement(n):e.createElementNS(t,n)}}function od(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Wu(n){var e=hr(n);return(e.local?od:id)(e)}function ad(){}function yo(n){return n==null?ad:function(){return this.querySelector(n)}}function sd(n){typeof n!="function"&&(n=yo(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],u=o.length,l=r[i]=new Array(u),h,d,p=0;p<u;++p)(h=o[p])&&(d=n.call(h,h.__data__,p,o))&&("__data__"in h&&(d.__data__=h.__data__),l[p]=d);return new Ce(r,this._parents)}function ud(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function cd(){return[]}function Hu(n){return n==null?cd:function(){return this.querySelectorAll(n)}}function ld(n){return function(){return ud(n.apply(this,arguments))}}function dd(n){typeof n=="function"?n=ld(n):n=Hu(n);for(var e=this._groups,t=e.length,r=[],i=[],o=0;o<t;++o)for(var u=e[o],l=u.length,h,d=0;d<l;++d)(h=u[d])&&(r.push(n.call(h,h.__data__,d,u)),i.push(h));return new Ce(r,i)}function Yu(n){return function(){return this.matches(n)}}function Ku(n){return function(e){return e.matches(n)}}var hd=Array.prototype.find;function fd(n){return function(){return hd.call(this.children,n)}}function pd(){return this.firstElementChild}function gd(n){return this.select(n==null?pd:fd(typeof n=="function"?n:Ku(n)))}var vd=Array.prototype.filter;function yd(){return Array.from(this.children)}function md(n){return function(){return vd.call(this.children,n)}}function wd(n){return this.selectAll(n==null?yd:md(typeof n=="function"?n:Ku(n)))}function bd(n){typeof n!="function"&&(n=Yu(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],u=o.length,l=r[i]=[],h,d=0;d<u;++d)(h=o[d])&&n.call(h,h.__data__,d,o)&&l.push(h);return new Ce(r,this._parents)}function Xu(n){return new Array(n.length)}function xd(){return new Ce(this._enter||this._groups.map(Xu),this._parents)}function ir(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}ir.prototype={constructor:ir,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function Ed(n){return function(){return n}}function _d(n,e,t,r,i,o){for(var u=0,l,h=e.length,d=o.length;u<d;++u)(l=e[u])?(l.__data__=o[u],r[u]=l):t[u]=new ir(n,o[u]);for(;u<h;++u)(l=e[u])&&(i[u]=l)}function Sd(n,e,t,r,i,o,u){var l,h,d=new Map,p=e.length,v=o.length,y=new Array(p),w;for(l=0;l<p;++l)(h=e[l])&&(y[l]=w=u.call(h,h.__data__,l,e)+"",d.has(w)?i[l]=h:d.set(w,h));for(l=0;l<v;++l)w=u.call(n,o[l],l,o)+"",(h=d.get(w))?(r[l]=h,h.__data__=o[l],d.delete(w)):t[l]=new ir(n,o[l]);for(l=0;l<p;++l)(h=e[l])&&d.get(y[l])===h&&(i[l]=h)}function Ad(n){return n.__data__}function kd(n,e){if(!arguments.length)return Array.from(this,Ad);var t=e?Sd:_d,r=this._parents,i=this._groups;typeof n!="function"&&(n=Ed(n));for(var o=i.length,u=new Array(o),l=new Array(o),h=new Array(o),d=0;d<o;++d){var p=r[d],v=i[d],y=v.length,w=Nd(n.call(p,p&&p.__data__,d,r)),S=w.length,E=l[d]=new Array(S),N=u[d]=new Array(S),k=h[d]=new Array(y);t(p,v,E,N,k,w,e);for(var A=0,I=0,x,M;A<S;++A)if(x=E[A]){for(A>=I&&(I=A+1);!(M=N[I])&&++I<S;);x._next=M||null}}return u=new Ce(u,r),u._enter=l,u._exit=h,u}function Nd(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Md(){return new Ce(this._exit||this._groups.map(Xu),this._parents)}function Dd(n,e,t){var r=this.enter(),i=this,o=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(i=e(i),i&&(i=i.selection())),t==null?o.remove():t(o),r&&i?r.merge(i).order():i}function Cd(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,i=t.length,o=r.length,u=Math.min(i,o),l=new Array(i),h=0;h<u;++h)for(var d=t[h],p=r[h],v=d.length,y=l[h]=new Array(v),w,S=0;S<v;++S)(w=d[S]||p[S])&&(y[S]=w);for(;h<i;++h)l[h]=t[h];return new Ce(l,this._parents)}function Id(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],i=r.length-1,o=r[i],u;--i>=0;)(u=r[i])&&(o&&u.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(u,o),o=u);return this}function zd(n){n||(n=Td);function e(v,y){return v&&y?n(v.__data__,y.__data__):!v-!y}for(var t=this._groups,r=t.length,i=new Array(r),o=0;o<r;++o){for(var u=t[o],l=u.length,h=i[o]=new Array(l),d,p=0;p<l;++p)(d=u[p])&&(h[p]=d);h.sort(e)}return new Ce(i,this._parents).order()}function Td(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function Pd(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Ld(){return Array.from(this)}function $d(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null}function Gd(){let n=0;for(const e of this)++n;return n}function Od(){return!this.node()}function Rd(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],o=0,u=i.length,l;o<u;++o)(l=i[o])&&n.call(l,l.__data__,o,i);return this}function qd(n){return function(){this.removeAttribute(n)}}function Bd(n){return function(){this.removeAttributeNS(n.space,n.local)}}function jd(n,e){return function(){this.setAttribute(n,e)}}function Ud(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function Fd(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function Wd(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function Hd(n,e){var t=hr(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?Bd:qd:typeof e=="function"?t.local?Wd:Fd:t.local?Ud:jd)(t,e))}function Vu(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function Yd(n){return function(){this.style.removeProperty(n)}}function Kd(n,e,t){return function(){this.style.setProperty(n,e,t)}}function Xd(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function Vd(n,e,t){return arguments.length>1?this.each((e==null?Yd:typeof e=="function"?Xd:Kd)(n,e,t??"")):Ut(this.node(),n)}function Ut(n,e){return n.style.getPropertyValue(e)||Vu(n).getComputedStyle(n,null).getPropertyValue(e)}function Qd(n){return function(){delete this[n]}}function Zd(n,e){return function(){this[n]=e}}function Jd(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function eh(n,e){return arguments.length>1?this.each((e==null?Qd:typeof e=="function"?Jd:Zd)(n,e)):this.node()[n]}function Qu(n){return n.trim().split(/^|\s+/)}function mo(n){return n.classList||new Zu(n)}function Zu(n){this._node=n,this._names=Qu(n.getAttribute("class")||"")}Zu.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function Ju(n,e){for(var t=mo(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function ec(n,e){for(var t=mo(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function th(n){return function(){Ju(this,n)}}function nh(n){return function(){ec(this,n)}}function rh(n,e){return function(){(e.apply(this,arguments)?Ju:ec)(this,n)}}function ih(n,e){var t=Qu(n+"");if(arguments.length<2){for(var r=mo(this.node()),i=-1,o=t.length;++i<o;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?rh:e?th:nh)(t,e))}function oh(){this.textContent=""}function ah(n){return function(){this.textContent=n}}function sh(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function uh(n){return arguments.length?this.each(n==null?oh:(typeof n=="function"?sh:ah)(n)):this.node().textContent}function ch(){this.innerHTML=""}function lh(n){return function(){this.innerHTML=n}}function dh(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function hh(n){return arguments.length?this.each(n==null?ch:(typeof n=="function"?dh:lh)(n)):this.node().innerHTML}function fh(){this.nextSibling&&this.parentNode.appendChild(this)}function ph(){return this.each(fh)}function gh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vh(){return this.each(gh)}function yh(n){var e=typeof n=="function"?n:Wu(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function mh(){return null}function wh(n,e){var t=typeof n=="function"?n:Wu(n),r=e==null?mh:typeof e=="function"?e:yo(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function bh(){var n=this.parentNode;n&&n.removeChild(this)}function xh(){return this.each(bh)}function Eh(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function _h(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function Sh(n){return this.select(n?_h:Eh)}function Ah(n){return arguments.length?this.property("__data__",n):this.node().__data__}function kh(n){return function(e){n.call(this,e,this.__data__)}}function Nh(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function Mh(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,i=e.length,o;t<i;++t)o=e[t],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Dh(n,e,t){return function(){var r=this.__on,i,o=kh(e);if(r){for(var u=0,l=r.length;u<l;++u)if((i=r[u]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=t),i.value=e;return}}this.addEventListener(n.type,o,t),i={type:n.type,name:n.name,value:e,listener:o,options:t},r?r.push(i):this.__on=[i]}}function Ch(n,e,t){var r=Nh(n+""),i,o=r.length,u;if(arguments.length<2){var l=this.node().__on;if(l){for(var h=0,d=l.length,p;h<d;++h)for(i=0,p=l[h];i<o;++i)if((u=r[i]).type===p.type&&u.name===p.name)return p.value}return}for(l=e?Dh:Mh,i=0;i<o;++i)this.each(l(r[i],e,t));return this}function tc(n,e,t){var r=Vu(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function Ih(n,e){return function(){return tc(this,n,e)}}function zh(n,e){return function(){return tc(this,n,e.apply(this,arguments))}}function Th(n,e){return this.each((typeof e=="function"?zh:Ih)(n,e))}function*Ph(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,o=r.length,u;i<o;++i)(u=r[i])&&(yield u)}var nc=[null];function Ce(n,e){this._groups=n,this._parents=e}function xn(){return new Ce([[document.documentElement]],nc)}function Lh(){return this}Ce.prototype=xn.prototype={constructor:Ce,select:sd,selectAll:dd,selectChild:gd,selectChildren:wd,filter:bd,data:kd,enter:xd,exit:Md,join:Dd,merge:Cd,selection:Lh,order:Id,sort:zd,call:Pd,nodes:Ld,node:$d,size:Gd,empty:Od,each:Rd,attr:Hd,style:Vd,property:eh,classed:ih,text:uh,html:hh,raise:ph,lower:vh,append:yh,insert:wh,remove:xh,clone:Sh,datum:Ah,on:Ch,dispatch:Th,[Symbol.iterator]:Ph};function Nt(n){return typeof n=="string"?new Ce([[document.querySelector(n)]],[document.documentElement]):new Ce([[n]],nc)}function $h(n){let e;for(;e=n.sourceEvent;)n=e;return n}function Te(n,e){if(n=$h(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop]}}return[n.pageX,n.pageY]}const Gh={passive:!1},gn={capture:!0,passive:!1};function qr(n){n.stopImmediatePropagation()}function Bt(n){n.preventDefault(),n.stopImmediatePropagation()}function Oh(n){var e=n.document.documentElement,t=Nt(n).on("dragstart.drag",Bt,gn);"onselectstart"in e?t.on("selectstart.drag",Bt,gn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Rh(n,e){var t=n.document.documentElement,r=Nt(n).on("dragstart.drag",null);e&&(r.on("click.drag",Bt,gn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const Rn=n=>()=>n;function ao(n,{sourceEvent:e,subject:t,target:r,identifier:i,active:o,x:u,y:l,dx:h,dy:d,dispatch:p}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:p}})}ao.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function qh(n){return!n.ctrlKey&&!n.button}function Bh(){return this.parentNode}function jh(n,e){return e??{x:n.x,y:n.y}}function Uh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fh(){var n=qh,e=Bh,t=jh,r=Uh,i={},o=dr("start","drag","end"),u=0,l,h,d,p,v=0;function y(x){x.on("mousedown.drag",w).filter(r).on("touchstart.drag",N).on("touchmove.drag",k,Gh).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(x,M){if(!(p||!n.call(this,x,M))){var $=I(this,e.call(this,x,M),x,M,"mouse");$&&(Nt(x.view).on("mousemove.drag",S,gn).on("mouseup.drag",E,gn),Oh(x.view),qr(x),d=!1,l=x.clientX,h=x.clientY,$("start",x))}}function S(x){if(Bt(x),!d){var M=x.clientX-l,$=x.clientY-h;d=M*M+$*$>v}i.mouse("drag",x)}function E(x){Nt(x.view).on("mousemove.drag mouseup.drag",null),Rh(x.view,d),Bt(x),i.mouse("end",x)}function N(x,M){if(n.call(this,x,M)){var $=x.changedTouches,m=e.call(this,x,M),C=$.length,z,P;for(z=0;z<C;++z)(P=I(this,m,x,M,$[z].identifier,$[z]))&&(qr(x),P("start",x,$[z]))}}function k(x){var M=x.changedTouches,$=M.length,m,C;for(m=0;m<$;++m)(C=i[M[m].identifier])&&(Bt(x),C("drag",x,M[m]))}function A(x){var M=x.changedTouches,$=M.length,m,C;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),m=0;m<$;++m)(C=i[M[m].identifier])&&(qr(x),C("end",x,M[m]))}function I(x,M,$,m,C,z){var P=o.copy(),G=Te(z||$,M),q,j,H;if((H=t.call(x,new ao("beforestart",{sourceEvent:$,target:y,identifier:C,active:u,x:G[0],y:G[1],dx:0,dy:0,dispatch:P}),m))!=null)return q=H.x-G[0]||0,j=H.y-G[1]||0,function U(X,ne,he){var ue=G,le;switch(X){case"start":i[C]=U,le=u++;break;case"end":delete i[C],--u;case"drag":G=Te(he||ne,M),le=u;break}P.call(X,x,new ao(X,{sourceEvent:ne,subject:H,target:y,identifier:C,active:le,x:G[0]+q,y:G[1]+j,dx:G[0]-ue[0],dy:G[1]-ue[1],dispatch:P}),m)}}return y.filter=function(x){return arguments.length?(n=typeof x=="function"?x:Rn(!!x),y):n},y.container=function(x){return arguments.length?(e=typeof x=="function"?x:Rn(x),y):e},y.subject=function(x){return arguments.length?(t=typeof x=="function"?x:Rn(x),y):t},y.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:Rn(!!x),y):r},y.on=function(){var x=o.on.apply(o,arguments);return x===o?y:x},y.clickDistance=function(x){return arguments.length?(v=(x=+x)*x,y):Math.sqrt(v)},y}function wo(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function rc(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function En(){}var vn=.7,or=1/vn,jt="\\s*([+-]?\\d+)\\s*",yn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wh=/^#([0-9a-f]{3,8})$/,Hh=new RegExp(`^rgb\\(${jt},${jt},${jt}\\)$`),Yh=new RegExp(`^rgb\\(${Xe},${Xe},${Xe}\\)$`),Kh=new RegExp(`^rgba\\(${jt},${jt},${jt},${yn}\\)$`),Xh=new RegExp(`^rgba\\(${Xe},${Xe},${Xe},${yn}\\)$`),Vh=new RegExp(`^hsl\\(${yn},${Xe},${Xe}\\)$`),Qh=new RegExp(`^hsla\\(${yn},${Xe},${Xe},${yn}\\)$`),Ga={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wo(En,mn,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Oa,formatHex:Oa,formatHex8:Zh,formatHsl:Jh,formatRgb:Ra,toString:Ra});function Oa(){return this.rgb().formatHex()}function Zh(){return this.rgb().formatHex8()}function Jh(){return ic(this).formatHsl()}function Ra(){return this.rgb().formatRgb()}function mn(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Wh.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?qa(e):t===3?new Me(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?qn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?qn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Hh.exec(n))?new Me(e[1],e[2],e[3],1):(e=Yh.exec(n))?new Me(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Kh.exec(n))?qn(e[1],e[2],e[3],e[4]):(e=Xh.exec(n))?qn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Vh.exec(n))?Ua(e[1],e[2]/100,e[3]/100,1):(e=Qh.exec(n))?Ua(e[1],e[2]/100,e[3]/100,e[4]):Ga.hasOwnProperty(n)?qa(Ga[n]):n==="transparent"?new Me(NaN,NaN,NaN,0):null}function qa(n){return new Me(n>>16&255,n>>8&255,n&255,1)}function qn(n,e,t,r){return r<=0&&(n=e=t=NaN),new Me(n,e,t,r)}function ef(n){return n instanceof En||(n=mn(n)),n?(n=n.rgb(),new Me(n.r,n.g,n.b,n.opacity)):new Me}function so(n,e,t,r){return arguments.length===1?ef(n):new Me(n,e,t,r??1)}function Me(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}wo(Me,so,rc(En,{brighter(n){return n=n==null?or:Math.pow(or,n),new Me(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?vn:Math.pow(vn,n),new Me(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Me(Mt(this.r),Mt(this.g),Mt(this.b),ar(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ba,formatHex:Ba,formatHex8:tf,formatRgb:ja,toString:ja}));function Ba(){return`#${At(this.r)}${At(this.g)}${At(this.b)}`}function tf(){return`#${At(this.r)}${At(this.g)}${At(this.b)}${At((isNaN(this.opacity)?1:this.opacity)*255)}`}function ja(){const n=ar(this.opacity);return`${n===1?"rgb(":"rgba("}${Mt(this.r)}, ${Mt(this.g)}, ${Mt(this.b)}${n===1?")":`, ${n})`}`}function ar(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Mt(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function At(n){return n=Mt(n),(n<16?"0":"")+n.toString(16)}function Ua(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Be(n,e,t,r)}function ic(n){if(n instanceof Be)return new Be(n.h,n.s,n.l,n.opacity);if(n instanceof En||(n=mn(n)),!n)return new Be;if(n instanceof Be)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),o=Math.max(e,t,r),u=NaN,l=o-i,h=(o+i)/2;return l?(e===o?u=(t-r)/l+(t<r)*6:t===o?u=(r-e)/l+2:u=(e-t)/l+4,l/=h<.5?o+i:2-o-i,u*=60):l=h>0&&h<1?0:u,new Be(u,l,h,n.opacity)}function nf(n,e,t,r){return arguments.length===1?ic(n):new Be(n,e,t,r??1)}function Be(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}wo(Be,nf,rc(En,{brighter(n){return n=n==null?or:Math.pow(or,n),new Be(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?vn:Math.pow(vn,n),new Be(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Me(Br(n>=240?n-240:n+120,i,r),Br(n,i,r),Br(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Be(Fa(this.h),Bn(this.s),Bn(this.l),ar(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=ar(this.opacity);return`${n===1?"hsl(":"hsla("}${Fa(this.h)}, ${Bn(this.s)*100}%, ${Bn(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Fa(n){return n=(n||0)%360,n<0?n+360:n}function Bn(n){return Math.max(0,Math.min(1,n||0))}function Br(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const oc=n=>()=>n;function rf(n,e){return function(t){return n+t*e}}function of(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function af(n){return(n=+n)==1?ac:function(e,t){return t-e?of(e,t,n):oc(isNaN(e)?t:e)}}function ac(n,e){var t=e-n;return t?rf(n,t):oc(isNaN(n)?e:n)}const Wa=function n(e){var t=af(e);function r(i,o){var u=t((i=so(i)).r,(o=so(o)).r),l=t(i.g,o.g),h=t(i.b,o.b),d=ac(i.opacity,o.opacity);return function(p){return i.r=u(p),i.g=l(p),i.b=h(p),i.opacity=d(p),i+""}}return r.gamma=n,r}(1);function mt(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var uo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jr=new RegExp(uo.source,"g");function sf(n){return function(){return n}}function uf(n){return function(e){return n(e)+""}}function cf(n,e){var t=uo.lastIndex=jr.lastIndex=0,r,i,o,u=-1,l=[],h=[];for(n=n+"",e=e+"";(r=uo.exec(n))&&(i=jr.exec(e));)(o=i.index)>t&&(o=e.slice(t,o),l[u]?l[u]+=o:l[++u]=o),(r=r[0])===(i=i[0])?l[u]?l[u]+=i:l[++u]=i:(l[++u]=null,h.push({i:u,x:mt(r,i)})),t=jr.lastIndex;return t<e.length&&(o=e.slice(t),l[u]?l[u]+=o:l[++u]=o),l.length<2?h[0]?uf(h[0].x):sf(e):(e=h.length,function(d){for(var p=0,v;p<e;++p)l[(v=h[p]).i]=v.x(d);return l.join("")})}var Ha=180/Math.PI,co={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function sc(n,e,t,r,i,o){var u,l,h;return(u=Math.sqrt(n*n+e*e))&&(n/=u,e/=u),(h=n*t+e*r)&&(t-=n*h,r-=e*h),(l=Math.sqrt(t*t+r*r))&&(t/=l,r/=l,h/=l),n*r<e*t&&(n=-n,e=-e,h=-h,u=-u),{translateX:i,translateY:o,rotate:Math.atan2(e,n)*Ha,skewX:Math.atan(h)*Ha,scaleX:u,scaleY:l}}var jn;function lf(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?co:sc(e.a,e.b,e.c,e.d,e.e,e.f)}function df(n){return n==null||(jn||(jn=document.createElementNS("http://www.w3.org/2000/svg","g")),jn.setAttribute("transform",n),!(n=jn.transform.baseVal.consolidate()))?co:(n=n.matrix,sc(n.a,n.b,n.c,n.d,n.e,n.f))}function uc(n,e,t,r){function i(d){return d.length?d.pop()+" ":""}function o(d,p,v,y,w,S){if(d!==v||p!==y){var E=w.push("translate(",null,e,null,t);S.push({i:E-4,x:mt(d,v)},{i:E-2,x:mt(p,y)})}else(v||y)&&w.push("translate("+v+e+y+t)}function u(d,p,v,y){d!==p?(d-p>180?p+=360:p-d>180&&(d+=360),y.push({i:v.push(i(v)+"rotate(",null,r)-2,x:mt(d,p)})):p&&v.push(i(v)+"rotate("+p+r)}function l(d,p,v,y){d!==p?y.push({i:v.push(i(v)+"skewX(",null,r)-2,x:mt(d,p)}):p&&v.push(i(v)+"skewX("+p+r)}function h(d,p,v,y,w,S){if(d!==v||p!==y){var E=w.push(i(w)+"scale(",null,",",null,")");S.push({i:E-4,x:mt(d,v)},{i:E-2,x:mt(p,y)})}else(v!==1||y!==1)&&w.push(i(w)+"scale("+v+","+y+")")}return function(d,p){var v=[],y=[];return d=n(d),p=n(p),o(d.translateX,d.translateY,p.translateX,p.translateY,v,y),u(d.rotate,p.rotate,v,y),l(d.skewX,p.skewX,v,y),h(d.scaleX,d.scaleY,p.scaleX,p.scaleY,v,y),d=p=null,function(w){for(var S=-1,E=y.length,N;++S<E;)v[(N=y[S]).i]=N.x(w);return v.join("")}}}var hf=uc(lf,"px, ","px)","deg)"),ff=uc(df,", ",")",")"),Ft=0,dn=0,rn=0,cc=1e3,sr,hn,ur=0,Dt=0,fr=0,wn=typeof performance=="object"&&performance.now?performance:Date,lc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function bo(){return Dt||(lc(pf),Dt=wn.now()+fr)}function pf(){Dt=0}function cr(){this._call=this._time=this._next=null}cr.prototype=xo.prototype={constructor:cr,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?bo():+t)+(e==null?0:+e),!this._next&&hn!==this&&(hn?hn._next=this:sr=this,hn=this),this._call=n,this._time=t,lo()},stop:function(){this._call&&(this._call=null,this._time=1/0,lo())}};function xo(n,e,t){var r=new cr;return r.restart(n,e,t),r}function gf(){bo(),++Ft;for(var n=sr,e;n;)(e=Dt-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Ft}function Ya(){Dt=(ur=wn.now())+fr,Ft=dn=0;try{gf()}finally{Ft=0,yf(),Dt=0}}function vf(){var n=wn.now(),e=n-ur;e>cc&&(fr-=e,ur=n)}function yf(){for(var n,e=sr,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:sr=t);hn=n,lo(r)}function lo(n){if(!Ft){dn&&(dn=clearTimeout(dn));var e=n-Dt;e>24?(n<1/0&&(dn=setTimeout(Ya,n-wn.now()-fr)),rn&&(rn=clearInterval(rn))):(rn||(ur=wn.now(),rn=setInterval(vf,cc)),Ft=1,lc(Ya))}}function Ka(n,e,t){var r=new cr;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}var mf=dr("start","end","cancel","interrupt"),wf=[],dc=0,Xa=1,ho=2,tr=3,Va=4,fo=5,nr=6;function pr(n,e,t,r,i,o){var u=n.__transition;if(!u)n.__transition={};else if(t in u)return;bf(n,t,{name:e,index:r,group:i,on:mf,tween:wf,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:dc})}function Eo(n,e){var t=je(n,e);if(t.state>dc)throw new Error("too late; already scheduled");return t}function Ve(n,e){var t=je(n,e);if(t.state>tr)throw new Error("too late; already running");return t}function je(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function bf(n,e,t){var r=n.__transition,i;r[e]=t,t.timer=xo(o,0,t.time);function o(d){t.state=Xa,t.timer.restart(u,t.delay,t.time),t.delay<=d&&u(d-t.delay)}function u(d){var p,v,y,w;if(t.state!==Xa)return h();for(p in r)if(w=r[p],w.name===t.name){if(w.state===tr)return Ka(u);w.state===Va?(w.state=nr,w.timer.stop(),w.on.call("interrupt",n,n.__data__,w.index,w.group),delete r[p]):+p<e&&(w.state=nr,w.timer.stop(),w.on.call("cancel",n,n.__data__,w.index,w.group),delete r[p])}if(Ka(function(){t.state===tr&&(t.state=Va,t.timer.restart(l,t.delay,t.time),l(d))}),t.state=ho,t.on.call("start",n,n.__data__,t.index,t.group),t.state===ho){for(t.state=tr,i=new Array(y=t.tween.length),p=0,v=-1;p<y;++p)(w=t.tween[p].value.call(n,n.__data__,t.index,t.group))&&(i[++v]=w);i.length=v+1}}function l(d){for(var p=d<t.duration?t.ease.call(null,d/t.duration):(t.timer.restart(h),t.state=fo,1),v=-1,y=i.length;++v<y;)i[v].call(n,p);t.state===fo&&(t.on.call("end",n,n.__data__,t.index,t.group),h())}function h(){t.state=nr,t.timer.stop(),delete r[e];for(var d in r)return;delete n.__transition}}function xf(n,e){var t=n.__transition,r,i,o=!0,u;if(t){e=e==null?null:e+"";for(u in t){if((r=t[u]).name!==e){o=!1;continue}i=r.state>ho&&r.state<fo,r.state=nr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[u]}o&&delete n.__transition}}function Ef(n){return this.each(function(){xf(this,n)})}function _f(n,e){var t,r;return function(){var i=Ve(this,n),o=i.tween;if(o!==t){r=t=o;for(var u=0,l=r.length;u<l;++u)if(r[u].name===e){r=r.slice(),r.splice(u,1);break}}i.tween=r}}function Sf(n,e,t){var r,i;if(typeof t!="function")throw new Error;return function(){var o=Ve(this,n),u=o.tween;if(u!==r){i=(r=u).slice();for(var l={name:e,value:t},h=0,d=i.length;h<d;++h)if(i[h].name===e){i[h]=l;break}h===d&&i.push(l)}o.tween=i}}function Af(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=je(this.node(),t).tween,i=0,o=r.length,u;i<o;++i)if((u=r[i]).name===n)return u.value;return null}return this.each((e==null?_f:Sf)(t,n,e))}function _o(n,e,t){var r=n._id;return n.each(function(){var i=Ve(this,r);(i.value||(i.value={}))[e]=t.apply(this,arguments)}),function(i){return je(i,r).value[e]}}function hc(n,e){var t;return(typeof e=="number"?mt:e instanceof mn?Wa:(t=mn(e))?(e=t,Wa):cf)(n,e)}function kf(n){return function(){this.removeAttribute(n)}}function Nf(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Mf(n,e,t){var r,i=t+"",o;return function(){var u=this.getAttribute(n);return u===i?null:u===r?o:o=e(r=u,t)}}function Df(n,e,t){var r,i=t+"",o;return function(){var u=this.getAttributeNS(n.space,n.local);return u===i?null:u===r?o:o=e(r=u,t)}}function Cf(n,e,t){var r,i,o;return function(){var u,l=t(this),h;return l==null?void this.removeAttribute(n):(u=this.getAttribute(n),h=l+"",u===h?null:u===r&&h===i?o:(i=h,o=e(r=u,l)))}}function If(n,e,t){var r,i,o;return function(){var u,l=t(this),h;return l==null?void this.removeAttributeNS(n.space,n.local):(u=this.getAttributeNS(n.space,n.local),h=l+"",u===h?null:u===r&&h===i?o:(i=h,o=e(r=u,l)))}}function zf(n,e){var t=hr(n),r=t==="transform"?ff:hc;return this.attrTween(n,typeof e=="function"?(t.local?If:Cf)(t,r,_o(this,"attr."+n,e)):e==null?(t.local?Nf:kf)(t):(t.local?Df:Mf)(t,r,e))}function Tf(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function Pf(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function Lf(n,e){var t,r;function i(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&Pf(n,o)),t}return i._value=e,i}function $f(n,e){var t,r;function i(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&Tf(n,o)),t}return i._value=e,i}function Gf(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=hr(n);return this.tween(t,(r.local?Lf:$f)(r,e))}function Of(n,e){return function(){Eo(this,n).delay=+e.apply(this,arguments)}}function Rf(n,e){return e=+e,function(){Eo(this,n).delay=e}}function qf(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Of:Rf)(e,n)):je(this.node(),e).delay}function Bf(n,e){return function(){Ve(this,n).duration=+e.apply(this,arguments)}}function jf(n,e){return e=+e,function(){Ve(this,n).duration=e}}function Uf(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Bf:jf)(e,n)):je(this.node(),e).duration}function Ff(n,e){if(typeof e!="function")throw new Error;return function(){Ve(this,n).ease=e}}function Wf(n){var e=this._id;return arguments.length?this.each(Ff(e,n)):je(this.node(),e).ease}function Hf(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Ve(this,n).ease=t}}function Yf(n){if(typeof n!="function")throw new Error;return this.each(Hf(this._id,n))}function Kf(n){typeof n!="function"&&(n=Yu(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],u=o.length,l=r[i]=[],h,d=0;d<u;++d)(h=o[d])&&n.call(h,h.__data__,d,o)&&l.push(h);return new ct(r,this._parents,this._name,this._id)}function Xf(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,i=t.length,o=Math.min(r,i),u=new Array(r),l=0;l<o;++l)for(var h=e[l],d=t[l],p=h.length,v=u[l]=new Array(p),y,w=0;w<p;++w)(y=h[w]||d[w])&&(v[w]=y);for(;l<r;++l)u[l]=e[l];return new ct(u,this._parents,this._name,this._id)}function Vf(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function Qf(n,e,t){var r,i,o=Vf(e)?Eo:Ve;return function(){var u=o(this,n),l=u.on;l!==r&&(i=(r=l).copy()).on(e,t),u.on=i}}function Zf(n,e){var t=this._id;return arguments.length<2?je(this.node(),t).on.on(n):this.each(Qf(t,n,e))}function Jf(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function ep(){return this.on("end.remove",Jf(this._id))}function tp(n){var e=this._name,t=this._id;typeof n!="function"&&(n=yo(n));for(var r=this._groups,i=r.length,o=new Array(i),u=0;u<i;++u)for(var l=r[u],h=l.length,d=o[u]=new Array(h),p,v,y=0;y<h;++y)(p=l[y])&&(v=n.call(p,p.__data__,y,l))&&("__data__"in p&&(v.__data__=p.__data__),d[y]=v,pr(d[y],e,t,y,d,je(p,t)));return new ct(o,this._parents,e,t)}function np(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Hu(n));for(var r=this._groups,i=r.length,o=[],u=[],l=0;l<i;++l)for(var h=r[l],d=h.length,p,v=0;v<d;++v)if(p=h[v]){for(var y=n.call(p,p.__data__,v,h),w,S=je(p,t),E=0,N=y.length;E<N;++E)(w=y[E])&&pr(w,e,t,E,y,S);o.push(y),u.push(p)}return new ct(o,u,e,t)}var rp=xn.prototype.constructor;function ip(){return new rp(this._groups,this._parents)}function op(n,e){var t,r,i;return function(){var o=Ut(this,n),u=(this.style.removeProperty(n),Ut(this,n));return o===u?null:o===t&&u===r?i:i=e(t=o,r=u)}}function fc(n){return function(){this.style.removeProperty(n)}}function ap(n,e,t){var r,i=t+"",o;return function(){var u=Ut(this,n);return u===i?null:u===r?o:o=e(r=u,t)}}function sp(n,e,t){var r,i,o;return function(){var u=Ut(this,n),l=t(this),h=l+"";return l==null&&(h=l=(this.style.removeProperty(n),Ut(this,n))),u===h?null:u===r&&h===i?o:(i=h,o=e(r=u,l))}}function up(n,e){var t,r,i,o="style."+e,u="end."+o,l;return function(){var h=Ve(this,n),d=h.on,p=h.value[o]==null?l||(l=fc(e)):void 0;(d!==t||i!==p)&&(r=(t=d).copy()).on(u,i=p),h.on=r}}function cp(n,e,t){var r=(n+="")=="transform"?hf:hc;return e==null?this.styleTween(n,op(n,r)).on("end.style."+n,fc(n)):typeof e=="function"?this.styleTween(n,sp(n,r,_o(this,"style."+n,e))).each(up(this._id,n)):this.styleTween(n,ap(n,r,e),t).on("end.style."+n,null)}function lp(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function dp(n,e,t){var r,i;function o(){var u=e.apply(this,arguments);return u!==i&&(r=(i=u)&&lp(n,u,t)),r}return o._value=e,o}function hp(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,dp(n,e,t??""))}function fp(n){return function(){this.textContent=n}}function pp(n){return function(){var e=n(this);this.textContent=e??""}}function gp(n){return this.tween("text",typeof n=="function"?pp(_o(this,"text",n)):fp(n==null?"":n+""))}function vp(n){return function(e){this.textContent=n.call(this,e)}}function yp(n){var e,t;function r(){var i=n.apply(this,arguments);return i!==t&&(e=(t=i)&&vp(i)),e}return r._value=n,r}function mp(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,yp(n))}function wp(){for(var n=this._name,e=this._id,t=pc(),r=this._groups,i=r.length,o=0;o<i;++o)for(var u=r[o],l=u.length,h,d=0;d<l;++d)if(h=u[d]){var p=je(h,e);pr(h,n,t,d,u,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ct(r,this._parents,n,t)}function bp(){var n,e,t=this,r=t._id,i=t.size();return new Promise(function(o,u){var l={value:u},h={value:function(){--i===0&&o()}};t.each(function(){var d=Ve(this,r),p=d.on;p!==n&&(e=(n=p).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(h)),d.on=e}),i===0&&o()})}var xp=0;function ct(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function pc(){return++xp}var at=xn.prototype;ct.prototype={constructor:ct,select:tp,selectAll:np,selectChild:at.selectChild,selectChildren:at.selectChildren,filter:Kf,merge:Xf,selection:ip,transition:wp,call:at.call,nodes:at.nodes,node:at.node,size:at.size,empty:at.empty,each:at.each,on:Zf,attr:zf,attrTween:Gf,style:cp,styleTween:hp,text:gp,textTween:mp,remove:ep,tween:Af,delay:qf,duration:Uf,ease:Wf,easeVarying:Yf,end:bp,[Symbol.iterator]:at[Symbol.iterator]};function Ep(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var _p={time:null,delay:0,duration:250,ease:Ep};function Sp(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function Ap(n){var e,t;n instanceof ct?(e=n._id,n=n._name):(e=pc(),(t=_p).time=bo(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var u=r[o],l=u.length,h,d=0;d<l;++d)(h=u[d])&&pr(h,n,e,d,u,t||Sp(h,e));return new ct(r,this._parents,n,e)}xn.prototype.interrupt=Ef;xn.prototype.transition=Ap;function kp(n,e){var t,r=1;n==null&&(n=0),e==null&&(e=0);function i(){var o,u=t.length,l,h=0,d=0;for(o=0;o<u;++o)l=t[o],h+=l.x,d+=l.y;for(h=(h/u-n)*r,d=(d/u-e)*r,o=0;o<u;++o)l=t[o],l.x-=h,l.y-=d}return i.initialize=function(o){t=o},i.x=function(o){return arguments.length?(n=+o,i):n},i.y=function(o){return arguments.length?(e=+o,i):e},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function Np(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return gc(this.cover(e,t),e,t,n)}function gc(n,e,t,r){if(isNaN(e)||isNaN(t))return n;var i,o=n._root,u={data:r},l=n._x0,h=n._y0,d=n._x1,p=n._y1,v,y,w,S,E,N,k,A;if(!o)return n._root=u,n;for(;o.length;)if((E=e>=(v=(l+d)/2))?l=v:d=v,(N=t>=(y=(h+p)/2))?h=y:p=y,i=o,!(o=o[k=N<<1|E]))return i[k]=u,n;if(w=+n._x.call(null,o.data),S=+n._y.call(null,o.data),e===w&&t===S)return u.next=o,i?i[k]=u:n._root=u,n;do i=i?i[k]=new Array(4):n._root=new Array(4),(E=e>=(v=(l+d)/2))?l=v:d=v,(N=t>=(y=(h+p)/2))?h=y:p=y;while((k=N<<1|E)===(A=(S>=y)<<1|w>=v));return i[A]=o,i[k]=u,n}function Mp(n){var e,t,r=n.length,i,o,u=new Array(r),l=new Array(r),h=1/0,d=1/0,p=-1/0,v=-1/0;for(t=0;t<r;++t)isNaN(i=+this._x.call(null,e=n[t]))||isNaN(o=+this._y.call(null,e))||(u[t]=i,l[t]=o,i<h&&(h=i),i>p&&(p=i),o<d&&(d=o),o>v&&(v=o));if(h>p||d>v)return this;for(this.cover(h,d).cover(p,v),t=0;t<r;++t)gc(this,u[t],l[t],n[t]);return this}function Dp(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(t))i=(t=Math.floor(n))+1,o=(r=Math.floor(e))+1;else{for(var u=i-t||1,l=this._root,h,d;t>n||n>=i||r>e||e>=o;)switch(d=(e<r)<<1|n<t,h=new Array(4),h[d]=l,l=h,u*=2,d){case 0:i=t+u,o=r+u;break;case 1:t=i-u,o=r+u;break;case 2:i=t+u,r=o-u;break;case 3:t=i-u,r=o-u;break}this._root&&this._root.length&&(this._root=l)}return this._x0=t,this._y0=r,this._x1=i,this._y1=o,this}function Cp(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Ip(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ae(n,e,t,r,i){this.node=n,this.x0=e,this.y0=t,this.x1=r,this.y1=i}function zp(n,e,t){var r,i=this._x0,o=this._y0,u,l,h,d,p=this._x1,v=this._y1,y=[],w=this._root,S,E;for(w&&y.push(new Ae(w,i,o,p,v)),t==null?t=1/0:(i=n-t,o=e-t,p=n+t,v=e+t,t*=t);S=y.pop();)if(!(!(w=S.node)||(u=S.x0)>p||(l=S.y0)>v||(h=S.x1)<i||(d=S.y1)<o))if(w.length){var N=(u+h)/2,k=(l+d)/2;y.push(new Ae(w[3],N,k,h,d),new Ae(w[2],u,k,N,d),new Ae(w[1],N,l,h,k),new Ae(w[0],u,l,N,k)),(E=(e>=k)<<1|n>=N)&&(S=y[y.length-1],y[y.length-1]=y[y.length-1-E],y[y.length-1-E]=S)}else{var A=n-+this._x.call(null,w.data),I=e-+this._y.call(null,w.data),x=A*A+I*I;if(x<t){var M=Math.sqrt(t=x);i=n-M,o=e-M,p=n+M,v=e+M,r=w.data}}return r}function Tp(n){if(isNaN(p=+this._x.call(null,n))||isNaN(v=+this._y.call(null,n)))return this;var e,t=this._root,r,i,o,u=this._x0,l=this._y0,h=this._x1,d=this._y1,p,v,y,w,S,E,N,k;if(!t)return this;if(t.length)for(;;){if((S=p>=(y=(u+h)/2))?u=y:h=y,(E=v>=(w=(l+d)/2))?l=w:d=w,e=t,!(t=t[N=E<<1|S]))return this;if(!t.length)break;(e[N+1&3]||e[N+2&3]||e[N+3&3])&&(r=e,k=N)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(o=t.next)&&delete t.next,i?(o?i.next=o:delete i.next,this):e?(o?e[N]=o:delete e[N],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[k]=t:this._root=t),this):(this._root=o,this)}function Pp(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function Lp(){return this._root}function $p(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Gp(n){var e=[],t,r=this._root,i,o,u,l,h;for(r&&e.push(new Ae(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(r=t.node,o=t.x0,u=t.y0,l=t.x1,h=t.y1)&&r.length){var d=(o+l)/2,p=(u+h)/2;(i=r[3])&&e.push(new Ae(i,d,p,l,h)),(i=r[2])&&e.push(new Ae(i,o,p,d,h)),(i=r[1])&&e.push(new Ae(i,d,u,l,p)),(i=r[0])&&e.push(new Ae(i,o,u,d,p))}return this}function Op(n){var e=[],t=[],r;for(this._root&&e.push(new Ae(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,u=r.x0,l=r.y0,h=r.x1,d=r.y1,p=(u+h)/2,v=(l+d)/2;(o=i[0])&&e.push(new Ae(o,u,l,p,v)),(o=i[1])&&e.push(new Ae(o,p,l,h,v)),(o=i[2])&&e.push(new Ae(o,u,v,p,d)),(o=i[3])&&e.push(new Ae(o,p,v,h,d))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Rp(n){return n[0]}function qp(n){return arguments.length?(this._x=n,this):this._x}function Bp(n){return n[1]}function jp(n){return arguments.length?(this._y=n,this):this._y}function So(n,e,t){var r=new Ao(e??Rp,t??Bp,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function Ao(n,e,t,r,i,o){this._x=n,this._y=e,this._x0=t,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Qa(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var Ne=So.prototype=Ao.prototype;Ne.copy=function(){var n=new Ao(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=Qa(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Qa(r));return n};Ne.add=Np;Ne.addAll=Mp;Ne.cover=Dp;Ne.data=Cp;Ne.extent=Ip;Ne.find=zp;Ne.remove=Tp;Ne.removeAll=Pp;Ne.root=Lp;Ne.size=$p;Ne.visit=Gp;Ne.visitAfter=Op;Ne.x=qp;Ne.y=jp;function ke(n){return function(){return n}}function wt(n){return(n()-.5)*1e-6}function Up(n){return n.x+n.vx}function Fp(n){return n.y+n.vy}function Wp(n){var e,t,r,i=1,o=1;typeof n!="function"&&(n=ke(n==null?1:+n));function u(){for(var d,p=e.length,v,y,w,S,E,N,k=0;k<o;++k)for(v=So(e,Up,Fp).visitAfter(l),d=0;d<p;++d)y=e[d],E=t[y.index],N=E*E,w=y.x+y.vx,S=y.y+y.vy,v.visit(A);function A(I,x,M,$,m){var C=I.data,z=I.r,P=E+z;if(C){if(C.index>y.index){var G=w-C.x-C.vx,q=S-C.y-C.vy,j=G*G+q*q;j<P*P&&(G===0&&(G=wt(r),j+=G*G),q===0&&(q=wt(r),j+=q*q),j=(P-(j=Math.sqrt(j)))/j*i,y.vx+=(G*=j)*(P=(z*=z)/(N+z)),y.vy+=(q*=j)*P,C.vx-=G*(P=1-P),C.vy-=q*P)}return}return x>w+P||$<w-P||M>S+P||m<S-P}}function l(d){if(d.data)return d.r=t[d.data.index];for(var p=d.r=0;p<4;++p)d[p]&&d[p].r>d.r&&(d.r=d[p].r)}function h(){if(e){var d,p=e.length,v;for(t=new Array(p),d=0;d<p;++d)v=e[d],t[v.index]=+n(v,d,e)}}return u.initialize=function(d,p){e=d,r=p,h()},u.iterations=function(d){return arguments.length?(o=+d,u):o},u.strength=function(d){return arguments.length?(i=+d,u):i},u.radius=function(d){return arguments.length?(n=typeof d=="function"?d:ke(+d),h(),u):n},u}function Hp(n){return n.index}function Za(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function Yp(n){var e=Hp,t=v,r,i=ke(30),o,u,l,h,d,p=1;n==null&&(n=[]);function v(N){return 1/Math.min(l[N.source.index],l[N.target.index])}function y(N){for(var k=0,A=n.length;k<p;++k)for(var I=0,x,M,$,m,C,z,P;I<A;++I)x=n[I],M=x.source,$=x.target,m=$.x+$.vx-M.x-M.vx||wt(d),C=$.y+$.vy-M.y-M.vy||wt(d),z=Math.sqrt(m*m+C*C),z=(z-o[I])/z*N*r[I],m*=z,C*=z,$.vx-=m*(P=h[I]),$.vy-=C*P,M.vx+=m*(P=1-P),M.vy+=C*P}function w(){if(u){var N,k=u.length,A=n.length,I=new Map(u.map((M,$)=>[e(M,$,u),M])),x;for(N=0,l=new Array(k);N<A;++N)x=n[N],x.index=N,typeof x.source!="object"&&(x.source=Za(I,x.source)),typeof x.target!="object"&&(x.target=Za(I,x.target)),l[x.source.index]=(l[x.source.index]||0)+1,l[x.target.index]=(l[x.target.index]||0)+1;for(N=0,h=new Array(A);N<A;++N)x=n[N],h[N]=l[x.source.index]/(l[x.source.index]+l[x.target.index]);r=new Array(A),S(),o=new Array(A),E()}}function S(){if(u)for(var N=0,k=n.length;N<k;++N)r[N]=+t(n[N],N,n)}function E(){if(u)for(var N=0,k=n.length;N<k;++N)o[N]=+i(n[N],N,n)}return y.initialize=function(N,k){u=N,d=k,w()},y.links=function(N){return arguments.length?(n=N,w(),y):n},y.id=function(N){return arguments.length?(e=N,y):e},y.iterations=function(N){return arguments.length?(p=+N,y):p},y.strength=function(N){return arguments.length?(t=typeof N=="function"?N:ke(+N),S(),y):t},y.distance=function(N){return arguments.length?(i=typeof N=="function"?N:ke(+N),E(),y):i},y}const Kp=1664525,Xp=1013904223,Ja=4294967296;function Vp(){let n=1;return()=>(n=(Kp*n+Xp)%Ja)/Ja}function Qp(n){return n.x}function Zp(n){return n.y}var Jp=10,eg=Math.PI*(3-Math.sqrt(5));function tg(n){var e,t=1,r=.001,i=1-Math.pow(r,1/300),o=0,u=.6,l=new Map,h=xo(v),d=dr("tick","end"),p=Vp();n==null&&(n=[]);function v(){y(),d.call("tick",e),t<r&&(h.stop(),d.call("end",e))}function y(E){var N,k=n.length,A;E===void 0&&(E=1);for(var I=0;I<E;++I)for(t+=(o-t)*i,l.forEach(function(x){x(t)}),N=0;N<k;++N)A=n[N],A.fx==null?A.x+=A.vx*=u:(A.x=A.fx,A.vx=0),A.fy==null?A.y+=A.vy*=u:(A.y=A.fy,A.vy=0);return e}function w(){for(var E=0,N=n.length,k;E<N;++E){if(k=n[E],k.index=E,k.fx!=null&&(k.x=k.fx),k.fy!=null&&(k.y=k.fy),isNaN(k.x)||isNaN(k.y)){var A=Jp*Math.sqrt(.5+E),I=E*eg;k.x=A*Math.cos(I),k.y=A*Math.sin(I)}(isNaN(k.vx)||isNaN(k.vy))&&(k.vx=k.vy=0)}}function S(E){return E.initialize&&E.initialize(n,p),E}return w(),e={tick:y,restart:function(){return h.restart(v),e},stop:function(){return h.stop(),e},nodes:function(E){return arguments.length?(n=E,w(),l.forEach(S),e):n},alpha:function(E){return arguments.length?(t=+E,e):t},alphaMin:function(E){return arguments.length?(r=+E,e):r},alphaDecay:function(E){return arguments.length?(i=+E,e):+i},alphaTarget:function(E){return arguments.length?(o=+E,e):o},velocityDecay:function(E){return arguments.length?(u=1-E,e):1-u},randomSource:function(E){return arguments.length?(p=E,l.forEach(S),e):p},force:function(E,N){return arguments.length>1?(N==null?l.delete(E):l.set(E,S(N)),e):l.get(E)},find:function(E,N,k){var A=0,I=n.length,x,M,$,m,C;for(k==null?k=1/0:k*=k,A=0;A<I;++A)m=n[A],x=E-m.x,M=N-m.y,$=x*x+M*M,$<k&&(C=m,k=$);return C},on:function(E,N){return arguments.length>1?(d.on(E,N),e):d.on(E)}}}function ng(){var n,e,t,r,i=ke(-30),o,u=1,l=1/0,h=.81;function d(w){var S,E=n.length,N=So(n,Qp,Zp).visitAfter(v);for(r=w,S=0;S<E;++S)e=n[S],N.visit(y)}function p(){if(n){var w,S=n.length,E;for(o=new Array(S),w=0;w<S;++w)E=n[w],o[E.index]=+i(E,w,n)}}function v(w){var S=0,E,N,k=0,A,I,x;if(w.length){for(A=I=x=0;x<4;++x)(E=w[x])&&(N=Math.abs(E.value))&&(S+=E.value,k+=N,A+=N*E.x,I+=N*E.y);w.x=A/k,w.y=I/k}else{E=w,E.x=E.data.x,E.y=E.data.y;do S+=o[E.data.index];while(E=E.next)}w.value=S}function y(w,S,E,N){if(!w.value)return!0;var k=w.x-e.x,A=w.y-e.y,I=N-S,x=k*k+A*A;if(I*I/h<x)return x<l&&(k===0&&(k=wt(t),x+=k*k),A===0&&(A=wt(t),x+=A*A),x<u&&(x=Math.sqrt(u*x)),e.vx+=k*w.value*r/x,e.vy+=A*w.value*r/x),!0;if(w.length||x>=l)return;(w.data!==e||w.next)&&(k===0&&(k=wt(t),x+=k*k),A===0&&(A=wt(t),x+=A*A),x<u&&(x=Math.sqrt(u*x)));do w.data!==e&&(I=o[w.data.index]*r/x,e.vx+=k*I,e.vy+=A*I);while(w=w.next)}return d.initialize=function(w,S){n=w,t=S,p()},d.strength=function(w){return arguments.length?(i=typeof w=="function"?w:ke(+w),p(),d):i},d.distanceMin=function(w){return arguments.length?(u=w*w,d):Math.sqrt(u)},d.distanceMax=function(w){return arguments.length?(l=w*w,d):Math.sqrt(l)},d.theta=function(w){return arguments.length?(h=w*w,d):Math.sqrt(h)},d}function rg(n){var e=ke(.1),t,r,i;typeof n!="function"&&(n=ke(n==null?0:+n));function o(l){for(var h=0,d=t.length,p;h<d;++h)p=t[h],p.vx+=(i[h]-p.x)*r[h]*l}function u(){if(t){var l,h=t.length;for(r=new Array(h),i=new Array(h),l=0;l<h;++l)r[l]=isNaN(i[l]=+n(t[l],l,t))?0:+e(t[l],l,t)}}return o.initialize=function(l){t=l,u()},o.strength=function(l){return arguments.length?(e=typeof l=="function"?l:ke(+l),u(),o):e},o.x=function(l){return arguments.length?(n=typeof l=="function"?l:ke(+l),u(),o):n},o}function ig(n){var e=ke(.1),t,r,i;typeof n!="function"&&(n=ke(n==null?0:+n));function o(l){for(var h=0,d=t.length,p;h<d;++h)p=t[h],p.vy+=(i[h]-p.y)*r[h]*l}function u(){if(t){var l,h=t.length;for(r=new Array(h),i=new Array(h),l=0;l<h;++l)r[l]=isNaN(i[l]=+n(t[l],l,t))?0:+e(t[l],l,t)}}return o.initialize=function(l){t=l,u()},o.strength=function(l){return arguments.length?(e=typeof l=="function"?l:ke(+l),u(),o):e},o.y=function(l){return arguments.length?(n=typeof l=="function"?l:ke(+l),u(),o):n},o}function fn(n,e,t){this.k=n,this.x=e,this.y=t}fn.prototype={constructor:fn,scale:function(n){return n===1?this:new fn(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new fn(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};fn.prototype;const po={listeners:new Map,emit(n,e={}){document.dispatchEvent(new CustomEvent(n,{detail:e}))},on(n,e){if(typeof e!="function"){console.warn(`EventBus: Tried to register a non-function listener for event: ${n}`);return}this.listeners.has(n)||this.listeners.set(n,new Set);const t=this.listeners.get(n);if(t.has(e)){console.warn(`EventBus: Listener for event "${n}" is already registered.`);return}document.addEventListener(n,e),t.add(e)},off(n,e){if(!this.listeners.has(n)){console.warn(`EventBus: Attempted to remove a listener from a non-existent event: ${n}`);return}const t=this.listeners.get(n);if(!t.has(e)){console.warn(`EventBus: Attempted to remove a non-existent listener from event: ${n}`);return}document.removeEventListener(n,e),t.delete(e),t.size===0&&this.listeners.delete(n)},removeAll(n){if(!this.listeners.has(n)){console.warn(`EventBus: Attempted to remove all listeners from a non-existent event: ${n}`);return}this.listeners.get(n).forEach(e=>{document.removeEventListener(n,e)}),this.listeners.delete(n)}};function Ur(n){const e=new Set(n.map(Number));let t=0;for(;e.has(t);)t++;return t}function rr(n,e=3){const t="abcdefghijklmnopqrstuvwxyz",r=[];function i(u,l,h){if(h===0){r.push(u);return}for(let d=l;d<t.length;d++)if(i(u+t[d],d+1,h-1),r.length>n)return}let o=1;for(;r.length<=n&&o<=e;)i("",0,o),o++;return r[n]||null}function og(n,e,t,r,i,o){let u=n-t,l=e-r,h=i-t,d=o-r,p=u*h+l*d,v=h*h+d*d,y=v!==0?p/v:-1,w,S;y<0?(w=t,S=r):y>1?(w=i,S=o):(w=t+y*h,S=r+y*d);let E=n-w,N=e-S;return Math.sqrt(E*E+N*N)}class ag{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.appSettings.settings,this.canvas=Nt("#chart").node(),this.ctx=this.canvas.getContext("2d"),this.mouse={x:0,y:0,dragging:!1}}init(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.canvas.addEventListener("dblclick",this.handleDbclick.bind(this)),this.canvas.addEventListener("click",this.handleclick.bind(this));let e=0;this.canvas.addEventListener("touchend",t=>{const r=new Date().getTime(),i=r-e;i<300&&i>0&&this.handleDbclick(t),e=r}),Nt("canvas").on("mousedown",t=>{this.mouse.dragging=!1,[this.mouse.x,this.mouse.y]=Te(t)}).on("mousemove",t=>{const[r,i]=Te(t);(Math.abs(r-this.mouse.x)>2||Math.abs(i-this.mouse.y)>2)&&(this.mouse.dragging=!0)}).on("mouseup",t=>{this.mouse.dragging||([this.mouse.x,this.mouse.y]=Te(t))}),Nt(this.canvas).call(Fh().container(this.canvas).subject(this.dragsubject.bind(this)).filter(t=>!(this.settings.scale||this.settings.select)).on("start",this.dragstarted.bind(this)).on("drag",this.dragged.bind(this)).on("end",this.dragended.bind(this)))}addNodeAtEvent(e){e.preventDefault();const[t,r]=e.type=="touchend"?es(e,this.canvas):Te(e,this.canvas),i=Ur(this.app.graphManager.graph.nodes()),o=rr(i);this.app.graphManager.addNode(i,{x:t,y:r,color:this.settings.node_color,label:o})}addNodeConnectedToNode(e){const t=Ur(this.app.graphManager.graph.nodes()),r=rr(t),i={x:e.x+30,y:e.y+30,color:this.settings.node_color,label:r};this.app.graphManager.addNode(t,i),this.app.graphManager.graph.addEdge(e.id,t),this.eventBus.emit("graph:updated",{type:"addNode",node:t})}dragsubject(e){let t={id:null},r=1/0;return this.app.nodes.forEach(i=>{const o=e.x-i.x,u=e.y-i.y,l=Math.sqrt(o*o+u*u);l<this.settings.node_radius*i.size&&l<r&&(r=l,t=i)}),t&&(this.settings.component?t.component=this.app.graphManager.metric.getComponent(t.id):t.component=this.app.graphManager.graph.getSelectedNodes()),this.settings.panning&&(t.component=this.app.graphManager.graph.nodes()),t}dragstarted(e){!e.active&&this.settings.forceSimulation&&this.app.simulation.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y,this.settings.forceSimulation||this.app.graphManager.saveGraphState()}dragged(e){if(e.subject.fx=e.x,e.subject.fy=e.y,!this.settings.forceSimulation&&e.subject.component){for(let t of e.subject.component)this.app.graphManager.graph.updateNodeAttributes(t,r=>({...r,x:r.x+e.dx,y:r.y+e.dy}));e.subject.id!==null&&this.app.graphManager.graph.updateNodeAttributes(e.subject.id,t=>({...t,x:e.x,y:e.y})),this.app.drawGraph()}}dragended(e){e.active||this.app.simulation.alphaTarget(0),e.subject.fx=null,e.subject.fy=null,e.subject.x=e.x,e.subject.y=e.y,this.settings.forceSimulation||this.app.updateSimulation()}findClickedNode(e,t){return this.app.nodes.find(r=>{let i=e-r.x,o=t-r.y;return Math.sqrt(i*i+o*o)<this.settings.node_radius*r.size})}findClickedEdge(e,t){let r=10;return this.app.links.find(i=>{let o=i.source,u=i.target;return og(e,t,o.x,o.y,u.x,u.y)<r})}insertNodeInEdge(e){const t=Ur(this.app.graphManager.graph.nodes()),r=rr(t);let i=(e.source.x+e.target.x)/2,o=(e.source.y+e.target.y)/2;this.app.graphManager.graph.addNode(t,{x:i,y:o,color:this.settings.color,label:r}),this.app.graphManager.graph.dropEdge(e.source.id,e.target.id),this.app.graphManager.graph.addEdge(e.source.id,t),this.app.graphManager.graph.addEdge(t,e.target.id),this.eventBus.emit("graph:updated",{type:"addNodeInEdge",node:t})}handleDbclick(e){const[t,r]=e.type=="touchend"?es(e,this.canvas):Te(e,this.canvas);let i=this.findClickedNode(t,r),o=this.findClickedEdge(t,r);i?this.settings.tree?this.addNodeConnectedToNode(i):(this.app.graphManager.graph.toggleNodeSelection(i.id),this.settings.forceSimulation||this.eventBus.emit("graph:updated",{type:"selected"})):o?this.settings.tree?this.insertNodeInEdge(o):this.app.graphManager.graph.findEdge(o.source.id,o.target.id,u=>{this.app.graphManager.graph.toggleEdgeSelection(u),this.settings.forceSimulation||this.eventBus.emit("graph:updated",{type:"selected"})}):this.addNodeAtEvent(e)}handleclick(e){if(this.mouse.dragging)return;let[t,r]=Te(e,this.canvas),i=this.findClickedNode(t,r),o=this.findClickedEdge(t,r);if(i||o){if(i&&i.desc){for(let u in i.desc)this.app.graphManager.metric.addInfo(`${u}: ${i.desc[u]}`);this.app.graphManager.metric.addLine()}}else this.app.graphManager.deselectAll(),this.app.rect.scale.active=!1,this.eventBus.emit("graph:updated",{type:"unselect"})}}function es(n,e){const t=n.changedTouches[0],r=e.getBoundingClientRect();return[t.clientX-r.left,t.clientY-r.top]}function $e(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Un={exports:{}},ts;function sg(){if(ts)return Un.exports;ts=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(M,$,m){return Function.prototype.apply.call(M,$,m)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(M){return Object.getOwnPropertyNames(M).concat(Object.getOwnPropertySymbols(M))}:t=function(M){return Object.getOwnPropertyNames(M)};function r(x){console&&console.warn&&console.warn(x)}var i=Number.isNaN||function(M){return M!==M};function o(){o.init.call(this)}Un.exports=o,Un.exports.once=k,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var u=10;function l(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(x){if(typeof x!="number"||x<0||i(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");u=x}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(M){if(typeof M!="number"||M<0||i(M))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+M+".");return this._maxListeners=M,this};function h(x){return x._maxListeners===void 0?o.defaultMaxListeners:x._maxListeners}o.prototype.getMaxListeners=function(){return h(this)},o.prototype.emit=function(M){for(var $=[],m=1;m<arguments.length;m++)$.push(arguments[m]);var C=M==="error",z=this._events;if(z!==void 0)C=C&&z.error===void 0;else if(!C)return!1;if(C){var P;if($.length>0&&(P=$[0]),P instanceof Error)throw P;var G=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw G.context=P,G}var q=z[M];if(q===void 0)return!1;if(typeof q=="function")e(q,this,$);else for(var j=q.length,H=S(q,j),m=0;m<j;++m)e(H[m],this,$);return!0};function d(x,M,$,m){var C,z,P;if(l($),z=x._events,z===void 0?(z=x._events=Object.create(null),x._eventsCount=0):(z.newListener!==void 0&&(x.emit("newListener",M,$.listener?$.listener:$),z=x._events),P=z[M]),P===void 0)P=z[M]=$,++x._eventsCount;else if(typeof P=="function"?P=z[M]=m?[$,P]:[P,$]:m?P.unshift($):P.push($),C=h(x),C>0&&P.length>C&&!P.warned){P.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(M)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=x,G.type=M,G.count=P.length,r(G)}return x}o.prototype.addListener=function(M,$){return d(this,M,$,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(M,$){return d(this,M,$,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(x,M,$){var m={fired:!1,wrapFn:void 0,target:x,type:M,listener:$},C=p.bind(m);return C.listener=$,m.wrapFn=C,C}o.prototype.once=function(M,$){return l($),this.on(M,v(this,M,$)),this},o.prototype.prependOnceListener=function(M,$){return l($),this.prependListener(M,v(this,M,$)),this},o.prototype.removeListener=function(M,$){var m,C,z,P,G;if(l($),C=this._events,C===void 0)return this;if(m=C[M],m===void 0)return this;if(m===$||m.listener===$)--this._eventsCount===0?this._events=Object.create(null):(delete C[M],C.removeListener&&this.emit("removeListener",M,m.listener||$));else if(typeof m!="function"){for(z=-1,P=m.length-1;P>=0;P--)if(m[P]===$||m[P].listener===$){G=m[P].listener,z=P;break}if(z<0)return this;z===0?m.shift():E(m,z),m.length===1&&(C[M]=m[0]),C.removeListener!==void 0&&this.emit("removeListener",M,G||$)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(M){var $,m,C;if(m=this._events,m===void 0)return this;if(m.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):m[M]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete m[M]),this;if(arguments.length===0){var z=Object.keys(m),P;for(C=0;C<z.length;++C)P=z[C],P!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if($=m[M],typeof $=="function")this.removeListener(M,$);else if($!==void 0)for(C=$.length-1;C>=0;C--)this.removeListener(M,$[C]);return this};function y(x,M,$){var m=x._events;if(m===void 0)return[];var C=m[M];return C===void 0?[]:typeof C=="function"?$?[C.listener||C]:[C]:$?N(C):S(C,C.length)}o.prototype.listeners=function(M){return y(this,M,!0)},o.prototype.rawListeners=function(M){return y(this,M,!1)},o.listenerCount=function(x,M){return typeof x.listenerCount=="function"?x.listenerCount(M):w.call(x,M)},o.prototype.listenerCount=w;function w(x){var M=this._events;if(M!==void 0){var $=M[x];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function S(x,M){for(var $=new Array(M),m=0;m<M;++m)$[m]=x[m];return $}function E(x,M){for(;M+1<x.length;M++)x[M]=x[M+1];x.pop()}function N(x){for(var M=new Array(x.length),$=0;$<M.length;++$)M[$]=x[$].listener||x[$];return M}function k(x,M){return new Promise(function($,m){function C(P){x.removeListener(M,z),m(P)}function z(){typeof x.removeListener=="function"&&x.removeListener("error",C),$([].slice.call(arguments))}I(x,M,z,{once:!0}),M!=="error"&&A(x,C,{once:!0})})}function A(x,M,$){typeof x.on=="function"&&I(x,"error",M,$)}function I(x,M,$,m){if(typeof x.on=="function")m.once?x.once(M,$):x.on(M,$);else if(typeof x.addEventListener=="function")x.addEventListener(M,function C(z){m.once&&x.removeEventListener(M,C),$(z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x)}return Un.exports}var ug=sg(),Fr,ns;function Ct(){if(ns)return Fr;ns=1;function n(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}return typeof Symbol<"u"&&(n.prototype[Symbol.iterator]=function(){return this}),n.of=function(){var e=arguments,t=e.length,r=0;return new n(function(){return r>=t?{done:!0}:{done:!1,value:e[r++]}})},n.empty=function(){var e=new n(function(){return{done:!0}});return e},n.fromSequence=function(e){var t=0,r=e.length;return new n(function(){return t>=r?{done:!0}:{done:!1,value:e[t++]}})},n.is=function(e){return e instanceof n?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"},Fr=n,Fr}var cg=Ct();const Le=$e(cg);var Fn={},rs;function vc(){return rs||(rs=1,Fn.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",Fn.SYMBOL_SUPPORT=typeof Symbol<"u"),Fn}var Wr,is;function yc(){if(is)return Wr;is=1;var n=Ct(),e=vc(),t=e.ARRAY_BUFFER_SUPPORT,r=e.SYMBOL_SUPPORT;function i(o){return typeof o=="string"||Array.isArray(o)||t&&ArrayBuffer.isView(o)?n.fromSequence(o):typeof o!="object"||o===null?null:r&&typeof o[Symbol.iterator]=="function"?o[Symbol.iterator]():typeof o.next=="function"?o:null}return Wr=function(u){var l=i(u);if(!l)throw new Error("obliterator: target is not iterable nor a valid iterator.");return l},Wr}var Hr,os;function lg(){if(os)return Hr;os=1;var n=yc();return Hr=function(t,r){for(var i=arguments.length>1?r:1/0,o=i!==1/0?new Array(i):[],u,l=0,h=n(t);;){if(l===i)return o;if(u=h.next(),u.done)return l!==r&&(o.length=l),o;o[l++]=u.value}},Hr}var dg=lg();const mc=$e(dg);var Yr,as;function hg(){if(as)return Yr;as=1;var n=Ct(),e=yc();return Yr=function(){var r=arguments,i=null,o=-1;return new n(function(){var l=null;do{if(i===null){if(o++,o>=r.length)return{done:!0};i=e(r[o])}if(l=i.next(),l.done===!0){i=null;continue}break}while(!0);return l})},Yr}var fg=hg();const ut=$e(fg);function pg(){const n=arguments[0];for(let e=1,t=arguments.length;e<t;e++)if(arguments[e])for(const r in arguments[e])n[r]=arguments[e][r];return n}let we=pg;typeof Object.assign=="function"&&(we=Object.assign);function Pe(n,e,t,r){const i=n._nodes.get(e);let o=null;return i&&(r==="mixed"?o=i.out&&i.out[t]||i.undirected&&i.undirected[t]:r==="directed"?o=i.out&&i.out[t]:o=i.undirected&&i.undirected[t]),o}function be(n){return typeof n=="object"&&n!==null}function wc(n){let e;for(e in n)return!1;return!0}function Ie(n,e,t){Object.defineProperty(n,e,{enumerable:!1,configurable:!1,writable:!0,value:t})}function Re(n,e,t){const r={enumerable:!0,configurable:!0};typeof t=="function"?r.get=t:(r.value=t,r.writable=!1),Object.defineProperty(n,e,r)}function ss(n){return!(!be(n)||n.attributes&&!Array.isArray(n.attributes))}function gg(){let n=Math.floor(Math.random()*256)&255;return()=>n++}class ko extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class Q extends ko{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Q.prototype.constructor)}}class K extends ko{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,K.prototype.constructor)}}class re extends ko{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,re.prototype.constructor)}}function bc(n,e){this.key=n,this.attributes=e,this.clear()}bc.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function xc(n,e){this.key=n,this.attributes=e,this.clear()}xc.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Ec(n,e){this.key=n,this.attributes=e,this.clear()}Ec.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Wt(n,e,t,r,i){this.key=e,this.attributes=i,this.undirected=n,this.source=t,this.target=r}Wt.prototype.attach=function(){let n="out",e="in";this.undirected&&(n=e="undirected");const t=this.source.key,r=this.target.key;this.source[n][r]=this,!(this.undirected&&t===r)&&(this.target[e][t]=this)};Wt.prototype.attachMulti=function(){let n="out",e="in";const t=this.source.key,r=this.target.key;this.undirected&&(n=e="undirected");const i=this.source[n],o=i[r];if(typeof o>"u"){i[r]=this,this.undirected&&t===r||(this.target[e][t]=this);return}o.previous=this,this.next=o,i[r]=this,this.target[e][t]=this};Wt.prototype.detach=function(){const n=this.source.key,e=this.target.key;let t="out",r="in";this.undirected&&(t=r="undirected"),delete this.source[t][e],delete this.target[r][n]};Wt.prototype.detachMulti=function(){const n=this.source.key,e=this.target.key;let t="out",r="in";this.undirected&&(t=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][e],delete this.target[r][n]):(this.next.previous=void 0,this.source[t][e]=this.next,this.target[r][n]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const _c=0,Sc=1,vg=2,Ac=3;function lt(n,e,t,r,i,o,u){let l,h,d,p;if(r=""+r,t===_c){if(l=n._nodes.get(r),!l)throw new K(`Graph.${e}: could not find the "${r}" node in the graph.`);d=i,p=o}else if(t===Ac){if(i=""+i,h=n._edges.get(i),!h)throw new K(`Graph.${e}: could not find the "${i}" edge in the graph.`);const v=h.source.key,y=h.target.key;if(r===v)l=h.target;else if(r===y)l=h.source;else throw new K(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${v}, ${y}).`);d=o,p=u}else{if(h=n._edges.get(r),!h)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`);t===Sc?l=h.source:l=h.target,d=i,p=o}return[l,d,p]}function yg(n,e,t){n.prototype[e]=function(r,i,o){const[u,l]=lt(this,e,t,r,i,o);return u.attributes[l]}}function mg(n,e,t){n.prototype[e]=function(r,i){const[o]=lt(this,e,t,r,i);return o.attributes}}function wg(n,e,t){n.prototype[e]=function(r,i,o){const[u,l]=lt(this,e,t,r,i,o);return u.attributes.hasOwnProperty(l)}}function bg(n,e,t){n.prototype[e]=function(r,i,o,u){const[l,h,d]=lt(this,e,t,r,i,o,u);return l.attributes[h]=d,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:h}),this}}function xg(n,e,t){n.prototype[e]=function(r,i,o,u){const[l,h,d]=lt(this,e,t,r,i,o,u);if(typeof d!="function")throw new Q(`Graph.${e}: updater should be a function.`);const p=l.attributes,v=d(p[h]);return p[h]=v,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:h}),this}}function Eg(n,e,t){n.prototype[e]=function(r,i,o){const[u,l]=lt(this,e,t,r,i,o);return delete u.attributes[l],this.emit("nodeAttributesUpdated",{key:u.key,type:"remove",attributes:u.attributes,name:l}),this}}function _g(n,e,t){n.prototype[e]=function(r,i,o){const[u,l]=lt(this,e,t,r,i,o);if(!be(l))throw new Q(`Graph.${e}: provided attributes are not a plain object.`);return u.attributes=l,this.emit("nodeAttributesUpdated",{key:u.key,type:"replace",attributes:u.attributes}),this}}function Sg(n,e,t){n.prototype[e]=function(r,i,o){const[u,l]=lt(this,e,t,r,i,o);if(!be(l))throw new Q(`Graph.${e}: provided attributes are not a plain object.`);return we(u.attributes,l),this.emit("nodeAttributesUpdated",{key:u.key,type:"merge",attributes:u.attributes,data:l}),this}}function Ag(n,e,t){n.prototype[e]=function(r,i,o){const[u,l]=lt(this,e,t,r,i,o);if(typeof l!="function")throw new Q(`Graph.${e}: provided updater is not a function.`);return u.attributes=l(u.attributes),this.emit("nodeAttributesUpdated",{key:u.key,type:"update",attributes:u.attributes}),this}}const kg=[{name:n=>`get${n}Attribute`,attacher:yg},{name:n=>`get${n}Attributes`,attacher:mg},{name:n=>`has${n}Attribute`,attacher:wg},{name:n=>`set${n}Attribute`,attacher:bg},{name:n=>`update${n}Attribute`,attacher:xg},{name:n=>`remove${n}Attribute`,attacher:Eg},{name:n=>`replace${n}Attributes`,attacher:_g},{name:n=>`merge${n}Attributes`,attacher:Sg},{name:n=>`update${n}Attributes`,attacher:Ag}];function Ng(n){kg.forEach(function({name:e,attacher:t}){t(n,e("Node"),_c),t(n,e("Source"),Sc),t(n,e("Target"),vg),t(n,e("Opposite"),Ac)})}function Mg(n,e,t){n.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+r,l=""+i;if(i=arguments[2],o=Pe(this,u,l,t),!o)throw new K(`Graph.${e}: could not find an edge for the given path ("${u}" - "${l}").`)}else{if(t!=="mixed")throw new re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]}}function Dg(n,e,t){n.prototype[e]=function(r){let i;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,u=""+arguments[1];if(i=Pe(this,o,u,t),!i)throw new K(`Graph.${e}: could not find an edge for the given path ("${o}" - "${u}").`)}else{if(t!=="mixed")throw new re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function Cg(n,e,t){n.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+r,l=""+i;if(i=arguments[2],o=Pe(this,u,l,t),!o)throw new K(`Graph.${e}: could not find an edge for the given path ("${u}" - "${l}").`)}else{if(t!=="mixed")throw new re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes.hasOwnProperty(i)}}function Ig(n,e,t){n.prototype[e]=function(r,i,o){let u;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+r,h=""+i;if(i=arguments[2],o=arguments[3],u=Pe(this,l,h,t),!u)throw new K(`Graph.${e}: could not find an edge for the given path ("${l}" - "${h}").`)}else{if(t!=="mixed")throw new re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,u=this._edges.get(r),!u)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return u.attributes[i]=o,this.emit("edgeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:i}),this}}function zg(n,e,t){n.prototype[e]=function(r,i,o){let u;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+r,h=""+i;if(i=arguments[2],o=arguments[3],u=Pe(this,l,h,t),!u)throw new K(`Graph.${e}: could not find an edge for the given path ("${l}" - "${h}").`)}else{if(t!=="mixed")throw new re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,u=this._edges.get(r),!u)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof o!="function")throw new Q(`Graph.${e}: updater should be a function.`);return u.attributes[i]=o(u.attributes[i]),this.emit("edgeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:i}),this}}function Tg(n,e,t){n.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+r,l=""+i;if(i=arguments[2],o=Pe(this,u,l,t),!o)throw new K(`Graph.${e}: could not find an edge for the given path ("${u}" - "${l}").`)}else{if(t!=="mixed")throw new re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete o.attributes[i],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:i}),this}}function Pg(n,e,t){n.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+r,l=""+i;if(i=arguments[2],o=Pe(this,u,l,t),!o)throw new K(`Graph.${e}: could not find an edge for the given path ("${u}" - "${l}").`)}else{if(t!=="mixed")throw new re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!be(i))throw new Q(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Lg(n,e,t){n.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+r,l=""+i;if(i=arguments[2],o=Pe(this,u,l,t),!o)throw new K(`Graph.${e}: could not find an edge for the given path ("${u}" - "${l}").`)}else{if(t!=="mixed")throw new re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!be(i))throw new Q(`Graph.${e}: provided attributes are not a plain object.`);return we(o.attributes,i),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:i}),this}}function $g(n,e,t){n.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+r,l=""+i;if(i=arguments[2],o=Pe(this,u,l,t),!o)throw new K(`Graph.${e}: could not find an edge for the given path ("${u}" - "${l}").`)}else{if(t!=="mixed")throw new re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new K(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new Q(`Graph.${e}: provided updater is not a function.`);return o.attributes=i(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Gg=[{name:n=>`get${n}Attribute`,attacher:Mg},{name:n=>`get${n}Attributes`,attacher:Dg},{name:n=>`has${n}Attribute`,attacher:Cg},{name:n=>`set${n}Attribute`,attacher:Ig},{name:n=>`update${n}Attribute`,attacher:zg},{name:n=>`remove${n}Attribute`,attacher:Tg},{name:n=>`replace${n}Attributes`,attacher:Pg},{name:n=>`merge${n}Attributes`,attacher:Lg},{name:n=>`update${n}Attributes`,attacher:$g}];function Og(n){Gg.forEach(function({name:e,attacher:t}){t(n,e("Edge"),"mixed"),t(n,e("DirectedEdge"),"directed"),t(n,e("UndirectedEdge"),"undirected")})}const Rg=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function qg(n,e,t,r){let i=!1;for(const o in e){if(o===r)continue;const u=e[o];if(i=t(u.key,u.attributes,u.source.key,u.target.key,u.source.attributes,u.target.attributes,u.undirected),n&&i)return u.key}}function Bg(n,e,t,r){let i,o,u,l=!1;for(const h in e)if(h!==r){i=e[h];do{if(o=i.source,u=i.target,l=t(i.key,i.attributes,o.key,u.key,o.attributes,u.attributes,i.undirected),n&&l)return i.key;i=i.next}while(i!==void 0)}}function Kr(n,e){const t=Object.keys(n),r=t.length;let i,o=0;return new Le(function(){do if(i)i=i.next;else{if(o>=r)return{done:!0};const l=t[o++];if(l===e){i=void 0;continue}i=n[l]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function jg(n,e,t,r){const i=e[t];if(!i)return;const o=i.source,u=i.target;if(r(i.key,i.attributes,o.key,u.key,o.attributes,u.attributes,i.undirected)&&n)return i.key}function Ug(n,e,t,r){let i=e[t];if(!i)return;let o=!1;do{if(o=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),n&&o)return i.key;i=i.next}while(i!==void 0)}function Xr(n,e){let t=n[e];return t.next!==void 0?new Le(function(){if(!t)return{done:!0};const r={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:r}}):Le.of({edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected})}function Fg(n,e){if(n.size===0)return[];if(e==="mixed"||e===n.type)return typeof Array.from=="function"?Array.from(n._edges.keys()):mc(n._edges.keys(),n._edges.size);const t=e==="undirected"?n.undirectedSize:n.directedSize,r=new Array(t),i=e==="undirected",o=n._edges.values();let u=0,l,h;for(;l=o.next(),l.done!==!0;)h=l.value,h.undirected===i&&(r[u++]=h.key);return r}function kc(n,e,t,r){if(e.size===0)return;const i=t!=="mixed"&&t!==e.type,o=t==="undirected";let u,l,h=!1;const d=e._edges.values();for(;u=d.next(),u.done!==!0;){if(l=u.value,i&&l.undirected!==o)continue;const{key:p,attributes:v,source:y,target:w}=l;if(h=r(p,v,y.key,w.key,y.attributes,w.attributes,l.undirected),n&&h)return p}}function Wg(n,e){if(n.size===0)return Le.empty();const t=e!=="mixed"&&e!==n.type,r=e==="undirected",i=n._edges.values();return new Le(function(){let u,l;for(;;){if(u=i.next(),u.done)return u;if(l=u.value,!(t&&l.undirected!==r))break}return{value:{edge:l.key,attributes:l.attributes,source:l.source.key,target:l.target.key,sourceAttributes:l.source.attributes,targetAttributes:l.target.attributes,undirected:l.undirected},done:!1}})}function No(n,e,t,r,i,o){const u=e?Bg:qg;let l;if(t!=="undirected"&&(r!=="out"&&(l=u(n,i.in,o),n&&l)||r!=="in"&&(l=u(n,i.out,o,r?void 0:i.key),n&&l))||t!=="directed"&&(l=u(n,i.undirected,o),n&&l))return l}function Hg(n,e,t,r){const i=[];return No(!1,n,e,t,r,function(o){i.push(o)}),i}function Yg(n,e,t){let r=Le.empty();return n!=="undirected"&&(e!=="out"&&typeof t.in<"u"&&(r=ut(r,Kr(t.in))),e!=="in"&&typeof t.out<"u"&&(r=ut(r,Kr(t.out,e?void 0:t.key)))),n!=="directed"&&typeof t.undirected<"u"&&(r=ut(r,Kr(t.undirected))),r}function Mo(n,e,t,r,i,o,u){const l=t?Ug:jg;let h;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(h=l(n,i.in,o,u),n&&h)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==o)&&(h=l(n,i.out,o,u),n&&h))||e!=="directed"&&typeof i.undirected<"u"&&(h=l(n,i.undirected,o,u),n&&h))return h}function Kg(n,e,t,r,i){const o=[];return Mo(!1,n,e,t,r,i,function(u){o.push(u)}),o}function Xg(n,e,t,r){let i=Le.empty();return n!=="undirected"&&(typeof t.in<"u"&&e!=="out"&&r in t.in&&(i=ut(i,Xr(t.in,r))),typeof t.out<"u"&&e!=="in"&&r in t.out&&(e||t.key!==r)&&(i=ut(i,Xr(t.out,r)))),n!=="directed"&&typeof t.undirected<"u"&&r in t.undirected&&(i=ut(i,Xr(t.undirected,r))),i}function Vg(n,e){const{name:t,type:r,direction:i}=e;n.prototype[t]=function(o,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return Fg(this,r);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(typeof l>"u")throw new K(`Graph.${t}: could not find the "${o}" node in the graph.`);return Hg(this.multi,r==="mixed"?this.type:r,i,l)}if(arguments.length===2){o=""+o,u=""+u;const l=this._nodes.get(o);if(!l)throw new K(`Graph.${t}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(u))throw new K(`Graph.${t}:  could not find the "${u}" target node in the graph.`);return Kg(r,this.multi,i,l,u)}throw new Q(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Qg(n,e){const{name:t,type:r,direction:i}=e,o="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[o]=function(d,p,v){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return v=d,kc(!1,this,r,v);if(arguments.length===2){d=""+d,v=p;const y=this._nodes.get(d);if(typeof y>"u")throw new K(`Graph.${o}: could not find the "${d}" node in the graph.`);return No(!1,this.multi,r==="mixed"?this.type:r,i,y,v)}if(arguments.length===3){d=""+d,p=""+p;const y=this._nodes.get(d);if(!y)throw new K(`Graph.${o}:  could not find the "${d}" source node in the graph.`);if(!this._nodes.has(p))throw new K(`Graph.${o}:  could not find the "${p}" target node in the graph.`);return Mo(!1,r,this.multi,i,y,p,v)}throw new Q(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const u="map"+t[0].toUpperCase()+t.slice(1);n.prototype[u]=function(){const d=Array.prototype.slice.call(arguments),p=d.pop();let v;if(d.length===0){let y=0;r!=="directed"&&(y+=this.undirectedSize),r!=="undirected"&&(y+=this.directedSize),v=new Array(y);let w=0;d.push((S,E,N,k,A,I,x)=>{v[w++]=p(S,E,N,k,A,I,x)})}else v=[],d.push((y,w,S,E,N,k,A)=>{v.push(p(y,w,S,E,N,k,A))});return this[o].apply(this,d),v};const l="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(){const d=Array.prototype.slice.call(arguments),p=d.pop(),v=[];return d.push((y,w,S,E,N,k,A)=>{p(y,w,S,E,N,k,A)&&v.push(y)}),this[o].apply(this,d),v};const h="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[h]=function(){let d=Array.prototype.slice.call(arguments);if(d.length<2||d.length>4)throw new Q(`Graph.${h}: invalid number of arguments (expecting 2, 3 or 4 and got ${d.length}).`);if(typeof d[d.length-1]=="function"&&typeof d[d.length-2]!="function")throw new Q(`Graph.${h}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let p,v;d.length===2?(p=d[0],v=d[1],d=[]):d.length===3?(p=d[1],v=d[2],d=[d[0]]):d.length===4&&(p=d[2],v=d[3],d=[d[0],d[1]]);let y=v;return d.push((w,S,E,N,k,A,I)=>{y=p(y,w,S,E,N,k,A,I)}),this[o].apply(this,d),y}}function Zg(n,e){const{name:t,type:r,direction:i}=e,o="find"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[o]=function(h,d,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return p=h,kc(!0,this,r,p);if(arguments.length===2){h=""+h,p=d;const v=this._nodes.get(h);if(typeof v>"u")throw new K(`Graph.${o}: could not find the "${h}" node in the graph.`);return No(!0,this.multi,r==="mixed"?this.type:r,i,v,p)}if(arguments.length===3){h=""+h,d=""+d;const v=this._nodes.get(h);if(!v)throw new K(`Graph.${o}:  could not find the "${h}" source node in the graph.`);if(!this._nodes.has(d))throw new K(`Graph.${o}:  could not find the "${d}" target node in the graph.`);return Mo(!0,r,this.multi,i,v,d,p)}throw new Q(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const u="some"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[u]=function(){const h=Array.prototype.slice.call(arguments),d=h.pop();return h.push((v,y,w,S,E,N,k)=>d(v,y,w,S,E,N,k)),!!this[o].apply(this,h)};const l="every"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[l]=function(){const h=Array.prototype.slice.call(arguments),d=h.pop();return h.push((v,y,w,S,E,N,k)=>!d(v,y,w,S,E,N,k)),!this[o].apply(this,h)}}function Jg(n,e){const{name:t,type:r,direction:i}=e,o=t.slice(0,-1)+"Entries";n.prototype[o]=function(u,l){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Le.empty();if(!arguments.length)return Wg(this,r);if(arguments.length===1){u=""+u;const h=this._nodes.get(u);if(!h)throw new K(`Graph.${o}: could not find the "${u}" node in the graph.`);return Yg(r,i,h)}if(arguments.length===2){u=""+u,l=""+l;const h=this._nodes.get(u);if(!h)throw new K(`Graph.${o}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(l))throw new K(`Graph.${o}:  could not find the "${l}" target node in the graph.`);return Xg(r,i,h,l)}throw new Q(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function ev(n){Rg.forEach(e=>{Vg(n,e),Qg(n,e),Zg(n,e),Jg(n,e)})}const tv=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function gr(){this.A=null,this.B=null}gr.prototype.wrap=function(n){this.A===null?this.A=n:this.B===null&&(this.B=n)};gr.prototype.has=function(n){return this.A!==null&&n in this.A||this.B!==null&&n in this.B};function on(n,e,t,r,i){for(const o in r){const u=r[o],l=u.source,h=u.target,d=l===t?h:l;if(e&&e.has(d.key))continue;const p=i(d.key,d.attributes);if(n&&p)return d.key}}function Do(n,e,t,r,i){if(e!=="mixed"){if(e==="undirected")return on(n,null,r,r.undirected,i);if(typeof t=="string")return on(n,null,r,r[t],i)}const o=new gr;let u;if(e!=="undirected"){if(t!=="out"){if(u=on(n,null,r,r.in,i),n&&u)return u;o.wrap(r.in)}if(t!=="in"){if(u=on(n,o,r,r.out,i),n&&u)return u;o.wrap(r.out)}}if(e!=="directed"&&(u=on(n,o,r,r.undirected,i),n&&u))return u}function nv(n,e,t){if(n!=="mixed"){if(n==="undirected")return Object.keys(t.undirected);if(typeof e=="string")return Object.keys(t[e])}const r=[];return Do(!1,n,e,t,function(i){r.push(i)}),r}function an(n,e,t){const r=Object.keys(t),i=r.length;let o=0;return new Le(function(){let l=null;do{if(o>=i)return n&&n.wrap(t),{done:!0};const h=t[r[o++]],d=h.source,p=h.target;if(l=d===e?p:d,n&&n.has(l.key)){l=null;continue}}while(l===null);return{done:!1,value:{neighbor:l.key,attributes:l.attributes}}})}function rv(n,e,t){if(n!=="mixed"){if(n==="undirected")return an(null,t,t.undirected);if(typeof e=="string")return an(null,t,t[e])}let r=Le.empty();const i=new gr;return n!=="undirected"&&(e!=="out"&&(r=ut(r,an(i,t,t.in))),e!=="in"&&(r=ut(r,an(i,t,t.out)))),n!=="directed"&&(r=ut(r,an(i,t,t.undirected))),r}function iv(n,e){const{name:t,type:r,direction:i}=e;n.prototype[t]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];o=""+o;const u=this._nodes.get(o);if(typeof u>"u")throw new K(`Graph.${t}: could not find the "${o}" node in the graph.`);return nv(r==="mixed"?this.type:r,i,u)}}function ov(n,e){const{name:t,type:r,direction:i}=e,o="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[o]=function(d,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;d=""+d;const v=this._nodes.get(d);if(typeof v>"u")throw new K(`Graph.${o}: could not find the "${d}" node in the graph.`);Do(!1,r==="mixed"?this.type:r,i,v,p)};const u="map"+t[0].toUpperCase()+t.slice(1);n.prototype[u]=function(d,p){const v=[];return this[o](d,(y,w)=>{v.push(p(y,w))}),v};const l="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(d,p){const v=[];return this[o](d,(y,w)=>{p(y,w)&&v.push(y)}),v};const h="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[h]=function(d,p,v){if(arguments.length<3)throw new Q(`Graph.${h}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let y=v;return this[o](d,(w,S)=>{y=p(y,w,S)}),y}}function av(n,e){const{name:t,type:r,direction:i}=e,o=t[0].toUpperCase()+t.slice(1,-1),u="find"+o;n.prototype[u]=function(d,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;d=""+d;const v=this._nodes.get(d);if(typeof v>"u")throw new K(`Graph.${u}: could not find the "${d}" node in the graph.`);return Do(!0,r==="mixed"?this.type:r,i,v,p)};const l="some"+o;n.prototype[l]=function(d,p){return!!this[u](d,p)};const h="every"+o;n.prototype[h]=function(d,p){return!this[u](d,(y,w)=>!p(y,w))}}function sv(n,e){const{name:t,type:r,direction:i}=e,o=t.slice(0,-1)+"Entries";n.prototype[o]=function(u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Le.empty();u=""+u;const l=this._nodes.get(u);if(typeof l>"u")throw new K(`Graph.${o}: could not find the "${u}" node in the graph.`);return rv(r==="mixed"?this.type:r,i,l)}}function uv(n){tv.forEach(e=>{iv(n,e),ov(n,e),av(n,e),sv(n,e)})}function Wn(n,e,t,r,i){const o=r._nodes.values(),u=r.type;let l,h,d,p,v,y;for(;l=o.next(),l.done!==!0;){let w=!1;if(h=l.value,u!=="undirected"){p=h.out;for(d in p){v=p[d];do y=v.target,w=!0,i(h.key,y.key,h.attributes,y.attributes,v.key,v.attributes,v.undirected),v=v.next;while(v)}}if(u!=="directed"){p=h.undirected;for(d in p)if(!(e&&h.key>d)){v=p[d];do y=v.target,y.key!==d&&(y=v.source),w=!0,i(h.key,y.key,h.attributes,y.attributes,v.key,v.attributes,v.undirected),v=v.next;while(v)}}t&&!w&&i(h.key,null,h.attributes,null,null,null,null)}}function cv(n,e){const t={key:n};return wc(e.attributes)||(t.attributes=we({},e.attributes)),t}function lv(n,e,t){const r={key:e,source:t.source.key,target:t.target.key};return wc(t.attributes)||(r.attributes=we({},t.attributes)),n==="mixed"&&t.undirected&&(r.undirected=!0),r}function dv(n){if(!be(n))throw new Q('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in n))throw new Q("Graph.import: serialized node is missing its key.");if("attributes"in n&&(!be(n.attributes)||n.attributes===null))throw new Q("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function hv(n){if(!be(n))throw new Q('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in n))throw new Q("Graph.import: serialized edge is missing its source.");if(!("target"in n))throw new Q("Graph.import: serialized edge is missing its target.");if("attributes"in n&&(!be(n.attributes)||n.attributes===null))throw new Q("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in n&&typeof n.undirected!="boolean")throw new Q("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const fv=gg(),pv=new Set(["directed","undirected","mixed"]),us=new Set(["domain","_events","_eventsCount","_maxListeners"]),gv=[{name:n=>`${n}Edge`,generateKey:!0},{name:n=>`${n}DirectedEdge`,generateKey:!0,type:"directed"},{name:n=>`${n}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:n=>`${n}EdgeWithKey`},{name:n=>`${n}DirectedEdgeWithKey`,type:"directed"},{name:n=>`${n}UndirectedEdgeWithKey`,type:"undirected"}],vv={allowSelfLoops:!0,multi:!1,type:"mixed"};function yv(n,e,t){if(t&&!be(t))throw new Q(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(e=""+e,t=t||{},n._nodes.has(e))throw new re(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new n.NodeDataClass(e,t);return n._nodes.set(e,r),n.emit("nodeAdded",{key:e,attributes:t}),r}function cs(n,e,t){const r=new n.NodeDataClass(e,t);return n._nodes.set(e,r),n.emit("nodeAdded",{key:e,attributes:t}),r}function Nc(n,e,t,r,i,o,u,l){if(!r&&n.type==="undirected")throw new re(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&n.type==="directed")throw new re(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(l&&!be(l))throw new Q(`Graph.${e}: invalid attributes. Expecting an object but got "${l}"`);if(o=""+o,u=""+u,l=l||{},!n.allowSelfLoops&&o===u)throw new re(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const h=n._nodes.get(o),d=n._nodes.get(u);if(!h)throw new K(`Graph.${e}: source node "${o}" not found.`);if(!d)throw new K(`Graph.${e}: target node "${u}" not found.`);const p={key:null,undirected:r,source:o,target:u,attributes:l};if(t)i=n._edgeKeyGenerator();else if(i=""+i,n._edges.has(i))throw new re(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!n.multi&&(r?typeof h.undirected[u]<"u":typeof h.out[u]<"u"))throw new re(`Graph.${e}: an edge linking "${o}" to "${u}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const v=new Wt(r,i,h,d,l);n._edges.set(i,v);const y=o===u;return r?(h.undirectedDegree++,d.undirectedDegree++,y&&(h.undirectedLoops++,n._undirectedSelfLoopCount++)):(h.outDegree++,d.inDegree++,y&&(h.directedLoops++,n._directedSelfLoopCount++)),n.multi?v.attachMulti():v.attach(),r?n._undirectedSize++:n._directedSize++,p.key=i,n.emit("edgeAdded",p),i}function mv(n,e,t,r,i,o,u,l,h){if(!r&&n.type==="undirected")throw new re(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&n.type==="directed")throw new re(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(l){if(h){if(typeof l!="function")throw new Q(`Graph.${e}: invalid updater function. Expecting a function but got "${l}"`)}else if(!be(l))throw new Q(`Graph.${e}: invalid attributes. Expecting an object but got "${l}"`)}o=""+o,u=""+u;let d;if(h&&(d=l,l=void 0),!n.allowSelfLoops&&o===u)throw new re(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let p=n._nodes.get(o),v=n._nodes.get(u),y,w;if(!t&&(y=n._edges.get(i),y)){if((y.source.key!==o||y.target.key!==u)&&(!r||y.source.key!==u||y.target.key!==o))throw new re(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${o}" source & "${u}" target vs. ("${y.source.key}", "${y.target.key}").`);w=y}if(!w&&!n.multi&&p&&(w=r?p.undirected[u]:p.out[u]),w){const A=[w.key,!1,!1,!1];if(h?!d:!l)return A;if(h){const I=w.attributes;w.attributes=d(I),n.emit("edgeAttributesUpdated",{type:"replace",key:w.key,attributes:w.attributes})}else we(w.attributes,l),n.emit("edgeAttributesUpdated",{type:"merge",key:w.key,attributes:w.attributes,data:l});return A}l=l||{},h&&d&&(l=d(l));const S={key:null,undirected:r,source:o,target:u,attributes:l};if(t)i=n._edgeKeyGenerator();else if(i=""+i,n._edges.has(i))throw new re(`Graph.${e}: the "${i}" edge already exists in the graph.`);let E=!1,N=!1;p||(p=cs(n,o,{}),E=!0,o===u&&(v=p,N=!0)),v||(v=cs(n,u,{}),N=!0),y=new Wt(r,i,p,v,l),n._edges.set(i,y);const k=o===u;return r?(p.undirectedDegree++,v.undirectedDegree++,k&&(p.undirectedLoops++,n._undirectedSelfLoopCount++)):(p.outDegree++,v.inDegree++,k&&(p.directedLoops++,n._directedSelfLoopCount++)),n.multi?y.attachMulti():y.attach(),r?n._undirectedSize++:n._directedSize++,S.key=i,n.emit("edgeAdded",S),[i,!0,E,N]}function Tt(n,e){n._edges.delete(e.key);const{source:t,target:r,attributes:i}=e,o=e.undirected,u=t===r;o?(t.undirectedDegree--,r.undirectedDegree--,u&&(t.undirectedLoops--,n._undirectedSelfLoopCount--)):(t.outDegree--,r.inDegree--,u&&(t.directedLoops--,n._directedSelfLoopCount--)),n.multi?e.detachMulti():e.detach(),o?n._undirectedSize--:n._directedSize--,n.emit("edgeDropped",{key:e.key,attributes:i,source:t.key,target:r.key,undirected:o})}let pe=class go extends ug.EventEmitter{constructor(e){if(super(),e=we({},vv,e),typeof e.multi!="boolean")throw new Q(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!pv.has(e.type))throw new Q(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new Q(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const t=e.type==="mixed"?bc:e.type==="directed"?xc:Ec;Ie(this,"NodeDataClass",t);const r="geid_"+fv()+"_";let i=0;const o=()=>{let u;do u=r+i++;while(this._edges.has(u));return u};Ie(this,"_attributes",{}),Ie(this,"_nodes",new Map),Ie(this,"_edges",new Map),Ie(this,"_directedSize",0),Ie(this,"_undirectedSize",0),Ie(this,"_directedSelfLoopCount",0),Ie(this,"_undirectedSelfLoopCount",0),Ie(this,"_edgeKeyGenerator",o),Ie(this,"_options",e),us.forEach(u=>Ie(this,u,this[u])),Re(this,"order",()=>this._nodes.size),Re(this,"size",()=>this._edges.size),Re(this,"directedSize",()=>this._directedSize),Re(this,"undirectedSize",()=>this._undirectedSize),Re(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Re(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Re(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Re(this,"multi",this._options.multi),Re(this,"type",this._options.type),Re(this,"allowSelfLoops",this._options.allowSelfLoops),Re(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(t):!1}throw new Q(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(t):!1}throw new Q(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(t)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(t):!1}throw new Q(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if(this.type==="undirected")return;if(e=""+e,t=""+t,this.multi)throw new re("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new K(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new K(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const i=r.out&&r.out[t]||void 0;if(i)return i.key}undirectedEdge(e,t){if(this.type==="directed")return;if(e=""+e,t=""+t,this.multi)throw new re("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new K(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new K(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const i=r.undirected&&r.undirected[t]||void 0;if(i)return i.key}edge(e,t){if(this.multi)throw new re("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new K(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new K(`Graph.edge: could not find the "${t}" target node in the graph.`);const i=r.out&&r.out[t]||r.undirected&&r.undirected[t]||void 0;if(i)return i.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new K(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.in||t in r.out}areOutNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new K(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.out}areInNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new K(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new K(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:t in r.undirected}areNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new K(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(t in r.in||t in r.out)||this.type!=="directed"&&t in r.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new K(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in r.in||this.type!=="directed"&&t in r.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new K(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in r.out||this.type!=="directed"&&t in r.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new K(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new K(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new K(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new K(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new K(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.inDegree),r}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new K(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.outDegree),r}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new K(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.inDegree+t.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new K(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new K(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new K(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new K(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new K(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=t.undirectedDegree,i+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.inDegree,i+=t.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new K(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=t.undirectedDegree,i+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.outDegree,i+=t.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new K(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=t.undirectedDegree,i+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.inDegree+t.outDegree,i+=t.directedLoops*2),r-i}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new K(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new K(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new K(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const r=this._edges.get(t);if(!r)throw new K(`Graph.opposite: could not find the "${t}" edge in the graph.`);const i=r.source.key,o=r.target.key;if(e===i)return o;if(e===o)return i;throw new K(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${i}, ${o}).`)}hasExtremity(e,t){e=""+e,t=""+t;const r=this._edges.get(e);if(!r)throw new K(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===t||r.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new K(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new K(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new K(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return yv(this,e,t).key}mergeNode(e,t){if(t&&!be(t))throw new Q(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let r=this._nodes.get(e);return r?(t&&(we(r.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:t})),[e,!1]):(r=new this.NodeDataClass(e,t),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&typeof t!="function")throw new Q(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let r=this._nodes.get(e);if(r){if(t){const o=r.attributes;r.attributes=t(o),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=t?t({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new K(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in t.out){r=t.out[i];do Tt(this,r),r=r.next;while(r)}for(const i in t.in){r=t.in[i];do Tt(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in t.undirected){r=t.undirected[i];do Tt(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(t=Pe(this,r,i,this.type),!t)throw new K(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new K(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Tt(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new re("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new re("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,t=""+t;const r=Pe(this,e,t,"directed");if(!r)throw new K(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return Tt(this,r),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new re("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new re("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=Pe(this,e,t,"undirected");if(!r)throw new K(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return Tt(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if(typeof t!="function")throw new Q("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=t(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!be(e))throw new Q("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!be(e))throw new Q("Graph.mergeAttributes: provided attributes are not a plain object.");return we(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new Q("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if(typeof e!="function")throw new Q("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!ss(t))throw new Q("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,o;for(;i=r.next(),i.done!==!0;)o=i.value,o.attributes=e(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if(typeof e!="function")throw new Q("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!ss(t))throw new Q("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,o,u,l;for(;i=r.next(),i.done!==!0;)o=i.value,u=o.source,l=o.target,o.attributes=e(o.key,o.attributes,u.key,l.key,u.attributes,l.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new Q("Graph.forEachAdjacencyEntry: expecting a callback.");Wn(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Q("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Wn(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new Q("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Wn(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Q("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Wn(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):mc(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new Q("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let r,i;for(;r=t.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new Q("Graph.findNode: expecting a callback.");const t=this._nodes.values();let r,i;for(;r=t.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new Q("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let r,i;const o=new Array(this.order);let u=0;for(;r=t.next(),r.done!==!0;)i=r.value,o[u++]=e(i.key,i.attributes);return o}someNode(e){if(typeof e!="function")throw new Q("Graph.someNode: expecting a callback.");const t=this._nodes.values();let r,i;for(;r=t.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new Q("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let r,i;for(;r=t.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new Q("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let r,i;const o=[];for(;r=t.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&o.push(i.key);return o}reduceNodes(e,t){if(typeof e!="function")throw new Q("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Q("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=t;const i=this._nodes.values();let o,u;for(;o=i.next(),o.done!==!0;)u=o.value,r=e(r,u.key,u.attributes);return r}nodeEntries(){const e=this._nodes.values();return new Le(()=>{const t=e.next();if(t.done)return t;const r=t.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach((i,o)=>{e[t++]=cv(o,i)});const r=new Array(this._edges.size);return t=0,this._edges.forEach((i,o)=>{r[t++]=lv(this.type,o,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,t=!1){if(e instanceof go)return e.forEachNode((h,d)=>{t?this.mergeNode(h,d):this.addNode(h,d)}),e.forEachEdge((h,d,p,v,y,w,S)=>{t?S?this.mergeUndirectedEdgeWithKey(h,p,v,d):this.mergeDirectedEdgeWithKey(h,p,v,d):S?this.addUndirectedEdgeWithKey(h,p,v,d):this.addDirectedEdgeWithKey(h,p,v,d)}),this;if(!be(e))throw new Q("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!be(e.attributes))throw new Q("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,o,u,l;if(e.nodes){if(o=e.nodes,!Array.isArray(o))throw new Q("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=o.length;r<i;r++){u=o[r],dv(u);const{key:h,attributes:d}=u;t?this.mergeNode(h,d):this.addNode(h,d)}}if(e.edges){let h=!1;if(this.type==="undirected"&&(h=!0),o=e.edges,!Array.isArray(o))throw new Q("Graph.import: invalid edges. Expecting an array.");for(r=0,i=o.length;r<i;r++){l=o[r],hv(l);const{source:d,target:p,attributes:v,undirected:y=h}=l;let w;"key"in l?(w=t?y?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:y?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,w.call(this,l.key,d,p,v)):(w=t?y?this.mergeUndirectedEdge:this.mergeDirectedEdge:y?this.addUndirectedEdge:this.addDirectedEdge,w.call(this,d,p,v))}}return this}nullCopy(e){const t=new go(we({},this._options,e));return t.replaceAttributes(we({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const o=we({},r.attributes);r=new t.NodeDataClass(i,o),t._nodes.set(i,r)}),t}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new re(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new re("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new re("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),r=this._edges.values();let i,o;for(;i=r.next(),i.done!==!0;)o=i.value,Nc(t,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,we({},o.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((o,u)=>{e[u]=o.attributes});const t={},r={};this._edges.forEach((o,u)=>{const l=o.undirected?"--":"->";let h="",d=o.source.key,p=o.target.key,v;o.undirected&&d>p&&(v=d,d=p,p=v);const y=`(${d})${l}(${p})`;u.startsWith("geid_")?this.multi&&(typeof r[y]>"u"?r[y]=0:r[y]++,h+=`${r[y]}. `):h+=`[${u}]: `,h+=y,t[h]=o.attributes});const i={};for(const o in this)this.hasOwnProperty(o)&&!us.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(i[o]=this[o]);return i.attributes=this._attributes,i.nodes=e,i.edges=t,Ie(i,"constructor",this.constructor),i}};typeof Symbol<"u"&&(pe.prototype[Symbol.for("nodejs.util.inspect.custom")]=pe.prototype.inspect);gv.forEach(n=>{["add","merge","update"].forEach(e=>{const t=n.name(e),r=e==="add"?Nc:mv;n.generateKey?pe.prototype[t]=function(i,o,u){return r(this,t,!0,(n.type||this.type)==="undirected",null,i,o,u,e==="update")}:pe.prototype[t]=function(i,o,u,l){return r(this,t,!1,(n.type||this.type)==="undirected",i,o,u,l,e==="update")}})});Ng(pe);Og(pe);ev(pe);uv(pe);class Co extends pe{constructor(e){const t=we({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new Q("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new Q('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Io extends pe{constructor(e){const t=we({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new Q("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new Q('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Mc extends pe{constructor(e){const t=we({multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Q("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class Dc extends pe{constructor(e){const t=we({type:"directed",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Q("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new Q('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Cc extends pe{constructor(e){const t=we({type:"undirected",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Q("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new Q('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function Ht(n){n.from=function(e,t){const r=we({},e.options,t),i=new n(r);return i.import(e),i}}Ht(pe);Ht(Co);Ht(Io);Ht(Mc);Ht(Dc);Ht(Cc);pe.Graph=pe;pe.DirectedGraph=Co;pe.UndirectedGraph=Io;pe.MultiGraph=Mc;pe.MultiDirectedGraph=Dc;pe.MultiUndirectedGraph=Cc;pe.InvalidArgumentsGraphError=Q;pe.NotFoundGraphError=K;pe.UsageGraphError=re;class lr extends Co{constructor(e){super(e),this.on("nodeAdded",({key:t})=>{const r=this.getNodeAttributes(t);r.id||this.setNodeAttribute(t,"id",Number(t)),r.selected===void 0&&this.setNodeAttribute(t,"selected",!1),r.size===void 0&&this.setNodeAttribute(t,"size",.25),r.magnitude===void 0&&this.setNodeAttribute(t,"magnitude",1)}),this.on("edgeAdded",({key:t,source:r,target:i})=>{const o=this.getEdgeAttributes(t);o.source||this.setEdgeAttribute(t,"source",Number(r)),o.target||this.setEdgeAttribute(t,"target",Number(i)),o.selected===void 0&&this.setEdgeAttribute(t,"selected",!1)})}copy(){const e=new lr(this.options);return e.import(this.export()),e}getNodesForD3(){return this.nodes().map(e=>({...this.getNodeAttributes(e),id:Number(e)}))}getEdgesForD3(){return this.edges().map(e=>{const{source:t,target:r,...i}=this.getEdgeAttributes(e);return{source:Number(t),target:Number(r),...i}})}getEdgeSourcetarget(e){return[this.source(e),this.target(e)]}deselectAll(){this.updateEachNodeAttributes((e,t)=>({...t,selected:0})),this.updateEachEdgeAttributes((e,t)=>({...t,selected:!1}))}selectNode(e){this.setNodeAttribute(e,"selected",!0)}selectEdge(e){this.setEdgeAttribute(e,"selected",!0)}deselectNode(e){this.setNodeAttribute(e,"selected",!1)}deselectEdge(e){this.setEdgeAttribute(e,"selected",!1)}toggleNodeSelection(e){if((this.getNodeAttribute(e,"selected")||0)>0)this.setNodeAttribute(e,"selected",0);else{let r=0;this.forEachNode((i,o)=>{typeof o.selected=="number"&&o.selected>r&&(r=o.selected)}),this.setNodeAttribute(e,"selected",r+1)}}toggleEdgeSelection(e){this.updateEdgeAttribute(e,"selected",t=>!t)}getSelectedNodes(){return this.filterNodes((e,t)=>typeof t.selected=="number"&&t.selected>0).sort((e,t)=>this.getNodeAttribute(e,"selected")-this.getNodeAttribute(t,"selected"))}getSelectedEdges(){return this.filterEdges((e,t)=>t.selected)}deleteSelected(){this.getSelectedEdges().forEach(e=>this.dropEdge(e)),this.getSelectedNodes().forEach(e=>this.dropNode(e))}updateSelectedNodesColor(e,t){this.updateSelectedNodesAttributes({color:e,stroke:t})}updateSelectedNodesName(e){this.updateSelectedNodesAttributes({label:e})}updateSelectedEdgesColor(e){this.updateSelectedEdgesAttributes({color:e})}updateSelectedNodesAttributes(e){this.getSelectedNodes().forEach(t=>{this.mergeNodeAttributes(t,e)})}updateSelectedEdgesAttributes(e){this.getSelectedEdges().forEach(t=>{this.mergeEdgeAttributes(t,e)})}connectSelectedNodes(e){const t=this.getSelectedNodes();if(!(t.length<2))for(let r=0;r<t.length;r++)for(let i=r+1;i<t.length;i++){const o=t[r],u=t[i];this.mergeEdge(o,u,{color:e,selected:!1})}}connectSelectedNodesInOrder(e){const t=this.getSelectedNodes();for(let r=0;r<t.length-1;r++){const i=t[r],o=t[r+1];this.mergeEdge(i,o,{color:e,selected:!1})}}selectPath(e){this.deselectAll(),e.forEach(t=>{this.hasNode(t)&&this.selectNode(t)});for(let t=0;t<e.length-1;t++){const r=e[t],i=e[t+1];if(this.hasEdge(r,i)){const o=this.edge(r,i);this.selectEdge(o)}}}}class bn extends Io{constructor(e){super(e),this.on("nodeAdded",({key:t})=>{const r=this.getNodeAttributes(t);r.id||this.setNodeAttribute(t,"id",Number(t)),r.selected===void 0&&this.setNodeAttribute(t,"selected",!1),r.size===void 0&&this.setNodeAttribute(t,"size",.25),r.magnitude===void 0&&this.setNodeAttribute(t,"magnitude",1)}),this.on("edgeAdded",({key:t,source:r,target:i})=>{const o=this.getEdgeAttributes(t);o.source||this.setEdgeAttribute(t,"source",Number(r)),o.target||this.setEdgeAttribute(t,"target",Number(i)),o.selected===void 0&&this.setEdgeAttribute(t,"selected",!1)})}copy(){const e=new bn(this.options);return e.import(this.export()),e}getNodesForD3(){return this.nodes().map(e=>({...this.getNodeAttributes(e),id:Number(e)}))}getEdgesForD3(){return this.edges().map(e=>{const{source:t,target:r,...i}=this.getEdgeAttributes(e);return{source:Number(t),target:Number(r),...i}})}getEdgeSourcetarget(e){return[this.source(e),this.target(e)]}deselectAll(){this.updateEachNodeAttributes((e,t)=>({...t,selected:0})),this.updateEachEdgeAttributes((e,t)=>({...t,selected:!1}))}selectNode(e){this.setNodeAttribute(e,"selected",!0)}selectEdge(e){this.setEdgeAttribute(e,"selected",!0)}deselectNode(e){this.setNodeAttribute(e,"selected",!1)}deselectEdge(e){this.setEdgeAttribute(e,"selected",!1)}toggleNodeSelection(e){if((this.getNodeAttribute(e,"selected")||0)>0)this.setNodeAttribute(e,"selected",0);else{let r=0;this.forEachNode((i,o)=>{typeof o.selected=="number"&&o.selected>r&&(r=o.selected)}),this.setNodeAttribute(e,"selected",r+1)}}toggleEdgeSelection(e){this.updateEdgeAttribute(e,"selected",t=>!t)}getSelectedNodes(){return this.filterNodes((e,t)=>typeof t.selected=="number"&&t.selected>0).sort((e,t)=>this.getNodeAttribute(e,"selected")-this.getNodeAttribute(t,"selected"))}getSelectedEdges(){return this.filterEdges((e,t)=>t.selected)}deleteSelected(){this.getSelectedEdges().forEach(e=>this.dropEdge(e)),this.getSelectedNodes().forEach(e=>this.dropNode(e))}updateSelectedNodesColor(e,t){this.updateSelectedNodesAttributes({color:e,stroke:t})}updateSelectedNodesName(e){this.updateSelectedNodesAttributes({label:e})}updateSelectedEdgesColor(e){this.updateSelectedEdgesAttributes({color:e})}updateSelectedNodesAttributes(e){this.getSelectedNodes().forEach(t=>{this.mergeNodeAttributes(t,e)})}updateSelectedEdgesAttributes(e){this.getSelectedEdges().forEach(t=>{this.mergeEdgeAttributes(t,e)})}connectSelectedNodes(e){const t=this.getSelectedNodes();if(!(t.length<2))for(let r=0;r<t.length;r++)for(let i=r+1;i<t.length;i++){const o=t[r],u=t[i];this.mergeEdge(o,u,{color:e,selected:!1})}}connectSelectedNodesInOrder(e){const t=this.getSelectedNodes();for(let r=0;r<t.length-1;r++){const i=t[r],o=t[r+1];this.mergeEdge(i,o,{color:e,selected:!1})}}selectPath(e){this.deselectAll(),e.forEach(t=>{this.hasNode(t)&&this.selectNode(t)});for(let t=0;t<e.length-1;t++){const r=e[t],i=e[t+1];if(this.hasEdge(r,i)){const o=this.edge(r,i);this.selectEdge(o)}}}}var Pt={},Vr,ls;function Ue(){return ls||(ls=1,Vr=function(e){return e!==null&&typeof e=="function"&&typeof e.prototype=="object"&&typeof e.prototype.addUndirectedEdgeWithKey=="function"&&typeof e.prototype.dropNode=="function"}),Vr}var Qr,ds;function wv(){if(ds)return Qr;ds=1;var n=Ue();return Qr=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/complete: invalid Graph constructor.");var i=new t,o,u;for(o=0;o<r;o++)i.addNode(o);for(o=0;o<r;o++)for(u=o+1;u<r;u++)i.type!=="directed"&&i.addUndirectedEdge(o,u),i.type!=="undirected"&&(i.addDirectedEdge(o,u),i.addDirectedEdge(u,o));return i},Qr}var Zr,hs;function zo(){if(hs)return Zr;hs=1;var n=Ue();return Zr=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/empty: invalid Graph constructor.");var i=new t,o;for(o=0;o<r;o++)i.addNode(o);return i},Zr}var Jr,fs;function bv(){if(fs)return Jr;fs=1;var n=Ue();return Jr=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/ladder: invalid Graph constructor.");var i=new t,o;for(o=0;o<r-1;o++)i.mergeEdge(o,o+1);for(o=r;o<r*2-1;o++)i.mergeEdge(o,o+1);for(o=0;o<r;o++)i.addEdge(o,o+r);return i},Jr}var ei,ps;function xv(){if(ps)return ei;ps=1;var n=Ue();return ei=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/path: invalid Graph constructor.");for(var i=new t,o=0;o<r-1;o++)i.mergeEdge(o,o+1);return i},ei}var gs;function Ev(){return gs||(gs=1,Pt.complete=wv(),Pt.empty=zo(),Pt.ladder=bv(),Pt.path=xv()),Pt}var st=Ev(),qe={},ti,vs;function de(){return vs||(vs=1,ti=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),ti}var ni={},ys;function _v(){return ys||(ys=1,ni.copyNode=function(n,e,t){return t=Object.assign({},t),n.addNode(e,t)}),ni}var Lt={},ms;function To(){return ms||(ms=1,Lt.addEdge=function(e,t,r,i,o,u){return t?r==null?e.addUndirectedEdge(i,o,u):e.addUndirectedEdgeWithKey(r,i,o,u):r==null?e.addDirectedEdge(i,o,u):e.addDirectedEdgeWithKey(r,i,o,u)},Lt.copyEdge=function(e,t,r,i,o,u){return u=Object.assign({},u),t?r==null?e.addUndirectedEdge(i,o,u):e.addUndirectedEdgeWithKey(r,i,o,u):r==null?e.addDirectedEdge(i,o,u):e.addDirectedEdgeWithKey(r,i,o,u)},Lt.mergeEdge=function(e,t,r,i,o,u){return t?r==null?e.mergeUndirectedEdge(i,o,u):e.mergeUndirectedEdgeWithKey(r,i,o,u):r==null?e.mergeDirectedEdge(i,o,u):e.mergeDirectedEdgeWithKey(r,i,o,u)},Lt.updateEdge=function(e,t,r,i,o,u){return t?r==null?e.updateUndirectedEdge(i,o,u):e.updateUndirectedEdgeWithKey(r,i,o,u):r==null?e.updateDirectedEdge(i,o,u):e.updateDirectedEdgeWithKey(r,i,o,u)}),Lt}var ri,ws;function Sv(){if(ws)return ri;ws=1;function n(e){this.graph=e,this.stack=new Array(e.order),this.seen=new Set,this.size=0}return n.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},n.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},n.prototype.forEachNodeYetUnseen=function(e){var t=this.seen,r=this.graph;r.someNode(function(i,o){if(t.size===r.order)return!0;if(t.has(i))return!1;var u=e(i,o);return!!u})},n.prototype.has=function(e){return this.seen.has(e)},n.prototype.push=function(e){var t=this.seen.size;return this.seen.add(e),t===this.seen.size?!1:(this.stack[this.size++]=e,!0)},n.prototype.pushWith=function(e,t){var r=this.seen.size;return this.seen.add(e),r===this.seen.size?!1:(this.stack[this.size++]=t,!0)},n.prototype.pop=function(){if(this.size!==0)return this.stack[--this.size]},ri=n,ri}var bs;function Av(){if(bs)return qe;bs=1;var n=de(),e=_v().copyNode,t=To().copyEdge,r=Sv();function i(w,S){if(!n(w))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(w.order){var E=new r(w),N=E.push.bind(E);E.forEachNodeYetUnseen(function(k){var A=[];E.push(k);for(var I;E.size!==0;)I=E.pop(),A.push(I),w.forEachNeighbor(I,N);S(A)})}}function o(w,S){if(!n(w))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(w.order){var E=new r(w),N=E.push.bind(E);E.forEachNodeYetUnseen(function(k){var A=0;E.push(k);for(var I;E.size!==0;)I=E.pop(),A++,w.forEachNeighbor(I,N);S(A)})}}function u(w,S,E){if(!n(w))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!w.order)return;var N=new r(w),k;function A(I,x,M,$,m,C,z){k===$&&($=M),S(I,x,M,$,m,C,z)&&N.push($)}N.forEachNodeYetUnseen(function(I){var x=0;for(N.push(I);N.size!==0;)k=N.pop(),x++,w.forEachEdge(k,A);E(x)})}function l(w){var S=0;return o(w,function(){S++}),S}function h(w){var S=[];return i(w,function(E){S.push(E)}),S}function d(w){if(!n(w))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!w.order)return[];var S=new r(w),E=S.push.bind(S),N=[],k;return S.forEachNodeYetUnseen(function(A){k=[],S.push(A);for(var I;S.size!==0;)I=S.pop(),k.push(I),w.forEachNeighbor(I,E);return k.length>N.length&&(N=k),N.length>S.countUnseenNodes()}),N}function p(w){var S=d(w),E=w.nullCopy();return S.forEach(function(N){e(E,N,w.getNodeAttributes(N))}),w.forEachEdge(function(N,k,A,I,x,M,$){E.hasNode(A)&&t(E,$,N,A,I,k)}),E}function v(w){var S=new Set(d(w));w.forEachNode(function(E){S.has(E)||w.dropNode(E)})}function y(w){if(!n(w))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!w.order)return[];if(w.type==="undirected")throw new Error("graphology-components: the given graph is undirected");var S=w.nodes(),E=[],N,k;if(!w.size){for(N=0,k=S.length;N<k;N++)E.push([S[N]]);return E}var A=1,I=[],x=[],M=new Map,$=new Set,m,C,z,P=function(G){var q,j=w.outboundNeighbors(G),H;M.set(G,A++),I.push(G),x.push(G);for(var U=0,X=j.length;U<X;U++)if(q=j[U],M.has(q)){if(H=M.get(q),!$.has(q))for(;M.get(I[I.length-1])>H;)I.pop()}else P(q);if(M.get(I[I.length-1])===M.get(G)){m=[];do C=x.pop(),m.push(C),$.add(C);while(C!==G);E.push(m),I.pop()}};for(N=0,k=S.length;N<k;N++)z=S[N],$.has(z)||P(z);return E}return qe.forEachConnectedComponent=i,qe.forEachConnectedComponentOrder=o,qe.forEachConnectedComponentOrderWithEdgeFilter=u,qe.countConnectedComponents=l,qe.connectedComponents=h,qe.largestConnectedComponent=d,qe.largestConnectedComponentSubgraph=p,qe.cropToLargestConnectedComponent=v,qe.stronglyConnectedComponents=y,qe}var ii=Av(),We={},St={},oi,xs;function Po(){if(xs)return oi;xs=1;var n=vc(),e=n.ARRAY_BUFFER_SUPPORT,t=n.SYMBOL_SUPPORT;return oi=function(i,o){var u,l,h,d,p;if(!i)throw new Error("obliterator/forEach: invalid iterable.");if(typeof o!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(i)||e&&ArrayBuffer.isView(i)||typeof i=="string"||i.toString()==="[object Arguments]"){for(h=0,d=i.length;h<d;h++)o(i[h],h);return}if(typeof i.forEach=="function"){i.forEach(o);return}if(t&&Symbol.iterator in i&&typeof i.next!="function"&&(i=i[Symbol.iterator]()),typeof i.next=="function"){for(u=i,h=0;p=u.next(),p.done!==!0;)o(p.value,h),h++;return}for(l in i)i.hasOwnProperty(l)&&o(i[l],l)},oi}var ai,Es;function kv(){if(Es)return ai;Es=1;var n=Ct(),e=Po();function t(){this.clear()}return t.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},t.prototype.enqueue=function(r){return this.items.push(r),++this.size},t.prototype.dequeue=function(){if(this.size){var r=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,r}},t.prototype.peek=function(){if(this.size)return this.items[this.offset]},t.prototype.forEach=function(r,i){i=arguments.length>1?i:this;for(var o=this.offset,u=0,l=this.items.length;o<l;o++,u++)r.call(i,this.items[o],u,this)},t.prototype.toArray=function(){return this.items.slice(this.offset)},t.prototype.values=function(){var r=this.items,i=this.offset;return new n(function(){if(i>=r.length)return{done:!0};var o=r[i];return i++,{value:o,done:!1}})},t.prototype.entries=function(){var r=this.items,i=this.offset,o=0;return new n(function(){if(i>=r.length)return{done:!0};var u=r[i];return i++,{value:[o++,u],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.toString=function(){return this.toArray().join(",")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(r){var i=new t;return e(r,function(o){i.enqueue(o)}),i},t.of=function(){return t.from(arguments)},ai=t,ai}var si,_s;function Nv(){return _s||(_s=1,si=function(e,t){var r=t.length;if(r!==0){var i=e.length;e.length+=r;for(var o=0;o<r;o++)e[i+o]=t[o]}}),si}var Ss;function Lo(){if(Ss)return St;Ss=1;var n=de(),e=kv(),t=Nv();function r(d,p,v){if(!n(d))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!d.hasNode(p))throw new Error('graphology-shortest-path: the "'+p+'" source node does not exist in the given graph.');if(!d.hasNode(v))throw new Error('graphology-shortest-path: the "'+v+'" target node does not exist in the given graph.');if(p=""+p,v=""+v,p===v)return[p];var y=d.inboundNeighbors.bind(d),w=d.outboundNeighbors.bind(d),S={},E={};S[p]=null,E[v]=null;var N=[p],k=[v],A,I,x,M,$,m,C,z,P=!1;e:for(;N.length&&k.length;)if(N.length<=k.length){for(A=N,N=[],$=0,C=A.length;$<C;$++)for(I=A[$],x=w(I),m=0,z=x.length;m<z;m++)if(M=x[m],M in S||(N.push(M),S[M]=I),M in E){P=!0;break e}}else for(A=k,k=[],$=0,C=A.length;$<C;$++)for(I=A[$],x=y(I),m=0,z=x.length;m<z;m++)if(M=x[m],M in E||(k.push(M),E[M]=I),M in S){P=!0;break e}if(!P)return null;for(var G=[];M;)G.unshift(M),M=S[M];for(M=E[G[G.length-1]];M;)G.push(M),M=E[M];return G.length?G:null}function i(d,p){if(!n(d))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!d.hasNode(p))throw new Error('graphology-shortest-path: the "'+p+'" source node does not exist in the given graph.');p=""+p;var v={},y={},w,S,E,N,k,A;for(v[p]=!0,y[p]=[p];Object.keys(v).length;){w=v,v={};for(E in w)for(S=d.outboundNeighbors(E),k=0,A=S.length;k<A;k++)N=S[k],y[N]||(y[N]=y[E].concat(N),v[N]=!0)}return y}function o(d,p,v){if(!n(p))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!p.hasNode(v))throw new Error('graphology-shortest-path: the "'+v+'" source node does not exist in the given graph.');v=""+v;var y=new Set,w={},S=0;w[v]=0;for(var E=[v],N,k,A;E.length!==0;){var I=[];for(N=0,k=E.length;N<k;N++)A=E[N],!y.has(A)&&(y.add(A),t(I,p[d](A)),w[A]=S);S++,E=I}return w}var u=o.bind(null,"outboundNeighbors"),l=o.bind(null,"neighbors");function h(d,p){p=""+p;var v=[],y={},w={},S=d.nodes(),E,N,k,A,I,x,M,$,m;for(x=0,$=S.length;x<$;x++)A=S[x],y[A]=[],w[A]=0;var C={};w[p]=1,C[p]=0;for(var z=e.of(p);z.size;)for(A=z.dequeue(),v.push(A),E=C[A],N=w[A],k=d.outboundNeighbors(A),M=0,m=k.length;M<m;M++)I=k[M],I in C||(z.enqueue(I),C[I]=E+1),C[I]===E+1&&(w[I]+=N,y[I].push(A));return[v,y,w]}return St.bidirectional=r,St.singleSource=i,St.singleSourceLength=u,St.undirectedSingleSourceLength=l,St.brandes=h,St}var ui={},As;function Mv(){if(As)return ui;As=1;var n=function(){return!0};return ui.edgePathFromNodePath=function(e,t){var r=t.length,i,o,u,l;if(r<2)return o=t[0],l=e.multi?e.findEdge(o,o,n):e.edge(o,o),l?[l]:[];r--;var h=new Array(r);for(i=0;i<r;i++){if(o=t[i],u=t[i+1],l=e.multi?e.findOutboundEdge(o,u,n):e.edge(o,u),l===void 0)throw new Error("graphology-shortest-path: given path is impossible in given graph.");h[i]=l}return h},ui}var sn={},un={},ks;function _n(){if(ks)return un;ks=1;function n(r){return typeof r!="number"||isNaN(r)?1:r}function e(r,i){var o={},u=function(d){return typeof d>"u"?i:d};typeof i=="function"&&(u=i);var l=function(d){return u(d[r])},h=function(){return u(void 0)};return typeof r=="string"?(o.fromAttributes=l,o.fromGraph=function(d,p){return l(d.getNodeAttributes(p))},o.fromEntry=function(d,p){return l(p)}):typeof r=="function"?(o.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},o.fromGraph=function(d,p){return u(r(p,d.getNodeAttributes(p)))},o.fromEntry=function(d,p){return u(r(d,p))}):(o.fromAttributes=h,o.fromGraph=h,o.fromEntry=h),o}function t(r,i){var o={},u=function(d){return typeof d>"u"?i:d};typeof i=="function"&&(u=i);var l=function(d){return u(d[r])},h=function(){return u(void 0)};return typeof r=="string"?(o.fromAttributes=l,o.fromGraph=function(d,p){return l(d.getEdgeAttributes(p))},o.fromEntry=function(d,p){return l(p)},o.fromPartialEntry=o.fromEntry,o.fromMinimalEntry=o.fromEntry):typeof r=="function"?(o.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},o.fromGraph=function(d,p){var v=d.extremities(p);return u(r(p,d.getEdgeAttributes(p),v[0],v[1],d.getNodeAttributes(v[0]),d.getNodeAttributes(v[1]),d.isUndirected(p)))},o.fromEntry=function(d,p,v,y,w,S,E){return u(r(d,p,v,y,w,S,E))},o.fromPartialEntry=function(d,p,v,y){return u(r(d,p,v,y))},o.fromMinimalEntry=function(d,p){return u(r(d,p))}):(o.fromAttributes=h,o.fromGraph=h,o.fromEntry=h,o.fromMinimalEntry=h),o}return un.createNodeValueGetter=e,un.createEdgeValueGetter=t,un.createEdgeWeightGetter=function(r){return t(r,n)},un}var $t={},Ns;function $o(){if(Ns)return $t;Ns=1;var n=function(i,o){return i<o?-1:i>o?1:0},e=function(i,o){return i<o?1:i>o?-1:0};function t(i){return function(o,u){return i(u,o)}}function r(i){return i===2?function(o,u){return o[0]<u[0]?-1:o[0]>u[0]?1:o[1]<u[1]?-1:o[1]>u[1]?1:0}:function(o,u){for(var l=0;l<i;){if(o[l]<u[l])return-1;if(o[l]>u[l])return 1;l++}return 0}}return $t.DEFAULT_COMPARATOR=n,$t.DEFAULT_REVERSE_COMPARATOR=e,$t.reverseComparator=t,$t.createTupleComparator=r,$t}var Gt={},ci={},Ms;function Sn(){return Ms||(Ms=1,function(n){var e=Math.pow(2,8)-1,t=Math.pow(2,16)-1,r=Math.pow(2,32)-1,i=Math.pow(2,7)-1,o=Math.pow(2,15)-1,u=Math.pow(2,31)-1;n.getPointerArray=function(h){var d=h-1;if(d<=e)return Uint8Array;if(d<=t)return Uint16Array;if(d<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},n.getSignedPointerArray=function(h){var d=h-1;return d<=i?Int8Array:d<=o?Int16Array:d<=u?Int32Array:Float64Array},n.getNumberType=function(h){return h===(h|0)?Math.sign(h)===-1?h<=127&&h>=-128?Int8Array:h<=32767&&h>=-32768?Int16Array:Int32Array:h<=255?Uint8Array:h<=65535?Uint16Array:Uint32Array:Float64Array};var l={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};n.getMinimalRepresentation=function(h,d){var p=null,v=0,y,w,S,E,N;for(E=0,N=h.length;E<N;E++)S=d?d(h[E]):h[E],w=n.getNumberType(S),y=l[w.name],y>v&&(v=y,p=w);return p},n.isTypedArray=function(h){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(h)},n.concat=function(){var h=0,d,p,v;for(d=0,v=arguments.length;d<v;d++)h+=arguments[d].length;var y=new arguments[0].constructor(h);for(d=0,p=0;d<v;d++)y.set(arguments[d],p),p+=arguments[d].length;return y},n.indices=function(h){for(var d=n.getPointerArray(h),p=new d(h),v=0;v<h;v++)p[v]=v;return p}}(ci)),ci}var Ds;function vr(){if(Ds)return Gt;Ds=1;var n=Po(),e=Sn();function t(u){return Array.isArray(u)||e.isTypedArray(u)}function r(u){if(typeof u.length=="number")return u.length;if(typeof u.size=="number")return u.size}function i(u){var l=r(u),h=typeof l=="number"?new Array(l):[],d=0;return n(u,function(p){h[d++]=p}),h}function o(u){var l=r(u),h=typeof l=="number"?e.getPointerArray(l):Array,d=typeof l=="number"?new Array(l):[],p=typeof l=="number"?new h(l):[],v=0;return n(u,function(y){d[v]=y,p[v]=v++}),[d,p]}return Gt.isArrayLike=t,Gt.guessLength=r,Gt.toArray=i,Gt.toArrayWithIndices=o,Gt}var li,Cs;function Go(){if(Cs)return li;Cs=1;var n=Po(),e=$o(),t=vr(),r=e.DEFAULT_COMPARATOR,i=e.reverseComparator;function o(k,A,I,x){for(var M=A[x],$,m;x>I;){if($=x-1>>1,m=A[$],k(M,m)<0){A[x]=m,x=$;continue}break}A[x]=M}function u(k,A,I){for(var x=A.length,M=I,$=A[I],m=2*I+1,C;m<x;)C=m+1,C<x&&k(A[m],A[C])>=0&&(m=C),A[I]=A[m],I=m,m=2*I+1;A[I]=$,o(k,A,M,I)}function l(k,A,I){A.push(I),o(k,A,0,A.length-1)}function h(k,A){var I=A.pop();if(A.length!==0){var x=A[0];return A[0]=I,u(k,A,0),x}return I}function d(k,A,I){if(A.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var x=A[0];return A[0]=I,u(k,A,0),x}function p(k,A,I){var x;return A.length!==0&&k(A[0],I)<0&&(x=A[0],A[0]=I,I=x,u(k,A,0)),I}function v(k,A){for(var I=A.length,x=I>>1,M=x;--M>=0;)u(k,A,M)}function y(k,A){for(var I=A.length,x=0,M=new Array(I);x<I;)M[x++]=h(k,A);return M}function w(k,A,I){arguments.length===2&&(I=A,A=k,k=r);var x=i(k),M,$,m,C=1/0,z;if(A===1){if(t.isArrayLike(I)){for(M=0,$=I.length;M<$;M++)m=I[M],(C===1/0||k(m,C)<0)&&(C=m);return z=new I.constructor(1),z[0]=C,z}return n(I,function(G){(C===1/0||k(G,C)<0)&&(C=G)}),[C]}if(t.isArrayLike(I)){if(A>=I.length)return I.slice().sort(k);for(z=I.slice(0,A),v(x,z),M=A,$=I.length;M<$;M++)x(I[M],z[0])>0&&d(x,z,I[M]);return z.sort(k)}var P=t.guessLength(I);return P!==null&&P<A&&(A=P),z=new Array(A),M=0,n(I,function(G){M<A?z[M]=G:(M===A&&v(x,z),x(G,z[0])>0&&d(x,z,G)),M++}),z.length>M&&(z.length=M),z.sort(k)}function S(k,A,I){arguments.length===2&&(I=A,A=k,k=r);var x=i(k),M,$,m,C=-1/0,z;if(A===1){if(t.isArrayLike(I)){for(M=0,$=I.length;M<$;M++)m=I[M],(C===-1/0||k(m,C)>0)&&(C=m);return z=new I.constructor(1),z[0]=C,z}return n(I,function(G){(C===-1/0||k(G,C)>0)&&(C=G)}),[C]}if(t.isArrayLike(I)){if(A>=I.length)return I.slice().sort(x);for(z=I.slice(0,A),v(k,z),M=A,$=I.length;M<$;M++)k(I[M],z[0])>0&&d(k,z,I[M]);return z.sort(x)}var P=t.guessLength(I);return P!==null&&P<A&&(A=P),z=new Array(A),M=0,n(I,function(G){M<A?z[M]=G:(M===A&&v(k,z),k(G,z[0])>0&&d(k,z,G)),M++}),z.length>M&&(z.length=M),z.sort(x)}function E(k){if(this.clear(),this.comparator=k||r,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}E.prototype.clear=function(){this.items=[],this.size=0},E.prototype.push=function(k){return l(this.comparator,this.items,k),++this.size},E.prototype.peek=function(){return this.items[0]},E.prototype.pop=function(){return this.size!==0&&this.size--,h(this.comparator,this.items)},E.prototype.replace=function(k){return d(this.comparator,this.items,k)},E.prototype.pushpop=function(k){return p(this.comparator,this.items,k)},E.prototype.consume=function(){return this.size=0,y(this.comparator,this.items)},E.prototype.toArray=function(){return y(this.comparator,this.items.slice())},E.prototype.inspect=function(){var k=this.toArray();return Object.defineProperty(k,"constructor",{value:E,enumerable:!1}),k},typeof Symbol<"u"&&(E.prototype[Symbol.for("nodejs.util.inspect.custom")]=E.prototype.inspect);function N(k){if(this.clear(),this.comparator=k||r,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=i(this.comparator)}return N.prototype=E.prototype,E.from=function(k,A){var I=new E(A),x;return t.isArrayLike(k)?x=k.slice():x=t.toArray(k),v(I.comparator,x),I.items=x,I.size=x.length,I},N.from=function(k,A){var I=new N(A),x;return t.isArrayLike(k)?x=k.slice():x=t.toArray(k),v(I.comparator,x),I.items=x,I.size=x.length,I},E.siftUp=u,E.siftDown=o,E.push=l,E.pop=h,E.replace=d,E.pushpop=p,E.heapify=v,E.consume=y,E.nsmallest=w,E.nlargest=S,E.MinHeap=E,E.MaxHeap=N,li=E,li}var Is;function Dv(){if(Is)return sn;Is=1;var n=de(),e=_n().createEdgeWeightGetter,t=Go(),r="weight";function i(v,y){return v[0]>y[0]?1:v[0]<y[0]?-1:v[1]>y[1]?1:v[1]<y[1]?-1:v[2]>y[2]?1:v[2]<y[2]?-1:0}function o(v,y){return v[0]>y[0]?1:v[0]<y[0]?-1:v[1]>y[1]?1:v[1]<y[1]?-1:v[2]>y[2]?1:v[2]<y[2]?-1:v[3]>y[3]?1:v[3]<y[3]?-1:0}function u(v,y,w,S){if(y=""+y,w=""+w,!n(v))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(y&&!v.hasNode(y))throw new Error('graphology-shortest-path/dijkstra: the "'+y+'" source node does not exist in the given graph.');if(w&&!v.hasNode(w))throw new Error('graphology-shortest-path/dijkstra: the "'+w+'" target node does not exist in the given graph.');if(S=e(S||r).fromMinimalEntry,y===w)return[0,[y]];var E=[{},{}],N=[{},{}],k=[new t(i),new t(i)],A=[{},{}];N[0][y]=[y],N[1][w]=[w],A[0][y]=0,A[1][w]=0;var I=[],x=1/0,M=0,$=1,m,C,z,P,G,q,j,H,U;for(k[0].push([0,M++,y]),k[1].push([0,M++,w]);k[0].size&&k[1].size;)if($=1-$,m=k[$].pop(),P=m[0],G=m[2],!(G in E[$])){if(E[$][G]=P,G in E[1-$])return[x,I];for(C=$===1?v.inboundEdges(G):v.outboundEdges(G),H=0,U=C.length;H<U;H++){if(j=C[H],q=v.opposite(G,j),z=E[$][G]+S(j,v.getEdgeAttributes(j)),q in E[$]&&z<E[$][q])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(q in A[$])||z<A[$][q])&&(A[$][q]=z,k[$].push([z,M++,q]),N[$][q]=N[$][G].concat(q),q in A[0]&&q in A[1]&&(P=A[0][q]+A[1][q],(I.length===0||x>P)&&(x=P,I=N[0][q].concat(N[1][q].slice(0,-1).reverse()))))}}return[1/0,null]}function l(v,y,w,S,E,N){if(!n(v))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");w=e(w||r).fromMinimalEntry;var k={},A={},I=new t(i),x=0,M,$,m,C,z,P,G,q,j,H,U;for(q=0,H=y.length;q<H;q++)C=y[q],A[C]=0,I.push([0,x++,C]),N[C]=[C];for(;I.size;)if($=I.pop(),G=$[0],C=$[2],!(C in k)){if(k[C]=G,C===E)break;for(M=v.outboundEdges(C),j=0,U=M.length;j<U;j++){if(P=M[j],z=v.opposite(C,P),m=w(P,v.getEdgeAttributes(P))+k[C],z in k&&m<k[z])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(z in A)||m<A[z])&&(A[z]=m,I.push([m,x++,z]),N[z]=N[C].concat(z))}}return k}function h(v,y,w){var S={};return l(v,[y],w,0,null,S),S}function d(v,y,w,S){return u(v,y,w,S)[1]}function p(v,y,w){y=""+y,w=e(w||r).fromMinimalEntry;var S=[],E={},N={},k=v.nodes(),A,I,x,M,$,m,C,z,P,G;for(P=0,G=k.length;P<G;P++)m=k[P],E[m]=[],N[m]=0;var q={};N[y]=1;var j={};j[y]=0;var H=0,U=new t(o);for(U.push([0,H++,y,y]);U.size;)if(I=U.pop(),M=I[0],x=I[2],m=I[3],!(m in q))for(N[m]+=N[x],S.push(m),q[m]=M,A=v.outboundEdges(m),P=0,G=A.length;P<G;P++)z=A[P],C=v.opposite(m,z),$=M+w(z,v.getEdgeAttributes(z)),!(C in q)&&(!(C in j)||$<j[C])?(j[C]=$,U.push([$,H++,m,C]),N[C]=0,E[C]=[m]):$===j[C]&&(N[C]+=N[m],E[C].push(m));return[S,E,N]}return sn.bidirectional=d,sn.singleSource=h,sn.brandes=p,sn}var zs;function Cv(){if(zs)return We;zs=1;var n=Lo(),e=Mv();return We.unweighted=n,We.dijkstra=Dv(),We.bidirectional=n.bidirectional,We.singleSource=n.singleSource,We.singleSourceLength=n.singleSourceLength,We.undirectedSingleSourceLength=n.undirectedSingleSourceLength,We.brandes=n.brandes,We.edgePathFromNodePath=e.edgePathFromNodePath,We}var Iv=Cv(),xe={},He={},di,Ts;function Ic(){if(Ts)return di;Ts=1;var n=de();return di=function(t){if(!n(t))throw new Error("graphology-metrics/simple-size: the given graph is not a valid graphology instance.");if(!t.multi)return t.size;var r=0,i=0;function o(){r++}function u(){i++}return t.forEachNode(function(l){t.type!=="directed"&&t.forEachUndirectedNeighbor(l,o),t.type!=="undirected"&&t.forEachOutNeighbor(l,u)}),r/2+i},di}var Ps;function zc(){if(Ps)return He;Ps=1;var n=de(),e=Ic();function t(u,l){return 2*l/(u*(u-1))}function r(u,l){return l/(u*(u-1))}function i(u,l){var h=u*(u-1);return l/(h+h/2)}function o(u,l,h){var d,p;if(arguments.length>3){if(d=h,p=arguments[3],typeof d!="number"||d<0)throw new Error("graphology-metrics/density: given order is not a valid number.");if(typeof p!="number"||p<0)throw new Error("graphology-metrics/density: given size is not a valid number.")}else{if(!n(h))throw new Error("graphology-metrics/density: given graph is not a valid graphology instance.");d=h.order,p=h.size,h.multi&&l===!1&&(p=e(h))}if(d<2)return 0;u===null&&(u=h.type),l===null&&(l=h.multi);var v;return u==="undirected"?v=t:u==="directed"?v=r:v=i,v(d,p)}return He.abstractDensity=o,He.density=o.bind(null,null,null),He.directedDensity=o.bind(null,"directed",!1),He.undirectedDensity=o.bind(null,"undirected",!1),He.mixedDensity=o.bind(null,"mixed",!1),He.multiDirectedDensity=o.bind(null,"directed",!0),He.multiUndirectedDensity=o.bind(null,"undirected",!0),He.multiMixedDensity=o.bind(null,"mixed",!0),He}var Hn={},Ls;function zv(){if(Ls)return Hn;Ls=1;var n=de();function e(r,i){if(!n(r))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var o=[].concat(i),u,l,h,d={};for(h=0;h<o.length;h++)l=o[h],d[l]=[1/0,-1/0];return r.forEachNode(function(p,v){for(h=0;h<o.length;h++)l=o[h],u=v[l],u<d[l][0]&&(d[l][0]=u),u>d[l][1]&&(d[l][1]=u)}),typeof i=="string"?d[i]:d}function t(r,i){if(!n(r))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var o=[].concat(i),u,l,h,d={};for(h=0;h<o.length;h++)l=o[h],d[l]=[1/0,-1/0];return r.forEachEdge(function(p,v){for(h=0;h<o.length;h++)l=o[h],u=v[l],u<d[l][0]&&(d[l][0]=u),u>d[l][1]&&(d[l][1]=u)}),typeof i=="string"?d[i]:d}return Hn.nodeExtent=e,Hn.edgeExtent=t,Hn}var hi,$s;function Tc(){if($s)return hi;$s=1;var n=de(),e=Lo().singleSourceLength;return hi=function(r,i){if(!n(r))throw new Error("graphology-metrics/eccentricity: given graph is not a valid graphology instance.");if(r.size===0)return 1/0;var o=-1/0,u=e(r,i),l,h,d=0;for(l in u)h=u[l],h>o&&(o=h),d++;return d<r.order?1/0:o},hi}var fi,Gs;function Tv(){if(Gs)return fi;Gs=1;var n=de(),e=Tc();return fi=function(r){if(!n(r))throw new Error("graphology-metrics/diameter: given graph is not a valid graphology instance.");if(r.size===0)return 1/0;var i=-1/0;return r.someNode(function(o){var u=e(r,o);return u>i&&(i=u),i===1/0}),i},fi}var pi,Os;function Qe(){if(Os)return pi;Os=1;function n(t){return!t||typeof t!="object"||typeof t=="function"||Array.isArray(t)||t instanceof Set||t instanceof Map||t instanceof RegExp||t instanceof Date}function e(t,r){t=t||{};var i={};for(var o in r){var u=t[o],l=r[o];if(!n(l)){i[o]=e(u,l);continue}u===void 0?i[o]=l:i[o]=u}return i}return pi=e,pi}var gi,Rs;function Oo(){if(Rs)return gi;Rs=1;var n=de();return gi=function(t){if(!n(t))throw new Error("graphology-utils/infer-type: expecting a valid graphology instance.");var r=t.type;return r!=="mixed"?r:t.directedSize===0&&t.undirectedSize===0||t.directedSize>0&&t.undirectedSize>0?"mixed":t.directedSize>0?"directed":"undirected"},gi}var vi,qs;function Pv(){if(qs)return vi;qs=1;var n=Qe(),e=de(),t=Oo(),r=_n(),i={getNodeCommunity:"community",getEdgeWeight:"weight",resolution:1};function o(A,I){var x=new Array(A.order),M=new Float64Array(A.order),$={},m=0,C=r.createEdgeWeightGetter(I.getEdgeWeight).fromEntry,z=r.createNodeValueGetter(I.getNodeCommunity).fromEntry,P=0,G={};return A.forEachNode(function(q,j){G[q]=P,x[P++]=z(q,j)}),A.forEachUndirectedEdge(function(q,j,H,U,X,ne,he){var ue=C(q,j,H,U,X,ne,he);m+=ue,$[q]=ue,M[G[H]]+=ue,H!==U&&(M[G[U]]+=ue)}),{weights:$,communities:x,weightedDegrees:M,M:m}}function u(A,I){var x=new Array(A.order),M=new Float64Array(A.order),$=new Float64Array(A.order),m={},C=0,z=r.createEdgeWeightGetter(I.getEdgeWeight).fromEntry,P=r.createNodeValueGetter(I.getNodeCommunity).fromEntry,G=0,q={};return A.forEachNode(function(j,H){q[j]=G,x[G++]=P(j,H)}),A.forEachDirectedEdge(function(j,H,U,X,ne,he,ue){var le=z(j,H,U,X,ne,he,ue);C+=le,m[j]=le,$[q[U]]+=le,M[q[X]]+=le}),{weights:m,communities:x,weightedInDegrees:M,weightedOutDegrees:$,M:C}}function l(A,I){var x=I.resolution,M=o(A,I),$=M.communities,m=M.weightedDegrees,C=M.M,z=A.nodes(),P,G,q,j,H,U,X=0,ne=C*2;for(P=0,q=A.order;P<q;P++)for(G=0;G<q;G++)$[P]===$[G]&&(U=A.undirectedEdge(z[P],z[G]),j=M.weights[U]||0,H=m[P]*m[G],P===G&&typeof U<"u"?X+=(j-H/ne*x)*2:X+=j-H/ne*x);return X/ne}function h(A,I){var x=I.resolution,M=u(A,I),$=M.communities,m=M.weightedInDegrees,C=M.weightedOutDegrees,z=M.M,P=A.nodes(),G,q,j,H,U,X,ne=0;for(G=0,j=A.order;G<j;G++)for(q=0;q<j;q++)$[G]===$[q]&&(X=A.directedEdge(P[G],P[q]),H=M.weights[X]||0,U=m[G]*C[q],ne+=H-U/z*x);return ne/z}function d(A,I){var x={},M={},$={},m=r.createNodeValueGetter(I.getNodeCommunity).fromEntry;return A.forEachNode(function(C,z){var P=m(C,z);if(x[C]=P,typeof P>"u")throw new Error('graphology-metrics/modularity: the "'+C+'" node is not in the partition.');M[P]=0,$[P]=0}),{communities:x,totalWeights:M,internalWeights:$}}function p(A,I){var x={},M={},$={},m={},C=r.createNodeValueGetter(I.getNodeCommunity).fromEntry;return A.forEachNode(function(z,P){var G=C(z,P);if(x[z]=G,typeof G>"u")throw new Error('graphology-metrics/modularity: the "'+z+'" node is not in the partition.');M[G]=0,$[G]=0,m[G]=0}),{communities:x,totalInWeights:M,totalOutWeights:$,internalWeights:m}}function v(A,I){var x=I.resolution,M=d(A,I),$=0,m=M.totalWeights,C=M.internalWeights,z=M.communities,P=r.createEdgeWeightGetter(I.getEdgeWeight).fromEntry;A.forEachUndirectedEdge(function(H,U,X,ne,he,ue,le){var ge=P(H,U,X,ne,he,ue,le);$+=ge;var ye=z[X],Ee=z[ne];m[ye]+=ge,m[Ee]+=ge,ye===Ee&&(C[ye]+=ge*2)});var G=0,q=$*2;for(var j in C)G+=C[j]/q-Math.pow(m[j]/q,2)*x;return G}function y(A,I){var x=I.resolution,M=p(A,I),$=0,m=M.totalInWeights,C=M.totalOutWeights,z=M.internalWeights,P=M.communities,G=r.createEdgeWeightGetter(I.getEdgeWeight).fromEntry;A.forEachDirectedEdge(function(H,U,X,ne,he,ue,le){var ge=G(H,U,X,ne,he,ue,le);$+=ge;var ye=P[X],Ee=P[ne];C[ye]+=ge,m[Ee]+=ge,ye===Ee&&(z[ye]+=ge)});var q=0;for(var j in z)q+=z[j]/$-m[j]*C[j]/Math.pow($,2)*x;return q}function w(A,I,x,M){return M/(2*A)-I*x/(2*(A*A))}function S(A,I,x,M,$,m){return m/A-($*I+M*x)/(A*A)}function E(A,I){if(!e(A))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(A.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(A.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var x=t(A);if(x==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return I=n(I,i),x==="directed"?h(A,I):l(A,I)}function N(A,I){if(!e(A))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(A.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(A.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var x=t(A);if(x==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return I=n(I,i),x==="directed"?y(A,I):v(A,I)}var k=N;return k.sparse=N,k.dense=E,k.undirectedDelta=w,k.directedDelta=S,vi=k,vi}var yi,Bs;function Lv(){if(Bs)return yi;Bs=1;var n=de(),e=_n().createEdgeWeightGetter,t="weight";return yi=function(i,o){if(!n(i))throw new Error("graphology-metrics/weighted-size: the given graph is not a valid graphology instance.");o=e(o||t).fromEntry;var u=0;return i.forEachEdge(function(l,h,d,p,v,y,w){u+=o(l,h,d,p,v,y,w)}),u},yi}var js;function $v(){if(js)return xe;js=1;var n=zc(),e=zv();return xe.diameter=Tv(),xe.modularity=Pv(),xe.simpleSize=Ic(),xe.weightedSize=Lv(),xe.abstractDensity=n.abstractDensity,xe.density=n.density,xe.directedDensity=n.directedDensity,xe.undirectedDensity=n.undirectedDensity,xe.mixedDensity=n.mixedDensity,xe.multiDirectedDensity=n.multiDirectedDensity,xe.multiUndirectedDensity=n.multiUndirectedDensity,xe.multiMixedDensity=n.multiMixedDensity,xe.nodeExtent=e.nodeExtent,xe.edgeExtent=e.edgeExtent,xe}var Us=$v(),Yn={},mi,Fs;function Pc(){if(Fs)return mi;Fs=1;var n=de(),e=Oo(),t=Qe(),r=_n().createEdgeWeightGetter,i={edgeDisparityAttribute:"disparity",getEdgeWeight:"weight"};function o(l,h,d){if(!n(h))throw new Error("graphology-metrics/edge/disparity: the given graph is not a valid graphology instance.");if(h.multi||e(h)==="mixed")throw new Error("graphology-metrics/edge/disparity: not defined for multi nor mixed graphs.");d=t(d,i);var p=r(d.getEdgeWeight).fromEntry,v={};h.forEachNode(function(N){v[N]=0}),h.forEachEdge(function(N,k,A,I,x,M,$){var m=p(N,k,A,I,x,M,$);v[A]+=m,v[I]+=m});var y,w,S,E={};if(h.forEachAssymetricAdjacencyEntry(function(N,k,A,I,x,M,$){var m=p(x,M,N,k,A,I,$);y!==N&&(y=N,w=h.degree(N),S=v[N]);var C=h.degree(k),z=v[k],P=m/S,G=m/z,q=Math.pow(1-P,w-1),j=Math.pow(1-G,C-1);E[x]=Math.min(q,j)}),l){h.updateEachEdgeAttributes(function(N,k){return k[d.edgeDisparityAttribute]=E[N],k},{attributes:[d.edgeDisparityAttribute]});return}return E}var u=o.bind(null,!1);return u.assign=o.bind(null,!0),mi=u,mi}var wi={},Ws;function Lc(){return Ws||(Ws=1,function(n){n.intersection=function(){if(arguments.length<2)throw new Error("mnemonist/Set.intersection: needs at least two arguments.");var e=new Set,t=1/0,r=null,i,o,u=arguments.length;for(o=0;o<u;o++){if(i=arguments[o],i.size===0)return e;i.size<t&&(t=i.size,r=i)}for(var l=r.values(),h,d,p,v;h=l.next(),!h.done;){for(d=h.value,p=!0,o=0;o<u;o++)if(v=arguments[o],v!==r&&!v.has(d)){p=!1;break}p&&e.add(d)}return e},n.union=function(){if(arguments.length<2)throw new Error("mnemonist/Set.union: needs at least two arguments.");var e=new Set,t,r=arguments.length,i,o;for(t=0;t<r;t++)for(i=arguments[t].values();o=i.next(),!o.done;)e.add(o.value);return e},n.difference=function(e,t){if(!e.size)return new Set;if(!t.size)return new Set(e);for(var r=new Set,i=e.values(),o;o=i.next(),!o.done;)t.has(o.value)||r.add(o.value);return r},n.symmetricDifference=function(e,t){for(var r=new Set,i=e.values(),o;o=i.next(),!o.done;)t.has(o.value)||r.add(o.value);for(i=t.values();o=i.next(),!o.done;)e.has(o.value)||r.add(o.value);return r},n.isSubset=function(e,t){var r=e.values(),i;if(e===t)return!0;if(e.size>t.size)return!1;for(;i=r.next(),!i.done;)if(!t.has(i.value))return!1;return!0},n.isSuperset=function(e,t){return n.isSubset(t,e)},n.add=function(e,t){for(var r=t.values(),i;i=r.next(),!i.done;)e.add(i.value)},n.subtract=function(e,t){for(var r=t.values(),i;i=r.next(),!i.done;)e.delete(i.value)},n.intersect=function(e,t){for(var r=e.values(),i;i=r.next(),!i.done;)t.has(i.value)||e.delete(i.value)},n.disjunct=function(e,t){for(var r=e.values(),i,o=[];i=r.next(),!i.done;)t.has(i.value)&&o.push(i.value);for(r=t.values();i=r.next(),!i.done;)e.has(i.value)||e.add(i.value);for(var u=0,l=o.length;u<l;u++)e.delete(o[u])},n.intersectionSize=function(e,t){var r;if(e.size>t.size&&(r=e,e=t,t=r),e.size===0)return 0;if(e===t)return e.size;for(var i=e.values(),o,u=0;o=i.next(),!o.done;)t.has(o.value)&&u++;return u},n.unionSize=function(e,t){var r=n.intersectionSize(e,t);return e.size+t.size-r},n.jaccard=function(e,t){var r=n.intersectionSize(e,t);if(r===0)return 0;var i=e.size+t.size-r;return r/i},n.overlap=function(e,t){var r=n.intersectionSize(e,t);return r===0?0:r/Math.min(e.size,t.size)}}(wi)),wi}var bi,Hs;function Gv(){if(Hs)return bi;Hs=1;var n=de(),e=Lc().intersectionSize;function t(i,o){if(!n(o))throw new Error("graphology-metrics/simmelian-strength: given graph is not a valid graphology instance.");var u={};if(o.forEachNode(function(h){u[h]=new Set(o.neighbors(h))}),!i){var l={};return o.forEachEdge(function(h,d,p,v){l[h]=e(u[p],u[v])}),l}o.updateEachEdgeAttributes(function(h,d,p,v){return d.simmelianStrength=e(u[p],u[v]),d},{attributes:["simmelianStrength"]})}var r=t.bind(null,!1);return r.assign=t.bind(null,!0),bi=r,bi}var Ys;function Ov(){return Ys||(Ys=1,Yn.disparity=Pc(),Yn.simmelianStrength=Gv()),Yn}var Rv=Ov(),xi,Ks;function $c(){if(Ks)return xi;Ks=1;var n=vr(),e=Ct();function t(r,i){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof i!="number"||i<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=r,this.capacity=i,this.items=new r(this.capacity),this.clear()}return t.prototype.clear=function(){this.start=0,this.size=0},t.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var i=this.start+this.size;return i>=this.capacity&&(i-=this.capacity),this.items[i]=r,++this.size},t.prototype.unshift=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var i=this.start-1;return this.start===0&&(i=this.capacity-1),this.items[i]=r,this.start=i,++this.size},t.prototype.pop=function(){if(this.size!==0){this.size--;var r=this.start+this.size;return r>=this.capacity&&(r-=this.capacity),this.items[r]}},t.prototype.shift=function(){if(this.size!==0){var r=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[r]}},t.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]},t.prototype.peekLast=function(){if(this.size!==0){var r=this.start+this.size-1;return r>=this.capacity&&(r-=this.capacity),this.items[r]}},t.prototype.get=function(r){if(!(this.size===0||r>=this.capacity))return r=this.start+r,r>=this.capacity&&(r-=this.capacity),this.items[r]},t.prototype.forEach=function(r,i){i=arguments.length>1?i:this;for(var o=this.capacity,u=this.size,l=this.start,h=0;h<u;)r.call(i,this.items[l],h,this),l++,h++,l===o&&(l=0)},t.prototype.toArray=function(){var r=this.start+this.size;if(r<this.capacity)return this.items.slice(this.start,r);for(var i=new this.ArrayClass(this.size),o=this.capacity,u=this.size,l=this.start,h=0;h<u;)i[h]=this.items[l],l++,h++,l===o&&(l=0);return i},t.prototype.values=function(){var r=this.items,i=this.capacity,o=this.size,u=this.start,l=0;return new e(function(){if(l>=o)return{done:!0};var h=r[u];return u++,l++,u===i&&(u=0),{value:h,done:!1}})},t.prototype.entries=function(){var r=this.items,i=this.capacity,o=this.size,u=this.start,l=0;return new e(function(){if(l>=o)return{done:!0};var h=r[u];return u++,u===i&&(u=0),{value:[l++,h],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(r,i,o){if(arguments.length<3&&(o=n.guessLength(r),typeof o!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var u=new t(i,o);if(n.isArrayLike(r)){var l,h;for(l=0,h=r.length;l<h;l++)u.items[l]=r[l];return u.size=h,u}return n.forEach(r,function(d){u.push(d)}),u},xi=t,xi}var Ei,Xs;function qv(){if(Xs)return Ei;Xs=1;var n=Ct(),e=Sn().getPointerArray;function t(r){var i=e(r);this.size=0,this.length=r,this.dense=new i(r),this.sparse=new i(r)}return t.prototype.clear=function(){this.size=0},t.prototype.has=function(r){var i=this.sparse[r];return i<this.size&&this.dense[i]===r},t.prototype.add=function(r){var i=this.sparse[r];return i<this.size&&this.dense[i]===r?this:(this.dense[this.size]=r,this.sparse[r]=this.size,this.size++,this)},t.prototype.delete=function(r){var i=this.sparse[r];return i>=this.size||this.dense[i]!==r?!1:(i=this.dense[this.size-1],this.dense[this.sparse[r]]=i,this.sparse[i]=this.sparse[r],this.size--,!0)},t.prototype.forEach=function(r,i){i=arguments.length>1?i:this;for(var o,u=0;u<this.size;u++)o=this.dense[u],r.call(i,o,o)},t.prototype.values=function(){var r=this.size,i=this.dense,o=0;return new n(function(){if(o<r){var u=i[o];return o++,{value:u}}return{done:!0}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.inspect=function(){for(var r=new Set,i=0;i<this.size;i++)r.add(this.dense[i]);return Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r.length=this.length,r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),Ei=t,Ei}var Kn={},Vs;function yr(){if(Vs)return Kn;Vs=1;var n=Sn(),e=_n().createEdgeWeightGetter;function t(o,u){return o==="outbound"||o==="inbound"?u.directedSize+u.undirectedSize*2:o==="in"||o==="out"||o==="directed"?u.directedSize:u.undirectedSize*2}function r(o,u){u=u||"outbound";var l=o[u+"Neighbors"].bind(o),h=t(u,o),d=n.getPointerArray(h),p=n.getPointerArray(o.order);this.graph=o,this.neighborhood=new p(h),this.starts=new d(o.order+1),this.nodes=o.nodes();var v={},y,w,S,E,N,k,A=0;for(y=0,w=o.order;y<w;y++)v[this.nodes[y]]=y;for(y=0,w=o.order;y<w;y++)for(N=this.nodes[y],k=l(N),this.starts[y]=A,S=0,E=k.length;S<E;S++)this.neighborhood[A++]=v[k[S]];this.starts[y]=h}r.prototype.bounds=function(o){return[this.starts[o],this.starts[o+1]]},r.prototype.project=function(){var o=this,u={};return o.nodes.forEach(function(l,h){u[l]=Array.from(o.neighborhood.slice(o.starts[h],o.starts[h+1])).map(function(d){return o.nodes[d]})}),u},r.prototype.collect=function(o){var u,l,h={};for(u=0,l=o.length;u<l;u++)h[this.nodes[u]]=o[u];return h},r.prototype.assign=function(o,u){var l=0;this.graph.updateEachNodeAttributes(function(h,d){return d[o]=u[l++],d},{attributes:[o]})},Kn.NeighborhoodIndex=r;function i(o,u,l){l=l||"outbound";var h=o[l+"Edges"].bind(o),d=t(l,o),p=n.getPointerArray(d),v=n.getPointerArray(o.order),y=e(u).fromMinimalEntry;this.graph=o,this.neighborhood=new v(d),this.weights=new Float64Array(d),this.outDegrees=new Float64Array(o.order),this.starts=new p(o.order+1),this.nodes=o.nodes();var w={},S,E,N,k,A,I,x,M,$,m=0;for(S=0,E=o.order;S<E;S++)w[this.nodes[S]]=S;for(S=0,E=o.order;S<E;S++)for(A=this.nodes[S],x=h(A),this.starts[S]=m,N=0,k=x.length;N<k;N++)M=x[N],I=o.opposite(A,M),$=y(M,o.getEdgeAttributes(M)),this.neighborhood[m]=w[I],this.weights[m++]=$,this.outDegrees[S]+=$;this.starts[S]=d}return i.prototype.bounds=r.prototype.bounds,i.prototype.project=r.prototype.project,i.prototype.collect=r.prototype.collect,i.prototype.assign=r.prototype.assign,Kn.WeightedNeighborhoodIndex=i,Kn}var _i,Qs;function Bv(){if(Qs)return _i;Qs=1;var n=de(),e=Qe(),t=$c(),r=qv(),i=yr().NeighborhoodIndex,o={nodeCentralityAttribute:"closenessCentrality",wassermanFaust:!1};function u(d){this.index=new i(d,"inbound"),this.queue=new t(Array,d.order),this.seen=new r(d.order)}u.prototype.fromNode=function(d){var p=this.index,v=this.queue,y=this.seen;y.clear(),v.clear(),y.add(d),v.push([d,0]);for(var w,S,E,N,k,A,I=0,x=0;v.size!==0;)for(w=v.shift(),S=w[0],E=w[1],E!==0&&(I+=E,x+=1),k=p.starts[S+1],N=p.starts[S];N<k;N++)A=p.neighborhood[N],!y.has(A)&&(y.add(A),v.push([A,E+1]));return[x,I]};function l(d,p,v){if(!n(p))throw new Error("graphology-metrics/centrality/closeness: the given graph is not a valid graphology instance.");v=e(v,o);var y=v.wassermanFaust,w=new u(p),S=p.order,E,N,k,A,I,x=new Float64Array(S);for(E=0;E<S;E++)N=w.fromNode(E),k=N[0],A=N[1],I=0,A>0&&S>1&&(I=k/A,y&&(I*=k/(S-1))),x[E]=I;return d?w.index.assign(v.nodeCentralityAttribute,x):w.index.collect(x)}var h=l.bind(null,!1);return h.assign=l.bind(null,!0),_i=h,_i}var jv=Bv();const Uv=$e(jv);var cn={},Zs;function Fv(){if(Zs)return cn;Zs=1;var n=de();function e(o,u,l,h){var d=u+"Centrality";if(!n(l))throw new Error("graphology-centrality/"+d+": the given graph is not a valid graphology instance.");if(u!=="degree"&&l.type==="undirected")throw new Error("graphology-centrality/"+d+": cannot compute "+u+" centrality on an undirected graph.");h=h||{};var p=h.nodeCentralityAttribute||d,v=l.order-1,y=l[u].bind(l);if(o){l.updateEachNodeAttributes(function(S,E){return E[p]=y(S)/v,E},{attributes:[p]});return}var w={};return l.forEachNode(function(S){w[S]=y(S)/v}),w}var t=e.bind(null,!1,"degree"),r=e.bind(null,!1,"inDegree"),i=e.bind(null,!1,"outDegree");return t.assign=e.bind(null,!0,"degree"),r.assign=e.bind(null,!0,"inDegree"),i.assign=e.bind(null,!0,"outDegree"),cn.degreeCentrality=t,cn.inDegreeCentrality=r,cn.outDegreeCentrality=i,cn}var Wv=Fv(),Xn={},Si,Js;function Hv(){if(Js)return Si;Js=1;var n=Ct(),e=vr();function t(r,i){if(arguments.length<2)throw new Error("mnemonist/fixed-stack: expecting an Array class and a capacity.");if(typeof i!="number"||i<=0)throw new Error("mnemonist/fixed-stack: `capacity` should be a positive number.");this.capacity=i,this.ArrayClass=r,this.items=new this.ArrayClass(this.capacity),this.clear()}return t.prototype.clear=function(){this.size=0},t.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-stack.push: stack capacity ("+this.capacity+") exceeded!");return this.items[this.size++]=r,this.size},t.prototype.pop=function(){if(this.size!==0)return this.items[--this.size]},t.prototype.peek=function(){return this.items[this.size-1]},t.prototype.forEach=function(r,i){i=arguments.length>1?i:this;for(var o=0,u=this.items.length;o<u;o++)r.call(i,this.items[u-o-1],o,this)},t.prototype.toArray=function(){for(var r=new this.ArrayClass(this.size),i=this.size-1,o=this.size;o--;)r[o]=this.items[i-o];return r},t.prototype.values=function(){var r=this.items,i=this.size,o=0;return new n(function(){if(o>=i)return{done:!0};var u=r[i-o-1];return o++,{value:u,done:!1}})},t.prototype.entries=function(){var r=this.items,i=this.size,o=0;return new n(function(){if(o>=i)return{done:!0};var u=r[i-o-1];return{value:[o++,u],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.toString=function(){return this.toArray().join(",")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(r,i,o){if(arguments.length<3&&(o=e.guessLength(r),typeof o!="number"))throw new Error("mnemonist/fixed-stack.from: could not guess iterable length. Please provide desired capacity as last argument.");var u=new t(i,o);if(e.isArrayLike(r)){var l,h;for(l=0,h=r.length;l<h;l++)u.items[l]=r[l];return u.size=h,u}return e.forEach(r,function(d){u.push(d)}),u},Si=t,Si}var eu;function Yv(){if(eu)return Xn;eu=1;var n=$c(),e=Hv(),t=Go(),r=Sn(),i=yr(),o=i.NeighborhoodIndex,u=i.WeightedNeighborhoodIndex;Xn.createUnweightedIndexedBrandes=function(d){var p=new o(d),v=p.neighborhood,y=p.starts,w=d.order,S=new e(r.getPointerArray(w),w),E=new Uint32Array(w),N=new Array(w),k=new Int32Array(w),A=new n(Uint32Array,w),I=function(x){var M,$,m,C,z,P,G;for(P=0;P<w;P++)N[P]=[],E[P]=0,k[P]=-1;for(E[x]=1,k[x]=0,A.push(x);A.size!==0;)for(P=A.shift(),S.push(P),M=k[P],$=E[P],m=y[P],C=y[P+1],z=m;z<C;z++)G=v[z],k[G]===-1&&(A.push(G),k[G]=M+1),k[G]===M+1&&(E[G]+=$,N[G].push(P));return[S,N,E]};return I.index=p,I};function l(h,d){return h[0]>d[0]?1:h[0]<d[0]?-1:h[1]>d[1]?1:h[1]<d[1]?-1:h[2]>d[2]?1:h[2]<d[2]?-1:h[3]>d[3]?1:h[3]<d[3]?-1:0}return Xn.createDijkstraIndexedBrandes=function(d,p){var v=new u(d,p||"weight"),y=v.neighborhood,w=v.weights,S=v.starts,E=d.order,N=new e(r.getPointerArray(E),E),k=new Uint32Array(E),A=new Array(E),I=new Float64Array(E),x=new Float64Array(E),M=new t(l),$=function(m){var C,z,P,G,q,j,H,U,X,ne=0;for(U=0;U<E;U++)A[U]=[],k[U]=0,I[U]=-1,x[U]=-1;for(k[m]=1,x[m]=0,M.push([0,ne++,m,m]);M.size!==0;)if(P=M.pop(),G=P[0],q=P[2],U=P[3],I[U]===-1)for(N.push(U),I[U]=G,k[U]+=k[q],C=S[U],z=S[U+1],H=C;H<z;H++)X=y[H],j=G+w[H],I[X]===-1&&(x[X]===-1||j<x[X])?(x[X]=j,M.push([j,ne++,U,X]),k[X]=0,A[X]=[U]):j===x[X]&&(k[X]+=k[U],A[X].push(U));return[N,A,k]};return $.index=v,$},Xn}var Ai,tu;function Kv(){if(tu)return Ai;tu=1;var n=de(),e=Yv(),t=Qe(),r=e.createUnweightedIndexedBrandes,i=e.createDijkstraIndexedBrandes,o={nodeCentralityAttribute:"betweennessCentrality",getEdgeWeight:"weight",normalized:!0};function u(h,d,p){if(!n(d))throw new Error("graphology-centrality/beetweenness-centrality: the given graph is not a valid graphology instance.");p=t(p,o);var v=p.nodeCentralityAttribute,y=p.normalized,w=p.getEdgeWeight?i(d,p.getEdgeWeight):r(d),S=d.order,E,N,k,A,I,x,M,$,m,C,z=new Float64Array(S),P=new Float64Array(S);for(x=0;x<S;x++){for(E=w(x),N=E[0],k=E[1],A=E[2],M=N.size;M--;)z[N.items[N.size-M]]=0;for(;N.size!==0;){for(C=N.pop(),I=(1+z[C])/A[C],M=0,$=k[C].length;M<$;M++)m=k[C][M],z[m]+=A[m]*I;C!==x&&(P[C]+=z[C])}}var G=null;if(y?G=S<=2?null:1/((S-1)*(S-2)):G=d.type==="undirected"?.5:null,G!==null)for(x=0;x<S;x++)P[x]*=G;return h?w.index.assign(v,P):w.index.collect(P)}var l=u.bind(null,!1);return l.assign=u.bind(null,!0),Ai=l,Ai}var Xv=Kv();const Vv=$e(Xv);var ki,nu;function Qv(){if(nu)return ki;nu=1;var n=de(),e=Qe(),t=yr().WeightedNeighborhoodIndex,r={nodeCentralityAttribute:"eigenvectorCentrality",getEdgeWeight:"weight",maxIterations:100,tolerance:1e-6};function i(l){for(var h=0,d=0,p=0,v=l.length;p<v;p++){var y=Math.abs(l[p]);y>h&&(d*=h/y*(h/y),h=y),d+=y===0&&h===0?0:y/h*(y/h)}return h===1/0?1:h*Math.sqrt(d)}function o(l,h,d){if(!n(h))throw new Error("graphology-metrics/centrality/eigenvector: the given graph is not a valid graphology instance.");d=e(d,r);var p=d.maxIterations,v=d.tolerance,y=h.order,w=new t(h,d.getEdgeWeight),S,E,N,k,A=new Float64Array(h.order);for(S=0;S<y;S++)A[S]=1/y;for(var I=0,x=0,M,$,m,C=!1;I<p;){for($=A,A=new Float64Array($),S=0;S<y;S++)for(N=w.starts[S+1],E=w.starts[S];E<N;E++)M=w.neighborhood[E],k=w.weights[E],A[M]+=$[S]*k;for(m=i(A),S=0;S<y;S++)A[S]/=m;for(x=0,S=0;S<y;S++)x+=Math.abs(A[S]-$[S]);if(x<y*v){C=!0;break}I++}if(!C)throw Error("graphology-metrics/centrality/eigenvector: failed to converge.");if(l){w.assign(d.nodeCentralityAttribute,A);return}return w.collect(A)}var u=o.bind(null,!1);return u.assign=o.bind(null,!0),ki=u,ki}var Zv=Qv();const Jv=$e(Zv);var Ot={},Ni,ru;function ey(){if(ru)return Ni;ru=1;var n=de();function e(r,i){if(r.length<1)throw new Error("graphology-metrics/layout-quality/connected-closeness.max: not enough values!");for(var o=void 0,u,l=1,h=r.length;l<h;l++)u=r[l],i!==void 0&&(u=i(u)),(o===void 0||u>o)&&(o=u);return o}function t(r,i){if(r.length<1)throw new Error("graphology-metrics/layout-quality/connected-closeness.min: not enough values!");for(var o=void 0,u,l=1,h=r.length;l<h;l++)u=r[l],i!==void 0&&(u=i(u)),(o===void 0||u<o)&&(o=u);return o}return Ni=function(i,o){if(!n(i))throw new Error("graphology-metrics/layout-quality/connected-closeness: given graph is not a valid graphology instance.");if(i.size<2)return{deltaMax:void 0,ePercentOfDeltaMax:void 0,pPercentOfDeltaMax:void 0,pEdgeOfDeltaMax:void 0,cMax:I.C};o=o||{},o.epsilon=o.epsilon||.03,o.gridSize=o.gridSize||10;var u=o.rng||Math.random,l=M(),h=i.edges().map(function(m){var C=i.getNodeAttributes(i.source(m)),z=i.getNodeAttributes(i.target(m)),P=Math.sqrt(Math.pow(C.x-z.x,2)+Math.pow(C.y-z.y,2));return P}),d=[0,Math.max(e(l),e(h)||0)],p=0,v={},y,w,S,E,N,k=-1;do{for(E=0;E<=o.gridSize;E++)y=d[0]+(d[1]-d[0])*E/o.gridSize,v[y]===void 0&&(v[y]=x(y,i,l,h));w=p,p=0,N=Object.values(v),N.forEach(function(m,C){S=m.C,S>p&&(p=S,k=C)}),d=[N[Math.max(0,k-1)].Delta,N[Math.min(N.length-1,k+1)].Delta]}while((p-w)/p>=o.epsilon/10);var A=$(N,o.epsilon),I=x(A,i,l,h);if(I.C<.1)return{deltaMax:void 0,ePercentOfDeltaMax:void 0,pPercentOfDeltaMax:void 0,pEdgeOfDeltaMax:void 0,cMax:I.C};return{deltaMax:A,ePercentOfDeltaMax:I.ePercent,pPercentOfDeltaMax:I.pPercent,pEdgeOfDeltaMax:I.pEdge,cMax:I.C};function x(m,C,z,P){var G=P.filter(function(le){return le<=m}),q=z.filter(function(le){return le<=m}),j=G.length,H=j/P.length,U=q.length,X=U/z.length,ne=H-X,he=C.undirected?1:2,ue=j/(he*U*(C.order*(C.order-1))/z.length);return{Delta:m,ePercent:H,pPercent:X,pEdge:ue,C:ne}}function M(){if(i.order<2)return[];var m=[],C,z,P,G,q,j=i.size;if(j<1)return[];for(var H=0;H<j;H++){C=i.nodes()[Math.floor(u()*i.order)];do z=i.nodes()[Math.floor(u()*i.order)];while(C===z);P=i.getNodeAttributes(C),G=i.getNodeAttributes(z),q=Math.sqrt(Math.pow(P.x-G.x,2)+Math.pow(P.y-G.y,2)),m.push(q)}return m}function $(m,C){var z=e(m,function(G){return G.C}),P=t(m.filter(function(G){return G.C>=(1-C)*z}),function(G){return G.Delta});return P}},Ni}var Mi,iu;function ty(){if(iu)return Mi;iu=1;var n=de();function e(t,r){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}return Mi=function(r){if(!n(r))throw new Error("graphology-metrics/layout-quality/edge-uniformity: given graph is not a valid graphology instance.");if(r.size===0)return 0;var i=0,o=0,u,l=new Float64Array(r.size);r.forEachEdge(function(v,y,w,S,E,N){var k=e(E,N);l[o++]=k,i+=k});var h=i/r.size,d=0;for(o=0,u=r.size;o<u;o++)d+=Math.pow(h-l[o],2);var p=d/(r.size*Math.pow(h,2));return Math.sqrt(p)},Mi}var Di,ou;function ny(){if(ou)return Di;ou=1;var n=$o(),e=Go(),t=n.DEFAULT_COMPARATOR,r=n.reverseComparator;function i(l,h,d,p){for(var v=d,y=p,w=h[p],S=2*p+1,E;S<v;)E=S+1,E<v&&l(h[S],h[E])>=0&&(S=E),h[p]=h[S],p=S,S=2*p+1;h[p]=w,e.siftDown(l,h,y,p)}function o(l,h,d,p){for(var v=p,y=v,w=new l(p),S,E;y>0;)S=d[--y],y!==0&&(E=d[0],d[0]=S,i(h,d,--p,0),S=E),w[y]=S;return w}function u(l,h,d){if(arguments.length===2&&(d=h,h=null),this.ArrayClass=l,this.capacity=d,this.items=new l(d),this.clear(),this.comparator=h||t,typeof d!="number"&&d<=0)throw new Error("mnemonist/FixedReverseHeap.constructor: capacity should be a number > 0.");if(typeof this.comparator!="function")throw new Error("mnemonist/FixedReverseHeap.constructor: given comparator should be a function.");this.comparator=r(this.comparator)}return u.prototype.clear=function(){this.size=0},u.prototype.push=function(l){return this.size<this.capacity?(this.items[this.size]=l,e.siftDown(this.comparator,this.items,0,this.size),this.size++):this.comparator(l,this.items[0])>0&&e.replace(this.comparator,this.items,l),this.size},u.prototype.peek=function(){return this.items[0]},u.prototype.consume=function(){var l=o(this.ArrayClass,this.comparator,this.items,this.size);return this.size=0,l},u.prototype.toArray=function(){return o(this.ArrayClass,this.comparator,this.items.slice(0,this.size),this.size)},u.prototype.inspect=function(){var l=this.toArray();return Object.defineProperty(l,"constructor",{value:u,enumerable:!1}),l},typeof Symbol<"u"&&(u.prototype[Symbol.for("nodejs.util.inspect.custom")]=u.prototype.inspect),Di=u,Di}var Vn={},au;function ry(){if(au)return Vn;au=1;var n=new Float64Array(64),e=new Float64Array(64);function t(i,o,u){var l,h,d,p,v;for(n[0]=o,e[0]=u,h=0;h>=0;)if(d=n[h],p=e[h]-1,d<p){for(l=i[d];d<p;){for(;i[p]>=l&&d<p;)p--;for(d<p&&(i[d++]=i[p]);i[d]<=l&&d<p;)d++;d<p&&(i[p--]=i[d])}i[d]=l,n[h+1]=d+1,e[h+1]=e[h],e[h++]=d,e[h]-n[h]>e[h-1]-n[h-1]&&(v=n[h],n[h]=n[h-1],n[h-1]=v,v=e[h],e[h]=e[h-1],e[h-1]=v)}else h--;return i}Vn.inplaceQuickSort=t;function r(i,o,u,l){var h,d,p,v,y,w;for(n[0]=u,e[0]=l,d=0;d>=0;)if(p=n[d],v=e[d]-1,p<v){for(y=o[p],h=i[y];p<v;){for(;i[o[v]]>=h&&p<v;)v--;for(p<v&&(o[p++]=o[v]);i[o[p]]<=h&&p<v;)p++;p<v&&(o[v--]=o[p])}o[p]=y,n[d+1]=p+1,e[d+1]=e[d],e[d++]=p,e[d]-n[d]>e[d-1]-n[d-1]&&(w=n[d],n[d]=n[d-1],n[d-1]=w,w=e[d],e[d]=e[d-1],e[d-1]=w)}else d--;return o}return Vn.inplaceQuickSortIndices=r,Vn}var Ci,su;function iy(){if(su)return Ci;su=1;var n=vr(),e=Sn(),t=$o().createTupleComparator,r=ny(),i=ry().inplaceQuickSortIndices;function o(v,y,w,S){var E,N=0,k;for(E=0;E<v;E++)k=y[E][w]-S[E],N+=k*k;return N}function u(v,y){var w=y.length,S=new Array(v),E=new Array(w),N,k=e.getPointerArray(w),A=new k(w),I,x,M,$=!0;for(I=0;I<v;I++){for(N=new Float64Array(w),x=0;x<w;x++)M=y[x],N[x]=M[1][I],$&&(E[x]=M[0],A[x]=x);$=!1,S[I]=N}return{axes:S,ids:A,labels:E}}function l(v,y,w,S){for(var E=S.length,N=e.getPointerArray(E+1),k=new N(E),A=new N(E),I=new N(E),x=[[0,0,w.length,-1,0]],M,$,m,C,z,P,G,q,j=0;x.length!==0;)M=x.pop(),q=M[0],P=M[1],G=M[2],$=M[3],m=M[4],i(y[q],w,P,G),E=G-P,C=P+(E>>>1),z=w[C],k[j]=z,$>-1&&(m===0?A[$]=j+1:I[$]=j+1),q=(q+1)%v,C!==P&&C!==G-1&&x.push([q,C+1,G,j,1]),C!==P&&x.push([q,P,C,j,0]),j++;return{axes:y,labels:S,pivots:k,lefts:A,rights:I}}function h(v,y){this.dimensions=v,this.visited=0,this.axes=y.axes,this.labels=y.labels,this.pivots=y.pivots,this.lefts=y.lefts,this.rights=y.rights,this.size=this.labels.length}h.prototype.nearestNeighbor=function(v){var y=1/0,w=null,S=this.dimensions,E=this.axes,N=this.pivots,k=this.lefts,A=this.rights,I=0;function x(M,$){I++;var m=k[$],C=A[$],z=N[$],P=o(S,E,z,v);if(!(P<y&&(w=z,y=P,P===0))){var G=E[M][z]-v[M];M=(M+1)%S,G>0?m!==0&&x(M,m-1):C!==0&&x(M,C-1),G*G<y&&(G>0?C!==0&&x(M,C-1):m!==0&&x(M,m-1))}}return x(0,0),this.visited=I,this.labels[w]};var d=t(3),p=t(2);return h.prototype.kNearestNeighbors=function(v,y){if(v<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");if(v=Math.min(v,this.size),v===1)return[this.nearestNeighbor(y)];var w=new r(Array,d,v),S=this.dimensions,E=this.axes,N=this.pivots,k=this.lefts,A=this.rights,I=0;function x(m,C){var z=k[C],P=A[C],G=N[C],q=o(S,E,G,y);w.push([q,I++,G]);var j=y[m],H=E[m][G],U=j-H;m=(m+1)%S,j<H?z!==0&&x(m,z-1):P!==0&&x(m,P-1),(U*U<w.peek()[0]||w.size<v)&&(j<H?P!==0&&x(m,P-1):z!==0&&x(m,z-1))}x(0,0),this.visited=I;for(var M=w.consume(),$=0;$<M.length;$++)M[$]=this.labels[M[$][2]];return M},h.prototype.linearKNearestNeighbors=function(v,y){if(v<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");v=Math.min(v,this.size);var w=new r(Array,p,v),S,E,N;for(S=0,E=this.size;S<E;S++)N=o(this.dimensions,this.axes,this.pivots[S],y),w.push([N,S]);var k=w.consume();for(S=0;S<k.length;S++)k[S]=this.labels[this.pivots[k[S][1]]];return k},h.prototype.inspect=function(){var v=new Map;v.dimensions=this.dimensions,Object.defineProperty(v,"constructor",{value:h,enumerable:!1});var y,w,S;for(y=0;y<this.size;y++){for(S=new Array(this.dimensions),w=0;w<this.dimensions;w++)S[w]=this.axes[w][y];v.set(this.labels[y],S)}return v},typeof Symbol<"u"&&(h.prototype[Symbol.for("nodejs.util.inspect.custom")]=h.prototype.inspect),h.from=function(v,y){var w=n.toArray(v),S=u(y,w),E=l(y,S.axes,S.ids,S.labels);return new h(y,E)},h.fromAxes=function(v,y){y||(y=e.indices(v[0].length));var w=v.length,S=l(v.length,v,e.indices(y.length),y);return new h(w,S)},Ci=h,Ci}var Ii,uu;function Gc(){if(uu)return Ii;uu=1;var n=de(),e=iy(),t=Lc().intersectionSize;return Ii=function(i){if(!n(i))throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: given graph is not a valid graphology instance.");if(i.order===0)throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: cannot compute stress for a null graph.");if(i.size===0)return 0;var o=[new Float64Array(i.order),new Float64Array(i.order)],u=0;i.forEachNode(function(d,p){o[0][u]=p.x,o[1][u++]=p.y});var l=e.fromAxes(o,i.nodes()),h=0;return i.forEachNode(function(d,p){var v=new Set(i.neighbors(d));if(v.size===0||v.size===i.order-1){h+=1;return}var y=l.kNearestNeighbors(v.size+1,[p.x,p.y]);y=new Set(y.slice(1));var w=t(v,y);h+=w/y.size}),h/i.order},Ii}var zi,cu;function Oc(){if(cu)return zi;cu=1;var n=de(),e=Lo().undirectedSingleSourceLength;function t(r,i){return Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2))}return zi=function(i){if(!n(i))throw new Error("graphology-metrics/layout-quality/stress: given graph is not a valid graphology instance.");if(i.order===0)throw new Error("graphology-metrics/layout-quality/stress: cannot compute stress for a null graph.");var o=new Array(i.order),u=new Array(i.order),l=0,h=i.order*4;i.forEachNode(function(A,I){o[l]=A,u[l++]=I});var d,p,v,y,w,S,E,N,k=0;for(l=0,p=i.order;l<p;l++)for(w=e(i,o[l]),v=u[l],d=l+1;d<p;d++)y=u[d],S=w[o[d]],typeof S>"u"&&(S=h),N=t(v,y),E=1/(S*S),k+=E*Math.pow(N-S,2);return k},zi}var lu;function oy(){return lu||(lu=1,Ot.connectedCloseness=ey(),Ot.edgeUniformity=ty(),Ot.neighborhoodPreservation=Gc(),Ot.stress=Oc()),Ot}var ay=oy(),sy=Oc();const uy=$e(sy);var cy=Tc();const ly=$e(cy);var Ti,du;function dy(){if(du)return Ti;du=1;var n=de(),e=Qe(),t=yr().WeightedNeighborhoodIndex,r={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function i(u,l,h){if(!n(l))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");h=e(h,r);var d=h.alpha,p=h.maxIterations,v=h.tolerance,y=h.nodePagerankAttribute,w=l.order,S=1/w,E=new t(l,h.getEdgeWeight),N,k,A,I,x=new Float64Array(l.order),M=new Float64Array(E.weights.length),$=[];for(N=0;N<w;N++)for(x[N]=S,A=E.starts[N+1],I=E.outDegrees[N],I===0&&$.push(N),k=E.starts[N];k<A;k++)M[k]=E.weights[k]/I;for(var m=0,C=0,z,P,G,q=!1;m<p;){for(G=x,x=new Float64Array(l.order),z=0,N=0,A=$.length;N<A;N++)z+=G[$[N]];for(z*=d,N=0;N<w;N++){for(A=E.starts[N+1],k=E.starts[N];k<A;k++)P=E.neighborhood[k],x[P]+=d*G[N]*M[k];x[N]+=z*S+(1-d)*S}for(C=0,N=0;N<w;N++)C+=Math.abs(x[N]-G[N]);if(C<w*v){q=!0;break}m++}if(!q)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(u){E.assign(y,x);return}return E.collect(x)}var o=i.bind(null,!1);return o.assign=i.bind(null,!0),Ti=o,Ti}var hy=dy();const fy=$e(hy);var py=Gc();const gy=$e(py);var vy=Pc();const yy=$e(vy),Qn=document;class Rc{constructor(e){this.graphManager=e,this.pannel=Qn.querySelector("#floating-panel .body-info")}addHeader(e){const t=Qn.createElement("h4");t.textContent=e,this.pannel.appendChild(t),console.log(e)}addInfo(e){const t=Qn.createElement("div");t.insertAdjacentHTML("beforeend",e),this.pannel.appendChild(t),console.log(e)}addLine(){const e=Qn.createElement("hr");this.pannel.appendChild(e),this.pannel.scrollTop=this.pannel.scrollHeight}getComponent(e){const t=this.graphManager.graph,r=ii.connectedComponents(t);for(let i of r)if(i.includes(String(e)))return i;return null}basicInfo(){const e=this.graphManager.graph;this.addHeader("Basic Informattion"),this.addInfo(`|V|: ${e.order}`),this.addInfo(`|E|: ${e.size}`),this.addInfo(`Type: ${e.type}`),this.addLine()}degreeSequesnce(){this.addHeader("Degree Sequence");const e=this.graphManager.graph,r=`(${e.mapNodes((i,o)=>e.degree(i)).join(", ")})`;this.addInfo(r),this.addLine()}countComponents(){const e=this.graphManager.graph;this.addHeader("Connected Components");const t=ii.countConnectedComponents(e);this.addInfo(`Count: ${t}`),ii.forEachConnectedComponent(e,r=>{this.addInfo(r.map(i=>e.getNodeAttribute(i,"label")).join(", "))}),this.addLine()}neighbors(){const e=this.graphManager.graph;this.addHeader("Neighbors");const t=this.graphManager.graph.getSelectedNodes();if(t.length!==1){this.addInfo("Select one node"),this.addLine();return}const[r]=t,i=e.neighbors(r);this.addInfo(i.map(o=>e.getNodeAttribute(o,"label")).join(", ")),this.addLine()}shortestPath(){this.addHeader("Shortest Path");const e=this.graphManager.graph,t=this.graphManager.graph.getSelectedNodes();if(t.length!==2){this.addInfo("Select two nodes"),this.addLine();return}const[r,i]=t,o=Iv.bidirectional(e,r,i);o?(this.addInfo(o.map(u=>e.getNodeAttribute(u,"label")).join(" -> ")),this.addLine(),e.selectPath(o),this.graphManager.app.drawGraph()):(this.addInfo("They are not connected"),this.addLine())}density(){this.addHeader("Density");const e=this.graphManager.graph,t=Us.density(e);this.addInfo(t),this.addLine()}diameter(){this.addHeader("Diameter");const e=this.graphManager.graph,t=Us.diameter(e);this.addInfo(t),this.addLine()}eccentricity(){this.addHeader("Eccentricity");const e=this.graphManager.graph,t=this.graphManager.graph.getSelectedNodes();if(t.length!==1){this.addInfo("Select one node"),this.addLine();return}const[r]=t,i=ly(e,r);this.addInfo(i),this.addLine()}simmelianStrength(){this.addHeader("Simmelian strength");const e=this.graphManager.graph,t=Rv.simmelianStrength(e);for(const r in t){const[i,o]=e.getEdgeSourcetarget(r);this.addInfo(`${e.getNodeAttribute(i,"label")}, ${e.getNodeAttribute(o,"label")} : ${t[r]}`)}this.addLine()}betweennessCentrality(){this.addHeader("Betweenness centrality");const e=this.graphManager.graph,t=Vv(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}closenessCentrality(){this.addHeader("Closeness centrality");const e=this.graphManager.graph,t=Uv(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}degreeCentrality(){this.addHeader("Degree centrality");const e=this.graphManager.graph,t=Wv.degreeCentrality(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}eigenvectorCentrality(){this.addHeader("Eigenvector centrality");const e=this.graphManager.graph,t=Jv(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}pagerank(){this.addHeader("Pagerank");const e=this.graphManager.graph,t=fy(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}edgeUniformity(){this.addHeader("Edge Uniformity");const e=this.graphManager.graph,t=ay.edgeUniformity(e);this.addInfo(t),this.addLine()}neighborhoodPreservation(){this.addHeader("Neighborhood preservation");const e=this.graphManager.graph,t=gy(e);this.addInfo(t),this.addLine()}stress(){this.addHeader("Stress");const e=this.graphManager.graph,t=uy(e);this.addInfo(t),this.addLine()}disparity(){this.addHeader("disparity");const e=this.graphManager.graph,t=yy(e);for(const r in t){const[i,o]=e.getEdgeSourcetarget(r);this.addInfo(`${e.getNodeAttribute(i,"label")}, ${e.getNodeAttribute(o,"label")} : ${t[r]}`)}this.addLine()}}var Zn={},Pi,hu;function my(){if(hu)return Pi;hu=1;var n=Ue(),e=zo();return Pi=function(r,i,o){if(!n(r))throw new Error("graphology-generators/community/caveman: invalid Graph constructor.");var u=i*o,l=e(r,u);if(o<2)return l;var h,d,p;for(h=0;h<u;h+=o)for(d=h;d<h+o;d++)for(p=d+1;p<h+o;p++)l.addEdge(d,p);return l},Pi}var Li,fu;function wy(){if(fu)return Li;fu=1;var n=Ue(),e=zo();return Li=function(r,i,o){if(!n(r))throw new Error("graphology-generators/community/connected-caveman: invalid Graph constructor.");var u=i*o,l=e(r,u);if(o<2)return l;var h,d,p;for(h=0;h<u;h+=o){for(d=h;d<h+o;d++)for(p=d+1;p<h+o;p++)(d!==h||d!==p-1)&&l.addEdge(d,p);h>0&&l.addEdge(h,(h-1)%u)}return l.addEdge(0,u-1),l},Li}var pu;function by(){return pu||(pu=1,Zn.caveman=my(),Zn.connectedCaveman=wy()),Zn}var gu=by(),ln={},$i,vu;function xy(){if(vu)return $i;vu=1;var n=Ue();return $i=function(e,t){if(!n(e))throw new Error("graphology-generators/random/clusters: invalid Graph constructor.");t=t||{};var r="clusterDensity"in t?t.clusterDensity:.5,i=t.rng||Math.random,o=t.order,u=t.size,l=t.clusters;if(typeof r!="number"||r>1||r<0)throw new Error("graphology-generators/random/clusters: `clusterDensity` option should be a number between 0 and 1.");if(typeof i!="function")throw new Error("graphology-generators/random/clusters: `rng` option should be a function.");if(typeof o!="number"||o<=0)throw new Error("graphology-generators/random/clusters: `order` option should be a positive number.");if(typeof u!="number"||u<=0)throw new Error("graphology-generators/random/clusters: `size` option should be a positive number.");if(typeof l!="number"||l<=0)throw new Error("graphology-generators/random/clusters: `clusters` option should be a positive number.");var h=new e;if(!o)return h;var d=new Array(l),p,v,y;for(y=0;y<l;y++)d[y]=[];for(y=0;y<o;y++)p=i()*l|0,h.addNode(y,{cluster:p}),d[p].push(y);if(!u)return h;var w,S,E;for(y=0;y<u;y++){if(i()<1-r){w=i()*o|0;do S=i()*o|0;while(w===S)}else{if(p=i()*l|0,v=d[p],E=v.length,!E||E<2)continue;w=v[i()*E|0];do S=v[i()*E|0];while(w===S)}h.multi?h.addEdge(w,S):h.mergeEdge(w,S)}return h},$i}var Gi,yu;function Ey(){if(yu)return Gi;yu=1;var n=Ue(),e=zc().abstractDensity;function t(i,o){if(!n(i))throw new Error("graphology-generators/random/erdos-renyi: invalid Graph constructor.");var u=o.order,l=o.probability,h=o.rng||Math.random,d=new i;if(typeof o.approximateSize=="number"&&(l=e(d.type,!1,u,o.approximateSize)),typeof u!="number"||u<=0)throw new Error("graphology-generators/random/erdos-renyi: invalid `order`. Should be a positive number.");if(typeof l!="number"||l<0||l>1)throw new Error("graphology-generators/random/erdos-renyi: invalid `probability`. Should be a number between 0 and 1. Or maybe you gave an `approximateSize` exceeding the graph's density.");if(typeof h!="function")throw new Error("graphology-generators/random/erdos-renyi: invalid `rng`. Should be a function.");var p,v;for(p=0;p<u;p++)d.addNode(p);if(l<=0)return d;for(p=0;p<u;p++)for(v=p+1;v<u;v++)d.type!=="directed"&&h()<l&&d.addUndirectedEdge(p,v),d.type!=="undirected"&&(h()<l&&d.addDirectedEdge(p,v),h()<l&&d.addDirectedEdge(v,p));return d}function r(i,o){if(!n(i))throw new Error("graphology-generators/random/erdos-renyi: invalid Graph constructor.");var u=o.order,l=o.probability,h=o.rng||Math.random,d=new i;if(typeof o.approximateSize=="number"&&(l=e(d.type,!1,u,o.approximateSize)),typeof u!="number"||u<=0)throw new Error("graphology-generators/random/erdos-renyi: invalid `order`. Should be a positive number.");if(typeof l!="number"||l<0||l>1)throw new Error("graphology-generators/random/erdos-renyi: invalid `probability`. Should be a number between 0 and 1. Or maybe you gave an `approximateSize` exceeding the graph's density.");if(typeof h!="function")throw new Error("graphology-generators/random/erdos-renyi: invalid `rng`. Should be a function.");for(var p=0;p<u;p++)d.addNode(p);if(l<=0)return d;var v=-1,y=Math.log(1-l),w,S;if(d.type!=="undirected")for(S=0;S<u;){for(w=Math.log(1-h()),v+=1+(w/y|0),S===v&&v++;S<u&&u<=v;)v-=u,S++,S===v&&v++;S<u&&d.addDirectedEdge(S,v)}if(v=-1,d.type!=="directed")for(S=1;S<u;){for(w=Math.log(1-h()),v+=1+(w/y|0);v>=S&&S<u;)v-=S,S++;S<u&&d.addUndirectedEdge(S,v)}return d}return t.sparse=r,Gi=t,Gi}var Oi,mu;function _y(){if(mu)return Oi;mu=1;var n=Ue();return Oi=function(t,r){if(!n(t))throw new Error("graphology-generators/random/girvan-newman: invalid Graph constructor.");var i=r.zOut,o=r.rng||Math.random;if(typeof i!="number")throw new Error("graphology-generators/random/girvan-newman: invalid `zOut`. Should be a number.");if(typeof o!="function")throw new Error("graphology-generators/random/girvan-newman: invalid `rng`. Should be a function.");var u=i/96,l=(16-u*96)/31,h=new t,d,p,v;for(p=0;p<128;p++)h.addNode(p);for(p=0;p<128;p++)for(v=p+1;v<128;v++)d=o(),p%4===v%4?d<l&&h.addEdge(p,v):d<u&&h.addEdge(p,v);return h},Oi}var wu;function Sy(){return wu||(wu=1,ln.clusters=xy(),ln.erdosRenyi=Ey(),ln.girvanNewman=_y()),ln}var Ri=Sy(),Ye={},qi,bu;function Ay(){return bu||(bu=1,qi=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!n(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[i]))return!1;for(i=r;i--!==0;){var u=o[i];if(!n(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}),qi}var xu;function ky(){if(xu)return Ye;xu=1;var n=Ay(),e=Symbol("size");function t(p,v){var y=p.length,w=v.length;if(y!==w)return!1;var S,E,N,k,A=new Set;e:for(N=0;N<y;N++){for(S=p[N],k=0;k<w;k++)if(!A.has(k)&&(E=v[k],n(S,E))){A.add(k);continue e}return!1}return!0}function r(p,v){if(p[e]!==v[e])return!1;for(var y in p)if(!t(p[y],v[y]))return!1;return!0}function i(p,v){var y={},w;return p.forEachOutEdge(v,function(S,E,N,k){w=y[k]||0,w++,y[k]=w}),y}function o(p,v){var y={},w;return p.forEachUndirectedEdge(v,function(S,E,N,k){k=v===N?k:N,!(v>k)&&(w=y[k]||0,w++,y[k]=w)}),y}function u(p,v){var y={};y[e]=0;var w;return p.forEachOutEdge(v,function(S,E,N,k){w=y[k],w||(w=[],y[e]+=1,y[k]=w),w.push(E)}),y}function l(p,v){var y={};y[e]=0;var w;return p.forEachUndirectedEdge(v,function(S,E,N,k){k=v===N?k:N,!(v>k)&&(w=y[k],w||(w=[],y[e]+=1,y[k]=w),w.push(E))}),y}function h(p,v,y){return v===y?!0:v.order!==y.order?!1:v.everyNode(function(w,S){return y.hasNode(w)?p?n(S,y.getNodeAttributes(w)):!0:!1})}function d(p,v,y,w){if(y===w)return!0;if(v){if(y.type==="directed"&&w.type==="undirected"||y.type==="undirected"&&w.type==="directed")return!1}else if(y.type!==w.type||y.allowSelfLoops!==w.allowSelfLoops||y.multi!==w.multi)return!1;if(y.directedSize!==w.directedSize||y.undirectedSize!==w.undirectedSize||!h(p,y,w))return!1;var S=!1,E=!1;if(!y.multi&&!w.multi){if(S=y.everyDirectedEdge(function(A,I,x,M){return w.hasDirectedEdge(x,M)?p?n(y.getDirectedEdgeAttributes(x,M),w.getDirectedEdgeAttributes(x,M)):!0:!1}),!S||(E=y.everyUndirectedEdge(function(A,I,x,M){return w.hasUndirectedEdge(x,M)?p?n(y.getUndirectedEdgeAttributes(x,M),w.getUndirectedEdgeAttributes(x,M)):!0:!1}),!E))return!1}else{var N=p?u:i,k=p?r:n;if(S=y.everyNode(function(A){var I=N(y,A),x=N(w,A);return k(I,x)}),!S||(N=p?l:o,E=y.everyNode(function(A){var I=N(y,A),x=N(w,A);return k(I,x)}),!E))return!1}return!0}return Ye.isGraph=de(),Ye.isGraphConstructor=Ue(),Ye.haveSameNodes=h.bind(null,!1),Ye.haveSameNodesDeep=h.bind(null,!0),Ye.areSameGraphs=d.bind(null,!1,!1),Ye.areSameGraphsDeep=d.bind(null,!0,!1),Ye.haveSameEdges=d.bind(null,!1,!0),Ye.haveSameEdgesDeep=d.bind(null,!0,!0),Ye}var Bi,Eu;function Ny(){return Eu||(Eu=1,Bi=ky()),Bi}var Ro=Ny(),ze={},ji,_u;function My(){if(_u)return ji;_u=1;var n=de();return ji=function(t){if(!n(t))throw new Error("graphology-utils/infer-multi: expecting a valid graphology instance.");if(!t.multi||t.order===0||t.size<2)return!1;var r=!1,i,o,u,l;return t.forEachAssymetricAdjacencyEntry(function(h,d,p,v,y,w,S){if(!r){if(S&&h>d&&(l=d,d=h,h=l),h===i&&d===o&&S===u){r=!0;return}i=h,o=d,u=S}}),r},ji}var Ui,Su;function Dy(){return Su||(Su=1,Ui=function(e,t){if(t.length!==0){var r,i,o,u,l;for(o=0,l=t.length;o<l;o++)for(r=t[o],u=o+1;u<l;u++)i=t[u],e.mergeEdge(r,i)}}),Ui}var Fi,Au;function Cy(){return Au||(Au=1,Fi=function(e,t){if(t.length!==0){var r,i,o,u;if(e.mergeNode(t[0]),t.length!==1){for(o=1,u=t.length;o<u;o++)r=t[o-1],i=t[o],e.mergeEdge(r,i);e.mergeEdge(i,t[0])}}}),Fi}var Wi,ku;function Iy(){return ku||(ku=1,Wi=function(e,t){if(t.length!==0){var r,i,o,u;for(e.mergeNode(t[0]),o=1,u=t.length;o<u;o++)r=t[o-1],i=t[o],e.mergeEdge(r,i)}}),Wi}var Hi,Nu;function zy(){return Nu||(Nu=1,Hi=function(e,t){if(t.length!==0){var r,i,o,u=t[0];for(e.mergeNode(u),i=1,o=t.length;i<o;i++)r=t[i],e.mergeEdge(u,r)}}),Hi}var Yi,Mu;function Ty(){if(Mu)return Yi;Mu=1;var n=To().copyEdge;return Yi=function(t,r,i){typeof r>"u"&&(r={}),typeof i>"u"&&(i={});var o=t.nullCopy();t.forEachNode(function(h,d){var p=r[h];typeof p>"u"&&(p=h),o.addNode(p,d)});var u,l;return t.forEachAssymetricAdjacencyEntry(function(h,d,p,v,y,w,S){h!==u&&(u=h,l=r[h],typeof l>"u"&&(l=h));var E=r[d];typeof E>"u"&&(E=d);var N=i[y];typeof N>"u"&&(N=y),n(o,S,N,l,E,w)}),o},Yi}var Ki,Du;function Py(){if(Du)return Ki;Du=1;var n=To().copyEdge;return Ki=function(t,r,i){var o=t.nullCopy();t.forEachNode(function(h,d){var p=r?r(h,d):h;o.addNode(p,d)});var u,l;return t.forEachAssymetricAdjacencyEntry(function(h,d,p,v,y,w,S){h!==u&&(u=h,l=r?r(h,p):h);var E=r?r(d,v):d,N=i?i(y,w,h,d,p,v,S):y;n(o,S,N,l,E,w)}),o},Ki}var Cu;function Ly(){return Cu||(Cu=1,ze.inferMulti=My(),ze.inferType=Oo(),ze.isGraph=de(),ze.isGraphConstructor=Ue(),ze.mergeClique=Dy(),ze.mergeCycle=Cy(),ze.mergePath=Iy(),ze.mergeStar=zy(),ze.renameGraphKeys=Ty(),ze.updateGraphKeys=Py()),ze}var Xi,Iu;function $y(){return Iu||(Iu=1,Xi=Ly()),Xi}var Gy=$y(),zu=[[0,1,2,3,4],[1,0,5,6],[2,0,3,4],[3,0,1,2,5,4,6],[5,1,3,6],[4,0,2,3,6,7],[6,1,3,5,4,7],[7,4,6,8],[8,7,9],[9,8]];function Oy(n){if(!Ro.isGraphConstructor(n))throw new Error("invalid Graph constructor.");var e=new n,t,r;for(t=0,r=zu.length;t<r;t++)Gy.mergeStar(e,zu[t]);return e}var Vi=[[0,1],[2,3],[2,4],[2,5],[1,5],[1,6],[1,7],[1,8],[1,9],[9,10],[3,4],[3,11],[4,6],[4,11],[6,7],[7,12],[8,13],[8,12],[11,12],[12,14]];function Ry(n){if(!Ro.isGraphConstructor(n))throw new Error("graphology-generators/social/florentine-families: invalid Graph constructor.");var e=new n,t,r;for(t=0,r=Vi.length;t<r;t++)e.mergeEdge(Vi[t][0],Vi[t][1]);return e}var Tu=["0111111110111100010101000000000100","1011000100000100010101000000001000","1101000111000100000000000001100010","1110000100001100000000000000000000","1000001000100000000000000000000000","1000001000100000100000000000000000","1000110000000000100000000000000000","1111000000000000000000000000000000","1010000000000000000000000000001011","0010000000000000000000000000000001","1000110000000000000000000000000000","1000000000000000000000000000000000","1001000000000000000000000000000000","1111000000000000000000000000000001","0000000000000000000000000000000011","0000000000000000000000000000000011","0000011000000000000000000000000000","1100000000000000000000000000000000","0000000000000000000000000000000011","1100000000000000000000000000000001","0000000000000000000000000000000011","1100000000000000000000000000000000","0000000000000000000000000000000011","0000000000000000000000000101010011","0000000000000000000000000101000100","0000000000000000000000011000000100","0000000000000000000000000000010001","0010000000000000000000011000000001","0010000000000000000000000000000101","0000000000000000000000010010000011","0100000010000000000000000000000011","1000000000000000000000001100100011","0010000010000011001010110000011101","0000000011000111001110110011111110"],qy=new Set([0,1,2,3,4,5,6,7,8,10,11,12,13,16,17,19,21]);function By(n){if(!Ro.isGraphConstructor(n))throw new Error("graphology-generators/social/karate: invalid Graph constructor.");for(var e=new n,t,r=0;r<34;r++)t=qy.has(r)?"Mr. Hi":"Officer",e.addNode(r,{club:t});var i,o,u,l,h,d;for(u=0,h=Tu.length;u<h;u++)for(i=Tu[u].split(""),l=u+1,d=i.length;l<d;l++)o=+i[l],o&&e.addEdgeWithKey(u+"->"+l,u,l);return e}const jy={stars:[{id:0,label:"Hamal",ra:"02 08 34.7",dec:"23 34 50.5",magnitude:2.17},{id:1,label:"Sheratan",ra:"01 56 01.0",dec:"20 55 48.5",magnitude:2.7},{id:2,label:"Gamma",ra:"01 54 53.8",dec:"19 24 58.7",magnitude:3.84},{id:3,label:"41 Arietis",ra:"02 51 27.2",dec:"27 21 50.6",magnitude:3.58}],edges:[[0,1],[1,2],[0,3]]},Uy={stars:[{id:0,label:"Aldebaran",ra:"04 37 21.6",dec:"16 33 34.5",magnitude:1},{id:1,label:"Elnath",ra:"05 26 17.5",dec:"28 36 27.0",magnitude:1.65},{id:2,label:"Zeta",ra:"05 37 38.7",dec:"21 08 33.0",magnitude:2.97},{id:3,label:"Theta2",ra:"04 30 05.6",dec:"15 55 34.7",magnitude:3.45},{id:4,label:"Lambda",ra:"04 02 04.1",dec:"12 33 38.8",magnitude:3.38},{id:5,label:"Omicron",ra:"03 26 09.5",dec:"09 06 59.4",magnitude:3.77},{id:6,label:"Gamma",ra:"04 21 13.2",dec:"15 41 16.8",magnitude:3.8},{id:7,label:"Delta",ra:"04 24 22.8",dec:"17 36 04.5",magnitude:3.92},{id:8,label:"Delta3",ra:"04 26 56.4",dec:"17 59 06.4",magnitude:4.31},{id:9,label:"Ain",ra:"04 30 04.9",dec:"19 14 09.9",magnitude:3.69},{id:10,label:"Tau",ra:"04 43 45.1",dec:"23 00 19.2",magnitude:4.22},{id:11,label:"Atlas",ra:"03 50 39.0",dec:"24 07 49.6",magnitude:4.22}],edges:[[0,3],[0,2],[6,4],[4,5],[3,6],[6,7],[8,7],[8,9],[9,0],[9,10],[1,10],[11,7]]},Fy={stars:[{id:0,label:"Castor",ra:"07 36 12.8",dec:"31 50 01.2",magnitude:1.58},{id:1,label:"Pollux",ra:"07 46 52.0",dec:"27 57 57.2",magnitude:1.29},{id:2,label:"Kappa",ra:"07 45 58.6",dec:"24 20 15.9",magnitude:3.72},{id:3,label:"Upsilon",ra:"07 37 29.0",dec:"26 50 24.6",magnitude:4.16},{id:4,label:"Iota",ra:"07 27 17.9",dec:"27 44 54.9",magnitude:3.94},{id:5,label:"Tau",ra:"07 12 44.9",dec:"30 12 16.7",magnitude:4.53},{id:6,label:"Theta",ra:"06 54 27.2",dec:"33 55 55.1",magnitude:3.63},{id:7,label:"Wasat",ra:"07 21 38.1",dec:"21 56 09.7",magnitude:3.59},{id:8,label:"Mekbuda",ra:"07 05 36.5",dec:"20 32 00.0",magnitude:4.16},{id:9,label:"Alhena",ra:"06 39 10.1",dec:"16 22 38.5",magnitude:1.92},{id:10,label:"Lambda",ra:"07 19 32.8",dec:"16 29 40.3",magnitude:3.61},{id:11,label:"Xi",ra:"06 46 42.4",dec:"12 52 04.2",magnitude:3.44},{id:12,label:"Mebsuta",ra:"06 45 29.1",dec:"25 06 23.7",magnitude:3.19},{id:13,label:"Nu",ra:"06 30 27.6",dec:"20 11 46.3",magnitude:4.09},{id:14,label:"Tejat",ra:"06 24 29.2",dec:"22 30 03.1",magnitude:2.91},{id:15,label:"Propus",ra:"06 16 24.0",dec:"22 29 58.9",magnitude:3.28},{id:16,label:"1",ra:"06 05 39.1",dec:"23 15 43.8",magnitude:4.31}],edges:[[0,5],[1,3],[3,2],[3,4],[4,5],[5,6],[3,7],[7,8],[7,10],[8,9],[10,11],[5,12],[12,13],[12,14],[14,15],[15,16]]},Wy={stars:[{id:0,label:"Acubens",ra:"08 59 52.7",dec:"11 45 32.4",magnitude:4.28},{id:1,label:"Beta",ra:"08 17 53.5",dec:"09 06 24.1",magnitude:3.66},{id:2,label:"Asellus Australis",ra:"08 46 07.7",dec:"18 03 39.9",magnitude:4.09},{id:3,label:"Asellus Borealis",ra:"08 44 45.4",dec:"21 22 39.2",magnitude:4.66},{id:4,label:"Chi",ra:"08 21 36.4",dec:"27 08 10.9",magnitude:5.22},{id:5,label:"Iota",ra:"08 48 14.1",dec:"28 40 04.4",magnitude:4.19}],edges:[[0,2],[1,2],[2,3],[3,4],[3,5]]},Hy={stars:[{id:0,label:"Regulus",ra:"10 09 44.0",dec:"11 50 33.1",magnitude:1.32},{id:1,label:"Algieba",ra:"10 21 22.9",dec:"19 42 46.3",magnitude:2.16},{id:2,label:"Zosma",ra:"11 15 28.3",dec:"20 23 02.6",magnitude:2.58},{id:3,label:"Adhafera",ra:"10 18 06.7",dec:"23 17 27.1",magnitude:3.5},{id:4,label:"Denebola",ra:"11 50 22.2",dec:"14 25 44.7",magnitude:2.16},{id:5,label:"Chertan",ra:"11 15 35.1",dec:"15 17 24.1",magnitude:3.33},{id:6,label:"Eta",ra:"10 08 43.5",dec:"16 38 18.8",magnitude:3.5},{id:7,label:"Rasalas",ra:"09 54 12.9",dec:"25 53 16.1",magnitude:4.03},{id:8,label:"Epsilon",ra:"09 47 18.0",dec:"23 39 27.6",magnitude:3.11}],edges:[[1,3],[2,5],[5,4],[1,6],[2,1],[6,0],[0,5],[3,7],[7,8],[2,4]]},Yy={stars:[{id:0,label:"Nu",ra:"11 47 10.7",dec:"06 23 09.0",magnitude:4.13},{id:1,label:"Zaniah",ra:"12 21 13.2",dec:"-00 48 34.3",magnitude:3.89},{id:2,label:"Porrima",ra:"12 42 57.7",dec:"-01 35 23.7",magnitude:2.81},{id:3,label:"Spica",ra:"13 26 32.8",dec:"-11 17 43.6",magnitude:.89},{id:4,label:"Kappa",ra:"14 14 15.9",dec:"-10 23 36.5",magnitude:4.31},{id:5,label:"Syrma",ra:"14 17 21.6",dec:"-06 07 24.0",magnitude:4.16},{id:6,label:"Mu",ra:"14 44 24.8",dec:"-05 46 13.4",magnitude:3.95},{id:7,label:"109",ra:"14 47 32.8",dec:"01 47 01.4",magnitude:3.73},{id:8,label:"Tau",ra:"14 02 57.3",dec:"01 25 10.9",magnitude:4.25},{id:9,label:"Heze",ra:"13 36 00.2",dec:"-00 43 38.6",magnitude:3.41},{id:10,label:"Delta",ra:"12 56 53.9",dec:"03 15 28.1",magnitude:3.44},{id:11,label:"Vindemiatrix",ra:"13 03 27.4",dec:"10 49 15.5",magnitude:2.98}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[7,8],[8,9],[9,10],[10,11],[2,10],[3,9]]},Ky={stars:[{id:0,label:"Zubenelgenubi II",ra:"14 52 17.9",dec:"-16 08 54.7",magnitude:2.78},{id:1,label:"Sigma",ra:"15 05 34.3",dec:"-25 22 56.3",magnitude:3.3},{id:2,label:"Zubeneschamali",ra:"15 18 23.1",dec:"-09 28 41.6",magnitude:2.56},{id:3,label:"Gamma",ra:"15 36 57.5",dec:"-14 52 31.6",magnitude:4.06},{id:4,label:"Theta",ra:"15 55 16.9",dec:"-16 48 17.5",magnitude:4.28},{id:5,label:"Upsilon",ra:"15 38 34.7",dec:"-28 13 09.8",magnitude:3.73}],edges:[[0,1],[0,2],[2,3],[3,4],[2,1],[1,5]]},Xy={stars:[{id:0,label:"Acrab",ra:"16 06 55.3",dec:"-19 52 32.6",magnitude:2.59},{id:1,label:"Dschubba",ra:"16 01 50.6",dec:"-22 41 40.4",magnitude:2.25},{id:2,label:"Pi",ra:"16 00 23.8",dec:"-26 11 14.7",magnitude:2.81},{id:3,label:"Antares",ra:"16 30 58.3",dec:"-26 29 18.3",magnitude:.97},{id:4,label:"Tau",ra:"16 37 28.1",dec:"-28 16 06.8",magnitude:2.73},{id:5,label:"Epsilon",ra:"16 51 48.9",dec:"-34 20 18.8",magnitude:2.45},{id:6,label:"Mu1",ra:"16 53 35.8",dec:"-38 05 23.0",magnitude:2.92},{id:7,label:"Zeta2",ra:"16 56 22.6",dec:"-42 24 11.1",magnitude:3.75},{id:8,label:"Eta",ra:"17 13 58.6",dec:"-43 16 14.8",magnitude:3.41},{id:9,label:"Sargas",ra:"17 39 08.6",dec:"-43 00 43.4",magnitude:1.92},{id:10,label:"Iota1",ra:"17 49 21.5",dec:"-40 08 06.6",magnitude:3.09},{id:11,label:"Kappa",ra:"17 44 14.6",dec:"-39 02 29.6",magnitude:2.31},{id:12,label:"Shaula",ra:"17 35 19.9",dec:"-37 07 15.9",magnitude:1.52},{id:13,label:"Lesath",ra:"17 32 29.4",dec:"-37 18 53.3",magnitude:2.59}],edges:[[0,3],[1,3],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[11,12]]},Vy={stars:[{id:0,label:"51",ra:"17 22 58.0",dec:"-23 58 57.0",magnitude:4.78},{id:1,label:"Sabik",ra:"17 11 50.2",dec:"-15 45 26.7",magnitude:2.44},{id:2,label:"Zeta",ra:"16 38 33.8",dec:"-10 37 12.4",magnitude:2.56},{id:3,label:"Yed",ra:"16 19 40.3",dec:"-04 45 23.3",magnitude:3.38},{id:4,label:"Kappa",ra:"16 58 52.5",dec:"09 19 55.5",magnitude:3.36},{id:5,label:"Resalhague",ra:"17 36 06.9",dec:"12 32 15.6",magnitude:2.13},{id:6,label:"Cabalrai",ra:"17 44 43.7",dec:"04 33 12.4",magnitude:2.92},{id:7,label:"Gaia DR2",ra:"15 50 57.4",dec:"-03 30 35.9",magnitude:3.33},{id:8,label:"Epsilon",ra:"15 52 05.6",dec:"04 23 55.1",magnitude:3.75},{id:9,label:"Unukalhai",ra:"15 45 31.8",dec:"06 20 34.7",magnitude:2.8},{id:10,label:"Delta A",ra:"15 36 01.6",dec:"10 27 03.7",magnitude:3.86},{id:11,label:"Beta",ra:"15 47 22.3",dec:"15 20 20.6",magnitude:3.67},{id:12,label:"Gamma",ra:"15 57 38.2",dec:"15 34 31.3",magnitude:3.94},{id:13,label:"Kappa",ra:"15 49 53.7",dec:"18 03 34.6",magnitude:4.19},{id:14,label:"Nu",ra:"17 22 15.5",dec:"-12 52 26.5",magnitude:4.34},{id:15,label:"Xi",ra:"17 39 02.5",dec:"-15 24 56.5",magnitude:3.59},{id:16,label:"Omicron",ra:"17 42 50.5",dec:"-12 53 25.2",magnitude:4.25},{id:17,label:"Eta",ra:"18 22 37.2",dec:"-02 53 41.5",magnitude:3.39},{id:18,label:"Alya",ra:"18 57 28.5",dec:"04 13 59.3",magnitude:4.66}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,1],[14,15],[15,16],[16,17],[17,18],[7,8],[8,9],[9,10],[10,11],[11,12],[12,13],[13,11]]},Qy={stars:[{id:0,label:"Beta2",ra:"19 25 02.3",dec:"-44 45 00.2",magnitude:4.34},{id:1,label:"Rukbat",ra:"19 25 37.9",dec:"-40 34 00.1",magnitude:3.92},{id:2,label:"Iota",ra:"19 56 59.7",dec:"-41 48 00.9",magnitude:4.25},{id:3,label:"Theta1",ra:"20 01 22.3",dec:"-35 12 25.3",magnitude:4.28},{id:4,label:"62",ra:"20 04 12.2",dec:"-27 38 22.1",magnitude:4.44},{id:5,label:"h2",ra:"19 38 14.3",dec:"-24 49 40.7",magnitude:4.56},{id:6,label:"Tau",ra:"19 08 30.9",dec:"-27 37 59.7",magnitude:3.47},{id:7,label:"Nunki",ra:"18 56 49.9",dec:"-26 15 54.9",magnitude:2},{id:8,label:"Xi2",ra:"18 59 14.2",dec:"-21 04 26.3",magnitude:3.69},{id:9,label:"Omicron",ra:"19 06 11.7",dec:"-21 42 17.7",magnitude:3.91},{id:10,label:"43",ra:"19 19 06.6",dec:"-18 54 31.3",magnitude:5.03},{id:11,label:"Rho1",ra:"19 23 08.0",dec:"-17 48 01.9",magnitude:3.98},{id:12,label:"Eta",ra:"18 19 20.5",dec:"-36 45 10.2",magnitude:3.14},{id:13,label:"Kaus Australis",ra:"18 25 51.1",dec:"-34 22 17.9",magnitude:1.8},{id:14,label:"Ascella",ra:"19 04 13.1",dec:"-29 50 36.0",magnitude:2.61},{id:15,label:"Phi",ra:"18 47 14.1",dec:"-26 57 52.7",magnitude:3.13},{id:16,label:"Kaus Media",ra:"18 22 36.8",dec:"-29 49 00.8",magnitude:2.86},{id:17,label:"Alnsal",ra:"18 07 26.2",dec:"-30 25 23.7",magnitude:3.13},{id:18,label:"3",ra:"17 49 09.4",dec:"-27 50 24.9",magnitude:4.66},{id:19,label:"Kaus Borealis",ra:"18 29 32.0",dec:"-25 24 28.0",magnitude:2.97},{id:20,label:"Mu",ra:"18 15 16.7",dec:"-21 03 09.9",magnitude:3.86},{id:21,label:"HD 180885",ra:"19 21 20.2",dec:"-35 22 27.8",magnitude:5.53},{id:22,label:"V4089",ra:"19 35 52.0",dec:"-39 58 43.5",magnitude:5.91}],edges:[[0,1],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[12,13],[16,17],[17,18],[19,20],[7,15],[6,14],[15,19],[16,19],[14,21],[5,21],[2,22],[1,21],[21,22],[13,16],[13,17],[15,14],[15,16]]},Zy={stars:[{id:0,label:"Algedi",ra:"20 19 26.8",dec:"-12 28 05.0",magnitude:3.73},{id:1,label:"Dabih",ra:"20 22 25.3",dec:"-14 42 10.1",magnitude:3.2},{id:2,label:"Psi",ra:"20 47 34.8",dec:"-25 10 49.4",magnitude:4.22},{id:3,label:"Omega",ra:"20 53 18.9",dec:"-26 49 29.2",magnitude:4.22},{id:4,label:"Theta",ra:"21 07 21.2",dec:"-17 08 01.0",magnitude:4.06},{id:5,label:"Zeta",ra:"21 28 05.7",dec:"-22 18 09.6",magnitude:3.92},{id:6,label:"Iota",ra:"21 23 38.3",dec:"-16 43 41.4",magnitude:4.44},{id:7,label:"Nashira",ra:"21 41 28.5",dec:"-16 32 58.0",magnitude:3.77},{id:8,label:"Deneb",ra:"21 48 25.1",dec:"-16 00 50.3",magnitude:2.94},{id:9,label:"Nu",ra:"20 22 03.4",dec:"-12 40 51.8",magnitude:4.72},{id:10,label:"Sigma",ra:"20 20 50.5",dec:"-19 02 25.9",magnitude:5.41}],edges:[[0,1],[1,2],[3,4],[4,1],[4,5],[5,6],[4,6],[6,7],[7,8],[1,9],[1,10]]},Jy={stars:[{id:0,label:"c2",ra:"23 10 46.4",dec:"-21 02 11.8",magnitude:3.84},{id:1,label:"Skat",ra:"22 55 58.3",dec:"-15 41 17.0",magnitude:3.28},{id:2,label:"Tua",ra:"22 50 54.6",dec:"-13 27 39.6",magnitude:4.13},{id:3,label:"Sigma",ra:"22 31 57.9",dec:"-10 33 01.7",magnitude:4.81},{id:4,label:"Ancha",ra:"22 18 09.0",dec:"-07 39 34.2",magnitude:4.31},{id:5,label:"Sadalmelik",ra:"22 07 03.9",dec:"-00 11 58.6",magnitude:3.09},{id:6,label:"Sadachbia",ra:"22 22 56.6",dec:"-01 15 44.7",magnitude:3.83},{id:7,label:"Zeta",ra:"22 30 06.8",dec:"00 06 25.3",magnitude:3.73},{id:8,label:"Eta",ra:"22 36 38.2",dec:"00 00 37.0",magnitude:4},{id:9,label:"Lambda",ra:"22 53 54.9",dec:"-07 26 50.0",magnitude:3.8},{id:10,label:"Psi1",ra:"23 17 11.7",dec:"-08 57 07.4",magnitude:4.41},{id:11,label:"b1",ra:"23 24 16.6",dec:"-19 57 51.0",magnitude:4.09},{id:12,label:"Iota",ra:"22 07 47.0",dec:"-13 44 55.3",magnitude:4.25},{id:13,label:"Sadalsuud",ra:"21 32 52.4",dec:"-05 27 43.9",magnitude:3.03},{id:14,label:"Albali",ra:"20 49 01.9",dec:"-09 24 18.4",magnitude:3.78}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[4,12],[13,14],[5,13]]},em={stars:[{id:0,label:"Upsilon",ra:"25 20 50.0",dec:"27 23 43.0",magnitude:4.75},{id:1,label:"Sigma",ra:"25 04 10.7",dec:"31 56 17.7",magnitude:5.47},{id:2,label:"Phi",ra:"25 15 06.0",dec:"24 42 57.1",magnitude:4.81},{id:3,label:"Eta",ra:"25 32 49.0",dec:"15 28 27.7",magnitude:3.78},{id:4,label:"Omicron",ra:"25 46 42.6",dec:"09 16 58.9",magnitude:4.41},{id:5,label:"Alrescha",ra:"26 03 20.2",dec:"02 53 02.2",magnitude:3.81},{id:6,label:"Xi",ra:"25 54 50.8",dec:"03 18 37.5",magnitude:4.75},{id:7,label:"Nu",ra:"25 42 43.7",dec:"05 36 49.0",magnitude:4.56},{id:8,label:"Mu",ra:"25 31 29.4",dec:"06 16 19.8",magnitude:4.97},{id:9,label:"Epsilon",ra:"25 04 14.1",dec:"08 01 26.9",magnitude:4.41},{id:10,label:"Delta",ra:"24 49 58.4",dec:"07 43 13.8",magnitude:4.53},{id:11,label:"41",ra:"24 21 52.7",dec:"08 19 42.0",magnitude:5.53},{id:12,label:"Omega",ra:"24 00 35.3",dec:"07 00 03.0",magnitude:4.09},{id:13,label:"Iota",ra:"23 41 13.8",dec:"05 45 38.8",magnitude:4.22},{id:14,label:"Theta",ra:"23 29 13.8",dec:"06 30 54.9",magnitude:4.44},{id:15,label:"Gamma",ra:"23 18 27.4",dec:"03 25 04.4",magnitude:3.84},{id:16,label:"Kappa",ra:"23 28 12.5",dec:"01 23 29.7",magnitude:4.94},{id:17,label:"Lambda",ra:"23 43 18.9",dec:"01 55 00.3",magnitude:4.53}],edges:[[0,1],[1,2],[0,2],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[11,12],[12,13],[13,14],[14,15],[15,16],[16,17],[17,13]]},tm={aries:jy,taurus:Uy,gemini:Fy,cancer:Wy,leo:Hy,virgo:Yy,libra:Ky,scorpius:Xy,ophiuchus:Vy,sagittarius:Qy,capricornus:Zy,aquarius:Jy,pisces:em};class nm{constructor(e){this.graphManager=e,this.layout=e.layout}load(e){const t=tm[e.toLowerCase()];if(t){const r=am(e,t.stars,t.edges);this.graphManager.push(r),this.layout.applyLayout("rotate180")}else console.warn(`Constellation "${e}" not found.`)}aries(){this.load("aries")}taurus(){this.load("taurus")}gemini(){this.load("gemini")}cancer(){this.load("cancer")}leo(){this.load("leo")}virgo(){this.load("virgo")}libra(){this.load("libra")}scorpius(){this.load("scorpius")}ophiuchus(){this.load("ophiuchus")}sagittarius(){this.load("sagittarius")}capricornus(){this.load("capricornus")}aquarius(){this.load("aquarius")}pisces(){this.load("pisces")}orion(){this.load("orion")}}function rm(n=3){return Math.pow(.8,n)}function im(n){const[e,t,r]=n.split(" ").map(parseFloat);return(e+t/60+r/3600)*15}function om(n){const e=n.trim().startsWith("-")?-1:1,t=n.trim().replace("+","").replace("-","").split(" ").map(parseFloat),[r,i,o]=t;return e*(r+i/60+o/3600)}function am(n,e,t){const r=new bn;return e.forEach(i=>{const o=im(i.ra),u=om(i.dec);r.addNode(i.id,{label:i.label,x:o,y:u,magnitude:i.magnitude,size:rm(i.magnitude),desc:{name:i.label,magnitude:i.magnitude,RA:sm(i.ra),DEC:i.dec}})}),t.forEach(([i,o])=>{r.mergeEdge(i,o)}),r}function sm(n){let[e=0,t=0,r=0]=n.split(" ").map(Number);r=r%60,t=t%60,e=e%24;const i=String(e).padStart(2,"0"),o=String(t).padStart(2,"0"),u=r.toFixed(1).padStart(4,"0");return[i,o,u].join(" ")}class um{constructor(e,t){this.graphManager=e,this.layout=e.layout,this.zodiac=new nm(e),this.graphClass=t}empty(e){this.graphManager.push(st.empty(this.graphClass,Number(e))),this.layout.applyLayout("circle")}complete(e){this.graphManager.push(st.complete(this.graphClass,Number(e))),this.layout.applyLayout("circle")}ladder(e){this.graphManager.push(st.ladder(this.graphClass,Number(e))),this.layout.applyLayout("twoLine",{line1Count:Number(e),Y:50})}completeBipartite(e,t){const r=st.empty(this.graphClass,Number(e)+Number(t));for(let i=0;i<Number(e);i++)for(let o=Number(e);o<Number(e)+Number(t);o++)r.addEdge(i,o);this.graphManager.push(r),this.layout.applyLayout("twoLine",{line1Count:Number(e),Y:50})}cycle(e){this.graphManager.push(st.path(this.graphClass,Number(e))),this.graphManager.graph.addEdge(0,Number(e)-1),this.layout.applyLayout("circle")}path(e){this.graphManager.push(st.path(this.graphClass,Number(e))),this.layout.applyLayout("oneLine")}caveman(e,t){this.graphManager.push(gu.caveman(this.graphClass,Number(e),Number(t))),this.layout.applyLayout("circle")}connectedCaveman(e,t){this.graphManager.push(gu.connectedCaveman(this.graphClass,Number(e),Number(t))),this.layout.applyLayout("circle")}clusters(e,t,r){const i=Ri.clusters(this.graphClass,{order:Number(e),size:Number(t),clusters:Number(r)});this.graphManager.push(i),this.layout.applyLayout("circle")}erdosRenyi(e,t){const r=Ri.erdosRenyi(this.graphClass,{order:Number(e),probability:Number(t)});this.graphManager.push(r),this.layout.applyLayout("circle")}girvanNewman(e){const t=Ri.girvanNewman(this.graphClass,{zOut:4});this.graphManager.push(t),this.layout.applyLayout("circle")}krackhardtkite(){const e=Oy(this.graphClass);this.graphManager.push(e),this.layout.applyLayout("oneLine")}florentineFamilies(){const e=Ry(this.graphClass);this.graphManager.push(e),this.layout.applyLayout("circle")}karateClub(){const e=By(this.graphClass);this.graphManager.push(e),this.layout.applyLayout("circle")}}class cm{constructor(e,t){this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.layout=e.layout,this.graphClass=this.settings.directed?lr:bn,this.generator=new um(this,this.graphClass),this.metric=new Rc(this),this.limit=t,this.index=0,this.history=[st.empty(this.graphClass,0)],this.graph=this.history[0],this.init()}init(){this.setupEventListeners()}addNode(e,t){this.saveGraphState(),this.graph.addNode(e,t),this.eventBus.emit("graph:updated",{type:"addNode",node:e})}push(e){this.history.length>=this.limit&&this.history.shift(),this.history.push(e),this.index=this.history.length-1,this.graph=this.history[this.index]}getHistory(){return this.history}getIndex(e){return this.history[e]??null}updateIndex(e){return e<0?(console.log("Nothing to Undo..."),!1):e>=this.history.length?(console.log("Nothing to Redo..."),!1):(this.index=e,this.graph=this.history[e],!0)}clear(){this.saveGraphState(),this.graph=st.empty(bn,0),this.eventBus.emit("graph:updated",{type:"clear"})}clearToDigraph(){this.saveGraphState(),this.graph=st.empty(lr,0),this.eventBus.emit("graph:updated",{type:"clear"})}setupEventListeners(){this.eventBus.on("redo",e=>{this.updateIndex(this.index+1)&&this.eventBus.emit("graph:updated",{type:"redo"})}),this.eventBus.on("undo",e=>{this.updateIndex(this.index-1)&&this.eventBus.emit("graph:updated",{type:"undo"})})}updateNodesPostion(e,t){this.saveGraphState(),this.graph.forEachNode((r,i)=>{this.graph.updateNodeAttributes(r,o=>({...o,x:e[r].x+t.x,y:e[r].y+t.y}))})}saveGraphState(){this.history.length=this.index+1,this.push(this.graph.copy())}makeGraphComplete(){this.saveGraphState();for(let e=0;e<this.graph.order;e++)for(let t=e+1;t<this.graph.order;t++)this.graph.mergeEdge(e,t);this.eventBus.emit("graph:updated",{type:"addEdge"})}dropSelectedNodesEdges(){this.saveGraphState(),this.graph.deleteSelected(),this.eventBus.emit("graph:updated",{type:"dropNodesEdges"})}connectSelectedNodes(){this.saveGraphState(),this.graph.connectSelectedNodes(this.settings.edge_color),this.eventBus.emit("graph:updated",{type:"addNodesEdges"})}connectSelectedNodesInOrder(){this.saveGraphState(),this.graph.connectSelectedNodesInOrder(this.settings.edge_color),this.eventBus.emit("graph:updated",{type:"addNodesEdges"})}updateSelectedNodesEdgesColor(){this.saveGraphState(),this.graph.updateSelectedNodesColor(this.settings.node_color,this.settings.stroke_color),this.graph.updateSelectedEdgesColor(this.settings.edge_color),this.eventBus.emit("graph:updated",{type:"updateNodesEdgesColor"})}updateSelectedNodesName(e){this.saveGraphState(),this.graph.updateSelectedNodesName(e),this.eventBus.emit("graph:updated",{type:"updateNodesNames"})}deselectAll(){this.graph.updateEachNodeAttributes((e,t)=>({...t,selected:!1})),this.graph.updateEachEdgeAttributes((e,t)=>({...t,selected:!1}))}selectNode(e){this.setNodeAttribute(e,"selected",!0)}}const Jn=document;class lm{constructor(e){this.app=e,this.eventBus=e.eventBus,this.rename=Jn.querySelector(".rename-panel"),this.shortcuts={n:"new-btn",N:"new-digraph-btn",o:"import-graph",s:"export-graph",p:"export-png",u:"undo-btn",R:"redo-btn",d:"remove-selection-btn",c:"color-selection-btn",e:"add-edge-btn",E:"add-directed-edge-btn",O:"organize-circle",C:"complete-btn",r:"rename-btn",Enter:"rename"}}init(){Jn.addEventListener("keydown",e=>{if(po.emit("key:pressed",{key:e.key}),this.rename.style.display==="flex"){if(e.key==="Enter"){const t=document.getElementById("rename"),r=t.value;t.value="",this.rename.style.display="none",Jn.querySelector(".modal").style.display="none",this.shortcuts[e.key]&&this.app.menu.handleMenuAction(this.shortcuts[e.key],r)}}else this.shortcuts[e.key]&&this.app.menu.handleMenuAction(this.shortcuts[e.key])}),Jn.addEventListener("keyup",e=>{this.eventBus.emit("key:release",{key:e.key})})}}const me=document;function dm(n,e){me.querySelector(".container").classList.toggle("grid-hidden",n.grid<=2),me.getElementById("grid-size-1").value=n.node_radius,me.getElementById("vertex-size-1").value=n.node_radius,me.getElementById("edge-size-1").value=n.edge_size,me.getElementById("label-size-1").value=n.label_size,me.querySelector("#vertex-label .check").classList.toggle("hidden",!n.vertexLabel),me.getElementById("node-color").value=n.node_color,me.getElementById("edge-color").value=n.edge_color,me.getElementById("label-color").value=n.label_color,me.getElementById("stroke-color").value=n.stroke_color,me.querySelector("#component").classList.toggle("gray-background",!n.component),me.querySelector("#scale").classList.toggle("gray-background",!n.scale),me.querySelector("#tree").classList.toggle("gray-background",!n.tree),me.querySelector("#force").classList.toggle("gray-background",!n.forceSimulation),me.querySelector("#panning").classList.toggle("gray-background",!n.panning),me.querySelector("#select").classList.toggle("gray-background",!n.select),e.style.cursor=n.panning?"move":"default";const t=me.documentElement;me.querySelector(".container").classList.toggle("grid-hidden",n.grid<=2),t.style.setProperty("--grid-size",`${n.grid}px`),t.style.setProperty("--grid-color",n.grid_color),me.querySelector(".container").style.backgroundColor=n.background_color}var kt;const qt=class qt{constructor(e){Ta(this,kt,!0);if(this.app=e,this.eventBus=e.eventBus,qt.instance)return qt.instance;qt.instance=this,this.debounceTimer=null,this.defaultSettings={background_color:"white",forceSimulation:!0,component:!1,scale:!1,tree:!0,vertexLabel:!0,directed_edge:!0,directed:!0,node_radius:40,edge_size:2,label_size:15,stroke_size:2,info_panel:!0,tools_panel:!0,console_panel:!0,panning:!1,select:!1,grid:20,stroke_color:"#4682b4",node_color:"#ffffff",edge_color:"#4682b4",label_color:"#000000",label_pos:{x:0,y:0},grid_color:"#00000020"},this.nightSkyTheme={background_color:"#0d1b2a",stroke_color:"#ffffff",node_color:"#ffffff",label_color:"#d1d5db",edge_color:"#60a5fa",grid_color:"#ffffff10",label_pos:{x:-20,y:-20},node_radius:10,edge_size:1,stroke_size:0,forceSimulation:!1},this.settings=this.loadFromLocalStorage(),this.registerEventListeners()}init(){dm(this.settings,this.app.canvas)}registerEventListeners(){this.eventBus.on("updateSetting",e=>{const{key:t,value:r}=e.detail;if(this.setSetting(t,r),t=="grid"){const i=document.documentElement;document.querySelector(".container").classList.toggle("grid-hidden",this.settings.grid<=2),i.style.setProperty("--grid-size",`${this.settings.grid}px`)}else t&&r!==void 0&&this.eventBus.emit("graph:updated",{type:t})}),this.eventBus.on("updateAllSettings",e=>{const t=e.detail;t&&typeof t=="object"&&this.setAllSettings(t)}),this.eventBus.on("resetSettings",()=>{this.resetToDefault()}),this.eventBus.on("toggleSetting",e=>{const{key:t,value:r}=e.detail;t&&(this.toggleSetting(t,r),(t=="vertexLabel"||t=="directed_edge")&&this.eventBus.emit("graph:updated",{type:"vertexLabel"}))})}loadFromLocalStorage(){const e=localStorage.getItem("appSettings");if(e)try{const t=JSON.parse(e);return this.validateSettings(t)}catch{console.warn("Invalid settings in localStorage. Using defaults.")}return{...this.defaultSettings}}saveToLocalStorage(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{localStorage.setItem("appSettings",JSON.stringify(this.settings)),console.log("Settings saved to localStorage"),this.eventBus.emit("settingsChanged",this.getAllSettings())},500)}resetToDefault(){this.setAllSettings(this.defaultSettings)}getSetting(e){return this.settings[e]}getAllSettings(){return{...this.settings}}setSetting(e,t){e in this.settings?this.settings[e]!==t&&(this.settings[e]=t,this.eventBus.emit("settingChanged",{key:e,value:t}),On(this,kt)&&this.saveToLocalStorage()):console.warn(`Setting "${e}" does not exist.`)}setAllSettings(e){Object.keys(e).forEach(t=>{t in this.settings&&(this.settings[t]=e[t])}),this.eventBus.emit("settingsChanged",this.getAllSettings()),On(this,kt)&&this.saveToLocalStorage(),this.init(),this.app.drawGraph()}toggleSetting(e,t=null){const r=["panning","scale","select","component"];e in this.settings&&typeof this.settings[e]=="boolean"?(t===null?this.settings[e]=!this.settings[e]:this.settings[e]=t,r.includes(e)&&r.forEach(i=>{i!=e&&this.settings[e]&&(this.settings[i]=!1)}),(e==="component"&&this.settings.component||e==="scale"&&this.settings.scale||e==="panning"&&this.settings.panning)&&(this.settings.forceSimulation=!1,this.eventBus.emit("settingToggled",{key:"forceSimulation",value:this.settings.forceSimulation})),e==="forceSimulation"&&this.settings.forceSimulation&&(this.settings.component=!1,this.settings.scale=!1,this.settings.panning=!1),this.eventBus.emit("settingToggled",{key:e,value:this.settings[e]}),On(this,kt)&&t===null&&this.saveToLocalStorage(),this.init(),this.app.widget.init()):console.warn(`Setting "${e}" does not exist or is not a boolean.`)}setAutoSave(e){Pa(this,kt,e)}validateSettings(e){return Object.keys(this.defaultSettings).reduce((t,r)=>(t[r]=e&&e.hasOwnProperty(r)?e[r]:this.defaultSettings[r],t),{})}loadNightSkyTheme(){this.setAllSettings(this.nightSkyTheme)}};kt=new WeakMap,Ia(qt,"instance",null);let vo=qt;const te=document;class hm{constructor(e,t,r="menu-bar"){if(this.app=e,this.eventBus=e.eventBus,this.graphManager=e.graphManager,this.appSettings=e.appSettings,this.layout=e.layout,this.menuData=t,this.container=te.getElementById(r),!this.container){console.error("Menu container not found!");return}}init(){this.renderMenu(),this.attachEventListeners()}renderMenu(){this.container.innerHTML="";const e=te.createElement("ul");this.menuData.forEach(t=>{const r=this.createMenu(t);e.appendChild(r)}),this.container.appendChild(e)}createMenu(e){const t=te.createElement("li");if(e.id&&(t.id=e.id),e.title&&(t.textContent=e.title),e.submenu){const r=this.createSubmenu(e.submenu);t.appendChild(r)}return t}createSubmenu(e){const t=te.createElement("ul");return e.forEach(r=>{if(r.type==="divider"){t.appendChild(te.createElement("hr"));return}const i=te.createElement("li");if(r.id&&(i.id=r.id),r.title){const o=te.createElement("label");if(o.textContent=r.title,r.link){const u=te.createElement("a");u.href=r.link,u.target="_blank",r.label?u.textContent=r.label:(u.textContent="?",u.classList.add("border")),o.insertBefore(u,o.firstChild)}i.appendChild(o)}if(r.shortcut){const o=te.createElement("span");o.textContent=r.shortcut,i.appendChild(o)}if("check"in r&&!r.shortcut){const o=te.createElement("span");o.innerHTML="&#10004;",o.classList.add("check"),r.check||o.classList.add("hidden"),i.appendChild(o)}if(r.input)if(r.id==="import-graph")i.appendChild(this.createInput(r.input[0]));else{const o=te.createElement("div");r.input.forEach(u=>{o.appendChild(this.createInput(u))}),i.appendChild(o)}r.name&&i.setAttribute("name",r.name),r.submenu&&i.appendChild(this.createSubmenu(r.submenu)),t.appendChild(i)}),t}createInput(e){const t=te.createElement("input");return t.type=e.type||"text",t.id=e.id,"hidden"in e&&(t.hidden=e.hidden),e.name&&(t.name=e.name),e.placeholder&&(t.placeholder=e.placeholder),e.required&&(t.required=!0),["number","range","date"].includes(t.type)&&(e.min!==void 0&&(t.min=e.min),e.max!==void 0&&(t.max=e.max),e.step!==void 0&&(t.step=e.step)),e.value!==void 0&&(e.type==="checkbox"||e.type==="radio"?t.checked=e.value:t.value=e.value),t}handleMenuAction(e,t){const r={"new-btn":()=>{this.graphManager.clear(),this.eventBus.emit("updateSetting",{key:"directed",value:!1})},"new-digraph-btn":()=>{this.graphManager.clearToDigraph(),this.eventBus.emit("updateSetting",{key:"directed",value:!0})},"import-graph":()=>this.eventBus.emit("import"),"export-graph":()=>this.eventBus.emit("export",{type:"json"}),"export-png":()=>this.eventBus.emit("export",{type:"png"}),"default-settings-btn":()=>this.appSettings.resetToDefault(),"sky-night-theme-btn":()=>this.appSettings.loadNightSkyTheme(),"add-edge-btn":()=>this.graphManager.connectSelectedNodes(),"add-directed-edge-btn":()=>this.graphManager.connectSelectedNodesInOrder(),"remove-selection-btn":()=>this.graphManager.dropSelectedNodesEdges(),"color-selection-btn":()=>this.graphManager.updateSelectedNodesEdgesColor(),"organize-circle":()=>this.layout.applyLayout("circle"),"complete-btn":()=>this.graphManager.makeGraphComplete(),"node-color":()=>this.eventBus.emit("updateSetting",{key:"node_color",value:t}),"edge-color":()=>this.eventBus.emit("updateSetting",{key:"edge_color",value:t}),"label-color":()=>this.eventBus.emit("updateSetting",{key:"label_color",value:t}),"stroke-color":()=>this.eventBus.emit("updateSetting",{key:"stroke_color",value:t}),"background-color":()=>this.eventBus.emit("updateSetting",{key:"background_color",value:t}),"grid-color":()=>this.eventBus.emit("updateSetting",{key:"grid_color",value:t}),rename:()=>this.graphManager.updateSelectedNodesName(t),"rename-btn":()=>{const i=te.querySelector(".modal");i.style.display==="flex"?i.style.display="none":i.style.display="flex",te.querySelector(".modal .help-panel").style.display="none",te.querySelector(".modal .rename-panel").style.display="flex",te.getElementById("rename").focus(),setTimeout(()=>{te.getElementById("rename").value=""},10)},"redo-btn":()=>this.eventBus.emit("redo"),"undo-btn":()=>this.eventBus.emit("undo"),"panel-btn":()=>this.eventBus.emit("toggleSetting",{key:"info_panel"}),"tools-btn":()=>this.eventBus.emit("toggleSetting",{key:"tools_panel"}),"component-btn":()=>this.eventBus.emit("toggleSetting",{key:"component"}),"scale-btn":()=>this.eventBus.emit("toggleSetting",{key:"scale"}),"tree-btn":()=>this.eventBus.emit("toggleSetting",{key:"tree"}),"force-btn":()=>this.eventBus.emit("toggleSetting",{key:"forceSimulation"}),"panning-btn":()=>this.eventBus.emit("toggleSetting",{key:"panning"}),"select-btn":()=>this.eventBus.emit("toggleSetting",{key:"select"}),"vertex-label":()=>this.eventBus.emit("toggleSetting",{key:"vertexLabel"}),"vertex-size-1":()=>this.eventBus.emit("updateSetting",{key:"node_radius",value:t}),"edge-size-1":()=>this.eventBus.emit("updateSetting",{key:"edge_size",value:t}),"label-size-1":()=>this.eventBus.emit("updateSetting",{key:"label_size",value:t}),"grid-size-1":()=>this.eventBus.emit("updateSetting",{key:"grid",value:t}),"stroke-size-1":()=>this.eventBus.emit("updateSetting",{key:"stroke_size",value:t}),"basic-info-btn":()=>this.graphManager.metric.basicInfo(),"list-degrees-btn":()=>this.graphManager.metric.degreeSequesnce(),"components-btn":()=>this.graphManager.metric.countComponents(),"neighbors-btn":()=>this.graphManager.metric.neighbors(),"shortest-path-btn":()=>this.graphManager.metric.shortestPath(),"density-btn":()=>this.graphManager.metric.density(),"diameter-btn":()=>this.graphManager.metric.diameter(),"eccentricity-btn":()=>this.graphManager.metric.eccentricity(),"simmelian-strength-btn":()=>this.graphManager.metric.simmelianStrength(),"betweenness-centrality-btn":()=>this.graphManager.metric.betweennessCentrality(),"closeness-centrality-btn":()=>this.graphManager.metric.closenessCentrality(),"degree-centrality-btn":()=>this.graphManager.metric.degreeCentrality(),"eigenvector-centrality-btn":()=>this.graphManager.metric.eigenvectorCentrality(),"pagerank-btn":()=>this.graphManager.metric.pagerank(),"edge-uniformity-btn":()=>this.graphManager.metric.edgeUniformity(),"neighborhood-preservation-btn":()=>this.graphManager.metric.neighborhoodPreservation(),"stress-btn":()=>this.graphManager.metric.stress(),"disparity-btn":()=>this.graphManager.metric.disparity(),"clear-info-panel-btn":()=>te.querySelector("#floating-panel .body-info").innerHTML="",empty:()=>this.graphManager.generator.empty(te.getElementById("g-empty-1").value),"g-empty-1":()=>this.graphManager.generator.empty(t),cycle:()=>this.graphManager.generator.cycle(te.getElementById("g-cycle-1").value),"g-cycle-1":()=>this.graphManager.generator.cycle(t),path:()=>this.graphManager.generator.path(te.getElementById("g-path-1").value),"g-path-1":()=>this.graphManager.generator.path(t),ladder:()=>this.graphManager.generator.ladder(te.getElementById("g-ladder-1").value),"g-ladder-1":()=>this.graphManager.generator.ladder(t),complete:()=>this.graphManager.generator.complete(te.getElementById("g-complete-1").value),"g-complete-1":()=>this.graphManager.generator.complete(t),"complete-bipartite":()=>this.graphManager.generator.completeBipartite(te.getElementById("g-complete-bipartite-1").value,te.getElementById("g-complete-bipartite-2").value),"g-complete-bipartite-1":()=>this.graphManager.generator.completeBipartite(t,te.getElementById("g-complete-bipartite-2").value),"g-complete-bipartite-2":()=>this.graphManager.generator.completeBipartite(te.getElementById("g-complete-bipartite-1").value,t),caveman:()=>this.graphManager.generator.caveman(te.getElementById("g-caveman-1").value,te.getElementById("g-caveman-2").value),"g-caveman-1":()=>this.graphManager.generator.caveman(t,te.getElementById("g-caveman-2").value),"g-caveman-2":()=>this.graphManager.generator.caveman(te.getElementById("g-caveman-1").value,t),"connected-caveman":()=>this.graphManager.generator.connectedCaveman(te.getElementById("g-connected-caveman-1").value,te.getElementById("g-connected-caveman-2").value),"g-connected-caveman-1":()=>this.graphManager.generator.connectedCaveman(t,te.getElementById("g-connected-caveman-2").value),"g-connected-caveman-2":()=>this.graphManager.generator.connectedCaveman(te.getElementById("g-connected-caveman-1").value,t),clusters:()=>this.graphManager.generator.clusters(te.getElementById("g-clusters-1").value,te.getElementById("g-clusters-2").value,te.getElementById("g-clusters-3").value),"g-clusters-1":()=>this.graphManager.generator.clusters(t,te.getElementById("g-clusters-2").value,te.getElementById("g-clusters-3").value),"g-clusters-2":()=>this.graphManager.generator.clusters(te.getElementById("g-clusters-1").value,t,te.getElementById("g-clusters-3").value),"g-clusters-3":()=>this.graphManager.generator.clusters(te.getElementById("g-clusters-1").value,te.getElementById("g-clusters-2").value,t),"erdos-renyi":()=>this.graphManager.generator.erdosRenyi(te.getElementById("g-erdos-renyi-1").value,te.getElementById("g-erdos-renyi-2").value),"g-erdos-renyi-1":()=>this.graphManager.generator.erdosRenyi(t,te.getElementById("g-erdos-renyi-2").value),"g-erdos-renyi-2":()=>this.graphManager.generator.erdosRenyi(te.getElementById("g-erdos-renyi-1").value,t),"griven-newmn":()=>this.graphManager.generator.girvanNewman(te.getElementById("g-girvan-newman-1").value),"g-girvan-newman-1":()=>this.graphManager.generator.girvanNewman(t),"krackhardt-kite":()=>this.graphManager.generator.krackhardtkite(),"florentine-families":()=>this.graphManager.generator.florentineFamilies(),"karate-club":()=>this.graphManager.generator.karateClub(),aries:()=>this.graphManager.generator.zodiac.aries(),taurus:()=>this.graphManager.generator.zodiac.taurus(),gemini:()=>this.graphManager.generator.zodiac.gemini(),cancer:()=>this.graphManager.generator.zodiac.cancer(),leo:()=>this.graphManager.generator.zodiac.leo(),virgo:()=>this.graphManager.generator.zodiac.virgo(),libra:()=>this.graphManager.generator.zodiac.libra(),scorpius:()=>this.graphManager.generator.zodiac.scorpius(),ophiuchus:()=>this.graphManager.generator.zodiac.ophiuchus(),sagittarius:()=>this.graphManager.generator.zodiac.sagittarius(),capricornus:()=>this.graphManager.generator.zodiac.capricornus(),aquarius:()=>this.graphManager.generator.zodiac.aquarius(),pisces:()=>this.graphManager.generator.zodiac.pisces(),"how-to-use":()=>window.open("https://www.youtube.com/playlist?list=PLaa8UNGS4QED9DUhAZt7O963qkScAWah3","_blank"),command:()=>{te.querySelector(".modal").style.display="flex",te.querySelector(".modal .rename-panel").style.display="none",te.querySelector(".modal .help-panel").style.display="block"},about:()=>window.open("http://picinfiniti.net/","_blank")};r[e]?r[e]():console.log(`No action defined for: ${e}`)}attachEventListeners(){te.addEventListener("click",e=>{if(e.target.tagName==="INPUT")return;const t=e.target.closest("li");if(!t)return;const r=t.id||t.getAttribute("name");r&&this.handleMenuAction(r)}),te.addEventListener("input",e=>{const t=e.target;if(!t||t.id=="rename")return;const r=t.id||t.getAttribute("name");r&&this.handleMenuAction(r,t.value)})}}const Ke=document;class fm{constructor(e){this.app=e,this.eventBus=e.eventBus,this.modal=Ke.querySelector(".modal"),this.rename=Ke.querySelector(".rename-panel"),this.pressedKeys=new Set,this.keySettingsMap={Shift:"select",Control:"panning",Alt:"component",Meta:"scale",f:"forceSimulation",t:"tree"}}isCombo(...e){return e.every(t=>this.pressedKeys.has(t))}init(){this.app.eventBus.on("keydown",e=>{if(this.pressedKeys.add(e.key),this.isCombo("Shift","Alt")){this.eventBus.emit("toggleSetting",{key:"scale",value:!0});return}const t=this.keySettingsMap[e.key];t&&this.rename.style.display!="flex"&&this.eventBus.emit("toggleSetting",{key:t,value:!0})}),this.app.eventBus.on("keyup",e=>{this.pressedKeys.delete(e.key),(e.key==="Shift"||e.key==="Alt")&&this.eventBus.emit("toggleSetting",{key:"scale",value:!1});const t=this.keySettingsMap[e.key==="AltLeft"?"Alt":e.key];t&&this.eventBus.emit("toggleSetting",{key:t,value:!1})}),this.app.eventBus.on("layout:changed",e=>{const{layoutType:t}=e.detail;this.app.graphManager.applyLayout(t),this.eventBus.emit("graph:updated",{type:"layout"})}),this.app.eventBus.on("graph:updated",e=>{this.app.rect.scale.active=!1,this.app.drawGraph(),["addEdges","dropNodesEdges","addNode","undo","redo","clear","import","addNodeInEdge","layout","addEdge"].includes(e.detail.type)&&this.app.updateSimulation()}),this.app.eventBus.on("simulation:toggled",e=>{}),this.app.eventBus.on("key:pressed",e=>{}),this.app.eventBus.on("settingToggled",e=>{const{key:t,value:r}=e.detail;t=="forceSimulation"&&(r?this.app.startSimulation():this.app.stopSimulation())}),this.app.eventBus.on("import",e=>{Ke.getElementById("file-input").click()}),this.app.eventBus.on("export",e=>{if(e.detail.type==="json"){const t=this.app.graphManager.graph.export(),r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2)),i=Ke.createElement("a");i.href=r,i.download="graph.json",Ke.body.appendChild(i),i.click(),Ke.body.removeChild(i)}e.detail.type==="png"&&this.app.canvas.toBlob(function(t){let r=Ke.createElement("a");r.href=URL.createObjectURL(t),r.download="d3-canvas-export.png",Ke.body.appendChild(r),r.click(),Ke.body.removeChild(r)},"image/png")}),Ke.getElementById("file-input").addEventListener("change",e=>{const t=e.target.files[0];if(t){const r=new FileReader;r.onload=i=>{const o=JSON.parse(i.target.result);console.log("Imported Data:",o);const u=this.app.graphManager.graph.copy();this.app.graphManager.push(u),u.clear(),this.app.graphManager.graph.import(o),this.app.eventBus.emit("graph:updated",{type:"import"})},r.readAsText(t)}e.target.value=""})}}const pm=[{title:"File",id:"file",submenu:[{title:"🆕 New Graph",id:"new-btn",shortcut:"(n)"},{title:"➡️ New Digraph",id:"new-digraph-btn",shortcut:"(N)"},{title:"📂 Import",id:"import-graph",shortcut:"(o)",input:[{type:"file",id:"file-input",hidden:!0}]},{title:"💾 Export",id:"export-graph",shortcut:"(s)"},{title:"🖼️ Export to PNG",id:"export-png",shortcut:"(p)"},{type:"divider"},{title:"⚙️ Default Setting",id:"default-settings-btn"},{title:"🌙 Sky Night",id:"sky-night-theme-btn"}]},{title:"Edit",id:"edit",submenu:[{title:"Organize Nodes",name:"organize-circle",shortcut:"(O)"},{title:"Complete Graph",name:"complete-btn",shortcut:"(C)"},{title:"Delete",name:"remove-selection-btn",shortcut:"(d)"},{title:"Assign Color",name:"color-selection-btn",shortcut:"(c)"},{title:"Add Edge",name:"add-edge-btn",shortcut:"(e)"},{title:"Directed Edge",name:"add-directed-edge-btn",shortcut:"(E)"},{type:"divider"},{title:"Rename Nodes",name:"rename-btn",shortcut:"(r)"},{type:"divider"},{title:"Undo",name:"undo-btn",shortcut:"(u)"},{title:"Redo",name:"redo-btn",shortcut:"(R)"},{type:"divider"},{title:"Settings",id:"settings",submenu:[{title:"Vertex Label",id:"vertex-label",check:!0},{title:"Grid",id:"gride-size",input:[{type:"range",id:"grid-size-1",min:0,max:100,value:20}]},{title:"Node",id:"vertex-size",input:[{type:"range",id:"vertex-size-1",min:0,max:200,value:10,step:.1}]},{title:"Edge",id:"edge-size",input:[{type:"range",id:"edge-size-1",min:1,max:100,value:2}]},{title:"Label",id:"label-size",input:[{type:"range",id:"label-size-1",min:0,max:100,value:15}]},{title:"Stroke",id:"stroke-size",input:[{type:"range",id:"stroke-size-1",min:0,max:50,value:5,step:.1}]}]}]},{title:"View",id:"view",submenu:[{title:"Info Panel",id:"panel-btn",check:!0},{title:"Tools Panel",id:"tools-btn",check:!1}]},{title:"Tools",id:"tools",submenu:[{title:"Scale",id:"scale-btn",check:!1,shortcut:"Alt+Shift"},{title:"Panning",id:"panning-btn",check:!1,shortcut:"Ctrl"},{title:"Selecting",id:"select-btn",check:!1,shortcut:"Shift"},{title:"Component",id:"component-btn",check:!1,shortcut:"Alt"},{type:"divider"},{title:"Tree",id:"tree-btn",check:!1,shortcut:"t"},{title:"Force Simulation",id:"force-btn",check:!1,shortcut:"f"}]},{title:"Generator",id:"generator",submenu:[{title:"Classic",id:"classic",submenu:[{title:"Empty",id:"empty",input:[{type:"number",id:"g-empty-1",min:1,max:500,value:5}]},{title:"Kₙ",id:"complete",link:"https://en.wikipedia.org/wiki/Complete_graph",input:[{type:"number",id:"g-complete-1",min:1,max:500,value:5}]},{title:"Kₙ,ₙ",id:"complete-bipartite",link:"https://en.wikipedia.org/wiki/Complete_bipartite_graph",input:[{type:"number",id:"g-complete-bipartite-1",min:1,max:500,value:5},{type:"number",id:"g-complete-bipartite-2",min:1,max:500,value:5}]},{title:"Pₙ",id:"path",link:"https://en.wikipedia.org/wiki/Path_graph",input:[{type:"number",id:"g-path-1",min:2,max:500,value:5}]},{title:"Cₙ",id:"cycle",link:"https://en.wikipedia.org/wiki/Cycle_graph",input:[{type:"number",id:"g-cycle-1",min:3,max:500,value:5}]},{title:"Lₙ",id:"ladder",link:"https://en.wikipedia.org/wiki/Ladder_graph",input:[{type:"number",id:"g-ladder-1",min:2,max:500,value:5}]}]},{title:"Community",id:"community",submenu:[{title:"Cₙ,ₙ",id:"caveman",link:"https://mathworld.wolfram.com/CavemanGraph.html",input:[{type:"number",id:"g-caveman-1",min:1,max:500,value:5},{type:"number",id:"g-caveman-2",min:1,max:500,value:5}]},{title:"Qₙ,ₙ",id:"connected-caveman",link:"https://mathworld.wolfram.com/CavemanGraph.html",input:[{type:"number",id:"g-connected-caveman-1",min:1,max:500,value:5},{type:"number",id:"g-connected-caveman-2",min:1,max:500,value:5}]}]},{title:"Random",id:"random",submenu:[{title:"Clusters",id:"clusters",input:[{type:"number",id:"g-clusters-1",min:2,max:500,value:20},{type:"number",id:"g-clusters-2",min:2,max:500,value:20},{type:"number",id:"g-clusters-3",min:2,max:500,value:10}]},{title:"erdos Renyi",id:"erdos-renyi",link:"https://en.wikipedia.org/wiki/Erd%C5%91s%E2%80%93R%C3%A9nyi_model",input:[{type:"number",id:"g-erdos-renyi-1",min:1,max:500,value:10},{type:"number",id:"g-erdos-renyi-2",min:0,max:1,step:.1,value:.5}]},{title:"Girvan Newman",id:"griven-newmn",link:"https://www.pnas.org/doi/pdf/10.1073/pnas.122653799",input:[{type:"number",id:"g-girvan-newman-1",min:1,max:500,value:5}]}]},{title:"Small",id:"small",submenu:[{title:"Krackhardt kite",id:"krackhardt-kite",link:"https://en.wikipedia.org/wiki/Krackhardt_kite_graph"}]},{title:"Social",id:"social",submenu:[{title:"Florentine families",id:"florentine-families"},{title:"Zachary’s karate club",id:"karate-club",link:"https://en.wikipedia.org/wiki/Zachary%27s_karate_club"}]},{type:"divider"},{title:"Zodiac",id:"zodiac",submenu:[{title:"Aries",id:"aries",label:"♈",link:"https://en.wikipedia.org/wiki/Aries_(astrology)"},{title:"Taurus",id:"taurus",label:"♉",link:"https://en.wikipedia.org/wiki/Taurus_(astrology)"},{title:"Gemini",id:"gemini",label:"♊",link:"https://en.wikipedia.org/wiki/Gemini_(astrology)"},{title:"Cancer",id:"cancer",label:"♋",link:"https://en.wikipedia.org/wiki/Cancer_(astrology)"},{title:"Leo",id:"leo",label:"♌",link:"https://en.wikipedia.org/wiki/Leo_(astrology)"},{title:"Virgo",id:"virgo",label:"♍",link:"https://en.wikipedia.org/wiki/Virgo_(astrology)"},{title:"Libra",id:"libra",label:"♎",link:"https://en.wikipedia.org/wiki/Libra_(astrology)"},{title:"Scorpius",id:"scorpius",label:"♏",link:"https://en.wikipedia.org/wiki/Scorpio_(astrology)"},{title:"Ophiuchus",id:"ophiuchus",label:"⛎",link:"https://en.wikipedia.org/wiki/Ophiuchus_(astrology)"},{title:"Sagittarius",id:"sagittarius",label:"♐",link:"https://en.wikipedia.org/wiki/Sagittarius_(astrology)"},{title:"Capricornus",id:"capricornus",label:"♑",link:"https://en.wikipedia.org/wiki/Capricorn_(astrology)"},{title:"Aquarius",id:"aquarius",label:"♒",link:"https://en.wikipedia.org/wiki/Aquarius_(astrology)"},{title:"Pisces",id:"pisces",label:"♓",link:"https://en.wikipedia.org/wiki/Pisces_(astrology)"}]}]},{title:"Metrics",id:"metrics",submenu:[{title:"Basic",id:"basic",submenu:[{title:"Basic Information",id:"basic-info-btn"},{title:"Components",id:"components-btn"},{title:"Degree Sequence",id:"list-degrees-btn"},{title:"Density",id:"density-btn"},{title:"Diameter",id:"diameter-btn"}]},{title:"Centrality",id:"centrality",submenu:[{title:"Betweenness Centrality",id:"betweenness-centrality-btn"},{title:"Closeness Centrality",id:"closeness-centrality-btn"},{title:"Degree Centrality",id:"degree-centrality-btn"},{title:"Eccentricity",id:"eccentricity-btn"},{title:"Eigenvector Centrality",id:"eigenvector-centrality-btn"},{title:"PageRank",id:"pagerank-btn"}]},{title:"Layout Quality",id:"layout-quality",submenu:[{title:"Edge Uniformity",id:"edge-uniformity-btn"},{title:"Neighborhood Preservation",id:"neighborhood-preservation-btn"},{title:"Stress",id:"stress-btn"}]},{title:"Other",id:"other",submenu:[{title:"Simmelian Strength",id:"simmelian-strength-btn"},{title:"Disparity",id:"disparity-btn"}]},{type:"divider"},{title:"Neighbors",id:"neighbors-btn"},{title:"Shortest Path",id:"shortest-path-btn"},{type:"divider"},{title:"Clear Panel",id:"clear-info-panel-btn"}]},{title:"Help",id:"help",submenu:[{title:"Mouse Commnads",id:"command",name:"command-btn"},{title:"How to use",id:"how-to-use"},{title:"About",id:"about",shortcut:"version: 1.1.1"}]}];var Rt={},Qi,Pu;function gm(){if(Pu)return Qi;Pu=1;function n(t){return function(r,i){return r+Math.floor(t()*(i-r+1))}}var e=n(Math.random);return e.createRandom=n,Qi=e,Qi}var Zi,Lu;function vm(){if(Lu)return Zi;Lu=1;var n=gm().createRandom;function e(r){var i=n(r);return function(o){for(var u=o.length,l=u-1,h=-1;++h<u;){var d=i(h,l),p=o[d];o[d]=o[h],o[h]=p}}}var t=e(Math.random);return t.createShuffleInPlace=e,Zi=t,Zi}var Ji,$u;function ym(){if($u)return Ji;$u=1;var n=Qe(),e=de(),t=vm(),r={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function i(m,C,z,P,G){this.wrappedCircle=G||null,this.children={},this.countChildren=0,this.id=m||null,this.next=null,this.previous=null,this.x=C||null,this.y=z||null,G?this.r=1010101:this.r=P||999}i.prototype.hasChildren=function(){return this.countChildren>0},i.prototype.addChild=function(m,C){this.children[m]=C,++this.countChildren},i.prototype.getChild=function(m){if(!this.children.hasOwnProperty(m)){var C=new i;this.children[m]=C,++this.countChildren}return this.children[m]},i.prototype.applyPositionToChildren=function(){if(this.hasChildren()){var m=this;for(var C in m.children){var z=m.children[C];z.x+=m.x,z.y+=m.y,z.applyPositionToChildren()}}};function o(m,C,z){for(var P in C.children){var G=C.children[P];G.hasChildren()?o(m,G,z):z[G.id]={x:G.x,y:G.y}}}function u(m,C){var z=m.r-C.r,P=C.x-m.x,G=C.y-m.y;return z<0||z*z<P*P+G*G}function l(m,C){var z=m.r-C.r+1e-6,P=C.x-m.x,G=C.y-m.y;return z>0&&z*z>P*P+G*G}function h(m,C){for(var z=0;z<C.length;++z)if(!l(m,C[z]))return!1;return!0}function d(m){return new i(null,m.x,m.y,m.r)}function p(m,C){var z=m.x,P=m.y,G=m.r,q=C.x,j=C.y,H=C.r,U=q-z,X=j-P,ne=H-G,he=Math.sqrt(U*U+X*X);return new i(null,(z+q+U/he*ne)/2,(P+j+X/he*ne)/2,(he+G+H)/2)}function v(m,C,z){var P=m.x,G=m.y,q=m.r,j=C.x,H=C.y,U=C.r,X=z.x,ne=z.y,he=z.r,ue=P-j,le=P-X,ge=G-H,ye=G-ne,Ee=U-q,Ze=he-q,dt=P*P+G*G-q*q,ht=dt-j*j-H*H+U*U,Je=dt-X*X-ne*ne+he*he,et=le*ge-ue*ye,J=(ge*Je-ye*ht)/(et*2)-P,bt=(ye*Ee-ge*Ze)/et,Fe=(le*ht-ue*Je)/(et*2)-G,tt=(ue*Ze-le*Ee)/et,xt=bt*bt+tt*tt-1,nt=2*(q+J*bt+Fe*tt),ft=J*J+Fe*Fe-q*q,Ge=-(xt?(nt+Math.sqrt(nt*nt-4*xt*ft))/(2*xt):ft/nt);return new i(null,P+J+bt*Ge,G+Fe+tt*Ge,Ge)}function y(m){switch(m.length){case 1:return d(m[0]);case 2:return p(m[0],m[1]);case 3:return v(m[0],m[1],m[2]);default:throw new Error("graphology-layout/circlepack: Invalid basis length "+m.length)}}function w(m,C){var z,P;if(h(C,m))return[C];for(z=0;z<m.length;++z)if(u(C,m[z])&&h(p(m[z],C),m))return[m[z],C];for(z=0;z<m.length-1;++z)for(P=z+1;P<m.length;++P)if(u(p(m[z],m[P]),C)&&u(p(m[z],C),m[P])&&u(p(m[P],C),m[z])&&h(v(m[z],m[P],C),m))return[m[z],m[P],C];throw new Error("graphology-layout/circlepack: extendBasis failure !")}function S(m){var C=m.wrappedCircle,z=m.next.wrappedCircle,P=C.r+z.r,G=(C.x*z.r+z.x*C.r)/P,q=(C.y*z.r+z.y*C.r)/P;return G*G+q*q}function E(m,C){var z=0,P=m.slice(),G=m.length,q=[],j,H;for(C(P);z<G;)j=P[z],H&&l(H,j)?++z:(q=w(q,j),H=y(q),z=0);return H}function N(m,C,z){var P=m.x-C.x,G,q,j=m.y-C.y,H,U,X=P*P+j*j;X?(q=C.r+z.r,q*=q,U=m.r+z.r,U*=U,q>U?(G=(X+U-q)/(2*X),H=Math.sqrt(Math.max(0,U/X-G*G)),z.x=m.x-G*P-H*j,z.y=m.y-G*j+H*P):(G=(X+q-U)/(2*X),H=Math.sqrt(Math.max(0,q/X-G*G)),z.x=C.x+G*P-H*j,z.y=C.y+G*j+H*P)):(z.x=C.x+z.r,z.y=C.y)}function k(m,C){var z=m.r+C.r-1e-6,P=C.x-m.x,G=C.y-m.y;return z>0&&z*z>P*P+G*G}function A(m,C){var z=m.length;if(z===0)return 0;var P,G,q,j,H,U,X,ne,he,ue;if(P=m[0],P.x=0,P.y=0,z<=1)return P.r;if(G=m[1],P.x=-G.r,G.x=P.r,G.y=0,z<=2)return P.r+G.r;q=m[2],N(G,P,q),P=new i(null,null,null,null,P),G=new i(null,null,null,null,G),q=new i(null,null,null,null,q),P.next=q.previous=G,G.next=P.previous=q,q.next=G.previous=P;e:for(U=3;U<z;++U){q=m[U],N(P.wrappedCircle,G.wrappedCircle,q),q=new i(null,null,null,null,q),X=G.next,ne=P.previous,he=G.wrappedCircle.r,ue=P.wrappedCircle.r;do if(he<=ue){if(k(X.wrappedCircle,q.wrappedCircle)){G=X,P.next=G,G.previous=P,--U;continue e}he+=X.wrappedCircle.r,X=X.next}else{if(k(ne.wrappedCircle,q.wrappedCircle)){P=ne,P.next=G,G.previous=P,--U;continue e}ue+=ne.wrappedCircle.r,ne=ne.previous}while(X!==ne.next);for(q.previous=P,q.next=G,P.next=G.previous=G=q,j=S(P);(q=q.next)!==G;)(H=S(q))<j&&(P=q,j=H);G=P.next}P=[G.wrappedCircle],q=G;for(var le=1e4;(q=q.next)!==G&&--le!==0;)P.push(q.wrappedCircle);for(q=E(P,C),U=0;U<z;++U)P=m[U],P.x-=q.x,P.y-=q.y;return q.r}function I(m,C){var z=0;if(m.hasChildren()){for(var P in m.children){var G=m.children[P];G.hasChildren()&&(G.r=I(G,C))}z=A(Object.values(m.children),C)}return z}function x(m,C){I(m,C);for(var z in m.children){var P=m.children[z];P.applyPositionToChildren()}}function M(m,C,z){if(!e(C))throw new Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");z=n(z,r);var P={},G={},q=C.nodes(),j=z.center,H=z.hierarchyAttributes,U=t.createShuffleInPlace(z.rng),X=z.scale,ne=new i;C.forEachNode(function(Ee,Ze){var dt=Ze.size?Ze.size:1,ht=new i(Ee,null,null,dt),Je=ne;H.forEach(function(et){var J=Ze[et];Je=Je.getChild(J)}),Je.addChild(Ee,ht)}),x(ne,U),o(C,ne,P);var he=q.length,ue,le,ge;for(ge=0;ge<he;ge++){var ye=q[ge];ue=j+X*P[ye].x,le=j+X*P[ye].y,G[ye]={x:ue,y:le},m&&(C.setNodeAttribute(ye,z.attributes.x,ue),C.setNodeAttribute(ye,z.attributes.y,le))}return G}var $=M.bind(null,!1);return $.assign=M.bind(null,!0),Ji=$,Ji}var eo,Gu;function mm(){if(Gu)return eo;Gu=1;var n=Qe(),e=de(),t={dimensions:["x","y"],center:.5,scale:1};function r(o,u,l){if(!e(u))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");l=n(l,t);var h=l.dimensions;if(!Array.isArray(h)||h.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var d=l.center,p=l.scale,v=Math.PI*2,y=(d-.5)*p,w=u.order,S=h[0],E=h[1];function N(I,x){return x[S]=p*Math.cos(I*v/w)+y,x[E]=p*Math.sin(I*v/w)+y,x}var k=0;if(!o){var A={};return u.forEachNode(function(I){A[I]=N(k++,{})}),A}u.updateEachNodeAttributes(function(I,x){return N(k++,x),x},{attributes:h})}var i=r.bind(null,!1);return i.assign=r.bind(null,!0),eo=i,eo}var to,Ou;function wm(){if(Ou)return to;Ou=1;var n=Qe(),e=de(),t={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function r(o,u,l){if(!e(u))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");l=n(l,t);var h=l.dimensions;if(!Array.isArray(h)||h.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var d=h.length,p=l.center,v=l.rng,y=l.scale,w=(p-.5)*y;function S(N){for(var k=0;k<d;k++)N[h[k]]=v()*y+w;return N}if(!o){var E={};return u.forEachNode(function(N){E[N]=S({})}),E}u.updateEachNodeAttributes(function(N,k){return S(k),k},{attributes:h})}var i=r.bind(null,!1);return i.assign=r.bind(null,!0),to=i,to}var no,Ru;function bm(){if(Ru)return no;Ru=1;var n=Qe(),e=de(),t=Math.PI/180,r={dimensions:["x","y"],centeredOnZero:!1,degrees:!1};function i(u,l,h,d){if(!e(l))throw new Error("graphology-layout/rotation: the given graph is not a valid graphology instance.");d=n(d,r),d.degrees&&(h*=t);var p=d.dimensions;if(!Array.isArray(p)||p.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");if(l.order===0)return u?void 0:{};var v=p[0],y=p[1],w=0,S=0;if(!d.centeredOnZero){var E=1/0,N=-1/0,k=1/0,A=-1/0;l.forEachNode(function(m,C){var z=C[v],P=C[y];z<E&&(E=z),z>N&&(N=z),P<k&&(k=P),P>A&&(A=P)}),w=(E+N)/2,S=(k+A)/2}var I=Math.cos(h),x=Math.sin(h);function M(m){var C=m[v],z=m[y];return m[v]=w+(C-w)*I-(z-S)*x,m[y]=S+(C-w)*x+(z-S)*I,m}if(!u){var $={};return l.forEachNode(function(m,C){var z={};z[v]=C[v],z[y]=C[y],$[m]=M(z)}),$}l.updateEachNodeAttributes(function(m,C){return M(C),C},{attributes:p})}var o=i.bind(null,!1);return o.assign=i.bind(null,!0),no=o,no}var qu;function xm(){return qu||(qu=1,Rt.circlepack=ym(),Rt.circular=mm(),Rt.random=wm(),Rt.rotation=bm()),Rt}var ro,Bu;function Em(){return Bu||(Bu=1,ro=xm()),ro}var _m=Em();class Sm{constructor(e){this.app=e,this.eventBus=e.eventBus,this.canvas=e.canvas}init(){}applyLayout(e,t){switch(e){case"rotate180":this.rotate180(),this.eventBus.emit("graph:updated",{type:"layout"});break;case"circle":this.organizeNodesInCircle(),this.eventBus.emit("graph:updated",{type:"layout"});break;case"oneLine":this.organizeNodesInLine(),this.eventBus.emit("graph:updated",{type:"layout"});break;case"twoLine":this.organizeNodesInTwoLines(t.line1Count,t.Y),this.eventBus.emit("graph:updated",{type:"layout"});break}}organizeNodesInCircle(){const e=this.canvas.width/2,t=this.canvas.height/2,r=Math.min(e*.5,t*.5),i=_m.circular(this.app.graphManager.graph,{scale:r,dimensions:["x","y"]});this.app.graphManager.updateNodesPostion(i,{x:e,y:t})}organizeNodesInLine(){const e=this.app.graphManager.graph,t=this.canvas.height/2,r=100,i=Array.from(e.nodes()),o=i.length;if(o===0)return;const u=(this.canvas.width-2*r)/Math.max(1,o-1);i.forEach((l,h)=>{const d=r+h*u;e.updateNodeAttributes(l,p=>({...p,x:d,y:t}))})}organizeNodesInTwoLines(e,t=50){const r=this.app.graphManager.graph,i=this.canvas.height/2,o=100,u=t,l=Array.from(r.nodes()),h=l.length;if(e>h){console.error("Line1 count exceeds total nodes.");return}const d=l.slice(0,e),p=l.slice(e),v=d.length,y=p.length,w=v>1?(this.canvas.width-2*o)/(v-1):0,S=y>1?(this.canvas.width-2*o)/(y-1):0,E=i-u,N=i+u;d.forEach((k,A)=>{const I=o+A*w;r.updateNodeAttributes(k,x=>({...x,x:I,y:E}))}),p.forEach((k,A)=>{const I=o+A*S;r.updateNodeAttributes(k,x=>({...x,x:I,y:N}))})}rotate180(){const e=this.app.graphManager.graph,t=this.canvas.width,r=this.canvas.height,i=200,o=Array.from(e.nodes());if(o.length===0)return;let u=1/0,l=1/0,h=-1/0,d=-1/0;o.forEach(k=>{const{x:A,y:I}=e.getNodeAttributes(k);A<u&&(u=A),I<l&&(l=I),A>h&&(h=A),I>d&&(d=I)});const p=h-u,v=d-l,y=(t-2*i)/p,w=(r-2*i)/v,S=Math.min(y,w),E=(t-p*S)/2,N=(r-v*S)/2;o.forEach(k=>{const{x:A,y:I}=e.getNodeAttributes(k),x=t-((A-u)*S+E),M=r-((I-l)*S+N);e.updateNodeAttributes(k,$=>({...$,x,y:M}))})}}var pn={exports:{}},Am=pn.exports,ju;function km(){return ju||(ju=1,function(n,e){(function(t,r){n.exports=r()})(Am,function(){function t(s,a){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(s);a&&(f=f.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),c.push.apply(c,f)}return c}function r(s){for(var a=1;a<arguments.length;a++){var c=arguments[a]!=null?arguments[a]:{};a%2?t(Object(c),!0).forEach(function(f){h(s,f,c[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):t(Object(c)).forEach(function(f){Object.defineProperty(s,f,Object.getOwnPropertyDescriptor(c,f))})}return s}function i(s){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i(s)}function o(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function u(s,a){for(var c=0;c<a.length;c++){var f=a[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(s,E(f.key),f)}}function l(s,a,c){return a&&u(s.prototype,a),Object.defineProperty(s,"prototype",{writable:!1}),s}function h(s,a,c){return(a=E(a))in s?Object.defineProperty(s,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[a]=c,s}function d(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&v(s,a)}function p(s){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},p(s)}function v(s,a){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,f){return c.__proto__=f,c},v(s,a)}function y(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function w(s){var a=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var c,f=p(s);if(a){var g=p(this).constructor;c=Reflect.construct(f,arguments,g)}else c=f.apply(this,arguments);return function(b,_){if(_&&(typeof _=="object"||typeof _=="function"))return _;if(_!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(b)}(this,c)}}function S(){return S=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(s,a,c){var f=function(b,_){for(;!Object.prototype.hasOwnProperty.call(b,_)&&(b=p(b))!==null;);return b}(s,a);if(f){var g=Object.getOwnPropertyDescriptor(f,a);return g.get?g.get.call(arguments.length<3?s:c):g.value}},S.apply(this,arguments)}function E(s){var a=function(c,f){if(typeof c!="object"||c===null)return c;var g=c[Symbol.toPrimitive];if(g!==void 0){var b=g.call(c,f);if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(c)}(s,"string");return typeof a=="symbol"?a:a+""}var N=function(s){return!(!s||!s.Window)&&s instanceof s.Window},k=void 0,A=void 0;function I(s){k=s;var a=s.document.createTextNode("");a.ownerDocument!==s.document&&typeof s.wrap=="function"&&s.wrap(a)===a&&(s=s.wrap(s)),A=s}function x(s){return N(s)?s:(s.ownerDocument||s).defaultView||A.window}typeof window<"u"&&window&&I(window);var M=function(s){return!!s&&i(s)==="object"},$=function(s){return typeof s=="function"},m={window:function(s){return s===A||N(s)},docFrag:function(s){return M(s)&&s.nodeType===11},object:M,func:$,number:function(s){return typeof s=="number"},bool:function(s){return typeof s=="boolean"},string:function(s){return typeof s=="string"},element:function(s){if(!s||i(s)!=="object")return!1;var a=x(s)||A;return/object|function/.test(typeof Element>"u"?"undefined":i(Element))?s instanceof Element||s instanceof a.Element:s.nodeType===1&&typeof s.nodeName=="string"},plainObject:function(s){return M(s)&&!!s.constructor&&/function Object\b/.test(s.constructor.toString())},array:function(s){return M(s)&&s.length!==void 0&&$(s.splice)}};function C(s){var a=s.interaction;if(a.prepared.name==="drag"){var c=a.prepared.axis;c==="x"?(a.coords.cur.page.y=a.coords.start.page.y,a.coords.cur.client.y=a.coords.start.client.y,a.coords.velocity.client.y=0,a.coords.velocity.page.y=0):c==="y"&&(a.coords.cur.page.x=a.coords.start.page.x,a.coords.cur.client.x=a.coords.start.client.x,a.coords.velocity.client.x=0,a.coords.velocity.page.x=0)}}function z(s){var a=s.iEvent,c=s.interaction;if(c.prepared.name==="drag"){var f=c.prepared.axis;if(f==="x"||f==="y"){var g=f==="x"?"y":"x";a.page[g]=c.coords.start.page[g],a.client[g]=c.coords.start.client[g],a.delta[g]=0}}}var P={id:"actions/drag",install:function(s){var a=s.actions,c=s.Interactable,f=s.defaults;c.prototype.draggable=P.draggable,a.map.drag=P,a.methodDict.drag="draggable",f.actions.drag=P.defaults},listeners:{"interactions:before-action-move":C,"interactions:action-resume":C,"interactions:action-move":z,"auto-start:check":function(s){var a=s.interaction,c=s.interactable,f=s.buttons,g=c.options.drag;if(g&&g.enabled&&(!a.pointerIsDown||!/mouse|pointer/.test(a.pointerType)||f&c.options.drag.mouseButtons))return s.action={name:"drag",axis:g.lockAxis==="start"?g.startAxis:g.lockAxis},!1}},draggable:function(s){return m.object(s)?(this.options.drag.enabled=s.enabled!==!1,this.setPerAction("drag",s),this.setOnEvents("drag",s),/^(xy|x|y|start)$/.test(s.lockAxis)&&(this.options.drag.lockAxis=s.lockAxis),/^(xy|x|y)$/.test(s.startAxis)&&(this.options.drag.startAxis=s.startAxis),this):m.bool(s)?(this.options.drag.enabled=s,this):this.options.drag},beforeMove:C,move:z,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(s){return s.search("drag")===0}},G=P,q={init:function(s){var a=s;q.document=a.document,q.DocumentFragment=a.DocumentFragment||j,q.SVGElement=a.SVGElement||j,q.SVGSVGElement=a.SVGSVGElement||j,q.SVGElementInstance=a.SVGElementInstance||j,q.Element=a.Element||j,q.HTMLElement=a.HTMLElement||q.Element,q.Event=a.Event,q.Touch=a.Touch||j,q.PointerEvent=a.PointerEvent||a.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function j(){}var H=q,U={init:function(s){var a=H.Element,c=s.navigator||{};U.supportsTouch="ontouchstart"in s||m.func(s.DocumentTouch)&&H.document instanceof s.DocumentTouch,U.supportsPointerEvent=c.pointerEnabled!==!1&&!!H.PointerEvent,U.isIOS=/iP(hone|od|ad)/.test(c.platform),U.isIOS7=/iP(hone|od|ad)/.test(c.platform)&&/OS 7[^\d]/.test(c.appVersion),U.isIe9=/MSIE 9/.test(c.userAgent),U.isOperaMobile=c.appName==="Opera"&&U.supportsTouch&&/Presto/.test(c.userAgent),U.prefixedMatchesSelector="matches"in a.prototype?"matches":"webkitMatchesSelector"in a.prototype?"webkitMatchesSelector":"mozMatchesSelector"in a.prototype?"mozMatchesSelector":"oMatchesSelector"in a.prototype?"oMatchesSelector":"msMatchesSelector",U.pEventTypes=U.supportsPointerEvent?H.PointerEvent===s.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,U.wheelEvent=H.document&&"onmousewheel"in H.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},X=U;function ne(s,a){if(s.contains)return s.contains(a);for(;a;){if(a===s)return!0;a=a.parentNode}return!1}function he(s,a){for(;m.element(s);){if(le(s,a))return s;s=ue(s)}return null}function ue(s){var a=s.parentNode;if(m.docFrag(a)){for(;(a=a.host)&&m.docFrag(a););return a}return a}function le(s,a){return A!==k&&(a=a.replace(/\/deep\//g," ")),s[X.prefixedMatchesSelector](a)}var ge=function(s){return s.parentNode||s.host};function ye(s,a){for(var c,f=[],g=s;(c=ge(g))&&g!==a&&c!==g.ownerDocument;)f.unshift(g),g=c;return f}function Ee(s,a,c){for(;m.element(s);){if(le(s,a))return!0;if((s=ue(s))===c)return le(s,a)}return!1}function Ze(s){return s.correspondingUseElement||s}function dt(s){var a=s instanceof H.SVGElement?s.getBoundingClientRect():s.getClientRects()[0];return a&&{left:a.left,right:a.right,top:a.top,bottom:a.bottom,width:a.width||a.right-a.left,height:a.height||a.bottom-a.top}}function ht(s){var a,c=dt(s);if(!X.isIOS7&&c){var f={x:(a=(a=x(s))||A).scrollX||a.document.documentElement.scrollLeft,y:a.scrollY||a.document.documentElement.scrollTop};c.left+=f.x,c.right+=f.x,c.top+=f.y,c.bottom+=f.y}return c}function Je(s){for(var a=[];s;)a.push(s),s=ue(s);return a}function et(s){return!!m.string(s)&&(H.document.querySelector(s),!0)}function J(s,a){for(var c in a)s[c]=a[c];return s}function bt(s,a,c){return s==="parent"?ue(c):s==="self"?a.getRect(c):he(c,s)}function Fe(s,a,c,f){var g=s;return m.string(g)?g=bt(g,a,c):m.func(g)&&(g=g.apply(void 0,f)),m.element(g)&&(g=ht(g)),g}function tt(s){return s&&{x:"x"in s?s.x:s.left,y:"y"in s?s.y:s.top}}function xt(s){return!s||"x"in s&&"y"in s||((s=J({},s)).x=s.left||0,s.y=s.top||0,s.width=s.width||(s.right||0)-s.x,s.height=s.height||(s.bottom||0)-s.y),s}function nt(s,a,c){s.left&&(a.left+=c.x),s.right&&(a.right+=c.x),s.top&&(a.top+=c.y),s.bottom&&(a.bottom+=c.y),a.width=a.right-a.left,a.height=a.bottom-a.top}function ft(s,a,c){var f=c&&s.options[c];return tt(Fe(f&&f.origin||s.options.origin,s,a,[s&&a]))||{x:0,y:0}}function Ge(s,a){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(T){return!0},f=arguments.length>3?arguments[3]:void 0;if(f=f||{},m.string(s)&&s.search(" ")!==-1&&(s=qo(s)),m.array(s))return s.forEach(function(T){return Ge(T,a,c,f)}),f;if(m.object(s)&&(a=s,s=""),m.func(a)&&c(s))f[s]=f[s]||[],f[s].push(a);else if(m.array(a))for(var g=0,b=a;g<b.length;g++){var _=b[g];Ge(s,_,c,f)}else if(m.object(a))for(var D in a)Ge(qo(D).map(function(T){return"".concat(s).concat(T)}),a[D],c,f);return f}function qo(s){return s.trim().split(/ +/)}var Yt=function(s,a){return Math.sqrt(s*s+a*a)},qc=["webkit","moz"];function An(s,a){s.__set||(s.__set={});var c=function(g){if(qc.some(function(b){return g.indexOf(b)===0}))return 1;typeof s[g]!="function"&&g!=="__set"&&Object.defineProperty(s,g,{get:function(){return g in s.__set?s.__set[g]:s.__set[g]=a[g]},set:function(b){s.__set[g]=b},configurable:!0})};for(var f in a)c(f);return s}function kn(s,a){s.page=s.page||{},s.page.x=a.page.x,s.page.y=a.page.y,s.client=s.client||{},s.client.x=a.client.x,s.client.y=a.client.y,s.timeStamp=a.timeStamp}function Bo(s){s.page.x=0,s.page.y=0,s.client.x=0,s.client.y=0}function jo(s){return s instanceof H.Event||s instanceof H.Touch}function Nn(s,a,c){return s=s||"page",(c=c||{}).x=a[s+"X"],c.y=a[s+"Y"],c}function Uo(s,a){return a=a||{x:0,y:0},X.isOperaMobile&&jo(s)?(Nn("screen",s,a),a.x+=window.scrollX,a.y+=window.scrollY):Nn("page",s,a),a}function Kt(s){return m.number(s.pointerId)?s.pointerId:s.identifier}function Bc(s,a,c){var f=a.length>1?Fo(a):a[0];Uo(f,s.page),function(g,b){b=b||{},X.isOperaMobile&&jo(g)?Nn("screen",g,b):Nn("client",g,b)}(f,s.client),s.timeStamp=c}function mr(s){var a=[];return m.array(s)?(a[0]=s[0],a[1]=s[1]):s.type==="touchend"?s.touches.length===1?(a[0]=s.touches[0],a[1]=s.changedTouches[0]):s.touches.length===0&&(a[0]=s.changedTouches[0],a[1]=s.changedTouches[1]):(a[0]=s.touches[0],a[1]=s.touches[1]),a}function Fo(s){for(var a={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},c=0;c<s.length;c++){var f=s[c];for(var g in a)a[g]+=f[g]}for(var b in a)a[b]/=s.length;return a}function wr(s){if(!s.length)return null;var a=mr(s),c=Math.min(a[0].pageX,a[1].pageX),f=Math.min(a[0].pageY,a[1].pageY),g=Math.max(a[0].pageX,a[1].pageX),b=Math.max(a[0].pageY,a[1].pageY);return{x:c,y:f,left:c,top:f,right:g,bottom:b,width:g-c,height:b-f}}function br(s,a){var c=a+"X",f=a+"Y",g=mr(s),b=g[0][c]-g[1][c],_=g[0][f]-g[1][f];return Yt(b,_)}function xr(s,a){var c=a+"X",f=a+"Y",g=mr(s),b=g[1][c]-g[0][c],_=g[1][f]-g[0][f];return 180*Math.atan2(_,b)/Math.PI}function Wo(s){return m.string(s.pointerType)?s.pointerType:m.number(s.pointerType)?[void 0,void 0,"touch","pen","mouse"][s.pointerType]:/touch/.test(s.type||"")||s instanceof H.Touch?"touch":"mouse"}function Ho(s){var a=m.func(s.composedPath)?s.composedPath():s.path;return[Ze(a?a[0]:s.target),Ze(s.currentTarget)]}var Mn=function(){function s(a){o(this,s),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=a}return l(s,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),s}();Object.defineProperty(Mn.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var Yo=function(s,a){for(var c=0;c<a.length;c++){var f=a[c];s.push(f)}return s},Ko=function(s){return Yo([],s)},Xt=function(s,a){for(var c=0;c<s.length;c++)if(a(s[c],c,s))return c;return-1},Vt=function(s,a){return s[Xt(s,a)]},It=function(s){d(c,s);var a=w(c);function c(f,g,b){var _;o(this,c),(_=a.call(this,g._interaction)).dropzone=void 0,_.dragEvent=void 0,_.relatedTarget=void 0,_.draggable=void 0,_.propagationStopped=!1,_.immediatePropagationStopped=!1;var D=b==="dragleave"?f.prev:f.cur,T=D.element,O=D.dropzone;return _.type=b,_.target=T,_.currentTarget=T,_.dropzone=O,_.dragEvent=g,_.relatedTarget=g.target,_.draggable=g.interactable,_.timeStamp=g.timeStamp,_}return l(c,[{key:"reject",value:function(){var f=this,g=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&g.cur.dropzone===this.dropzone&&g.cur.element===this.target)if(g.prev.dropzone=this.dropzone,g.prev.element=this.target,g.rejected=!0,g.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var b=g.activeDrops,_=Xt(b,function(T){var O=T.dropzone,L=T.element;return O===f.dropzone&&L===f.target});g.activeDrops.splice(_,1);var D=new c(g,this.dragEvent,"dropdeactivate");D.dropzone=this.dropzone,D.target=this.target,this.dropzone.fire(D)}else this.dropzone.fire(new c(g,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),c}(Mn);function Xo(s,a){for(var c=0,f=s.slice();c<f.length;c++){var g=f[c],b=g.dropzone,_=g.element;a.dropzone=b,a.target=_,b.fire(a),a.propagationStopped=a.immediatePropagationStopped=!1}}function Er(s,a){for(var c=function(b,_){for(var D=[],T=0,O=b.interactables.list;T<O.length;T++){var L=O[T];if(L.options.drop.enabled){var R=L.options.drop.accept;if(!(m.element(R)&&R!==_||m.string(R)&&!le(_,R)||m.func(R)&&!R({dropzone:L,draggableElement:_})))for(var B=0,W=L.getAllElements();B<W.length;B++){var F=W[B];F!==_&&D.push({dropzone:L,element:F,rect:L.getRect(F)})}}}return D}(s,a),f=0;f<c.length;f++){var g=c[f];g.rect=g.dropzone.getRect(g.element)}return c}function Vo(s,a,c){for(var f=s.dropState,g=s.interactable,b=s.element,_=[],D=0,T=f.activeDrops;D<T.length;D++){var O=T[D],L=O.dropzone,R=O.element,B=O.rect,W=L.dropCheck(a,c,g,b,R,B);_.push(W?R:null)}var F=function(Y){for(var Z,V,ee,ae=[],ce=0;ce<Y.length;ce++){var ie=Y[ce],se=Y[Z];if(ie&&ce!==Z)if(se){var Se=ge(ie),fe=ge(se);if(Se!==ie.ownerDocument)if(fe!==ie.ownerDocument)if(Se!==fe){ae=ae.length?ae:ye(se);var De=void 0;if(se instanceof H.HTMLElement&&ie instanceof H.SVGElement&&!(ie instanceof H.SVGSVGElement)){if(ie===fe)continue;De=ie.ownerSVGElement}else De=ie;for(var Oe=ye(De,se.ownerDocument),ot=0;Oe[ot]&&Oe[ot]===ae[ot];)ot++;var Gn=[Oe[ot-1],Oe[ot],ae[ot]];if(Gn[0])for(var nn=Gn[0].lastChild;nn;){if(nn===Gn[1]){Z=ce,ae=Oe;break}if(nn===Gn[2])break;nn=nn.previousSibling}}else ee=se,(parseInt(x(V=ie).getComputedStyle(V).zIndex,10)||0)>=(parseInt(x(ee).getComputedStyle(ee).zIndex,10)||0)&&(Z=ce);else Z=ce}else Z=ce}return Z}(_);return f.activeDrops[F]||null}function _r(s,a,c){var f=s.dropState,g={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return c.type==="dragstart"&&(g.activate=new It(f,c,"dropactivate"),g.activate.target=null,g.activate.dropzone=null),c.type==="dragend"&&(g.deactivate=new It(f,c,"dropdeactivate"),g.deactivate.target=null,g.deactivate.dropzone=null),f.rejected||(f.cur.element!==f.prev.element&&(f.prev.dropzone&&(g.leave=new It(f,c,"dragleave"),c.dragLeave=g.leave.target=f.prev.element,c.prevDropzone=g.leave.dropzone=f.prev.dropzone),f.cur.dropzone&&(g.enter=new It(f,c,"dragenter"),c.dragEnter=f.cur.element,c.dropzone=f.cur.dropzone)),c.type==="dragend"&&f.cur.dropzone&&(g.drop=new It(f,c,"drop"),c.dropzone=f.cur.dropzone,c.relatedTarget=f.cur.element),c.type==="dragmove"&&f.cur.dropzone&&(g.move=new It(f,c,"dropmove"),c.dropzone=f.cur.dropzone)),g}function Sr(s,a){var c=s.dropState,f=c.activeDrops,g=c.cur,b=c.prev;a.leave&&b.dropzone.fire(a.leave),a.enter&&g.dropzone.fire(a.enter),a.move&&g.dropzone.fire(a.move),a.drop&&g.dropzone.fire(a.drop),a.deactivate&&Xo(f,a.deactivate),c.prev.dropzone=g.dropzone,c.prev.element=g.element}function Qo(s,a){var c=s.interaction,f=s.iEvent,g=s.event;if(f.type==="dragmove"||f.type==="dragend"){var b=c.dropState;a.dynamicDrop&&(b.activeDrops=Er(a,c.element));var _=f,D=Vo(c,_,g);b.rejected=b.rejected&&!!D&&D.dropzone===b.cur.dropzone&&D.element===b.cur.element,b.cur.dropzone=D&&D.dropzone,b.cur.element=D&&D.element,b.events=_r(c,0,_)}}var Zo={id:"actions/drop",install:function(s){var a=s.actions,c=s.interactStatic,f=s.Interactable,g=s.defaults;s.usePlugin(G),f.prototype.dropzone=function(b){return function(_,D){if(m.object(D)){if(_.options.drop.enabled=D.enabled!==!1,D.listeners){var T=Ge(D.listeners),O=Object.keys(T).reduce(function(R,B){return R[/^(enter|leave)/.test(B)?"drag".concat(B):/^(activate|deactivate|move)/.test(B)?"drop".concat(B):B]=T[B],R},{}),L=_.options.drop.listeners;L&&_.off(L),_.on(O),_.options.drop.listeners=O}return m.func(D.ondrop)&&_.on("drop",D.ondrop),m.func(D.ondropactivate)&&_.on("dropactivate",D.ondropactivate),m.func(D.ondropdeactivate)&&_.on("dropdeactivate",D.ondropdeactivate),m.func(D.ondragenter)&&_.on("dragenter",D.ondragenter),m.func(D.ondragleave)&&_.on("dragleave",D.ondragleave),m.func(D.ondropmove)&&_.on("dropmove",D.ondropmove),/^(pointer|center)$/.test(D.overlap)?_.options.drop.overlap=D.overlap:m.number(D.overlap)&&(_.options.drop.overlap=Math.max(Math.min(1,D.overlap),0)),"accept"in D&&(_.options.drop.accept=D.accept),"checker"in D&&(_.options.drop.checker=D.checker),_}return m.bool(D)?(_.options.drop.enabled=D,_):_.options.drop}(this,b)},f.prototype.dropCheck=function(b,_,D,T,O,L){return function(R,B,W,F,Y,Z,V){var ee=!1;if(!(V=V||R.getRect(Z)))return!!R.options.drop.checker&&R.options.drop.checker(B,W,ee,R,Z,F,Y);var ae=R.options.drop.overlap;if(ae==="pointer"){var ce=ft(F,Y,"drag"),ie=Uo(B);ie.x+=ce.x,ie.y+=ce.y;var se=ie.x>V.left&&ie.x<V.right,Se=ie.y>V.top&&ie.y<V.bottom;ee=se&&Se}var fe=F.getRect(Y);if(fe&&ae==="center"){var De=fe.left+fe.width/2,Oe=fe.top+fe.height/2;ee=De>=V.left&&De<=V.right&&Oe>=V.top&&Oe<=V.bottom}return fe&&m.number(ae)&&(ee=Math.max(0,Math.min(V.right,fe.right)-Math.max(V.left,fe.left))*Math.max(0,Math.min(V.bottom,fe.bottom)-Math.max(V.top,fe.top))/(fe.width*fe.height)>=ae),R.options.drop.checker&&(ee=R.options.drop.checker(B,W,ee,R,Z,F,Y)),ee}(this,b,_,D,T,O,L)},c.dynamicDrop=function(b){return m.bool(b)?(s.dynamicDrop=b,c):s.dynamicDrop},J(a.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),a.methodDict.drop="dropzone",s.dynamicDrop=!1,g.actions.drop=Zo.defaults},listeners:{"interactions:before-action-start":function(s){var a=s.interaction;a.prepared.name==="drag"&&(a.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(s,a){var c=s.interaction,f=(s.event,s.iEvent);if(c.prepared.name==="drag"){var g=c.dropState;g.activeDrops=[],g.events={},g.activeDrops=Er(a,c.element),g.events=_r(c,0,f),g.events.activate&&(Xo(g.activeDrops,g.events.activate),a.fire("actions/drop:start",{interaction:c,dragEvent:f}))}},"interactions:action-move":Qo,"interactions:after-action-move":function(s,a){var c=s.interaction,f=s.iEvent;if(c.prepared.name==="drag"){var g=c.dropState;Sr(c,g.events),a.fire("actions/drop:move",{interaction:c,dragEvent:f}),g.events={}}},"interactions:action-end":function(s,a){if(s.interaction.prepared.name==="drag"){var c=s.interaction,f=s.iEvent;Qo(s,a),Sr(c,c.dropState.events),a.fire("actions/drop:end",{interaction:c,dragEvent:f})}},"interactions:stop":function(s){var a=s.interaction;if(a.prepared.name==="drag"){var c=a.dropState;c&&(c.activeDrops=null,c.events=null,c.cur.dropzone=null,c.cur.element=null,c.prev.dropzone=null,c.prev.element=null,c.rejected=!1)}}},getActiveDrops:Er,getDrop:Vo,getDropEvents:_r,fireDropEvents:Sr,filterEventType:function(s){return s.search("drag")===0||s.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},jc=Zo;function Ar(s){var a=s.interaction,c=s.iEvent,f=s.phase;if(a.prepared.name==="gesture"){var g=a.pointers.map(function(O){return O.pointer}),b=f==="start",_=f==="end",D=a.interactable.options.deltaSource;if(c.touches=[g[0],g[1]],b)c.distance=br(g,D),c.box=wr(g),c.scale=1,c.ds=0,c.angle=xr(g,D),c.da=0,a.gesture.startDistance=c.distance,a.gesture.startAngle=c.angle;else if(_||a.pointers.length<2){var T=a.prevEvent;c.distance=T.distance,c.box=T.box,c.scale=T.scale,c.ds=0,c.angle=T.angle,c.da=0}else c.distance=br(g,D),c.box=wr(g),c.scale=c.distance/a.gesture.startDistance,c.angle=xr(g,D),c.ds=c.scale-a.gesture.scale,c.da=c.angle-a.gesture.angle;a.gesture.distance=c.distance,a.gesture.angle=c.angle,m.number(c.scale)&&c.scale!==1/0&&!isNaN(c.scale)&&(a.gesture.scale=c.scale)}}var kr={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(s){var a=s.actions,c=s.Interactable,f=s.defaults;c.prototype.gesturable=function(g){return m.object(g)?(this.options.gesture.enabled=g.enabled!==!1,this.setPerAction("gesture",g),this.setOnEvents("gesture",g),this):m.bool(g)?(this.options.gesture.enabled=g,this):this.options.gesture},a.map.gesture=kr,a.methodDict.gesture="gesturable",f.actions.gesture=kr.defaults},listeners:{"interactions:action-start":Ar,"interactions:action-move":Ar,"interactions:action-end":Ar,"interactions:new":function(s){s.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(s){if(!(s.interaction.pointers.length<2)){var a=s.interactable.options.gesture;if(a&&a.enabled)return s.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(s){return s.search("gesture")===0}},Uc=kr;function Fc(s,a,c,f,g,b,_){if(!a)return!1;if(a===!0){var D=m.number(b.width)?b.width:b.right-b.left,T=m.number(b.height)?b.height:b.bottom-b.top;if(_=Math.min(_,Math.abs((s==="left"||s==="right"?D:T)/2)),D<0&&(s==="left"?s="right":s==="right"&&(s="left")),T<0&&(s==="top"?s="bottom":s==="bottom"&&(s="top")),s==="left"){var O=D>=0?b.left:b.right;return c.x<O+_}if(s==="top"){var L=T>=0?b.top:b.bottom;return c.y<L+_}if(s==="right")return c.x>(D>=0?b.right:b.left)-_;if(s==="bottom")return c.y>(T>=0?b.bottom:b.top)-_}return!!m.element(f)&&(m.element(a)?a===f:Ee(f,a,g))}function Jo(s){var a=s.iEvent,c=s.interaction;if(c.prepared.name==="resize"&&c.resizeAxes){var f=a;c.interactable.options.resize.square?(c.resizeAxes==="y"?f.delta.x=f.delta.y:f.delta.y=f.delta.x,f.axes="xy"):(f.axes=c.resizeAxes,c.resizeAxes==="x"?f.delta.y=0:c.resizeAxes==="y"&&(f.delta.x=0))}}var rt,Et,it={id:"actions/resize",before:["actions/drag"],install:function(s){var a=s.actions,c=s.browser,f=s.Interactable,g=s.defaults;it.cursors=function(b){return b.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(c),it.defaultMargin=c.supportsTouch||c.supportsPointerEvent?20:10,f.prototype.resizable=function(b){return function(_,D,T){return m.object(D)?(_.options.resize.enabled=D.enabled!==!1,_.setPerAction("resize",D),_.setOnEvents("resize",D),m.string(D.axis)&&/^x$|^y$|^xy$/.test(D.axis)?_.options.resize.axis=D.axis:D.axis===null&&(_.options.resize.axis=T.defaults.actions.resize.axis),m.bool(D.preserveAspectRatio)?_.options.resize.preserveAspectRatio=D.preserveAspectRatio:m.bool(D.square)&&(_.options.resize.square=D.square),_):m.bool(D)?(_.options.resize.enabled=D,_):_.options.resize}(this,b,s)},a.map.resize=it,a.methodDict.resize="resizable",g.actions.resize=it.defaults},listeners:{"interactions:new":function(s){s.interaction.resizeAxes="xy"},"interactions:action-start":function(s){(function(a){var c=a.iEvent,f=a.interaction;if(f.prepared.name==="resize"&&f.prepared.edges){var g=c,b=f.rect;f._rects={start:J({},b),corrected:J({},b),previous:J({},b),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},g.edges=f.prepared.edges,g.rect=f._rects.corrected,g.deltaRect=f._rects.delta}})(s),Jo(s)},"interactions:action-move":function(s){(function(a){var c=a.iEvent,f=a.interaction;if(f.prepared.name==="resize"&&f.prepared.edges){var g=c,b=f.interactable.options.resize.invert,_=b==="reposition"||b==="negate",D=f.rect,T=f._rects,O=T.start,L=T.corrected,R=T.delta,B=T.previous;if(J(B,L),_){if(J(L,D),b==="reposition"){if(L.top>L.bottom){var W=L.top;L.top=L.bottom,L.bottom=W}if(L.left>L.right){var F=L.left;L.left=L.right,L.right=F}}}else L.top=Math.min(D.top,O.bottom),L.bottom=Math.max(D.bottom,O.top),L.left=Math.min(D.left,O.right),L.right=Math.max(D.right,O.left);for(var Y in L.width=L.right-L.left,L.height=L.bottom-L.top,L)R[Y]=L[Y]-B[Y];g.edges=f.prepared.edges,g.rect=L,g.deltaRect=R}})(s),Jo(s)},"interactions:action-end":function(s){var a=s.iEvent,c=s.interaction;if(c.prepared.name==="resize"&&c.prepared.edges){var f=a;f.edges=c.prepared.edges,f.rect=c._rects.corrected,f.deltaRect=c._rects.delta}},"auto-start:check":function(s){var a=s.interaction,c=s.interactable,f=s.element,g=s.rect,b=s.buttons;if(g){var _=J({},a.coords.cur.page),D=c.options.resize;if(D&&D.enabled&&(!a.pointerIsDown||!/mouse|pointer/.test(a.pointerType)||b&D.mouseButtons)){if(m.object(D.edges)){var T={left:!1,right:!1,top:!1,bottom:!1};for(var O in T)T[O]=Fc(O,D.edges[O],_,a._latestPointer.eventTarget,f,g,D.margin||it.defaultMargin);T.left=T.left&&!T.right,T.top=T.top&&!T.bottom,(T.left||T.right||T.top||T.bottom)&&(s.action={name:"resize",edges:T})}else{var L=D.axis!=="y"&&_.x>g.right-it.defaultMargin,R=D.axis!=="x"&&_.y>g.bottom-it.defaultMargin;(L||R)&&(s.action={name:"resize",axes:(L?"x":"")+(R?"y":"")})}return!s.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(s){var a=s.edges,c=s.axis,f=s.name,g=it.cursors,b=null;if(c)b=g[f+c];else if(a){for(var _="",D=0,T=["top","bottom","left","right"];D<T.length;D++){var O=T[D];a[O]&&(_+=O)}b=g[_]}return b},filterEventType:function(s){return s.search("resize")===0},defaultMargin:null},Wc=it,Hc={id:"actions",install:function(s){s.usePlugin(Uc),s.usePlugin(Wc),s.usePlugin(G),s.usePlugin(jc)}},ea=0,pt={request:function(s){return rt(s)},cancel:function(s){return Et(s)},init:function(s){if(rt=s.requestAnimationFrame,Et=s.cancelAnimationFrame,!rt)for(var a=["ms","moz","webkit","o"],c=0;c<a.length;c++){var f=a[c];rt=s["".concat(f,"RequestAnimationFrame")],Et=s["".concat(f,"CancelAnimationFrame")]||s["".concat(f,"CancelRequestAnimationFrame")]}rt=rt&&rt.bind(s),Et=Et&&Et.bind(s),rt||(rt=function(g){var b=Date.now(),_=Math.max(0,16-(b-ea)),D=s.setTimeout(function(){g(b+_)},_);return ea=b+_,D},Et=function(g){return clearTimeout(g)})}},oe={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(s){oe.isScrolling=!0,pt.cancel(oe.i),s.autoScroll=oe,oe.interaction=s,oe.prevTime=oe.now(),oe.i=pt.request(oe.scroll)},stop:function(){oe.isScrolling=!1,oe.interaction&&(oe.interaction.autoScroll=null),pt.cancel(oe.i)},scroll:function(){var s=oe.interaction,a=s.interactable,c=s.element,f=s.prepared.name,g=a.options[f].autoScroll,b=ta(g.container,a,c),_=oe.now(),D=(_-oe.prevTime)/1e3,T=g.speed*D;if(T>=1){var O={x:oe.x*T,y:oe.y*T};if(O.x||O.y){var L=na(b);m.window(b)?b.scrollBy(O.x,O.y):b&&(b.scrollLeft+=O.x,b.scrollTop+=O.y);var R=na(b),B={x:R.x-L.x,y:R.y-L.y};(B.x||B.y)&&a.fire({type:"autoscroll",target:c,interactable:a,delta:B,interaction:s,container:b})}oe.prevTime=_}oe.isScrolling&&(pt.cancel(oe.i),oe.i=pt.request(oe.scroll))},check:function(s,a){var c;return(c=s.options[a].autoScroll)==null?void 0:c.enabled},onInteractionMove:function(s){var a=s.interaction,c=s.pointer;if(a.interacting()&&oe.check(a.interactable,a.prepared.name))if(a.simulation)oe.x=oe.y=0;else{var f,g,b,_,D=a.interactable,T=a.element,O=a.prepared.name,L=D.options[O].autoScroll,R=ta(L.container,D,T);if(m.window(R))_=c.clientX<oe.margin,f=c.clientY<oe.margin,g=c.clientX>R.innerWidth-oe.margin,b=c.clientY>R.innerHeight-oe.margin;else{var B=dt(R);_=c.clientX<B.left+oe.margin,f=c.clientY<B.top+oe.margin,g=c.clientX>B.right-oe.margin,b=c.clientY>B.bottom-oe.margin}oe.x=g?1:_?-1:0,oe.y=b?1:f?-1:0,oe.isScrolling||(oe.margin=L.margin,oe.speed=L.speed,oe.start(a))}}};function ta(s,a,c){return(m.string(s)?bt(s,a,c):s)||x(c)}function na(s){return m.window(s)&&(s=window.document.body),{x:s.scrollLeft,y:s.scrollTop}}var Yc={id:"auto-scroll",install:function(s){var a=s.defaults,c=s.actions;s.autoScroll=oe,oe.now=function(){return s.now()},c.phaselessTypes.autoscroll=!0,a.perAction.autoScroll=oe.defaults},listeners:{"interactions:new":function(s){s.interaction.autoScroll=null},"interactions:destroy":function(s){s.interaction.autoScroll=null,oe.stop(),oe.interaction&&(oe.interaction=null)},"interactions:stop":oe.stop,"interactions:action-move":function(s){return oe.onInteractionMove(s)}}},Kc=Yc;function Qt(s,a){var c=!1;return function(){return c||(A.console.warn(a),c=!0),s.apply(this,arguments)}}function Nr(s,a){return s.name=a.name,s.axis=a.axis,s.edges=a.edges,s}function Xc(s){return m.bool(s)?(this.options.styleCursor=s,this):s===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Vc(s){return m.func(s)?(this.options.actionChecker=s,this):s===null?(delete this.options.actionChecker,this):this.options.actionChecker}var Qc={id:"auto-start/interactableMethods",install:function(s){var a=s.Interactable;a.prototype.getAction=function(c,f,g,b){var _=function(D,T,O,L,R){var B=D.getRect(L),W=T.buttons||{0:1,1:4,3:8,4:16}[T.button],F={action:null,interactable:D,interaction:O,element:L,rect:B,buttons:W};return R.fire("auto-start:check",F),F.action}(this,f,g,b,s);return this.options.actionChecker?this.options.actionChecker(c,f,_,this,b,g):_},a.prototype.ignoreFrom=Qt(function(c){return this._backCompatOption("ignoreFrom",c)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),a.prototype.allowFrom=Qt(function(c){return this._backCompatOption("allowFrom",c)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),a.prototype.actionChecker=Vc,a.prototype.styleCursor=Xc}};function ra(s,a,c,f,g){return a.testIgnoreAllow(a.options[s.name],c,f)&&a.options[s.name].enabled&&Dn(a,c,s,g)?s:null}function Zc(s,a,c,f,g,b,_){for(var D=0,T=f.length;D<T;D++){var O=f[D],L=g[D],R=O.getAction(a,c,s,L);if(R){var B=ra(R,O,L,b,_);if(B)return{action:B,interactable:O,element:L}}}return{action:null,interactable:null,element:null}}function ia(s,a,c,f,g){var b=[],_=[],D=f;function T(L){b.push(L),_.push(D)}for(;m.element(D);){b=[],_=[],g.interactables.forEachMatch(D,T);var O=Zc(s,a,c,b,_,f,g);if(O.action&&!O.interactable.options[O.action.name].manualStart)return O;D=ue(D)}return{action:null,interactable:null,element:null}}function oa(s,a,c){var f=a.action,g=a.interactable,b=a.element;f=f||{name:null},s.interactable=g,s.element=b,Nr(s.prepared,f),s.rect=g&&f.name?g.getRect(b):null,sa(s,c),c.fire("autoStart:prepared",{interaction:s})}function Dn(s,a,c,f){var g=s.options,b=g[c.name].max,_=g[c.name].maxPerElement,D=f.autoStart.maxInteractions,T=0,O=0,L=0;if(!(b&&_&&D))return!1;for(var R=0,B=f.interactions.list;R<B.length;R++){var W=B[R],F=W.prepared.name;if(W.interacting()&&(++T>=D||W.interactable===s&&((O+=F===c.name?1:0)>=b||W.element===a&&(L++,F===c.name&&L>=_))))return!1}return D>0}function aa(s,a){return m.number(s)?(a.autoStart.maxInteractions=s,this):a.autoStart.maxInteractions}function Mr(s,a,c){var f=c.autoStart.cursorElement;f&&f!==s&&(f.style.cursor=""),s.ownerDocument.documentElement.style.cursor=a,s.style.cursor=a,c.autoStart.cursorElement=a?s:null}function sa(s,a){var c=s.interactable,f=s.element,g=s.prepared;if(s.pointerType==="mouse"&&c&&c.options.styleCursor){var b="";if(g.name){var _=c.options[g.name].cursorChecker;b=m.func(_)?_(g,c,f,s._interacting):a.actions.map[g.name].getCursor(g)}Mr(s.element,b||"",a)}else a.autoStart.cursorElement&&Mr(a.autoStart.cursorElement,"",a)}var Jc={id:"auto-start/base",before:["actions"],install:function(s){var a=s.interactStatic,c=s.defaults;s.usePlugin(Qc),c.base.actionChecker=null,c.base.styleCursor=!0,J(c.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),a.maxInteractions=function(f){return aa(f,s)},s.autoStart={maxInteractions:1/0,withinInteractionLimit:Dn,cursorElement:null}},listeners:{"interactions:down":function(s,a){var c=s.interaction,f=s.pointer,g=s.event,b=s.eventTarget;c.interacting()||oa(c,ia(c,f,g,b,a),a)},"interactions:move":function(s,a){(function(c,f){var g=c.interaction,b=c.pointer,_=c.event,D=c.eventTarget;g.pointerType!=="mouse"||g.pointerIsDown||g.interacting()||oa(g,ia(g,b,_,D,f),f)})(s,a),function(c,f){var g=c.interaction;if(g.pointerIsDown&&!g.interacting()&&g.pointerWasMoved&&g.prepared.name){f.fire("autoStart:before-start",c);var b=g.interactable,_=g.prepared.name;_&&b&&(b.options[_].manualStart||!Dn(b,g.element,g.prepared,f)?g.stop():(g.start(g.prepared,b,g.element),sa(g,f)))}}(s,a)},"interactions:stop":function(s,a){var c=s.interaction,f=c.interactable;f&&f.options.styleCursor&&Mr(c.element,"",a)}},maxInteractions:aa,withinInteractionLimit:Dn,validateAction:ra},Dr=Jc,el={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(s,a){var c=s.interaction,f=s.eventTarget,g=s.dx,b=s.dy;if(c.prepared.name==="drag"){var _=Math.abs(g),D=Math.abs(b),T=c.interactable.options.drag,O=T.startAxis,L=_>D?"x":_<D?"y":"xy";if(c.prepared.axis=T.lockAxis==="start"?L[0]:T.lockAxis,L!=="xy"&&O!=="xy"&&O!==L){c.prepared.name=null;for(var R=f,B=function(F){if(F!==c.interactable){var Y=c.interactable.options.drag;if(!Y.manualStart&&F.testIgnoreAllow(Y,R,f)){var Z=F.getAction(c.downPointer,c.downEvent,c,R);if(Z&&Z.name==="drag"&&function(V,ee){if(!ee)return!1;var ae=ee.options.drag.startAxis;return V==="xy"||ae==="xy"||ae===V}(L,F)&&Dr.validateAction(Z,F,R,f,a))return F}}};m.element(R);){var W=a.interactables.forEachMatch(R,B);if(W){c.prepared.name="drag",c.interactable=W,c.element=R;break}R=ue(R)}}}}}};function Cr(s){var a=s.prepared&&s.prepared.name;if(!a)return null;var c=s.interactable.options;return c[a].hold||c[a].delay}var tl={id:"auto-start/hold",install:function(s){var a=s.defaults;s.usePlugin(Dr),a.perAction.hold=0,a.perAction.delay=0},listeners:{"interactions:new":function(s){s.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(s){var a=s.interaction,c=Cr(a);c>0&&(a.autoStartHoldTimer=setTimeout(function(){a.start(a.prepared,a.interactable,a.element)},c))},"interactions:move":function(s){var a=s.interaction,c=s.duplicate;a.autoStartHoldTimer&&a.pointerWasMoved&&!c&&(clearTimeout(a.autoStartHoldTimer),a.autoStartHoldTimer=null)},"autoStart:before-start":function(s){var a=s.interaction;Cr(a)>0&&(a.prepared.name=null)}},getHoldDuration:Cr},nl=tl,rl={id:"auto-start",install:function(s){s.usePlugin(Dr),s.usePlugin(nl),s.usePlugin(el)}},il=function(s){return/^(always|never|auto)$/.test(s)?(this.options.preventDefault=s,this):m.bool(s)?(this.options.preventDefault=s?"always":"never",this):this.options.preventDefault};function ol(s){var a=s.interaction,c=s.event;a.interactable&&a.interactable.checkAndPreventDefault(c)}var ua={id:"core/interactablePreventDefault",install:function(s){var a=s.Interactable;a.prototype.preventDefault=il,a.prototype.checkAndPreventDefault=function(c){return function(f,g,b){var _=f.options.preventDefault;if(_!=="never")if(_!=="always"){if(g.events.supportsPassive&&/^touch(start|move)$/.test(b.type)){var D=x(b.target).document,T=g.getDocOptions(D);if(!T||!T.events||T.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(b.type)||m.element(b.target)&&le(b.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||b.preventDefault()}else b.preventDefault()}(this,s,c)},s.interactions.docEvents.push({type:"dragstart",listener:function(c){for(var f=0,g=s.interactions.list;f<g.length;f++){var b=g[f];if(b.element&&(b.element===c.target||ne(b.element,c.target)))return void b.interactable.checkAndPreventDefault(c)}}})},listeners:["down","move","up","cancel"].reduce(function(s,a){return s["interactions:".concat(a)]=ol,s},{})};function Cn(s,a){if(a.phaselessTypes[s])return!0;for(var c in a.map)if(s.indexOf(c)===0&&s.substr(c.length)in a.phases)return!0;return!1}function zt(s){var a={};for(var c in s){var f=s[c];m.plainObject(f)?a[c]=zt(f):m.array(f)?a[c]=Ko(f):a[c]=f}return a}var Ir=function(){function s(a){o(this,s),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=a,this.result=In(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return l(s,[{key:"start",value:function(a,c){var f,g,b=a.phase,_=this.interaction,D=function(O){var L=O.interactable.options[O.prepared.name],R=L.modifiers;return R&&R.length?R:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(B){var W=L[B];return W&&W.enabled&&{options:W,methods:W._methods}}).filter(function(B){return!!B})}(_);this.prepareStates(D),this.startEdges=J({},_.edges),this.edges=J({},this.startEdges),this.startOffset=(f=_.rect,g=c,f?{left:g.x-f.left,top:g.y-f.top,right:f.right-g.x,bottom:f.bottom-g.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var T=this.fillArg({phase:b,pageCoords:c,preEnd:!1});return this.result=In(),this.startAll(T),this.result=this.setAll(T)}},{key:"fillArg",value:function(a){var c=this.interaction;return a.interaction=c,a.interactable=c.interactable,a.element=c.element,a.rect||(a.rect=c.rect),a.edges||(a.edges=this.startEdges),a.startOffset=this.startOffset,a}},{key:"startAll",value:function(a){for(var c=0,f=this.states;c<f.length;c++){var g=f[c];g.methods.start&&(a.state=g,g.methods.start(a))}}},{key:"setAll",value:function(a){var c=a.phase,f=a.preEnd,g=a.skipModifiers,b=a.rect,_=a.edges;a.coords=J({},a.pageCoords),a.rect=J({},b),a.edges=J({},_);for(var D=g?this.states.slice(g):this.states,T=In(a.coords,a.rect),O=0;O<D.length;O++){var L,R=D[O],B=R.options,W=J({},a.coords),F=null;(L=R.methods)!=null&&L.set&&this.shouldDo(B,f,c)&&(a.state=R,F=R.methods.set(a),nt(a.edges,a.rect,{x:a.coords.x-W.x,y:a.coords.y-W.y})),T.eventProps.push(F)}J(this.edges,a.edges),T.delta.x=a.coords.x-a.pageCoords.x,T.delta.y=a.coords.y-a.pageCoords.y,T.rectDelta.left=a.rect.left-b.left,T.rectDelta.right=a.rect.right-b.right,T.rectDelta.top=a.rect.top-b.top,T.rectDelta.bottom=a.rect.bottom-b.bottom;var Y=this.result.coords,Z=this.result.rect;if(Y&&Z){var V=T.rect.left!==Z.left||T.rect.right!==Z.right||T.rect.top!==Z.top||T.rect.bottom!==Z.bottom;T.changed=V||Y.x!==T.coords.x||Y.y!==T.coords.y}return T}},{key:"applyToInteraction",value:function(a){var c=this.interaction,f=a.phase,g=c.coords.cur,b=c.coords.start,_=this.result,D=this.startDelta,T=_.delta;f==="start"&&J(this.startDelta,_.delta);for(var O=0,L=[[b,D],[g,T]];O<L.length;O++){var R=L[O],B=R[0],W=R[1];B.page.x+=W.x,B.page.y+=W.y,B.client.x+=W.x,B.client.y+=W.y}var F=this.result.rectDelta,Y=a.rect||c.rect;Y.left+=F.left,Y.right+=F.right,Y.top+=F.top,Y.bottom+=F.bottom,Y.width=Y.right-Y.left,Y.height=Y.bottom-Y.top}},{key:"setAndApply",value:function(a){var c=this.interaction,f=a.phase,g=a.preEnd,b=a.skipModifiers,_=this.setAll(this.fillArg({preEnd:g,phase:f,pageCoords:a.modifiedCoords||c.coords.cur.page}));if(this.result=_,!_.changed&&(!b||b<this.states.length)&&c.interacting())return!1;if(a.modifiedCoords){var D=c.coords.cur.page,T={x:a.modifiedCoords.x-D.x,y:a.modifiedCoords.y-D.y};_.coords.x+=T.x,_.coords.y+=T.y,_.delta.x+=T.x,_.delta.y+=T.y}this.applyToInteraction(a)}},{key:"beforeEnd",value:function(a){var c=a.interaction,f=a.event,g=this.states;if(g&&g.length){for(var b=!1,_=0;_<g.length;_++){var D=g[_];a.state=D;var T=D.options,O=D.methods,L=O.beforeEnd&&O.beforeEnd(a);if(L)return this.endResult=L,!1;b=b||!b&&this.shouldDo(T,!0,a.phase,!0)}b&&c.move({event:f,preEnd:!0})}}},{key:"stop",value:function(a){var c=a.interaction;if(this.states&&this.states.length){var f=J({states:this.states,interactable:c.interactable,element:c.element,rect:null},a);this.fillArg(f);for(var g=0,b=this.states;g<b.length;g++){var _=b[g];f.state=_,_.methods.stop&&_.methods.stop(f)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(a){this.states=[];for(var c=0;c<a.length;c++){var f=a[c],g=f.options,b=f.methods,_=f.name;this.states.push({options:g,methods:b,index:c,name:_})}return this.states}},{key:"restoreInteractionCoords",value:function(a){var c=a.interaction,f=c.coords,g=c.rect,b=c.modification;if(b.result){for(var _=b.startDelta,D=b.result,T=D.delta,O=D.rectDelta,L=0,R=[[f.start,_],[f.cur,T]];L<R.length;L++){var B=R[L],W=B[0],F=B[1];W.page.x-=F.x,W.page.y-=F.y,W.client.x-=F.x,W.client.y-=F.y}g.left-=O.left,g.right-=O.right,g.top-=O.top,g.bottom-=O.bottom}}},{key:"shouldDo",value:function(a,c,f,g){return!(!a||a.enabled===!1||g&&!a.endOnly||a.endOnly&&!c||f==="start"&&!a.setStart)}},{key:"copyFrom",value:function(a){this.startOffset=a.startOffset,this.startDelta=a.startDelta,this.startEdges=a.startEdges,this.edges=a.edges,this.states=a.states.map(function(c){return zt(c)}),this.result=In(J({},a.result.coords),J({},a.result.rect))}},{key:"destroy",value:function(){for(var a in this)this[a]=null}}]),s}();function In(s,a){return{rect:a,coords:s,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function gt(s,a){var c=s.defaults,f={start:s.start,set:s.set,beforeEnd:s.beforeEnd,stop:s.stop},g=function(b){var _=b||{};for(var D in _.enabled=_.enabled!==!1,c)D in _||(_[D]=c[D]);var T={options:_,methods:f,name:a,enable:function(){return _.enabled=!0,T},disable:function(){return _.enabled=!1,T}};return T};return a&&typeof a=="string"&&(g._defaults=c,g._methods=f),g}function Zt(s){var a=s.iEvent,c=s.interaction.modification.result;c&&(a.modifiers=c.eventProps)}var al={id:"modifiers/base",before:["actions"],install:function(s){s.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(s){var a=s.interaction;a.modification=new Ir(a)},"interactions:before-action-start":function(s){var a=s.interaction,c=s.interaction.modification;c.start(s,a.coords.start.page),a.edges=c.edges,c.applyToInteraction(s)},"interactions:before-action-move":function(s){var a=s.interaction,c=a.modification,f=c.setAndApply(s);return a.edges=c.edges,f},"interactions:before-action-end":function(s){var a=s.interaction,c=a.modification,f=c.beforeEnd(s);return a.edges=c.startEdges,f},"interactions:action-start":Zt,"interactions:action-move":Zt,"interactions:action-end":Zt,"interactions:after-action-start":function(s){return s.interaction.modification.restoreInteractionCoords(s)},"interactions:after-action-move":function(s){return s.interaction.modification.restoreInteractionCoords(s)},"interactions:stop":function(s){return s.interaction.modification.stop(s)}}},ca=al,la={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},zr=function(s){d(c,s);var a=w(c);function c(f,g,b,_,D,T,O){var L;o(this,c),(L=a.call(this,f)).relatedTarget=null,L.screenX=void 0,L.screenY=void 0,L.button=void 0,L.buttons=void 0,L.ctrlKey=void 0,L.shiftKey=void 0,L.altKey=void 0,L.metaKey=void 0,L.page=void 0,L.client=void 0,L.delta=void 0,L.rect=void 0,L.x0=void 0,L.y0=void 0,L.t0=void 0,L.dt=void 0,L.duration=void 0,L.clientX0=void 0,L.clientY0=void 0,L.velocity=void 0,L.speed=void 0,L.swipe=void 0,L.axes=void 0,L.preEnd=void 0,D=D||f.element;var R=f.interactable,B=(R&&R.options||la).deltaSource,W=ft(R,D,b),F=_==="start",Y=_==="end",Z=F?y(L):f.prevEvent,V=F?f.coords.start:Y?{page:Z.page,client:Z.client,timeStamp:f.coords.cur.timeStamp}:f.coords.cur;return L.page=J({},V.page),L.client=J({},V.client),L.rect=J({},f.rect),L.timeStamp=V.timeStamp,Y||(L.page.x-=W.x,L.page.y-=W.y,L.client.x-=W.x,L.client.y-=W.y),L.ctrlKey=g.ctrlKey,L.altKey=g.altKey,L.shiftKey=g.shiftKey,L.metaKey=g.metaKey,L.button=g.button,L.buttons=g.buttons,L.target=D,L.currentTarget=D,L.preEnd=T,L.type=O||b+(_||""),L.interactable=R,L.t0=F?f.pointers[f.pointers.length-1].downTime:Z.t0,L.x0=f.coords.start.page.x-W.x,L.y0=f.coords.start.page.y-W.y,L.clientX0=f.coords.start.client.x-W.x,L.clientY0=f.coords.start.client.y-W.y,L.delta=F||Y?{x:0,y:0}:{x:L[B].x-Z[B].x,y:L[B].y-Z[B].y},L.dt=f.coords.delta.timeStamp,L.duration=L.timeStamp-L.t0,L.velocity=J({},f.coords.velocity[B]),L.speed=Yt(L.velocity.x,L.velocity.y),L.swipe=Y||_==="inertiastart"?L.getSwipe():null,L}return l(c,[{key:"getSwipe",value:function(){var f=this._interaction;if(f.prevEvent.speed<600||this.timeStamp-f.prevEvent.timeStamp>150)return null;var g=180*Math.atan2(f.prevEvent.velocityY,f.prevEvent.velocityX)/Math.PI;g<0&&(g+=360);var b=112.5<=g&&g<247.5,_=202.5<=g&&g<337.5;return{up:_,down:!_&&22.5<=g&&g<157.5,left:b,right:!b&&(292.5<=g||g<67.5),angle:g,speed:f.prevEvent.speed,velocity:{x:f.prevEvent.velocityX,y:f.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),c}(Mn);Object.defineProperties(zr.prototype,{pageX:{get:function(){return this.page.x},set:function(s){this.page.x=s}},pageY:{get:function(){return this.page.y},set:function(s){this.page.y=s}},clientX:{get:function(){return this.client.x},set:function(s){this.client.x=s}},clientY:{get:function(){return this.client.y},set:function(s){this.client.y=s}},dx:{get:function(){return this.delta.x},set:function(s){this.delta.x=s}},dy:{get:function(){return this.delta.y},set:function(s){this.delta.y=s}},velocityX:{get:function(){return this.velocity.x},set:function(s){this.velocity.x=s}},velocityY:{get:function(){return this.velocity.y},set:function(s){this.velocity.y=s}}});var sl=l(function s(a,c,f,g,b){o(this,s),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=a,this.pointer=c,this.event=f,this.downTime=g,this.downTarget=b}),ul=function(s){return s.interactable="",s.element="",s.prepared="",s.pointerIsDown="",s.pointerWasMoved="",s._proxy="",s}({}),da=function(s){return s.start="",s.move="",s.end="",s.stop="",s.interacting="",s}({}),cl=0,ll=function(){function s(a){var c=this,f=a.pointerType,g=a.scopeFire;o(this,s),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Qt(function(L){this.move(L)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=cl++,this._scopeFire=g,this.pointerType=f;var b=this;this._proxy={};var _=function(L){Object.defineProperty(c._proxy,L,{get:function(){return b[L]}})};for(var D in ul)_(D);var T=function(L){Object.defineProperty(c._proxy,L,{value:function(){return b[L].apply(b,arguments)}})};for(var O in da)T(O);this._scopeFire("interactions:new",{interaction:this})}return l(s,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(a,c,f){var g=this.updatePointer(a,c,f,!0),b=this.pointers[g];this._scopeFire("interactions:down",{pointer:a,event:c,eventTarget:f,pointerIndex:g,pointerInfo:b,type:"down",interaction:this})}},{key:"start",value:function(a,c,f){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(a.name==="gesture"?2:1)||!c.options[a.name].enabled)&&(Nr(this.prepared,a),this.interactable=c,this.element=f,this.rect=c.getRect(f),this.edges=this.prepared.edges?J({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(a,c,f){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(a,c,f,!1);var g,b,_=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(g=this.coords.cur.client.x-this.coords.start.client.x,b=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=Yt(g,b)>this.pointerMoveTolerance);var D,T,O,L=this.getPointerIndex(a),R={pointer:a,pointerIndex:L,pointerInfo:this.pointers[L],event:c,type:"move",eventTarget:f,dx:g,dy:b,duplicate:_,interaction:this};_||(D=this.coords.velocity,T=this.coords.delta,O=Math.max(T.timeStamp/1e3,.001),D.page.x=T.page.x/O,D.page.y=T.page.y/O,D.client.x=T.client.x/O,D.client.y=T.client.y/O,D.timeStamp=O),this._scopeFire("interactions:move",R),_||this.simulation||(this.interacting()&&(R.type=null,this.move(R)),this.pointerWasMoved&&kn(this.coords.prev,this.coords.cur))}},{key:"move",value:function(a){a&&a.event||Bo(this.coords.delta),(a=J({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},a||{})).phase="move",this._doPhase(a)}},{key:"pointerUp",value:function(a,c,f,g){var b=this.getPointerIndex(a);b===-1&&(b=this.updatePointer(a,c,f,!1));var _=/cancel$/i.test(c.type)?"cancel":"up";this._scopeFire("interactions:".concat(_),{pointer:a,pointerIndex:b,pointerInfo:this.pointers[b],event:c,eventTarget:f,type:_,curEventTarget:g,interaction:this}),this.simulation||this.end(c),this.removePointer(a,c)}},{key:"documentBlur",value:function(a){this.end(a),this._scopeFire("interactions:blur",{event:a,type:"blur",interaction:this})}},{key:"end",value:function(a){var c;this._ending=!0,a=a||this._latestPointer.event,this.interacting()&&(c=this._doPhase({event:a,interaction:this,phase:"end"})),this._ending=!1,c===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(a){var c=Kt(a);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Xt(this.pointers,function(f){return f.id===c})}},{key:"getPointerInfo",value:function(a){return this.pointers[this.getPointerIndex(a)]}},{key:"updatePointer",value:function(a,c,f,g){var b,_,D,T=Kt(a),O=this.getPointerIndex(a),L=this.pointers[O];return g=g!==!1&&(g||/(down|start)$/i.test(c.type)),L?L.pointer=a:(L=new sl(T,a,c,null,null),O=this.pointers.length,this.pointers.push(L)),Bc(this.coords.cur,this.pointers.map(function(R){return R.pointer}),this._now()),b=this.coords.delta,_=this.coords.prev,D=this.coords.cur,b.page.x=D.page.x-_.page.x,b.page.y=D.page.y-_.page.y,b.client.x=D.client.x-_.client.x,b.client.y=D.client.y-_.client.y,b.timeStamp=D.timeStamp-_.timeStamp,g&&(this.pointerIsDown=!0,L.downTime=this.coords.cur.timeStamp,L.downTarget=f,An(this.downPointer,a),this.interacting()||(kn(this.coords.start,this.coords.cur),kn(this.coords.prev,this.coords.cur),this.downEvent=c,this.pointerWasMoved=!1)),this._updateLatestPointer(a,c,f),this._scopeFire("interactions:update-pointer",{pointer:a,event:c,eventTarget:f,down:g,pointerInfo:L,pointerIndex:O,interaction:this}),O}},{key:"removePointer",value:function(a,c){var f=this.getPointerIndex(a);if(f!==-1){var g=this.pointers[f];this._scopeFire("interactions:remove-pointer",{pointer:a,event:c,eventTarget:null,pointerIndex:f,pointerInfo:g,interaction:this}),this.pointers.splice(f,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(a,c,f){this._latestPointer.pointer=a,this._latestPointer.event=c,this._latestPointer.eventTarget=f}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(a,c,f,g){return new zr(this,a,this.prepared.name,c,this.element,f,g)}},{key:"_fireEvent",value:function(a){var c;(c=this.interactable)==null||c.fire(a),(!this.prevEvent||a.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=a)}},{key:"_doPhase",value:function(a){var c=a.event,f=a.phase,g=a.preEnd,b=a.type,_=this.rect;if(_&&f==="move"&&(nt(this.edges,_,this.coords.delta[this.interactable.options.deltaSource]),_.width=_.right-_.left,_.height=_.bottom-_.top),this._scopeFire("interactions:before-action-".concat(f),a)===!1)return!1;var D=a.iEvent=this._createPreparedEvent(c,f,g,b);return this._scopeFire("interactions:action-".concat(f),a),f==="start"&&(this.prevEvent=D),this._fireEvent(D),this._scopeFire("interactions:after-action-".concat(f),a),!0}},{key:"_now",value:function(){return Date.now()}}]),s}();function ha(s){fa(s.interaction)}function fa(s){if(!function(c){return!(!c.offset.pending.x&&!c.offset.pending.y)}(s))return!1;var a=s.offset.pending;return Tr(s.coords.cur,a),Tr(s.coords.delta,a),nt(s.edges,s.rect,a),a.x=0,a.y=0,!0}function dl(s){var a=s.x,c=s.y;this.offset.pending.x+=a,this.offset.pending.y+=c,this.offset.total.x+=a,this.offset.total.y+=c}function Tr(s,a){var c=s.page,f=s.client,g=a.x,b=a.y;c.x+=g,c.y+=b,f.x+=g,f.y+=b}da.offsetBy="";var hl={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(s){s.Interaction.prototype.offsetBy=dl},listeners:{"interactions:new":function(s){s.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(s){return function(a){a.pointerIsDown&&(Tr(a.coords.cur,a.offset.total),a.offset.pending.x=0,a.offset.pending.y=0)}(s.interaction)},"interactions:before-action-start":ha,"interactions:before-action-move":ha,"interactions:before-action-end":function(s){var a=s.interaction;if(fa(a))return a.move({offset:!0}),a.end(),!1},"interactions:stop":function(s){var a=s.interaction;a.offset.total.x=0,a.offset.total.y=0,a.offset.pending.x=0,a.offset.pending.y=0}}},pa=hl,fl=function(){function s(a){o(this,s),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=a}return l(s,[{key:"start",value:function(a){var c=this.interaction,f=zn(c);if(!f||!f.enabled)return!1;var g=c.coords.velocity.client,b=Yt(g.x,g.y),_=this.modification||(this.modification=new Ir(c));if(_.copyFrom(c.modification),this.t0=c._now(),this.allowResume=f.allowResume,this.v0=b,this.currentOffset={x:0,y:0},this.startCoords=c.coords.cur.page,this.modifierArg=_.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-c.coords.cur.timeStamp<50&&b>f.minSpeed&&b>f.endSpeed)this.startInertia();else{if(_.result=_.setAll(this.modifierArg),!_.result.changed)return!1;this.startSmoothEnd()}return c.modification.result.rect=null,c.offsetBy(this.targetOffset),c._doPhase({interaction:c,event:a,phase:"inertiastart"}),c.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),c.modification.result.rect=null,this.active=!0,c.simulation=this,!0}},{key:"startInertia",value:function(){var a=this,c=this.interaction.coords.velocity.client,f=zn(this.interaction),g=f.resistance,b=-Math.log(f.endSpeed/this.v0)/g;this.targetOffset={x:(c.x-b)/g,y:(c.y-b)/g},this.te=b,this.lambda_v0=g/this.v0,this.one_ve_v0=1-f.endSpeed/this.v0;var _=this.modification,D=this.modifierArg;D.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},_.result=_.setAll(D),_.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+_.result.delta.x,y:this.targetOffset.y+_.result.delta.y}),this.onNextFrame(function(){return a.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var a=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return a.smoothEndTick()})}},{key:"onNextFrame",value:function(a){var c=this;this.timeout=pt.request(function(){c.active&&a()})}},{key:"inertiaTick",value:function(){var a,c,f,g,b,_,D,T=this,O=this.interaction,L=zn(O).resistance,R=(O._now()-this.t0)/1e3;if(R<this.te){var B,W=1-(Math.exp(-L*R)-this.lambda_v0)/this.one_ve_v0;this.isModified?(a=0,c=0,f=this.targetOffset.x,g=this.targetOffset.y,b=this.modifiedOffset.x,_=this.modifiedOffset.y,B={x:ga(D=W,a,f,b),y:ga(D,c,g,_)}):B={x:this.targetOffset.x*W,y:this.targetOffset.y*W};var F={x:B.x-this.currentOffset.x,y:B.y-this.currentOffset.y};this.currentOffset.x+=F.x,this.currentOffset.y+=F.y,O.offsetBy(F),O.move(),this.onNextFrame(function(){return T.inertiaTick()})}else O.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var a=this,c=this.interaction,f=c._now()-this.t0,g=zn(c).smoothEndDuration;if(f<g){var b={x:va(f,0,this.targetOffset.x,g),y:va(f,0,this.targetOffset.y,g)},_={x:b.x-this.currentOffset.x,y:b.y-this.currentOffset.y};this.currentOffset.x+=_.x,this.currentOffset.y+=_.y,c.offsetBy(_),c.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return a.smoothEndTick()})}else c.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(a){var c=a.pointer,f=a.event,g=a.eventTarget,b=this.interaction;b.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),b.updatePointer(c,f,g,!0),b._doPhase({interaction:b,event:f,phase:"resume"}),kn(b.coords.prev,b.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,pt.cancel(this.timeout)}}]),s}();function zn(s){var a=s.interactable,c=s.prepared;return a&&a.options&&c.name&&a.options[c.name].inertia}var pl={id:"inertia",before:["modifiers","actions"],install:function(s){var a=s.defaults;s.usePlugin(pa),s.usePlugin(ca),s.actions.phases.inertiastart=!0,s.actions.phases.resume=!0,a.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(s){var a=s.interaction;a.inertia=new fl(a)},"interactions:before-action-end":function(s){var a=s.interaction,c=s.event;return(!a._interacting||a.simulation||!a.inertia.start(c))&&null},"interactions:down":function(s){var a=s.interaction,c=s.eventTarget,f=a.inertia;if(f.active)for(var g=c;m.element(g);){if(g===a.element){f.resume(s);break}g=ue(g)}},"interactions:stop":function(s){var a=s.interaction.inertia;a.active&&a.stop()},"interactions:before-action-resume":function(s){var a=s.interaction.modification;a.stop(s),a.start(s,s.interaction.coords.cur.page),a.applyToInteraction(s)},"interactions:before-action-inertiastart":function(s){return s.interaction.modification.setAndApply(s)},"interactions:action-resume":Zt,"interactions:action-inertiastart":Zt,"interactions:after-action-inertiastart":function(s){return s.interaction.modification.restoreInteractionCoords(s)},"interactions:after-action-resume":function(s){return s.interaction.modification.restoreInteractionCoords(s)}}};function ga(s,a,c,f){var g=1-s;return g*g*a+2*g*s*c+s*s*f}function va(s,a,c,f){return-c*(s/=f)*(s-2)+a}var gl=pl;function ya(s,a){for(var c=0;c<a.length;c++){var f=a[c];if(s.immediatePropagationStopped)break;f(s)}}var ma=function(){function s(a){o(this,s),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=J({},a||{})}return l(s,[{key:"fire",value:function(a){var c,f=this.global;(c=this.types[a.type])&&ya(a,c),!a.propagationStopped&&f&&(c=f[a.type])&&ya(a,c)}},{key:"on",value:function(a,c){var f=Ge(a,c);for(a in f)this.types[a]=Yo(this.types[a]||[],f[a])}},{key:"off",value:function(a,c){var f=Ge(a,c);for(a in f){var g=this.types[a];if(g&&g.length)for(var b=0,_=f[a];b<_.length;b++){var D=_[b],T=g.indexOf(D);T!==-1&&g.splice(T,1)}}}},{key:"getRect",value:function(a){return null}}]),s}(),vl=function(){function s(a){o(this,s),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=a,An(this,a)}return l(s,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),s}();function Jt(s){return m.object(s)?{capture:!!s.capture,passive:!!s.passive}:{capture:!!s,passive:!1}}function Tn(s,a){return s===a||(typeof s=="boolean"?!!a.capture===s&&!a.passive:!!s.capture==!!a.capture&&!!s.passive==!!a.passive)}var yl={id:"events",install:function(s){var a,c=[],f={},g=[],b={add:_,remove:D,addDelegate:function(L,R,B,W,F){var Y=Jt(F);if(!f[B]){f[B]=[];for(var Z=0;Z<g.length;Z++){var V=g[Z];_(V,B,T),_(V,B,O,!0)}}var ee=f[B],ae=Vt(ee,function(ce){return ce.selector===L&&ce.context===R});ae||(ae={selector:L,context:R,listeners:[]},ee.push(ae)),ae.listeners.push({func:W,options:Y})},removeDelegate:function(L,R,B,W,F){var Y,Z=Jt(F),V=f[B],ee=!1;if(V)for(Y=V.length-1;Y>=0;Y--){var ae=V[Y];if(ae.selector===L&&ae.context===R){for(var ce=ae.listeners,ie=ce.length-1;ie>=0;ie--){var se=ce[ie];if(se.func===W&&Tn(se.options,Z)){ce.splice(ie,1),ce.length||(V.splice(Y,1),D(R,B,T),D(R,B,O,!0)),ee=!0;break}}if(ee)break}}},delegateListener:T,delegateUseCapture:O,delegatedEvents:f,documents:g,targets:c,supportsOptions:!1,supportsPassive:!1};function _(L,R,B,W){if(L.addEventListener){var F=Jt(W),Y=Vt(c,function(Z){return Z.eventTarget===L});Y||(Y={eventTarget:L,events:{}},c.push(Y)),Y.events[R]||(Y.events[R]=[]),Vt(Y.events[R],function(Z){return Z.func===B&&Tn(Z.options,F)})||(L.addEventListener(R,B,b.supportsOptions?F:F.capture),Y.events[R].push({func:B,options:F}))}}function D(L,R,B,W){if(L.addEventListener&&L.removeEventListener){var F=Xt(c,function(Se){return Se.eventTarget===L}),Y=c[F];if(Y&&Y.events)if(R!=="all"){var Z=!1,V=Y.events[R];if(V){if(B==="all"){for(var ee=V.length-1;ee>=0;ee--){var ae=V[ee];D(L,R,ae.func,ae.options)}return}for(var ce=Jt(W),ie=0;ie<V.length;ie++){var se=V[ie];if(se.func===B&&Tn(se.options,ce)){L.removeEventListener(R,B,b.supportsOptions?ce:ce.capture),V.splice(ie,1),V.length===0&&(delete Y.events[R],Z=!0);break}}}Z&&!Object.keys(Y.events).length&&c.splice(F,1)}else for(R in Y.events)Y.events.hasOwnProperty(R)&&D(L,R,"all")}}function T(L,R){for(var B=Jt(R),W=new vl(L),F=f[L.type],Y=Ho(L)[0],Z=Y;m.element(Z);){for(var V=0;V<F.length;V++){var ee=F[V],ae=ee.selector,ce=ee.context;if(le(Z,ae)&&ne(ce,Y)&&ne(ce,Z)){var ie=ee.listeners;W.currentTarget=Z;for(var se=0;se<ie.length;se++){var Se=ie[se];Tn(Se.options,B)&&Se.func(W)}}}Z=ue(Z)}}function O(L){return T(L,!0)}return(a=s.document)==null||a.createElement("div").addEventListener("test",null,{get capture(){return b.supportsOptions=!0},get passive(){return b.supportsPassive=!0}}),s.events=b,b}},Pr={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(s){for(var a=0,c=Pr.methodOrder;a<c.length;a++){var f=c[a],g=Pr[f](s);if(g)return g}return null},simulationResume:function(s){var a=s.pointerType,c=s.eventType,f=s.eventTarget,g=s.scope;if(!/down|start/i.test(c))return null;for(var b=0,_=g.interactions.list;b<_.length;b++){var D=_[b],T=f;if(D.simulation&&D.simulation.allowResume&&D.pointerType===a)for(;T;){if(T===D.element)return D;T=ue(T)}}return null},mouseOrPen:function(s){var a,c=s.pointerId,f=s.pointerType,g=s.eventType,b=s.scope;if(f!=="mouse"&&f!=="pen")return null;for(var _=0,D=b.interactions.list;_<D.length;_++){var T=D[_];if(T.pointerType===f){if(T.simulation&&!wa(T,c))continue;if(T.interacting())return T;a||(a=T)}}if(a)return a;for(var O=0,L=b.interactions.list;O<L.length;O++){var R=L[O];if(!(R.pointerType!==f||/down/i.test(g)&&R.simulation))return R}return null},hasPointer:function(s){for(var a=s.pointerId,c=0,f=s.scope.interactions.list;c<f.length;c++){var g=f[c];if(wa(g,a))return g}return null},idle:function(s){for(var a=s.pointerType,c=0,f=s.scope.interactions.list;c<f.length;c++){var g=f[c];if(g.pointers.length===1){var b=g.interactable;if(b&&(!b.options.gesture||!b.options.gesture.enabled))continue}else if(g.pointers.length>=2)continue;if(!g.interacting()&&a===g.pointerType)return g}return null}};function wa(s,a){return s.pointers.some(function(c){return c.id===a})}var ml=Pr,Lr=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function ba(s,a){return function(c){var f=a.interactions.list,g=Wo(c),b=Ho(c),_=b[0],D=b[1],T=[];if(/^touch/.test(c.type)){a.prevTouchTime=a.now();for(var O=0,L=c.changedTouches;O<L.length;O++){var R=L[O],B={pointer:R,pointerId:Kt(R),pointerType:g,eventType:c.type,eventTarget:_,curEventTarget:D,scope:a},W=xa(B);T.push([B.pointer,B.eventTarget,B.curEventTarget,W])}}else{var F=!1;if(!X.supportsPointerEvent&&/mouse/.test(c.type)){for(var Y=0;Y<f.length&&!F;Y++)F=f[Y].pointerType!=="mouse"&&f[Y].pointerIsDown;F=F||a.now()-a.prevTouchTime<500||c.timeStamp===0}if(!F){var Z={pointer:c,pointerId:Kt(c),pointerType:g,eventType:c.type,curEventTarget:D,eventTarget:_,scope:a},V=xa(Z);T.push([Z.pointer,Z.eventTarget,Z.curEventTarget,V])}}for(var ee=0;ee<T.length;ee++){var ae=T[ee],ce=ae[0],ie=ae[1],se=ae[2];ae[3][s](ce,c,ie,se)}}}function xa(s){var a=s.pointerType,c=s.scope,f={interaction:ml.search(s),searchDetails:s};return c.fire("interactions:find",f),f.interaction||c.interactions.new({pointerType:a})}function $r(s,a){var c=s.doc,f=s.scope,g=s.options,b=f.interactions.docEvents,_=f.events,D=_[a];for(var T in f.browser.isIOS&&!g.events&&(g.events={passive:!1}),_.delegatedEvents)D(c,T,_.delegateListener),D(c,T,_.delegateUseCapture,!0);for(var O=g&&g.events,L=0;L<b.length;L++){var R=b[L];D(c,R.type,R.listener,O)}}var wl={id:"core/interactions",install:function(s){for(var a={},c=0;c<Lr.length;c++){var f=Lr[c];a[f]=ba(f,s)}var g,b=X.pEventTypes;function _(){for(var D=0,T=s.interactions.list;D<T.length;D++){var O=T[D];if(O.pointerIsDown&&O.pointerType==="touch"&&!O._interacting)for(var L=function(){var W=B[R];s.documents.some(function(F){return ne(F.doc,W.downTarget)})||O.removePointer(W.pointer,W.event)},R=0,B=O.pointers;R<B.length;R++)L()}}(g=H.PointerEvent?[{type:b.down,listener:_},{type:b.down,listener:a.pointerDown},{type:b.move,listener:a.pointerMove},{type:b.up,listener:a.pointerUp},{type:b.cancel,listener:a.pointerUp}]:[{type:"mousedown",listener:a.pointerDown},{type:"mousemove",listener:a.pointerMove},{type:"mouseup",listener:a.pointerUp},{type:"touchstart",listener:_},{type:"touchstart",listener:a.pointerDown},{type:"touchmove",listener:a.pointerMove},{type:"touchend",listener:a.pointerUp},{type:"touchcancel",listener:a.pointerUp}]).push({type:"blur",listener:function(D){for(var T=0,O=s.interactions.list;T<O.length;T++)O[T].documentBlur(D)}}),s.prevTouchTime=0,s.Interaction=function(D){d(O,D);var T=w(O);function O(){return o(this,O),T.apply(this,arguments)}return l(O,[{key:"pointerMoveTolerance",get:function(){return s.interactions.pointerMoveTolerance},set:function(L){s.interactions.pointerMoveTolerance=L}},{key:"_now",value:function(){return s.now()}}]),O}(ll),s.interactions={list:[],new:function(D){D.scopeFire=function(O,L){return s.fire(O,L)};var T=new s.Interaction(D);return s.interactions.list.push(T),T},listeners:a,docEvents:g,pointerMoveTolerance:1},s.usePlugin(ua)},listeners:{"scope:add-document":function(s){return $r(s,"add")},"scope:remove-document":function(s){return $r(s,"remove")},"interactable:unset":function(s,a){for(var c=s.interactable,f=a.interactions.list.length-1;f>=0;f--){var g=a.interactions.list[f];g.interactable===c&&(g.stop(),a.fire("interactions:destroy",{interaction:g}),g.destroy(),a.interactions.list.length>2&&a.interactions.list.splice(f,1))}}},onDocSignal:$r,doOnInteractions:ba,methodNames:Lr},bl=wl,vt=function(s){return s[s.On=0]="On",s[s.Off=1]="Off",s}(vt||{}),xl=function(){function s(a,c,f,g){o(this,s),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new ma,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=c.actions,this.target=a,this._context=c.context||f,this._win=x(et(a)?this._context:a),this._doc=this._win.document,this._scopeEvents=g,this.set(c)}return l(s,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(a,c){return m.func(c.onstart)&&this.on("".concat(a,"start"),c.onstart),m.func(c.onmove)&&this.on("".concat(a,"move"),c.onmove),m.func(c.onend)&&this.on("".concat(a,"end"),c.onend),m.func(c.oninertiastart)&&this.on("".concat(a,"inertiastart"),c.oninertiastart),this}},{key:"updatePerActionListeners",value:function(a,c,f){var g,b=this,_=(g=this._actions.map[a])==null?void 0:g.filterEventType,D=function(T){return(_==null||_(T))&&Cn(T,b._actions)};(m.array(c)||m.object(c))&&this._onOff(vt.Off,a,c,void 0,D),(m.array(f)||m.object(f))&&this._onOff(vt.On,a,f,void 0,D)}},{key:"setPerAction",value:function(a,c){var f=this._defaults;for(var g in c){var b=g,_=this.options[a],D=c[b];b==="listeners"&&this.updatePerActionListeners(a,_.listeners,D),m.array(D)?_[b]=Ko(D):m.plainObject(D)?(_[b]=J(_[b]||{},zt(D)),m.object(f.perAction[b])&&"enabled"in f.perAction[b]&&(_[b].enabled=D.enabled!==!1)):m.bool(D)&&m.object(f.perAction[b])?_[b].enabled=D:_[b]=D}}},{key:"getRect",value:function(a){return a=a||(m.element(this.target)?this.target:null),m.string(this.target)&&(a=a||this._context.querySelector(this.target)),ht(a)}},{key:"rectChecker",value:function(a){var c=this;return m.func(a)?(this.getRect=function(f){var g=J({},a.apply(c,f));return"width"in g||(g.width=g.right-g.left,g.height=g.bottom-g.top),g},this):a===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(a,c){if(et(c)||m.object(c)){for(var f in this.options[a]=c,this._actions.map)this.options[f][a]=c;return this}return this.options[a]}},{key:"origin",value:function(a){return this._backCompatOption("origin",a)}},{key:"deltaSource",value:function(a){return a==="page"||a==="client"?(this.options.deltaSource=a,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var a=this.target;return m.string(a)?Array.from(this._context.querySelectorAll(a)):m.func(a)&&a.getAllElements?a.getAllElements():m.element(a)?[a]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(a){return this._context===a.ownerDocument||ne(this._context,a)}},{key:"testIgnoreAllow",value:function(a,c,f){return!this.testIgnore(a.ignoreFrom,c,f)&&this.testAllow(a.allowFrom,c,f)}},{key:"testAllow",value:function(a,c,f){return!a||!!m.element(f)&&(m.string(a)?Ee(f,a,c):!!m.element(a)&&ne(a,f))}},{key:"testIgnore",value:function(a,c,f){return!(!a||!m.element(f))&&(m.string(a)?Ee(f,a,c):!!m.element(a)&&ne(a,f))}},{key:"fire",value:function(a){return this.events.fire(a),this}},{key:"_onOff",value:function(a,c,f,g,b){m.object(c)&&!m.array(c)&&(g=f,f=null);var _=Ge(c,f,b);for(var D in _){D==="wheel"&&(D=X.wheelEvent);for(var T=0,O=_[D];T<O.length;T++){var L=O[T];Cn(D,this._actions)?this.events[a===vt.On?"on":"off"](D,L):m.string(this.target)?this._scopeEvents[a===vt.On?"addDelegate":"removeDelegate"](this.target,this._context,D,L,g):this._scopeEvents[a===vt.On?"add":"remove"](this.target,D,L,g)}}return this}},{key:"on",value:function(a,c,f){return this._onOff(vt.On,a,c,f)}},{key:"off",value:function(a,c,f){return this._onOff(vt.Off,a,c,f)}},{key:"set",value:function(a){var c=this._defaults;for(var f in m.object(a)||(a={}),this.options=zt(c.base),this._actions.methodDict){var g=f,b=this._actions.methodDict[g];this.options[g]={},this.setPerAction(g,J(J({},c.perAction),c.actions[g])),this[b](a[g])}for(var _ in a)_!=="getRect"?m.func(this[_])&&this[_](a[_]):this.rectChecker(a.getRect);return this}},{key:"unset",value:function(){if(m.string(this.target))for(var a in this._scopeEvents.delegatedEvents)for(var c=this._scopeEvents.delegatedEvents[a],f=c.length-1;f>=0;f--){var g=c[f],b=g.selector,_=g.context,D=g.listeners;b===this.target&&_===this._context&&c.splice(f,1);for(var T=D.length-1;T>=0;T--)this._scopeEvents.removeDelegate(this.target,this._context,a,D[T][0],D[T][1])}else this._scopeEvents.remove(this.target,"all")}}]),s}(),El=function(){function s(a){var c=this;o(this,s),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=a,a.addListeners({"interactable:unset":function(f){var g=f.interactable,b=g.target,_=m.string(b)?c.selectorMap[b]:b[c.scope.id],D=Xt(_,function(T){return T===g});_.splice(D,1)}})}return l(s,[{key:"new",value:function(a,c){c=J(c||{},{actions:this.scope.actions});var f=new this.scope.Interactable(a,c,this.scope.document,this.scope.events);return this.scope.addDocument(f._doc),this.list.push(f),m.string(a)?(this.selectorMap[a]||(this.selectorMap[a]=[]),this.selectorMap[a].push(f)):(f.target[this.scope.id]||Object.defineProperty(a,this.scope.id,{value:[],configurable:!0}),a[this.scope.id].push(f)),this.scope.fire("interactable:new",{target:a,options:c,interactable:f,win:this.scope._win}),f}},{key:"getExisting",value:function(a,c){var f=c&&c.context||this.scope.document,g=m.string(a),b=g?this.selectorMap[a]:a[this.scope.id];if(b)return Vt(b,function(_){return _._context===f&&(g||_.inContext(a))})}},{key:"forEachMatch",value:function(a,c){for(var f=0,g=this.list;f<g.length;f++){var b=g[f],_=void 0;if((m.string(b.target)?m.element(a)&&le(a,b.target):a===b.target)&&b.inContext(a)&&(_=c(b)),_!==void 0)return _}}}]),s}(),_l=function(){function s(){var a=this;o(this,s),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=X,this.defaults=zt(la),this.Eventable=ma,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(f){var g=function b(_,D){var T=f.interactables.getExisting(_,D);return T||((T=f.interactables.new(_,D)).events.global=b.globalEvents),T};return g.getPointerAverage=Fo,g.getTouchBBox=wr,g.getTouchDistance=br,g.getTouchAngle=xr,g.getElementRect=ht,g.getElementClientRect=dt,g.matchesSelector=le,g.closest=he,g.globalEvents={},g.version="1.10.27",g.scope=f,g.use=function(b,_){return this.scope.usePlugin(b,_),this},g.isSet=function(b,_){return!!this.scope.interactables.get(b,_&&_.context)},g.on=Qt(function(b,_,D){if(m.string(b)&&b.search(" ")!==-1&&(b=b.trim().split(/ +/)),m.array(b)){for(var T=0,O=b;T<O.length;T++){var L=O[T];this.on(L,_,D)}return this}if(m.object(b)){for(var R in b)this.on(R,b[R],_);return this}return Cn(b,this.scope.actions)?this.globalEvents[b]?this.globalEvents[b].push(_):this.globalEvents[b]=[_]:this.scope.events.add(this.scope.document,b,_,{options:D}),this},"The interact.on() method is being deprecated"),g.off=Qt(function(b,_,D){if(m.string(b)&&b.search(" ")!==-1&&(b=b.trim().split(/ +/)),m.array(b)){for(var T=0,O=b;T<O.length;T++){var L=O[T];this.off(L,_,D)}return this}if(m.object(b)){for(var R in b)this.off(R,b[R],_);return this}var B;return Cn(b,this.scope.actions)?b in this.globalEvents&&(B=this.globalEvents[b].indexOf(_))!==-1&&this.globalEvents[b].splice(B,1):this.scope.events.remove(this.scope.document,b,_,D),this},"The interact.off() method is being deprecated"),g.debug=function(){return this.scope},g.supportsTouch=function(){return X.supportsTouch},g.supportsPointerEvent=function(){return X.supportsPointerEvent},g.stop=function(){for(var b=0,_=this.scope.interactions.list;b<_.length;b++)_[b].stop();return this},g.pointerMoveTolerance=function(b){return m.number(b)?(this.scope.interactions.pointerMoveTolerance=b,this):this.scope.interactions.pointerMoveTolerance},g.addDocument=function(b,_){this.scope.addDocument(b,_)},g.removeDocument=function(b){this.scope.removeDocument(b)},g}(this),this.InteractEvent=zr,this.Interactable=void 0,this.interactables=new El(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(f){return a.removeDocument(f.target)};var c=this;this.Interactable=function(f){d(b,f);var g=w(b);function b(){return o(this,b),g.apply(this,arguments)}return l(b,[{key:"_defaults",get:function(){return c.defaults}},{key:"set",value:function(_){return S(p(b.prototype),"set",this).call(this,_),c.fire("interactable:set",{options:_,interactable:this}),this}},{key:"unset",value:function(){S(p(b.prototype),"unset",this).call(this);var _=c.interactables.list.indexOf(this);_<0||(c.interactables.list.splice(_,1),c.fire("interactable:unset",{interactable:this}))}}]),b}(xl)}return l(s,[{key:"addListeners",value:function(a,c){this.listenerMaps.push({id:c,map:a})}},{key:"fire",value:function(a,c){for(var f=0,g=this.listenerMaps;f<g.length;f++){var b=g[f].map[a];if(b&&b(c,this,a)===!1)return!1}}},{key:"init",value:function(a){return this.isInitialized?this:function(c,f){return c.isInitialized=!0,m.window(f)&&I(f),H.init(f),X.init(f),pt.init(f),c.window=f,c.document=f.document,c.usePlugin(bl),c.usePlugin(yl),c}(this,a)}},{key:"pluginIsInstalled",value:function(a){var c=a.id;return c?!!this._plugins.map[c]:this._plugins.list.indexOf(a)!==-1}},{key:"usePlugin",value:function(a,c){if(!this.isInitialized)return this;if(this.pluginIsInstalled(a))return this;if(a.id&&(this._plugins.map[a.id]=a),this._plugins.list.push(a),a.install&&a.install(this,c),a.listeners&&a.before){for(var f=0,g=this.listenerMaps.length,b=a.before.reduce(function(D,T){return D[T]=!0,D[Ea(T)]=!0,D},{});f<g;f++){var _=this.listenerMaps[f].id;if(_&&(b[_]||b[Ea(_)]))break}this.listenerMaps.splice(f,0,{id:a.id,map:a.listeners})}else a.listeners&&this.listenerMaps.push({id:a.id,map:a.listeners});return this}},{key:"addDocument",value:function(a,c){if(this.getDocIndex(a)!==-1)return!1;var f=x(a);c=c?J({},c):{},this.documents.push({doc:a,options:c}),this.events.documents.push(a),a!==this.document&&this.events.add(f,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:a,window:f,scope:this,options:c})}},{key:"removeDocument",value:function(a){var c=this.getDocIndex(a),f=x(a),g=this.documents[c].options;this.events.remove(f,"unload",this.onWindowUnload),this.documents.splice(c,1),this.events.documents.splice(c,1),this.fire("scope:remove-document",{doc:a,window:f,scope:this,options:g})}},{key:"getDocIndex",value:function(a){for(var c=0;c<this.documents.length;c++)if(this.documents[c].doc===a)return c;return-1}},{key:"getDocOptions",value:function(a){var c=this.getDocIndex(a);return c===-1?null:this.documents[c].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),s}();function Ea(s){return s&&s.replace(/\/.*$/,"")}var _a=new _l,_e=_a.interactStatic,Sl=typeof globalThis<"u"?globalThis:window;_a.init(Sl);var Al=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(s){var a=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(f){var g=f[0],b=f[1];return g in s||b in s}),c=function(f,g){for(var b=s.range,_=s.limits,D=_===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:_,T=s.offset,O=T===void 0?{x:0,y:0}:T,L={range:b,grid:s,x:null,y:null},R=0;R<a.length;R++){var B=a[R],W=B[0],F=B[1],Y=Math.round((f-O.x)/s[W]),Z=Math.round((g-O.y)/s[F]);L[W]=Math.max(D.left,Math.min(D.right,Y*s[W]+O.x)),L[F]=Math.max(D.top,Math.min(D.bottom,Z*s[F]+O.y))}return L};return c.grid=s,c.coordFields=a,c}}),kl={id:"snappers",install:function(s){var a=s.interactStatic;a.snappers=J(a.snappers||{},Al),a.createSnapGrid=a.snappers.grid}},Nl=kl,Ml={start:function(s){var a=s.state,c=s.rect,f=s.edges,g=s.pageCoords,b=a.options,_=b.ratio,D=b.enabled,T=a.options,O=T.equalDelta,L=T.modifiers;_==="preserve"&&(_=c.width/c.height),a.startCoords=J({},g),a.startRect=J({},c),a.ratio=_,a.equalDelta=O;var R=a.linkedEdges={top:f.top||f.left&&!f.bottom,left:f.left||f.top&&!f.right,bottom:f.bottom||f.right&&!f.top,right:f.right||f.bottom&&!f.left};if(a.xIsPrimaryAxis=!(!f.left&&!f.right),a.equalDelta){var B=(R.left?1:-1)*(R.top?1:-1);a.edgeSign={x:B,y:B}}else a.edgeSign={x:R.left?-1:1,y:R.top?-1:1};if(D!==!1&&J(f,R),L!=null&&L.length){var W=new Ir(s.interaction);W.copyFrom(s.interaction.modification),W.prepareStates(L),a.subModification=W,W.startAll(r({},s))}},set:function(s){var a=s.state,c=s.rect,f=s.coords,g=a.linkedEdges,b=J({},f),_=a.equalDelta?Dl:Cl;if(J(s.edges,g),_(a,a.xIsPrimaryAxis,f,c),!a.subModification)return null;var D=J({},c);nt(g,D,{x:f.x-b.x,y:f.y-b.y});var T=a.subModification.setAll(r(r({},s),{},{rect:D,edges:g,pageCoords:f,prevCoords:f,prevRect:D})),O=T.delta;return T.changed&&(_(a,Math.abs(O.x)>Math.abs(O.y),T.coords,T.rect),J(f,T.coords)),T.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Dl(s,a,c){var f=s.startCoords,g=s.edgeSign;a?c.y=f.y+(c.x-f.x)*g.y:c.x=f.x+(c.y-f.y)*g.x}function Cl(s,a,c,f){var g=s.startRect,b=s.startCoords,_=s.ratio,D=s.edgeSign;if(a){var T=f.width/_;c.y=b.y+(T-g.height)*D.y}else{var O=f.height*_;c.x=b.x+(O-g.width)*D.x}}var Il=gt(Ml,"aspectRatio"),Sa=function(){};Sa._defaults={};var Pn=Sa;function _t(s,a,c){return m.func(s)?Fe(s,a.interactable,a.element,[c.x,c.y,a]):Fe(s,a.interactable,a.element)}var Ln={start:function(s){var a=s.rect,c=s.startOffset,f=s.state,g=s.interaction,b=s.pageCoords,_=f.options,D=_.elementRect,T=J({left:0,top:0,right:0,bottom:0},_.offset||{});if(a&&D){var O=_t(_.restriction,g,b);if(O){var L=O.right-O.left-a.width,R=O.bottom-O.top-a.height;L<0&&(T.left+=L,T.right+=L),R<0&&(T.top+=R,T.bottom+=R)}T.left+=c.left-a.width*D.left,T.top+=c.top-a.height*D.top,T.right+=c.right-a.width*(1-D.right),T.bottom+=c.bottom-a.height*(1-D.bottom)}f.offset=T},set:function(s){var a=s.coords,c=s.interaction,f=s.state,g=f.options,b=f.offset,_=_t(g.restriction,c,a);if(_){var D=function(T){return!T||"left"in T&&"top"in T||((T=J({},T)).left=T.x||0,T.top=T.y||0,T.right=T.right||T.left+T.width,T.bottom=T.bottom||T.top+T.height),T}(_);a.x=Math.max(Math.min(D.right-b.right,a.x),D.left+b.left),a.y=Math.max(Math.min(D.bottom-b.bottom,a.y),D.top+b.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},zl=gt(Ln,"restrict"),Aa={top:1/0,left:1/0,bottom:-1/0,right:-1/0},ka={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Na(s,a){for(var c=0,f=["top","left","bottom","right"];c<f.length;c++){var g=f[c];g in s||(s[g]=a[g])}return s}var en={noInner:Aa,noOuter:ka,start:function(s){var a,c=s.interaction,f=s.startOffset,g=s.state,b=g.options;b&&(a=tt(_t(b.offset,c,c.coords.start.page))),a=a||{x:0,y:0},g.offset={top:a.y+f.top,left:a.x+f.left,bottom:a.y-f.bottom,right:a.x-f.right}},set:function(s){var a=s.coords,c=s.edges,f=s.interaction,g=s.state,b=g.offset,_=g.options;if(c){var D=J({},a),T=_t(_.inner,f,D)||{},O=_t(_.outer,f,D)||{};Na(T,Aa),Na(O,ka),c.top?a.y=Math.min(Math.max(O.top+b.top,D.y),T.top+b.top):c.bottom&&(a.y=Math.max(Math.min(O.bottom+b.bottom,D.y),T.bottom+b.bottom)),c.left?a.x=Math.min(Math.max(O.left+b.left,D.x),T.left+b.left):c.right&&(a.x=Math.max(Math.min(O.right+b.right,D.x),T.right+b.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},Tl=gt(en,"restrictEdges"),Pl=J({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(s){}},Ln.defaults),Ll=gt({start:Ln.start,set:Ln.set,defaults:Pl},"restrictRect"),$l={width:-1/0,height:-1/0},Gl={width:1/0,height:1/0},Ol=gt({start:function(s){return en.start(s)},set:function(s){var a=s.interaction,c=s.state,f=s.rect,g=s.edges,b=c.options;if(g){var _=xt(_t(b.min,a,s.coords))||$l,D=xt(_t(b.max,a,s.coords))||Gl;c.options={endOnly:b.endOnly,inner:J({},en.noInner),outer:J({},en.noOuter)},g.top?(c.options.inner.top=f.bottom-_.height,c.options.outer.top=f.bottom-D.height):g.bottom&&(c.options.inner.bottom=f.top+_.height,c.options.outer.bottom=f.top+D.height),g.left?(c.options.inner.left=f.right-_.width,c.options.outer.left=f.right-D.width):g.right&&(c.options.inner.right=f.left+_.width,c.options.outer.right=f.left+D.width),en.set(s),c.options=b}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),Gr={start:function(s){var a,c=s.interaction,f=s.interactable,g=s.element,b=s.rect,_=s.state,D=s.startOffset,T=_.options,O=T.offsetWithOrigin?function(B){var W=B.interaction.element,F=tt(Fe(B.state.options.origin,null,null,[W])),Y=F||ft(B.interactable,W,B.interaction.prepared.name);return Y}(s):{x:0,y:0};if(T.offset==="startCoords")a={x:c.coords.start.page.x,y:c.coords.start.page.y};else{var L=Fe(T.offset,f,g,[c]);(a=tt(L)||{x:0,y:0}).x+=O.x,a.y+=O.y}var R=T.relativePoints;_.offsets=b&&R&&R.length?R.map(function(B,W){return{index:W,relativePoint:B,x:D.left-b.width*B.x+a.x,y:D.top-b.height*B.y+a.y}}):[{index:0,relativePoint:null,x:a.x,y:a.y}]},set:function(s){var a=s.interaction,c=s.coords,f=s.state,g=f.options,b=f.offsets,_=ft(a.interactable,a.element,a.prepared.name),D=J({},c),T=[];g.offsetWithOrigin||(D.x-=_.x,D.y-=_.y);for(var O=0,L=b;O<L.length;O++)for(var R=L[O],B=D.x-R.x,W=D.y-R.y,F=0,Y=g.targets.length;F<Y;F++){var Z=g.targets[F],V=void 0;(V=m.func(Z)?Z(B,W,a._proxy,R,F):Z)&&T.push({x:(m.number(V.x)?V.x:B)+R.x,y:(m.number(V.y)?V.y:W)+R.y,range:m.number(V.range)?V.range:g.range,source:Z,index:F,offset:R})}for(var ee={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},ae=0;ae<T.length;ae++){var ce=T[ae],ie=ce.range,se=ce.x-D.x,Se=ce.y-D.y,fe=Yt(se,Se),De=fe<=ie;ie===1/0&&ee.inRange&&ee.range!==1/0&&(De=!1),ee.target&&!(De?ee.inRange&&ie!==1/0?fe/ie<ee.distance/ee.range:ie===1/0&&ee.range!==1/0||fe<ee.distance:!ee.inRange&&fe<ee.distance)||(ee.target=ce,ee.distance=fe,ee.range=ie,ee.inRange=De,ee.delta.x=se,ee.delta.y=Se)}return ee.inRange&&(c.x=ee.target.x,c.y=ee.target.y),f.closest=ee,ee},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},Rl=gt(Gr,"snap"),$n={start:function(s){var a=s.state,c=s.edges,f=a.options;if(!c)return null;s.state={options:{targets:null,relativePoints:[{x:c.left?0:1,y:c.top?0:1}],offset:f.offset||"self",origin:{x:0,y:0},range:f.range}},a.targetFields=a.targetFields||[["width","height"],["x","y"]],Gr.start(s),a.offsets=s.state.offsets,s.state=a},set:function(s){var a=s.interaction,c=s.state,f=s.coords,g=c.options,b=c.offsets,_={x:f.x-b[0].x,y:f.y-b[0].y};c.options=J({},g),c.options.targets=[];for(var D=0,T=g.targets||[];D<T.length;D++){var O=T[D],L=void 0;if(L=m.func(O)?O(_.x,_.y,a):O){for(var R=0,B=c.targetFields;R<B.length;R++){var W=B[R],F=W[0],Y=W[1];if(F in L||Y in L){L.x=L[F],L.y=L[Y];break}}c.options.targets.push(L)}}var Z=Gr.set(s);return c.options=g,Z},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},ql=gt($n,"snapSize"),Or={aspectRatio:Il,restrictEdges:Tl,restrict:zl,restrictRect:Ll,restrictSize:Ol,snapEdges:gt({start:function(s){var a=s.edges;return a?(s.state.targetFields=s.state.targetFields||[[a.left?"left":"right",a.top?"top":"bottom"]],$n.start(s)):null},set:$n.set,defaults:J(zt($n.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:Rl,snapSize:ql,spring:Pn,avoid:Pn,transform:Pn,rubberband:Pn},Bl={id:"modifiers",install:function(s){var a=s.interactStatic;for(var c in s.usePlugin(ca),s.usePlugin(Nl),a.modifiers=Or,Or){var f=Or[c],g=f._defaults,b=f._methods;g._methods=b,s.defaults.perAction[c]=g}}},jl=Bl,Ma=function(s){d(c,s);var a=w(c);function c(f,g,b,_,D,T){var O;if(o(this,c),An(y(O=a.call(this,D)),b),b!==g&&An(y(O),g),O.timeStamp=T,O.originalEvent=b,O.type=f,O.pointerId=Kt(g),O.pointerType=Wo(g),O.target=_,O.currentTarget=null,f==="tap"){var L=D.getPointerIndex(g);O.dt=O.timeStamp-D.pointers[L].downTime;var R=O.timeStamp-D.tapTime;O.double=!!D.prevTap&&D.prevTap.type!=="doubletap"&&D.prevTap.target===O.target&&R<500}else f==="doubletap"&&(O.dt=g.timeStamp-D.tapTime,O.double=!0);return O}return l(c,[{key:"_subtractOrigin",value:function(f){var g=f.x,b=f.y;return this.pageX-=g,this.pageY-=b,this.clientX-=g,this.clientY-=b,this}},{key:"_addOrigin",value:function(f){var g=f.x,b=f.y;return this.pageX+=g,this.pageY+=b,this.clientX+=g,this.clientY+=b,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),c}(Mn),tn={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(s){s.pointerEvents=tn,s.defaults.actions.pointerEvents=tn.defaults,J(s.actions.phaselessTypes,tn.types)},listeners:{"interactions:new":function(s){var a=s.interaction;a.prevTap=null,a.tapTime=0},"interactions:update-pointer":function(s){var a=s.down,c=s.pointerInfo;!a&&c.hold||(c.hold={duration:1/0,timeout:null})},"interactions:move":function(s,a){var c=s.interaction,f=s.pointer,g=s.event,b=s.eventTarget;s.duplicate||c.pointerIsDown&&!c.pointerWasMoved||(c.pointerIsDown&&Rr(s),yt({interaction:c,pointer:f,event:g,eventTarget:b,type:"move"},a))},"interactions:down":function(s,a){(function(c,f){for(var g=c.interaction,b=c.pointer,_=c.event,D=c.eventTarget,T=c.pointerIndex,O=g.pointers[T].hold,L=Je(D),R={interaction:g,pointer:b,event:_,eventTarget:D,type:"hold",targets:[],path:L,node:null},B=0;B<L.length;B++){var W=L[B];R.node=W,f.fire("pointerEvents:collect-targets",R)}if(R.targets.length){for(var F=1/0,Y=0,Z=R.targets;Y<Z.length;Y++){var V=Z[Y].eventable.options.holdDuration;V<F&&(F=V)}O.duration=F,O.timeout=setTimeout(function(){yt({interaction:g,eventTarget:D,pointer:b,event:_,type:"hold"},f)},F)}})(s,a),yt(s,a)},"interactions:up":function(s,a){Rr(s),yt(s,a),function(c,f){var g=c.interaction,b=c.pointer,_=c.event,D=c.eventTarget;g.pointerWasMoved||yt({interaction:g,eventTarget:D,pointer:b,event:_,type:"tap"},f)}(s,a)},"interactions:cancel":function(s,a){Rr(s),yt(s,a)}},PointerEvent:Ma,fire:yt,collectEventTargets:Da,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function yt(s,a){var c=s.interaction,f=s.pointer,g=s.event,b=s.eventTarget,_=s.type,D=s.targets,T=D===void 0?Da(s,a):D,O=new Ma(_,f,g,b,c,a.now());a.fire("pointerEvents:new",{pointerEvent:O});for(var L={interaction:c,pointer:f,event:g,eventTarget:b,targets:T,type:_,pointerEvent:O},R=0;R<T.length;R++){var B=T[R];for(var W in B.props||{})O[W]=B.props[W];var F=ft(B.eventable,B.node);if(O._subtractOrigin(F),O.eventable=B.eventable,O.currentTarget=B.node,B.eventable.fire(O),O._addOrigin(F),O.immediatePropagationStopped||O.propagationStopped&&R+1<T.length&&T[R+1].node!==O.currentTarget)break}if(a.fire("pointerEvents:fired",L),_==="tap"){var Y=O.double?yt({interaction:c,pointer:f,event:g,eventTarget:b,type:"doubletap"},a):O;c.prevTap=Y,c.tapTime=Y.timeStamp}return O}function Da(s,a){var c=s.interaction,f=s.pointer,g=s.event,b=s.eventTarget,_=s.type,D=c.getPointerIndex(f),T=c.pointers[D];if(_==="tap"&&(c.pointerWasMoved||!T||T.downTarget!==b))return[];for(var O=Je(b),L={interaction:c,pointer:f,event:g,eventTarget:b,type:_,path:O,targets:[],node:null},R=0;R<O.length;R++){var B=O[R];L.node=B,a.fire("pointerEvents:collect-targets",L)}return _==="hold"&&(L.targets=L.targets.filter(function(W){var F,Y;return W.eventable.options.holdDuration===((F=c.pointers[D])==null||(Y=F.hold)==null?void 0:Y.duration)})),L.targets}function Rr(s){var a=s.interaction,c=s.pointerIndex,f=a.pointers[c].hold;f&&f.timeout&&(clearTimeout(f.timeout),f.timeout=null)}var Ul=Object.freeze({__proto__:null,default:tn});function Fl(s){var a=s.interaction;a.holdIntervalHandle&&(clearInterval(a.holdIntervalHandle),a.holdIntervalHandle=null)}var Wl={id:"pointer-events/holdRepeat",install:function(s){s.usePlugin(tn);var a=s.pointerEvents;a.defaults.holdRepeatInterval=0,a.types.holdrepeat=s.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(s,a){return s["pointerEvents:".concat(a)]=Fl,s},{"pointerEvents:new":function(s){var a=s.pointerEvent;a.type==="hold"&&(a.count=(a.count||0)+1)},"pointerEvents:fired":function(s,a){var c=s.interaction,f=s.pointerEvent,g=s.eventTarget,b=s.targets;if(f.type==="hold"&&b.length){var _=b[0].eventable.options.holdRepeatInterval;_<=0||(c.holdIntervalHandle=setTimeout(function(){a.pointerEvents.fire({interaction:c,eventTarget:g,type:"hold",pointer:f,event:f},a)},_))}}})},Hl=Wl,Yl={id:"pointer-events/interactableTargets",install:function(s){var a=s.Interactable;a.prototype.pointerEvents=function(f){return J(this.events.options,f),this};var c=a.prototype._backCompatOption;a.prototype._backCompatOption=function(f,g){var b=c.call(this,f,g);return b===this&&(this.events.options[f]=g),b}},listeners:{"pointerEvents:collect-targets":function(s,a){var c=s.targets,f=s.node,g=s.type,b=s.eventTarget;a.interactables.forEachMatch(f,function(_){var D=_.events,T=D.options;D.types[g]&&D.types[g].length&&_.testIgnoreAllow(T,f,b)&&c.push({node:f,eventable:D,props:{interactable:_}})})},"interactable:new":function(s){var a=s.interactable;a.events.getRect=function(c){return a.getRect(c)}},"interactable:set":function(s,a){var c=s.interactable,f=s.options;J(c.events.options,a.pointerEvents.defaults),J(c.events.options,f.pointerEvents||{})}}},Kl=Yl,Xl={id:"pointer-events",install:function(s){s.usePlugin(Ul),s.usePlugin(Hl),s.usePlugin(Kl)}},Vl=Xl,Ql={id:"reflow",install:function(s){var a=s.Interactable;s.actions.phases.reflow=!0,a.prototype.reflow=function(c){return function(f,g,b){for(var _=f.getAllElements(),D=b.window.Promise,T=D?[]:null,O=function(){var R=_[L],B=f.getRect(R);if(!B)return 1;var W,F=Vt(b.interactions.list,function(V){return V.interacting()&&V.interactable===f&&V.element===R&&V.prepared.name===g.name});if(F)F.move(),T&&(W=F._reflowPromise||new D(function(V){F._reflowResolve=V}));else{var Y=xt(B),Z=function(V){return{coords:V,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:Y.x,y:Y.y},client:{x:Y.x,y:Y.y},timeStamp:b.now()});W=function(V,ee,ae,ce,ie){var se=V.interactions.new({pointerType:"reflow"}),Se={interaction:se,event:ie,pointer:ie,eventTarget:ae,phase:"reflow"};se.interactable=ee,se.element=ae,se.prevEvent=ie,se.updatePointer(ie,ie,ae,!0),Bo(se.coords.delta),Nr(se.prepared,ce),se._doPhase(Se);var fe=V.window,De=fe.Promise,Oe=De?new De(function(ot){se._reflowResolve=ot}):void 0;return se._reflowPromise=Oe,se.start(ce,ee,ae),se._interacting?(se.move(Se),se.end(ie)):(se.stop(),se._reflowResolve()),se.removePointer(ie,ie),Oe}(b,f,R,g,Z)}T&&T.push(W)},L=0;L<_.length&&!O();L++);return T&&D.all(T).then(function(){return f})}(this,c,s)}},listeners:{"interactions:stop":function(s,a){var c=s.interaction;c.pointerType==="reflow"&&(c._reflowResolve&&c._reflowResolve(),function(f,g){f.splice(f.indexOf(g),1)}(a.interactions.list,c))}}},Zl=Ql;if(_e.use(ua),_e.use(pa),_e.use(Vl),_e.use(gl),_e.use(jl),_e.use(rl),_e.use(Hc),_e.use(Kc),_e.use(Zl),_e.default=_e,i(n)==="object"&&n)try{n.exports=_e}catch{}return _e.default=_e,_e})}(pn,pn.exports)),pn.exports}var Nm=km();const Mm=$e(Nm),ve=document;class Dm{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.mettric=new Rc(e),this.panels={info:ve.getElementById("floating-panel"),tools:ve.getElementById("tools-panel")},this.handels={info:"#info",tools:"#tools"},this.addEventListeners(),this.makePanelsDraggable(),this.listeners(),this.contexMenu()}init(){this.togglePanel("info","#panel-btn .check",this.settings.info_panel),this.togglePanel("tools","#tools-btn .check",this.settings.tools_panel)}contexMenu(){ve.getElementById("custom-context-menu"),ve.addEventListener("contextmenu",e=>{e.preventDefault();const t=ve.getElementById("custom-context-menu"),r=t.offsetWidth,i=t.offsetHeight,o=window.innerWidth,u=window.innerHeight;let l=e.pageX,h=e.pageY;l+r>o&&(l-=r),h+i>u&&(h-=i),t.style.left=`${l}px`,t.style.top=`${h}px`,t.style.display="block"}),ve.addEventListener("click",()=>{ve.getElementById("custom-context-menu").style.display="none"})}togglePanel(e,t,r){const i=this.panels[e];ve.querySelector(t).classList.toggle("hidden",!r),i.style.display=r?"flex":"none",r||this.resetPanel(i)}resetPanel(e){e.style.transform="translate(0px, 0px)",e.setAttribute("data-x",0),e.setAttribute("data-y",0)}addEventListeners(){const e=ve.querySelector("#floating-panel .close"),t=ve.querySelector("#floating-panel .max"),r=ve.querySelector("#tools-panel .close"),i=ve.querySelector(".modal");e&&e.addEventListener("click",()=>{this.eventBus.emit("toggleSetting",{key:"info_panel"})}),t&&t.addEventListener("click",()=>{this.resetPanel(this.panels.info),ve.querySelector("#floating-panel").classList.toggle("MAX")}),r&&r.addEventListener("click",()=>{this.eventBus.emit("toggleSetting",{key:"tools_panel"})}),i&&i.addEventListener("click",o=>{o.target.classList.contains("modal")&&(i.style.display="none",ve.querySelector(".modal .help-panel").style.display="none",ve.querySelector(".modal .rename-panel").style.display="none")})}makePanelsDraggable(){Object.keys(this.panels).forEach(e=>{this.panels[e]&&this.handels[e]&&this.makeDraggable(this.panels[e],this.handels[e])})}makeDraggable(e,t){Mm(e).draggable({allowFrom:t,listeners:{move(r){const i=r.target;let o=(parseFloat(i.getAttribute("data-x"))||0)+r.dx,u=(parseFloat(i.getAttribute("data-y"))||0)+r.dy;i.style.transform=`translate(${o}px, ${u}px)`,i.setAttribute("data-x",o),i.setAttribute("data-y",u)}}})}listeners(){ve.querySelector("widgets #tools-panel .scale").addEventListener("click",e=>{this.eventBus.emit("toggleSetting",{key:"scale"})}),ve.querySelector("widgets #tools-panel .tree").addEventListener("click",e=>{this.eventBus.emit("toggleSetting",{key:"tree"})}),ve.querySelector("widgets #tools-panel .force").addEventListener("click",e=>{this.eventBus.emit("toggleSetting",{key:"forceSimulation"})}),ve.querySelector("widgets #tools-panel .panning").addEventListener("click",e=>{this.eventBus.emit("toggleSetting",{key:"panning"})}),ve.querySelector("widgets #tools-panel .select").addEventListener("click",e=>{this.eventBus.emit("toggleSetting",{key:"select"})}),ve.querySelector("widgets #tools-panel .component").addEventListener("click",e=>{this.eventBus.emit("toggleSetting",{key:"component"})})}}class Cm{constructor(e,t){this.app=e,this.settings=e.settings,this.canvas=e.canvas,this.ctx=e._canvas.ctx,this.selection={x:0,y:0,width:0,height:0,active:!1},this.scale={isDragging:!1,active:!1,activeHandle:null,scaleData:{},rect:{x:100,y:100,width:200,height:150},prevMouse:{x:0,y:0},offsetX:0,offsetY:0,handleSize:10,handles:["nw","n","ne","e","se","s","sw","w"],cursorMap:{nw:"nwse-resize",n:"ns-resize",ne:"nesw-resize",e:"ew-resize",se:"nwse-resize",s:"ns-resize",sw:"nesw-resize",w:"ew-resize"}}}init(){this.canvas.addEventListener("mousedown",this.startSelection.bind(this)),this.canvas.addEventListener("mousemove",this.updateSelection.bind(this)),this.canvas.addEventListener("mouseup",this.endSelection.bind(this)),this.app.drawGraph()}draw(){const e=this.selection;(this.settings.select||this.settings.scale)&&(e.active&&this.drawSelect(this.selection),this.settings.scale&&this.drawScale())}drawSelect(e){if(!e)return;const t=this.ctx;t.fillStyle="rgba(0, 0, 0, 0.1)",t.fillRect(e.x,e.y,e.width,e.height),t.strokeStyle="rgba(0, 0, 255, 0.7)",t.lineWidth=2,t.setLineDash([5,5]),t.strokeRect(e.x,e.y,e.width,e.height),t.setLineDash([])}drawScale(){this.scale.active&&this.drawScaleBox(this.scale.rect,this.ctx)}startSelection(e){if(this.settings.select||this.settings.scale){const t=this.selection,[r,i]=Te(e,this.canvas);if(t.x=r,t.y=i,t.width=0,t.height=0,t.active=!this.scale.active,this.settings.scale&&this.scale.active){this.app.graphManager.saveGraphState();const[o,u]=Te(e);if(this.scale.prevMouse={x:o,y:u},this.scale.activeHandle=this.hitTestHandle(o,u),this.scale.activeHandle)return;o>=this.scale.rect.x&&o<=this.scale.rect.x+this.scale.rect.width&&u>=this.scale.rect.y&&u<=this.scale.rect.y+this.scale.rect.height&&(this.scale.isDragging=!0,this.scale.offsetX=o-this.scale.rect.x,this.scale.offsetY=u-this.scale.rect.y)}}else this.selection.active=!1,this.scale.active=!1}updateSelection(e){const t=this.selection,r=this.scale.rect,i=this.app.graphManager.graph.getSelectedNodes();if(t.active&&!this.scale.active){const[o,u]=Te(e,this.canvas);t.width=o-t.x,t.height=u-t.y,this.app.drawGraph();return}if(this.scale.active){const[o,u]=Te(e);if(this.scale.activeHandle){this.resizeRect(this.scale.activeHandle,o,u);for(let h of i)this.app.graphManager.graph.updateNodeAttributes(h,d=>({...d,x:r.x+r.width*this.scale.scaleData[h].x,y:r.y+r.height*this.scale.scaleData[h].y}));this.app.drawGraph();return}if(this.scale.isDragging){this.scale.rect.x=o-this.scale.offsetX,this.scale.rect.y=u-this.scale.offsetY;const h=o-this.scale.prevMouse.x,d=u-this.scale.prevMouse.y;for(let p of i)this.app.graphManager.graph.updateNodeAttributes(p,v=>({...v,x:v.x+h,y:v.y+d}));this.scale.prevMouse={x:o,y:u},this.app.drawGraph();return}const l=this.hitTestHandle(o,u);l?this.canvas.style.cursor=this.scale.cursorMap[l]:o>=this.scale.rect.x&&o<=this.scale.rect.x+this.scale.rect.width&&u>=this.scale.rect.y&&u<=this.scale.rect.y+this.scale.rect.height?this.canvas.style.cursor="move":this.canvas.style.cursor="default"}}endSelection(e){this.selection.active=!1,this.scale.isDragging=!1,this.scale.activeHandle=null,this.pointsInRect(this.selection).forEach(o=>{this.app.graphManager.graph.toggleNodeSelection(o)}),this.linesInRect(this.selection).forEach(o=>{this.app.graphManager.graph.toggleEdgeSelection(o)});const i=this.app.graphManager.graph.getSelectedNodes();this.settings.scale&&i.length>0&&!this.scale.active&&(this.scale.active=!0,this.scale.rect=Im(this.app.graphManager.graph,i,this.settings.node_radius),this.scaleData={},i.forEach(o=>{const u=this.app.graphManager.graph.getNodeAttributes(o);this.scale.scaleData[o]={id:o,x:(u.x-this.scale.rect.x)/this.scale.rect.width,y:(u.y-this.scale.rect.y)/this.scale.rect.height}})),this.app.drawGraph()}pointsInRect(e){const[t,r,i,o]=Uu(e);return this.app.graphManager.graph.filterNodes((u,l)=>io(l.x,l.y,t,r,i,o))}linesInRect(e){const t=Uu(e);return this.app.graphManager.graph.filterEdges((r,i,o,u,l,h)=>this.lineIntersectsRect([l.x,l.y,h.x,h.y],t))}lineIntersectsRect(e,t){let[r,i,o,u]=e,[l,h,d,p]=t;const v=this.settings.node_radius/2+20;return!!(Fu([r,i,o,u],[l,h,d,p])||Fu([r,i,o,u],[l,p,d,h])||io(r,i,l+v,h+v,d-v,p-v)||io(o,u,l+v,h+v,d-v,p-v))}drawScaleBox(e,t){e&&(t.fillStyle="#cce5ff20",t.strokeStyle="#3399ff",t.lineWidth=2,t.fillRect(e.x,e.y,e.width,e.height),t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="#fff",t.strokeStyle="#000",this.scale.handles.forEach(r=>{const[i,o]=this.getHandlePosition(r);t.fillRect(i,o,this.scale.handleSize,this.scale.handleSize),t.strokeRect(i,o,this.scale.handleSize,this.scale.handleSize)}))}getHandlePosition(e){const{x:t,y:r,width:i,height:o}=this.scale.rect,u=this.scale.handleSize/2;switch(e){case"nw":return[t-u,r-u];case"n":return[t+i/2-u,r-u];case"ne":return[t+i-u,r-u];case"e":return[t+i-u,r+o/2-u];case"se":return[t+i-u,r+o-u];case"s":return[t+i/2-u,r+o-u];case"sw":return[t-u,r+o-u];case"w":return[t-u,r+o/2-u]}}hitTestHandle(e,t){return this.scale.handles.find(r=>{const[i,o]=this.getHandlePosition(r);return e>=i&&e<=i+this.scale.handleSize&&t>=o&&t<=o+this.scale.handleSize})}resizeRect(e,t,r){const o=t-this.scale.prevMouse.x,u=r-this.scale.prevMouse.y;let{x:l,y:h,width:d,height:p}=this.scale.rect;switch(e){case"nw":l+=o,h+=u,d-=o,p-=u;break;case"n":h+=u,p-=u;break;case"ne":h+=u,d+=o,p-=u;break;case"e":d+=o;break;case"se":d+=o,p+=u;break;case"s":p+=u;break;case"sw":l+=o,d-=o,p+=u;break;case"w":l+=o,d-=o;break}if(d<20){const v=20-d;e.includes("w")&&(l-=v),d=20}if(p<20){const v=20-p;e.includes("n")&&(h-=v),p=20}this.scale.rect.x=l,this.scale.rect.y=h,this.scale.rect.width=d,this.scale.rect.height=p,this.scale.prevMouse={x:t,y:r}}}function io(n,e,t,r,i,o){return n>=t&&n<=i&&e>=r&&e<=o}function Uu(n){const e=Math.min(n.x,n.x+n.width),t=Math.min(n.y,n.y+n.height),r=Math.max(n.x,n.x+n.width),i=Math.max(n.y,n.y+n.height);return[e,t,r,i]}function Fu(n,e){var t,r,i;const[o,u,l,h]=n,[d,p,v,y]=e;return t=(l-o)*(y-p)-(v-d)*(h-u),t===0?!1:(i=((y-p)*(v-o)+(d-v)*(y-u))/t,r=((u-h)*(v-o)+(l-o)*(y-u))/t,0<i&&i<1&&0<r&&r<1)}function Im(n,e,t){if(!e.length)return null;let r=1/0,i=1/0,o=-1/0,u=-1/0;e.forEach(h=>{const d=n.getNodeAttributes(h);d.x<r&&(r=d.x),d.y<i&&(i=d.y),d.x>o&&(o=d.x),d.y>u&&(u=d.y)});const l=t*1.5;return{x:r-l,y:i-l,width:o-r+2*l,height:u-i+2*l}}class zm{constructor(){this.eventBus=po,this.appSettings=new vo(this),this.settings=this.appSettings.settings,this._canvas=new ag(this),this.canvas=this._canvas.canvas,this.layout=new Sm(this),this.graphManager=new cm(this,100),this.rect=new Cm(this),this.menu=new hm(this,pm),this.widget=new Dm(this),this.keyHandler=new lm(this),this.eventHanders=new fm(this),this.simulation=null,this.nodes=[],this.links=[],this.init()}init(){this.menu.init(),this.appSettings.init(),this.widget.init(),this._canvas.init(),this.rect.init(),this.keyHandler.init(),this.eventHanders.init(),this.initSimulation(),this.loadInitialGraph()}initSimulation(){this.nodes=this.graphManager.graph.getNodesForD3(),this.links=this.graphManager.graph.getEdgesForD3(),this.simulation=tg(this.nodes).force("link",Yp(this.links).id(e=>e.id).distance(10).strength(.5)).force("charge",ng().strength(-300)).force("collide",Wp(20)).force("center",kp(this.canvas.width/2,this.canvas.height/2)).force("x",rg(this.canvas.width/2).strength(.05)).force("y",ig(this.canvas.height/1).strength(.05)).velocityDecay(.3).alphaDecay(.02).on("tick",this.ticked.bind(this)),this.appSettings.settings.forceSimulation||this.simulation.stop()}loadInitialGraph(){this.graphManager.generator.clusters(20,20,10)}drawGraph(){const e=this.graphManager.graph,t=this.canvas,r=this.appSettings.settings,i=this._canvas.ctx;i.clearRect(0,0,t.width,t.height),e.forEachEdge((o,u,l,h,d,p)=>{if(u.color||e.setEdgeAttribute(o,"color",r.edge_color),i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(p.x,p.y),i.strokeStyle=u.selected?"orange":u.color,i.lineWidth=r.edge_size,i.stroke(),i.closePath(),r.directed){const y=Math.atan2(p.y-d.y,p.x-d.x),w=p.x-Math.cos(y)*r.node_radius/4,S=p.y-Math.sin(y)*r.node_radius/4;i.beginPath(),i.moveTo(w,S),i.lineTo(w-15*Math.cos(y-Math.PI/6),S-15*Math.sin(y-Math.PI/6)),i.lineTo(w-15*Math.cos(y+Math.PI/6),S-15*Math.sin(y+Math.PI/6)),i.closePath(),i.fillStyle=u.selected?"orange":u.color,i.fill()}}),e.forEachNode((o,u)=>{if(!u.label){const l=rr(o);e.setNodeAttribute(o,"label",l)}u.color||e.setNodeAttribute(o,"color",r.node_color),u.stroke||e.setNodeAttribute(o,"stroke",r.stroke_color),i.beginPath(),i.arc(u.x,u.y,r.node_radius*u.size,0,2*Math.PI),i.fillStyle=u.selected?"orange":u.color,i.fill(),this.settings.stroke_size!=0&&(i.lineWidth=this.settings.stroke_size,i.strokeStyle=u.selected?"orange":u.stroke,i.stroke()),i.closePath(),r.vertexLabel&&(i.fillStyle=this.settings.label_color,i.font=`${r.label_size}px sans-serif`,i.textAlign="center",i.textBaseline="middle",i.fillText(u.label,u.x+r.label_pos.x,u.y+r.label_pos.y))}),this.rect.draw()}ticked(){this.nodes.forEach(e=>{this.graphManager.graph.updateNodeAttributes(e.id,t=>({...t,x:e.x,y:e.y}))}),po.emit("graph:updated",{type:"tick"})}startSimulation(){this.simulation.alpha(.3).restart()}stopSimulation(){this.simulation.stop()}updateSimulation(){this.nodes.length=0,this.nodes=this.graphManager.graph.getNodesForD3(),this.links.length=0,this.links=this.graphManager.graph.getEdgesForD3(),this.simulation.nodes(this.nodes),this.simulation.force("link").links(this.links),this.appSettings.settings.forceSimulation?this.startSimulation():this.stopSimulation()}updateForce(){const e=this.graphManager.graph;this.nodes.length=0,e.forEachNode((t,r)=>{this.nodes.push({id:Number(t),x:r.x,y:r.y})}),this.links.length=0,e.forEachEdge(function(t,r,i,o,u,l){this.links.push({source:Number(i),target:Number(o)})})}}document.addEventListener("DOMContentLoaded",()=>{const n=new zm;window.addEventListener("resize",()=>{n.canvas.width=window.innerWidth,n.canvas.height=window.innerHeight,n.drawGraph()}),document.querySelectorAll("img").forEach(e=>{e.setAttribute("draggable","false")})});
