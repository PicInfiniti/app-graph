var Nd=Object.defineProperty;var Ka=r=>{throw TypeError(r)};var Md=(r,e,t)=>e in r?Nd(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ze=(r,e,t)=>Md(r,typeof e!="symbol"?e+"":e,t),Ya=(r,e,t)=>e.has(r)||Ka("Cannot "+t);var cn=(r,e,t)=>(Ya(r,e,"read from private field"),t?t.call(r):e.get(r)),Xa=(r,e,t)=>e.has(r)?Ka("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Va=(r,e,t,n)=>(Ya(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var Cd={value:()=>{}};function Ln(){for(var r=0,e=arguments.length,t={},n;r<e;++r){if(!(n=arguments[r]+"")||n in t||/[\s.]/.test(n))throw new Error("illegal type: "+n);t[n]=[]}return new kn(t)}function kn(r){this._=r}function Dd(r,e){return r.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");if(o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}kn.prototype=Ln.prototype={constructor:kn,on:function(r,e){var t=this._,n=Dd(r+"",t),o,a=-1,u=n.length;if(arguments.length<2){for(;++a<u;)if((o=(r=n[a]).type)&&(o=Id(t[o],r.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<u;)if(o=(r=n[a]).type)t[o]=Qa(t[o],r.name,e);else if(e==null)for(o in t)t[o]=Qa(t[o],r.name,null);return this},copy:function(){var r={},e=this._;for(var t in e)r[t]=e[t].slice();return new kn(r)},call:function(r,e){if((o=arguments.length-2)>0)for(var t=new Array(o),n=0,o,a;n<o;++n)t[n]=arguments[n+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(a=this._[r],n=0,o=a.length;n<o;++n)a[n].value.apply(e,t)},apply:function(r,e,t){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],o=0,a=n.length;o<a;++o)n[o].value.apply(e,t)}};function Id(r,e){for(var t=0,n=r.length,o;t<n;++t)if((o=r[t]).name===e)return o.value}function Qa(r,e,t){for(var n=0,o=r.length;n<o;++n)if(r[n].name===e){r[n]=Cd,r=r.slice(0,n).concat(r.slice(n+1));break}return t!=null&&r.push({name:e,value:t}),r}var Go="http://www.w3.org/1999/xhtml";const Za={svg:"http://www.w3.org/2000/svg",xhtml:Go,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Pn(r){var e=r+="",t=e.indexOf(":");return t>=0&&(e=r.slice(0,t))!=="xmlns"&&(r=r.slice(t+1)),Za.hasOwnProperty(e)?{space:Za[e],local:r}:r}function $d(r){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Go&&e.documentElement.namespaceURI===Go?e.createElement(r):e.createElementNS(t,r)}}function zd(r){return function(){return this.ownerDocument.createElementNS(r.space,r.local)}}function mc(r){var e=Pn(r);return(e.local?zd:$d)(e)}function Td(){}function Ko(r){return r==null?Td:function(){return this.querySelector(r)}}function Ld(r){typeof r!="function"&&(r=Ko(r));for(var e=this._groups,t=e.length,n=new Array(t),o=0;o<t;++o)for(var a=e[o],u=a.length,l=n[o]=new Array(u),f,h,p=0;p<u;++p)(f=a[p])&&(h=r.call(f,f.__data__,p,a))&&("__data__"in f&&(h.__data__=f.__data__),l[p]=h);return new Fe(n,this._parents)}function Pd(r){return r==null?[]:Array.isArray(r)?r:Array.from(r)}function Gd(){return[]}function bc(r){return r==null?Gd:function(){return this.querySelectorAll(r)}}function Od(r){return function(){return Pd(r.apply(this,arguments))}}function Rd(r){typeof r=="function"?r=Od(r):r=bc(r);for(var e=this._groups,t=e.length,n=[],o=[],a=0;a<t;++a)for(var u=e[a],l=u.length,f,h=0;h<l;++h)(f=u[h])&&(n.push(r.call(f,f.__data__,h,u)),o.push(f));return new Fe(n,o)}function wc(r){return function(){return this.matches(r)}}function xc(r){return function(e){return e.matches(r)}}var qd=Array.prototype.find;function Bd(r){return function(){return qd.call(this.children,r)}}function Ud(){return this.firstElementChild}function jd(r){return this.select(r==null?Ud:Bd(typeof r=="function"?r:xc(r)))}var Fd=Array.prototype.filter;function Wd(){return Array.from(this.children)}function Hd(r){return function(){return Fd.call(this.children,r)}}function Kd(r){return this.selectAll(r==null?Wd:Hd(typeof r=="function"?r:xc(r)))}function Yd(r){typeof r!="function"&&(r=wc(r));for(var e=this._groups,t=e.length,n=new Array(t),o=0;o<t;++o)for(var a=e[o],u=a.length,l=n[o]=[],f,h=0;h<u;++h)(f=a[h])&&r.call(f,f.__data__,h,a)&&l.push(f);return new Fe(n,this._parents)}function Ec(r){return new Array(r.length)}function Xd(){return new Fe(this._enter||this._groups.map(Ec),this._parents)}function Cn(r,e){this.ownerDocument=r.ownerDocument,this.namespaceURI=r.namespaceURI,this._next=null,this._parent=r,this.__data__=e}Cn.prototype={constructor:Cn,appendChild:function(r){return this._parent.insertBefore(r,this._next)},insertBefore:function(r,e){return this._parent.insertBefore(r,e)},querySelector:function(r){return this._parent.querySelector(r)},querySelectorAll:function(r){return this._parent.querySelectorAll(r)}};function Vd(r){return function(){return r}}function Qd(r,e,t,n,o,a){for(var u=0,l,f=e.length,h=a.length;u<h;++u)(l=e[u])?(l.__data__=a[u],n[u]=l):t[u]=new Cn(r,a[u]);for(;u<f;++u)(l=e[u])&&(o[u]=l)}function Zd(r,e,t,n,o,a,u){var l,f,h=new Map,p=e.length,v=a.length,m=new Array(p),b;for(l=0;l<p;++l)(f=e[l])&&(m[l]=b=u.call(f,f.__data__,l,e)+"",h.has(b)?o[l]=f:h.set(b,f));for(l=0;l<v;++l)b=u.call(r,a[l],l,a)+"",(f=h.get(b))?(n[l]=f,f.__data__=a[l],h.delete(b)):t[l]=new Cn(r,a[l]);for(l=0;l<p;++l)(f=e[l])&&h.get(m[l])===f&&(o[l]=f)}function Jd(r){return r.__data__}function eh(r,e){if(!arguments.length)return Array.from(this,Jd);var t=e?Zd:Qd,n=this._parents,o=this._groups;typeof r!="function"&&(r=Vd(r));for(var a=o.length,u=new Array(a),l=new Array(a),f=new Array(a),h=0;h<a;++h){var p=n[h],v=o[h],m=v.length,b=th(r.call(p,p&&p.__data__,h,n)),S=b.length,_=l[h]=new Array(S),N=u[h]=new Array(S),M=f[h]=new Array(m);t(p,v,_,N,M,b,e);for(var k=0,$=0,E,C;k<S;++k)if(E=_[k]){for(k>=$&&($=k+1);!(C=N[$])&&++$<S;);E._next=C||null}}return u=new Fe(u,n),u._enter=l,u._exit=f,u}function th(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function rh(){return new Fe(this._exit||this._groups.map(Ec),this._parents)}function nh(r,e,t){var n=this.enter(),o=this,a=this.exit();return typeof r=="function"?(n=r(n),n&&(n=n.selection())):n=n.append(r+""),e!=null&&(o=e(o),o&&(o=o.selection())),t==null?a.remove():t(a),n&&o?n.merge(o).order():o}function ih(r){for(var e=r.selection?r.selection():r,t=this._groups,n=e._groups,o=t.length,a=n.length,u=Math.min(o,a),l=new Array(o),f=0;f<u;++f)for(var h=t[f],p=n[f],v=h.length,m=l[f]=new Array(v),b,S=0;S<v;++S)(b=h[S]||p[S])&&(m[S]=b);for(;f<o;++f)l[f]=t[f];return new Fe(l,this._parents)}function oh(){for(var r=this._groups,e=-1,t=r.length;++e<t;)for(var n=r[e],o=n.length-1,a=n[o],u;--o>=0;)(u=n[o])&&(a&&u.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(u,a),a=u);return this}function ah(r){r||(r=sh);function e(v,m){return v&&m?r(v.__data__,m.__data__):!v-!m}for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a){for(var u=t[a],l=u.length,f=o[a]=new Array(l),h,p=0;p<l;++p)(h=u[p])&&(f[p]=h);f.sort(e)}return new Fe(o,this._parents).order()}function sh(r,e){return r<e?-1:r>e?1:r>=e?0:NaN}function uh(){var r=arguments[0];return arguments[0]=this,r.apply(null,arguments),this}function ch(){return Array.from(this)}function lh(){for(var r=this._groups,e=0,t=r.length;e<t;++e)for(var n=r[e],o=0,a=n.length;o<a;++o){var u=n[o];if(u)return u}return null}function dh(){let r=0;for(const e of this)++r;return r}function hh(){return!this.node()}function fh(r){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,u=o.length,l;a<u;++a)(l=o[a])&&r.call(l,l.__data__,a,o);return this}function ph(r){return function(){this.removeAttribute(r)}}function gh(r){return function(){this.removeAttributeNS(r.space,r.local)}}function vh(r,e){return function(){this.setAttribute(r,e)}}function yh(r,e){return function(){this.setAttributeNS(r.space,r.local,e)}}function mh(r,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(r):this.setAttribute(r,t)}}function bh(r,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(r.space,r.local):this.setAttributeNS(r.space,r.local,t)}}function wh(r,e){var t=Pn(r);if(arguments.length<2){var n=this.node();return t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}return this.each((e==null?t.local?gh:ph:typeof e=="function"?t.local?bh:mh:t.local?yh:vh)(t,e))}function _c(r){return r.ownerDocument&&r.ownerDocument.defaultView||r.document&&r||r.defaultView}function xh(r){return function(){this.style.removeProperty(r)}}function Eh(r,e,t){return function(){this.style.setProperty(r,e,t)}}function _h(r,e,t){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(r):this.style.setProperty(r,n,t)}}function Sh(r,e,t){return arguments.length>1?this.each((e==null?xh:typeof e=="function"?_h:Eh)(r,e,t??"")):fr(this.node(),r)}function fr(r,e){return r.style.getPropertyValue(e)||_c(r).getComputedStyle(r,null).getPropertyValue(e)}function Ah(r){return function(){delete this[r]}}function kh(r,e){return function(){this[r]=e}}function Nh(r,e){return function(){var t=e.apply(this,arguments);t==null?delete this[r]:this[r]=t}}function Mh(r,e){return arguments.length>1?this.each((e==null?Ah:typeof e=="function"?Nh:kh)(r,e)):this.node()[r]}function Sc(r){return r.trim().split(/^|\s+/)}function Yo(r){return r.classList||new Ac(r)}function Ac(r){this._node=r,this._names=Sc(r.getAttribute("class")||"")}Ac.prototype={add:function(r){var e=this._names.indexOf(r);e<0&&(this._names.push(r),this._node.setAttribute("class",this._names.join(" ")))},remove:function(r){var e=this._names.indexOf(r);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(r){return this._names.indexOf(r)>=0}};function kc(r,e){for(var t=Yo(r),n=-1,o=e.length;++n<o;)t.add(e[n])}function Nc(r,e){for(var t=Yo(r),n=-1,o=e.length;++n<o;)t.remove(e[n])}function Ch(r){return function(){kc(this,r)}}function Dh(r){return function(){Nc(this,r)}}function Ih(r,e){return function(){(e.apply(this,arguments)?kc:Nc)(this,r)}}function $h(r,e){var t=Sc(r+"");if(arguments.length<2){for(var n=Yo(this.node()),o=-1,a=t.length;++o<a;)if(!n.contains(t[o]))return!1;return!0}return this.each((typeof e=="function"?Ih:e?Ch:Dh)(t,e))}function zh(){this.textContent=""}function Th(r){return function(){this.textContent=r}}function Lh(r){return function(){var e=r.apply(this,arguments);this.textContent=e??""}}function Ph(r){return arguments.length?this.each(r==null?zh:(typeof r=="function"?Lh:Th)(r)):this.node().textContent}function Gh(){this.innerHTML=""}function Oh(r){return function(){this.innerHTML=r}}function Rh(r){return function(){var e=r.apply(this,arguments);this.innerHTML=e??""}}function qh(r){return arguments.length?this.each(r==null?Gh:(typeof r=="function"?Rh:Oh)(r)):this.node().innerHTML}function Bh(){this.nextSibling&&this.parentNode.appendChild(this)}function Uh(){return this.each(Bh)}function jh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fh(){return this.each(jh)}function Wh(r){var e=typeof r=="function"?r:mc(r);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Hh(){return null}function Kh(r,e){var t=typeof r=="function"?r:mc(r),n=e==null?Hh:typeof e=="function"?e:Ko(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})}function Yh(){var r=this.parentNode;r&&r.removeChild(this)}function Xh(){return this.each(Yh)}function Vh(){var r=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(r,this.nextSibling):r}function Qh(){var r=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(r,this.nextSibling):r}function Zh(r){return this.select(r?Qh:Vh)}function Jh(r){return arguments.length?this.property("__data__",r):this.node().__data__}function ef(r){return function(e){r.call(this,e,this.__data__)}}function tf(r){return r.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function rf(r){return function(){var e=this.__on;if(e){for(var t=0,n=-1,o=e.length,a;t<o;++t)a=e[t],(!r.type||a.type===r.type)&&a.name===r.name?this.removeEventListener(a.type,a.listener,a.options):e[++n]=a;++n?e.length=n:delete this.__on}}}function nf(r,e,t){return function(){var n=this.__on,o,a=ef(e);if(n){for(var u=0,l=n.length;u<l;++u)if((o=n[u]).type===r.type&&o.name===r.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=t),o.value=e;return}}this.addEventListener(r.type,a,t),o={type:r.type,name:r.name,value:e,listener:a,options:t},n?n.push(o):this.__on=[o]}}function of(r,e,t){var n=tf(r+""),o,a=n.length,u;if(arguments.length<2){var l=this.node().__on;if(l){for(var f=0,h=l.length,p;f<h;++f)for(o=0,p=l[f];o<a;++o)if((u=n[o]).type===p.type&&u.name===p.name)return p.value}return}for(l=e?nf:rf,o=0;o<a;++o)this.each(l(n[o],e,t));return this}function Mc(r,e,t){var n=_c(r),o=n.CustomEvent;typeof o=="function"?o=new o(e,t):(o=n.document.createEvent("Event"),t?(o.initEvent(e,t.bubbles,t.cancelable),o.detail=t.detail):o.initEvent(e,!1,!1)),r.dispatchEvent(o)}function af(r,e){return function(){return Mc(this,r,e)}}function sf(r,e){return function(){return Mc(this,r,e.apply(this,arguments))}}function uf(r,e){return this.each((typeof e=="function"?sf:af)(r,e))}function*cf(){for(var r=this._groups,e=0,t=r.length;e<t;++e)for(var n=r[e],o=0,a=n.length,u;o<a;++o)(u=n[o])&&(yield u)}var Cc=[null];function Fe(r,e){this._groups=r,this._parents=e}function jr(){return new Fe([[document.documentElement]],Cc)}function lf(){return this}Fe.prototype=jr.prototype={constructor:Fe,select:Ld,selectAll:Rd,selectChild:jd,selectChildren:Kd,filter:Yd,data:eh,enter:Xd,exit:rh,join:nh,merge:ih,selection:lf,order:oh,sort:ah,call:uh,nodes:ch,node:lh,size:dh,empty:hh,each:fh,attr:wh,style:Sh,property:Mh,classed:$h,text:Ph,html:qh,raise:Uh,lower:Fh,append:Wh,insert:Kh,remove:Xh,clone:Zh,datum:Jh,on:of,dispatch:uf,[Symbol.iterator]:cf};function Wt(r){return typeof r=="string"?new Fe([[document.querySelector(r)]],[document.documentElement]):new Fe([[r]],Cc)}function df(r){let e;for(;e=r.sourceEvent;)r=e;return r}function Ye(r,e){if(r=df(r),e===void 0&&(e=r.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var n=t.createSVGPoint();return n.x=r.clientX,n.y=r.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[r.clientX-o.left-e.clientLeft,r.clientY-o.top-e.clientTop]}}return[r.pageX,r.pageY]}const hf={passive:!1},Or={capture:!0,passive:!1};function oi(r){r.stopImmediatePropagation()}function dr(r){r.preventDefault(),r.stopImmediatePropagation()}function ff(r){var e=r.document.documentElement,t=Wt(r).on("dragstart.drag",dr,Or);"onselectstart"in e?t.on("selectstart.drag",dr,Or):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function pf(r,e){var t=r.document.documentElement,n=Wt(r).on("dragstart.drag",null);e&&(n.on("click.drag",dr,Or),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in t?n.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const ln=r=>()=>r;function Oo(r,{sourceEvent:e,subject:t,target:n,identifier:o,active:a,x:u,y:l,dx:f,dy:h,dispatch:p}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:p}})}Oo.prototype.on=function(){var r=this._.on.apply(this._,arguments);return r===this._?this:r};function gf(r){return!r.ctrlKey&&!r.button}function vf(){return this.parentNode}function yf(r,e){return e??{x:r.x,y:r.y}}function mf(){return navigator.maxTouchPoints||"ontouchstart"in this}function bf(){var r=gf,e=vf,t=yf,n=mf,o={},a=Ln("start","drag","end"),u=0,l,f,h,p,v=0;function m(E){E.on("mousedown.drag",b).filter(n).on("touchstart.drag",N).on("touchmove.drag",M,hf).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(E,C){if(!(p||!r.call(this,E,C))){var O=$(this,e.call(this,E,C),E,C,"mouse");O&&(Wt(E.view).on("mousemove.drag",S,Or).on("mouseup.drag",_,Or),ff(E.view),oi(E),h=!1,l=E.clientX,f=E.clientY,O("start",E))}}function S(E){if(dr(E),!h){var C=E.clientX-l,O=E.clientY-f;h=C*C+O*O>v}o.mouse("drag",E)}function _(E){Wt(E.view).on("mousemove.drag mouseup.drag",null),pf(E.view,h),dr(E),o.mouse("end",E)}function N(E,C){if(r.call(this,E,C)){var O=E.changedTouches,w=e.call(this,E,C),I=O.length,z,T;for(z=0;z<I;++z)(T=$(this,w,E,C,O[z].identifier,O[z]))&&(oi(E),T("start",E,O[z]))}}function M(E){var C=E.changedTouches,O=C.length,w,I;for(w=0;w<O;++w)(I=o[C[w].identifier])&&(dr(E),I("drag",E,C[w]))}function k(E){var C=E.changedTouches,O=C.length,w,I;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),w=0;w<O;++w)(I=o[C[w].identifier])&&(oi(E),I("end",E,C[w]))}function $(E,C,O,w,I,z){var T=a.copy(),R=Ye(z||O,C),j,V,te;if((te=t.call(E,new Oo("beforestart",{sourceEvent:O,target:m,identifier:I,active:u,x:R[0],y:R[1],dx:0,dy:0,dispatch:T}),w))!=null)return j=te.x-R[0]||0,V=te.y-R[1]||0,function Q(H,G,B){var W=R,Y;switch(H){case"start":o[I]=Q,Y=u++;break;case"end":delete o[I],--u;case"drag":R=Ye(B||G,C),Y=u;break}T.call(H,E,new Oo(H,{sourceEvent:G,subject:te,target:m,identifier:I,active:Y,x:R[0]+j,y:R[1]+V,dx:R[0]-W[0],dy:R[1]-W[1],dispatch:T}),w)}}return m.filter=function(E){return arguments.length?(r=typeof E=="function"?E:ln(!!E),m):r},m.container=function(E){return arguments.length?(e=typeof E=="function"?E:ln(E),m):e},m.subject=function(E){return arguments.length?(t=typeof E=="function"?E:ln(E),m):t},m.touchable=function(E){return arguments.length?(n=typeof E=="function"?E:ln(!!E),m):n},m.on=function(){var E=a.on.apply(a,arguments);return E===a?m:E},m.clickDistance=function(E){return arguments.length?(v=(E=+E)*E,m):Math.sqrt(v)},m}function Xo(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function Dc(r,e){var t=Object.create(r.prototype);for(var n in e)t[n]=e[n];return t}function Fr(){}var Rr=.7,Dn=1/Rr,hr="\\s*([+-]?\\d+)\\s*",qr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wf=/^#([0-9a-f]{3,8})$/,xf=new RegExp(`^rgb\\(${hr},${hr},${hr}\\)$`),Ef=new RegExp(`^rgb\\(${ft},${ft},${ft}\\)$`),_f=new RegExp(`^rgba\\(${hr},${hr},${hr},${qr}\\)$`),Sf=new RegExp(`^rgba\\(${ft},${ft},${ft},${qr}\\)$`),Af=new RegExp(`^hsl\\(${qr},${ft},${ft}\\)$`),kf=new RegExp(`^hsla\\(${qr},${ft},${ft},${qr}\\)$`),Ja={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xo(Fr,Br,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:es,formatHex:es,formatHex8:Nf,formatHsl:Mf,formatRgb:ts,toString:ts});function es(){return this.rgb().formatHex()}function Nf(){return this.rgb().formatHex8()}function Mf(){return Ic(this).formatHsl()}function ts(){return this.rgb().formatRgb()}function Br(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=wf.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?rs(e):t===3?new Be(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?dn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?dn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=xf.exec(r))?new Be(e[1],e[2],e[3],1):(e=Ef.exec(r))?new Be(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_f.exec(r))?dn(e[1],e[2],e[3],e[4]):(e=Sf.exec(r))?dn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Af.exec(r))?os(e[1],e[2]/100,e[3]/100,1):(e=kf.exec(r))?os(e[1],e[2]/100,e[3]/100,e[4]):Ja.hasOwnProperty(r)?rs(Ja[r]):r==="transparent"?new Be(NaN,NaN,NaN,0):null}function rs(r){return new Be(r>>16&255,r>>8&255,r&255,1)}function dn(r,e,t,n){return n<=0&&(r=e=t=NaN),new Be(r,e,t,n)}function Cf(r){return r instanceof Fr||(r=Br(r)),r?(r=r.rgb(),new Be(r.r,r.g,r.b,r.opacity)):new Be}function Ro(r,e,t,n){return arguments.length===1?Cf(r):new Be(r,e,t,n??1)}function Be(r,e,t,n){this.r=+r,this.g=+e,this.b=+t,this.opacity=+n}Xo(Be,Ro,Dc(Fr,{brighter(r){return r=r==null?Dn:Math.pow(Dn,r),new Be(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?Rr:Math.pow(Rr,r),new Be(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Be(Ht(this.r),Ht(this.g),Ht(this.b),In(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ns,formatHex:ns,formatHex8:Df,formatRgb:is,toString:is}));function ns(){return`#${jt(this.r)}${jt(this.g)}${jt(this.b)}`}function Df(){return`#${jt(this.r)}${jt(this.g)}${jt(this.b)}${jt((isNaN(this.opacity)?1:this.opacity)*255)}`}function is(){const r=In(this.opacity);return`${r===1?"rgb(":"rgba("}${Ht(this.r)}, ${Ht(this.g)}, ${Ht(this.b)}${r===1?")":`, ${r})`}`}function In(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function Ht(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function jt(r){return r=Ht(r),(r<16?"0":"")+r.toString(16)}function os(r,e,t,n){return n<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new ot(r,e,t,n)}function Ic(r){if(r instanceof ot)return new ot(r.h,r.s,r.l,r.opacity);if(r instanceof Fr||(r=Br(r)),!r)return new ot;if(r instanceof ot)return r;r=r.rgb();var e=r.r/255,t=r.g/255,n=r.b/255,o=Math.min(e,t,n),a=Math.max(e,t,n),u=NaN,l=a-o,f=(a+o)/2;return l?(e===a?u=(t-n)/l+(t<n)*6:t===a?u=(n-e)/l+2:u=(e-t)/l+4,l/=f<.5?a+o:2-a-o,u*=60):l=f>0&&f<1?0:u,new ot(u,l,f,r.opacity)}function If(r,e,t,n){return arguments.length===1?Ic(r):new ot(r,e,t,n??1)}function ot(r,e,t,n){this.h=+r,this.s=+e,this.l=+t,this.opacity=+n}Xo(ot,If,Dc(Fr,{brighter(r){return r=r==null?Dn:Math.pow(Dn,r),new ot(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?Rr:Math.pow(Rr,r),new ot(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,o=2*t-n;return new Be(ai(r>=240?r-240:r+120,o,n),ai(r,o,n),ai(r<120?r+240:r-120,o,n),this.opacity)},clamp(){return new ot(as(this.h),hn(this.s),hn(this.l),In(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=In(this.opacity);return`${r===1?"hsl(":"hsla("}${as(this.h)}, ${hn(this.s)*100}%, ${hn(this.l)*100}%${r===1?")":`, ${r})`}`}}));function as(r){return r=(r||0)%360,r<0?r+360:r}function hn(r){return Math.max(0,Math.min(1,r||0))}function ai(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const $c=r=>()=>r;function $f(r,e){return function(t){return r+t*e}}function zf(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(n){return Math.pow(r+n*e,t)}}function Tf(r){return(r=+r)==1?zc:function(e,t){return t-e?zf(e,t,r):$c(isNaN(e)?t:e)}}function zc(r,e){var t=e-r;return t?$f(r,t):$c(isNaN(r)?e:r)}const ss=function r(e){var t=Tf(e);function n(o,a){var u=t((o=Ro(o)).r,(a=Ro(a)).r),l=t(o.g,a.g),f=t(o.b,a.b),h=zc(o.opacity,a.opacity);return function(p){return o.r=u(p),o.g=l(p),o.b=f(p),o.opacity=h(p),o+""}}return n.gamma=r,n}(1);function It(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}var qo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,si=new RegExp(qo.source,"g");function Lf(r){return function(){return r}}function Pf(r){return function(e){return r(e)+""}}function Gf(r,e){var t=qo.lastIndex=si.lastIndex=0,n,o,a,u=-1,l=[],f=[];for(r=r+"",e=e+"";(n=qo.exec(r))&&(o=si.exec(e));)(a=o.index)>t&&(a=e.slice(t,a),l[u]?l[u]+=a:l[++u]=a),(n=n[0])===(o=o[0])?l[u]?l[u]+=o:l[++u]=o:(l[++u]=null,f.push({i:u,x:It(n,o)})),t=si.lastIndex;return t<e.length&&(a=e.slice(t),l[u]?l[u]+=a:l[++u]=a),l.length<2?f[0]?Pf(f[0].x):Lf(e):(e=f.length,function(h){for(var p=0,v;p<e;++p)l[(v=f[p]).i]=v.x(h);return l.join("")})}var us=180/Math.PI,Bo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Tc(r,e,t,n,o,a){var u,l,f;return(u=Math.sqrt(r*r+e*e))&&(r/=u,e/=u),(f=r*t+e*n)&&(t-=r*f,n-=e*f),(l=Math.sqrt(t*t+n*n))&&(t/=l,n/=l,f/=l),r*n<e*t&&(r=-r,e=-e,f=-f,u=-u),{translateX:o,translateY:a,rotate:Math.atan2(e,r)*us,skewX:Math.atan(f)*us,scaleX:u,scaleY:l}}var fn;function Of(r){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(r+"");return e.isIdentity?Bo:Tc(e.a,e.b,e.c,e.d,e.e,e.f)}function Rf(r){return r==null||(fn||(fn=document.createElementNS("http://www.w3.org/2000/svg","g")),fn.setAttribute("transform",r),!(r=fn.transform.baseVal.consolidate()))?Bo:(r=r.matrix,Tc(r.a,r.b,r.c,r.d,r.e,r.f))}function Lc(r,e,t,n){function o(h){return h.length?h.pop()+" ":""}function a(h,p,v,m,b,S){if(h!==v||p!==m){var _=b.push("translate(",null,e,null,t);S.push({i:_-4,x:It(h,v)},{i:_-2,x:It(p,m)})}else(v||m)&&b.push("translate("+v+e+m+t)}function u(h,p,v,m){h!==p?(h-p>180?p+=360:p-h>180&&(h+=360),m.push({i:v.push(o(v)+"rotate(",null,n)-2,x:It(h,p)})):p&&v.push(o(v)+"rotate("+p+n)}function l(h,p,v,m){h!==p?m.push({i:v.push(o(v)+"skewX(",null,n)-2,x:It(h,p)}):p&&v.push(o(v)+"skewX("+p+n)}function f(h,p,v,m,b,S){if(h!==v||p!==m){var _=b.push(o(b)+"scale(",null,",",null,")");S.push({i:_-4,x:It(h,v)},{i:_-2,x:It(p,m)})}else(v!==1||m!==1)&&b.push(o(b)+"scale("+v+","+m+")")}return function(h,p){var v=[],m=[];return h=r(h),p=r(p),a(h.translateX,h.translateY,p.translateX,p.translateY,v,m),u(h.rotate,p.rotate,v,m),l(h.skewX,p.skewX,v,m),f(h.scaleX,h.scaleY,p.scaleX,p.scaleY,v,m),h=p=null,function(b){for(var S=-1,_=m.length,N;++S<_;)v[(N=m[S]).i]=N.x(b);return v.join("")}}}var qf=Lc(Of,"px, ","px)","deg)"),Bf=Lc(Rf,", ",")",")"),pr=0,zr=0,kr=0,Pc=1e3,$n,Tr,zn=0,Yt=0,Gn=0,Ur=typeof performance=="object"&&performance.now?performance:Date,Gc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function Vo(){return Yt||(Gc(Uf),Yt=Ur.now()+Gn)}function Uf(){Yt=0}function Tn(){this._call=this._time=this._next=null}Tn.prototype=Qo.prototype={constructor:Tn,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?Vo():+t)+(e==null?0:+e),!this._next&&Tr!==this&&(Tr?Tr._next=this:$n=this,Tr=this),this._call=r,this._time=t,Uo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Uo())}};function Qo(r,e,t){var n=new Tn;return n.restart(r,e,t),n}function jf(){Vo(),++pr;for(var r=$n,e;r;)(e=Yt-r._time)>=0&&r._call.call(void 0,e),r=r._next;--pr}function cs(){Yt=(zn=Ur.now())+Gn,pr=zr=0;try{jf()}finally{pr=0,Wf(),Yt=0}}function Ff(){var r=Ur.now(),e=r-zn;e>Pc&&(Gn-=e,zn=r)}function Wf(){for(var r,e=$n,t,n=1/0;e;)e._call?(n>e._time&&(n=e._time),r=e,e=e._next):(t=e._next,e._next=null,e=r?r._next=t:$n=t);Tr=r,Uo(n)}function Uo(r){if(!pr){zr&&(zr=clearTimeout(zr));var e=r-Yt;e>24?(r<1/0&&(zr=setTimeout(cs,r-Ur.now()-Gn)),kr&&(kr=clearInterval(kr))):(kr||(zn=Ur.now(),kr=setInterval(Ff,Pc)),pr=1,Gc(cs))}}function ls(r,e,t){var n=new Tn;return e=e==null?0:+e,n.restart(o=>{n.stop(),r(o+e)},e,t),n}var Hf=Ln("start","end","cancel","interrupt"),Kf=[],Oc=0,ds=1,jo=2,Nn=3,hs=4,Fo=5,Mn=6;function On(r,e,t,n,o,a){var u=r.__transition;if(!u)r.__transition={};else if(t in u)return;Yf(r,t,{name:e,index:n,group:o,on:Hf,tween:Kf,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Oc})}function Zo(r,e){var t=at(r,e);if(t.state>Oc)throw new Error("too late; already scheduled");return t}function pt(r,e){var t=at(r,e);if(t.state>Nn)throw new Error("too late; already running");return t}function at(r,e){var t=r.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function Yf(r,e,t){var n=r.__transition,o;n[e]=t,t.timer=Qo(a,0,t.time);function a(h){t.state=ds,t.timer.restart(u,t.delay,t.time),t.delay<=h&&u(h-t.delay)}function u(h){var p,v,m,b;if(t.state!==ds)return f();for(p in n)if(b=n[p],b.name===t.name){if(b.state===Nn)return ls(u);b.state===hs?(b.state=Mn,b.timer.stop(),b.on.call("interrupt",r,r.__data__,b.index,b.group),delete n[p]):+p<e&&(b.state=Mn,b.timer.stop(),b.on.call("cancel",r,r.__data__,b.index,b.group),delete n[p])}if(ls(function(){t.state===Nn&&(t.state=hs,t.timer.restart(l,t.delay,t.time),l(h))}),t.state=jo,t.on.call("start",r,r.__data__,t.index,t.group),t.state===jo){for(t.state=Nn,o=new Array(m=t.tween.length),p=0,v=-1;p<m;++p)(b=t.tween[p].value.call(r,r.__data__,t.index,t.group))&&(o[++v]=b);o.length=v+1}}function l(h){for(var p=h<t.duration?t.ease.call(null,h/t.duration):(t.timer.restart(f),t.state=Fo,1),v=-1,m=o.length;++v<m;)o[v].call(r,p);t.state===Fo&&(t.on.call("end",r,r.__data__,t.index,t.group),f())}function f(){t.state=Mn,t.timer.stop(),delete n[e];for(var h in n)return;delete r.__transition}}function Xf(r,e){var t=r.__transition,n,o,a=!0,u;if(t){e=e==null?null:e+"";for(u in t){if((n=t[u]).name!==e){a=!1;continue}o=n.state>jo&&n.state<Fo,n.state=Mn,n.timer.stop(),n.on.call(o?"interrupt":"cancel",r,r.__data__,n.index,n.group),delete t[u]}a&&delete r.__transition}}function Vf(r){return this.each(function(){Xf(this,r)})}function Qf(r,e){var t,n;return function(){var o=pt(this,r),a=o.tween;if(a!==t){n=t=a;for(var u=0,l=n.length;u<l;++u)if(n[u].name===e){n=n.slice(),n.splice(u,1);break}}o.tween=n}}function Zf(r,e,t){var n,o;if(typeof t!="function")throw new Error;return function(){var a=pt(this,r),u=a.tween;if(u!==n){o=(n=u).slice();for(var l={name:e,value:t},f=0,h=o.length;f<h;++f)if(o[f].name===e){o[f]=l;break}f===h&&o.push(l)}a.tween=o}}function Jf(r,e){var t=this._id;if(r+="",arguments.length<2){for(var n=at(this.node(),t).tween,o=0,a=n.length,u;o<a;++o)if((u=n[o]).name===r)return u.value;return null}return this.each((e==null?Qf:Zf)(t,r,e))}function Jo(r,e,t){var n=r._id;return r.each(function(){var o=pt(this,n);(o.value||(o.value={}))[e]=t.apply(this,arguments)}),function(o){return at(o,n).value[e]}}function Rc(r,e){var t;return(typeof e=="number"?It:e instanceof Br?ss:(t=Br(e))?(e=t,ss):Gf)(r,e)}function ep(r){return function(){this.removeAttribute(r)}}function tp(r){return function(){this.removeAttributeNS(r.space,r.local)}}function rp(r,e,t){var n,o=t+"",a;return function(){var u=this.getAttribute(r);return u===o?null:u===n?a:a=e(n=u,t)}}function np(r,e,t){var n,o=t+"",a;return function(){var u=this.getAttributeNS(r.space,r.local);return u===o?null:u===n?a:a=e(n=u,t)}}function ip(r,e,t){var n,o,a;return function(){var u,l=t(this),f;return l==null?void this.removeAttribute(r):(u=this.getAttribute(r),f=l+"",u===f?null:u===n&&f===o?a:(o=f,a=e(n=u,l)))}}function op(r,e,t){var n,o,a;return function(){var u,l=t(this),f;return l==null?void this.removeAttributeNS(r.space,r.local):(u=this.getAttributeNS(r.space,r.local),f=l+"",u===f?null:u===n&&f===o?a:(o=f,a=e(n=u,l)))}}function ap(r,e){var t=Pn(r),n=t==="transform"?Bf:Rc;return this.attrTween(r,typeof e=="function"?(t.local?op:ip)(t,n,Jo(this,"attr."+r,e)):e==null?(t.local?tp:ep)(t):(t.local?np:rp)(t,n,e))}function sp(r,e){return function(t){this.setAttribute(r,e.call(this,t))}}function up(r,e){return function(t){this.setAttributeNS(r.space,r.local,e.call(this,t))}}function cp(r,e){var t,n;function o(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&up(r,a)),t}return o._value=e,o}function lp(r,e){var t,n;function o(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&sp(r,a)),t}return o._value=e,o}function dp(r,e){var t="attr."+r;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var n=Pn(r);return this.tween(t,(n.local?cp:lp)(n,e))}function hp(r,e){return function(){Zo(this,r).delay=+e.apply(this,arguments)}}function fp(r,e){return e=+e,function(){Zo(this,r).delay=e}}function pp(r){var e=this._id;return arguments.length?this.each((typeof r=="function"?hp:fp)(e,r)):at(this.node(),e).delay}function gp(r,e){return function(){pt(this,r).duration=+e.apply(this,arguments)}}function vp(r,e){return e=+e,function(){pt(this,r).duration=e}}function yp(r){var e=this._id;return arguments.length?this.each((typeof r=="function"?gp:vp)(e,r)):at(this.node(),e).duration}function mp(r,e){if(typeof e!="function")throw new Error;return function(){pt(this,r).ease=e}}function bp(r){var e=this._id;return arguments.length?this.each(mp(e,r)):at(this.node(),e).ease}function wp(r,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;pt(this,r).ease=t}}function xp(r){if(typeof r!="function")throw new Error;return this.each(wp(this._id,r))}function Ep(r){typeof r!="function"&&(r=wc(r));for(var e=this._groups,t=e.length,n=new Array(t),o=0;o<t;++o)for(var a=e[o],u=a.length,l=n[o]=[],f,h=0;h<u;++h)(f=a[h])&&r.call(f,f.__data__,h,a)&&l.push(f);return new Et(n,this._parents,this._name,this._id)}function _p(r){if(r._id!==this._id)throw new Error;for(var e=this._groups,t=r._groups,n=e.length,o=t.length,a=Math.min(n,o),u=new Array(n),l=0;l<a;++l)for(var f=e[l],h=t[l],p=f.length,v=u[l]=new Array(p),m,b=0;b<p;++b)(m=f[b]||h[b])&&(v[b]=m);for(;l<n;++l)u[l]=e[l];return new Et(u,this._parents,this._name,this._id)}function Sp(r){return(r+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function Ap(r,e,t){var n,o,a=Sp(e)?Zo:pt;return function(){var u=a(this,r),l=u.on;l!==n&&(o=(n=l).copy()).on(e,t),u.on=o}}function kp(r,e){var t=this._id;return arguments.length<2?at(this.node(),t).on.on(r):this.each(Ap(t,r,e))}function Np(r){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==r)return;e&&e.removeChild(this)}}function Mp(){return this.on("end.remove",Np(this._id))}function Cp(r){var e=this._name,t=this._id;typeof r!="function"&&(r=Ko(r));for(var n=this._groups,o=n.length,a=new Array(o),u=0;u<o;++u)for(var l=n[u],f=l.length,h=a[u]=new Array(f),p,v,m=0;m<f;++m)(p=l[m])&&(v=r.call(p,p.__data__,m,l))&&("__data__"in p&&(v.__data__=p.__data__),h[m]=v,On(h[m],e,t,m,h,at(p,t)));return new Et(a,this._parents,e,t)}function Dp(r){var e=this._name,t=this._id;typeof r!="function"&&(r=bc(r));for(var n=this._groups,o=n.length,a=[],u=[],l=0;l<o;++l)for(var f=n[l],h=f.length,p,v=0;v<h;++v)if(p=f[v]){for(var m=r.call(p,p.__data__,v,f),b,S=at(p,t),_=0,N=m.length;_<N;++_)(b=m[_])&&On(b,e,t,_,m,S);a.push(m),u.push(p)}return new Et(a,u,e,t)}var Ip=jr.prototype.constructor;function $p(){return new Ip(this._groups,this._parents)}function zp(r,e){var t,n,o;return function(){var a=fr(this,r),u=(this.style.removeProperty(r),fr(this,r));return a===u?null:a===t&&u===n?o:o=e(t=a,n=u)}}function qc(r){return function(){this.style.removeProperty(r)}}function Tp(r,e,t){var n,o=t+"",a;return function(){var u=fr(this,r);return u===o?null:u===n?a:a=e(n=u,t)}}function Lp(r,e,t){var n,o,a;return function(){var u=fr(this,r),l=t(this),f=l+"";return l==null&&(f=l=(this.style.removeProperty(r),fr(this,r))),u===f?null:u===n&&f===o?a:(o=f,a=e(n=u,l))}}function Pp(r,e){var t,n,o,a="style."+e,u="end."+a,l;return function(){var f=pt(this,r),h=f.on,p=f.value[a]==null?l||(l=qc(e)):void 0;(h!==t||o!==p)&&(n=(t=h).copy()).on(u,o=p),f.on=n}}function Gp(r,e,t){var n=(r+="")=="transform"?qf:Rc;return e==null?this.styleTween(r,zp(r,n)).on("end.style."+r,qc(r)):typeof e=="function"?this.styleTween(r,Lp(r,n,Jo(this,"style."+r,e))).each(Pp(this._id,r)):this.styleTween(r,Tp(r,n,e),t).on("end.style."+r,null)}function Op(r,e,t){return function(n){this.style.setProperty(r,e.call(this,n),t)}}function Rp(r,e,t){var n,o;function a(){var u=e.apply(this,arguments);return u!==o&&(n=(o=u)&&Op(r,u,t)),n}return a._value=e,a}function qp(r,e,t){var n="style."+(r+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,Rp(r,e,t??""))}function Bp(r){return function(){this.textContent=r}}function Up(r){return function(){var e=r(this);this.textContent=e??""}}function jp(r){return this.tween("text",typeof r=="function"?Up(Jo(this,"text",r)):Bp(r==null?"":r+""))}function Fp(r){return function(e){this.textContent=r.call(this,e)}}function Wp(r){var e,t;function n(){var o=r.apply(this,arguments);return o!==t&&(e=(t=o)&&Fp(o)),e}return n._value=r,n}function Hp(r){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(r==null)return this.tween(e,null);if(typeof r!="function")throw new Error;return this.tween(e,Wp(r))}function Kp(){for(var r=this._name,e=this._id,t=Bc(),n=this._groups,o=n.length,a=0;a<o;++a)for(var u=n[a],l=u.length,f,h=0;h<l;++h)if(f=u[h]){var p=at(f,e);On(f,r,t,h,u,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Et(n,this._parents,r,t)}function Yp(){var r,e,t=this,n=t._id,o=t.size();return new Promise(function(a,u){var l={value:u},f={value:function(){--o===0&&a()}};t.each(function(){var h=pt(this,n),p=h.on;p!==r&&(e=(r=p).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(f)),h.on=e}),o===0&&a()})}var Xp=0;function Et(r,e,t,n){this._groups=r,this._parents=e,this._name=t,this._id=n}function Bc(){return++Xp}var wt=jr.prototype;Et.prototype={constructor:Et,select:Cp,selectAll:Dp,selectChild:wt.selectChild,selectChildren:wt.selectChildren,filter:Ep,merge:_p,selection:$p,transition:Kp,call:wt.call,nodes:wt.nodes,node:wt.node,size:wt.size,empty:wt.empty,each:wt.each,on:kp,attr:ap,attrTween:dp,style:Gp,styleTween:qp,text:jp,textTween:Hp,remove:Mp,tween:Jf,delay:pp,duration:yp,ease:bp,easeVarying:xp,end:Yp,[Symbol.iterator]:wt[Symbol.iterator]};function Vp(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var Qp={time:null,delay:0,duration:250,ease:Vp};function Zp(r,e){for(var t;!(t=r.__transition)||!(t=t[e]);)if(!(r=r.parentNode))throw new Error(`transition ${e} not found`);return t}function Jp(r){var e,t;r instanceof Et?(e=r._id,r=r._name):(e=Bc(),(t=Qp).time=Vo(),r=r==null?null:r+"");for(var n=this._groups,o=n.length,a=0;a<o;++a)for(var u=n[a],l=u.length,f,h=0;h<l;++h)(f=u[h])&&On(f,r,e,h,u,t||Zp(f,e));return new Et(n,this._parents,r,e)}jr.prototype.interrupt=Vf;jr.prototype.transition=Jp;function eg(r,e){var t,n=1;r==null&&(r=0),e==null&&(e=0);function o(){var a,u=t.length,l,f=0,h=0;for(a=0;a<u;++a)l=t[a],f+=l.x,h+=l.y;for(f=(f/u-r)*n,h=(h/u-e)*n,a=0;a<u;++a)l=t[a],l.x-=f,l.y-=h}return o.initialize=function(a){t=a},o.x=function(a){return arguments.length?(r=+a,o):r},o.y=function(a){return arguments.length?(e=+a,o):e},o.strength=function(a){return arguments.length?(n=+a,o):n},o}function tg(r){const e=+this._x.call(null,r),t=+this._y.call(null,r);return Uc(this.cover(e,t),e,t,r)}function Uc(r,e,t,n){if(isNaN(e)||isNaN(t))return r;var o,a=r._root,u={data:n},l=r._x0,f=r._y0,h=r._x1,p=r._y1,v,m,b,S,_,N,M,k;if(!a)return r._root=u,r;for(;a.length;)if((_=e>=(v=(l+h)/2))?l=v:h=v,(N=t>=(m=(f+p)/2))?f=m:p=m,o=a,!(a=a[M=N<<1|_]))return o[M]=u,r;if(b=+r._x.call(null,a.data),S=+r._y.call(null,a.data),e===b&&t===S)return u.next=a,o?o[M]=u:r._root=u,r;do o=o?o[M]=new Array(4):r._root=new Array(4),(_=e>=(v=(l+h)/2))?l=v:h=v,(N=t>=(m=(f+p)/2))?f=m:p=m;while((M=N<<1|_)===(k=(S>=m)<<1|b>=v));return o[k]=a,o[M]=u,r}function rg(r){var e,t,n=r.length,o,a,u=new Array(n),l=new Array(n),f=1/0,h=1/0,p=-1/0,v=-1/0;for(t=0;t<n;++t)isNaN(o=+this._x.call(null,e=r[t]))||isNaN(a=+this._y.call(null,e))||(u[t]=o,l[t]=a,o<f&&(f=o),o>p&&(p=o),a<h&&(h=a),a>v&&(v=a));if(f>p||h>v)return this;for(this.cover(f,h).cover(p,v),t=0;t<n;++t)Uc(this,u[t],l[t],r[t]);return this}function ng(r,e){if(isNaN(r=+r)||isNaN(e=+e))return this;var t=this._x0,n=this._y0,o=this._x1,a=this._y1;if(isNaN(t))o=(t=Math.floor(r))+1,a=(n=Math.floor(e))+1;else{for(var u=o-t||1,l=this._root,f,h;t>r||r>=o||n>e||e>=a;)switch(h=(e<n)<<1|r<t,f=new Array(4),f[h]=l,l=f,u*=2,h){case 0:o=t+u,a=n+u;break;case 1:t=o-u,a=n+u;break;case 2:o=t+u,n=a-u;break;case 3:t=o-u,n=a-u;break}this._root&&this._root.length&&(this._root=l)}return this._x0=t,this._y0=n,this._x1=o,this._y1=a,this}function ig(){var r=[];return this.visit(function(e){if(!e.length)do r.push(e.data);while(e=e.next)}),r}function og(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ge(r,e,t,n,o){this.node=r,this.x0=e,this.y0=t,this.x1=n,this.y1=o}function ag(r,e,t){var n,o=this._x0,a=this._y0,u,l,f,h,p=this._x1,v=this._y1,m=[],b=this._root,S,_;for(b&&m.push(new Ge(b,o,a,p,v)),t==null?t=1/0:(o=r-t,a=e-t,p=r+t,v=e+t,t*=t);S=m.pop();)if(!(!(b=S.node)||(u=S.x0)>p||(l=S.y0)>v||(f=S.x1)<o||(h=S.y1)<a))if(b.length){var N=(u+f)/2,M=(l+h)/2;m.push(new Ge(b[3],N,M,f,h),new Ge(b[2],u,M,N,h),new Ge(b[1],N,l,f,M),new Ge(b[0],u,l,N,M)),(_=(e>=M)<<1|r>=N)&&(S=m[m.length-1],m[m.length-1]=m[m.length-1-_],m[m.length-1-_]=S)}else{var k=r-+this._x.call(null,b.data),$=e-+this._y.call(null,b.data),E=k*k+$*$;if(E<t){var C=Math.sqrt(t=E);o=r-C,a=e-C,p=r+C,v=e+C,n=b.data}}return n}function sg(r){if(isNaN(p=+this._x.call(null,r))||isNaN(v=+this._y.call(null,r)))return this;var e,t=this._root,n,o,a,u=this._x0,l=this._y0,f=this._x1,h=this._y1,p,v,m,b,S,_,N,M;if(!t)return this;if(t.length)for(;;){if((S=p>=(m=(u+f)/2))?u=m:f=m,(_=v>=(b=(l+h)/2))?l=b:h=b,e=t,!(t=t[N=_<<1|S]))return this;if(!t.length)break;(e[N+1&3]||e[N+2&3]||e[N+3&3])&&(n=e,M=N)}for(;t.data!==r;)if(o=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,o?(a?o.next=a:delete o.next,this):e?(a?e[N]=a:delete e[N],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(n?n[M]=t:this._root=t),this):(this._root=a,this)}function ug(r){for(var e=0,t=r.length;e<t;++e)this.remove(r[e]);return this}function cg(){return this._root}function lg(){var r=0;return this.visit(function(e){if(!e.length)do++r;while(e=e.next)}),r}function dg(r){var e=[],t,n=this._root,o,a,u,l,f;for(n&&e.push(new Ge(n,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!r(n=t.node,a=t.x0,u=t.y0,l=t.x1,f=t.y1)&&n.length){var h=(a+l)/2,p=(u+f)/2;(o=n[3])&&e.push(new Ge(o,h,p,l,f)),(o=n[2])&&e.push(new Ge(o,a,p,h,f)),(o=n[1])&&e.push(new Ge(o,h,u,l,p)),(o=n[0])&&e.push(new Ge(o,a,u,h,p))}return this}function hg(r){var e=[],t=[],n;for(this._root&&e.push(new Ge(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var o=n.node;if(o.length){var a,u=n.x0,l=n.y0,f=n.x1,h=n.y1,p=(u+f)/2,v=(l+h)/2;(a=o[0])&&e.push(new Ge(a,u,l,p,v)),(a=o[1])&&e.push(new Ge(a,p,l,f,v)),(a=o[2])&&e.push(new Ge(a,u,v,p,h)),(a=o[3])&&e.push(new Ge(a,p,v,f,h))}t.push(n)}for(;n=t.pop();)r(n.node,n.x0,n.y0,n.x1,n.y1);return this}function fg(r){return r[0]}function pg(r){return arguments.length?(this._x=r,this):this._x}function gg(r){return r[1]}function vg(r){return arguments.length?(this._y=r,this):this._y}function ea(r,e,t){var n=new ta(e??fg,t??gg,NaN,NaN,NaN,NaN);return r==null?n:n.addAll(r)}function ta(r,e,t,n,o,a){this._x=r,this._y=e,this._x0=t,this._y0=n,this._x1=o,this._y1=a,this._root=void 0}function fs(r){for(var e={data:r.data},t=e;r=r.next;)t=t.next={data:r.data};return e}var Re=ea.prototype=ta.prototype;Re.copy=function(){var r=new ta(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,n;if(!e)return r;if(!e.length)return r._root=fs(e),r;for(t=[{source:e,target:r._root=new Array(4)}];e=t.pop();)for(var o=0;o<4;++o)(n=e.source[o])&&(n.length?t.push({source:n,target:e.target[o]=new Array(4)}):e.target[o]=fs(n));return r};Re.add=tg;Re.addAll=rg;Re.cover=ng;Re.data=ig;Re.extent=og;Re.find=ag;Re.remove=sg;Re.removeAll=ug;Re.root=cg;Re.size=lg;Re.visit=dg;Re.visitAfter=hg;Re.x=pg;Re.y=vg;function Oe(r){return function(){return r}}function $t(r){return(r()-.5)*1e-6}function yg(r){return r.x+r.vx}function mg(r){return r.y+r.vy}function bg(r){var e,t,n,o=1,a=1;typeof r!="function"&&(r=Oe(r==null?1:+r));function u(){for(var h,p=e.length,v,m,b,S,_,N,M=0;M<a;++M)for(v=ea(e,yg,mg).visitAfter(l),h=0;h<p;++h)m=e[h],_=t[m.index],N=_*_,b=m.x+m.vx,S=m.y+m.vy,v.visit(k);function k($,E,C,O,w){var I=$.data,z=$.r,T=_+z;if(I){if(I.index>m.index){var R=b-I.x-I.vx,j=S-I.y-I.vy,V=R*R+j*j;V<T*T&&(R===0&&(R=$t(n),V+=R*R),j===0&&(j=$t(n),V+=j*j),V=(T-(V=Math.sqrt(V)))/V*o,m.vx+=(R*=V)*(T=(z*=z)/(N+z)),m.vy+=(j*=V)*T,I.vx-=R*(T=1-T),I.vy-=j*T)}return}return E>b+T||O<b-T||C>S+T||w<S-T}}function l(h){if(h.data)return h.r=t[h.data.index];for(var p=h.r=0;p<4;++p)h[p]&&h[p].r>h.r&&(h.r=h[p].r)}function f(){if(e){var h,p=e.length,v;for(t=new Array(p),h=0;h<p;++h)v=e[h],t[v.index]=+r(v,h,e)}}return u.initialize=function(h,p){e=h,n=p,f()},u.iterations=function(h){return arguments.length?(a=+h,u):a},u.strength=function(h){return arguments.length?(o=+h,u):o},u.radius=function(h){return arguments.length?(r=typeof h=="function"?h:Oe(+h),f(),u):r},u}function wg(r){return r.index}function ps(r,e){var t=r.get(e);if(!t)throw new Error("node not found: "+e);return t}function xg(r){var e=wg,t=v,n,o=Oe(30),a,u,l,f,h,p=1;r==null&&(r=[]);function v(N){return 1/Math.min(l[N.source.index],l[N.target.index])}function m(N){for(var M=0,k=r.length;M<p;++M)for(var $=0,E,C,O,w,I,z,T;$<k;++$)E=r[$],C=E.source,O=E.target,w=O.x+O.vx-C.x-C.vx||$t(h),I=O.y+O.vy-C.y-C.vy||$t(h),z=Math.sqrt(w*w+I*I),z=(z-a[$])/z*N*n[$],w*=z,I*=z,O.vx-=w*(T=f[$]),O.vy-=I*T,C.vx+=w*(T=1-T),C.vy+=I*T}function b(){if(u){var N,M=u.length,k=r.length,$=new Map(u.map((C,O)=>[e(C,O,u),C])),E;for(N=0,l=new Array(M);N<k;++N)E=r[N],E.index=N,typeof E.source!="object"&&(E.source=ps($,E.source)),typeof E.target!="object"&&(E.target=ps($,E.target)),l[E.source.index]=(l[E.source.index]||0)+1,l[E.target.index]=(l[E.target.index]||0)+1;for(N=0,f=new Array(k);N<k;++N)E=r[N],f[N]=l[E.source.index]/(l[E.source.index]+l[E.target.index]);n=new Array(k),S(),a=new Array(k),_()}}function S(){if(u)for(var N=0,M=r.length;N<M;++N)n[N]=+t(r[N],N,r)}function _(){if(u)for(var N=0,M=r.length;N<M;++N)a[N]=+o(r[N],N,r)}return m.initialize=function(N,M){u=N,h=M,b()},m.links=function(N){return arguments.length?(r=N,b(),m):r},m.id=function(N){return arguments.length?(e=N,m):e},m.iterations=function(N){return arguments.length?(p=+N,m):p},m.strength=function(N){return arguments.length?(t=typeof N=="function"?N:Oe(+N),S(),m):t},m.distance=function(N){return arguments.length?(o=typeof N=="function"?N:Oe(+N),_(),m):o},m}const Eg=1664525,_g=1013904223,gs=4294967296;function Sg(){let r=1;return()=>(r=(Eg*r+_g)%gs)/gs}function Ag(r){return r.x}function kg(r){return r.y}var Ng=10,Mg=Math.PI*(3-Math.sqrt(5));function Cg(r){var e,t=1,n=.001,o=1-Math.pow(n,1/300),a=0,u=.6,l=new Map,f=Qo(v),h=Ln("tick","end"),p=Sg();r==null&&(r=[]);function v(){m(),h.call("tick",e),t<n&&(f.stop(),h.call("end",e))}function m(_){var N,M=r.length,k;_===void 0&&(_=1);for(var $=0;$<_;++$)for(t+=(a-t)*o,l.forEach(function(E){E(t)}),N=0;N<M;++N)k=r[N],k.fx==null?k.x+=k.vx*=u:(k.x=k.fx,k.vx=0),k.fy==null?k.y+=k.vy*=u:(k.y=k.fy,k.vy=0);return e}function b(){for(var _=0,N=r.length,M;_<N;++_){if(M=r[_],M.index=_,M.fx!=null&&(M.x=M.fx),M.fy!=null&&(M.y=M.fy),isNaN(M.x)||isNaN(M.y)){var k=Ng*Math.sqrt(.5+_),$=_*Mg;M.x=k*Math.cos($),M.y=k*Math.sin($)}(isNaN(M.vx)||isNaN(M.vy))&&(M.vx=M.vy=0)}}function S(_){return _.initialize&&_.initialize(r,p),_}return b(),e={tick:m,restart:function(){return f.restart(v),e},stop:function(){return f.stop(),e},nodes:function(_){return arguments.length?(r=_,b(),l.forEach(S),e):r},alpha:function(_){return arguments.length?(t=+_,e):t},alphaMin:function(_){return arguments.length?(n=+_,e):n},alphaDecay:function(_){return arguments.length?(o=+_,e):+o},alphaTarget:function(_){return arguments.length?(a=+_,e):a},velocityDecay:function(_){return arguments.length?(u=1-_,e):1-u},randomSource:function(_){return arguments.length?(p=_,l.forEach(S),e):p},force:function(_,N){return arguments.length>1?(N==null?l.delete(_):l.set(_,S(N)),e):l.get(_)},find:function(_,N,M){var k=0,$=r.length,E,C,O,w,I;for(M==null?M=1/0:M*=M,k=0;k<$;++k)w=r[k],E=_-w.x,C=N-w.y,O=E*E+C*C,O<M&&(I=w,M=O);return I},on:function(_,N){return arguments.length>1?(h.on(_,N),e):h.on(_)}}}function Dg(){var r,e,t,n,o=Oe(-30),a,u=1,l=1/0,f=.81;function h(b){var S,_=r.length,N=ea(r,Ag,kg).visitAfter(v);for(n=b,S=0;S<_;++S)e=r[S],N.visit(m)}function p(){if(r){var b,S=r.length,_;for(a=new Array(S),b=0;b<S;++b)_=r[b],a[_.index]=+o(_,b,r)}}function v(b){var S=0,_,N,M=0,k,$,E;if(b.length){for(k=$=E=0;E<4;++E)(_=b[E])&&(N=Math.abs(_.value))&&(S+=_.value,M+=N,k+=N*_.x,$+=N*_.y);b.x=k/M,b.y=$/M}else{_=b,_.x=_.data.x,_.y=_.data.y;do S+=a[_.data.index];while(_=_.next)}b.value=S}function m(b,S,_,N){if(!b.value)return!0;var M=b.x-e.x,k=b.y-e.y,$=N-S,E=M*M+k*k;if($*$/f<E)return E<l&&(M===0&&(M=$t(t),E+=M*M),k===0&&(k=$t(t),E+=k*k),E<u&&(E=Math.sqrt(u*E)),e.vx+=M*b.value*n/E,e.vy+=k*b.value*n/E),!0;if(b.length||E>=l)return;(b.data!==e||b.next)&&(M===0&&(M=$t(t),E+=M*M),k===0&&(k=$t(t),E+=k*k),E<u&&(E=Math.sqrt(u*E)));do b.data!==e&&($=a[b.data.index]*n/E,e.vx+=M*$,e.vy+=k*$);while(b=b.next)}return h.initialize=function(b,S){r=b,t=S,p()},h.strength=function(b){return arguments.length?(o=typeof b=="function"?b:Oe(+b),p(),h):o},h.distanceMin=function(b){return arguments.length?(u=b*b,h):Math.sqrt(u)},h.distanceMax=function(b){return arguments.length?(l=b*b,h):Math.sqrt(l)},h.theta=function(b){return arguments.length?(f=b*b,h):Math.sqrt(f)},h}function Ig(r){var e=Oe(.1),t,n,o;typeof r!="function"&&(r=Oe(r==null?0:+r));function a(l){for(var f=0,h=t.length,p;f<h;++f)p=t[f],p.vx+=(o[f]-p.x)*n[f]*l}function u(){if(t){var l,f=t.length;for(n=new Array(f),o=new Array(f),l=0;l<f;++l)n[l]=isNaN(o[l]=+r(t[l],l,t))?0:+e(t[l],l,t)}}return a.initialize=function(l){t=l,u()},a.strength=function(l){return arguments.length?(e=typeof l=="function"?l:Oe(+l),u(),a):e},a.x=function(l){return arguments.length?(r=typeof l=="function"?l:Oe(+l),u(),a):r},a}function $g(r){var e=Oe(.1),t,n,o;typeof r!="function"&&(r=Oe(r==null?0:+r));function a(l){for(var f=0,h=t.length,p;f<h;++f)p=t[f],p.vy+=(o[f]-p.y)*n[f]*l}function u(){if(t){var l,f=t.length;for(n=new Array(f),o=new Array(f),l=0;l<f;++l)n[l]=isNaN(o[l]=+r(t[l],l,t))?0:+e(t[l],l,t)}}return a.initialize=function(l){t=l,u()},a.strength=function(l){return arguments.length?(e=typeof l=="function"?l:Oe(+l),u(),a):e},a.y=function(l){return arguments.length?(r=typeof l=="function"?l:Oe(+l),u(),a):r},a}function Lr(r,e,t){this.k=r,this.x=e,this.y=t}Lr.prototype={constructor:Lr,scale:function(r){return r===1?this:new Lr(this.k*r,this.x,this.y)},translate:function(r,e){return r===0&e===0?this:new Lr(this.k,this.x+this.k*r,this.y+this.k*e)},apply:function(r){return[r[0]*this.k+this.x,r[1]*this.k+this.y]},applyX:function(r){return r*this.k+this.x},applyY:function(r){return r*this.k+this.y},invert:function(r){return[(r[0]-this.x)/this.k,(r[1]-this.y)/this.k]},invertX:function(r){return(r-this.x)/this.k},invertY:function(r){return(r-this.y)/this.k},rescaleX:function(r){return r.copy().domain(r.range().map(this.invertX,this).map(r.invert,r))},rescaleY:function(r){return r.copy().domain(r.range().map(this.invertY,this).map(r.invert,r))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Lr.prototype;const zg={listeners:new Map,emit(r,e={}){document.dispatchEvent(new CustomEvent(r,{detail:e}))},on(r,e){if(typeof e!="function"){console.warn(`EventBus: Tried to register a non-function listener for event: ${r}`);return}this.listeners.has(r)||this.listeners.set(r,new Set);const t=this.listeners.get(r);if(t.has(e)){console.warn(`EventBus: Listener for event "${r}" is already registered.`);return}document.addEventListener(r,e),t.add(e)},off(r,e){if(!this.listeners.has(r)){console.warn(`EventBus: Attempted to remove a listener from a non-existent event: ${r}`);return}const t=this.listeners.get(r);if(!t.has(e)){console.warn(`EventBus: Attempted to remove a non-existent listener from event: ${r}`);return}document.removeEventListener(r,e),t.delete(e),t.size===0&&this.listeners.delete(r)},removeAll(r){if(!this.listeners.has(r)){console.warn(`EventBus: Attempted to remove all listeners from a non-existent event: ${r}`);return}this.listeners.get(r).forEach(e=>{document.removeEventListener(r,e)}),this.listeners.delete(r)}};function ui(r){const e=new Set(r.map(Number));let t=0;for(;e.has(t);)t++;return t}function Gr(r,e=3){const t="abcdefghijklmnopqrstuvwxyz",n=[];function o(u,l,f){if(f===0){n.push(u);return}for(let h=l;h<t.length;h++)if(o(u+t[h],h+1,f-1),n.length>r)return}let a=1;for(;n.length<=r&&a<=e;)o("",0,a),a++;return n[r]||null}function Tg(r,e,t,n,o,a){let u=r-t,l=e-n,f=o-t,h=a-n,p=u*f+l*h,v=f*f+h*h,m=v!==0?p/v:-1,b,S;m<0?(b=t,S=n):m>1?(b=o,S=a):(b=t+m*f,S=n+m*h);let _=r-b,N=e-S;return Math.sqrt(_*_+N*N)}function pn(r,e){return(r%e+e)%e}const Me=document;function Lg(r,e){Me.querySelector(".container").classList.toggle("grid-hidden",r.grid<=2),Me.getElementById("grid-size-1").value=r.node_radius,Me.getElementById("vertex-size-1").value=r.node_radius,Me.getElementById("edge-size-1").value=r.edge_size,Me.getElementById("label-size-1").value=r.label_size,Me.getElementById("history-limit-1").value=r.historyLimit,Me.querySelector("#vertex-label .check").classList.toggle("hidden",!r.vertexLabel),Me.querySelector("#edge-label .check").classList.toggle("hidden",!r.edgeLabel),Me.querySelector("#weight-label .check").classList.toggle("hidden",!r.weightLabel),Me.querySelector("#save-history .check").classList.toggle("hidden",!r.saveHistory),Me.querySelector("#component").classList.toggle("gray-background",!r.component),Me.querySelector("#scale").classList.toggle("gray-background",!r.scale),Me.querySelector("#tree").classList.toggle("gray-background",!r.tree),Me.querySelector("#force").classList.toggle("gray-background",!r.forceSimulation),Me.querySelector("#colorPicker").classList.toggle("gray-background",!r.colorPicker),Me.querySelector("#panning").classList.toggle("gray-background",!r.panning),Me.querySelector("#select").classList.toggle("gray-background",!r.select),e.style.cursor=r.panning?"move":"default";const t=Me.documentElement;Me.querySelector(".container").classList.toggle("grid-hidden",r.grid<=2),t.style.setProperty("--grid-size",`${r.grid}px`),t.style.setProperty("--grid-color",r.grid_color),Me.querySelector(".container").style.backgroundColor=r.background_color}class Pg{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.appSettings.settings,this.canvas=Wt("#chart").node(),this.ctx=this.canvas.getContext("2d"),this.mouse={x:0,y:0,dragging:!1}}init(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.canvas.addEventListener("dblclick",this.handleDbclick.bind(this)),this.canvas.addEventListener("click",this.handleclick.bind(this));let e=0;this.canvas.addEventListener("touchend",t=>{const n=new Date().getTime(),o=n-e;o<300&&o>0&&this.handleDbclick(t),e=n}),Wt("canvas").on("mousedown",t=>{this.mouse.dragging=!1,[this.mouse.x,this.mouse.y]=Ye(t)}).on("mousemove",t=>{const[n,o]=Ye(t);(Math.abs(n-this.mouse.x)>2||Math.abs(o-this.mouse.y)>2)&&(this.mouse.dragging=!0)}).on("mouseup",t=>{this.mouse.dragging||([this.mouse.x,this.mouse.y]=Ye(t))}),Wt(this.canvas).call(bf().container(this.canvas).subject(this.dragsubject.bind(this)).filter(t=>!(this.settings.scale||this.settings.select)).on("start",this.dragstarted.bind(this)).on("drag",this.dragged.bind(this)).on("end",this.dragended.bind(this)))}addNodeAtEvent(e){e.preventDefault();const[t,n]=e.type=="touchend"?vs(e,this.canvas):Ye(e,this.canvas),o=ui(this.app.graphManager.graph.nodes()),a=Gr(o);this.app.graphManager.addNode(o,{x:t,y:n,color:this.settings.node_color,label:a})}addNodeConnectedToNode(e){const t=ui(this.app.graphManager.graph.nodes()),n=Gr(t),o={x:e.x+30,y:e.y+30,color:this.settings.node_color,label:n};this.app.graphManager.addNode(t,o),this.app.graphManager.graph.addEdge(e.id,t),this.eventBus.emit("graph:updated",{type:"addNode",node:t})}dragsubject(e){let t={id:null},n=1/0;return this.app.nodes.forEach(o=>{const a=e.x-o.x,u=e.y-o.y,l=Math.sqrt(a*a+u*u);l<this.settings.node_radius*o.size&&l<n&&(n=l,t=o)}),t&&(this.settings.component?t.component=this.app.graphManager.metric.getComponent(t.id):t.component=this.app.graphManager.graph.getSelectedNodes()),this.settings.panning&&(t.component=this.app.graphManager.graph.nodes()),t}dragstarted(e){!e.active&&this.settings.forceSimulation&&this.app.simulation.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y,e.subject.__moved=!1}dragged(e){if(e.subject.fx=e.x,e.subject.fy=e.y,(e.dx!==0||e.dy!==0)&&(e.subject.__moved=!0),!this.settings.forceSimulation&&e.subject.component){for(let t of e.subject.component)this.app.graphManager.graph.updateNodeAttributes(t,n=>({...n,x:n.x+e.dx,y:n.y+e.dy}));e.subject.id!==null&&this.app.graphManager.graph.updateNodeAttributes(e.subject.id,t=>({...t,x:e.x,y:e.y}))}}dragended(e){e.active||this.app.simulation.alphaTarget(0),e.subject.fx=null,e.subject.fy=null,e.subject.x=e.x,e.subject.y=e.y,this.settings.forceSimulation||this.app.updateSimulation(),e.subject.__moved&&e.subject.id&&!this.settings.forceSimulation&&this.app.graphManager.saveGraphState()}findClickedNode(e,t){return this.app.nodes.find(n=>{let o=e-n.x,a=t-n.y;return Math.sqrt(o*o+a*a)<this.settings.node_radius*n.size})}findClickedEdge(e,t){let n=10;return this.app.links.find(o=>{let a=o.source,u=o.target;return Tg(e,t,a.x,a.y,u.x,u.y)<n})}insertNodeInEdge(e){const t=ui(this.app.graphManager.graph.nodes()),n=Gr(t);let o=(e.source.x+e.target.x)/2,a=(e.source.y+e.target.y)/2;this.app.graphManager.graph.addNode(t,{x:o,y:a,color:this.settings.color,label:n}),this.app.graphManager.graph.dropEdge(e.source.id,e.target.id),this.app.graphManager.graph.addEdge(e.source.id,t),this.app.graphManager.graph.addEdge(t,e.target.id),this.eventBus.emit("graph:updated",{type:"addNodeInEdge",node:t})}handleDbclick(e){const[t,n]=e.type=="touchend"?vs(e,this.canvas):Ye(e,this.canvas);let o=this.findClickedNode(t,n),a=this.findClickedEdge(t,n);o?this.settings.tree?this.addNodeConnectedToNode(o):this.app.graphManager.graph.toggleNodeSelection(o.id):a?this.settings.tree?this.insertNodeInEdge(a):this.app.graphManager.graph.findEdge(a.source.id,a.target.id,u=>{this.app.graphManager.graph.toggleEdgeSelection(u)}):this.addNodeAtEvent(e)}handleclick(e){if(this.mouse.dragging)return;let[t,n]=Ye(e,this.canvas),o=this.findClickedNode(t,n),a=this.findClickedEdge(t,n);o?this.settings.select?(this.app.graphManager.graph.toggleNodeSelection(o.id),this.settings.forceSimulation||this.eventBus.emit("graph:updated",{type:"selected"})):(this.app.graphManager.metric.addNodeInfo(o),this.settings.colorPicker&&(this.app.colorPicker.setColor("node",o.color),this.app.colorPicker.setColor("stroke",o.stroke),this.app.colorPicker.setColor("label",o.labelColor))):a?this.settings.select?this.app.graphManager.graph.findEdge(a.source.id,a.target.id,u=>{this.app.graphManager.graph.toggleEdgeSelection(u),this.settings.forceSimulation||this.eventBus.emit("graph:updated",{type:"selected"})}):(this.app.graphManager.metric.addEdgeInfo(a),this.settings.colorPicker&&(this.app.colorPicker.setColor("edge",a.color),this.app.colorPicker.setColor("label",a.LabeClolor))):(this.app.graphManager.deselectAll(),this.app.rect.scale.active=!1)}}function vs(r,e){const t=r.changedTouches[0],n=e.getBoundingClientRect();return[t.clientX-n.left,t.clientY-n.top]}function We(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var gn={exports:{}},ys;function Gg(){if(ys)return gn.exports;ys=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(C,O,w){return Function.prototype.apply.call(C,O,w)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))}:t=function(C){return Object.getOwnPropertyNames(C)};function n(E){console&&console.warn&&console.warn(E)}var o=Number.isNaN||function(C){return C!==C};function a(){a.init.call(this)}gn.exports=a,gn.exports.once=M,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function l(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(E){if(typeof E!="number"||E<0||o(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");u=E}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(C){if(typeof C!="number"||C<0||o(C))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+C+".");return this._maxListeners=C,this};function f(E){return E._maxListeners===void 0?a.defaultMaxListeners:E._maxListeners}a.prototype.getMaxListeners=function(){return f(this)},a.prototype.emit=function(C){for(var O=[],w=1;w<arguments.length;w++)O.push(arguments[w]);var I=C==="error",z=this._events;if(z!==void 0)I=I&&z.error===void 0;else if(!I)return!1;if(I){var T;if(O.length>0&&(T=O[0]),T instanceof Error)throw T;var R=new Error("Unhandled error."+(T?" ("+T.message+")":""));throw R.context=T,R}var j=z[C];if(j===void 0)return!1;if(typeof j=="function")e(j,this,O);else for(var V=j.length,te=S(j,V),w=0;w<V;++w)e(te[w],this,O);return!0};function h(E,C,O,w){var I,z,T;if(l(O),z=E._events,z===void 0?(z=E._events=Object.create(null),E._eventsCount=0):(z.newListener!==void 0&&(E.emit("newListener",C,O.listener?O.listener:O),z=E._events),T=z[C]),T===void 0)T=z[C]=O,++E._eventsCount;else if(typeof T=="function"?T=z[C]=w?[O,T]:[T,O]:w?T.unshift(O):T.push(O),I=f(E),I>0&&T.length>I&&!T.warned){T.warned=!0;var R=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");R.name="MaxListenersExceededWarning",R.emitter=E,R.type=C,R.count=T.length,n(R)}return E}a.prototype.addListener=function(C,O){return h(this,C,O,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(C,O){return h(this,C,O,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(E,C,O){var w={fired:!1,wrapFn:void 0,target:E,type:C,listener:O},I=p.bind(w);return I.listener=O,w.wrapFn=I,I}a.prototype.once=function(C,O){return l(O),this.on(C,v(this,C,O)),this},a.prototype.prependOnceListener=function(C,O){return l(O),this.prependListener(C,v(this,C,O)),this},a.prototype.removeListener=function(C,O){var w,I,z,T,R;if(l(O),I=this._events,I===void 0)return this;if(w=I[C],w===void 0)return this;if(w===O||w.listener===O)--this._eventsCount===0?this._events=Object.create(null):(delete I[C],I.removeListener&&this.emit("removeListener",C,w.listener||O));else if(typeof w!="function"){for(z=-1,T=w.length-1;T>=0;T--)if(w[T]===O||w[T].listener===O){R=w[T].listener,z=T;break}if(z<0)return this;z===0?w.shift():_(w,z),w.length===1&&(I[C]=w[0]),I.removeListener!==void 0&&this.emit("removeListener",C,R||O)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(C){var O,w,I;if(w=this._events,w===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[C]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete w[C]),this;if(arguments.length===0){var z=Object.keys(w),T;for(I=0;I<z.length;++I)T=z[I],T!=="removeListener"&&this.removeAllListeners(T);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(O=w[C],typeof O=="function")this.removeListener(C,O);else if(O!==void 0)for(I=O.length-1;I>=0;I--)this.removeListener(C,O[I]);return this};function m(E,C,O){var w=E._events;if(w===void 0)return[];var I=w[C];return I===void 0?[]:typeof I=="function"?O?[I.listener||I]:[I]:O?N(I):S(I,I.length)}a.prototype.listeners=function(C){return m(this,C,!0)},a.prototype.rawListeners=function(C){return m(this,C,!1)},a.listenerCount=function(E,C){return typeof E.listenerCount=="function"?E.listenerCount(C):b.call(E,C)},a.prototype.listenerCount=b;function b(E){var C=this._events;if(C!==void 0){var O=C[E];if(typeof O=="function")return 1;if(O!==void 0)return O.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function S(E,C){for(var O=new Array(C),w=0;w<C;++w)O[w]=E[w];return O}function _(E,C){for(;C+1<E.length;C++)E[C]=E[C+1];E.pop()}function N(E){for(var C=new Array(E.length),O=0;O<C.length;++O)C[O]=E[O].listener||E[O];return C}function M(E,C){return new Promise(function(O,w){function I(T){E.removeListener(C,z),w(T)}function z(){typeof E.removeListener=="function"&&E.removeListener("error",I),O([].slice.call(arguments))}$(E,C,z,{once:!0}),C!=="error"&&k(E,I,{once:!0})})}function k(E,C,O){typeof E.on=="function"&&$(E,"error",C,O)}function $(E,C,O,w){if(typeof E.on=="function")w.once?E.once(C,O):E.on(C,O);else if(typeof E.addEventListener=="function")E.addEventListener(C,function I(z){w.once&&E.removeEventListener(C,I),O(z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}return gn.exports}var Og=Gg(),ci,ms;function Xt(){if(ms)return ci;ms=1;function r(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}return typeof Symbol<"u"&&(r.prototype[Symbol.iterator]=function(){return this}),r.of=function(){var e=arguments,t=e.length,n=0;return new r(function(){return n>=t?{done:!0}:{done:!1,value:e[n++]}})},r.empty=function(){var e=new r(function(){return{done:!0}});return e},r.fromSequence=function(e){var t=0,n=e.length;return new r(function(){return t>=n?{done:!0}:{done:!1,value:e[t++]}})},r.is=function(e){return e instanceof r?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"},ci=r,ci}var Rg=Xt();const Ve=We(Rg);var vn={},bs;function jc(){return bs||(bs=1,vn.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",vn.SYMBOL_SUPPORT=typeof Symbol<"u"),vn}var li,ws;function Fc(){if(ws)return li;ws=1;var r=Xt(),e=jc(),t=e.ARRAY_BUFFER_SUPPORT,n=e.SYMBOL_SUPPORT;function o(a){return typeof a=="string"||Array.isArray(a)||t&&ArrayBuffer.isView(a)?r.fromSequence(a):typeof a!="object"||a===null?null:n&&typeof a[Symbol.iterator]=="function"?a[Symbol.iterator]():typeof a.next=="function"?a:null}return li=function(u){var l=o(u);if(!l)throw new Error("obliterator: target is not iterable nor a valid iterator.");return l},li}var di,xs;function qg(){if(xs)return di;xs=1;var r=Fc();return di=function(t,n){for(var o=arguments.length>1?n:1/0,a=o!==1/0?new Array(o):[],u,l=0,f=r(t);;){if(l===o)return a;if(u=f.next(),u.done)return l!==n&&(a.length=l),a;a[l++]=u.value}},di}var Bg=qg();const Wc=We(Bg);var hi,Es;function Ug(){if(Es)return hi;Es=1;var r=Xt(),e=Fc();return hi=function(){var n=arguments,o=null,a=-1;return new r(function(){var l=null;do{if(o===null){if(a++,a>=n.length)return{done:!0};o=e(n[a])}if(l=o.next(),l.done===!0){o=null;continue}break}while(!0);return l})},hi}var jg=Ug();const xt=We(jg);function Fg(){const r=arguments[0];for(let e=1,t=arguments.length;e<t;e++)if(arguments[e])for(const n in arguments[e])r[n]=arguments[e][n];return r}let De=Fg;typeof Object.assign=="function"&&(De=Object.assign);function Xe(r,e,t,n){const o=r._nodes.get(e);let a=null;return o&&(n==="mixed"?a=o.out&&o.out[t]||o.undirected&&o.undirected[t]:n==="directed"?a=o.out&&o.out[t]:a=o.undirected&&o.undirected[t]),a}function Ie(r){return typeof r=="object"&&r!==null}function Hc(r){let e;for(e in r)return!1;return!0}function He(r,e,t){Object.defineProperty(r,e,{enumerable:!1,configurable:!1,writable:!0,value:t})}function et(r,e,t){const n={enumerable:!0,configurable:!0};typeof t=="function"?n.get=t:(n.value=t,n.writable=!1),Object.defineProperty(r,e,n)}function _s(r){return!(!Ie(r)||r.attributes&&!Array.isArray(r.attributes))}function Wg(){let r=Math.floor(Math.random()*256)&255;return()=>r++}class ra extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}let se=class Kc extends ra{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Kc.prototype.constructor)}};class oe extends ra{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,oe.prototype.constructor)}}class pe extends ra{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,pe.prototype.constructor)}}function Yc(r,e){this.key=r,this.attributes=e,this.clear()}Yc.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Xc(r,e){this.key=r,this.attributes=e,this.clear()}Xc.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Vc(r,e){this.key=r,this.attributes=e,this.clear()}Vc.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function gr(r,e,t,n,o){this.key=e,this.attributes=o,this.undirected=r,this.source=t,this.target=n}gr.prototype.attach=function(){let r="out",e="in";this.undirected&&(r=e="undirected");const t=this.source.key,n=this.target.key;this.source[r][n]=this,!(this.undirected&&t===n)&&(this.target[e][t]=this)};gr.prototype.attachMulti=function(){let r="out",e="in";const t=this.source.key,n=this.target.key;this.undirected&&(r=e="undirected");const o=this.source[r],a=o[n];if(typeof a>"u"){o[n]=this,this.undirected&&t===n||(this.target[e][t]=this);return}a.previous=this,this.next=a,o[n]=this,this.target[e][t]=this};gr.prototype.detach=function(){const r=this.source.key,e=this.target.key;let t="out",n="in";this.undirected&&(t=n="undirected"),delete this.source[t][e],delete this.target[n][r]};gr.prototype.detachMulti=function(){const r=this.source.key,e=this.target.key;let t="out",n="in";this.undirected&&(t=n="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][e],delete this.target[n][r]):(this.next.previous=void 0,this.source[t][e]=this.next,this.target[n][r]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const Qc=0,Zc=1,Hg=2,Jc=3;function _t(r,e,t,n,o,a,u){let l,f,h,p;if(n=""+n,t===Qc){if(l=r._nodes.get(n),!l)throw new oe(`Graph.${e}: could not find the "${n}" node in the graph.`);h=o,p=a}else if(t===Jc){if(o=""+o,f=r._edges.get(o),!f)throw new oe(`Graph.${e}: could not find the "${o}" edge in the graph.`);const v=f.source.key,m=f.target.key;if(n===v)l=f.target;else if(n===m)l=f.source;else throw new oe(`Graph.${e}: the "${n}" node is not attached to the "${o}" edge (${v}, ${m}).`);h=a,p=u}else{if(f=r._edges.get(n),!f)throw new oe(`Graph.${e}: could not find the "${n}" edge in the graph.`);t===Zc?l=f.source:l=f.target,h=o,p=a}return[l,h,p]}function Kg(r,e,t){r.prototype[e]=function(n,o,a){const[u,l]=_t(this,e,t,n,o,a);return u.attributes[l]}}function Yg(r,e,t){r.prototype[e]=function(n,o){const[a]=_t(this,e,t,n,o);return a.attributes}}function Xg(r,e,t){r.prototype[e]=function(n,o,a){const[u,l]=_t(this,e,t,n,o,a);return u.attributes.hasOwnProperty(l)}}function Vg(r,e,t){r.prototype[e]=function(n,o,a,u){const[l,f,h]=_t(this,e,t,n,o,a,u);return l.attributes[f]=h,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:f}),this}}function Qg(r,e,t){r.prototype[e]=function(n,o,a,u){const[l,f,h]=_t(this,e,t,n,o,a,u);if(typeof h!="function")throw new se(`Graph.${e}: updater should be a function.`);const p=l.attributes,v=h(p[f]);return p[f]=v,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:f}),this}}function Zg(r,e,t){r.prototype[e]=function(n,o,a){const[u,l]=_t(this,e,t,n,o,a);return delete u.attributes[l],this.emit("nodeAttributesUpdated",{key:u.key,type:"remove",attributes:u.attributes,name:l}),this}}function Jg(r,e,t){r.prototype[e]=function(n,o,a){const[u,l]=_t(this,e,t,n,o,a);if(!Ie(l))throw new se(`Graph.${e}: provided attributes are not a plain object.`);return u.attributes=l,this.emit("nodeAttributesUpdated",{key:u.key,type:"replace",attributes:u.attributes}),this}}function ev(r,e,t){r.prototype[e]=function(n,o,a){const[u,l]=_t(this,e,t,n,o,a);if(!Ie(l))throw new se(`Graph.${e}: provided attributes are not a plain object.`);return De(u.attributes,l),this.emit("nodeAttributesUpdated",{key:u.key,type:"merge",attributes:u.attributes,data:l}),this}}function tv(r,e,t){r.prototype[e]=function(n,o,a){const[u,l]=_t(this,e,t,n,o,a);if(typeof l!="function")throw new se(`Graph.${e}: provided updater is not a function.`);return u.attributes=l(u.attributes),this.emit("nodeAttributesUpdated",{key:u.key,type:"update",attributes:u.attributes}),this}}const rv=[{name:r=>`get${r}Attribute`,attacher:Kg},{name:r=>`get${r}Attributes`,attacher:Yg},{name:r=>`has${r}Attribute`,attacher:Xg},{name:r=>`set${r}Attribute`,attacher:Vg},{name:r=>`update${r}Attribute`,attacher:Qg},{name:r=>`remove${r}Attribute`,attacher:Zg},{name:r=>`replace${r}Attributes`,attacher:Jg},{name:r=>`merge${r}Attributes`,attacher:ev},{name:r=>`update${r}Attributes`,attacher:tv}];function nv(r){rv.forEach(function({name:e,attacher:t}){t(r,e("Node"),Qc),t(r,e("Source"),Zc),t(r,e("Target"),Hg),t(r,e("Opposite"),Jc)})}function iv(r,e,t){r.prototype[e]=function(n,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+n,l=""+o;if(o=arguments[2],a=Xe(this,u,l,t),!a)throw new oe(`Graph.${e}: could not find an edge for the given path ("${u}" - "${l}").`)}else{if(t!=="mixed")throw new pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new oe(`Graph.${e}: could not find the "${n}" edge in the graph.`)}return a.attributes[o]}}function ov(r,e,t){r.prototype[e]=function(n){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+n,u=""+arguments[1];if(o=Xe(this,a,u,t),!o)throw new oe(`Graph.${e}: could not find an edge for the given path ("${a}" - "${u}").`)}else{if(t!=="mixed")throw new pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,o=this._edges.get(n),!o)throw new oe(`Graph.${e}: could not find the "${n}" edge in the graph.`)}return o.attributes}}function av(r,e,t){r.prototype[e]=function(n,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+n,l=""+o;if(o=arguments[2],a=Xe(this,u,l,t),!a)throw new oe(`Graph.${e}: could not find an edge for the given path ("${u}" - "${l}").`)}else{if(t!=="mixed")throw new pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new oe(`Graph.${e}: could not find the "${n}" edge in the graph.`)}return a.attributes.hasOwnProperty(o)}}function sv(r,e,t){r.prototype[e]=function(n,o,a){let u;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+n,f=""+o;if(o=arguments[2],a=arguments[3],u=Xe(this,l,f,t),!u)throw new oe(`Graph.${e}: could not find an edge for the given path ("${l}" - "${f}").`)}else{if(t!=="mixed")throw new pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,u=this._edges.get(n),!u)throw new oe(`Graph.${e}: could not find the "${n}" edge in the graph.`)}return u.attributes[o]=a,this.emit("edgeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:o}),this}}function uv(r,e,t){r.prototype[e]=function(n,o,a){let u;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+n,f=""+o;if(o=arguments[2],a=arguments[3],u=Xe(this,l,f,t),!u)throw new oe(`Graph.${e}: could not find an edge for the given path ("${l}" - "${f}").`)}else{if(t!=="mixed")throw new pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,u=this._edges.get(n),!u)throw new oe(`Graph.${e}: could not find the "${n}" edge in the graph.`)}if(typeof a!="function")throw new se(`Graph.${e}: updater should be a function.`);return u.attributes[o]=a(u.attributes[o]),this.emit("edgeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:o}),this}}function cv(r,e,t){r.prototype[e]=function(n,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+n,l=""+o;if(o=arguments[2],a=Xe(this,u,l,t),!a)throw new oe(`Graph.${e}: could not find an edge for the given path ("${u}" - "${l}").`)}else{if(t!=="mixed")throw new pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new oe(`Graph.${e}: could not find the "${n}" edge in the graph.`)}return delete a.attributes[o],this.emit("edgeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:o}),this}}function lv(r,e,t){r.prototype[e]=function(n,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+n,l=""+o;if(o=arguments[2],a=Xe(this,u,l,t),!a)throw new oe(`Graph.${e}: could not find an edge for the given path ("${u}" - "${l}").`)}else{if(t!=="mixed")throw new pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new oe(`Graph.${e}: could not find the "${n}" edge in the graph.`)}if(!Ie(o))throw new se(`Graph.${e}: provided attributes are not a plain object.`);return a.attributes=o,this.emit("edgeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function dv(r,e,t){r.prototype[e]=function(n,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+n,l=""+o;if(o=arguments[2],a=Xe(this,u,l,t),!a)throw new oe(`Graph.${e}: could not find an edge for the given path ("${u}" - "${l}").`)}else{if(t!=="mixed")throw new pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new oe(`Graph.${e}: could not find the "${n}" edge in the graph.`)}if(!Ie(o))throw new se(`Graph.${e}: provided attributes are not a plain object.`);return De(a.attributes,o),this.emit("edgeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:o}),this}}function hv(r,e,t){r.prototype[e]=function(n,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new pe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new pe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+n,l=""+o;if(o=arguments[2],a=Xe(this,u,l,t),!a)throw new oe(`Graph.${e}: could not find an edge for the given path ("${u}" - "${l}").`)}else{if(t!=="mixed")throw new pe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new oe(`Graph.${e}: could not find the "${n}" edge in the graph.`)}if(typeof o!="function")throw new se(`Graph.${e}: provided updater is not a function.`);return a.attributes=o(a.attributes),this.emit("edgeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const fv=[{name:r=>`get${r}Attribute`,attacher:iv},{name:r=>`get${r}Attributes`,attacher:ov},{name:r=>`has${r}Attribute`,attacher:av},{name:r=>`set${r}Attribute`,attacher:sv},{name:r=>`update${r}Attribute`,attacher:uv},{name:r=>`remove${r}Attribute`,attacher:cv},{name:r=>`replace${r}Attributes`,attacher:lv},{name:r=>`merge${r}Attributes`,attacher:dv},{name:r=>`update${r}Attributes`,attacher:hv}];function pv(r){fv.forEach(function({name:e,attacher:t}){t(r,e("Edge"),"mixed"),t(r,e("DirectedEdge"),"directed"),t(r,e("UndirectedEdge"),"undirected")})}const gv=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function vv(r,e,t,n){let o=!1;for(const a in e){if(a===n)continue;const u=e[a];if(o=t(u.key,u.attributes,u.source.key,u.target.key,u.source.attributes,u.target.attributes,u.undirected),r&&o)return u.key}}function yv(r,e,t,n){let o,a,u,l=!1;for(const f in e)if(f!==n){o=e[f];do{if(a=o.source,u=o.target,l=t(o.key,o.attributes,a.key,u.key,a.attributes,u.attributes,o.undirected),r&&l)return o.key;o=o.next}while(o!==void 0)}}function fi(r,e){const t=Object.keys(r),n=t.length;let o,a=0;return new Ve(function(){do if(o)o=o.next;else{if(a>=n)return{done:!0};const l=t[a++];if(l===e){o=void 0;continue}o=r[l]}while(!o);return{done:!1,value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected}}})}function mv(r,e,t,n){const o=e[t];if(!o)return;const a=o.source,u=o.target;if(n(o.key,o.attributes,a.key,u.key,a.attributes,u.attributes,o.undirected)&&r)return o.key}function bv(r,e,t,n){let o=e[t];if(!o)return;let a=!1;do{if(a=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),r&&a)return o.key;o=o.next}while(o!==void 0)}function pi(r,e){let t=r[e];return t.next!==void 0?new Ve(function(){if(!t)return{done:!0};const n={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:n}}):Ve.of({edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected})}function wv(r,e){if(r.size===0)return[];if(e==="mixed"||e===r.type)return typeof Array.from=="function"?Array.from(r._edges.keys()):Wc(r._edges.keys(),r._edges.size);const t=e==="undirected"?r.undirectedSize:r.directedSize,n=new Array(t),o=e==="undirected",a=r._edges.values();let u=0,l,f;for(;l=a.next(),l.done!==!0;)f=l.value,f.undirected===o&&(n[u++]=f.key);return n}function el(r,e,t,n){if(e.size===0)return;const o=t!=="mixed"&&t!==e.type,a=t==="undirected";let u,l,f=!1;const h=e._edges.values();for(;u=h.next(),u.done!==!0;){if(l=u.value,o&&l.undirected!==a)continue;const{key:p,attributes:v,source:m,target:b}=l;if(f=n(p,v,m.key,b.key,m.attributes,b.attributes,l.undirected),r&&f)return p}}function xv(r,e){if(r.size===0)return Ve.empty();const t=e!=="mixed"&&e!==r.type,n=e==="undirected",o=r._edges.values();return new Ve(function(){let u,l;for(;;){if(u=o.next(),u.done)return u;if(l=u.value,!(t&&l.undirected!==n))break}return{value:{edge:l.key,attributes:l.attributes,source:l.source.key,target:l.target.key,sourceAttributes:l.source.attributes,targetAttributes:l.target.attributes,undirected:l.undirected},done:!1}})}function na(r,e,t,n,o,a){const u=e?yv:vv;let l;if(t!=="undirected"&&(n!=="out"&&(l=u(r,o.in,a),r&&l)||n!=="in"&&(l=u(r,o.out,a,n?void 0:o.key),r&&l))||t!=="directed"&&(l=u(r,o.undirected,a),r&&l))return l}function Ev(r,e,t,n){const o=[];return na(!1,r,e,t,n,function(a){o.push(a)}),o}function _v(r,e,t){let n=Ve.empty();return r!=="undirected"&&(e!=="out"&&typeof t.in<"u"&&(n=xt(n,fi(t.in))),e!=="in"&&typeof t.out<"u"&&(n=xt(n,fi(t.out,e?void 0:t.key)))),r!=="directed"&&typeof t.undirected<"u"&&(n=xt(n,fi(t.undirected))),n}function ia(r,e,t,n,o,a,u){const l=t?bv:mv;let f;if(e!=="undirected"&&(typeof o.in<"u"&&n!=="out"&&(f=l(r,o.in,a,u),r&&f)||typeof o.out<"u"&&n!=="in"&&(n||o.key!==a)&&(f=l(r,o.out,a,u),r&&f))||e!=="directed"&&typeof o.undirected<"u"&&(f=l(r,o.undirected,a,u),r&&f))return f}function Sv(r,e,t,n,o){const a=[];return ia(!1,r,e,t,n,o,function(u){a.push(u)}),a}function Av(r,e,t,n){let o=Ve.empty();return r!=="undirected"&&(typeof t.in<"u"&&e!=="out"&&n in t.in&&(o=xt(o,pi(t.in,n))),typeof t.out<"u"&&e!=="in"&&n in t.out&&(e||t.key!==n)&&(o=xt(o,pi(t.out,n)))),r!=="directed"&&typeof t.undirected<"u"&&n in t.undirected&&(o=xt(o,pi(t.undirected,n))),o}function kv(r,e){const{name:t,type:n,direction:o}=e;r.prototype[t]=function(a,u){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return[];if(!arguments.length)return wv(this,n);if(arguments.length===1){a=""+a;const l=this._nodes.get(a);if(typeof l>"u")throw new oe(`Graph.${t}: could not find the "${a}" node in the graph.`);return Ev(this.multi,n==="mixed"?this.type:n,o,l)}if(arguments.length===2){a=""+a,u=""+u;const l=this._nodes.get(a);if(!l)throw new oe(`Graph.${t}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(u))throw new oe(`Graph.${t}:  could not find the "${u}" target node in the graph.`);return Sv(n,this.multi,o,l,u)}throw new se(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Nv(r,e){const{name:t,type:n,direction:o}=e,a="forEach"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[a]=function(h,p,v){if(!(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)){if(arguments.length===1)return v=h,el(!1,this,n,v);if(arguments.length===2){h=""+h,v=p;const m=this._nodes.get(h);if(typeof m>"u")throw new oe(`Graph.${a}: could not find the "${h}" node in the graph.`);return na(!1,this.multi,n==="mixed"?this.type:n,o,m,v)}if(arguments.length===3){h=""+h,p=""+p;const m=this._nodes.get(h);if(!m)throw new oe(`Graph.${a}:  could not find the "${h}" source node in the graph.`);if(!this._nodes.has(p))throw new oe(`Graph.${a}:  could not find the "${p}" target node in the graph.`);return ia(!1,n,this.multi,o,m,p,v)}throw new se(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const u="map"+t[0].toUpperCase()+t.slice(1);r.prototype[u]=function(){const h=Array.prototype.slice.call(arguments),p=h.pop();let v;if(h.length===0){let m=0;n!=="directed"&&(m+=this.undirectedSize),n!=="undirected"&&(m+=this.directedSize),v=new Array(m);let b=0;h.push((S,_,N,M,k,$,E)=>{v[b++]=p(S,_,N,M,k,$,E)})}else v=[],h.push((m,b,S,_,N,M,k)=>{v.push(p(m,b,S,_,N,M,k))});return this[a].apply(this,h),v};const l="filter"+t[0].toUpperCase()+t.slice(1);r.prototype[l]=function(){const h=Array.prototype.slice.call(arguments),p=h.pop(),v=[];return h.push((m,b,S,_,N,M,k)=>{p(m,b,S,_,N,M,k)&&v.push(m)}),this[a].apply(this,h),v};const f="reduce"+t[0].toUpperCase()+t.slice(1);r.prototype[f]=function(){let h=Array.prototype.slice.call(arguments);if(h.length<2||h.length>4)throw new se(`Graph.${f}: invalid number of arguments (expecting 2, 3 or 4 and got ${h.length}).`);if(typeof h[h.length-1]=="function"&&typeof h[h.length-2]!="function")throw new se(`Graph.${f}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let p,v;h.length===2?(p=h[0],v=h[1],h=[]):h.length===3?(p=h[1],v=h[2],h=[h[0]]):h.length===4&&(p=h[2],v=h[3],h=[h[0],h[1]]);let m=v;return h.push((b,S,_,N,M,k,$)=>{m=p(m,b,S,_,N,M,k,$)}),this[a].apply(this,h),m}}function Mv(r,e){const{name:t,type:n,direction:o}=e,a="find"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[a]=function(f,h,p){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return!1;if(arguments.length===1)return p=f,el(!0,this,n,p);if(arguments.length===2){f=""+f,p=h;const v=this._nodes.get(f);if(typeof v>"u")throw new oe(`Graph.${a}: could not find the "${f}" node in the graph.`);return na(!0,this.multi,n==="mixed"?this.type:n,o,v,p)}if(arguments.length===3){f=""+f,h=""+h;const v=this._nodes.get(f);if(!v)throw new oe(`Graph.${a}:  could not find the "${f}" source node in the graph.`);if(!this._nodes.has(h))throw new oe(`Graph.${a}:  could not find the "${h}" target node in the graph.`);return ia(!0,n,this.multi,o,v,h,p)}throw new se(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const u="some"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[u]=function(){const f=Array.prototype.slice.call(arguments),h=f.pop();return f.push((v,m,b,S,_,N,M)=>h(v,m,b,S,_,N,M)),!!this[a].apply(this,f)};const l="every"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[l]=function(){const f=Array.prototype.slice.call(arguments),h=f.pop();return f.push((v,m,b,S,_,N,M)=>!h(v,m,b,S,_,N,M)),!this[a].apply(this,f)}}function Cv(r,e){const{name:t,type:n,direction:o}=e,a=t.slice(0,-1)+"Entries";r.prototype[a]=function(u,l){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return Ve.empty();if(!arguments.length)return xv(this,n);if(arguments.length===1){u=""+u;const f=this._nodes.get(u);if(!f)throw new oe(`Graph.${a}: could not find the "${u}" node in the graph.`);return _v(n,o,f)}if(arguments.length===2){u=""+u,l=""+l;const f=this._nodes.get(u);if(!f)throw new oe(`Graph.${a}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(l))throw new oe(`Graph.${a}:  could not find the "${l}" target node in the graph.`);return Av(n,o,f,l)}throw new se(`Graph.${a}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Dv(r){gv.forEach(e=>{kv(r,e),Nv(r,e),Mv(r,e),Cv(r,e)})}const Iv=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Rn(){this.A=null,this.B=null}Rn.prototype.wrap=function(r){this.A===null?this.A=r:this.B===null&&(this.B=r)};Rn.prototype.has=function(r){return this.A!==null&&r in this.A||this.B!==null&&r in this.B};function Nr(r,e,t,n,o){for(const a in n){const u=n[a],l=u.source,f=u.target,h=l===t?f:l;if(e&&e.has(h.key))continue;const p=o(h.key,h.attributes);if(r&&p)return h.key}}function oa(r,e,t,n,o){if(e!=="mixed"){if(e==="undirected")return Nr(r,null,n,n.undirected,o);if(typeof t=="string")return Nr(r,null,n,n[t],o)}const a=new Rn;let u;if(e!=="undirected"){if(t!=="out"){if(u=Nr(r,null,n,n.in,o),r&&u)return u;a.wrap(n.in)}if(t!=="in"){if(u=Nr(r,a,n,n.out,o),r&&u)return u;a.wrap(n.out)}}if(e!=="directed"&&(u=Nr(r,a,n,n.undirected,o),r&&u))return u}function $v(r,e,t){if(r!=="mixed"){if(r==="undirected")return Object.keys(t.undirected);if(typeof e=="string")return Object.keys(t[e])}const n=[];return oa(!1,r,e,t,function(o){n.push(o)}),n}function Mr(r,e,t){const n=Object.keys(t),o=n.length;let a=0;return new Ve(function(){let l=null;do{if(a>=o)return r&&r.wrap(t),{done:!0};const f=t[n[a++]],h=f.source,p=f.target;if(l=h===e?p:h,r&&r.has(l.key)){l=null;continue}}while(l===null);return{done:!1,value:{neighbor:l.key,attributes:l.attributes}}})}function zv(r,e,t){if(r!=="mixed"){if(r==="undirected")return Mr(null,t,t.undirected);if(typeof e=="string")return Mr(null,t,t[e])}let n=Ve.empty();const o=new Rn;return r!=="undirected"&&(e!=="out"&&(n=xt(n,Mr(o,t,t.in))),e!=="in"&&(n=xt(n,Mr(o,t,t.out)))),r!=="directed"&&(n=xt(n,Mr(o,t,t.undirected))),n}function Tv(r,e){const{name:t,type:n,direction:o}=e;r.prototype[t]=function(a){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return[];a=""+a;const u=this._nodes.get(a);if(typeof u>"u")throw new oe(`Graph.${t}: could not find the "${a}" node in the graph.`);return $v(n==="mixed"?this.type:n,o,u)}}function Lv(r,e){const{name:t,type:n,direction:o}=e,a="forEach"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[a]=function(h,p){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return;h=""+h;const v=this._nodes.get(h);if(typeof v>"u")throw new oe(`Graph.${a}: could not find the "${h}" node in the graph.`);oa(!1,n==="mixed"?this.type:n,o,v,p)};const u="map"+t[0].toUpperCase()+t.slice(1);r.prototype[u]=function(h,p){const v=[];return this[a](h,(m,b)=>{v.push(p(m,b))}),v};const l="filter"+t[0].toUpperCase()+t.slice(1);r.prototype[l]=function(h,p){const v=[];return this[a](h,(m,b)=>{p(m,b)&&v.push(m)}),v};const f="reduce"+t[0].toUpperCase()+t.slice(1);r.prototype[f]=function(h,p,v){if(arguments.length<3)throw new se(`Graph.${f}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let m=v;return this[a](h,(b,S)=>{m=p(m,b,S)}),m}}function Pv(r,e){const{name:t,type:n,direction:o}=e,a=t[0].toUpperCase()+t.slice(1,-1),u="find"+a;r.prototype[u]=function(h,p){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return;h=""+h;const v=this._nodes.get(h);if(typeof v>"u")throw new oe(`Graph.${u}: could not find the "${h}" node in the graph.`);return oa(!0,n==="mixed"?this.type:n,o,v,p)};const l="some"+a;r.prototype[l]=function(h,p){return!!this[u](h,p)};const f="every"+a;r.prototype[f]=function(h,p){return!this[u](h,(m,b)=>!p(m,b))}}function Gv(r,e){const{name:t,type:n,direction:o}=e,a=t.slice(0,-1)+"Entries";r.prototype[a]=function(u){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return Ve.empty();u=""+u;const l=this._nodes.get(u);if(typeof l>"u")throw new oe(`Graph.${a}: could not find the "${u}" node in the graph.`);return zv(n==="mixed"?this.type:n,o,l)}}function Ov(r){Iv.forEach(e=>{Tv(r,e),Lv(r,e),Pv(r,e),Gv(r,e)})}function yn(r,e,t,n,o){const a=n._nodes.values(),u=n.type;let l,f,h,p,v,m;for(;l=a.next(),l.done!==!0;){let b=!1;if(f=l.value,u!=="undirected"){p=f.out;for(h in p){v=p[h];do m=v.target,b=!0,o(f.key,m.key,f.attributes,m.attributes,v.key,v.attributes,v.undirected),v=v.next;while(v)}}if(u!=="directed"){p=f.undirected;for(h in p)if(!(e&&f.key>h)){v=p[h];do m=v.target,m.key!==h&&(m=v.source),b=!0,o(f.key,m.key,f.attributes,m.attributes,v.key,v.attributes,v.undirected),v=v.next;while(v)}}t&&!b&&o(f.key,null,f.attributes,null,null,null,null)}}function Rv(r,e){const t={key:r};return Hc(e.attributes)||(t.attributes=De({},e.attributes)),t}function qv(r,e,t){const n={key:e,source:t.source.key,target:t.target.key};return Hc(t.attributes)||(n.attributes=De({},t.attributes)),r==="mixed"&&t.undirected&&(n.undirected=!0),n}function Bv(r){if(!Ie(r))throw new se('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in r))throw new se("Graph.import: serialized node is missing its key.");if("attributes"in r&&(!Ie(r.attributes)||r.attributes===null))throw new se("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Uv(r){if(!Ie(r))throw new se('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in r))throw new se("Graph.import: serialized edge is missing its source.");if(!("target"in r))throw new se("Graph.import: serialized edge is missing its target.");if("attributes"in r&&(!Ie(r.attributes)||r.attributes===null))throw new se("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in r&&typeof r.undirected!="boolean")throw new se("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const jv=Wg(),Fv=new Set(["directed","undirected","mixed"]),Ss=new Set(["domain","_events","_eventsCount","_maxListeners"]),Wv=[{name:r=>`${r}Edge`,generateKey:!0},{name:r=>`${r}DirectedEdge`,generateKey:!0,type:"directed"},{name:r=>`${r}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:r=>`${r}EdgeWithKey`},{name:r=>`${r}DirectedEdgeWithKey`,type:"directed"},{name:r=>`${r}UndirectedEdgeWithKey`,type:"undirected"}],Hv={allowSelfLoops:!0,multi:!1,type:"mixed"};function Kv(r,e,t){if(t&&!Ie(t))throw new se(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(e=""+e,t=t||{},r._nodes.has(e))throw new pe(`Graph.addNode: the "${e}" node already exist in the graph.`);const n=new r.NodeDataClass(e,t);return r._nodes.set(e,n),r.emit("nodeAdded",{key:e,attributes:t}),n}function As(r,e,t){const n=new r.NodeDataClass(e,t);return r._nodes.set(e,n),r.emit("nodeAdded",{key:e,attributes:t}),n}function tl(r,e,t,n,o,a,u,l){if(!n&&r.type==="undirected")throw new pe(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(n&&r.type==="directed")throw new pe(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(l&&!Ie(l))throw new se(`Graph.${e}: invalid attributes. Expecting an object but got "${l}"`);if(a=""+a,u=""+u,l=l||{},!r.allowSelfLoops&&a===u)throw new pe(`Graph.${e}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const f=r._nodes.get(a),h=r._nodes.get(u);if(!f)throw new oe(`Graph.${e}: source node "${a}" not found.`);if(!h)throw new oe(`Graph.${e}: target node "${u}" not found.`);const p={key:null,undirected:n,source:a,target:u,attributes:l};if(t)o=r._edgeKeyGenerator();else if(o=""+o,r._edges.has(o))throw new pe(`Graph.${e}: the "${o}" edge already exists in the graph.`);if(!r.multi&&(n?typeof f.undirected[u]<"u":typeof f.out[u]<"u"))throw new pe(`Graph.${e}: an edge linking "${a}" to "${u}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const v=new gr(n,o,f,h,l);r._edges.set(o,v);const m=a===u;return n?(f.undirectedDegree++,h.undirectedDegree++,m&&(f.undirectedLoops++,r._undirectedSelfLoopCount++)):(f.outDegree++,h.inDegree++,m&&(f.directedLoops++,r._directedSelfLoopCount++)),r.multi?v.attachMulti():v.attach(),n?r._undirectedSize++:r._directedSize++,p.key=o,r.emit("edgeAdded",p),o}function Yv(r,e,t,n,o,a,u,l,f){if(!n&&r.type==="undirected")throw new pe(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(n&&r.type==="directed")throw new pe(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(l){if(f){if(typeof l!="function")throw new se(`Graph.${e}: invalid updater function. Expecting a function but got "${l}"`)}else if(!Ie(l))throw new se(`Graph.${e}: invalid attributes. Expecting an object but got "${l}"`)}a=""+a,u=""+u;let h;if(f&&(h=l,l=void 0),!r.allowSelfLoops&&a===u)throw new pe(`Graph.${e}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let p=r._nodes.get(a),v=r._nodes.get(u),m,b;if(!t&&(m=r._edges.get(o),m)){if((m.source.key!==a||m.target.key!==u)&&(!n||m.source.key!==u||m.target.key!==a))throw new pe(`Graph.${e}: inconsistency detected when attempting to merge the "${o}" edge with "${a}" source & "${u}" target vs. ("${m.source.key}", "${m.target.key}").`);b=m}if(!b&&!r.multi&&p&&(b=n?p.undirected[u]:p.out[u]),b){const k=[b.key,!1,!1,!1];if(f?!h:!l)return k;if(f){const $=b.attributes;b.attributes=h($),r.emit("edgeAttributesUpdated",{type:"replace",key:b.key,attributes:b.attributes})}else De(b.attributes,l),r.emit("edgeAttributesUpdated",{type:"merge",key:b.key,attributes:b.attributes,data:l});return k}l=l||{},f&&h&&(l=h(l));const S={key:null,undirected:n,source:a,target:u,attributes:l};if(t)o=r._edgeKeyGenerator();else if(o=""+o,r._edges.has(o))throw new pe(`Graph.${e}: the "${o}" edge already exists in the graph.`);let _=!1,N=!1;p||(p=As(r,a,{}),_=!0,a===u&&(v=p,N=!0)),v||(v=As(r,u,{}),N=!0),m=new gr(n,o,p,v,l),r._edges.set(o,m);const M=a===u;return n?(p.undirectedDegree++,v.undirectedDegree++,M&&(p.undirectedLoops++,r._undirectedSelfLoopCount++)):(p.outDegree++,v.inDegree++,M&&(p.directedLoops++,r._directedSelfLoopCount++)),r.multi?m.attachMulti():m.attach(),n?r._undirectedSize++:r._directedSize++,S.key=o,r.emit("edgeAdded",S),[o,!0,_,N]}function rr(r,e){r._edges.delete(e.key);const{source:t,target:n,attributes:o}=e,a=e.undirected,u=t===n;a?(t.undirectedDegree--,n.undirectedDegree--,u&&(t.undirectedLoops--,r._undirectedSelfLoopCount--)):(t.outDegree--,n.inDegree--,u&&(t.directedLoops--,r._directedSelfLoopCount--)),r.multi?e.detachMulti():e.detach(),a?r._undirectedSize--:r._directedSize--,r.emit("edgeDropped",{key:e.key,attributes:o,source:t.key,target:n.key,undirected:a})}class _e extends Og.EventEmitter{constructor(e){if(super(),e=De({},Hv,e),typeof e.multi!="boolean")throw new se(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Fv.has(e.type))throw new se(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new se(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const t=e.type==="mixed"?Yc:e.type==="directed"?Xc:Vc;He(this,"NodeDataClass",t);const n="geid_"+jv()+"_";let o=0;const a=()=>{let u;do u=n+o++;while(this._edges.has(u));return u};He(this,"_attributes",{}),He(this,"_nodes",new Map),He(this,"_edges",new Map),He(this,"_directedSize",0),He(this,"_undirectedSize",0),He(this,"_directedSelfLoopCount",0),He(this,"_undirectedSelfLoopCount",0),He(this,"_edgeKeyGenerator",a),He(this,"_options",e),Ss.forEach(u=>He(this,u,this[u])),et(this,"order",()=>this._nodes.size),et(this,"size",()=>this._edges.size),et(this,"directedSize",()=>this._directedSize),et(this,"undirectedSize",()=>this._undirectedSize),et(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),et(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),et(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),et(this,"multi",this._options.multi),et(this,"type",this._options.type),et(this,"allowSelfLoops",this._options.allowSelfLoops),et(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if(this.type==="undirected")return!1;if(arguments.length===1){const n=""+e,o=this._edges.get(n);return!!o&&!o.undirected}else if(arguments.length===2){e=""+e,t=""+t;const n=this._nodes.get(e);return n?n.out.hasOwnProperty(t):!1}throw new se(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if(this.type==="directed")return!1;if(arguments.length===1){const n=""+e,o=this._edges.get(n);return!!o&&o.undirected}else if(arguments.length===2){e=""+e,t=""+t;const n=this._nodes.get(e);return n?n.undirected.hasOwnProperty(t):!1}throw new se(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(arguments.length===1){const n=""+e;return this._edges.has(n)}else if(arguments.length===2){e=""+e,t=""+t;const n=this._nodes.get(e);return n?typeof n.out<"u"&&n.out.hasOwnProperty(t)||typeof n.undirected<"u"&&n.undirected.hasOwnProperty(t):!1}throw new se(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if(this.type==="undirected")return;if(e=""+e,t=""+t,this.multi)throw new pe("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const n=this._nodes.get(e);if(!n)throw new oe(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new oe(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const o=n.out&&n.out[t]||void 0;if(o)return o.key}undirectedEdge(e,t){if(this.type==="directed")return;if(e=""+e,t=""+t,this.multi)throw new pe("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const n=this._nodes.get(e);if(!n)throw new oe(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new oe(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const o=n.undirected&&n.undirected[t]||void 0;if(o)return o.key}edge(e,t){if(this.multi)throw new pe("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new oe(`Graph.edge: could not find the "${t}" target node in the graph.`);const o=n.out&&n.out[t]||n.undirected&&n.undirected[t]||void 0;if(o)return o.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in n.in||t in n.out}areOutNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in n.out}areInNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in n.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:t in n.undirected}areNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(t in n.in||t in n.out)||this.type!=="directed"&&t in n.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in n.in||this.type!=="directed"&&t in n.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new oe(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in n.out||this.type!=="directed"&&t in n.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new oe(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new oe(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new oe(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new oe(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new oe(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=t.undirectedDegree),this.type!=="undirected"&&(n+=t.inDegree),n}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new oe(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=t.undirectedDegree),this.type!=="undirected"&&(n+=t.outDegree),n}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new oe(`Graph.degree: could not find the "${e}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=t.undirectedDegree),this.type!=="undirected"&&(n+=t.inDegree+t.outDegree),n}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new oe(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new oe(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new oe(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new oe(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new oe(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let n=0,o=0;return this.type!=="directed"&&(n+=t.undirectedDegree,o+=t.undirectedLoops*2),this.type!=="undirected"&&(n+=t.inDegree,o+=t.directedLoops),n-o}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new oe(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let n=0,o=0;return this.type!=="directed"&&(n+=t.undirectedDegree,o+=t.undirectedLoops*2),this.type!=="undirected"&&(n+=t.outDegree,o+=t.directedLoops),n-o}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new oe(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let n=0,o=0;return this.type!=="directed"&&(n+=t.undirectedDegree,o+=t.undirectedLoops*2),this.type!=="undirected"&&(n+=t.inDegree+t.outDegree,o+=t.directedLoops*2),n-o}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new oe(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new oe(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new oe(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const n=this._edges.get(t);if(!n)throw new oe(`Graph.opposite: could not find the "${t}" edge in the graph.`);const o=n.source.key,a=n.target.key;if(e===o)return a;if(e===a)return o;throw new oe(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${o}, ${a}).`)}hasExtremity(e,t){e=""+e,t=""+t;const n=this._edges.get(e);if(!n)throw new oe(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return n.source.key===t||n.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new oe(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new oe(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new oe(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return Kv(this,e,t).key}mergeNode(e,t){if(t&&!Ie(t))throw new se(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let n=this._nodes.get(e);return n?(t&&(De(n.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:n.attributes,data:t})),[e,!1]):(n=new this.NodeDataClass(e,t),this._nodes.set(e,n),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&typeof t!="function")throw new se(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let n=this._nodes.get(e);if(n){if(t){const a=n.attributes;n.attributes=t(a),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:n.attributes})}return[e,!1]}const o=t?t({}):{};return n=new this.NodeDataClass(e,o),this._nodes.set(e,n),this.emit("nodeAdded",{key:e,attributes:o}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new oe(`Graph.dropNode: could not find the "${e}" node in the graph.`);let n;if(this.type!=="undirected"){for(const o in t.out){n=t.out[o];do rr(this,n),n=n.next;while(n)}for(const o in t.in){n=t.in[o];do rr(this,n),n=n.next;while(n)}}if(this.type!=="directed")for(const o in t.undirected){n=t.undirected[o];do rr(this,n),n=n.next;while(n)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const n=""+arguments[0],o=""+arguments[1];if(t=Xe(this,n,o,this.type),!t)throw new oe(`Graph.dropEdge: could not find the "${n}" -> "${o}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new oe(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return rr(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new pe("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new pe("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,t=""+t;const n=Xe(this,e,t,"directed");if(!n)throw new oe(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return rr(this,n),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new pe("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new pe("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const n=Xe(this,e,t,"undirected");if(!n)throw new oe(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return rr(this,n),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if(typeof t!="function")throw new se("Graph.updateAttribute: updater should be a function.");const n=this._attributes[e];return this._attributes[e]=t(n),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Ie(e))throw new se("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Ie(e))throw new se("Graph.mergeAttributes: provided attributes are not a plain object.");return De(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new se("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if(typeof e!="function")throw new se("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!_s(t))throw new se("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._nodes.values();let o,a;for(;o=n.next(),o.done!==!0;)a=o.value,a.attributes=e(a.key,a.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if(typeof e!="function")throw new se("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!_s(t))throw new se("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._edges.values();let o,a,u,l;for(;o=n.next(),o.done!==!0;)a=o.value,u=a.source,l=a.target,a.attributes=e(a.key,a.attributes,u.key,l.key,u.attributes,l.attributes,a.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new se("Graph.forEachAdjacencyEntry: expecting a callback.");yn(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new se("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");yn(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new se("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");yn(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new se("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");yn(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):Wc(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new se("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let n,o;for(;n=t.next(),n.done!==!0;)o=n.value,e(o.key,o.attributes)}findNode(e){if(typeof e!="function")throw new se("Graph.findNode: expecting a callback.");const t=this._nodes.values();let n,o;for(;n=t.next(),n.done!==!0;)if(o=n.value,e(o.key,o.attributes))return o.key}mapNodes(e){if(typeof e!="function")throw new se("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let n,o;const a=new Array(this.order);let u=0;for(;n=t.next(),n.done!==!0;)o=n.value,a[u++]=e(o.key,o.attributes);return a}someNode(e){if(typeof e!="function")throw new se("Graph.someNode: expecting a callback.");const t=this._nodes.values();let n,o;for(;n=t.next(),n.done!==!0;)if(o=n.value,e(o.key,o.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new se("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let n,o;for(;n=t.next(),n.done!==!0;)if(o=n.value,!e(o.key,o.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new se("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let n,o;const a=[];for(;n=t.next(),n.done!==!0;)o=n.value,e(o.key,o.attributes)&&a.push(o.key);return a}reduceNodes(e,t){if(typeof e!="function")throw new se("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new se("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let n=t;const o=this._nodes.values();let a,u;for(;a=o.next(),a.done!==!0;)u=a.value,n=e(n,u.key,u.attributes);return n}nodeEntries(){const e=this._nodes.values();return new Ve(()=>{const t=e.next();if(t.done)return t;const n=t.value;return{value:{node:n.key,attributes:n.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach((o,a)=>{e[t++]=Rv(a,o)});const n=new Array(this._edges.size);return t=0,this._edges.forEach((o,a)=>{n[t++]=qv(this.type,a,o)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:n}}import(e,t=!1){if(e instanceof _e)return e.forEachNode((f,h)=>{t?this.mergeNode(f,h):this.addNode(f,h)}),e.forEachEdge((f,h,p,v,m,b,S)=>{t?S?this.mergeUndirectedEdgeWithKey(f,p,v,h):this.mergeDirectedEdgeWithKey(f,p,v,h):S?this.addUndirectedEdgeWithKey(f,p,v,h):this.addDirectedEdgeWithKey(f,p,v,h)}),this;if(!Ie(e))throw new se("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Ie(e.attributes))throw new se("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let n,o,a,u,l;if(e.nodes){if(a=e.nodes,!Array.isArray(a))throw new se("Graph.import: invalid nodes. Expecting an array.");for(n=0,o=a.length;n<o;n++){u=a[n],Bv(u);const{key:f,attributes:h}=u;t?this.mergeNode(f,h):this.addNode(f,h)}}if(e.edges){let f=!1;if(this.type==="undirected"&&(f=!0),a=e.edges,!Array.isArray(a))throw new se("Graph.import: invalid edges. Expecting an array.");for(n=0,o=a.length;n<o;n++){l=a[n],Uv(l);const{source:h,target:p,attributes:v,undirected:m=f}=l;let b;"key"in l?(b=t?m?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:m?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,b.call(this,l.key,h,p,v)):(b=t?m?this.mergeUndirectedEdge:this.mergeDirectedEdge:m?this.addUndirectedEdge:this.addDirectedEdge,b.call(this,h,p,v))}}return this}nullCopy(e){const t=new _e(De({},this._options,e));return t.replaceAttributes(De({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach((n,o)=>{const a=De({},n.attributes);n=new t.NodeDataClass(o,a),t._nodes.set(o,n)}),t}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new pe(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new pe("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new pe("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),n=this._edges.values();let o,a;for(;o=n.next(),o.done!==!0;)a=o.value,tl(t,"copy",!1,a.undirected,a.key,a.source.key,a.target.key,De({},a.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((a,u)=>{e[u]=a.attributes});const t={},n={};this._edges.forEach((a,u)=>{const l=a.undirected?"--":"->";let f="",h=a.source.key,p=a.target.key,v;a.undirected&&h>p&&(v=h,h=p,p=v);const m=`(${h})${l}(${p})`;u.startsWith("geid_")?this.multi&&(typeof n[m]>"u"?n[m]=0:n[m]++,f+=`${n[m]}. `):f+=`[${u}]: `,f+=m,t[f]=a.attributes});const o={};for(const a in this)this.hasOwnProperty(a)&&!Ss.has(a)&&typeof this[a]!="function"&&typeof a!="symbol"&&(o[a]=this[a]);return o.attributes=this._attributes,o.nodes=e,o.edges=t,He(o,"constructor",this.constructor),o}}typeof Symbol<"u"&&(_e.prototype[Symbol.for("nodejs.util.inspect.custom")]=_e.prototype.inspect);Wv.forEach(r=>{["add","merge","update"].forEach(e=>{const t=r.name(e),n=e==="add"?tl:Yv;r.generateKey?_e.prototype[t]=function(o,a,u){return n(this,t,!0,(r.type||this.type)==="undirected",null,o,a,u,e==="update")}:_e.prototype[t]=function(o,a,u,l){return n(this,t,!1,(r.type||this.type)==="undirected",o,a,u,l,e==="update")}})});nv(_e);pv(_e);Dv(_e);Ov(_e);let rl=class extends _e{constructor(e){const t=De({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new se("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new se('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}},nl=class extends _e{constructor(e){const t=De({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new se("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new se('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}};class il extends _e{constructor(e){const t=De({multi:!0},e);if("multi"in t&&t.multi!==!0)throw new se("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class ol extends _e{constructor(e){const t=De({type:"directed",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new se("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new se('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class al extends _e{constructor(e){const t=De({type:"undirected",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new se("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new se('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function vr(r){r.from=function(e,t){const n=De({},e.options,t),o=new r(n);return o.import(e),o}}vr(_e);vr(rl);vr(nl);vr(il);vr(ol);vr(al);_e.Graph=_e;_e.DirectedGraph=rl;_e.UndirectedGraph=nl;_e.MultiGraph=il;_e.MultiDirectedGraph=ol;_e.MultiUndirectedGraph=al;_e.InvalidArgumentsGraphError=se;_e.NotFoundGraphError=oe;_e.UsageGraphError=pe;var tt={},gi,ks;function xe(){return ks||(ks=1,gi=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),gi}var vi={},Ns;function aa(){return Ns||(Ns=1,vi.copyNode=function(r,e,t){return t=Object.assign({},t),r.addNode(e,t)}),vi}var nr={},Ms;function St(){return Ms||(Ms=1,nr.addEdge=function(e,t,n,o,a,u){return t?n==null?e.addUndirectedEdge(o,a,u):e.addUndirectedEdgeWithKey(n,o,a,u):n==null?e.addDirectedEdge(o,a,u):e.addDirectedEdgeWithKey(n,o,a,u)},nr.copyEdge=function(e,t,n,o,a,u){return u=Object.assign({},u),t?n==null?e.addUndirectedEdge(o,a,u):e.addUndirectedEdgeWithKey(n,o,a,u):n==null?e.addDirectedEdge(o,a,u):e.addDirectedEdgeWithKey(n,o,a,u)},nr.mergeEdge=function(e,t,n,o,a,u){return t?n==null?e.mergeUndirectedEdge(o,a,u):e.mergeUndirectedEdgeWithKey(n,o,a,u):n==null?e.mergeDirectedEdge(o,a,u):e.mergeDirectedEdgeWithKey(n,o,a,u)},nr.updateEdge=function(e,t,n,o,a,u){return t?n==null?e.updateUndirectedEdge(o,a,u):e.updateUndirectedEdgeWithKey(n,o,a,u):n==null?e.updateDirectedEdge(o,a,u):e.updateDirectedEdgeWithKey(n,o,a,u)}),nr}var yi,Cs;function Xv(){if(Cs)return yi;Cs=1;var r=xe(),e=aa().copyNode,t=St().copyEdge;return yi=function(o,a){if(!r(o)||!r(a))throw new Error("graphology-operators/disjoint-union: invalid graph.");if(o.multi!==a.multi)throw new Error("graphology-operators/disjoint-union: both graph should be simple or multi.");var u=o.nullCopy();u.mergeAttributes(o.getAttributes());var l={},f={},h=0;return o.forEachNode(function(p,v){l[p]=h,e(u,h,v),h++}),a.forEachNode(function(p,v){f[p]=h,e(u,h,v),h++}),h=0,o.forEachEdge(function(p,v,m,b,S,_,N){t(u,N,h++,l[m],l[b],b,v)}),a.forEachEdge(function(p,v,m,b,S,_,N){t(u,N,h++,f[m],f[b],b,v)}),u},yi}var mi,Ds;function Vv(){if(Ds)return mi;Ds=1;var r=xe(),e=St().copyEdge;return mi=function(n){if(!r(n))throw new Error("graphology-operators/reverse: invalid graph.");var o=n.emptyCopy();return n.forEachEdge(function(a,u,l,f,h,p,v){v?e(o,!0,a,l,f,u):e(o,!1,a,f,l,u)}),o},mi}var bi,Is;function Qv(){if(Is)return bi;Is=1;var r=xe(),e=aa().copyNode,t=St().copyEdge;return bi=function(o,a){if(!r(o))throw new Error("graphology-operators/subgraph: invalid graph instance.");var u=o.nullCopy(),l=a;if(Array.isArray(a)){if(a.length===0)return u;a=new Set(a)}if(a instanceof Set){if(a.size===0)return u;l=function(h){return a.has(h)};var f=a;a=new Set,f.forEach(function(h){a.add(""+h)})}if(typeof l!="function")throw new Error("graphology-operators/subgraph: invalid nodes. Expecting an array or a set or a filtering function.");if(typeof a=="function"){if(o.forEachNode(function(h,p){l(h,p)&&e(u,h,p)}),u.order===0)return u}else a.forEach(function(h){if(!o.hasNode(h))throw new Error('graphology-operators/subgraph: the "'+h+'" node was not found in the graph.');e(u,h,o.getNodeAttributes(h))});return o.forEachEdge(function(h,p,v,m,b,S,_){l(v,b)&&(m!==v&&!l(m,S)||t(u,_,h,v,m,p))}),u},bi}var wi,$s;function Zv(){if($s)return wi;$s=1;var r=xe(),e=St().copyEdge;return wi=function(n,o){if(!r(n))throw new Error("graphology-operators/to-directed: expecting a valid graphology instance.");typeof o=="function"&&(o={mergeEdge:o}),o=o||{};var a=typeof o.mergeEdge=="function"?o.mergeEdge:null;if(n.type==="directed")return n.copy();var u=n.emptyCopy({type:"directed"});return n.forEachDirectedEdge(function(l,f,h,p){e(u,!1,l,h,p,f)}),n.forEachUndirectedEdge(function(l,f,h,p){var v=!n.multi&&n.type==="mixed"&&u.edge(h,p),m=!n.multi&&n.type==="mixed"&&u.edge(p,h);v?u.replaceEdgeAttributes(v,a(u.getEdgeAttributes(v),f)):e(u,!1,null,h,p,f),h!==p&&(m?u.replaceEdgeAttributes(m,a(u.getEdgeAttributes(m),f)):e(u,!1,null,p,h,f))}),u},wi}var xi,zs;function Jv(){if(zs)return xi;zs=1;var r=xe();return xi=function(t){if(!r(t))throw new Error("graphology-operators/to-mixed: expecting a valid graphology instance.");return t.copy({type:"mixed"})},xi}var Ei,Ts;function ey(){if(Ts)return Ei;Ts=1;var r=xe();return Ei=function(t){if(!r(t))throw new Error("graphology-operators/to-multi: expecting a valid graphology instance.");return t.copy({multi:!0})},Ei}var _i,Ls;function ty(){if(Ls)return _i;Ls=1;var r=xe(),e=St().copyEdge;return _i=function(n,o){if(!r(n))throw new Error("graphology-operators/to-simple: expecting a valid graphology instance.");typeof o=="function"&&(o={mergeEdge:o}),o=o||{};var a=typeof o.mergeEdge=="function"?o.mergeEdge:null;if(!n.multi)return n.copy();var u=n.emptyCopy({multi:!1});return n.forEachEdge(function(l,f,h,p,v,m,b){var S=b?u.undirectedEdge(h,p):u.directedEdge(h,p);if(S){a&&u.replaceEdgeAttributes(S,a(u.getEdgeAttributes(S),f));return}e(u,b,l,h,p,f)}),u},_i}var Si,Ps;function ry(){if(Ps)return Si;Ps=1;var r=xe(),e=St().copyEdge;return Si=function(n,o){if(!r(n))throw new Error("graphology-operators/to-undirected: expecting a valid graphology instance.");typeof o=="function"&&(o={mergeEdge:o}),o=o||{};var a=typeof o.mergeEdge=="function"?o.mergeEdge:null;if(n.type==="undirected")return n.copy();var u=n.emptyCopy({type:"undirected"});return n.forEachUndirectedEdge(function(l,f,h,p){e(u,!0,l,h,p,f)}),n.forEachDirectedEdge(function(l,f,h,p){if(!n.multi){var v=u.edge(h,p);if(v){a&&u.replaceEdgeAttributes(v,a(u.getEdgeAttributes(v),f));return}}e(u,!0,null,h,p,f)}),u},Si}var Ai,Gs;function ny(){if(Gs)return Ai;Gs=1;var r=xe();return Ai=function(t,n){if(!r(t)||!r(n))throw new Error("graphology-operators/union: invalid graph.");if(t.multi!==n.multi)throw new Error("graphology-operators/union: both graph should be simple or multi.");var o=t.copy();return o.import(n,!0),o},Ai}var Os;function iy(){return Os||(Os=1,tt.disjointUnion=Xv(),tt.reverse=Vv(),tt.subgraph=Qv(),tt.toDirected=Zv(),tt.toMixed=Jv(),tt.toMulti=ey(),tt.toSimple=ty(),tt.toUndirected=ry(),tt.union=ny()),tt}var cr=iy();class Kt extends _e{constructor(e){super(e),this.custom=!0,this.on("nodeAdded",({key:t})=>{const n=this.getNodeAttributes(t);n.id||this.setNodeAttribute(t,"id",Number(t)),n.label===void 0&&this.setNodeAttribute(t,"label",void 0),n.weight===void 0&&this.setNodeAttribute(t,"weight",void 0),n.color===void 0&&this.setNodeAttribute(t,"color",void 0),n.labelColor===void 0&&this.setNodeAttribute(t,"labelColor",void 0),n.selected===void 0&&this.setNodeAttribute(t,"selected",!1),n.size===void 0&&this.setNodeAttribute(t,"size",.25),n.magnitude===void 0&&this.setNodeAttribute(t,"magnitude",1),n.desc===void 0&&this.setNodeAttribute(t,"desc",{})}),this.on("edgeAdded",({key:t,source:n,target:o})=>{const a=this.getEdgeAttributes(t);a.id||this.setEdgeAttribute(t,"id",this.size-1),a.label===void 0&&this.setEdgeAttribute(t,"label",void 0),a.weight===void 0&&this.setEdgeAttribute(t,"weight",void 0),a.color===void 0&&this.setEdgeAttribute(t,"color",void 0),a.labelColor===void 0&&this.setEdgeAttribute(t,"labelColor",void 0),a.source||this.setEdgeAttribute(t,"source",Number(n)),a.target||this.setEdgeAttribute(t,"target",Number(o)),a.selected===void 0&&this.setEdgeAttribute(t,"selected",!1),a.desc===void 0&&this.setEdgeAttribute(t,"desc",{})})}getEdgeWeight(e){const{weight:t}=this.getEdgeAttributes(e);return t}setEdgeWeight(e,t){this.updateEdgeAttribute(e,"weight",n=>t)}setDefaultEdgeWeight(e=1){this.updateEachEdgeAttributes((t,n)=>({...n,weight:e}))}nullCopy(e){var t=new Kt(Wo({},this._options,e));return t.replaceAttributes(Wo({},this.getAttributes())),t}getNodesForD3(){return this.nodes().map(e=>({...this.getNodeAttributes(e),id:Number(e)}))}getEdgesForD3(){return this.edges().map(e=>{const{source:t,target:n,...o}=this.getEdgeAttributes(e);return{source:Number(t),target:Number(n),...o}})}getEdgeSourceTarget(e){return[this.source(e),this.target(e)]}deselectAll(){this.updateEachNodeAttributes((e,t)=>({...t,selected:0})),this.updateEachEdgeAttributes((e,t)=>({...t,selected:!1}))}selectNode(e){this.setNodeAttribute(e,"selected",!0)}selectEdge(e){this.setEdgeAttribute(e,"selected",!0)}deselectNode(e){this.setNodeAttribute(e,"selected",!1)}deselectEdge(e){this.setEdgeAttribute(e,"selected",!1)}toggleNodeSelection(e){if((this.getNodeAttribute(e,"selected")||0)>0)this.setNodeAttribute(e,"selected",0);else{let n=0;this.forEachNode((o,a)=>{a.selected>n&&(n=a.selected)}),this.setNodeAttribute(e,"selected",n+1)}}toggleEdgeSelection(e){if((this.getEdgeAttribute(e,"selected")||0)>0)this.setEdgeAttribute(e,"selected",0);else{let n=0;this.forEachEdge((o,a)=>{a.selected>n&&(n=a.selected)}),this.setEdgeAttribute(e,"selected",n+1)}}getSelectedNodes(){return this.filterNodes((e,t)=>t.selected>0).sort((e,t)=>this.getNodeAttribute(e,"selected")-this.getNodeAttribute(t,"selected"))}getSelectedEdges(){return this.filterEdges((e,t)=>t.selected>0).sort((e,t)=>this.getEdgeAttribute(e,"selected")-this.getEdgeAttribute(t,"selected"))}deleteSelected(){this.getSelectedEdges().forEach(e=>this.dropEdge(e)),this.getSelectedNodes().forEach(e=>this.dropNode(e))}updateSelectedNodesColor(e,t,n){!e||!t||!n?e?this.updateSelectedNodesAttributes({color:e}):t?this.updateSelectedNodesAttributes({stroke:t}):n&&this.updateSelectedNodesAttributes({labelColor:n}):this.updateSelectedNodesAttributes({color:e,stroke:t,labelColor:n})}updateSelectedName(e){this.updateSelectedNodesAttributes({label:e}),this.updateSelectedEdgesAttributes({label:e})}updateSelectedInfo(e){this.updateSelectedNodesAttributes({desc:e}),this.updateSelectedEdgesAttributes({desc:e})}updateSelectedWeight(e){this.updateSelectedNodesAttributes({weight:e}),this.updateSelectedEdgesAttributes({weight:e})}updateSelectedNodesName(e){this.updateSelectedNodesAttributes({label:e})}updateSelectedNodesInfo(e){this.updateSelectedNodesAttributes({desc:e})}updateSelectedEdgesName(e){this.updateSelectedEdgesAttributes({label:e})}updateSelectedEdgesInfo(e){this.updateSelectedEdgesAttributes({desc:e})}updateSelectedEdgesColor(e,t){!e||!t?e?this.updateSelectedEdgesAttributes({color:e}):t&&this.updateSelectedEdgesAttributes({labelColor:t}):this.updateSelectedEdgesAttributes({color:e,labelColor:t})}updateSelectedNodesAttributes(e){this.getSelectedNodes().forEach(t=>{this.mergeNodeAttributes(t,e)})}updateSelectedEdgesAttributes(e){this.getSelectedEdges().forEach(t=>{this.mergeEdgeAttributes(t,e)})}connectSelectedNodes(e,t="directed"){const n=this.getSelectedNodes();if(!(n.length<1)){if(n.length>1)for(let o=0;o<n.length;o++)for(let a=o+1;a<n.length;a++){const u=n[o],l=n[a];t=="undirected"?this.mergeUndirectedEdge(u,l,{color:e,selected:!1}):this.mergeDirectedEdge(u,l,{color:e,selected:!1})}else if(this.allowSelfLoops){const o=n[0];t=="undirected"?this.mergeUndirectedEdge(o,o,{color:e,selected:!1}):this.mergeDirectedEdge(o,o,{color:e,selected:!1})}}}connectSelectedNodesInOrder(e,t="directed"){const n=this.getSelectedNodes();for(let o=0;o<n.length-1;o++){const a=n[o],u=n[o+1];t=="undirected"?this.mergeUndirectedEdge(a,u,{color:e,selected:!1}):this.mergeDirectedEdge(a,u,{color:e,selected:!1})}}selectPath(e){this.deselectAll(),e.forEach(t=>{this.hasNode(t)&&this.selectNode(t)});for(let t=0;t<e.length-1;t++){const n=e[t],o=e[t+1];if(this.hasEdge(n,o)){const a=this.edge(n,o);this.selectEdge(a)}}}copySubgraph(){const e=this.getSelectedNodes();return e.length===0?null:cr.subgraph(this,e)}cutSubgraph(){const e=this.copySubgraph();return e&&this.deleteSelected(),e}pasteSubgraph(e,t={x:0,y:0}){if(!e)return;e.forEachNode((o,a)=>{const u={...a};"x"in u&&(u.x+=t.x),"y"in u&&(u.y+=t.y),e.replaceNodeAttributes(o,u)}),this.deselectAll();const n=cr.disjointUnion(this,e);this.clear(),this.import(n.export())}replace(e){this.clear(),this.import(e.export())}}function oy(){for(var r=arguments[0],e=1,t=arguments.length;e<t;e++)if(arguments[e])for(var n in arguments[e])r[n]=arguments[e][n];return r}var Wo=oy;typeof Object.assign=="function"&&(Wo=Object.assign);class ki extends Kt{constructor(e={}){const t=Object.assign({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new InvalidArgumentsGraphError("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new InvalidArgumentsGraphError(`DirectedGraph.from: inconsistent "${t.type}" type in given options!`);super(t)}}class Ni extends Kt{constructor(e={}){const t=Object.assign({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new InvalidArgumentsGraphError("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new InvalidArgumentsGraphError(`UndirectedGraph.from: inconsistent "${t.type}" type in given options!`);super(t)}}var ir={},Mi,Rs;function st(){return Rs||(Rs=1,Mi=function(e){return e!==null&&typeof e=="function"&&typeof e.prototype=="object"&&typeof e.prototype.addUndirectedEdgeWithKey=="function"&&typeof e.prototype.dropNode=="function"}),Mi}var Ci,qs;function ay(){if(qs)return Ci;qs=1;var r=st();return Ci=function(t,n){if(!r(t))throw new Error("graphology-generators/classic/complete: invalid Graph constructor.");var o=new t,a,u;for(a=0;a<n;a++)o.addNode(a);for(a=0;a<n;a++)for(u=a+1;u<n;u++)o.type!=="directed"&&o.addUndirectedEdge(a,u),o.type!=="undirected"&&(o.addDirectedEdge(a,u),o.addDirectedEdge(u,a));return o},Ci}var Di,Bs;function sa(){if(Bs)return Di;Bs=1;var r=st();return Di=function(t,n){if(!r(t))throw new Error("graphology-generators/classic/empty: invalid Graph constructor.");var o=new t,a;for(a=0;a<n;a++)o.addNode(a);return o},Di}var Ii,Us;function sy(){if(Us)return Ii;Us=1;var r=st();return Ii=function(t,n){if(!r(t))throw new Error("graphology-generators/classic/ladder: invalid Graph constructor.");var o=new t,a;for(a=0;a<n-1;a++)o.mergeEdge(a,a+1);for(a=n;a<n*2-1;a++)o.mergeEdge(a,a+1);for(a=0;a<n;a++)o.addEdge(a,a+n);return o},Ii}var $i,js;function uy(){if(js)return $i;js=1;var r=st();return $i=function(t,n){if(!r(t))throw new Error("graphology-generators/classic/path: invalid Graph constructor.");for(var o=new t,a=0;a<n-1;a++)o.mergeEdge(a,a+1);return o},$i}var Fs;function cy(){return Fs||(Fs=1,ir.complete=ay(),ir.empty=sa(),ir.ladder=sy(),ir.path=uy()),ir}var it=cy(),rt={},zi,Ws;function ly(){if(Ws)return zi;Ws=1;function r(e){this.graph=e,this.stack=new Array(e.order),this.seen=new Set,this.size=0}return r.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},r.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},r.prototype.forEachNodeYetUnseen=function(e){var t=this.seen,n=this.graph;n.someNode(function(o,a){if(t.size===n.order)return!0;if(t.has(o))return!1;var u=e(o,a);return!!u})},r.prototype.has=function(e){return this.seen.has(e)},r.prototype.push=function(e){var t=this.seen.size;return this.seen.add(e),t===this.seen.size?!1:(this.stack[this.size++]=e,!0)},r.prototype.pushWith=function(e,t){var n=this.seen.size;return this.seen.add(e),n===this.seen.size?!1:(this.stack[this.size++]=t,!0)},r.prototype.pop=function(){if(this.size!==0)return this.stack[--this.size]},zi=r,zi}var Hs;function dy(){if(Hs)return rt;Hs=1;var r=xe(),e=aa().copyNode,t=St().copyEdge,n=ly();function o(b,S){if(!r(b))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(b.order){var _=new n(b),N=_.push.bind(_);_.forEachNodeYetUnseen(function(M){var k=[];_.push(M);for(var $;_.size!==0;)$=_.pop(),k.push($),b.forEachNeighbor($,N);S(k)})}}function a(b,S){if(!r(b))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(b.order){var _=new n(b),N=_.push.bind(_);_.forEachNodeYetUnseen(function(M){var k=0;_.push(M);for(var $;_.size!==0;)$=_.pop(),k++,b.forEachNeighbor($,N);S(k)})}}function u(b,S,_){if(!r(b))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!b.order)return;var N=new n(b),M;function k($,E,C,O,w,I,z){M===O&&(O=C),S($,E,C,O,w,I,z)&&N.push(O)}N.forEachNodeYetUnseen(function($){var E=0;for(N.push($);N.size!==0;)M=N.pop(),E++,b.forEachEdge(M,k);_(E)})}function l(b){var S=0;return a(b,function(){S++}),S}function f(b){var S=[];return o(b,function(_){S.push(_)}),S}function h(b){if(!r(b))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!b.order)return[];var S=new n(b),_=S.push.bind(S),N=[],M;return S.forEachNodeYetUnseen(function(k){M=[],S.push(k);for(var $;S.size!==0;)$=S.pop(),M.push($),b.forEachNeighbor($,_);return M.length>N.length&&(N=M),N.length>S.countUnseenNodes()}),N}function p(b){var S=h(b),_=b.nullCopy();return S.forEach(function(N){e(_,N,b.getNodeAttributes(N))}),b.forEachEdge(function(N,M,k,$,E,C,O){_.hasNode(k)&&t(_,O,N,k,$,M)}),_}function v(b){var S=new Set(h(b));b.forEachNode(function(_){S.has(_)||b.dropNode(_)})}function m(b){if(!r(b))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!b.order)return[];if(b.type==="undirected")throw new Error("graphology-components: the given graph is undirected");var S=b.nodes(),_=[],N,M;if(!b.size){for(N=0,M=S.length;N<M;N++)_.push([S[N]]);return _}var k=1,$=[],E=[],C=new Map,O=new Set,w,I,z,T=function(R){var j,V=b.outboundNeighbors(R),te;C.set(R,k++),$.push(R),E.push(R);for(var Q=0,H=V.length;Q<H;Q++)if(j=V[Q],C.has(j)){if(te=C.get(j),!O.has(j))for(;C.get($[$.length-1])>te;)$.pop()}else T(j);if(C.get($[$.length-1])===C.get(R)){w=[];do I=E.pop(),w.push(I),O.add(I);while(I!==R);_.push(w),$.pop()}};for(N=0,M=S.length;N<M;N++)z=S[N],O.has(z)||T(z);return _}return rt.forEachConnectedComponent=o,rt.forEachConnectedComponentOrder=a,rt.forEachConnectedComponentOrderWithEdgeFilter=u,rt.countConnectedComponents=l,rt.connectedComponents=f,rt.largestConnectedComponent=h,rt.largestConnectedComponentSubgraph=p,rt.cropToLargestConnectedComponent=v,rt.stronglyConnectedComponents=m,rt}var Ti=dy(),lt={},Ut={},Li,Ks;function ua(){if(Ks)return Li;Ks=1;var r=jc(),e=r.ARRAY_BUFFER_SUPPORT,t=r.SYMBOL_SUPPORT;return Li=function(o,a){var u,l,f,h,p;if(!o)throw new Error("obliterator/forEach: invalid iterable.");if(typeof a!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(o)||e&&ArrayBuffer.isView(o)||typeof o=="string"||o.toString()==="[object Arguments]"){for(f=0,h=o.length;f<h;f++)a(o[f],f);return}if(typeof o.forEach=="function"){o.forEach(a);return}if(t&&Symbol.iterator in o&&typeof o.next!="function"&&(o=o[Symbol.iterator]()),typeof o.next=="function"){for(u=o,f=0;p=u.next(),p.done!==!0;)a(p.value,f),f++;return}for(l in o)o.hasOwnProperty(l)&&a(o[l],l)},Li}var Pi,Ys;function hy(){if(Ys)return Pi;Ys=1;var r=Xt(),e=ua();function t(){this.clear()}return t.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},t.prototype.enqueue=function(n){return this.items.push(n),++this.size},t.prototype.dequeue=function(){if(this.size){var n=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,n}},t.prototype.peek=function(){if(this.size)return this.items[this.offset]},t.prototype.forEach=function(n,o){o=arguments.length>1?o:this;for(var a=this.offset,u=0,l=this.items.length;a<l;a++,u++)n.call(o,this.items[a],u,this)},t.prototype.toArray=function(){return this.items.slice(this.offset)},t.prototype.values=function(){var n=this.items,o=this.offset;return new r(function(){if(o>=n.length)return{done:!0};var a=n[o];return o++,{value:a,done:!1}})},t.prototype.entries=function(){var n=this.items,o=this.offset,a=0;return new r(function(){if(o>=n.length)return{done:!0};var u=n[o];return o++,{value:[a++,u],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.toString=function(){return this.toArray().join(",")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.inspect=function(){var n=this.toArray();return Object.defineProperty(n,"constructor",{value:t,enumerable:!1}),n},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(n){var o=new t;return e(n,function(a){o.enqueue(a)}),o},t.of=function(){return t.from(arguments)},Pi=t,Pi}var Gi,Xs;function fy(){return Xs||(Xs=1,Gi=function(e,t){var n=t.length;if(n!==0){var o=e.length;e.length+=n;for(var a=0;a<n;a++)e[o+a]=t[a]}}),Gi}var Vs;function ca(){if(Vs)return Ut;Vs=1;var r=xe(),e=hy(),t=fy();function n(h,p,v){if(!r(h))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!h.hasNode(p))throw new Error('graphology-shortest-path: the "'+p+'" source node does not exist in the given graph.');if(!h.hasNode(v))throw new Error('graphology-shortest-path: the "'+v+'" target node does not exist in the given graph.');if(p=""+p,v=""+v,p===v)return[p];var m=h.inboundNeighbors.bind(h),b=h.outboundNeighbors.bind(h),S={},_={};S[p]=null,_[v]=null;var N=[p],M=[v],k,$,E,C,O,w,I,z,T=!1;e:for(;N.length&&M.length;)if(N.length<=M.length){for(k=N,N=[],O=0,I=k.length;O<I;O++)for($=k[O],E=b($),w=0,z=E.length;w<z;w++)if(C=E[w],C in S||(N.push(C),S[C]=$),C in _){T=!0;break e}}else for(k=M,M=[],O=0,I=k.length;O<I;O++)for($=k[O],E=m($),w=0,z=E.length;w<z;w++)if(C=E[w],C in _||(M.push(C),_[C]=$),C in S){T=!0;break e}if(!T)return null;for(var R=[];C;)R.unshift(C),C=S[C];for(C=_[R[R.length-1]];C;)R.push(C),C=_[C];return R.length?R:null}function o(h,p){if(!r(h))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!h.hasNode(p))throw new Error('graphology-shortest-path: the "'+p+'" source node does not exist in the given graph.');p=""+p;var v={},m={},b,S,_,N,M,k;for(v[p]=!0,m[p]=[p];Object.keys(v).length;){b=v,v={};for(_ in b)for(S=h.outboundNeighbors(_),M=0,k=S.length;M<k;M++)N=S[M],m[N]||(m[N]=m[_].concat(N),v[N]=!0)}return m}function a(h,p,v){if(!r(p))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!p.hasNode(v))throw new Error('graphology-shortest-path: the "'+v+'" source node does not exist in the given graph.');v=""+v;var m=new Set,b={},S=0;b[v]=0;for(var _=[v],N,M,k;_.length!==0;){var $=[];for(N=0,M=_.length;N<M;N++)k=_[N],!m.has(k)&&(m.add(k),t($,p[h](k)),b[k]=S);S++,_=$}return b}var u=a.bind(null,"outboundNeighbors"),l=a.bind(null,"neighbors");function f(h,p){p=""+p;var v=[],m={},b={},S=h.nodes(),_,N,M,k,$,E,C,O,w;for(E=0,O=S.length;E<O;E++)k=S[E],m[k]=[],b[k]=0;var I={};b[p]=1,I[p]=0;for(var z=e.of(p);z.size;)for(k=z.dequeue(),v.push(k),_=I[k],N=b[k],M=h.outboundNeighbors(k),C=0,w=M.length;C<w;C++)$=M[C],$ in I||(z.enqueue($),I[$]=_+1),I[$]===_+1&&(b[$]+=N,m[$].push(k));return[v,m,b]}return Ut.bidirectional=n,Ut.singleSource=o,Ut.singleSourceLength=u,Ut.undirectedSingleSourceLength=l,Ut.brandes=f,Ut}var Oi={},Qs;function py(){if(Qs)return Oi;Qs=1;var r=function(){return!0};return Oi.edgePathFromNodePath=function(e,t){var n=t.length,o,a,u,l;if(n<2)return a=t[0],l=e.multi?e.findEdge(a,a,r):e.edge(a,a),l?[l]:[];n--;var f=new Array(n);for(o=0;o<n;o++){if(a=t[o],u=t[o+1],l=e.multi?e.findOutboundEdge(a,u,r):e.edge(a,u),l===void 0)throw new Error("graphology-shortest-path: given path is impossible in given graph.");f[o]=l}return f},Oi}var Cr={},Dr={},Zs;function Wr(){if(Zs)return Dr;Zs=1;function r(n){return typeof n!="number"||isNaN(n)?1:n}function e(n,o){var a={},u=function(h){return typeof h>"u"?o:h};typeof o=="function"&&(u=o);var l=function(h){return u(h[n])},f=function(){return u(void 0)};return typeof n=="string"?(a.fromAttributes=l,a.fromGraph=function(h,p){return l(h.getNodeAttributes(p))},a.fromEntry=function(h,p){return l(p)}):typeof n=="function"?(a.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},a.fromGraph=function(h,p){return u(n(p,h.getNodeAttributes(p)))},a.fromEntry=function(h,p){return u(n(h,p))}):(a.fromAttributes=f,a.fromGraph=f,a.fromEntry=f),a}function t(n,o){var a={},u=function(h){return typeof h>"u"?o:h};typeof o=="function"&&(u=o);var l=function(h){return u(h[n])},f=function(){return u(void 0)};return typeof n=="string"?(a.fromAttributes=l,a.fromGraph=function(h,p){return l(h.getEdgeAttributes(p))},a.fromEntry=function(h,p){return l(p)},a.fromPartialEntry=a.fromEntry,a.fromMinimalEntry=a.fromEntry):typeof n=="function"?(a.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},a.fromGraph=function(h,p){var v=h.extremities(p);return u(n(p,h.getEdgeAttributes(p),v[0],v[1],h.getNodeAttributes(v[0]),h.getNodeAttributes(v[1]),h.isUndirected(p)))},a.fromEntry=function(h,p,v,m,b,S,_){return u(n(h,p,v,m,b,S,_))},a.fromPartialEntry=function(h,p,v,m){return u(n(h,p,v,m))},a.fromMinimalEntry=function(h,p){return u(n(h,p))}):(a.fromAttributes=f,a.fromGraph=f,a.fromEntry=f,a.fromMinimalEntry=f),a}return Dr.createNodeValueGetter=e,Dr.createEdgeValueGetter=t,Dr.createEdgeWeightGetter=function(n){return t(n,r)},Dr}var or={},Js;function la(){if(Js)return or;Js=1;var r=function(o,a){return o<a?-1:o>a?1:0},e=function(o,a){return o<a?1:o>a?-1:0};function t(o){return function(a,u){return o(u,a)}}function n(o){return o===2?function(a,u){return a[0]<u[0]?-1:a[0]>u[0]?1:a[1]<u[1]?-1:a[1]>u[1]?1:0}:function(a,u){for(var l=0;l<o;){if(a[l]<u[l])return-1;if(a[l]>u[l])return 1;l++}return 0}}return or.DEFAULT_COMPARATOR=r,or.DEFAULT_REVERSE_COMPARATOR=e,or.reverseComparator=t,or.createTupleComparator=n,or}var ar={},Ri={},eu;function Hr(){return eu||(eu=1,function(r){var e=Math.pow(2,8)-1,t=Math.pow(2,16)-1,n=Math.pow(2,32)-1,o=Math.pow(2,7)-1,a=Math.pow(2,15)-1,u=Math.pow(2,31)-1;r.getPointerArray=function(f){var h=f-1;if(h<=e)return Uint8Array;if(h<=t)return Uint16Array;if(h<=n)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},r.getSignedPointerArray=function(f){var h=f-1;return h<=o?Int8Array:h<=a?Int16Array:h<=u?Int32Array:Float64Array},r.getNumberType=function(f){return f===(f|0)?Math.sign(f)===-1?f<=127&&f>=-128?Int8Array:f<=32767&&f>=-32768?Int16Array:Int32Array:f<=255?Uint8Array:f<=65535?Uint16Array:Uint32Array:Float64Array};var l={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};r.getMinimalRepresentation=function(f,h){var p=null,v=0,m,b,S,_,N;for(_=0,N=f.length;_<N;_++)S=h?h(f[_]):f[_],b=r.getNumberType(S),m=l[b.name],m>v&&(v=m,p=b);return p},r.isTypedArray=function(f){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(f)},r.concat=function(){var f=0,h,p,v;for(h=0,v=arguments.length;h<v;h++)f+=arguments[h].length;var m=new arguments[0].constructor(f);for(h=0,p=0;h<v;h++)m.set(arguments[h],p),p+=arguments[h].length;return m},r.indices=function(f){for(var h=r.getPointerArray(f),p=new h(f),v=0;v<f;v++)p[v]=v;return p}}(Ri)),Ri}var tu;function qn(){if(tu)return ar;tu=1;var r=ua(),e=Hr();function t(u){return Array.isArray(u)||e.isTypedArray(u)}function n(u){if(typeof u.length=="number")return u.length;if(typeof u.size=="number")return u.size}function o(u){var l=n(u),f=typeof l=="number"?new Array(l):[],h=0;return r(u,function(p){f[h++]=p}),f}function a(u){var l=n(u),f=typeof l=="number"?e.getPointerArray(l):Array,h=typeof l=="number"?new Array(l):[],p=typeof l=="number"?new f(l):[],v=0;return r(u,function(m){h[v]=m,p[v]=v++}),[h,p]}return ar.isArrayLike=t,ar.guessLength=n,ar.toArray=o,ar.toArrayWithIndices=a,ar}var qi,ru;function da(){if(ru)return qi;ru=1;var r=ua(),e=la(),t=qn(),n=e.DEFAULT_COMPARATOR,o=e.reverseComparator;function a(M,k,$,E){for(var C=k[E],O,w;E>$;){if(O=E-1>>1,w=k[O],M(C,w)<0){k[E]=w,E=O;continue}break}k[E]=C}function u(M,k,$){for(var E=k.length,C=$,O=k[$],w=2*$+1,I;w<E;)I=w+1,I<E&&M(k[w],k[I])>=0&&(w=I),k[$]=k[w],$=w,w=2*$+1;k[$]=O,a(M,k,C,$)}function l(M,k,$){k.push($),a(M,k,0,k.length-1)}function f(M,k){var $=k.pop();if(k.length!==0){var E=k[0];return k[0]=$,u(M,k,0),E}return $}function h(M,k,$){if(k.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var E=k[0];return k[0]=$,u(M,k,0),E}function p(M,k,$){var E;return k.length!==0&&M(k[0],$)<0&&(E=k[0],k[0]=$,$=E,u(M,k,0)),$}function v(M,k){for(var $=k.length,E=$>>1,C=E;--C>=0;)u(M,k,C)}function m(M,k){for(var $=k.length,E=0,C=new Array($);E<$;)C[E++]=f(M,k);return C}function b(M,k,$){arguments.length===2&&($=k,k=M,M=n);var E=o(M),C,O,w,I=1/0,z;if(k===1){if(t.isArrayLike($)){for(C=0,O=$.length;C<O;C++)w=$[C],(I===1/0||M(w,I)<0)&&(I=w);return z=new $.constructor(1),z[0]=I,z}return r($,function(R){(I===1/0||M(R,I)<0)&&(I=R)}),[I]}if(t.isArrayLike($)){if(k>=$.length)return $.slice().sort(M);for(z=$.slice(0,k),v(E,z),C=k,O=$.length;C<O;C++)E($[C],z[0])>0&&h(E,z,$[C]);return z.sort(M)}var T=t.guessLength($);return T!==null&&T<k&&(k=T),z=new Array(k),C=0,r($,function(R){C<k?z[C]=R:(C===k&&v(E,z),E(R,z[0])>0&&h(E,z,R)),C++}),z.length>C&&(z.length=C),z.sort(M)}function S(M,k,$){arguments.length===2&&($=k,k=M,M=n);var E=o(M),C,O,w,I=-1/0,z;if(k===1){if(t.isArrayLike($)){for(C=0,O=$.length;C<O;C++)w=$[C],(I===-1/0||M(w,I)>0)&&(I=w);return z=new $.constructor(1),z[0]=I,z}return r($,function(R){(I===-1/0||M(R,I)>0)&&(I=R)}),[I]}if(t.isArrayLike($)){if(k>=$.length)return $.slice().sort(E);for(z=$.slice(0,k),v(M,z),C=k,O=$.length;C<O;C++)M($[C],z[0])>0&&h(M,z,$[C]);return z.sort(E)}var T=t.guessLength($);return T!==null&&T<k&&(k=T),z=new Array(k),C=0,r($,function(R){C<k?z[C]=R:(C===k&&v(M,z),M(R,z[0])>0&&h(M,z,R)),C++}),z.length>C&&(z.length=C),z.sort(E)}function _(M){if(this.clear(),this.comparator=M||n,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}_.prototype.clear=function(){this.items=[],this.size=0},_.prototype.push=function(M){return l(this.comparator,this.items,M),++this.size},_.prototype.peek=function(){return this.items[0]},_.prototype.pop=function(){return this.size!==0&&this.size--,f(this.comparator,this.items)},_.prototype.replace=function(M){return h(this.comparator,this.items,M)},_.prototype.pushpop=function(M){return p(this.comparator,this.items,M)},_.prototype.consume=function(){return this.size=0,m(this.comparator,this.items)},_.prototype.toArray=function(){return m(this.comparator,this.items.slice())},_.prototype.inspect=function(){var M=this.toArray();return Object.defineProperty(M,"constructor",{value:_,enumerable:!1}),M},typeof Symbol<"u"&&(_.prototype[Symbol.for("nodejs.util.inspect.custom")]=_.prototype.inspect);function N(M){if(this.clear(),this.comparator=M||n,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=o(this.comparator)}return N.prototype=_.prototype,_.from=function(M,k){var $=new _(k),E;return t.isArrayLike(M)?E=M.slice():E=t.toArray(M),v($.comparator,E),$.items=E,$.size=E.length,$},N.from=function(M,k){var $=new N(k),E;return t.isArrayLike(M)?E=M.slice():E=t.toArray(M),v($.comparator,E),$.items=E,$.size=E.length,$},_.siftUp=u,_.siftDown=a,_.push=l,_.pop=f,_.replace=h,_.pushpop=p,_.heapify=v,_.consume=m,_.nsmallest=b,_.nlargest=S,_.MinHeap=_,_.MaxHeap=N,qi=_,qi}var nu;function gy(){if(nu)return Cr;nu=1;var r=xe(),e=Wr().createEdgeWeightGetter,t=da(),n="weight";function o(v,m){return v[0]>m[0]?1:v[0]<m[0]?-1:v[1]>m[1]?1:v[1]<m[1]?-1:v[2]>m[2]?1:v[2]<m[2]?-1:0}function a(v,m){return v[0]>m[0]?1:v[0]<m[0]?-1:v[1]>m[1]?1:v[1]<m[1]?-1:v[2]>m[2]?1:v[2]<m[2]?-1:v[3]>m[3]?1:v[3]<m[3]?-1:0}function u(v,m,b,S){if(m=""+m,b=""+b,!r(v))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(m&&!v.hasNode(m))throw new Error('graphology-shortest-path/dijkstra: the "'+m+'" source node does not exist in the given graph.');if(b&&!v.hasNode(b))throw new Error('graphology-shortest-path/dijkstra: the "'+b+'" target node does not exist in the given graph.');if(S=e(S||n).fromMinimalEntry,m===b)return[0,[m]];var _=[{},{}],N=[{},{}],M=[new t(o),new t(o)],k=[{},{}];N[0][m]=[m],N[1][b]=[b],k[0][m]=0,k[1][b]=0;var $=[],E=1/0,C=0,O=1,w,I,z,T,R,j,V,te,Q;for(M[0].push([0,C++,m]),M[1].push([0,C++,b]);M[0].size&&M[1].size;)if(O=1-O,w=M[O].pop(),T=w[0],R=w[2],!(R in _[O])){if(_[O][R]=T,R in _[1-O])return[E,$];for(I=O===1?v.inboundEdges(R):v.outboundEdges(R),te=0,Q=I.length;te<Q;te++){if(V=I[te],j=v.opposite(R,V),z=_[O][R]+S(V,v.getEdgeAttributes(V)),j in _[O]&&z<_[O][j])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(j in k[O])||z<k[O][j])&&(k[O][j]=z,M[O].push([z,C++,j]),N[O][j]=N[O][R].concat(j),j in k[0]&&j in k[1]&&(T=k[0][j]+k[1][j],($.length===0||E>T)&&(E=T,$=N[0][j].concat(N[1][j].slice(0,-1).reverse()))))}}return[1/0,null]}function l(v,m,b,S,_,N){if(!r(v))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");b=e(b||n).fromMinimalEntry;var M={},k={},$=new t(o),E=0,C,O,w,I,z,T,R,j,V,te,Q;for(j=0,te=m.length;j<te;j++)I=m[j],k[I]=0,$.push([0,E++,I]),N[I]=[I];for(;$.size;)if(O=$.pop(),R=O[0],I=O[2],!(I in M)){if(M[I]=R,I===_)break;for(C=v.outboundEdges(I),V=0,Q=C.length;V<Q;V++){if(T=C[V],z=v.opposite(I,T),w=b(T,v.getEdgeAttributes(T))+M[I],z in M&&w<M[z])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(z in k)||w<k[z])&&(k[z]=w,$.push([w,E++,z]),N[z]=N[I].concat(z))}}return M}function f(v,m,b){var S={};return l(v,[m],b,0,null,S),S}function h(v,m,b,S){return u(v,m,b,S)[1]}function p(v,m,b){m=""+m,b=e(b||n).fromMinimalEntry;var S=[],_={},N={},M=v.nodes(),k,$,E,C,O,w,I,z,T,R;for(T=0,R=M.length;T<R;T++)w=M[T],_[w]=[],N[w]=0;var j={};N[m]=1;var V={};V[m]=0;var te=0,Q=new t(a);for(Q.push([0,te++,m,m]);Q.size;)if($=Q.pop(),C=$[0],E=$[2],w=$[3],!(w in j))for(N[w]+=N[E],S.push(w),j[w]=C,k=v.outboundEdges(w),T=0,R=k.length;T<R;T++)z=k[T],I=v.opposite(w,z),O=C+b(z,v.getEdgeAttributes(z)),!(I in j)&&(!(I in V)||O<V[I])?(V[I]=O,Q.push([O,te++,w,I]),N[I]=0,_[I]=[w]):O===V[I]&&(N[I]+=N[w],_[I].push(w));return[S,_,N]}return Cr.bidirectional=h,Cr.singleSource=f,Cr.brandes=p,Cr}var iu;function vy(){if(iu)return lt;iu=1;var r=ca(),e=py();return lt.unweighted=r,lt.dijkstra=gy(),lt.bidirectional=r.bidirectional,lt.singleSource=r.singleSource,lt.singleSourceLength=r.singleSourceLength,lt.undirectedSingleSourceLength=r.undirectedSingleSourceLength,lt.brandes=r.brandes,lt.edgePathFromNodePath=e.edgePathFromNodePath,lt}var yy=vy(),Te={},dt={},Bi,ou;function sl(){if(ou)return Bi;ou=1;var r=xe();return Bi=function(t){if(!r(t))throw new Error("graphology-metrics/simple-size: the given graph is not a valid graphology instance.");if(!t.multi)return t.size;var n=0,o=0;function a(){n++}function u(){o++}return t.forEachNode(function(l){t.type!=="directed"&&t.forEachUndirectedNeighbor(l,a),t.type!=="undirected"&&t.forEachOutNeighbor(l,u)}),n/2+o},Bi}var au;function ul(){if(au)return dt;au=1;var r=xe(),e=sl();function t(u,l){return 2*l/(u*(u-1))}function n(u,l){return l/(u*(u-1))}function o(u,l){var f=u*(u-1);return l/(f+f/2)}function a(u,l,f){var h,p;if(arguments.length>3){if(h=f,p=arguments[3],typeof h!="number"||h<0)throw new Error("graphology-metrics/density: given order is not a valid number.");if(typeof p!="number"||p<0)throw new Error("graphology-metrics/density: given size is not a valid number.")}else{if(!r(f))throw new Error("graphology-metrics/density: given graph is not a valid graphology instance.");h=f.order,p=f.size,f.multi&&l===!1&&(p=e(f))}if(h<2)return 0;u===null&&(u=f.type),l===null&&(l=f.multi);var v;return u==="undirected"?v=t:u==="directed"?v=n:v=o,v(h,p)}return dt.abstractDensity=a,dt.density=a.bind(null,null,null),dt.directedDensity=a.bind(null,"directed",!1),dt.undirectedDensity=a.bind(null,"undirected",!1),dt.mixedDensity=a.bind(null,"mixed",!1),dt.multiDirectedDensity=a.bind(null,"directed",!0),dt.multiUndirectedDensity=a.bind(null,"undirected",!0),dt.multiMixedDensity=a.bind(null,"mixed",!0),dt}var mn={},su;function my(){if(su)return mn;su=1;var r=xe();function e(n,o){if(!r(n))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var a=[].concat(o),u,l,f,h={};for(f=0;f<a.length;f++)l=a[f],h[l]=[1/0,-1/0];return n.forEachNode(function(p,v){for(f=0;f<a.length;f++)l=a[f],u=v[l],u<h[l][0]&&(h[l][0]=u),u>h[l][1]&&(h[l][1]=u)}),typeof o=="string"?h[o]:h}function t(n,o){if(!r(n))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var a=[].concat(o),u,l,f,h={};for(f=0;f<a.length;f++)l=a[f],h[l]=[1/0,-1/0];return n.forEachEdge(function(p,v){for(f=0;f<a.length;f++)l=a[f],u=v[l],u<h[l][0]&&(h[l][0]=u),u>h[l][1]&&(h[l][1]=u)}),typeof o=="string"?h[o]:h}return mn.nodeExtent=e,mn.edgeExtent=t,mn}var Ui,uu;function cl(){if(uu)return Ui;uu=1;var r=xe(),e=ca().singleSourceLength;return Ui=function(n,o){if(!r(n))throw new Error("graphology-metrics/eccentricity: given graph is not a valid graphology instance.");if(n.size===0)return 1/0;var a=-1/0,u=e(n,o),l,f,h=0;for(l in u)f=u[l],f>a&&(a=f),h++;return h<n.order?1/0:a},Ui}var ji,cu;function by(){if(cu)return ji;cu=1;var r=xe(),e=cl();return ji=function(n){if(!r(n))throw new Error("graphology-metrics/diameter: given graph is not a valid graphology instance.");if(n.size===0)return 1/0;var o=-1/0;return n.someNode(function(a){var u=e(n,a);return u>o&&(o=u),o===1/0}),o},ji}var Fi,lu;function gt(){if(lu)return Fi;lu=1;function r(t){return!t||typeof t!="object"||typeof t=="function"||Array.isArray(t)||t instanceof Set||t instanceof Map||t instanceof RegExp||t instanceof Date}function e(t,n){t=t||{};var o={};for(var a in n){var u=t[a],l=n[a];if(!r(l)){o[a]=e(u,l);continue}u===void 0?o[a]=l:o[a]=u}return o}return Fi=e,Fi}var Wi,du;function ha(){if(du)return Wi;du=1;var r=xe();return Wi=function(t){if(!r(t))throw new Error("graphology-utils/infer-type: expecting a valid graphology instance.");var n=t.type;return n!=="mixed"?n:t.directedSize===0&&t.undirectedSize===0||t.directedSize>0&&t.undirectedSize>0?"mixed":t.directedSize>0?"directed":"undirected"},Wi}var Hi,hu;function wy(){if(hu)return Hi;hu=1;var r=gt(),e=xe(),t=ha(),n=Wr(),o={getNodeCommunity:"community",getEdgeWeight:"weight",resolution:1};function a(k,$){var E=new Array(k.order),C=new Float64Array(k.order),O={},w=0,I=n.createEdgeWeightGetter($.getEdgeWeight).fromEntry,z=n.createNodeValueGetter($.getNodeCommunity).fromEntry,T=0,R={};return k.forEachNode(function(j,V){R[j]=T,E[T++]=z(j,V)}),k.forEachUndirectedEdge(function(j,V,te,Q,H,G,B){var W=I(j,V,te,Q,H,G,B);w+=W,O[j]=W,C[R[te]]+=W,te!==Q&&(C[R[Q]]+=W)}),{weights:O,communities:E,weightedDegrees:C,M:w}}function u(k,$){var E=new Array(k.order),C=new Float64Array(k.order),O=new Float64Array(k.order),w={},I=0,z=n.createEdgeWeightGetter($.getEdgeWeight).fromEntry,T=n.createNodeValueGetter($.getNodeCommunity).fromEntry,R=0,j={};return k.forEachNode(function(V,te){j[V]=R,E[R++]=T(V,te)}),k.forEachDirectedEdge(function(V,te,Q,H,G,B,W){var Y=z(V,te,Q,H,G,B,W);I+=Y,w[V]=Y,O[j[Q]]+=Y,C[j[H]]+=Y}),{weights:w,communities:E,weightedInDegrees:C,weightedOutDegrees:O,M:I}}function l(k,$){var E=$.resolution,C=a(k,$),O=C.communities,w=C.weightedDegrees,I=C.M,z=k.nodes(),T,R,j,V,te,Q,H=0,G=I*2;for(T=0,j=k.order;T<j;T++)for(R=0;R<j;R++)O[T]===O[R]&&(Q=k.undirectedEdge(z[T],z[R]),V=C.weights[Q]||0,te=w[T]*w[R],T===R&&typeof Q<"u"?H+=(V-te/G*E)*2:H+=V-te/G*E);return H/G}function f(k,$){var E=$.resolution,C=u(k,$),O=C.communities,w=C.weightedInDegrees,I=C.weightedOutDegrees,z=C.M,T=k.nodes(),R,j,V,te,Q,H,G=0;for(R=0,V=k.order;R<V;R++)for(j=0;j<V;j++)O[R]===O[j]&&(H=k.directedEdge(T[R],T[j]),te=C.weights[H]||0,Q=w[R]*I[j],G+=te-Q/z*E);return G/z}function h(k,$){var E={},C={},O={},w=n.createNodeValueGetter($.getNodeCommunity).fromEntry;return k.forEachNode(function(I,z){var T=w(I,z);if(E[I]=T,typeof T>"u")throw new Error('graphology-metrics/modularity: the "'+I+'" node is not in the partition.');C[T]=0,O[T]=0}),{communities:E,totalWeights:C,internalWeights:O}}function p(k,$){var E={},C={},O={},w={},I=n.createNodeValueGetter($.getNodeCommunity).fromEntry;return k.forEachNode(function(z,T){var R=I(z,T);if(E[z]=R,typeof R>"u")throw new Error('graphology-metrics/modularity: the "'+z+'" node is not in the partition.');C[R]=0,O[R]=0,w[R]=0}),{communities:E,totalInWeights:C,totalOutWeights:O,internalWeights:w}}function v(k,$){var E=$.resolution,C=h(k,$),O=0,w=C.totalWeights,I=C.internalWeights,z=C.communities,T=n.createEdgeWeightGetter($.getEdgeWeight).fromEntry;k.forEachUndirectedEdge(function(te,Q,H,G,B,W,Y){var F=T(te,Q,H,G,B,W,Y);O+=F;var X=z[H],J=z[G];w[X]+=F,w[J]+=F,X===J&&(I[X]+=F*2)});var R=0,j=O*2;for(var V in I)R+=I[V]/j-Math.pow(w[V]/j,2)*E;return R}function m(k,$){var E=$.resolution,C=p(k,$),O=0,w=C.totalInWeights,I=C.totalOutWeights,z=C.internalWeights,T=C.communities,R=n.createEdgeWeightGetter($.getEdgeWeight).fromEntry;k.forEachDirectedEdge(function(te,Q,H,G,B,W,Y){var F=R(te,Q,H,G,B,W,Y);O+=F;var X=T[H],J=T[G];I[X]+=F,w[J]+=F,X===J&&(z[X]+=F)});var j=0;for(var V in z)j+=z[V]/O-w[V]*I[V]/Math.pow(O,2)*E;return j}function b(k,$,E,C){return C/(2*k)-$*E/(2*(k*k))}function S(k,$,E,C,O,w){return w/k-(O*$+C*E)/(k*k)}function _(k,$){if(!e(k))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(k.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(k.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var E=t(k);if(E==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return $=r($,o),E==="directed"?f(k,$):l(k,$)}function N(k,$){if(!e(k))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(k.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(k.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var E=t(k);if(E==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return $=r($,o),E==="directed"?m(k,$):v(k,$)}var M=N;return M.sparse=N,M.dense=_,M.undirectedDelta=b,M.directedDelta=S,Hi=M,Hi}var Ki,fu;function xy(){if(fu)return Ki;fu=1;var r=xe(),e=Wr().createEdgeWeightGetter,t="weight";return Ki=function(o,a){if(!r(o))throw new Error("graphology-metrics/weighted-size: the given graph is not a valid graphology instance.");a=e(a||t).fromEntry;var u=0;return o.forEachEdge(function(l,f,h,p,v,m,b){u+=a(l,f,h,p,v,m,b)}),u},Ki}var pu;function Ey(){if(pu)return Te;pu=1;var r=ul(),e=my();return Te.diameter=by(),Te.modularity=wy(),Te.simpleSize=sl(),Te.weightedSize=xy(),Te.abstractDensity=r.abstractDensity,Te.density=r.density,Te.directedDensity=r.directedDensity,Te.undirectedDensity=r.undirectedDensity,Te.mixedDensity=r.mixedDensity,Te.multiDirectedDensity=r.multiDirectedDensity,Te.multiUndirectedDensity=r.multiUndirectedDensity,Te.multiMixedDensity=r.multiMixedDensity,Te.nodeExtent=e.nodeExtent,Te.edgeExtent=e.edgeExtent,Te}var gu=Ey(),bn={},Yi,vu;function ll(){if(vu)return Yi;vu=1;var r=xe(),e=ha(),t=gt(),n=Wr().createEdgeWeightGetter,o={edgeDisparityAttribute:"disparity",getEdgeWeight:"weight"};function a(l,f,h){if(!r(f))throw new Error("graphology-metrics/edge/disparity: the given graph is not a valid graphology instance.");if(f.multi||e(f)==="mixed")throw new Error("graphology-metrics/edge/disparity: not defined for multi nor mixed graphs.");h=t(h,o);var p=n(h.getEdgeWeight).fromEntry,v={};f.forEachNode(function(N){v[N]=0}),f.forEachEdge(function(N,M,k,$,E,C,O){var w=p(N,M,k,$,E,C,O);v[k]+=w,v[$]+=w});var m,b,S,_={};if(f.forEachAssymetricAdjacencyEntry(function(N,M,k,$,E,C,O){var w=p(E,C,N,M,k,$,O);m!==N&&(m=N,b=f.degree(N),S=v[N]);var I=f.degree(M),z=v[M],T=w/S,R=w/z,j=Math.pow(1-T,b-1),V=Math.pow(1-R,I-1);_[E]=Math.min(j,V)}),l){f.updateEachEdgeAttributes(function(N,M){return M[h.edgeDisparityAttribute]=_[N],M},{attributes:[h.edgeDisparityAttribute]});return}return _}var u=a.bind(null,!1);return u.assign=a.bind(null,!0),Yi=u,Yi}var Xi={},yu;function dl(){return yu||(yu=1,function(r){r.intersection=function(){if(arguments.length<2)throw new Error("mnemonist/Set.intersection: needs at least two arguments.");var e=new Set,t=1/0,n=null,o,a,u=arguments.length;for(a=0;a<u;a++){if(o=arguments[a],o.size===0)return e;o.size<t&&(t=o.size,n=o)}for(var l=n.values(),f,h,p,v;f=l.next(),!f.done;){for(h=f.value,p=!0,a=0;a<u;a++)if(v=arguments[a],v!==n&&!v.has(h)){p=!1;break}p&&e.add(h)}return e},r.union=function(){if(arguments.length<2)throw new Error("mnemonist/Set.union: needs at least two arguments.");var e=new Set,t,n=arguments.length,o,a;for(t=0;t<n;t++)for(o=arguments[t].values();a=o.next(),!a.done;)e.add(a.value);return e},r.difference=function(e,t){if(!e.size)return new Set;if(!t.size)return new Set(e);for(var n=new Set,o=e.values(),a;a=o.next(),!a.done;)t.has(a.value)||n.add(a.value);return n},r.symmetricDifference=function(e,t){for(var n=new Set,o=e.values(),a;a=o.next(),!a.done;)t.has(a.value)||n.add(a.value);for(o=t.values();a=o.next(),!a.done;)e.has(a.value)||n.add(a.value);return n},r.isSubset=function(e,t){var n=e.values(),o;if(e===t)return!0;if(e.size>t.size)return!1;for(;o=n.next(),!o.done;)if(!t.has(o.value))return!1;return!0},r.isSuperset=function(e,t){return r.isSubset(t,e)},r.add=function(e,t){for(var n=t.values(),o;o=n.next(),!o.done;)e.add(o.value)},r.subtract=function(e,t){for(var n=t.values(),o;o=n.next(),!o.done;)e.delete(o.value)},r.intersect=function(e,t){for(var n=e.values(),o;o=n.next(),!o.done;)t.has(o.value)||e.delete(o.value)},r.disjunct=function(e,t){for(var n=e.values(),o,a=[];o=n.next(),!o.done;)t.has(o.value)&&a.push(o.value);for(n=t.values();o=n.next(),!o.done;)e.has(o.value)||e.add(o.value);for(var u=0,l=a.length;u<l;u++)e.delete(a[u])},r.intersectionSize=function(e,t){var n;if(e.size>t.size&&(n=e,e=t,t=n),e.size===0)return 0;if(e===t)return e.size;for(var o=e.values(),a,u=0;a=o.next(),!a.done;)t.has(a.value)&&u++;return u},r.unionSize=function(e,t){var n=r.intersectionSize(e,t);return e.size+t.size-n},r.jaccard=function(e,t){var n=r.intersectionSize(e,t);if(n===0)return 0;var o=e.size+t.size-n;return n/o},r.overlap=function(e,t){var n=r.intersectionSize(e,t);return n===0?0:n/Math.min(e.size,t.size)}}(Xi)),Xi}var Vi,mu;function _y(){if(mu)return Vi;mu=1;var r=xe(),e=dl().intersectionSize;function t(o,a){if(!r(a))throw new Error("graphology-metrics/simmelian-strength: given graph is not a valid graphology instance.");var u={};if(a.forEachNode(function(f){u[f]=new Set(a.neighbors(f))}),!o){var l={};return a.forEachEdge(function(f,h,p,v){l[f]=e(u[p],u[v])}),l}a.updateEachEdgeAttributes(function(f,h,p,v){return h.simmelianStrength=e(u[p],u[v]),h},{attributes:["simmelianStrength"]})}var n=t.bind(null,!1);return n.assign=t.bind(null,!0),Vi=n,Vi}var bu;function Sy(){return bu||(bu=1,bn.disparity=ll(),bn.simmelianStrength=_y()),bn}var Ay=Sy(),Qi,wu;function hl(){if(wu)return Qi;wu=1;var r=qn(),e=Xt();function t(n,o){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof o!="number"||o<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=n,this.capacity=o,this.items=new n(this.capacity),this.clear()}return t.prototype.clear=function(){this.start=0,this.size=0},t.prototype.push=function(n){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var o=this.start+this.size;return o>=this.capacity&&(o-=this.capacity),this.items[o]=n,++this.size},t.prototype.unshift=function(n){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var o=this.start-1;return this.start===0&&(o=this.capacity-1),this.items[o]=n,this.start=o,++this.size},t.prototype.pop=function(){if(this.size!==0){this.size--;var n=this.start+this.size;return n>=this.capacity&&(n-=this.capacity),this.items[n]}},t.prototype.shift=function(){if(this.size!==0){var n=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[n]}},t.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]},t.prototype.peekLast=function(){if(this.size!==0){var n=this.start+this.size-1;return n>=this.capacity&&(n-=this.capacity),this.items[n]}},t.prototype.get=function(n){if(!(this.size===0||n>=this.capacity))return n=this.start+n,n>=this.capacity&&(n-=this.capacity),this.items[n]},t.prototype.forEach=function(n,o){o=arguments.length>1?o:this;for(var a=this.capacity,u=this.size,l=this.start,f=0;f<u;)n.call(o,this.items[l],f,this),l++,f++,l===a&&(l=0)},t.prototype.toArray=function(){var n=this.start+this.size;if(n<this.capacity)return this.items.slice(this.start,n);for(var o=new this.ArrayClass(this.size),a=this.capacity,u=this.size,l=this.start,f=0;f<u;)o[f]=this.items[l],l++,f++,l===a&&(l=0);return o},t.prototype.values=function(){var n=this.items,o=this.capacity,a=this.size,u=this.start,l=0;return new e(function(){if(l>=a)return{done:!0};var f=n[u];return u++,l++,u===o&&(u=0),{value:f,done:!1}})},t.prototype.entries=function(){var n=this.items,o=this.capacity,a=this.size,u=this.start,l=0;return new e(function(){if(l>=a)return{done:!0};var f=n[u];return u++,u===o&&(u=0),{value:[l++,f],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.inspect=function(){var n=this.toArray();return n.type=this.ArrayClass.name,n.capacity=this.capacity,Object.defineProperty(n,"constructor",{value:t,enumerable:!1}),n},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(n,o,a){if(arguments.length<3&&(a=r.guessLength(n),typeof a!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var u=new t(o,a);if(r.isArrayLike(n)){var l,f;for(l=0,f=n.length;l<f;l++)u.items[l]=n[l];return u.size=f,u}return r.forEach(n,function(h){u.push(h)}),u},Qi=t,Qi}var Zi,xu;function ky(){if(xu)return Zi;xu=1;var r=Xt(),e=Hr().getPointerArray;function t(n){var o=e(n);this.size=0,this.length=n,this.dense=new o(n),this.sparse=new o(n)}return t.prototype.clear=function(){this.size=0},t.prototype.has=function(n){var o=this.sparse[n];return o<this.size&&this.dense[o]===n},t.prototype.add=function(n){var o=this.sparse[n];return o<this.size&&this.dense[o]===n?this:(this.dense[this.size]=n,this.sparse[n]=this.size,this.size++,this)},t.prototype.delete=function(n){var o=this.sparse[n];return o>=this.size||this.dense[o]!==n?!1:(o=this.dense[this.size-1],this.dense[this.sparse[n]]=o,this.sparse[o]=this.sparse[n],this.size--,!0)},t.prototype.forEach=function(n,o){o=arguments.length>1?o:this;for(var a,u=0;u<this.size;u++)a=this.dense[u],n.call(o,a,a)},t.prototype.values=function(){var n=this.size,o=this.dense,a=0;return new r(function(){if(a<n){var u=o[a];return a++,{value:u}}return{done:!0}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.inspect=function(){for(var n=new Set,o=0;o<this.size;o++)n.add(this.dense[o]);return Object.defineProperty(n,"constructor",{value:t,enumerable:!1}),n.length=this.length,n},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),Zi=t,Zi}var wn={},Eu;function Bn(){if(Eu)return wn;Eu=1;var r=Hr(),e=Wr().createEdgeWeightGetter;function t(a,u){return a==="outbound"||a==="inbound"?u.directedSize+u.undirectedSize*2:a==="in"||a==="out"||a==="directed"?u.directedSize:u.undirectedSize*2}function n(a,u){u=u||"outbound";var l=a[u+"Neighbors"].bind(a),f=t(u,a),h=r.getPointerArray(f),p=r.getPointerArray(a.order);this.graph=a,this.neighborhood=new p(f),this.starts=new h(a.order+1),this.nodes=a.nodes();var v={},m,b,S,_,N,M,k=0;for(m=0,b=a.order;m<b;m++)v[this.nodes[m]]=m;for(m=0,b=a.order;m<b;m++)for(N=this.nodes[m],M=l(N),this.starts[m]=k,S=0,_=M.length;S<_;S++)this.neighborhood[k++]=v[M[S]];this.starts[m]=f}n.prototype.bounds=function(a){return[this.starts[a],this.starts[a+1]]},n.prototype.project=function(){var a=this,u={};return a.nodes.forEach(function(l,f){u[l]=Array.from(a.neighborhood.slice(a.starts[f],a.starts[f+1])).map(function(h){return a.nodes[h]})}),u},n.prototype.collect=function(a){var u,l,f={};for(u=0,l=a.length;u<l;u++)f[this.nodes[u]]=a[u];return f},n.prototype.assign=function(a,u){var l=0;this.graph.updateEachNodeAttributes(function(f,h){return h[a]=u[l++],h},{attributes:[a]})},wn.NeighborhoodIndex=n;function o(a,u,l){l=l||"outbound";var f=a[l+"Edges"].bind(a),h=t(l,a),p=r.getPointerArray(h),v=r.getPointerArray(a.order),m=e(u).fromMinimalEntry;this.graph=a,this.neighborhood=new v(h),this.weights=new Float64Array(h),this.outDegrees=new Float64Array(a.order),this.starts=new p(a.order+1),this.nodes=a.nodes();var b={},S,_,N,M,k,$,E,C,O,w=0;for(S=0,_=a.order;S<_;S++)b[this.nodes[S]]=S;for(S=0,_=a.order;S<_;S++)for(k=this.nodes[S],E=f(k),this.starts[S]=w,N=0,M=E.length;N<M;N++)C=E[N],$=a.opposite(k,C),O=m(C,a.getEdgeAttributes(C)),this.neighborhood[w]=b[$],this.weights[w++]=O,this.outDegrees[S]+=O;this.starts[S]=h}return o.prototype.bounds=n.prototype.bounds,o.prototype.project=n.prototype.project,o.prototype.collect=n.prototype.collect,o.prototype.assign=n.prototype.assign,wn.WeightedNeighborhoodIndex=o,wn}var Ji,_u;function Ny(){if(_u)return Ji;_u=1;var r=xe(),e=gt(),t=hl(),n=ky(),o=Bn().NeighborhoodIndex,a={nodeCentralityAttribute:"closenessCentrality",wassermanFaust:!1};function u(h){this.index=new o(h,"inbound"),this.queue=new t(Array,h.order),this.seen=new n(h.order)}u.prototype.fromNode=function(h){var p=this.index,v=this.queue,m=this.seen;m.clear(),v.clear(),m.add(h),v.push([h,0]);for(var b,S,_,N,M,k,$=0,E=0;v.size!==0;)for(b=v.shift(),S=b[0],_=b[1],_!==0&&($+=_,E+=1),M=p.starts[S+1],N=p.starts[S];N<M;N++)k=p.neighborhood[N],!m.has(k)&&(m.add(k),v.push([k,_+1]));return[E,$]};function l(h,p,v){if(!r(p))throw new Error("graphology-metrics/centrality/closeness: the given graph is not a valid graphology instance.");v=e(v,a);var m=v.wassermanFaust,b=new u(p),S=p.order,_,N,M,k,$,E=new Float64Array(S);for(_=0;_<S;_++)N=b.fromNode(_),M=N[0],k=N[1],$=0,k>0&&S>1&&($=M/k,m&&($*=M/(S-1))),E[_]=$;return h?b.index.assign(v.nodeCentralityAttribute,E):b.index.collect(E)}var f=l.bind(null,!1);return f.assign=l.bind(null,!0),Ji=f,Ji}var My=Ny();const Cy=We(My);var Ir={},Su;function Dy(){if(Su)return Ir;Su=1;var r=xe();function e(a,u,l,f){var h=u+"Centrality";if(!r(l))throw new Error("graphology-centrality/"+h+": the given graph is not a valid graphology instance.");if(u!=="degree"&&l.type==="undirected")throw new Error("graphology-centrality/"+h+": cannot compute "+u+" centrality on an undirected graph.");f=f||{};var p=f.nodeCentralityAttribute||h,v=l.order-1,m=l[u].bind(l);if(a){l.updateEachNodeAttributes(function(S,_){return _[p]=m(S)/v,_},{attributes:[p]});return}var b={};return l.forEachNode(function(S){b[S]=m(S)/v}),b}var t=e.bind(null,!1,"degree"),n=e.bind(null,!1,"inDegree"),o=e.bind(null,!1,"outDegree");return t.assign=e.bind(null,!0,"degree"),n.assign=e.bind(null,!0,"inDegree"),o.assign=e.bind(null,!0,"outDegree"),Ir.degreeCentrality=t,Ir.inDegreeCentrality=n,Ir.outDegreeCentrality=o,Ir}var Iy=Dy(),xn={},eo,Au;function $y(){if(Au)return eo;Au=1;var r=Xt(),e=qn();function t(n,o){if(arguments.length<2)throw new Error("mnemonist/fixed-stack: expecting an Array class and a capacity.");if(typeof o!="number"||o<=0)throw new Error("mnemonist/fixed-stack: `capacity` should be a positive number.");this.capacity=o,this.ArrayClass=n,this.items=new this.ArrayClass(this.capacity),this.clear()}return t.prototype.clear=function(){this.size=0},t.prototype.push=function(n){if(this.size===this.capacity)throw new Error("mnemonist/fixed-stack.push: stack capacity ("+this.capacity+") exceeded!");return this.items[this.size++]=n,this.size},t.prototype.pop=function(){if(this.size!==0)return this.items[--this.size]},t.prototype.peek=function(){return this.items[this.size-1]},t.prototype.forEach=function(n,o){o=arguments.length>1?o:this;for(var a=0,u=this.items.length;a<u;a++)n.call(o,this.items[u-a-1],a,this)},t.prototype.toArray=function(){for(var n=new this.ArrayClass(this.size),o=this.size-1,a=this.size;a--;)n[a]=this.items[o-a];return n},t.prototype.values=function(){var n=this.items,o=this.size,a=0;return new r(function(){if(a>=o)return{done:!0};var u=n[o-a-1];return a++,{value:u,done:!1}})},t.prototype.entries=function(){var n=this.items,o=this.size,a=0;return new r(function(){if(a>=o)return{done:!0};var u=n[o-a-1];return{value:[a++,u],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.toString=function(){return this.toArray().join(",")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.inspect=function(){var n=this.toArray();return n.type=this.ArrayClass.name,n.capacity=this.capacity,Object.defineProperty(n,"constructor",{value:t,enumerable:!1}),n},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(n,o,a){if(arguments.length<3&&(a=e.guessLength(n),typeof a!="number"))throw new Error("mnemonist/fixed-stack.from: could not guess iterable length. Please provide desired capacity as last argument.");var u=new t(o,a);if(e.isArrayLike(n)){var l,f;for(l=0,f=n.length;l<f;l++)u.items[l]=n[l];return u.size=f,u}return e.forEach(n,function(h){u.push(h)}),u},eo=t,eo}var ku;function zy(){if(ku)return xn;ku=1;var r=hl(),e=$y(),t=da(),n=Hr(),o=Bn(),a=o.NeighborhoodIndex,u=o.WeightedNeighborhoodIndex;xn.createUnweightedIndexedBrandes=function(h){var p=new a(h),v=p.neighborhood,m=p.starts,b=h.order,S=new e(n.getPointerArray(b),b),_=new Uint32Array(b),N=new Array(b),M=new Int32Array(b),k=new r(Uint32Array,b),$=function(E){var C,O,w,I,z,T,R;for(T=0;T<b;T++)N[T]=[],_[T]=0,M[T]=-1;for(_[E]=1,M[E]=0,k.push(E);k.size!==0;)for(T=k.shift(),S.push(T),C=M[T],O=_[T],w=m[T],I=m[T+1],z=w;z<I;z++)R=v[z],M[R]===-1&&(k.push(R),M[R]=C+1),M[R]===C+1&&(_[R]+=O,N[R].push(T));return[S,N,_]};return $.index=p,$};function l(f,h){return f[0]>h[0]?1:f[0]<h[0]?-1:f[1]>h[1]?1:f[1]<h[1]?-1:f[2]>h[2]?1:f[2]<h[2]?-1:f[3]>h[3]?1:f[3]<h[3]?-1:0}return xn.createDijkstraIndexedBrandes=function(h,p){var v=new u(h,p||"weight"),m=v.neighborhood,b=v.weights,S=v.starts,_=h.order,N=new e(n.getPointerArray(_),_),M=new Uint32Array(_),k=new Array(_),$=new Float64Array(_),E=new Float64Array(_),C=new t(l),O=function(w){var I,z,T,R,j,V,te,Q,H,G=0;for(Q=0;Q<_;Q++)k[Q]=[],M[Q]=0,$[Q]=-1,E[Q]=-1;for(M[w]=1,E[w]=0,C.push([0,G++,w,w]);C.size!==0;)if(T=C.pop(),R=T[0],j=T[2],Q=T[3],$[Q]===-1)for(N.push(Q),$[Q]=R,M[Q]+=M[j],I=S[Q],z=S[Q+1],te=I;te<z;te++)H=m[te],V=R+b[te],$[H]===-1&&(E[H]===-1||V<E[H])?(E[H]=V,C.push([V,G++,Q,H]),M[H]=0,k[H]=[Q]):V===E[H]&&(M[H]+=M[Q],k[H].push(Q));return[N,k,M]};return O.index=v,O},xn}var to,Nu;function Ty(){if(Nu)return to;Nu=1;var r=xe(),e=zy(),t=gt(),n=e.createUnweightedIndexedBrandes,o=e.createDijkstraIndexedBrandes,a={nodeCentralityAttribute:"betweennessCentrality",getEdgeWeight:"weight",normalized:!0};function u(f,h,p){if(!r(h))throw new Error("graphology-centrality/beetweenness-centrality: the given graph is not a valid graphology instance.");p=t(p,a);var v=p.nodeCentralityAttribute,m=p.normalized,b=p.getEdgeWeight?o(h,p.getEdgeWeight):n(h),S=h.order,_,N,M,k,$,E,C,O,w,I,z=new Float64Array(S),T=new Float64Array(S);for(E=0;E<S;E++){for(_=b(E),N=_[0],M=_[1],k=_[2],C=N.size;C--;)z[N.items[N.size-C]]=0;for(;N.size!==0;){for(I=N.pop(),$=(1+z[I])/k[I],C=0,O=M[I].length;C<O;C++)w=M[I][C],z[w]+=k[w]*$;I!==E&&(T[I]+=z[I])}}var R=null;if(m?R=S<=2?null:1/((S-1)*(S-2)):R=h.type==="undirected"?.5:null,R!==null)for(E=0;E<S;E++)T[E]*=R;return f?b.index.assign(v,T):b.index.collect(T)}var l=u.bind(null,!1);return l.assign=u.bind(null,!0),to=l,to}var Ly=Ty();const Py=We(Ly);var ro,Mu;function Gy(){if(Mu)return ro;Mu=1;var r=xe(),e=gt(),t=Bn().WeightedNeighborhoodIndex,n={nodeCentralityAttribute:"eigenvectorCentrality",getEdgeWeight:"weight",maxIterations:100,tolerance:1e-6};function o(l){for(var f=0,h=0,p=0,v=l.length;p<v;p++){var m=Math.abs(l[p]);m>f&&(h*=f/m*(f/m),f=m),h+=m===0&&f===0?0:m/f*(m/f)}return f===1/0?1:f*Math.sqrt(h)}function a(l,f,h){if(!r(f))throw new Error("graphology-metrics/centrality/eigenvector: the given graph is not a valid graphology instance.");h=e(h,n);var p=h.maxIterations,v=h.tolerance,m=f.order,b=new t(f,h.getEdgeWeight),S,_,N,M,k=new Float64Array(f.order);for(S=0;S<m;S++)k[S]=1/m;for(var $=0,E=0,C,O,w,I=!1;$<p;){for(O=k,k=new Float64Array(O),S=0;S<m;S++)for(N=b.starts[S+1],_=b.starts[S];_<N;_++)C=b.neighborhood[_],M=b.weights[_],k[C]+=O[S]*M;for(w=o(k),S=0;S<m;S++)k[S]/=w;for(E=0,S=0;S<m;S++)E+=Math.abs(k[S]-O[S]);if(E<m*v){I=!0;break}$++}if(!I)throw Error("graphology-metrics/centrality/eigenvector: failed to converge.");if(l){b.assign(h.nodeCentralityAttribute,k);return}return b.collect(k)}var u=a.bind(null,!1);return u.assign=a.bind(null,!0),ro=u,ro}var Oy=Gy();const Ry=We(Oy);var sr={},no,Cu;function qy(){if(Cu)return no;Cu=1;var r=xe();function e(n,o){if(n.length<1)throw new Error("graphology-metrics/layout-quality/connected-closeness.max: not enough values!");for(var a=void 0,u,l=1,f=n.length;l<f;l++)u=n[l],o!==void 0&&(u=o(u)),(a===void 0||u>a)&&(a=u);return a}function t(n,o){if(n.length<1)throw new Error("graphology-metrics/layout-quality/connected-closeness.min: not enough values!");for(var a=void 0,u,l=1,f=n.length;l<f;l++)u=n[l],o!==void 0&&(u=o(u)),(a===void 0||u<a)&&(a=u);return a}return no=function(o,a){if(!r(o))throw new Error("graphology-metrics/layout-quality/connected-closeness: given graph is not a valid graphology instance.");if(o.size<2)return{deltaMax:void 0,ePercentOfDeltaMax:void 0,pPercentOfDeltaMax:void 0,pEdgeOfDeltaMax:void 0,cMax:$.C};a=a||{},a.epsilon=a.epsilon||.03,a.gridSize=a.gridSize||10;var u=a.rng||Math.random,l=C(),f=o.edges().map(function(w){var I=o.getNodeAttributes(o.source(w)),z=o.getNodeAttributes(o.target(w)),T=Math.sqrt(Math.pow(I.x-z.x,2)+Math.pow(I.y-z.y,2));return T}),h=[0,Math.max(e(l),e(f)||0)],p=0,v={},m,b,S,_,N,M=-1;do{for(_=0;_<=a.gridSize;_++)m=h[0]+(h[1]-h[0])*_/a.gridSize,v[m]===void 0&&(v[m]=E(m,o,l,f));b=p,p=0,N=Object.values(v),N.forEach(function(w,I){S=w.C,S>p&&(p=S,M=I)}),h=[N[Math.max(0,M-1)].Delta,N[Math.min(N.length-1,M+1)].Delta]}while((p-b)/p>=a.epsilon/10);var k=O(N,a.epsilon),$=E(k,o,l,f);if($.C<.1)return{deltaMax:void 0,ePercentOfDeltaMax:void 0,pPercentOfDeltaMax:void 0,pEdgeOfDeltaMax:void 0,cMax:$.C};return{deltaMax:k,ePercentOfDeltaMax:$.ePercent,pPercentOfDeltaMax:$.pPercent,pEdgeOfDeltaMax:$.pEdge,cMax:$.C};function E(w,I,z,T){var R=T.filter(function(Y){return Y<=w}),j=z.filter(function(Y){return Y<=w}),V=R.length,te=V/T.length,Q=j.length,H=Q/z.length,G=te-H,B=I.undirected?1:2,W=V/(B*Q*(I.order*(I.order-1))/z.length);return{Delta:w,ePercent:te,pPercent:H,pEdge:W,C:G}}function C(){if(o.order<2)return[];var w=[],I,z,T,R,j,V=o.size;if(V<1)return[];for(var te=0;te<V;te++){I=o.nodes()[Math.floor(u()*o.order)];do z=o.nodes()[Math.floor(u()*o.order)];while(I===z);T=o.getNodeAttributes(I),R=o.getNodeAttributes(z),j=Math.sqrt(Math.pow(T.x-R.x,2)+Math.pow(T.y-R.y,2)),w.push(j)}return w}function O(w,I){var z=e(w,function(R){return R.C}),T=t(w.filter(function(R){return R.C>=(1-I)*z}),function(R){return R.Delta});return T}},no}var io,Du;function By(){if(Du)return io;Du=1;var r=xe();function e(t,n){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}return io=function(n){if(!r(n))throw new Error("graphology-metrics/layout-quality/edge-uniformity: given graph is not a valid graphology instance.");if(n.size===0)return 0;var o=0,a=0,u,l=new Float64Array(n.size);n.forEachEdge(function(v,m,b,S,_,N){var M=e(_,N);l[a++]=M,o+=M});var f=o/n.size,h=0;for(a=0,u=n.size;a<u;a++)h+=Math.pow(f-l[a],2);var p=h/(n.size*Math.pow(f,2));return Math.sqrt(p)},io}var oo,Iu;function Uy(){if(Iu)return oo;Iu=1;var r=la(),e=da(),t=r.DEFAULT_COMPARATOR,n=r.reverseComparator;function o(l,f,h,p){for(var v=h,m=p,b=f[p],S=2*p+1,_;S<v;)_=S+1,_<v&&l(f[S],f[_])>=0&&(S=_),f[p]=f[S],p=S,S=2*p+1;f[p]=b,e.siftDown(l,f,m,p)}function a(l,f,h,p){for(var v=p,m=v,b=new l(p),S,_;m>0;)S=h[--m],m!==0&&(_=h[0],h[0]=S,o(f,h,--p,0),S=_),b[m]=S;return b}function u(l,f,h){if(arguments.length===2&&(h=f,f=null),this.ArrayClass=l,this.capacity=h,this.items=new l(h),this.clear(),this.comparator=f||t,typeof h!="number"&&h<=0)throw new Error("mnemonist/FixedReverseHeap.constructor: capacity should be a number > 0.");if(typeof this.comparator!="function")throw new Error("mnemonist/FixedReverseHeap.constructor: given comparator should be a function.");this.comparator=n(this.comparator)}return u.prototype.clear=function(){this.size=0},u.prototype.push=function(l){return this.size<this.capacity?(this.items[this.size]=l,e.siftDown(this.comparator,this.items,0,this.size),this.size++):this.comparator(l,this.items[0])>0&&e.replace(this.comparator,this.items,l),this.size},u.prototype.peek=function(){return this.items[0]},u.prototype.consume=function(){var l=a(this.ArrayClass,this.comparator,this.items,this.size);return this.size=0,l},u.prototype.toArray=function(){return a(this.ArrayClass,this.comparator,this.items.slice(0,this.size),this.size)},u.prototype.inspect=function(){var l=this.toArray();return Object.defineProperty(l,"constructor",{value:u,enumerable:!1}),l},typeof Symbol<"u"&&(u.prototype[Symbol.for("nodejs.util.inspect.custom")]=u.prototype.inspect),oo=u,oo}var En={},$u;function jy(){if($u)return En;$u=1;var r=new Float64Array(64),e=new Float64Array(64);function t(o,a,u){var l,f,h,p,v;for(r[0]=a,e[0]=u,f=0;f>=0;)if(h=r[f],p=e[f]-1,h<p){for(l=o[h];h<p;){for(;o[p]>=l&&h<p;)p--;for(h<p&&(o[h++]=o[p]);o[h]<=l&&h<p;)h++;h<p&&(o[p--]=o[h])}o[h]=l,r[f+1]=h+1,e[f+1]=e[f],e[f++]=h,e[f]-r[f]>e[f-1]-r[f-1]&&(v=r[f],r[f]=r[f-1],r[f-1]=v,v=e[f],e[f]=e[f-1],e[f-1]=v)}else f--;return o}En.inplaceQuickSort=t;function n(o,a,u,l){var f,h,p,v,m,b;for(r[0]=u,e[0]=l,h=0;h>=0;)if(p=r[h],v=e[h]-1,p<v){for(m=a[p],f=o[m];p<v;){for(;o[a[v]]>=f&&p<v;)v--;for(p<v&&(a[p++]=a[v]);o[a[p]]<=f&&p<v;)p++;p<v&&(a[v--]=a[p])}a[p]=m,r[h+1]=p+1,e[h+1]=e[h],e[h++]=p,e[h]-r[h]>e[h-1]-r[h-1]&&(b=r[h],r[h]=r[h-1],r[h-1]=b,b=e[h],e[h]=e[h-1],e[h-1]=b)}else h--;return a}return En.inplaceQuickSortIndices=n,En}var ao,zu;function Fy(){if(zu)return ao;zu=1;var r=qn(),e=Hr(),t=la().createTupleComparator,n=Uy(),o=jy().inplaceQuickSortIndices;function a(v,m,b,S){var _,N=0,M;for(_=0;_<v;_++)M=m[_][b]-S[_],N+=M*M;return N}function u(v,m){var b=m.length,S=new Array(v),_=new Array(b),N,M=e.getPointerArray(b),k=new M(b),$,E,C,O=!0;for($=0;$<v;$++){for(N=new Float64Array(b),E=0;E<b;E++)C=m[E],N[E]=C[1][$],O&&(_[E]=C[0],k[E]=E);O=!1,S[$]=N}return{axes:S,ids:k,labels:_}}function l(v,m,b,S){for(var _=S.length,N=e.getPointerArray(_+1),M=new N(_),k=new N(_),$=new N(_),E=[[0,0,b.length,-1,0]],C,O,w,I,z,T,R,j,V=0;E.length!==0;)C=E.pop(),j=C[0],T=C[1],R=C[2],O=C[3],w=C[4],o(m[j],b,T,R),_=R-T,I=T+(_>>>1),z=b[I],M[V]=z,O>-1&&(w===0?k[O]=V+1:$[O]=V+1),j=(j+1)%v,I!==T&&I!==R-1&&E.push([j,I+1,R,V,1]),I!==T&&E.push([j,T,I,V,0]),V++;return{axes:m,labels:S,pivots:M,lefts:k,rights:$}}function f(v,m){this.dimensions=v,this.visited=0,this.axes=m.axes,this.labels=m.labels,this.pivots=m.pivots,this.lefts=m.lefts,this.rights=m.rights,this.size=this.labels.length}f.prototype.nearestNeighbor=function(v){var m=1/0,b=null,S=this.dimensions,_=this.axes,N=this.pivots,M=this.lefts,k=this.rights,$=0;function E(C,O){$++;var w=M[O],I=k[O],z=N[O],T=a(S,_,z,v);if(!(T<m&&(b=z,m=T,T===0))){var R=_[C][z]-v[C];C=(C+1)%S,R>0?w!==0&&E(C,w-1):I!==0&&E(C,I-1),R*R<m&&(R>0?I!==0&&E(C,I-1):w!==0&&E(C,w-1))}}return E(0,0),this.visited=$,this.labels[b]};var h=t(3),p=t(2);return f.prototype.kNearestNeighbors=function(v,m){if(v<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");if(v=Math.min(v,this.size),v===1)return[this.nearestNeighbor(m)];var b=new n(Array,h,v),S=this.dimensions,_=this.axes,N=this.pivots,M=this.lefts,k=this.rights,$=0;function E(w,I){var z=M[I],T=k[I],R=N[I],j=a(S,_,R,m);b.push([j,$++,R]);var V=m[w],te=_[w][R],Q=V-te;w=(w+1)%S,V<te?z!==0&&E(w,z-1):T!==0&&E(w,T-1),(Q*Q<b.peek()[0]||b.size<v)&&(V<te?T!==0&&E(w,T-1):z!==0&&E(w,z-1))}E(0,0),this.visited=$;for(var C=b.consume(),O=0;O<C.length;O++)C[O]=this.labels[C[O][2]];return C},f.prototype.linearKNearestNeighbors=function(v,m){if(v<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");v=Math.min(v,this.size);var b=new n(Array,p,v),S,_,N;for(S=0,_=this.size;S<_;S++)N=a(this.dimensions,this.axes,this.pivots[S],m),b.push([N,S]);var M=b.consume();for(S=0;S<M.length;S++)M[S]=this.labels[this.pivots[M[S][1]]];return M},f.prototype.inspect=function(){var v=new Map;v.dimensions=this.dimensions,Object.defineProperty(v,"constructor",{value:f,enumerable:!1});var m,b,S;for(m=0;m<this.size;m++){for(S=new Array(this.dimensions),b=0;b<this.dimensions;b++)S[b]=this.axes[b][m];v.set(this.labels[m],S)}return v},typeof Symbol<"u"&&(f.prototype[Symbol.for("nodejs.util.inspect.custom")]=f.prototype.inspect),f.from=function(v,m){var b=r.toArray(v),S=u(m,b),_=l(m,S.axes,S.ids,S.labels);return new f(m,_)},f.fromAxes=function(v,m){m||(m=e.indices(v[0].length));var b=v.length,S=l(v.length,v,e.indices(m.length),m);return new f(b,S)},ao=f,ao}var so,Tu;function fl(){if(Tu)return so;Tu=1;var r=xe(),e=Fy(),t=dl().intersectionSize;return so=function(o){if(!r(o))throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: given graph is not a valid graphology instance.");if(o.order===0)throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: cannot compute stress for a null graph.");if(o.size===0)return 0;var a=[new Float64Array(o.order),new Float64Array(o.order)],u=0;o.forEachNode(function(h,p){a[0][u]=p.x,a[1][u++]=p.y});var l=e.fromAxes(a,o.nodes()),f=0;return o.forEachNode(function(h,p){var v=new Set(o.neighbors(h));if(v.size===0||v.size===o.order-1){f+=1;return}var m=l.kNearestNeighbors(v.size+1,[p.x,p.y]);m=new Set(m.slice(1));var b=t(v,m);f+=b/m.size}),f/o.order},so}var uo,Lu;function pl(){if(Lu)return uo;Lu=1;var r=xe(),e=ca().undirectedSingleSourceLength;function t(n,o){return Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2))}return uo=function(o){if(!r(o))throw new Error("graphology-metrics/layout-quality/stress: given graph is not a valid graphology instance.");if(o.order===0)throw new Error("graphology-metrics/layout-quality/stress: cannot compute stress for a null graph.");var a=new Array(o.order),u=new Array(o.order),l=0,f=o.order*4;o.forEachNode(function(k,$){a[l]=k,u[l++]=$});var h,p,v,m,b,S,_,N,M=0;for(l=0,p=o.order;l<p;l++)for(b=e(o,a[l]),v=u[l],h=l+1;h<p;h++)m=u[h],S=b[a[h]],typeof S>"u"&&(S=f),N=t(v,m),_=1/(S*S),M+=_*Math.pow(N-S,2);return M},uo}var Pu;function Wy(){return Pu||(Pu=1,sr.connectedCloseness=qy(),sr.edgeUniformity=By(),sr.neighborhoodPreservation=fl(),sr.stress=pl()),sr}var Hy=Wy(),Ky=pl();const Yy=We(Ky);var Xy=cl();const Vy=We(Xy);var co,Gu;function Qy(){if(Gu)return co;Gu=1;var r=xe(),e=gt(),t=Bn().WeightedNeighborhoodIndex,n={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function o(u,l,f){if(!r(l))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");f=e(f,n);var h=f.alpha,p=f.maxIterations,v=f.tolerance,m=f.nodePagerankAttribute,b=l.order,S=1/b,_=new t(l,f.getEdgeWeight),N,M,k,$,E=new Float64Array(l.order),C=new Float64Array(_.weights.length),O=[];for(N=0;N<b;N++)for(E[N]=S,k=_.starts[N+1],$=_.outDegrees[N],$===0&&O.push(N),M=_.starts[N];M<k;M++)C[M]=_.weights[M]/$;for(var w=0,I=0,z,T,R,j=!1;w<p;){for(R=E,E=new Float64Array(l.order),z=0,N=0,k=O.length;N<k;N++)z+=R[O[N]];for(z*=h,N=0;N<b;N++){for(k=_.starts[N+1],M=_.starts[N];M<k;M++)T=_.neighborhood[M],E[T]+=h*R[N]*C[M];E[N]+=z*S+(1-h)*S}for(I=0,N=0;N<b;N++)I+=Math.abs(E[N]-R[N]);if(I<b*v){j=!0;break}w++}if(!j)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(u){_.assign(m,E);return}return _.collect(E)}var a=o.bind(null,!1);return a.assign=o.bind(null,!0),co=a,co}var Zy=Qy();const Jy=We(Zy);var em=fl();const tm=We(em);var rm=ll();const nm=We(rm),_n=document;class gl{constructor(e){this.graphManager=e,this.pannel=_n.querySelector("#floating-panel .body-info")}addHeader(e){const t=_n.createElement("h4");t.textContent=e,this.pannel.appendChild(t),console.log(e)}addInfo(e){const t=_n.createElement("div");t.insertAdjacentHTML("beforeend",e),this.pannel.appendChild(t),console.log(e)}addLine(){const e=_n.createElement("hr");this.pannel.appendChild(e),this.pannel.scrollTop=this.pannel.scrollHeight}addNodeInfo(e){if(typeof e=="string"){const t=this.graphManager.graph.getNodeAttributes(e);if(t.desc&&Object.keys(t.desc).length!=0||t.weight){this.addHeader(`${t.label}:`);for(let n in t.desc)this.addInfo(`${n}: ${t.desc[n]}`);t.weight&&this.addInfo(`weight: ${t.weight}`),this.addLine()}}else{const t=e;if(t.desc&&Object.keys(t.desc).length!=0||t.weight){this.addHeader(`${t.label}:`);for(let n in t.desc)this.addInfo(`${n}: ${t.desc[n]}`);t.weight&&this.addInfo(`weight: ${t.weight}`),this.addLine()}}}allNodeInfo(){for(let e of this.graphManager.graph.getSelectedNodes())this.addNodeInfo(e)}addEdgeInfo(e){if(typeof e=="string"){const t=this.graphManager.graph.getEdgeAttributes(e);if(t.desc&&Object.keys(t.desc).length!=0||t.weight){this.addHeader(`${t.label}:`);for(let n in t.desc)this.addInfo(`${n}: ${t.desc[n]}`);t.weight&&this.addInfo(`weight: ${t.weight}`),this.addLine()}}else{const t=e;if(t.desc&&Object.keys(t.desc).length!=0||t.weight){this.addHeader(`${t.label}:`);for(let n in t.desc)this.addInfo(`${n}: ${t.desc[n]}`);t.weight&&this.addInfo(`weight: ${t.weight}`),this.addLine()}}}allEdgeInfo(){for(let e of this.graphManager.graph.getSelectedEdges())this.addEdgeInfo(e)}getComponent(e){const t=this.graphManager.graph,n=Ti.connectedComponents(t);for(let o of n)if(o.includes(String(e)))return o;return null}basicInfo(){const e=this.graphManager.graph;this.addHeader("Basic Informattion"),this.addInfo(`|V|: ${e.order}`),this.addInfo(`|E|: ${e.size}`);const t=e.someEdge((n,o)=>o.weight);this.addInfo(t?`Type: ${e.type}, weighted`:`Type: ${e.type}`),this.addLine()}degreeSequesnce(){this.addHeader("Degree Sequence");const e=this.graphManager.graph,n=`(${e.mapNodes((o,a)=>e.degree(o)).join(", ")})`;this.addInfo(n),this.addLine()}countComponents(){const e=this.graphManager.graph;this.addHeader("Connected Components");const t=Ti.countConnectedComponents(e);this.addInfo(`Count: ${t}`),Ti.forEachConnectedComponent(e,n=>{this.addInfo(n.map(o=>e.getNodeAttribute(o,"label")).join(", "))}),this.addLine()}neighbors(){const e=this.graphManager.graph;this.addHeader("Neighbors");const t=this.graphManager.graph.getSelectedNodes();if(t.length!==1){this.addInfo("Select one node"),this.addLine();return}const[n]=t,o=e.neighbors(n);this.addInfo(o.map(a=>e.getNodeAttribute(a,"label")).join(", ")),this.addLine()}shortestPath(){this.addHeader("Shortest Path");const e=this.graphManager.graph,t=this.graphManager.graph.getSelectedNodes();if(t.length!==2){this.addInfo("Select two nodes"),this.addLine();return}const[n,o]=t,a=yy.bidirectional(e,n,o);a?(this.addInfo(a.map(u=>e.getNodeAttribute(u,"label")).join(" -> ")),this.addLine(),e.selectPath(a),this.graphManager.app.drawGraph()):(this.addInfo("They are not connected"),this.addLine())}density(){this.addHeader("Density");const e=this.graphManager.graph,t=gu.density(e);this.addInfo(t),this.addLine()}diameter(){this.addHeader("Diameter");const e=this.graphManager.graph,t=gu.diameter(e);this.addInfo(t),this.addLine()}eccentricity(){this.addHeader("Eccentricity");const e=this.graphManager.graph,t=this.graphManager.graph.getSelectedNodes();if(t.length!==1){this.addInfo("Select one node"),this.addLine();return}const[n]=t,o=Vy(e,n);this.addInfo(o),this.addLine()}simmelianStrength(){this.addHeader("Simmelian strength");const e=this.graphManager.graph,t=Ay.simmelianStrength(e);for(const n in t){const{source:o,target:a}=e.getEdgeAttributes(n);this.addInfo(`${e.getNodeAttribute(o,"label")}, ${e.getNodeAttribute(a,"label")} : ${t[n]}`)}this.addLine()}betweennessCentrality(){this.addHeader("Betweenness centrality");const e=this.graphManager.graph,t=Py(e);for(const n in t)this.addInfo(`${e.getNodeAttribute(n,"label")}: ${t[n]}`);this.addLine()}closenessCentrality(){this.addHeader("Closeness centrality");const e=this.graphManager.graph,t=Cy(e);for(const n in t)this.addInfo(`${e.getNodeAttribute(n,"label")}: ${t[n]}`);this.addLine()}degreeCentrality(){this.addHeader("Degree centrality");const e=this.graphManager.graph,t=Iy.degreeCentrality(e);for(const n in t)this.addInfo(`${e.getNodeAttribute(n,"label")}: ${t[n]}`);this.addLine()}eigenvectorCentrality(){this.addHeader("Eigenvector centrality");const e=this.graphManager.graph,t=Ry(e);for(const n in t)this.addInfo(`${e.getNodeAttribute(n,"label")}: ${t[n]}`);this.addLine()}pagerank(){this.addHeader("Pagerank");const e=this.graphManager.graph,t=Jy(e);for(const n in t)this.addInfo(`${e.getNodeAttribute(n,"label")}: ${t[n]}`);this.addLine()}edgeUniformity(){this.addHeader("Edge Uniformity");const e=this.graphManager.graph,t=Hy.edgeUniformity(e);this.addInfo(t),this.addLine()}neighborhoodPreservation(){this.addHeader("Neighborhood preservation");const e=this.graphManager.graph,t=tm(e);this.addInfo(t),this.addLine()}stress(){this.addHeader("Stress");const e=this.graphManager.graph,t=Yy(e);this.addInfo(t),this.addLine()}disparity(){this.addHeader("disparity");const e=this.graphManager.graph,t=nm(e);for(const n in t){const{source:o,target:a}=e.getEdgeAttributes(n);this.addInfo(`${e.getNodeAttribute(o,"label")}, ${e.getNodeAttribute(a,"label")} : ${t[n]}`)}this.addLine()}}var Sn={},lo,Ou;function im(){if(Ou)return lo;Ou=1;var r=st(),e=sa();return lo=function(n,o,a){if(!r(n))throw new Error("graphology-generators/community/caveman: invalid Graph constructor.");var u=o*a,l=e(n,u);if(a<2)return l;var f,h,p;for(f=0;f<u;f+=a)for(h=f;h<f+a;h++)for(p=h+1;p<f+a;p++)l.addEdge(h,p);return l},lo}var ho,Ru;function om(){if(Ru)return ho;Ru=1;var r=st(),e=sa();return ho=function(n,o,a){if(!r(n))throw new Error("graphology-generators/community/connected-caveman: invalid Graph constructor.");var u=o*a,l=e(n,u);if(a<2)return l;var f,h,p;for(f=0;f<u;f+=a){for(h=f;h<f+a;h++)for(p=h+1;p<f+a;p++)(h!==f||h!==p-1)&&l.addEdge(h,p);f>0&&l.addEdge(f,(f-1)%u)}return l.addEdge(0,u-1),l},ho}var qu;function am(){return qu||(qu=1,Sn.caveman=im(),Sn.connectedCaveman=om()),Sn}var Bu=am(),$r={},fo,Uu;function sm(){if(Uu)return fo;Uu=1;var r=st();return fo=function(e,t){if(!r(e))throw new Error("graphology-generators/random/clusters: invalid Graph constructor.");t=t||{};var n="clusterDensity"in t?t.clusterDensity:.5,o=t.rng||Math.random,a=t.order,u=t.size,l=t.clusters;if(typeof n!="number"||n>1||n<0)throw new Error("graphology-generators/random/clusters: `clusterDensity` option should be a number between 0 and 1.");if(typeof o!="function")throw new Error("graphology-generators/random/clusters: `rng` option should be a function.");if(typeof a!="number"||a<=0)throw new Error("graphology-generators/random/clusters: `order` option should be a positive number.");if(typeof u!="number"||u<=0)throw new Error("graphology-generators/random/clusters: `size` option should be a positive number.");if(typeof l!="number"||l<=0)throw new Error("graphology-generators/random/clusters: `clusters` option should be a positive number.");var f=new e;if(!a)return f;var h=new Array(l),p,v,m;for(m=0;m<l;m++)h[m]=[];for(m=0;m<a;m++)p=o()*l|0,f.addNode(m,{cluster:p}),h[p].push(m);if(!u)return f;var b,S,_;for(m=0;m<u;m++){if(o()<1-n){b=o()*a|0;do S=o()*a|0;while(b===S)}else{if(p=o()*l|0,v=h[p],_=v.length,!_||_<2)continue;b=v[o()*_|0];do S=v[o()*_|0];while(b===S)}f.multi?f.addEdge(b,S):f.mergeEdge(b,S)}return f},fo}var po,ju;function um(){if(ju)return po;ju=1;var r=st(),e=ul().abstractDensity;function t(o,a){if(!r(o))throw new Error("graphology-generators/random/erdos-renyi: invalid Graph constructor.");var u=a.order,l=a.probability,f=a.rng||Math.random,h=new o;if(typeof a.approximateSize=="number"&&(l=e(h.type,!1,u,a.approximateSize)),typeof u!="number"||u<=0)throw new Error("graphology-generators/random/erdos-renyi: invalid `order`. Should be a positive number.");if(typeof l!="number"||l<0||l>1)throw new Error("graphology-generators/random/erdos-renyi: invalid `probability`. Should be a number between 0 and 1. Or maybe you gave an `approximateSize` exceeding the graph's density.");if(typeof f!="function")throw new Error("graphology-generators/random/erdos-renyi: invalid `rng`. Should be a function.");var p,v;for(p=0;p<u;p++)h.addNode(p);if(l<=0)return h;for(p=0;p<u;p++)for(v=p+1;v<u;v++)h.type!=="directed"&&f()<l&&h.addUndirectedEdge(p,v),h.type!=="undirected"&&(f()<l&&h.addDirectedEdge(p,v),f()<l&&h.addDirectedEdge(v,p));return h}function n(o,a){if(!r(o))throw new Error("graphology-generators/random/erdos-renyi: invalid Graph constructor.");var u=a.order,l=a.probability,f=a.rng||Math.random,h=new o;if(typeof a.approximateSize=="number"&&(l=e(h.type,!1,u,a.approximateSize)),typeof u!="number"||u<=0)throw new Error("graphology-generators/random/erdos-renyi: invalid `order`. Should be a positive number.");if(typeof l!="number"||l<0||l>1)throw new Error("graphology-generators/random/erdos-renyi: invalid `probability`. Should be a number between 0 and 1. Or maybe you gave an `approximateSize` exceeding the graph's density.");if(typeof f!="function")throw new Error("graphology-generators/random/erdos-renyi: invalid `rng`. Should be a function.");for(var p=0;p<u;p++)h.addNode(p);if(l<=0)return h;var v=-1,m=Math.log(1-l),b,S;if(h.type!=="undirected")for(S=0;S<u;){for(b=Math.log(1-f()),v+=1+(b/m|0),S===v&&v++;S<u&&u<=v;)v-=u,S++,S===v&&v++;S<u&&h.addDirectedEdge(S,v)}if(v=-1,h.type!=="directed")for(S=1;S<u;){for(b=Math.log(1-f()),v+=1+(b/m|0);v>=S&&S<u;)v-=S,S++;S<u&&h.addUndirectedEdge(S,v)}return h}return t.sparse=n,po=t,po}var go,Fu;function cm(){if(Fu)return go;Fu=1;var r=st();return go=function(t,n){if(!r(t))throw new Error("graphology-generators/random/girvan-newman: invalid Graph constructor.");var o=n.zOut,a=n.rng||Math.random;if(typeof o!="number")throw new Error("graphology-generators/random/girvan-newman: invalid `zOut`. Should be a number.");if(typeof a!="function")throw new Error("graphology-generators/random/girvan-newman: invalid `rng`. Should be a function.");var u=o/96,l=(16-u*96)/31,f=new t,h,p,v;for(p=0;p<128;p++)f.addNode(p);for(p=0;p<128;p++)for(v=p+1;v<128;v++)h=a(),p%4===v%4?h<l&&f.addEdge(p,v):h<u&&f.addEdge(p,v);return f},go}var Wu;function lm(){return Wu||(Wu=1,$r.clusters=sm(),$r.erdosRenyi=um(),$r.girvanNewman=cm()),$r}var vo=lm(),ht={},yo,Hu;function dm(){return Hu||(Hu=1,yo=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,o,a;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(!r(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;for(o of e.entries())if(!r(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[o]))return!1;for(o=n;o--!==0;){var u=a[o];if(!r(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}),yo}var Ku;function hm(){if(Ku)return ht;Ku=1;var r=dm(),e=Symbol("size");function t(p,v){var m=p.length,b=v.length;if(m!==b)return!1;var S,_,N,M,k=new Set;e:for(N=0;N<m;N++){for(S=p[N],M=0;M<b;M++)if(!k.has(M)&&(_=v[M],r(S,_))){k.add(M);continue e}return!1}return!0}function n(p,v){if(p[e]!==v[e])return!1;for(var m in p)if(!t(p[m],v[m]))return!1;return!0}function o(p,v){var m={},b;return p.forEachOutEdge(v,function(S,_,N,M){b=m[M]||0,b++,m[M]=b}),m}function a(p,v){var m={},b;return p.forEachUndirectedEdge(v,function(S,_,N,M){M=v===N?M:N,!(v>M)&&(b=m[M]||0,b++,m[M]=b)}),m}function u(p,v){var m={};m[e]=0;var b;return p.forEachOutEdge(v,function(S,_,N,M){b=m[M],b||(b=[],m[e]+=1,m[M]=b),b.push(_)}),m}function l(p,v){var m={};m[e]=0;var b;return p.forEachUndirectedEdge(v,function(S,_,N,M){M=v===N?M:N,!(v>M)&&(b=m[M],b||(b=[],m[e]+=1,m[M]=b),b.push(_))}),m}function f(p,v,m){return v===m?!0:v.order!==m.order?!1:v.everyNode(function(b,S){return m.hasNode(b)?p?r(S,m.getNodeAttributes(b)):!0:!1})}function h(p,v,m,b){if(m===b)return!0;if(v){if(m.type==="directed"&&b.type==="undirected"||m.type==="undirected"&&b.type==="directed")return!1}else if(m.type!==b.type||m.allowSelfLoops!==b.allowSelfLoops||m.multi!==b.multi)return!1;if(m.directedSize!==b.directedSize||m.undirectedSize!==b.undirectedSize||!f(p,m,b))return!1;var S=!1,_=!1;if(!m.multi&&!b.multi){if(S=m.everyDirectedEdge(function(k,$,E,C){return b.hasDirectedEdge(E,C)?p?r(m.getDirectedEdgeAttributes(E,C),b.getDirectedEdgeAttributes(E,C)):!0:!1}),!S||(_=m.everyUndirectedEdge(function(k,$,E,C){return b.hasUndirectedEdge(E,C)?p?r(m.getUndirectedEdgeAttributes(E,C),b.getUndirectedEdgeAttributes(E,C)):!0:!1}),!_))return!1}else{var N=p?u:o,M=p?n:r;if(S=m.everyNode(function(k){var $=N(m,k),E=N(b,k);return M($,E)}),!S||(N=p?l:a,_=m.everyNode(function(k){var $=N(m,k),E=N(b,k);return M($,E)}),!_))return!1}return!0}return ht.isGraph=xe(),ht.isGraphConstructor=st(),ht.haveSameNodes=f.bind(null,!1),ht.haveSameNodesDeep=f.bind(null,!0),ht.areSameGraphs=h.bind(null,!1,!1),ht.areSameGraphsDeep=h.bind(null,!0,!1),ht.haveSameEdges=h.bind(null,!1,!0),ht.haveSameEdgesDeep=h.bind(null,!0,!0),ht}var mo,Yu;function fm(){return Yu||(Yu=1,mo=hm()),mo}var fa=fm(),Xu=["0111111110111100010101000000000100","1011000100000100010101000000001000","1101000111000100000000000001100010","1110000100001100000000000000000000","1000001000100000000000000000000000","1000001000100000100000000000000000","1000110000000000100000000000000000","1111000000000000000000000000000000","1010000000000000000000000000001011","0010000000000000000000000000000001","1000110000000000000000000000000000","1000000000000000000000000000000000","1001000000000000000000000000000000","1111000000000000000000000000000001","0000000000000000000000000000000011","0000000000000000000000000000000011","0000011000000000000000000000000000","1100000000000000000000000000000000","0000000000000000000000000000000011","1100000000000000000000000000000001","0000000000000000000000000000000011","1100000000000000000000000000000000","0000000000000000000000000000000011","0000000000000000000000000101010011","0000000000000000000000000101000100","0000000000000000000000011000000100","0000000000000000000000000000010001","0010000000000000000000011000000001","0010000000000000000000000000000101","0000000000000000000000010010000011","0100000010000000000000000000000011","1000000000000000000000001100100011","0010000010000011001010110000011101","0000000011000111001110110011111110"],pm=new Set([0,1,2,3,4,5,6,7,8,10,11,12,13,16,17,19,21]);function gm(r,e={}){if(!fa.isGraphConstructor(r))throw new Error("graphology-generators/social/karate: invalid Graph constructor.");for(var t=new r(e),n,o=0;o<34;o++)n=pm.has(o)?"Mr. Hi":"Officer",t.addNode(o,{club:n});var a,u,l,f,h,p;for(l=0,h=Xu.length;l<h;l++)for(a=Xu[l].split(""),f=l+1,p=a.length;f<p;f++)u=+a[f],u&&t.addEdgeWithKey(l+"->"+f,l,f);return t}var bo=[[0,1],[2,3],[2,4],[2,5],[1,5],[1,6],[1,7],[1,8],[1,9],[9,10],[3,4],[3,11],[4,6],[4,11],[6,7],[7,12],[8,13],[8,12],[11,12],[12,14]];function vm(r,e={}){if(!fa.isGraphConstructor(r))throw new Error("graphology-generators/social/florentine-families: invalid Graph constructor.");var t=new r(e),n,o;for(n=0,o=bo.length;n<o;n++)t.mergeEdge(bo[n][0],bo[n][1]);return t}var Ke={},wo,Vu;function ym(){if(Vu)return wo;Vu=1;var r=xe();return wo=function(t){if(!r(t))throw new Error("graphology-utils/infer-multi: expecting a valid graphology instance.");if(!t.multi||t.order===0||t.size<2)return!1;var n=!1,o,a,u,l;return t.forEachAssymetricAdjacencyEntry(function(f,h,p,v,m,b,S){if(!n){if(S&&f>h&&(l=h,h=f,f=l),f===o&&h===a&&S===u){n=!0;return}o=f,a=h,u=S}}),n},wo}var xo,Qu;function mm(){return Qu||(Qu=1,xo=function(e,t){if(t.length!==0){var n,o,a,u,l;for(a=0,l=t.length;a<l;a++)for(n=t[a],u=a+1;u<l;u++)o=t[u],e.mergeEdge(n,o)}}),xo}var Eo,Zu;function bm(){return Zu||(Zu=1,Eo=function(e,t){if(t.length!==0){var n,o,a,u;if(e.mergeNode(t[0]),t.length!==1){for(a=1,u=t.length;a<u;a++)n=t[a-1],o=t[a],e.mergeEdge(n,o);e.mergeEdge(o,t[0])}}}),Eo}var _o,Ju;function wm(){return Ju||(Ju=1,_o=function(e,t){if(t.length!==0){var n,o,a,u;for(e.mergeNode(t[0]),a=1,u=t.length;a<u;a++)n=t[a-1],o=t[a],e.mergeEdge(n,o)}}),_o}var So,ec;function xm(){return ec||(ec=1,So=function(e,t){if(t.length!==0){var n,o,a,u=t[0];for(e.mergeNode(u),o=1,a=t.length;o<a;o++)n=t[o],e.mergeEdge(u,n)}}),So}var Ao,tc;function Em(){if(tc)return Ao;tc=1;var r=St().copyEdge;return Ao=function(t,n,o){typeof n>"u"&&(n={}),typeof o>"u"&&(o={});var a=t.nullCopy();t.forEachNode(function(f,h){var p=n[f];typeof p>"u"&&(p=f),a.addNode(p,h)});var u,l;return t.forEachAssymetricAdjacencyEntry(function(f,h,p,v,m,b,S){f!==u&&(u=f,l=n[f],typeof l>"u"&&(l=f));var _=n[h];typeof _>"u"&&(_=h);var N=o[m];typeof N>"u"&&(N=m),r(a,S,N,l,_,b)}),a},Ao}var ko,rc;function _m(){if(rc)return ko;rc=1;var r=St().copyEdge;return ko=function(t,n,o){var a=t.nullCopy();t.forEachNode(function(f,h){var p=n?n(f,h):f;a.addNode(p,h)});var u,l;return t.forEachAssymetricAdjacencyEntry(function(f,h,p,v,m,b,S){f!==u&&(u=f,l=n?n(f,p):f);var _=n?n(h,v):h,N=o?o(m,b,f,h,p,v,S):m;r(a,S,N,l,_,b)}),a},ko}var nc;function Sm(){return nc||(nc=1,Ke.inferMulti=ym(),Ke.inferType=ha(),Ke.isGraph=xe(),Ke.isGraphConstructor=st(),Ke.mergeClique=mm(),Ke.mergeCycle=bm(),Ke.mergePath=wm(),Ke.mergeStar=xm(),Ke.renameGraphKeys=Em(),Ke.updateGraphKeys=_m()),Ke}var No,ic;function Am(){return ic||(ic=1,No=Sm()),No}var km=Am(),oc=[[0,1,2,3,4],[1,0,5,6],[2,0,3,4],[3,0,1,2,5,4,6],[5,1,3,6],[4,0,2,3,6,7],[6,1,3,5,4,7],[7,4,6,8],[8,7,9],[9,8]];function Nm(r,e={}){if(!fa.isGraphConstructor(r))throw new Error("invalid Graph constructor.");var t=new r(e),n,o;for(n=0,o=oc.length;n<o;n++)km.mergeStar(t,oc[n]);return t}const Mm={stars:[{id:0,label:"Hamal",ra:"02 08 34.7",dec:"23 34 50.5",magnitude:2.17},{id:1,label:"Sheratan",ra:"01 56 01.0",dec:"20 55 48.5",magnitude:2.7},{id:2,label:"Gamma",ra:"01 54 53.8",dec:"19 24 58.7",magnitude:3.84},{id:3,label:"41 Arietis",ra:"02 51 27.2",dec:"27 21 50.6",magnitude:3.58}],edges:[[0,1],[1,2],[0,3]]},Cm={stars:[{id:0,label:"Aldebaran",ra:"04 37 21.6",dec:"16 33 34.5",magnitude:1},{id:1,label:"Elnath",ra:"05 26 17.5",dec:"28 36 27.0",magnitude:1.65},{id:2,label:"Zeta",ra:"05 37 38.7",dec:"21 08 33.0",magnitude:2.97},{id:3,label:"Theta2",ra:"04 30 05.6",dec:"15 55 34.7",magnitude:3.45},{id:4,label:"Lambda",ra:"04 02 04.1",dec:"12 33 38.8",magnitude:3.38},{id:5,label:"Omicron",ra:"03 26 09.5",dec:"09 06 59.4",magnitude:3.77},{id:6,label:"Gamma",ra:"04 21 13.2",dec:"15 41 16.8",magnitude:3.8},{id:7,label:"Delta",ra:"04 24 22.8",dec:"17 36 04.5",magnitude:3.92},{id:8,label:"Delta3",ra:"04 26 56.4",dec:"17 59 06.4",magnitude:4.31},{id:9,label:"Ain",ra:"04 30 04.9",dec:"19 14 09.9",magnitude:3.69},{id:10,label:"Tau",ra:"04 43 45.1",dec:"23 00 19.2",magnitude:4.22},{id:11,label:"Atlas",ra:"03 50 39.0",dec:"24 07 49.6",magnitude:4.22}],edges:[[0,3],[0,2],[6,4],[4,5],[3,6],[6,7],[8,7],[8,9],[9,0],[9,10],[1,10],[11,7]]},Dm={stars:[{id:0,label:"Castor",ra:"07 36 12.8",dec:"31 50 01.2",magnitude:1.58},{id:1,label:"Pollux",ra:"07 46 52.0",dec:"27 57 57.2",magnitude:1.29},{id:2,label:"Kappa",ra:"07 45 58.6",dec:"24 20 15.9",magnitude:3.72},{id:3,label:"Upsilon",ra:"07 37 29.0",dec:"26 50 24.6",magnitude:4.16},{id:4,label:"Iota",ra:"07 27 17.9",dec:"27 44 54.9",magnitude:3.94},{id:5,label:"Tau",ra:"07 12 44.9",dec:"30 12 16.7",magnitude:4.53},{id:6,label:"Theta",ra:"06 54 27.2",dec:"33 55 55.1",magnitude:3.63},{id:7,label:"Wasat",ra:"07 21 38.1",dec:"21 56 09.7",magnitude:3.59},{id:8,label:"Mekbuda",ra:"07 05 36.5",dec:"20 32 00.0",magnitude:4.16},{id:9,label:"Alhena",ra:"06 39 10.1",dec:"16 22 38.5",magnitude:1.92},{id:10,label:"Lambda",ra:"07 19 32.8",dec:"16 29 40.3",magnitude:3.61},{id:11,label:"Xi",ra:"06 46 42.4",dec:"12 52 04.2",magnitude:3.44},{id:12,label:"Mebsuta",ra:"06 45 29.1",dec:"25 06 23.7",magnitude:3.19},{id:13,label:"Nu",ra:"06 30 27.6",dec:"20 11 46.3",magnitude:4.09},{id:14,label:"Tejat",ra:"06 24 29.2",dec:"22 30 03.1",magnitude:2.91},{id:15,label:"Propus",ra:"06 16 24.0",dec:"22 29 58.9",magnitude:3.28},{id:16,label:"1",ra:"06 05 39.1",dec:"23 15 43.8",magnitude:4.31}],edges:[[0,5],[1,3],[3,2],[3,4],[4,5],[5,6],[3,7],[7,8],[7,10],[8,9],[10,11],[5,12],[12,13],[12,14],[14,15],[15,16]]},Im={stars:[{id:0,label:"Acubens",ra:"08 59 52.7",dec:"11 45 32.4",magnitude:4.28},{id:1,label:"Beta",ra:"08 17 53.5",dec:"09 06 24.1",magnitude:3.66},{id:2,label:"Asellus Australis",ra:"08 46 07.7",dec:"18 03 39.9",magnitude:4.09},{id:3,label:"Asellus Borealis",ra:"08 44 45.4",dec:"21 22 39.2",magnitude:4.66},{id:4,label:"Chi",ra:"08 21 36.4",dec:"27 08 10.9",magnitude:5.22},{id:5,label:"Iota",ra:"08 48 14.1",dec:"28 40 04.4",magnitude:4.19}],edges:[[0,2],[1,2],[2,3],[3,4],[3,5]]},$m={stars:[{id:0,label:"Regulus",ra:"10 09 44.0",dec:"11 50 33.1",magnitude:1.32},{id:1,label:"Algieba",ra:"10 21 22.9",dec:"19 42 46.3",magnitude:2.16},{id:2,label:"Zosma",ra:"11 15 28.3",dec:"20 23 02.6",magnitude:2.58},{id:3,label:"Adhafera",ra:"10 18 06.7",dec:"23 17 27.1",magnitude:3.5},{id:4,label:"Denebola",ra:"11 50 22.2",dec:"14 25 44.7",magnitude:2.16},{id:5,label:"Chertan",ra:"11 15 35.1",dec:"15 17 24.1",magnitude:3.33},{id:6,label:"Eta",ra:"10 08 43.5",dec:"16 38 18.8",magnitude:3.5},{id:7,label:"Rasalas",ra:"09 54 12.9",dec:"25 53 16.1",magnitude:4.03},{id:8,label:"Epsilon",ra:"09 47 18.0",dec:"23 39 27.6",magnitude:3.11}],edges:[[1,3],[2,5],[5,4],[1,6],[2,1],[6,0],[0,5],[3,7],[7,8],[2,4]]},zm={stars:[{id:0,label:"Nu",ra:"11 47 10.7",dec:"06 23 09.0",magnitude:4.13},{id:1,label:"Zaniah",ra:"12 21 13.2",dec:"-00 48 34.3",magnitude:3.89},{id:2,label:"Porrima",ra:"12 42 57.7",dec:"-01 35 23.7",magnitude:2.81},{id:3,label:"Spica",ra:"13 26 32.8",dec:"-11 17 43.6",magnitude:.89},{id:4,label:"Kappa",ra:"14 14 15.9",dec:"-10 23 36.5",magnitude:4.31},{id:5,label:"Syrma",ra:"14 17 21.6",dec:"-06 07 24.0",magnitude:4.16},{id:6,label:"Mu",ra:"14 44 24.8",dec:"-05 46 13.4",magnitude:3.95},{id:7,label:"109",ra:"14 47 32.8",dec:"01 47 01.4",magnitude:3.73},{id:8,label:"Tau",ra:"14 02 57.3",dec:"01 25 10.9",magnitude:4.25},{id:9,label:"Heze",ra:"13 36 00.2",dec:"-00 43 38.6",magnitude:3.41},{id:10,label:"Delta",ra:"12 56 53.9",dec:"03 15 28.1",magnitude:3.44},{id:11,label:"Vindemiatrix",ra:"13 03 27.4",dec:"10 49 15.5",magnitude:2.98}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[7,8],[8,9],[9,10],[10,11],[2,10],[3,9]]},Tm={stars:[{id:0,label:"Zubenelgenubi II",ra:"14 52 17.9",dec:"-16 08 54.7",magnitude:2.78},{id:1,label:"Sigma",ra:"15 05 34.3",dec:"-25 22 56.3",magnitude:3.3},{id:2,label:"Zubeneschamali",ra:"15 18 23.1",dec:"-09 28 41.6",magnitude:2.56},{id:3,label:"Gamma",ra:"15 36 57.5",dec:"-14 52 31.6",magnitude:4.06},{id:4,label:"Theta",ra:"15 55 16.9",dec:"-16 48 17.5",magnitude:4.28},{id:5,label:"Upsilon",ra:"15 38 34.7",dec:"-28 13 09.8",magnitude:3.73}],edges:[[0,1],[0,2],[2,3],[3,4],[2,1],[1,5]]},Lm={stars:[{id:0,label:"Acrab",ra:"16 06 55.3",dec:"-19 52 32.6",magnitude:2.59},{id:1,label:"Dschubba",ra:"16 01 50.6",dec:"-22 41 40.4",magnitude:2.25},{id:2,label:"Pi",ra:"16 00 23.8",dec:"-26 11 14.7",magnitude:2.81},{id:3,label:"Antares",ra:"16 30 58.3",dec:"-26 29 18.3",magnitude:.97},{id:4,label:"Tau",ra:"16 37 28.1",dec:"-28 16 06.8",magnitude:2.73},{id:5,label:"Epsilon",ra:"16 51 48.9",dec:"-34 20 18.8",magnitude:2.45},{id:6,label:"Mu1",ra:"16 53 35.8",dec:"-38 05 23.0",magnitude:2.92},{id:7,label:"Zeta2",ra:"16 56 22.6",dec:"-42 24 11.1",magnitude:3.75},{id:8,label:"Eta",ra:"17 13 58.6",dec:"-43 16 14.8",magnitude:3.41},{id:9,label:"Sargas",ra:"17 39 08.6",dec:"-43 00 43.4",magnitude:1.92},{id:10,label:"Iota1",ra:"17 49 21.5",dec:"-40 08 06.6",magnitude:3.09},{id:11,label:"Kappa",ra:"17 44 14.6",dec:"-39 02 29.6",magnitude:2.31},{id:12,label:"Shaula",ra:"17 35 19.9",dec:"-37 07 15.9",magnitude:1.52},{id:13,label:"Lesath",ra:"17 32 29.4",dec:"-37 18 53.3",magnitude:2.59}],edges:[[0,3],[1,3],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[11,12]]},Pm={stars:[{id:0,label:"51",ra:"17 22 58.0",dec:"-23 58 57.0",magnitude:4.78},{id:1,label:"Sabik",ra:"17 11 50.2",dec:"-15 45 26.7",magnitude:2.44},{id:2,label:"Zeta",ra:"16 38 33.8",dec:"-10 37 12.4",magnitude:2.56},{id:3,label:"Yed",ra:"16 19 40.3",dec:"-04 45 23.3",magnitude:3.38},{id:4,label:"Kappa",ra:"16 58 52.5",dec:"09 19 55.5",magnitude:3.36},{id:5,label:"Resalhague",ra:"17 36 06.9",dec:"12 32 15.6",magnitude:2.13},{id:6,label:"Cabalrai",ra:"17 44 43.7",dec:"04 33 12.4",magnitude:2.92},{id:7,label:"Gaia DR2",ra:"15 50 57.4",dec:"-03 30 35.9",magnitude:3.33},{id:8,label:"Epsilon",ra:"15 52 05.6",dec:"04 23 55.1",magnitude:3.75},{id:9,label:"Unukalhai",ra:"15 45 31.8",dec:"06 20 34.7",magnitude:2.8},{id:10,label:"Delta A",ra:"15 36 01.6",dec:"10 27 03.7",magnitude:3.86},{id:11,label:"Beta",ra:"15 47 22.3",dec:"15 20 20.6",magnitude:3.67},{id:12,label:"Gamma",ra:"15 57 38.2",dec:"15 34 31.3",magnitude:3.94},{id:13,label:"Kappa",ra:"15 49 53.7",dec:"18 03 34.6",magnitude:4.19},{id:14,label:"Nu",ra:"17 22 15.5",dec:"-12 52 26.5",magnitude:4.34},{id:15,label:"Xi",ra:"17 39 02.5",dec:"-15 24 56.5",magnitude:3.59},{id:16,label:"Omicron",ra:"17 42 50.5",dec:"-12 53 25.2",magnitude:4.25},{id:17,label:"Eta",ra:"18 22 37.2",dec:"-02 53 41.5",magnitude:3.39},{id:18,label:"Alya",ra:"18 57 28.5",dec:"04 13 59.3",magnitude:4.66}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,1],[14,15],[15,16],[16,17],[17,18],[7,8],[8,9],[9,10],[10,11],[11,12],[12,13],[13,11]]},Gm={stars:[{id:0,label:"Beta2",ra:"19 25 02.3",dec:"-44 45 00.2",magnitude:4.34},{id:1,label:"Rukbat",ra:"19 25 37.9",dec:"-40 34 00.1",magnitude:3.92},{id:2,label:"Iota",ra:"19 56 59.7",dec:"-41 48 00.9",magnitude:4.25},{id:3,label:"Theta1",ra:"20 01 22.3",dec:"-35 12 25.3",magnitude:4.28},{id:4,label:"62",ra:"20 04 12.2",dec:"-27 38 22.1",magnitude:4.44},{id:5,label:"h2",ra:"19 38 14.3",dec:"-24 49 40.7",magnitude:4.56},{id:6,label:"Tau",ra:"19 08 30.9",dec:"-27 37 59.7",magnitude:3.47},{id:7,label:"Nunki",ra:"18 56 49.9",dec:"-26 15 54.9",magnitude:2},{id:8,label:"Xi2",ra:"18 59 14.2",dec:"-21 04 26.3",magnitude:3.69},{id:9,label:"Omicron",ra:"19 06 11.7",dec:"-21 42 17.7",magnitude:3.91},{id:10,label:"43",ra:"19 19 06.6",dec:"-18 54 31.3",magnitude:5.03},{id:11,label:"Rho1",ra:"19 23 08.0",dec:"-17 48 01.9",magnitude:3.98},{id:12,label:"Eta",ra:"18 19 20.5",dec:"-36 45 10.2",magnitude:3.14},{id:13,label:"Kaus Australis",ra:"18 25 51.1",dec:"-34 22 17.9",magnitude:1.8},{id:14,label:"Ascella",ra:"19 04 13.1",dec:"-29 50 36.0",magnitude:2.61},{id:15,label:"Phi",ra:"18 47 14.1",dec:"-26 57 52.7",magnitude:3.13},{id:16,label:"Kaus Media",ra:"18 22 36.8",dec:"-29 49 00.8",magnitude:2.86},{id:17,label:"Alnsal",ra:"18 07 26.2",dec:"-30 25 23.7",magnitude:3.13},{id:18,label:"3",ra:"17 49 09.4",dec:"-27 50 24.9",magnitude:4.66},{id:19,label:"Kaus Borealis",ra:"18 29 32.0",dec:"-25 24 28.0",magnitude:2.97},{id:20,label:"Mu",ra:"18 15 16.7",dec:"-21 03 09.9",magnitude:3.86},{id:21,label:"HD 180885",ra:"19 21 20.2",dec:"-35 22 27.8",magnitude:5.53},{id:22,label:"V4089",ra:"19 35 52.0",dec:"-39 58 43.5",magnitude:5.91}],edges:[[0,1],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[12,13],[16,17],[17,18],[19,20],[7,15],[6,14],[15,19],[16,19],[14,21],[5,21],[2,22],[1,21],[21,22],[13,16],[13,17],[15,14],[15,16]]},Om={stars:[{id:0,label:"Algedi",ra:"20 19 26.8",dec:"-12 28 05.0",magnitude:3.73},{id:1,label:"Dabih",ra:"20 22 25.3",dec:"-14 42 10.1",magnitude:3.2},{id:2,label:"Psi",ra:"20 47 34.8",dec:"-25 10 49.4",magnitude:4.22},{id:3,label:"Omega",ra:"20 53 18.9",dec:"-26 49 29.2",magnitude:4.22},{id:4,label:"Theta",ra:"21 07 21.2",dec:"-17 08 01.0",magnitude:4.06},{id:5,label:"Zeta",ra:"21 28 05.7",dec:"-22 18 09.6",magnitude:3.92},{id:6,label:"Iota",ra:"21 23 38.3",dec:"-16 43 41.4",magnitude:4.44},{id:7,label:"Nashira",ra:"21 41 28.5",dec:"-16 32 58.0",magnitude:3.77},{id:8,label:"Deneb",ra:"21 48 25.1",dec:"-16 00 50.3",magnitude:2.94},{id:9,label:"Nu",ra:"20 22 03.4",dec:"-12 40 51.8",magnitude:4.72},{id:10,label:"Sigma",ra:"20 20 50.5",dec:"-19 02 25.9",magnitude:5.41}],edges:[[0,1],[1,2],[3,4],[4,1],[4,5],[5,6],[4,6],[6,7],[7,8],[1,9],[1,10]]},Rm={stars:[{id:0,label:"c2",ra:"23 10 46.4",dec:"-21 02 11.8",magnitude:3.84},{id:1,label:"Skat",ra:"22 55 58.3",dec:"-15 41 17.0",magnitude:3.28},{id:2,label:"Tua",ra:"22 50 54.6",dec:"-13 27 39.6",magnitude:4.13},{id:3,label:"Sigma",ra:"22 31 57.9",dec:"-10 33 01.7",magnitude:4.81},{id:4,label:"Ancha",ra:"22 18 09.0",dec:"-07 39 34.2",magnitude:4.31},{id:5,label:"Sadalmelik",ra:"22 07 03.9",dec:"-00 11 58.6",magnitude:3.09},{id:6,label:"Sadachbia",ra:"22 22 56.6",dec:"-01 15 44.7",magnitude:3.83},{id:7,label:"Zeta",ra:"22 30 06.8",dec:"00 06 25.3",magnitude:3.73},{id:8,label:"Eta",ra:"22 36 38.2",dec:"00 00 37.0",magnitude:4},{id:9,label:"Lambda",ra:"22 53 54.9",dec:"-07 26 50.0",magnitude:3.8},{id:10,label:"Psi1",ra:"23 17 11.7",dec:"-08 57 07.4",magnitude:4.41},{id:11,label:"b1",ra:"23 24 16.6",dec:"-19 57 51.0",magnitude:4.09},{id:12,label:"Iota",ra:"22 07 47.0",dec:"-13 44 55.3",magnitude:4.25},{id:13,label:"Sadalsuud",ra:"21 32 52.4",dec:"-05 27 43.9",magnitude:3.03},{id:14,label:"Albali",ra:"20 49 01.9",dec:"-09 24 18.4",magnitude:3.78}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[4,12],[13,14],[5,13]]},qm={stars:[{id:0,label:"Upsilon",ra:"25 20 50.0",dec:"27 23 43.0",magnitude:4.75},{id:1,label:"Sigma",ra:"25 04 10.7",dec:"31 56 17.7",magnitude:5.47},{id:2,label:"Phi",ra:"25 15 06.0",dec:"24 42 57.1",magnitude:4.81},{id:3,label:"Eta",ra:"25 32 49.0",dec:"15 28 27.7",magnitude:3.78},{id:4,label:"Omicron",ra:"25 46 42.6",dec:"09 16 58.9",magnitude:4.41},{id:5,label:"Alrescha",ra:"26 03 20.2",dec:"02 53 02.2",magnitude:3.81},{id:6,label:"Xi",ra:"25 54 50.8",dec:"03 18 37.5",magnitude:4.75},{id:7,label:"Nu",ra:"25 42 43.7",dec:"05 36 49.0",magnitude:4.56},{id:8,label:"Mu",ra:"25 31 29.4",dec:"06 16 19.8",magnitude:4.97},{id:9,label:"Epsilon",ra:"25 04 14.1",dec:"08 01 26.9",magnitude:4.41},{id:10,label:"Delta",ra:"24 49 58.4",dec:"07 43 13.8",magnitude:4.53},{id:11,label:"41",ra:"24 21 52.7",dec:"08 19 42.0",magnitude:5.53},{id:12,label:"Omega",ra:"24 00 35.3",dec:"07 00 03.0",magnitude:4.09},{id:13,label:"Iota",ra:"23 41 13.8",dec:"05 45 38.8",magnitude:4.22},{id:14,label:"Theta",ra:"23 29 13.8",dec:"06 30 54.9",magnitude:4.44},{id:15,label:"Gamma",ra:"23 18 27.4",dec:"03 25 04.4",magnitude:3.84},{id:16,label:"Kappa",ra:"23 28 12.5",dec:"01 23 29.7",magnitude:4.94},{id:17,label:"Lambda",ra:"23 43 18.9",dec:"01 55 00.3",magnitude:4.53}],edges:[[0,1],[1,2],[0,2],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[11,12],[12,13],[13,14],[14,15],[15,16],[16,17],[17,13]]},Bm={aries:Mm,taurus:Cm,gemini:Dm,cancer:Im,leo:$m,virgo:zm,libra:Tm,scorpius:Lm,ophiuchus:Pm,sagittarius:Gm,capricornus:Om,aquarius:Rm,pisces:qm};class Um{constructor(e){this.graphManager=e,this.layout=e.layout}load(e){const t=Bm[e.toLowerCase()];t?(this.graphManager.graph=Hm(e,t.stars,t.edges,this.graphManager.graphClass),this.layout.applyLayout("rotate180")):console.warn(`Constellation "${e}" not found.`)}aries(){this.load("aries")}taurus(){this.load("taurus")}gemini(){this.load("gemini")}cancer(){this.load("cancer")}leo(){this.load("leo")}virgo(){this.load("virgo")}libra(){this.load("libra")}scorpius(){this.load("scorpius")}ophiuchus(){this.load("ophiuchus")}sagittarius(){this.load("sagittarius")}capricornus(){this.load("capricornus")}aquarius(){this.load("aquarius")}pisces(){this.load("pisces")}orion(){this.load("orion")}}function jm(r=3){return Math.pow(.8,r)}function Fm(r){const[e,t,n]=r.split(" ").map(parseFloat);return(e+t/60+n/3600)*15}function Wm(r){const e=r.trim().startsWith("-")?-1:1,t=r.trim().replace("+","").replace("-","").split(" ").map(parseFloat),[n,o,a]=t;return e*(n+o/60+a/3600)}function Hm(r,e,t,n){const o=new n;return e.forEach(a=>{const u=Fm(a.ra),l=Wm(a.dec);o.addNode(a.id,{label:a.label,x:u,y:l,magnitude:a.magnitude,size:jm(a.magnitude),desc:{name:a.label,magnitude:a.magnitude,RA:Km(a.ra),DEC:a.dec}})}),t.forEach(([a,u])=>{o.mergeEdge(a,u)}),o}function Km(r){let[e=0,t=0,n=0]=r.split(" ").map(Number);n=n%60,t=t%60,e=e%24;const o=String(e).padStart(2,"0"),a=String(t).padStart(2,"0"),u=n.toFixed(1).padStart(4,"0");return[o,a,u].join(" ")}class Ym{constructor(e){this.graphManager=e,this.layout=e.layout,this.zodiac=new Um(e)}empty(e){this.graphManager.graph=it.empty(this.graphManager.graphClass,Number(e)),this.layout.applyLayout("circle")}complete(e){this.graphManager.graph=it.complete(this.graphManager.graphClass,Number(e)),this.layout.applyLayout("circle")}ladder(e){this.graphManager.graph=it.ladder(this.graphManager.graphClass,Number(e)),this.layout.applyLayout("twoLine",{line1Count:Number(e),Y:50})}completeBipartite(e,t){this.graphManager.graph=it.empty(this.graphManager.graphClass,Number(e)+Number(t));for(let n=0;n<Number(e);n++)for(let o=Number(e);o<Number(e)+Number(t);o++)this.graphManager.graph.addEdge(n,o);this.layout.applyLayout("twoLine",{line1Count:Number(e),Y:50})}cycle(e){this.graphManager.graph=it.path(this.graphManager.graphClass,Number(e)),this.graphManager.graph.addEdge(0,Number(e)-1),this.layout.applyLayout("circle")}path(e){this.graphManager.graph=it.path(this.graphManager.graphClass,Number(e)),this.layout.applyLayout("oneLine")}caveman(e,t){this.graphManager.graph=Bu.caveman(this.graphManager.graphClass,Number(e),Number(t)),this.layout.applyLayout("circle")}connectedCaveman(e,t){this.graphManager.graph=Bu.connectedCaveman(this.graphManager.graphClass,Number(e),Number(t)),this.layout.applyLayout("circle")}clusters(e,t,n){this.graphManager.graph=vo.clusters(this.graphManager.graphClass,{order:Number(e),size:Number(t),clusters:Number(n)}),this.layout.applyLayout("circle")}erdosRenyi(e,t){this.graphManager.graph=vo.erdosRenyi(this.graphManager.graphClass,{order:Number(e),probability:Number(t)}),this.layout.applyLayout("circle")}girvanNewman(e){this.graphManager.graph=vo.girvanNewman(this.graphManager.graphClass,{zOut:4}),this.layout.applyLayout("circle")}krackhardtkite(){this.graphManager.graph=Nm(this.graphManager.graphClass),this.layout.applyLayout("oneLine")}florentineFamilies(){this.graphManager.graph=vm(this.graphManager.graphClass),this.layout.applyLayout("circle")}karateClub(){this.graphManager.graph=gm(this.graphManager.graphClass),this.layout.applyLayout("circle")}}class Xm{constructor(e,t,n="mixed"){switch(this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.layout=e.layout,this.generator=new Ym(this),this.metric=new gl(this),this.limit=t,this.index=0,n){case"directed":this.graphClass=ki;break;case"undirected":this.graphClass=Ni;break;default:this.graphClass=Kt;break}this.graphIndex=0,this._graph=it.empty(this.graphClass,0),this._graph.updateAttributes(o=>({...o,label:"Graph",id:0})),this.graphs=[this._graph],this.history=[this.graphs.map(o=>o.export())],this.selectNodeIndex=0,this.selectEdgeIndex=0,this.subGraph=void 0,this.init()}init(){this.setupEventListeners()}get graph(){return this.graphs[this.graphIndex]}set graph(e){this.graphs[this.graphIndex]=e}addNode(e,t){this.graph.addNode(e,t),this.saveGraphState()}getHistory(){return this.history}getIndex(e){return this.history[e]??void 0}updateIndex(e){if(e<0)return console.log("Nothing to Undo..."),!1;if(e>=this.history.length)return console.log("Nothing to Redo..."),!1;this.index=e,this.graphs=[];for(const t of this.history[this.index]){const n=it.empty(this.graphClass,0);this.graphs.push(n.import(t))}return this.graph=this.graphs[0],!0}clearToMixed(){this.saveGraphState(),this.graph=it.empty(Kt,0),this.eventBus.emit("graph:updated",{type:"clear"}),this.graphClass=Kt}clearToUndirectedGraph(){this.saveGraphState(),this.graph=it.empty(Ni,0),this.eventBus.emit("graph:updated",{type:"clear"}),this.graphClass=Ni}clearToDigraph(){this.saveGraphState(),this.graph=it.empty(ki,0),this.eventBus.emit("graph:updated",{type:"clear"}),this.graphClass=ki}setupEventListeners(){this.eventBus.on("redo",e=>{this.updateIndex(this.index+1)&&this.eventBus.emit("graph:updated",{type:"redo"})}),this.eventBus.on("undo",e=>{this.updateIndex(this.index-1)&&this.eventBus.emit("graph:updated",{type:"undo"})})}updateNodesPostion(e,t={x:0,y:0}){this.graph.forEachNode((n,o)=>{this.graph.updateNodeAttributes(n,a=>({...a,x:e[n].x+t.x,y:e[n].y+t.y}))}),this.saveGraphState()}push(e){this.history.push(e),this.index++,this.history.length>=this.limit&&(this.history=this.history.slice(-this.limit),this.index=this.history.length-1)}saveGraphState(){this.history.length!=this.index+1&&(this.history.length=this.index+1),this.push(this.graphs.map(e=>e.export())),this.settings.saveHistory&&this.saveHistoryToLocalStorage()}makeGraphComplete(e="directed"){this.saveGraphState();for(let t=0;t<this.graph.order;t++)for(let n=t+1;n<this.graph.order;n++)e=="undirected"?this.graph.mergeUndirectedEdge(t,n):this.graph.mergeDirectedEdge(t,n);this.eventBus.emit("graph:updated",{type:"addEdge"})}dropSelectedNodesEdges(){this.saveGraphState(),this.graph.deleteSelected(),this.eventBus.emit("graph:updated",{type:"dropNodesEdges"})}connectSelectedNodes(e="directed"){this.saveGraphState(),this.graph.connectSelectedNodes(this.settings.edge_color,e),this.eventBus.emit("graph:updated",{type:"addNodesEdges"})}connectSelectedNodesInOrder(e="directed"){this.saveGraphState(),this.graph.connectSelectedNodesInOrder(this.settings.edge_color,e),this.eventBus.emit("graph:updated",{type:"addNodesEdges"})}updateSelectedNodesEdgesColor(e=!0,t=!0,n=!0,o=!0){this.saveGraphState(),this.graph.updateSelectedNodesColor(e?this.settings.node_color:!1,t?this.settings.stroke_color:!1,o?this.settings.label_color:!1),this.graph.updateSelectedEdgesColor(n?this.settings.edge_color:!1,o?this.settings.label_color:!1),this.eventBus.emit("graph:updated",{type:"updateNodesEdgesColor"})}updateSelectedName(e){this.saveGraphState(),e?this.graph.updateSelectedName(e):this.graph.updateSelectedName(""),this.eventBus.emit("graph:updated",{type:"updateNodesNames"})}updateSelectedInfo(e){this.saveGraphState(),e?this.graph.updateSelectedInfo({"":e}):this.graph.updateSelectedInfo({}),this.eventBus.emit("graph:updated",{type:"updateNodesInfo"})}updateSelectedWeight(e){this.saveGraphState();const t=parseFloat(e);t?this.graph.updateSelectedWeight(t):this.graph.updateSelectedWeight(void 0),this.eventBus.emit("graph:updated",{type:"updateEdgeWeight"})}deselectAll(){this.deselectAllNode(),this.deselectAllEdge()}deselectAllNode(){this.graph.updateEachNodeAttributes((e,t)=>({...t,selected:!1})),this.app.rect.scale.active=!1,this.eventBus.emit("graph:updated",{type:"unselect"})}deselectAllEdge(){this.graph.updateEachEdgeAttributes((e,t)=>({...t,selected:!1})),this.app.rect.scale.active=!1,this.eventBus.emit("graph:updated",{type:"unselect"})}selectAll(){this.selectAllNode(),this.selectAllEdge()}selectAllEdge(){this.graph.updateEachEdgeAttributes((e,t)=>({...t,selected:t.id+1})),this.eventBus.emit("graph:updated",{type:"select"})}selectAllNode(){this.graph.updateEachNodeAttributes((e,t)=>({...t,selected:t.id+1})),this.eventBus.emit("graph:updated",{type:"select"})}selectNode(e){this.graph.selectNode(e),this.eventBus.emit("graph:updated",{type:"select"})}selectNextNode(){this.app.keyHandler.isShiftHold()||this.deselectAllNode(),this.selectNodeIndex=pn(this.selectNodeIndex+1,this.graph.order);const e=this.graph.nodes()[this.selectNodeIndex];this.graph.selectNode(e),this.eventBus.emit("graph:updated",{type:"select"})}selectPerviousNode(){this.app.keyHandler.isShiftHold()||this.deselectAllNode(),this.selectNodeIndex=pn(this.selectNodeIndex-1,this.graph.order);const e=this.graph.nodes()[this.selectNodeIndex];this.graph.selectNode(e),this.eventBus.emit("graph:updated",{type:"select"})}selectNextEdge(){this.app.keyHandler.isShiftHold()||this.deselectAllEdge(),this.selectEdgeIndex=pn(this.selectEdgeIndex+1,this.graph.size);const e=this.graph.edges()[this.selectEdgeIndex];this.graph.selectEdge(e),this.eventBus.emit("graph:updated",{type:"select"})}selectPerviousEdge(){this.app.keyHandler.isShiftHold()||this.deselectAllEdge(),this.selectEdgeIndex=pn(this.selectEdgeIndex+1,this.graph.size);const e=this.graph.edges()[this.selectEdgeIndex];this.graph.selectEdge(e),this.eventBus.emit("graph:updated",{type:"select"})}copySubgraph(){this.saveGraphState(),this.subGraph=this.graph.copySubgraph()}cutSubgraph(){this.saveGraphState(),this.subGraph=this.graph.cutSubgraph()}pasteSubgraph(e={x:150,y:100}){this.saveGraphState(),this.graph.pasteSubgraph(this.subGraph,e),this.eventBus.emit("graph:updated",{type:"pasteSubgraph"})}reverseGraph(){if(this.graph.type=="directed"){this.saveGraphState();const e=cr.reverse(this.graph);this.graph.replace(e),this.eventBus.emit("graph:updated",{type:"reverseGraph"})}}toDirectedGraph(){if(this.graph.type!=="directed"){this.saveGraphState();const e=cr.toDirected(this.graph);this.clearToDigraph(),this.graph.replace(e),this.eventBus.emit("updateSetting",{key:"type",value:"directed"}),this.eventBus.emit("graph:updated",{type:"toDirectedGraph"})}}toMixedGraph(){if(this.graph.type!=="mixed"){this.saveGraphState();const e=cr.toMixed(this.graph);this.clearToMixed(),this.graph.replace(e),this.eventBus.emit("updateSetting",{key:"type",value:"mixed"}),this.eventBus.emit("graph:updated",{type:"toMixedGraph"})}}toUndirectedGraph(){if(this.graph.type!=="undirected"){this.saveGraphState();const e=cr.toUndirected(this.graph);this.clearToUndirectedGraph(),this.graph.replace(e),this.eventBus.emit("updateSetting",{key:"type",value:"undirected"}),this.eventBus.emit("graph:updated",{type:"toUndirectedGraph"})}}toWeighted(){this.saveGraphState(),this.graph.updateEachEdgeAttributes((e,t)=>({...t,weight:1})),this.eventBus.emit("graph:updated",{type:"toWeighted"})}toUnweighted(){this.saveGraphState(),this.graph.updateEachEdgeAttributes((e,t)=>({...t,weight:void 0})),this.eventBus.emit("graph:updated",{type:"toUnweighted"})}saveHistoryToLocalStorage(){if(!this.validateHistory(this.history))return console.warn("Cannot save: history data is invalid."),!1;try{const e=JSON.stringify(this.history);return localStorage.setItem("graphStudio-history",e),!0}catch(e){return console.error("Failed to save history to local storage:",e),!1}}loadHitoryFromLocalStorage(){const e=localStorage.getItem("graphStudio-history");if(e)try{const t=JSON.parse(e);if(this.validateHistory(t))return this.history=t,this.updateIndex(this.history.length-1),!0}catch{console.warn("Invalid JSON format in localStorage.")}}cleanLocalStorage(){localStorage.removeItem("graphStudio-history")}validateHistory(e){if(!Array.isArray(e))return console.error("Graph data must be an array."),!1;for(const t of e){const n=t[0];if(!n)return console.error(`Graph at index ${i} is missing.`),!1;if(!Array.isArray(n.nodes))return console.error(`Graph at index ${i} has invalid or missing nodes.`),!1;for(const o of n.nodes){if(typeof o.key!="string")return console.error(`Node missing or invalid key at graph ${i}.`),!1;if(typeof o.attributes!="object"||o.attributes===null)return console.error(`Node ${o.key} missing attributes at graph ${i}.`),!1;if(!("id"in o.attributes))return console.error(`Node ${o.key} missing id at graph ${i}.`),!1}if(!Array.isArray(n.edges))return console.error(`Graph at index ${i} has invalid or missing edges.`),!1;for(const o of n.edges){if(typeof o.key!="string")return console.error(`Edge missing or invalid key at graph ${i}.`),!1;if(typeof o.source!="string"||typeof o.target!="string")return console.error(`Edge ${o.key} missing or invalid source/target at graph ${i}.`),!1;if(typeof o.attributes!="object"||o.attributes===null)return console.error(`Edge ${o.key} missing attributes at graph ${i}.`),!1}}return!0}}const Vm="Shortcuts",Qm={n:{desc:"New graph",action:"new-mixed-btn"},o:{desc:"Import graph",action:"import-graph"},s:{desc:"Scale",action:"toggle-scale-btn",value:!0},u:{desc:"Undo",action:"undo-btn"},d:{desc:"Delete",action:"remove-selection-btn"},c:{desc:"Update color",action:"color-selection-btn"},e:{desc:"Add edge",action:"add-edge-btn"},"alt+e":{desc:"Add edge",action:"add-edge-in-order-btn"},a:{desc:"All node info",action:"all-node-info-btn"},q:{desc:"Clear panel",action:"clear-info-panel-btn"},y:{desc:"Copy",action:"copy-subgraph"},x:{desc:"Cut",action:"cut-subgraph"},p:{desc:"Paste",action:"paste-subgraph"},r:{desc:"Rename",action:"rename-btn"},i:{desc:"Info",action:"desc-btn"},w:{desc:"weight",action:"weight-btn"},f:{desc:"Force Simulation",action:"toggle-force-btn",value:!0},t:{desc:"Tree",action:"toggle-tree-btn",value:!0},F5:{desc:"Reload",action:"reload"},ArrowUp:{desc:"Select all node",action:"select-all-node"},ArrowDown:{desc:"Deselect all node",action:"deselect-all-node"},ArrowRight:{desc:"Select next node",action:"select-next-node"},ArrowLeft:{desc:"Select previous node",action:"select-pervious-node"},"shift+ArrowRight":{desc:"Select next node",action:"select-next-node"},"shift+ArrowLeft":{desc:"Select previous node",action:"select-pervious-node"},shift:{desc:"Tree",action:"toggle-select-btn",value:!0},alt:{desc:"Component",action:"toggle-component-btn",value:!0},ctrl:{desc:"Panning",action:"toggle-panning-btn",value:!0},"alt+a":{desc:"All edge info",action:"all-edge-info-btn"},"alt+ArrowUp":{desc:"Select all edge",action:"select-all-edge"},"alt+ArrowDown":{desc:"Deselect all edge",action:"deselect-all-edge"},"alt+ArrowRight":{desc:"Select next edge",action:"select-next-edge"},"alt+ArrowLeft":{desc:"Select previous edge",action:"select-pervious-edge"},"shift+alt+ArrowRight":{desc:"Select next edge",action:"select-next-edge"},"shift+alt+ArrowLeft":{desc:"Select previous edge",action:"select-pervious-edge"},"ctrl+r":{desc:"Redo",action:"redo-btn"},"ctrl+s":{desc:"Export graph",action:"export-graph"},C:{desc:"Complete",action:"complete-btn"},"alt+C":{desc:"Complete",action:"complete-directed-btn"},O:{desc:"Organize circle",action:"organize-circle"},E:{desc:"Add directed edge",action:"add-directed-edge-btn"},"alt+E":{desc:"Add directed edge",action:"add-directed-edge-in-order-btn"},P:{desc:"Export PNG",action:"export-png"},"shift+C":{desc:"Complete",action:"complete-btn"},"shift+alt+C":{desc:"Complete",action:"complete-directed-btn"},"shift+O":{desc:"Organize circle",action:"organize-circle"},"shift+alt+E":{desc:"Add directed edge",action:"add-directed-edge-in-order-btn"},"shift+E":{desc:"Add directed edge",action:"add-directed-edge-btn"},"shift+P":{desc:"Export PNG",action:"export-png"},space:{desc:"Home",action:{c:{desc:"+ Color",action:{c:{desc:"Color Picker",action:"color-picker-btn"},n:{desc:"Update Node Color",action:"update-node-color"},s:{desc:"Update Stroke Color",action:"update-stroke-color"},e:{desc:"Update Edge Color",action:"update-edge-color"},l:{desc:"Update Label Color",action:"update-label-color"}}},n:{desc:"+ New Graph",action:{m:{desc:"Mixed Graph",action:"new-mixed-btn"},d:{desc:"Directed Graph",action:"new-digraph-btn"},u:{desc:"Undirected Graph",action:"new-undirected-graph-btn"}}},"⇒":{desc:"Next Node (Alt for Edge)",action:""},"⇐":{desc:"Pervious Node (Alt for Edge)",action:""},"⇑":{desc:"Select all Nodes (Alt for Edges)",action:""},"⇓":{desc:"Deselect all Nodes (Alt for Edges)",action:""}}}},An={desc:Vm,action:Qm},qe=document;class Zm{constructor(e){this.app=e,this.eventBus=e.eventBus,this.eventKeyMap={AltRight:"alt",ControlRight:"ctrl",ShiftRight:"shift",AltLeft:"alt",ControlLeft:"ctrl",ShiftLeft:"shift",Space:"space"},this.pressedKeys=new Set,this.lastChord=An.action.space.action,this.modalChord=qe.querySelector(".modal-chord"),this.inputModal=qe.querySelector(".modal-input"),this._input=!1,this.header=qe.querySelector(".modal-chord .shortcut-chord .header"),this.fakeHeader=qe.querySelector(".modal-chord  .shortcut-chord-fake .header"),this._Chord=qe.querySelector(".shortcut-chord"),this.fakeChord=qe.querySelector(".shortcut-chord-fake"),this.exceptionKey=["ArrowUp","ArrowDown","arrowLeft","ArrowRight"]}init(){this.chordGenerator(this.lastChord),qe.addEventListener("keydown",t=>{if(t.repeat&&!this.exceptionKey.includes(t.key))return;const n=this.updatePressedKeys(t,"add");if(this._input){if(n==="Escape"&&this.toggleInput("rename",!1),n==="Enter"){const o=qe.querySelector(".input-chord input");this.app.menu.handleMenuAction(this._input,o.value),this.toggleInput("rename",!1)}}else t.preventDefault(),this.action(this.findKey())}),qe.addEventListener("keyup",t=>{if(t.repeat&&!this.exceptionKey.includes(t.key))return;const n=this.updatePressedKeys(t,"delete");this._input||(t.preventDefault(),this.lastChord[n]&&typeof this.lastChord[n].value=="boolean"&&this.app.menu.handleMenuAction(this.lastChord[n].action,!this.lastChord[n].value))});const e=qe.querySelectorAll(".modal, .modal-chord, .modal-input");e.length>0&&e.forEach(t=>{t.addEventListener("click",n=>{n.target===t&&(t.style.display="none",this.lastChord=An.action,this._input=!1)})})}chordGenerator(e){const t=qe.createElement("ul");for(const a in e){const u=e[a].desc,l=qe.createElement("li");l.innerHTML=`
      <span class="title">${a}</span>
      <span class="arrow">→</span>
      <span class="desc">${u}</span>
    `,t.appendChild(l)}const n=this._Chord.querySelector("ul");n&&this._Chord.removeChild(n);const o=this.fakeChord.querySelector("ul");o&&this.fakeChord.removeChild(o),this._Chord.appendChild(t),this.fakeChord.appendChild(t.cloneNode(!0))}action(e){const t=this.lastChord[e];t?typeof t.action=="string"?(this.app.menu.handleMenuAction(t.action,t.value),this.lastChord=An.action,this.toggleChord(!1)):(this.lastChord=t.action,this.chordGenerator(this.lastChord),this.toggleChord(!0)):(this.toggleChord(!1),this.lastChord=An.action)}toggleChord(e=!0){e?this.modalChord.style.display="flex":this.modalChord.style.display="none"}toggleInput(e="rename",t=!0){const n=qe.querySelector(".input-chord .header"),o=qe.querySelector(".input-chord input");switch(e){case"rename":n.textContent="Rename",o.name="rename",o.placeholder="Enter New Name ...";break;case"desc":n.textContent="Description",o.name="desc",o.placeholder="Enter New Description ...";break;case"weight":n.textContent="Weight",o.name="weight",o.placeholder="Enter New Weight ...";break}t?(this.inputModal.style.display="flex",o.focus(),this._input=e):(this.inputModal.style.display="none",this._input=!1),setTimeout(()=>{o.value=""},1)}findKey(){return Object.keys(this.lastChord).find(n=>{const o=n.split("+");return this.isCombo(...o)})}isCombo(...e){return e.every(t=>this.pressedKeys.has(t))&&this.pressedKeys.size===e.length}updatePressedKeys(e,t="add"){const n=this.eventKeyMap[e.code]||e.key;return t==="add"&&n!=="meta"?this.pressedKeys.add(n):this.pressedKeys.delete(n),n}isShiftHold(){return this.pressedKeys.has("shift")}}var Ft;const lr=class lr{constructor(e){Xa(this,Ft,!0);if(this.app=e,this.eventBus=e.eventBus,lr.instance)return lr.instance;lr.instance=this,this.debounceTimer=null,this.defaultSettings={background_color:"#ffffff",colorPicker:!1,component:!1,console_panel:!0,directed:!0,directed_edge:!0,edgeLabel:!0,edge_color:"#4682b4",edge_size:2,forceSimulation:!0,grid:20,type:"mixed",grid_color:"#00000020",info_panel:!0,label_color:"#000000",label_pos:{x:0,y:0},label_size:15,node_color:"#ffffff",node_radius:40,panning:!1,scale:!1,select:!1,stroke_color:"#4682b4",stroke_size:2,tools_panel:!0,tree:!0,vertexLabel:!0,weightLabel:!0,saveHistory:!0,historyLimit:100},this.nightSkyTheme={background_color:"#0d1b2a",edge_color:"#60a5fa",edge_size:1,forceSimulation:!1,grid_color:"#ffffff10",label_color:"#d1d5db",label_pos:{x:-20,y:-20},node_color:"#ffffff",node_radius:10,stroke_color:"#ffffff",stroke_size:0},this.settings=this.loadFromLocalStorage(),this.registerEventListeners()}init(){Lg(this.settings,this.app.canvas)}registerEventListeners(){this.eventBus.on("updateSetting",e=>{const{key:t,value:n}=e.detail;if(this.setSetting(t,n),t=="grid"){const o=document.documentElement;document.querySelector(".container").classList.toggle("grid-hidden",this.settings.grid<=2),o.style.setProperty("--grid-size",`${this.settings.grid}px`)}else t&&n!==void 0&&this.eventBus.emit("graph:updated",{type:t})}),this.eventBus.on("updateAllSettings",e=>{const t=e.detail;t&&typeof t=="object"&&this.setAllSettings(t)}),this.eventBus.on("resetSettings",()=>{this.resetToDefault()}),this.eventBus.on("toggleSetting",e=>{const{key:t,value:n}=e.detail;t&&(this.toggleSetting(t,n),(t=="vertexLabel"||t=="directed_edge"||t=="edgeLabel"||t=="weightLabel")&&this.eventBus.emit("graph:updated",{type:"vertexLabel"}))})}loadFromLocalStorage(){const e=localStorage.getItem("appSettings");if(e)try{const t=JSON.parse(e);return this.validateSettings(t)}catch{console.warn("Invalid settings in localStorage. Using defaults.")}return{...this.defaultSettings}}saveToLocalStorage(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{localStorage.setItem("appSettings",JSON.stringify(this.settings)),console.log("Settings saved to localStorage"),this.eventBus.emit("settingsChanged",this.getAllSettings())},500)}resetToDefault(){this.setAllSettings(this.defaultSettings)}getSetting(e){return this.settings[e]}getAllSettings(){return{...this.settings}}setSetting(e,t){e in this.settings?this.settings[e]!==t&&(this.settings[e]=t,this.eventBus.emit("settingChanged",{key:e,value:t}),cn(this,Ft)&&this.saveToLocalStorage()):console.warn(`Setting "${e}" does not exist.`)}setAllSettings(e){Object.keys(e).forEach(t=>{t in this.settings&&(this.settings[t]=e[t])}),this.eventBus.emit("settingsChanged",this.getAllSettings()),cn(this,Ft)&&this.saveToLocalStorage(),this.init(),this.app.drawGraph()}toggleSetting(e,t=null){const n=["scale","panning","select","component"];e in this.settings&&typeof this.settings[e]=="boolean"?(t===null?this.settings[e]=!this.settings[e]:this.settings[e]=t,n.includes(e)&&n.forEach(o=>{o!=e&&this.settings[e]&&(this.settings[o]=!1)}),(e==="component"&&this.settings.component||e==="scale"&&this.settings.scale||e==="panning"&&this.settings.panning)&&(this.settings.forceSimulation=!1,this.eventBus.emit("settingToggled",{key:"forceSimulation",value:this.settings.forceSimulation})),e==="forceSimulation"&&this.settings.forceSimulation&&(this.settings.component=!1,this.settings.scale=!1,this.settings.panning=!1),this.eventBus.emit("settingToggled",{key:e,value:this.settings[e]}),cn(this,Ft)&&t===null&&this.saveToLocalStorage(),this.init(),this.app.widget.init()):console.warn(`Setting "${e}" does not exist or is not a boolean.`)}setAutoSave(e){Va(this,Ft,e)}validateSettings(e){return Object.keys(this.defaultSettings).reduce((t,n)=>(t[n]=e&&e.hasOwnProperty(n)?e[n]:this.defaultSettings[n],t),{})}loadNightSkyTheme(){this.setAllSettings(this.nightSkyTheme)}};Ft=new WeakMap,ze(lr,"instance",null);let Ho=lr;const fe=document;class Jm{constructor(e,t,n="menu-bar"){if(this.app=e,this.eventBus=e.eventBus,this.graphManager=e.graphManager,this.appSettings=e.appSettings,this.layout=e.layout,this.menuData=t,this.container=fe.getElementById(n),!this.container){console.error("Menu container not found!");return}this.spaceEvent=new KeyboardEvent("keydown",{key:" ",code:"Space",keyCode:32,which:32,bubbles:!0})}init(){this.renderMenu(),this.attachEventListeners()}renderMenu(){this.container.innerHTML="";const e=fe.createElement("ul");this.menuData.forEach(t=>{const n=this.createMenu(t);e.appendChild(n)}),this.container.appendChild(e)}createMenu(e){const t=fe.createElement("li");if(e.id&&(t.id=e.id),e.title&&(t.textContent=e.title),e.submenu){const n=this.createSubmenu(e.submenu);t.appendChild(n)}return t}createSubmenu(e){const t=fe.createElement("ul");return e.forEach(n=>{if(n.type==="divider"){t.appendChild(fe.createElement("hr"));return}const o=fe.createElement("li");if(n.id&&(o.id=n.id),n.title){const a=fe.createElement("label");if(a.textContent=n.title,n.link){const u=fe.createElement("a");u.href=n.link,u.target="_blank",n.label?u.textContent=n.label:(u.textContent="?",u.classList.add("border")),a.insertBefore(u,a.firstChild)}o.appendChild(a)}if(n.shortcut){const a=fe.createElement("span");a.textContent=n.shortcut,o.appendChild(a)}if("check"in n&&!n.shortcut){const a=fe.createElement("span");a.innerHTML="&#10004;",a.classList.add("check"),n.check||a.classList.add("hidden"),o.appendChild(a)}if(n.input)if(n.id==="import-graph")o.appendChild(this.createInput(n.input[0]));else{const a=fe.createElement("div");n.input.forEach(u=>{a.appendChild(this.createInput(u))}),o.appendChild(a)}n.name&&o.setAttribute("name",n.name),n.submenu&&o.appendChild(this.createSubmenu(n.submenu)),t.appendChild(o)}),t}createInput(e){const t=fe.createElement("input");return t.type=e.type||"text",t.id=e.id,"hidden"in e&&(t.hidden=e.hidden),e.name&&(t.name=e.name),e.placeholder&&(t.placeholder=e.placeholder),e.required&&(t.required=!0),["number","range","date"].includes(t.type)&&(e.min!==void 0&&(t.min=e.min),e.max!==void 0&&(t.max=e.max),e.step!==void 0&&(t.step=e.step)),e.value!==void 0&&(e.type==="checkbox"||e.type==="radio"?t.checked=e.value:t.value=e.value),t}handleMenuAction(e,t){const n={"new-mixed-btn":()=>{this.graphManager.clearToMixed(),this.eventBus.emit("updateSetting",{key:"type",value:"mixed"})},"new-digraph-btn":()=>{this.graphManager.clearToDigraph(),this.eventBus.emit("updateSetting",{key:"type",value:"directed"})},"new-undirected-graph-btn":()=>{this.graphManager.clearToUndirectedGraph(),this.eventBus.emit("updateSetting",{key:"type",value:"undirected"})},"import-graph":()=>this.eventBus.emit("import"),"export-graph":()=>this.eventBus.emit("export",{type:"json"}),"export-png":()=>this.eventBus.emit("export",{type:"png"}),"default-settings-btn":()=>this.appSettings.resetToDefault(),"sky-night-theme-btn":()=>this.appSettings.loadNightSkyTheme(),reload:()=>location.reload(),"add-edge-btn":()=>this.graphManager.connectSelectedNodes("undirected"),"add-edge-in-order-btn":()=>this.graphManager.connectSelectedNodesInOrder("undirected"),"add-directed-edge-btn":()=>this.graphManager.connectSelectedNodes("directed"),"add-directed-edge-in-order-btn":()=>this.graphManager.connectSelectedNodesInOrder("directed"),"remove-selection-btn":()=>this.graphManager.dropSelectedNodesEdges(),"color-selection-btn":()=>this.graphManager.updateSelectedNodesEdgesColor(!0,!0,!0,!0),"organize-circle":()=>this.layout.applyLayout("circle"),"complete-btn":()=>this.graphManager.makeGraphComplete("undirected"),"complete-directed-btn":()=>this.graphManager.makeGraphComplete("directed"),"node-color":()=>this.eventBus.emit("updateSetting",{key:"node_color",value:t}),"edge-color":()=>this.eventBus.emit("updateSetting",{key:"edge_color",value:t}),"label-color":()=>this.eventBus.emit("updateSetting",{key:"label_color",value:t}),"stroke-color":()=>this.eventBus.emit("updateSetting",{key:"stroke_color",value:t}),"background-color":()=>{fe.querySelector(".container").style.backgroundColor=t,this.eventBus.emit("updateSetting",{key:"background_color",value:t})},"grid-color":()=>{fe.documentElement.style.setProperty("--grid-color",t),this.eventBus.emit("updateSetting",{key:"grid_color",value:t})},rename:()=>this.graphManager.updateSelectedName(t),"rename-btn":()=>this.app.keyHandler.toggleInput("rename"),desc:()=>this.graphManager.updateSelectedInfo(t),"desc-btn":()=>this.app.keyHandler.toggleInput("desc"),weight:()=>this.graphManager.updateSelectedWeight(t),"weight-btn":()=>this.app.keyHandler.toggleInput("weight"),"redo-btn":()=>this.eventBus.emit("redo"),"undo-btn":()=>this.eventBus.emit("undo"),"panel-btn":()=>this.eventBus.emit("toggleSetting",{key:"info_panel"}),"tools-btn":()=>this.eventBus.emit("toggleSetting",{key:"tools_panel"}),"shortcut-chord-btn":()=>fe.dispatchEvent(this.spaceEvent),"component-btn":()=>this.eventBus.emit("toggleSetting",{key:"component"}),"scale-btn":()=>this.eventBus.emit("toggleSetting",{key:"scale"}),"tree-btn":()=>this.eventBus.emit("toggleSetting",{key:"tree"}),"force-btn":()=>this.eventBus.emit("toggleSetting",{key:"forceSimulation"}),"panning-btn":()=>this.eventBus.emit("toggleSetting",{key:"panning"}),"select-btn":()=>this.eventBus.emit("toggleSetting",{key:"select"}),"toggle-component-btn":()=>this.eventBus.emit("toggleSetting",{key:"component",value:t}),"toggle-scale-btn":()=>this.eventBus.emit("toggleSetting",{key:"scale",value:t}),"toggle-tree-btn":()=>this.eventBus.emit("toggleSetting",{key:"tree",value:t}),"toggle-force-btn":()=>this.eventBus.emit("toggleSetting",{key:"forceSimulation",value:t}),"toggle-panning-btn":()=>this.eventBus.emit("toggleSetting",{key:"panning",value:t}),"toggle-select-btn":()=>this.eventBus.emit("toggleSetting",{key:"select",value:t}),"color-picker-btn":()=>this.eventBus.emit("toggleSetting",{key:"colorPicker"}),"vertex-label":()=>this.eventBus.emit("toggleSetting",{key:"vertexLabel"}),"edge-label":()=>this.eventBus.emit("toggleSetting",{key:"edgeLabel"}),"weight-label":()=>this.eventBus.emit("toggleSetting",{key:"weightLabel"}),"vertex-size-1":()=>this.eventBus.emit("updateSetting",{key:"node_radius",value:t}),"edge-size-1":()=>this.eventBus.emit("updateSetting",{key:"edge_size",value:t}),"label-size-1":()=>this.eventBus.emit("updateSetting",{key:"label_size",value:t}),"grid-size-1":()=>this.eventBus.emit("updateSetting",{key:"grid",value:t}),"stroke-size-1":()=>this.eventBus.emit("updateSetting",{key:"stroke_size",value:t}),"save-history":()=>this.eventBus.emit("toggleSetting",{key:"saveHistory"}),"clear-histoory-btn":()=>this.graphManager.cleanLocalStorage(),"history-limit-1":()=>{this.graphManager.limit=t,this.eventBus.emit("updateSetting",{key:"historyLimit",value:t})},"basic-info-btn":()=>this.graphManager.metric.basicInfo(),"list-degrees-btn":()=>this.graphManager.metric.degreeSequesnce(),"components-btn":()=>this.graphManager.metric.countComponents(),"neighbors-btn":()=>this.graphManager.metric.neighbors(),"shortest-path-btn":()=>this.graphManager.metric.shortestPath(),"density-btn":()=>this.graphManager.metric.density(),"diameter-btn":()=>this.graphManager.metric.diameter(),"eccentricity-btn":()=>this.graphManager.metric.eccentricity(),"simmelian-strength-btn":()=>this.graphManager.metric.simmelianStrength(),"betweenness-centrality-btn":()=>this.graphManager.metric.betweennessCentrality(),"closeness-centrality-btn":()=>this.graphManager.metric.closenessCentrality(),"degree-centrality-btn":()=>this.graphManager.metric.degreeCentrality(),"eigenvector-centrality-btn":()=>this.graphManager.metric.eigenvectorCentrality(),"pagerank-btn":()=>this.graphManager.metric.pagerank(),"edge-uniformity-btn":()=>this.graphManager.metric.edgeUniformity(),"neighborhood-preservation-btn":()=>this.graphManager.metric.neighborhoodPreservation(),"stress-btn":()=>this.graphManager.metric.stress(),"disparity-btn":()=>this.graphManager.metric.disparity(),"clear-info-panel-btn":()=>fe.querySelector("#floating-panel .body-info").innerHTML="","all-node-info-btn":()=>this.graphManager.metric.allNodeInfo(),"all-edge-info-btn":()=>this.graphManager.metric.allEdgeInfo(),empty:()=>this.graphManager.generator.empty(fe.getElementById("g-empty-1").value),"g-empty-1":()=>this.graphManager.generator.empty(t),cycle:()=>this.graphManager.generator.cycle(fe.getElementById("g-cycle-1").value),"g-cycle-1":()=>this.graphManager.generator.cycle(t),path:()=>this.graphManager.generator.path(fe.getElementById("g-path-1").value),"g-path-1":()=>this.graphManager.generator.path(t),ladder:()=>this.graphManager.generator.ladder(fe.getElementById("g-ladder-1").value),"g-ladder-1":()=>this.graphManager.generator.ladder(t),complete:()=>this.graphManager.generator.complete(fe.getElementById("g-complete-1").value),"g-complete-1":()=>this.graphManager.generator.complete(t),"complete-bipartite":()=>this.graphManager.generator.completeBipartite(fe.getElementById("g-complete-bipartite-1").value,fe.getElementById("g-complete-bipartite-2").value),"g-complete-bipartite-1":()=>this.graphManager.generator.completeBipartite(t,fe.getElementById("g-complete-bipartite-2").value),"g-complete-bipartite-2":()=>this.graphManager.generator.completeBipartite(fe.getElementById("g-complete-bipartite-1").value,t),caveman:()=>this.graphManager.generator.caveman(fe.getElementById("g-caveman-1").value,fe.getElementById("g-caveman-2").value),"g-caveman-1":()=>this.graphManager.generator.caveman(t,fe.getElementById("g-caveman-2").value),"g-caveman-2":()=>this.graphManager.generator.caveman(fe.getElementById("g-caveman-1").value,t),"connected-caveman":()=>this.graphManager.generator.connectedCaveman(fe.getElementById("g-connected-caveman-1").value,fe.getElementById("g-connected-caveman-2").value),"g-connected-caveman-1":()=>this.graphManager.generator.connectedCaveman(t,fe.getElementById("g-connected-caveman-2").value),"g-connected-caveman-2":()=>this.graphManager.generator.connectedCaveman(fe.getElementById("g-connected-caveman-1").value,t),clusters:()=>this.graphManager.generator.clusters(fe.getElementById("g-clusters-1").value,fe.getElementById("g-clusters-2").value,fe.getElementById("g-clusters-3").value),"g-clusters-1":()=>this.graphManager.generator.clusters(t,fe.getElementById("g-clusters-2").value,fe.getElementById("g-clusters-3").value),"g-clusters-2":()=>this.graphManager.generator.clusters(fe.getElementById("g-clusters-1").value,t,fe.getElementById("g-clusters-3").value),"g-clusters-3":()=>this.graphManager.generator.clusters(fe.getElementById("g-clusters-1").value,fe.getElementById("g-clusters-2").value,t),"erdos-renyi":()=>this.graphManager.generator.erdosRenyi(fe.getElementById("g-erdos-renyi-1").value,fe.getElementById("g-erdos-renyi-2").value),"g-erdos-renyi-1":()=>this.graphManager.generator.erdosRenyi(t,fe.getElementById("g-erdos-renyi-2").value),"g-erdos-renyi-2":()=>this.graphManager.generator.erdosRenyi(fe.getElementById("g-erdos-renyi-1").value,t),"griven-newmn":()=>this.graphManager.generator.girvanNewman(fe.getElementById("g-girvan-newman-1").value),"g-girvan-newman-1":()=>this.graphManager.generator.girvanNewman(t),"krackhardt-kite":()=>this.graphManager.generator.krackhardtkite(),"florentine-families":()=>this.graphManager.generator.florentineFamilies(),"karate-club":()=>this.graphManager.generator.karateClub(),aries:()=>this.graphManager.generator.zodiac.aries(),taurus:()=>this.graphManager.generator.zodiac.taurus(),gemini:()=>this.graphManager.generator.zodiac.gemini(),cancer:()=>this.graphManager.generator.zodiac.cancer(),leo:()=>this.graphManager.generator.zodiac.leo(),virgo:()=>this.graphManager.generator.zodiac.virgo(),libra:()=>this.graphManager.generator.zodiac.libra(),scorpius:()=>this.graphManager.generator.zodiac.scorpius(),ophiuchus:()=>this.graphManager.generator.zodiac.ophiuchus(),sagittarius:()=>this.graphManager.generator.zodiac.sagittarius(),capricornus:()=>this.graphManager.generator.zodiac.capricornus(),aquarius:()=>this.graphManager.generator.zodiac.aquarius(),pisces:()=>this.graphManager.generator.zodiac.pisces(),"reverse-direction":()=>this.graphManager.reverseGraph(),"to-undirected":()=>this.graphManager.toUndirectedGraph(),"to-directed":()=>this.graphManager.toDirectedGraph(),"to-mixed":()=>this.graphManager.toMixedGraph(),"to-weighted":()=>this.graphManager.toWeighted(),"to-unweighted":()=>this.graphManager.toUnweighted(),"how-to-use":()=>window.open("https://www.youtube.com/playlist?list=PLaa8UNGS4QED9DUhAZt7O963qkScAWah3","_blank"),command:()=>{fe.querySelector(".modal").style.display="flex",fe.querySelector(".modal .help-panel").style.display="block"},about:()=>window.open("http://picinfiniti.net/","_blank"),"select-all-node":()=>this.graphManager.selectAllNode(),"deselect-all-node":()=>this.graphManager.deselectAllNode(),"select-next-node":()=>this.graphManager.selectNextNode(),"select-pervious-node":()=>this.graphManager.selectPerviousNode(),"select-all-edge":()=>this.graphManager.selectAllEdge(),"deselect-all-edge":()=>this.graphManager.deselectAllEdge(),"select-next-edge":()=>this.graphManager.selectNextEdge(),"select-pervious-edge":()=>this.graphManager.selectPerviousEdge(),"copy-subgraph":()=>this.graphManager.copySubgraph(),"cut-subgraph":()=>this.graphManager.cutSubgraph(),"paste-subgraph":()=>this.graphManager.pasteSubgraph(),"update-node-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!0,!1,!1,!1),"update-stroke-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!1,!0,!1,!1),"update-edge-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!1,!1,!0,!1),"update-label-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!1,!1,!1,!0)};n[e]?n[e]():console.log(`No action defined for: ${e}`)}attachEventListeners(){fe.addEventListener("click",e=>{if(e.target.tagName==="INPUT")return;const t=e.target.closest("li");if(!t)return;const n=t.id||t.getAttribute("name");n&&this.handleMenuAction(n)}),fe.addEventListener("input",e=>{const t=e.target;if(!t||t.name=="rename"||t.name=="desc"||t.name=="weight")return;const n=t.id||t.getAttribute("name");n&&this.handleMenuAction(n,t.value)})}}const nt=document;class e0{constructor(e){this.app=e,this.eventBus=e.eventBus,this.modal=nt.querySelector(".modal"),this.rename=nt.querySelector(".rename-panel"),this.desc=nt.querySelector(".desc-panel"),this.pressedKeys=new Set,this.keySettingsMap={Shift:"select",Control:"panning",Alt:"component",Meta:"scale",f:"forceSimulation",t:"tree"}}isCombo(...e){return e.every(t=>this.pressedKeys.has(t))}init(){this.app.eventBus.on("lalayout:changedyout:changed",e=>{const{layoutType:t}=e.detail;this.app.graphManager.applyLayout(t),this.eventBus.emit("graph:updated",{type:"layout"})}),this.app.eventBus.on("graph:updated",e=>{this.app.rect.scale.active=!0,this.app.drawGraph(),["addEdges","dropNodesEdges","addNode","undo","redo","clear","import","addNodeInEdge","layout","addEdge"].includes(e.detail.type)&&this.app.updateSimulation()}),this.app.eventBus.on("simulation:toggled",e=>{}),this.app.eventBus.on("key:pressed",e=>{}),this.app.eventBus.on("settingToggled",e=>{const{key:t,value:n}=e.detail;t=="forceSimulation"&&(n?this.app.startSimulation():this.app.stopSimulation())}),this.app.eventBus.on("import",e=>{nt.getElementById("file-input").click()}),this.app.eventBus.on("export",e=>{if(e.detail.type==="json"){const t=this.app.graphManager.history,n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2)),o=nt.createElement("a");o.href=n,o.download="graph.json",nt.body.appendChild(o),o.click(),nt.body.removeChild(o)}e.detail.type==="png"&&this.app.canvas.toBlob(function(t){let n=nt.createElement("a");n.href=URL.createObjectURL(t),n.download="d3-canvas-export.png",nt.body.appendChild(n),n.click(),nt.body.removeChild(n)},"image/png")}),nt.getElementById("file-input").addEventListener("change",e=>{const t=e.target.files[0];if(t){const n=new FileReader;n.onload=o=>{const a=JSON.parse(o.target.result);console.log("Imported Data:",a),this.app.graphManager.history.push(...a),this.app.graphManager.updateIndex(this.app.graphManager.history.length-1),this.app.eventBus.emit("graph:updated",{type:"import"})},n.readAsText(t)}e.target.value=""})}}const t0=[{title:"File",id:"file",submenu:[{title:"🆕 New Graph",id:"new-mixed-btn",shortcut:"(n)"},{title:"📂 Import",id:"import-graph",shortcut:"(o)",input:[{type:"file",id:"file-input",hidden:!0}]},{title:"💾 Export",id:"export-graph",shortcut:"(Ctrl+s)"},{title:"🖼️ Export to PNG",id:"export-png",shortcut:"(P)"},{type:"divider"},{title:"⚙️ Default Setting",id:"default-settings-btn"},{title:"🌙 Sky Night",id:"sky-night-theme-btn"},{type:"divider"},{title:"🔄 Reload",id:"reload",shortcut:"(F5)"}]},{title:"Edit",id:"edit",submenu:[{title:"Organize Nodes",name:"organize-circle",shortcut:"(O)"},{title:"Complete Graph",name:"complete-btn",shortcut:"(alt-C)"},{title:"Delete",name:"remove-selection-btn",shortcut:"(d)"},{title:"Assign Color",name:"color-selection-btn",shortcut:"(c)"},{title:"Add Edge",name:"add-edge-btn",shortcut:"(alt-e)"},{title:"Add Directed Edge",name:"add-directed-edge-btn",shortcut:"(alt-E)"},{type:"divider"},{title:"Copy",name:"copy-subgraph",shortcut:"(y)"},{title:"Cut",name:"cut-subgraph",shortcut:"(x)"},{title:"Paste",name:"paste-subgraph",shortcut:"(p)"},{type:"divider"},{title:"Rename",name:"rename-btn",shortcut:"(r)"},{title:"Edit Info",name:"desc-btn",shortcut:"(i)"},{title:"Edit Weight",name:"weight-btn",shortcut:"(w)"},{type:"divider"},{title:"Undo",name:"undo-btn",shortcut:"(u)"},{title:"Redo",name:"redo-btn",shortcut:"(Ctrl+r)"}]},{title:"Settings",id:"settings",submenu:[{title:"Graph",id:"graph-settings",shortcut:">",submenu:[{title:"Vertex Label",id:"vertex-label",check:!0},{title:"Edge Label",id:"edge-label",check:!0},{title:"Weight Label",id:"weight-label",check:!0},{type:"divider"},{title:"Grid",id:"gride-size",input:[{type:"range",id:"grid-size-1",min:0,max:100,value:20}]},{title:"Node",id:"vertex-size",input:[{type:"range",id:"vertex-size-1",min:0,max:200,value:10,step:.1}]},{title:"Edge",id:"edge-size",input:[{type:"range",id:"edge-size-1",min:1,max:100,value:2}]},{title:"Label",id:"label-size",input:[{type:"range",id:"label-size-1",min:0,max:100,value:15}]},{title:"Stroke",id:"stroke-size",input:[{type:"range",id:"stroke-size-1",min:0,max:50,value:5,step:.1}]}]},{title:"View",id:"view",shortcut:">",submenu:[{title:"Info Panel",id:"panel-btn",check:!0},{title:"Tools Panel",id:"tools-btn",check:!1},{title:"Key Chord",id:"shortcut-chord-btn",shortcut:"⎵"}]},{type:"divider"},{title:"History",id:"History",shortcut:">",submenu:[{title:"History Limit",id:"history-limit",input:[{type:"number",id:"history-limit-1",min:5,max:1e4,value:5}]},{title:"Save History",id:"save-history",check:!0},{title:"Clear History",id:"clear-histoory-btn"}]}]},{title:"Tools",id:"tools",submenu:[{title:"Scale",id:"scale-btn",check:!1,shortcut:"(s)"},{title:"Panning",id:"panning-btn",check:!1,shortcut:"Ctrl"},{title:"Selecting",id:"select-btn",check:!1,shortcut:"Shift"},{title:"Component",id:"component-btn",check:!1,shortcut:"Alt"},{type:"divider"},{title:"Tree",id:"tree-btn",check:!1,shortcut:"(t)"},{title:"Force Simulation",id:"force-btn",check:!1,shortcut:"(f)"},{type:"divider"},{title:"Color Picker",id:"color-picker-btn",check:!1,shortcut:"⎵ cc"}]},{title:"Generator",id:"generator",submenu:[{title:"Classic",id:"classic",shortcut:">",submenu:[{title:"Empty",id:"empty",input:[{type:"number",id:"g-empty-1",min:1,max:500,value:5}]},{title:"Kₙ",id:"complete",link:"https://en.wikipedia.org/wiki/Complete_graph",input:[{type:"number",id:"g-complete-1",min:1,max:500,value:5}]},{title:"Kₙ,ₙ",id:"complete-bipartite",link:"https://en.wikipedia.org/wiki/Complete_bipartite_graph",input:[{type:"number",id:"g-complete-bipartite-1",min:1,max:500,value:5},{type:"number",id:"g-complete-bipartite-2",min:1,max:500,value:5}]},{title:"Pₙ",id:"path",link:"https://en.wikipedia.org/wiki/Path_graph",input:[{type:"number",id:"g-path-1",min:2,max:500,value:5}]},{title:"Cₙ",id:"cycle",link:"https://en.wikipedia.org/wiki/Cycle_graph",input:[{type:"number",id:"g-cycle-1",min:3,max:500,value:5}]},{title:"Lₙ",id:"ladder",link:"https://en.wikipedia.org/wiki/Ladder_graph",input:[{type:"number",id:"g-ladder-1",min:2,max:500,value:5}]}]},{title:"Community",id:"community",shortcut:">",submenu:[{title:"Cₙ,ₙ",id:"caveman",link:"https://mathworld.wolfram.com/CavemanGraph.html",input:[{type:"number",id:"g-caveman-1",min:1,max:500,value:5},{type:"number",id:"g-caveman-2",min:1,max:500,value:5}]},{title:"Qₙ,ₙ",id:"connected-caveman",link:"https://mathworld.wolfram.com/CavemanGraph.html",input:[{type:"number",id:"g-connected-caveman-1",min:1,max:500,value:5},{type:"number",id:"g-connected-caveman-2",min:1,max:500,value:5}]}]},{title:"Random",id:"random",shortcut:">",submenu:[{title:"Clusters",id:"clusters",input:[{type:"number",id:"g-clusters-1",min:2,max:500,value:20},{type:"number",id:"g-clusters-2",min:2,max:500,value:20},{type:"number",id:"g-clusters-3",min:2,max:500,value:10}]},{title:"erdos Renyi",id:"erdos-renyi",link:"https://en.wikipedia.org/wiki/Erd%C5%91s%E2%80%93R%C3%A9nyi_model",input:[{type:"number",id:"g-erdos-renyi-1",min:1,max:500,value:10},{type:"number",id:"g-erdos-renyi-2",min:0,max:1,step:.1,value:.5}]},{title:"Girvan Newman",id:"griven-newmn",link:"https://www.pnas.org/doi/pdf/10.1073/pnas.122653799",input:[{type:"number",id:"g-girvan-newman-1",min:1,max:500,value:5}]}]},{title:"Small",id:"small",shortcut:">",submenu:[{title:"Krackhardt kite",id:"krackhardt-kite",link:"https://en.wikipedia.org/wiki/Krackhardt_kite_graph"}]},{title:"Social",id:"social",shortcut:">",submenu:[{title:"Florentine families",id:"florentine-families"},{title:"Zachary’s karate club",id:"karate-club",link:"https://en.wikipedia.org/wiki/Zachary%27s_karate_club"}]},{type:"divider"},{title:"Zodiac",id:"zodiac",shortcut:">",submenu:[{title:"Aries",id:"aries",label:"♈",link:"https://en.wikipedia.org/wiki/Aries_(astrology)"},{title:"Taurus",id:"taurus",label:"♉",link:"https://en.wikipedia.org/wiki/Taurus_(astrology)"},{title:"Gemini",id:"gemini",label:"♊",link:"https://en.wikipedia.org/wiki/Gemini_(astrology)"},{title:"Cancer",id:"cancer",label:"♋",link:"https://en.wikipedia.org/wiki/Cancer_(astrology)"},{title:"Leo",id:"leo",label:"♌",link:"https://en.wikipedia.org/wiki/Leo_(astrology)"},{title:"Virgo",id:"virgo",label:"♍",link:"https://en.wikipedia.org/wiki/Virgo_(astrology)"},{title:"Libra",id:"libra",label:"♎",link:"https://en.wikipedia.org/wiki/Libra_(astrology)"},{title:"Scorpius",id:"scorpius",label:"♏",link:"https://en.wikipedia.org/wiki/Scorpio_(astrology)"},{title:"Ophiuchus",id:"ophiuchus",label:"⛎",link:"https://en.wikipedia.org/wiki/Ophiuchus_(astrology)"},{title:"Sagittarius",id:"sagittarius",label:"♐",link:"https://en.wikipedia.org/wiki/Sagittarius_(astrology)"},{title:"Capricornus",id:"capricornus",label:"♑",link:"https://en.wikipedia.org/wiki/Capricorn_(astrology)"},{title:"Aquarius",id:"aquarius",label:"♒",link:"https://en.wikipedia.org/wiki/Aquarius_(astrology)"},{title:"Pisces",id:"pisces",label:"♓",link:"https://en.wikipedia.org/wiki/Pisces_(astrology)"}]}]},{title:"Metrics",id:"metrics",submenu:[{title:"Basic",id:"basic",submenu:[{title:"Basic Information",id:"basic-info-btn"},{title:"Components",id:"components-btn"},{title:"Degree Sequence",id:"list-degrees-btn"},{title:"Density",id:"density-btn"},{title:"Diameter",id:"diameter-btn"}]},{title:"Centrality",id:"centrality",submenu:[{title:"Betweenness Centrality",id:"betweenness-centrality-btn"},{title:"Closeness Centrality",id:"closeness-centrality-btn"},{title:"Degree Centrality",id:"degree-centrality-btn"},{title:"Eccentricity",id:"eccentricity-btn"},{title:"Eigenvector Centrality",id:"eigenvector-centrality-btn"},{title:"PageRank",id:"pagerank-btn"}]},{title:"Layout Quality",id:"layout-quality",submenu:[{title:"Edge Uniformity",id:"edge-uniformity-btn"},{title:"Neighborhood Preservation",id:"neighborhood-preservation-btn"},{title:"Stress",id:"stress-btn"}]},{title:"Other",id:"other",submenu:[{title:"Simmelian Strength",id:"simmelian-strength-btn"},{title:"Disparity",id:"disparity-btn"}]},{type:"divider"},{title:"Neighbors",id:"neighbors-btn"},{title:"Shortest Path",id:"shortest-path-btn"},{title:"Selected Nodes Info",id:"all-node-info-btn",shortcut:"(a)"},{title:"Selected Edges Info",id:"all-edge-info-btn",shortcut:"(Alt+a)"},{type:"divider"},{title:"Clear Panel",id:"clear-info-panel-btn",shortcut:"(q)"}]},{title:"Operators",id:"help",submenu:[{title:"To Mixed",id:"to-mixed"},{title:"To Undirected",id:"to-undirected"},{title:"To Directed",id:"to-directed"},{title:"To Weighted",id:"to-weighted"},{title:"To Unweighted",id:"to-unweighted"},{type:"divider"},{title:"Reverse Direction",id:"reverse-direction"}]},{title:"Help",id:"help",submenu:[{title:"Mouse Commnads",id:"command",name:"command-btn"},{title:"How to use",id:"how-to-use"},{title:"About",id:"about",shortcut:"version: 1.4.0"}]}];var ur={},Mo,ac;function r0(){if(ac)return Mo;ac=1;function r(t){return function(n,o){return n+Math.floor(t()*(o-n+1))}}var e=r(Math.random);return e.createRandom=r,Mo=e,Mo}var Co,sc;function n0(){if(sc)return Co;sc=1;var r=r0().createRandom;function e(n){var o=r(n);return function(a){for(var u=a.length,l=u-1,f=-1;++f<u;){var h=o(f,l),p=a[h];a[h]=a[f],a[f]=p}}}var t=e(Math.random);return t.createShuffleInPlace=e,Co=t,Co}var Do,uc;function i0(){if(uc)return Do;uc=1;var r=gt(),e=xe(),t=n0(),n={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function o(w,I,z,T,R){this.wrappedCircle=R||null,this.children={},this.countChildren=0,this.id=w||null,this.next=null,this.previous=null,this.x=I||null,this.y=z||null,R?this.r=1010101:this.r=T||999}o.prototype.hasChildren=function(){return this.countChildren>0},o.prototype.addChild=function(w,I){this.children[w]=I,++this.countChildren},o.prototype.getChild=function(w){if(!this.children.hasOwnProperty(w)){var I=new o;this.children[w]=I,++this.countChildren}return this.children[w]},o.prototype.applyPositionToChildren=function(){if(this.hasChildren()){var w=this;for(var I in w.children){var z=w.children[I];z.x+=w.x,z.y+=w.y,z.applyPositionToChildren()}}};function a(w,I,z){for(var T in I.children){var R=I.children[T];R.hasChildren()?a(w,R,z):z[R.id]={x:R.x,y:R.y}}}function u(w,I){var z=w.r-I.r,T=I.x-w.x,R=I.y-w.y;return z<0||z*z<T*T+R*R}function l(w,I){var z=w.r-I.r+1e-6,T=I.x-w.x,R=I.y-w.y;return z>0&&z*z>T*T+R*R}function f(w,I){for(var z=0;z<I.length;++z)if(!l(w,I[z]))return!1;return!0}function h(w){return new o(null,w.x,w.y,w.r)}function p(w,I){var z=w.x,T=w.y,R=w.r,j=I.x,V=I.y,te=I.r,Q=j-z,H=V-T,G=te-R,B=Math.sqrt(Q*Q+H*H);return new o(null,(z+j+Q/B*G)/2,(T+V+H/B*G)/2,(B+R+te)/2)}function v(w,I,z){var T=w.x,R=w.y,j=w.r,V=I.x,te=I.y,Q=I.r,H=z.x,G=z.y,B=z.r,W=T-V,Y=T-H,F=R-te,X=R-G,J=Q-j,Z=B-j,ce=T*T+R*R-j*j,le=ce-V*V-te*te+Q*Q,he=ce-H*H-G*G+B*B,ye=Y*F-W*X,ne=(F*he-X*le)/(ye*2)-T,we=(X*J-F*Z)/ye,Se=(Y*le-W*he)/(ye*2)-R,$e=(W*Z-Y*J)/ye,Qe=we*we+$e*$e-1,Ue=2*(j+ne*we+Se*$e),Ae=ne*ne+Se*Se-j*j,ke=-(Qe?(Ue+Math.sqrt(Ue*Ue-4*Qe*Ae))/(2*Qe):Ae/Ue);return new o(null,T+ne+we*ke,R+Se+$e*ke,ke)}function m(w){switch(w.length){case 1:return h(w[0]);case 2:return p(w[0],w[1]);case 3:return v(w[0],w[1],w[2]);default:throw new Error("graphology-layout/circlepack: Invalid basis length "+w.length)}}function b(w,I){var z,T;if(f(I,w))return[I];for(z=0;z<w.length;++z)if(u(I,w[z])&&f(p(w[z],I),w))return[w[z],I];for(z=0;z<w.length-1;++z)for(T=z+1;T<w.length;++T)if(u(p(w[z],w[T]),I)&&u(p(w[z],I),w[T])&&u(p(w[T],I),w[z])&&f(v(w[z],w[T],I),w))return[w[z],w[T],I];throw new Error("graphology-layout/circlepack: extendBasis failure !")}function S(w){var I=w.wrappedCircle,z=w.next.wrappedCircle,T=I.r+z.r,R=(I.x*z.r+z.x*I.r)/T,j=(I.y*z.r+z.y*I.r)/T;return R*R+j*j}function _(w,I){var z=0,T=w.slice(),R=w.length,j=[],V,te;for(I(T);z<R;)V=T[z],te&&l(te,V)?++z:(j=b(j,V),te=m(j),z=0);return te}function N(w,I,z){var T=w.x-I.x,R,j,V=w.y-I.y,te,Q,H=T*T+V*V;H?(j=I.r+z.r,j*=j,Q=w.r+z.r,Q*=Q,j>Q?(R=(H+Q-j)/(2*H),te=Math.sqrt(Math.max(0,Q/H-R*R)),z.x=w.x-R*T-te*V,z.y=w.y-R*V+te*T):(R=(H+j-Q)/(2*H),te=Math.sqrt(Math.max(0,j/H-R*R)),z.x=I.x+R*T-te*V,z.y=I.y+R*V+te*T)):(z.x=I.x+z.r,z.y=I.y)}function M(w,I){var z=w.r+I.r-1e-6,T=I.x-w.x,R=I.y-w.y;return z>0&&z*z>T*T+R*R}function k(w,I){var z=w.length;if(z===0)return 0;var T,R,j,V,te,Q,H,G,B,W;if(T=w[0],T.x=0,T.y=0,z<=1)return T.r;if(R=w[1],T.x=-R.r,R.x=T.r,R.y=0,z<=2)return T.r+R.r;j=w[2],N(R,T,j),T=new o(null,null,null,null,T),R=new o(null,null,null,null,R),j=new o(null,null,null,null,j),T.next=j.previous=R,R.next=T.previous=j,j.next=R.previous=T;e:for(Q=3;Q<z;++Q){j=w[Q],N(T.wrappedCircle,R.wrappedCircle,j),j=new o(null,null,null,null,j),H=R.next,G=T.previous,B=R.wrappedCircle.r,W=T.wrappedCircle.r;do if(B<=W){if(M(H.wrappedCircle,j.wrappedCircle)){R=H,T.next=R,R.previous=T,--Q;continue e}B+=H.wrappedCircle.r,H=H.next}else{if(M(G.wrappedCircle,j.wrappedCircle)){T=G,T.next=R,R.previous=T,--Q;continue e}W+=G.wrappedCircle.r,G=G.previous}while(H!==G.next);for(j.previous=T,j.next=R,T.next=R.previous=R=j,V=S(T);(j=j.next)!==R;)(te=S(j))<V&&(T=j,V=te);R=T.next}T=[R.wrappedCircle],j=R;for(var Y=1e4;(j=j.next)!==R&&--Y!==0;)T.push(j.wrappedCircle);for(j=_(T,I),Q=0;Q<z;++Q)T=w[Q],T.x-=j.x,T.y-=j.y;return j.r}function $(w,I){var z=0;if(w.hasChildren()){for(var T in w.children){var R=w.children[T];R.hasChildren()&&(R.r=$(R,I))}z=k(Object.values(w.children),I)}return z}function E(w,I){$(w,I);for(var z in w.children){var T=w.children[z];T.applyPositionToChildren()}}function C(w,I,z){if(!e(I))throw new Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");z=r(z,n);var T={},R={},j=I.nodes(),V=z.center,te=z.hierarchyAttributes,Q=t.createShuffleInPlace(z.rng),H=z.scale,G=new o;I.forEachNode(function(J,Z){var ce=Z.size?Z.size:1,le=new o(J,null,null,ce),he=G;te.forEach(function(ye){var ne=Z[ye];he=he.getChild(ne)}),he.addChild(J,le)}),E(G,Q),a(I,G,T);var B=j.length,W,Y,F;for(F=0;F<B;F++){var X=j[F];W=V+H*T[X].x,Y=V+H*T[X].y,R[X]={x:W,y:Y},w&&(I.setNodeAttribute(X,z.attributes.x,W),I.setNodeAttribute(X,z.attributes.y,Y))}return R}var O=C.bind(null,!1);return O.assign=C.bind(null,!0),Do=O,Do}var Io,cc;function o0(){if(cc)return Io;cc=1;var r=gt(),e=xe(),t={dimensions:["x","y"],center:.5,scale:1};function n(a,u,l){if(!e(u))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");l=r(l,t);var f=l.dimensions;if(!Array.isArray(f)||f.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var h=l.center,p=l.scale,v=Math.PI*2,m=(h-.5)*p,b=u.order,S=f[0],_=f[1];function N($,E){return E[S]=p*Math.cos($*v/b)+m,E[_]=p*Math.sin($*v/b)+m,E}var M=0;if(!a){var k={};return u.forEachNode(function($){k[$]=N(M++,{})}),k}u.updateEachNodeAttributes(function($,E){return N(M++,E),E},{attributes:f})}var o=n.bind(null,!1);return o.assign=n.bind(null,!0),Io=o,Io}var $o,lc;function a0(){if(lc)return $o;lc=1;var r=gt(),e=xe(),t={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function n(a,u,l){if(!e(u))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");l=r(l,t);var f=l.dimensions;if(!Array.isArray(f)||f.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var h=f.length,p=l.center,v=l.rng,m=l.scale,b=(p-.5)*m;function S(N){for(var M=0;M<h;M++)N[f[M]]=v()*m+b;return N}if(!a){var _={};return u.forEachNode(function(N){_[N]=S({})}),_}u.updateEachNodeAttributes(function(N,M){return S(M),M},{attributes:f})}var o=n.bind(null,!1);return o.assign=n.bind(null,!0),$o=o,$o}var zo,dc;function s0(){if(dc)return zo;dc=1;var r=gt(),e=xe(),t=Math.PI/180,n={dimensions:["x","y"],centeredOnZero:!1,degrees:!1};function o(u,l,f,h){if(!e(l))throw new Error("graphology-layout/rotation: the given graph is not a valid graphology instance.");h=r(h,n),h.degrees&&(f*=t);var p=h.dimensions;if(!Array.isArray(p)||p.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");if(l.order===0)return u?void 0:{};var v=p[0],m=p[1],b=0,S=0;if(!h.centeredOnZero){var _=1/0,N=-1/0,M=1/0,k=-1/0;l.forEachNode(function(w,I){var z=I[v],T=I[m];z<_&&(_=z),z>N&&(N=z),T<M&&(M=T),T>k&&(k=T)}),b=(_+N)/2,S=(M+k)/2}var $=Math.cos(f),E=Math.sin(f);function C(w){var I=w[v],z=w[m];return w[v]=b+(I-b)*$-(z-S)*E,w[m]=S+(I-b)*E+(z-S)*$,w}if(!u){var O={};return l.forEachNode(function(w,I){var z={};z[v]=I[v],z[m]=I[m],O[w]=C(z)}),O}l.updateEachNodeAttributes(function(w,I){return C(I),I},{attributes:p})}var a=o.bind(null,!1);return a.assign=o.bind(null,!0),zo=a,zo}var hc;function u0(){return hc||(hc=1,ur.circlepack=i0(),ur.circular=o0(),ur.random=a0(),ur.rotation=s0()),ur}var To,fc;function c0(){return fc||(fc=1,To=u0()),To}var l0=c0();class d0{constructor(e){this.app=e,this.eventBus=e.eventBus,this.canvas=e.canvas}init(){}applyLayout(e,t){switch(e){case"rotate180":this.rotate180(),this.eventBus.emit("graph:updated",{type:"layout"});break;case"circle":this.organizeNodesInCircle(),this.eventBus.emit("graph:updated",{type:"layout"});break;case"oneLine":this.organizeNodesInLine(),this.eventBus.emit("graph:updated",{type:"layout"});break;case"twoLine":this.organizeNodesInTwoLines(t.line1Count,t.Y),this.eventBus.emit("graph:updated",{type:"layout"});break}}organizeNodesInCircle(){const e=this.canvas.width/2,t=this.canvas.height/2,n=Math.min(e*.5,t*.5),o=l0.circular(this.app.graphManager.graph,{scale:n,dimensions:["x","y"]});this.app.graphManager.updateNodesPostion(o,{x:e,y:t})}organizeNodesInLine(){const e=this.canvas.width/2,t=this.canvas.height/2,n=e*.1,o=this.app.graphManager.graph,a=this.app.graphManager.graph.nodes(),u={};if(o.order===0)return;const l=(this.canvas.width-2*n)/Math.max(1,o.order-1);a.forEach((f,h)=>{u[f]={x:n+h*l,y:t}}),this.app.graphManager.updateNodesPostion(u)}organizeNodesInTwoLines(e,t=50){const n=this.canvas.width/2,o=this.canvas.height/2,a=n*.1,u=t,l=this.app.graphManager.graph,f=this.app.graphManager.graph.nodes(),h={};if(l.order===0)return;if(e>l.order){console.error("Line1 count exceeds total nodes.");return}const p=f.slice(0,e),v=f.slice(e),m=p.length,b=v.length,S=m>1?(this.canvas.width-2*a)/(m-1):0,_=b>1?(this.canvas.width-2*a)/(b-1):0,N=o-u,M=o+u;p.forEach((k,$)=>{h[k]={x:a+$*S,y:N}}),v.forEach((k,$)=>{h[k]={x:a+$*_,y:M}}),this.app.graphManager.updateNodesPostion(h)}rotate180(){const e=this.canvas.width,t=this.canvas.height,n=e*.15,o=this.app.graphManager.graph,a=o.nodes(),u={};if(o.order===0)return;let l=1/0,f=1/0,h=-1/0,p=-1/0;a.forEach(k=>{const{x:$,y:E}=o.getNodeAttributes(k);$<l&&(l=$),E<f&&(f=E),$>h&&(h=$),E>p&&(p=E)});const v=h-l,m=p-f,b=(e-2*n)/v,S=(t-2*n)/m,_=Math.min(b,S),N=(e-v*_)/2,M=(t-m*_)/2;o.forEachNode((k,$)=>{const E=e-(($.x-l)*_+N),C=t-(($.y-f)*_+M);u[k]={x:E,y:C}}),this.app.graphManager.updateNodesPostion(u)}}var Pr={exports:{}},h0=Pr.exports,pc;function f0(){return pc||(pc=1,function(r,e){(function(t,n){r.exports=n()})(h0,function(){function t(c,s){var d=Object.keys(c);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(c);s&&(g=g.filter(function(y){return Object.getOwnPropertyDescriptor(c,y).enumerable})),d.push.apply(d,g)}return d}function n(c){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?t(Object(d),!0).forEach(function(g){f(c,g,d[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(d)):t(Object(d)).forEach(function(g){Object.defineProperty(c,g,Object.getOwnPropertyDescriptor(d,g))})}return c}function o(c){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},o(c)}function a(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function u(c,s){for(var d=0;d<s.length;d++){var g=s[d];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(c,_(g.key),g)}}function l(c,s,d){return s&&u(c.prototype,s),Object.defineProperty(c,"prototype",{writable:!1}),c}function f(c,s,d){return(s=_(s))in c?Object.defineProperty(c,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[s]=d,c}function h(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),s&&v(c,s)}function p(c){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},p(c)}function v(c,s){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,g){return d.__proto__=g,d},v(c,s)}function m(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function b(c){var s=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var d,g=p(c);if(s){var y=p(this).constructor;d=Reflect.construct(g,arguments,y)}else d=g.apply(this,arguments);return function(x,A){if(A&&(typeof A=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m(x)}(this,d)}}function S(){return S=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(c,s,d){var g=function(x,A){for(;!Object.prototype.hasOwnProperty.call(x,A)&&(x=p(x))!==null;);return x}(c,s);if(g){var y=Object.getOwnPropertyDescriptor(g,s);return y.get?y.get.call(arguments.length<3?c:d):y.value}},S.apply(this,arguments)}function _(c){var s=function(d,g){if(typeof d!="object"||d===null)return d;var y=d[Symbol.toPrimitive];if(y!==void 0){var x=y.call(d,g);if(typeof x!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(d)}(c,"string");return typeof s=="symbol"?s:s+""}var N=function(c){return!(!c||!c.Window)&&c instanceof c.Window},M=void 0,k=void 0;function $(c){M=c;var s=c.document.createTextNode("");s.ownerDocument!==c.document&&typeof c.wrap=="function"&&c.wrap(s)===s&&(c=c.wrap(c)),k=c}function E(c){return N(c)?c:(c.ownerDocument||c).defaultView||k.window}typeof window<"u"&&window&&$(window);var C=function(c){return!!c&&o(c)==="object"},O=function(c){return typeof c=="function"},w={window:function(c){return c===k||N(c)},docFrag:function(c){return C(c)&&c.nodeType===11},object:C,func:O,number:function(c){return typeof c=="number"},bool:function(c){return typeof c=="boolean"},string:function(c){return typeof c=="string"},element:function(c){if(!c||o(c)!=="object")return!1;var s=E(c)||k;return/object|function/.test(typeof Element>"u"?"undefined":o(Element))?c instanceof Element||c instanceof s.Element:c.nodeType===1&&typeof c.nodeName=="string"},plainObject:function(c){return C(c)&&!!c.constructor&&/function Object\b/.test(c.constructor.toString())},array:function(c){return C(c)&&c.length!==void 0&&O(c.splice)}};function I(c){var s=c.interaction;if(s.prepared.name==="drag"){var d=s.prepared.axis;d==="x"?(s.coords.cur.page.y=s.coords.start.page.y,s.coords.cur.client.y=s.coords.start.client.y,s.coords.velocity.client.y=0,s.coords.velocity.page.y=0):d==="y"&&(s.coords.cur.page.x=s.coords.start.page.x,s.coords.cur.client.x=s.coords.start.client.x,s.coords.velocity.client.x=0,s.coords.velocity.page.x=0)}}function z(c){var s=c.iEvent,d=c.interaction;if(d.prepared.name==="drag"){var g=d.prepared.axis;if(g==="x"||g==="y"){var y=g==="x"?"y":"x";s.page[y]=d.coords.start.page[y],s.client[y]=d.coords.start.client[y],s.delta[y]=0}}}var T={id:"actions/drag",install:function(c){var s=c.actions,d=c.Interactable,g=c.defaults;d.prototype.draggable=T.draggable,s.map.drag=T,s.methodDict.drag="draggable",g.actions.drag=T.defaults},listeners:{"interactions:before-action-move":I,"interactions:action-resume":I,"interactions:action-move":z,"auto-start:check":function(c){var s=c.interaction,d=c.interactable,g=c.buttons,y=d.options.drag;if(y&&y.enabled&&(!s.pointerIsDown||!/mouse|pointer/.test(s.pointerType)||g&d.options.drag.mouseButtons))return c.action={name:"drag",axis:y.lockAxis==="start"?y.startAxis:y.lockAxis},!1}},draggable:function(c){return w.object(c)?(this.options.drag.enabled=c.enabled!==!1,this.setPerAction("drag",c),this.setOnEvents("drag",c),/^(xy|x|y|start)$/.test(c.lockAxis)&&(this.options.drag.lockAxis=c.lockAxis),/^(xy|x|y)$/.test(c.startAxis)&&(this.options.drag.startAxis=c.startAxis),this):w.bool(c)?(this.options.drag.enabled=c,this):this.options.drag},beforeMove:I,move:z,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(c){return c.search("drag")===0}},R=T,j={init:function(c){var s=c;j.document=s.document,j.DocumentFragment=s.DocumentFragment||V,j.SVGElement=s.SVGElement||V,j.SVGSVGElement=s.SVGSVGElement||V,j.SVGElementInstance=s.SVGElementInstance||V,j.Element=s.Element||V,j.HTMLElement=s.HTMLElement||j.Element,j.Event=s.Event,j.Touch=s.Touch||V,j.PointerEvent=s.PointerEvent||s.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function V(){}var te=j,Q={init:function(c){var s=te.Element,d=c.navigator||{};Q.supportsTouch="ontouchstart"in c||w.func(c.DocumentTouch)&&te.document instanceof c.DocumentTouch,Q.supportsPointerEvent=d.pointerEnabled!==!1&&!!te.PointerEvent,Q.isIOS=/iP(hone|od|ad)/.test(d.platform),Q.isIOS7=/iP(hone|od|ad)/.test(d.platform)&&/OS 7[^\d]/.test(d.appVersion),Q.isIe9=/MSIE 9/.test(d.userAgent),Q.isOperaMobile=d.appName==="Opera"&&Q.supportsTouch&&/Presto/.test(d.userAgent),Q.prefixedMatchesSelector="matches"in s.prototype?"matches":"webkitMatchesSelector"in s.prototype?"webkitMatchesSelector":"mozMatchesSelector"in s.prototype?"mozMatchesSelector":"oMatchesSelector"in s.prototype?"oMatchesSelector":"msMatchesSelector",Q.pEventTypes=Q.supportsPointerEvent?te.PointerEvent===c.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,Q.wheelEvent=te.document&&"onmousewheel"in te.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},H=Q;function G(c,s){if(c.contains)return c.contains(s);for(;s;){if(s===c)return!0;s=s.parentNode}return!1}function B(c,s){for(;w.element(c);){if(Y(c,s))return c;c=W(c)}return null}function W(c){var s=c.parentNode;if(w.docFrag(s)){for(;(s=s.host)&&w.docFrag(s););return s}return s}function Y(c,s){return k!==M&&(s=s.replace(/\/deep\//g," ")),c[H.prefixedMatchesSelector](s)}var F=function(c){return c.parentNode||c.host};function X(c,s){for(var d,g=[],y=c;(d=F(y))&&y!==s&&d!==y.ownerDocument;)g.unshift(y),y=d;return g}function J(c,s,d){for(;w.element(c);){if(Y(c,s))return!0;if((c=W(c))===d)return Y(c,s)}return!1}function Z(c){return c.correspondingUseElement||c}function ce(c){var s=c instanceof te.SVGElement?c.getBoundingClientRect():c.getClientRects()[0];return s&&{left:s.left,right:s.right,top:s.top,bottom:s.bottom,width:s.width||s.right-s.left,height:s.height||s.bottom-s.top}}function le(c){var s,d=ce(c);if(!H.isIOS7&&d){var g={x:(s=(s=E(c))||k).scrollX||s.document.documentElement.scrollLeft,y:s.scrollY||s.document.documentElement.scrollTop};d.left+=g.x,d.right+=g.x,d.top+=g.y,d.bottom+=g.y}return d}function he(c){for(var s=[];c;)s.push(c),c=W(c);return s}function ye(c){return!!w.string(c)&&(te.document.querySelector(c),!0)}function ne(c,s){for(var d in s)c[d]=s[d];return c}function we(c,s,d){return c==="parent"?W(d):c==="self"?s.getRect(d):B(d,c)}function Se(c,s,d,g){var y=c;return w.string(y)?y=we(y,s,d):w.func(y)&&(y=y.apply(void 0,g)),w.element(y)&&(y=le(y)),y}function $e(c){return c&&{x:"x"in c?c.x:c.left,y:"y"in c?c.y:c.top}}function Qe(c){return!c||"x"in c&&"y"in c||((c=ne({},c)).x=c.left||0,c.y=c.top||0,c.width=c.width||(c.right||0)-c.x,c.height=c.height||(c.bottom||0)-c.y),c}function Ue(c,s,d){c.left&&(s.left+=d.x),c.right&&(s.right+=d.x),c.top&&(s.top+=d.y),c.bottom&&(s.bottom+=d.y),s.width=s.right-s.left,s.height=s.bottom-s.top}function Ae(c,s,d){var g=d&&c.options[d];return $e(Se(g&&g.origin||c.options.origin,c,s,[c&&s]))||{x:0,y:0}}function ke(c,s){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(L){return!0},g=arguments.length>3?arguments[3]:void 0;if(g=g||{},w.string(c)&&c.search(" ")!==-1&&(c=Kr(c)),w.array(c))return c.forEach(function(L){return ke(L,s,d,g)}),g;if(w.object(c)&&(s=c,c=""),w.func(s)&&d(c))g[c]=g[c]||[],g[c].push(s);else if(w.array(s))for(var y=0,x=s;y<x.length;y++){var A=x[y];ke(c,A,d,g)}else if(w.object(s))for(var D in s)ke(Kr(D).map(function(L){return"".concat(c).concat(L)}),s[D],d,g);return g}function Kr(c){return c.trim().split(/ +/)}var zt=function(c,s){return Math.sqrt(c*c+s*s)},Un=["webkit","moz"];function Vt(c,s){c.__set||(c.__set={});var d=function(y){if(Un.some(function(x){return y.indexOf(x)===0}))return 1;typeof c[y]!="function"&&y!=="__set"&&Object.defineProperty(c,y,{get:function(){return y in c.__set?c.__set[y]:c.__set[y]=s[y]},set:function(x){c.__set[y]=x},configurable:!0})};for(var g in s)d(g);return c}function Qt(c,s){c.page=c.page||{},c.page.x=s.page.x,c.page.y=s.page.y,c.client=c.client||{},c.client.x=s.client.x,c.client.y=s.client.y,c.timeStamp=s.timeStamp}function Yr(c){c.page.x=0,c.page.y=0,c.client.x=0,c.client.y=0}function yr(c){return c instanceof te.Event||c instanceof te.Touch}function Tt(c,s,d){return c=c||"page",(d=d||{}).x=s[c+"X"],d.y=s[c+"Y"],d}function mr(c,s){return s=s||{x:0,y:0},H.isOperaMobile&&yr(c)?(Tt("screen",c,s),s.x+=window.scrollX,s.y+=window.scrollY):Tt("page",c,s),s}function At(c){return w.number(c.pointerId)?c.pointerId:c.identifier}function Lt(c,s,d){var g=s.length>1?kt(s):s[0];mr(g,c.page),function(y,x){x=x||{},H.isOperaMobile&&yr(y)?Tt("screen",y,x):Tt("client",y,x)}(g,c.client),c.timeStamp=d}function ut(c){var s=[];return w.array(c)?(s[0]=c[0],s[1]=c[1]):c.type==="touchend"?c.touches.length===1?(s[0]=c.touches[0],s[1]=c.changedTouches[0]):c.touches.length===0&&(s[0]=c.changedTouches[0],s[1]=c.changedTouches[1]):(s[0]=c.touches[0],s[1]=c.touches[1]),s}function kt(c){for(var s={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},d=0;d<c.length;d++){var g=c[d];for(var y in s)s[y]+=g[y]}for(var x in s)s[x]/=c.length;return s}function Pt(c){if(!c.length)return null;var s=ut(c),d=Math.min(s[0].pageX,s[1].pageX),g=Math.min(s[0].pageY,s[1].pageY),y=Math.max(s[0].pageX,s[1].pageX),x=Math.max(s[0].pageY,s[1].pageY);return{x:d,y:g,left:d,top:g,right:y,bottom:x,width:y-d,height:x-g}}function Gt(c,s){var d=s+"X",g=s+"Y",y=ut(c),x=y[0][d]-y[1][d],A=y[0][g]-y[1][g];return zt(x,A)}function Ot(c,s){var d=s+"X",g=s+"Y",y=ut(c),x=y[1][d]-y[0][d],A=y[1][g]-y[0][g];return 180*Math.atan2(A,x)/Math.PI}function Zt(c){return w.string(c.pointerType)?c.pointerType:w.number(c.pointerType)?[void 0,void 0,"touch","pen","mouse"][c.pointerType]:/touch/.test(c.type||"")||c instanceof te.Touch?"touch":"mouse"}function Xr(c){var s=w.func(c.composedPath)?c.composedPath():c.path;return[Z(s?s[0]:c.target),Z(c.currentTarget)]}var Jt=function(){function c(s){a(this,c),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=s}return l(c,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),c}();Object.defineProperty(Jt.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var Vr=function(c,s){for(var d=0;d<s.length;d++){var g=s[d];c.push(g)}return c},Qr=function(c){return Vr([],c)},vt=function(c,s){for(var d=0;d<c.length;d++)if(s(c[d],d,c))return d;return-1},Ze=function(c,s){return c[vt(c,s)]},ct=function(c){h(d,c);var s=b(d);function d(g,y,x){var A;a(this,d),(A=s.call(this,y._interaction)).dropzone=void 0,A.dragEvent=void 0,A.relatedTarget=void 0,A.draggable=void 0,A.propagationStopped=!1,A.immediatePropagationStopped=!1;var D=x==="dragleave"?g.prev:g.cur,L=D.element,q=D.dropzone;return A.type=x,A.target=L,A.currentTarget=L,A.dropzone=q,A.dragEvent=y,A.relatedTarget=y.target,A.draggable=y.interactable,A.timeStamp=y.timeStamp,A}return l(d,[{key:"reject",value:function(){var g=this,y=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&y.cur.dropzone===this.dropzone&&y.cur.element===this.target)if(y.prev.dropzone=this.dropzone,y.prev.element=this.target,y.rejected=!0,y.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var x=y.activeDrops,A=vt(x,function(L){var q=L.dropzone,P=L.element;return q===g.dropzone&&P===g.target});y.activeDrops.splice(A,1);var D=new d(y,this.dragEvent,"dropdeactivate");D.dropzone=this.dropzone,D.target=this.target,this.dropzone.fire(D)}else this.dropzone.fire(new d(y,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),d}(Jt);function Rt(c,s){for(var d=0,g=c.slice();d<g.length;d++){var y=g[d],x=y.dropzone,A=y.element;s.dropzone=x,s.target=A,x.fire(s),s.propagationStopped=s.immediatePropagationStopped=!1}}function er(c,s){for(var d=function(x,A){for(var D=[],L=0,q=x.interactables.list;L<q.length;L++){var P=q[L];if(P.options.drop.enabled){var U=P.options.drop.accept;if(!(w.element(U)&&U!==A||w.string(U)&&!Y(A,U)||w.func(U)&&!U({dropzone:P,draggableElement:A})))for(var K=0,re=P.getAllElements();K<re.length;K++){var ee=re[K];ee!==A&&D.push({dropzone:P,element:ee,rect:P.getRect(ee)})}}}return D}(c,s),g=0;g<d.length;g++){var y=d[g];y.rect=y.dropzone.getRect(y.element)}return d}function Zr(c,s,d){for(var g=c.dropState,y=c.interactable,x=c.element,A=[],D=0,L=g.activeDrops;D<L.length;D++){var q=L[D],P=q.dropzone,U=q.element,K=q.rect,re=P.dropCheck(s,d,y,x,U,K);A.push(re?U:null)}var ee=function(ie){for(var ue,ae,de,me=[],Ee=0;Ee<ie.length;Ee++){var ge=ie[Ee],be=ie[ue];if(ge&&Ee!==ue)if(be){var Pe=F(ge),Ne=F(be);if(Pe!==ge.ownerDocument)if(Ne!==ge.ownerDocument)if(Pe!==Ne){me=me.length?me:X(be);var je=void 0;if(be instanceof te.HTMLElement&&ge instanceof te.SVGElement&&!(ge instanceof te.SVGSVGElement)){if(ge===Ne)continue;je=ge.ownerSVGElement}else je=ge;for(var Je=X(je,be.ownerDocument),bt=0;Je[bt]&&Je[bt]===me[bt];)bt++;var un=[Je[bt-1],Je[bt],me[bt]];if(un[0])for(var Ar=un[0].lastChild;Ar;){if(Ar===un[1]){ue=Ee,me=Je;break}if(Ar===un[2])break;Ar=Ar.previousSibling}}else de=be,(parseInt(E(ae=ge).getComputedStyle(ae).zIndex,10)||0)>=(parseInt(E(de).getComputedStyle(de).zIndex,10)||0)&&(ue=Ee);else ue=Ee}else ue=Ee}return ue}(A);return g.activeDrops[ee]||null}function br(c,s,d){var g=c.dropState,y={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return d.type==="dragstart"&&(y.activate=new ct(g,d,"dropactivate"),y.activate.target=null,y.activate.dropzone=null),d.type==="dragend"&&(y.deactivate=new ct(g,d,"dropdeactivate"),y.deactivate.target=null,y.deactivate.dropzone=null),g.rejected||(g.cur.element!==g.prev.element&&(g.prev.dropzone&&(y.leave=new ct(g,d,"dragleave"),d.dragLeave=y.leave.target=g.prev.element,d.prevDropzone=y.leave.dropzone=g.prev.dropzone),g.cur.dropzone&&(y.enter=new ct(g,d,"dragenter"),d.dragEnter=g.cur.element,d.dropzone=g.cur.dropzone)),d.type==="dragend"&&g.cur.dropzone&&(y.drop=new ct(g,d,"drop"),d.dropzone=g.cur.dropzone,d.relatedTarget=g.cur.element),d.type==="dragmove"&&g.cur.dropzone&&(y.move=new ct(g,d,"dropmove"),d.dropzone=g.cur.dropzone)),y}function jn(c,s){var d=c.dropState,g=d.activeDrops,y=d.cur,x=d.prev;s.leave&&x.dropzone.fire(s.leave),s.enter&&y.dropzone.fire(s.enter),s.move&&y.dropzone.fire(s.move),s.drop&&y.dropzone.fire(s.drop),s.deactivate&&Rt(g,s.deactivate),d.prev.dropzone=y.dropzone,d.prev.element=y.element}function pa(c,s){var d=c.interaction,g=c.iEvent,y=c.event;if(g.type==="dragmove"||g.type==="dragend"){var x=d.dropState;s.dynamicDrop&&(x.activeDrops=er(s,d.element));var A=g,D=Zr(d,A,y);x.rejected=x.rejected&&!!D&&D.dropzone===x.cur.dropzone&&D.element===x.cur.element,x.cur.dropzone=D&&D.dropzone,x.cur.element=D&&D.element,x.events=br(d,0,A)}}var ga={id:"actions/drop",install:function(c){var s=c.actions,d=c.interactStatic,g=c.Interactable,y=c.defaults;c.usePlugin(R),g.prototype.dropzone=function(x){return function(A,D){if(w.object(D)){if(A.options.drop.enabled=D.enabled!==!1,D.listeners){var L=ke(D.listeners),q=Object.keys(L).reduce(function(U,K){return U[/^(enter|leave)/.test(K)?"drag".concat(K):/^(activate|deactivate|move)/.test(K)?"drop".concat(K):K]=L[K],U},{}),P=A.options.drop.listeners;P&&A.off(P),A.on(q),A.options.drop.listeners=q}return w.func(D.ondrop)&&A.on("drop",D.ondrop),w.func(D.ondropactivate)&&A.on("dropactivate",D.ondropactivate),w.func(D.ondropdeactivate)&&A.on("dropdeactivate",D.ondropdeactivate),w.func(D.ondragenter)&&A.on("dragenter",D.ondragenter),w.func(D.ondragleave)&&A.on("dragleave",D.ondragleave),w.func(D.ondropmove)&&A.on("dropmove",D.ondropmove),/^(pointer|center)$/.test(D.overlap)?A.options.drop.overlap=D.overlap:w.number(D.overlap)&&(A.options.drop.overlap=Math.max(Math.min(1,D.overlap),0)),"accept"in D&&(A.options.drop.accept=D.accept),"checker"in D&&(A.options.drop.checker=D.checker),A}return w.bool(D)?(A.options.drop.enabled=D,A):A.options.drop}(this,x)},g.prototype.dropCheck=function(x,A,D,L,q,P){return function(U,K,re,ee,ie,ue,ae){var de=!1;if(!(ae=ae||U.getRect(ue)))return!!U.options.drop.checker&&U.options.drop.checker(K,re,de,U,ue,ee,ie);var me=U.options.drop.overlap;if(me==="pointer"){var Ee=Ae(ee,ie,"drag"),ge=mr(K);ge.x+=Ee.x,ge.y+=Ee.y;var be=ge.x>ae.left&&ge.x<ae.right,Pe=ge.y>ae.top&&ge.y<ae.bottom;de=be&&Pe}var Ne=ee.getRect(ie);if(Ne&&me==="center"){var je=Ne.left+Ne.width/2,Je=Ne.top+Ne.height/2;de=je>=ae.left&&je<=ae.right&&Je>=ae.top&&Je<=ae.bottom}return Ne&&w.number(me)&&(de=Math.max(0,Math.min(ae.right,Ne.right)-Math.max(ae.left,Ne.left))*Math.max(0,Math.min(ae.bottom,Ne.bottom)-Math.max(ae.top,Ne.top))/(Ne.width*Ne.height)>=me),U.options.drop.checker&&(de=U.options.drop.checker(K,re,de,U,ue,ee,ie)),de}(this,x,A,D,L,q,P)},d.dynamicDrop=function(x){return w.bool(x)?(c.dynamicDrop=x,d):c.dynamicDrop},ne(s.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),s.methodDict.drop="dropzone",c.dynamicDrop=!1,y.actions.drop=ga.defaults},listeners:{"interactions:before-action-start":function(c){var s=c.interaction;s.prepared.name==="drag"&&(s.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(c,s){var d=c.interaction,g=(c.event,c.iEvent);if(d.prepared.name==="drag"){var y=d.dropState;y.activeDrops=[],y.events={},y.activeDrops=er(s,d.element),y.events=br(d,0,g),y.events.activate&&(Rt(y.activeDrops,y.events.activate),s.fire("actions/drop:start",{interaction:d,dragEvent:g}))}},"interactions:action-move":pa,"interactions:after-action-move":function(c,s){var d=c.interaction,g=c.iEvent;if(d.prepared.name==="drag"){var y=d.dropState;jn(d,y.events),s.fire("actions/drop:move",{interaction:d,dragEvent:g}),y.events={}}},"interactions:action-end":function(c,s){if(c.interaction.prepared.name==="drag"){var d=c.interaction,g=c.iEvent;pa(c,s),jn(d,d.dropState.events),s.fire("actions/drop:end",{interaction:d,dragEvent:g})}},"interactions:stop":function(c){var s=c.interaction;if(s.prepared.name==="drag"){var d=s.dropState;d&&(d.activeDrops=null,d.events=null,d.cur.dropzone=null,d.cur.element=null,d.prev.dropzone=null,d.prev.element=null,d.rejected=!1)}}},getActiveDrops:er,getDrop:Zr,getDropEvents:br,fireDropEvents:jn,filterEventType:function(c){return c.search("drag")===0||c.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},vl=ga;function Fn(c){var s=c.interaction,d=c.iEvent,g=c.phase;if(s.prepared.name==="gesture"){var y=s.pointers.map(function(q){return q.pointer}),x=g==="start",A=g==="end",D=s.interactable.options.deltaSource;if(d.touches=[y[0],y[1]],x)d.distance=Gt(y,D),d.box=Pt(y),d.scale=1,d.ds=0,d.angle=Ot(y,D),d.da=0,s.gesture.startDistance=d.distance,s.gesture.startAngle=d.angle;else if(A||s.pointers.length<2){var L=s.prevEvent;d.distance=L.distance,d.box=L.box,d.scale=L.scale,d.ds=0,d.angle=L.angle,d.da=0}else d.distance=Gt(y,D),d.box=Pt(y),d.scale=d.distance/s.gesture.startDistance,d.angle=Ot(y,D),d.ds=d.scale-s.gesture.scale,d.da=d.angle-s.gesture.angle;s.gesture.distance=d.distance,s.gesture.angle=d.angle,w.number(d.scale)&&d.scale!==1/0&&!isNaN(d.scale)&&(s.gesture.scale=d.scale)}}var Wn={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(c){var s=c.actions,d=c.Interactable,g=c.defaults;d.prototype.gesturable=function(y){return w.object(y)?(this.options.gesture.enabled=y.enabled!==!1,this.setPerAction("gesture",y),this.setOnEvents("gesture",y),this):w.bool(y)?(this.options.gesture.enabled=y,this):this.options.gesture},s.map.gesture=Wn,s.methodDict.gesture="gesturable",g.actions.gesture=Wn.defaults},listeners:{"interactions:action-start":Fn,"interactions:action-move":Fn,"interactions:action-end":Fn,"interactions:new":function(c){c.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(c){if(!(c.interaction.pointers.length<2)){var s=c.interactable.options.gesture;if(s&&s.enabled)return c.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(c){return c.search("gesture")===0}},yl=Wn;function ml(c,s,d,g,y,x,A){if(!s)return!1;if(s===!0){var D=w.number(x.width)?x.width:x.right-x.left,L=w.number(x.height)?x.height:x.bottom-x.top;if(A=Math.min(A,Math.abs((c==="left"||c==="right"?D:L)/2)),D<0&&(c==="left"?c="right":c==="right"&&(c="left")),L<0&&(c==="top"?c="bottom":c==="bottom"&&(c="top")),c==="left"){var q=D>=0?x.left:x.right;return d.x<q+A}if(c==="top"){var P=L>=0?x.top:x.bottom;return d.y<P+A}if(c==="right")return d.x>(D>=0?x.right:x.left)-A;if(c==="bottom")return d.y>(L>=0?x.bottom:x.top)-A}return!!w.element(g)&&(w.element(s)?s===g:J(g,s,y))}function va(c){var s=c.iEvent,d=c.interaction;if(d.prepared.name==="resize"&&d.resizeAxes){var g=s;d.interactable.options.resize.square?(d.resizeAxes==="y"?g.delta.x=g.delta.y:g.delta.y=g.delta.x,g.axes="xy"):(g.axes=d.resizeAxes,d.resizeAxes==="x"?g.delta.y=0:d.resizeAxes==="y"&&(g.delta.x=0))}}var yt,qt,mt={id:"actions/resize",before:["actions/drag"],install:function(c){var s=c.actions,d=c.browser,g=c.Interactable,y=c.defaults;mt.cursors=function(x){return x.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(d),mt.defaultMargin=d.supportsTouch||d.supportsPointerEvent?20:10,g.prototype.resizable=function(x){return function(A,D,L){return w.object(D)?(A.options.resize.enabled=D.enabled!==!1,A.setPerAction("resize",D),A.setOnEvents("resize",D),w.string(D.axis)&&/^x$|^y$|^xy$/.test(D.axis)?A.options.resize.axis=D.axis:D.axis===null&&(A.options.resize.axis=L.defaults.actions.resize.axis),w.bool(D.preserveAspectRatio)?A.options.resize.preserveAspectRatio=D.preserveAspectRatio:w.bool(D.square)&&(A.options.resize.square=D.square),A):w.bool(D)?(A.options.resize.enabled=D,A):A.options.resize}(this,x,c)},s.map.resize=mt,s.methodDict.resize="resizable",y.actions.resize=mt.defaults},listeners:{"interactions:new":function(c){c.interaction.resizeAxes="xy"},"interactions:action-start":function(c){(function(s){var d=s.iEvent,g=s.interaction;if(g.prepared.name==="resize"&&g.prepared.edges){var y=d,x=g.rect;g._rects={start:ne({},x),corrected:ne({},x),previous:ne({},x),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},y.edges=g.prepared.edges,y.rect=g._rects.corrected,y.deltaRect=g._rects.delta}})(c),va(c)},"interactions:action-move":function(c){(function(s){var d=s.iEvent,g=s.interaction;if(g.prepared.name==="resize"&&g.prepared.edges){var y=d,x=g.interactable.options.resize.invert,A=x==="reposition"||x==="negate",D=g.rect,L=g._rects,q=L.start,P=L.corrected,U=L.delta,K=L.previous;if(ne(K,P),A){if(ne(P,D),x==="reposition"){if(P.top>P.bottom){var re=P.top;P.top=P.bottom,P.bottom=re}if(P.left>P.right){var ee=P.left;P.left=P.right,P.right=ee}}}else P.top=Math.min(D.top,q.bottom),P.bottom=Math.max(D.bottom,q.top),P.left=Math.min(D.left,q.right),P.right=Math.max(D.right,q.left);for(var ie in P.width=P.right-P.left,P.height=P.bottom-P.top,P)U[ie]=P[ie]-K[ie];y.edges=g.prepared.edges,y.rect=P,y.deltaRect=U}})(c),va(c)},"interactions:action-end":function(c){var s=c.iEvent,d=c.interaction;if(d.prepared.name==="resize"&&d.prepared.edges){var g=s;g.edges=d.prepared.edges,g.rect=d._rects.corrected,g.deltaRect=d._rects.delta}},"auto-start:check":function(c){var s=c.interaction,d=c.interactable,g=c.element,y=c.rect,x=c.buttons;if(y){var A=ne({},s.coords.cur.page),D=d.options.resize;if(D&&D.enabled&&(!s.pointerIsDown||!/mouse|pointer/.test(s.pointerType)||x&D.mouseButtons)){if(w.object(D.edges)){var L={left:!1,right:!1,top:!1,bottom:!1};for(var q in L)L[q]=ml(q,D.edges[q],A,s._latestPointer.eventTarget,g,y,D.margin||mt.defaultMargin);L.left=L.left&&!L.right,L.top=L.top&&!L.bottom,(L.left||L.right||L.top||L.bottom)&&(c.action={name:"resize",edges:L})}else{var P=D.axis!=="y"&&A.x>y.right-mt.defaultMargin,U=D.axis!=="x"&&A.y>y.bottom-mt.defaultMargin;(P||U)&&(c.action={name:"resize",axes:(P?"x":"")+(U?"y":"")})}return!c.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(c){var s=c.edges,d=c.axis,g=c.name,y=mt.cursors,x=null;if(d)x=y[g+d];else if(s){for(var A="",D=0,L=["top","bottom","left","right"];D<L.length;D++){var q=L[D];s[q]&&(A+=q)}x=y[A]}return x},filterEventType:function(c){return c.search("resize")===0},defaultMargin:null},bl=mt,wl={id:"actions",install:function(c){c.usePlugin(yl),c.usePlugin(bl),c.usePlugin(R),c.usePlugin(vl)}},ya=0,Nt={request:function(c){return yt(c)},cancel:function(c){return qt(c)},init:function(c){if(yt=c.requestAnimationFrame,qt=c.cancelAnimationFrame,!yt)for(var s=["ms","moz","webkit","o"],d=0;d<s.length;d++){var g=s[d];yt=c["".concat(g,"RequestAnimationFrame")],qt=c["".concat(g,"CancelAnimationFrame")]||c["".concat(g,"CancelRequestAnimationFrame")]}yt=yt&&yt.bind(c),qt=qt&&qt.bind(c),yt||(yt=function(y){var x=Date.now(),A=Math.max(0,16-(x-ya)),D=c.setTimeout(function(){y(x+A)},A);return ya=x+A,D},qt=function(y){return clearTimeout(y)})}},ve={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(c){ve.isScrolling=!0,Nt.cancel(ve.i),c.autoScroll=ve,ve.interaction=c,ve.prevTime=ve.now(),ve.i=Nt.request(ve.scroll)},stop:function(){ve.isScrolling=!1,ve.interaction&&(ve.interaction.autoScroll=null),Nt.cancel(ve.i)},scroll:function(){var c=ve.interaction,s=c.interactable,d=c.element,g=c.prepared.name,y=s.options[g].autoScroll,x=ma(y.container,s,d),A=ve.now(),D=(A-ve.prevTime)/1e3,L=y.speed*D;if(L>=1){var q={x:ve.x*L,y:ve.y*L};if(q.x||q.y){var P=ba(x);w.window(x)?x.scrollBy(q.x,q.y):x&&(x.scrollLeft+=q.x,x.scrollTop+=q.y);var U=ba(x),K={x:U.x-P.x,y:U.y-P.y};(K.x||K.y)&&s.fire({type:"autoscroll",target:d,interactable:s,delta:K,interaction:c,container:x})}ve.prevTime=A}ve.isScrolling&&(Nt.cancel(ve.i),ve.i=Nt.request(ve.scroll))},check:function(c,s){var d;return(d=c.options[s].autoScroll)==null?void 0:d.enabled},onInteractionMove:function(c){var s=c.interaction,d=c.pointer;if(s.interacting()&&ve.check(s.interactable,s.prepared.name))if(s.simulation)ve.x=ve.y=0;else{var g,y,x,A,D=s.interactable,L=s.element,q=s.prepared.name,P=D.options[q].autoScroll,U=ma(P.container,D,L);if(w.window(U))A=d.clientX<ve.margin,g=d.clientY<ve.margin,y=d.clientX>U.innerWidth-ve.margin,x=d.clientY>U.innerHeight-ve.margin;else{var K=ce(U);A=d.clientX<K.left+ve.margin,g=d.clientY<K.top+ve.margin,y=d.clientX>K.right-ve.margin,x=d.clientY>K.bottom-ve.margin}ve.x=y?1:A?-1:0,ve.y=x?1:g?-1:0,ve.isScrolling||(ve.margin=P.margin,ve.speed=P.speed,ve.start(s))}}};function ma(c,s,d){return(w.string(c)?we(c,s,d):c)||E(d)}function ba(c){return w.window(c)&&(c=window.document.body),{x:c.scrollLeft,y:c.scrollTop}}var xl={id:"auto-scroll",install:function(c){var s=c.defaults,d=c.actions;c.autoScroll=ve,ve.now=function(){return c.now()},d.phaselessTypes.autoscroll=!0,s.perAction.autoScroll=ve.defaults},listeners:{"interactions:new":function(c){c.interaction.autoScroll=null},"interactions:destroy":function(c){c.interaction.autoScroll=null,ve.stop(),ve.interaction&&(ve.interaction=null)},"interactions:stop":ve.stop,"interactions:action-move":function(c){return ve.onInteractionMove(c)}}},El=xl;function wr(c,s){var d=!1;return function(){return d||(k.console.warn(s),d=!0),c.apply(this,arguments)}}function Hn(c,s){return c.name=s.name,c.axis=s.axis,c.edges=s.edges,c}function _l(c){return w.bool(c)?(this.options.styleCursor=c,this):c===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Sl(c){return w.func(c)?(this.options.actionChecker=c,this):c===null?(delete this.options.actionChecker,this):this.options.actionChecker}var Al={id:"auto-start/interactableMethods",install:function(c){var s=c.Interactable;s.prototype.getAction=function(d,g,y,x){var A=function(D,L,q,P,U){var K=D.getRect(P),re=L.buttons||{0:1,1:4,3:8,4:16}[L.button],ee={action:null,interactable:D,interaction:q,element:P,rect:K,buttons:re};return U.fire("auto-start:check",ee),ee.action}(this,g,y,x,c);return this.options.actionChecker?this.options.actionChecker(d,g,A,this,x,y):A},s.prototype.ignoreFrom=wr(function(d){return this._backCompatOption("ignoreFrom",d)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),s.prototype.allowFrom=wr(function(d){return this._backCompatOption("allowFrom",d)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),s.prototype.actionChecker=Sl,s.prototype.styleCursor=_l}};function wa(c,s,d,g,y){return s.testIgnoreAllow(s.options[c.name],d,g)&&s.options[c.name].enabled&&Jr(s,d,c,y)?c:null}function kl(c,s,d,g,y,x,A){for(var D=0,L=g.length;D<L;D++){var q=g[D],P=y[D],U=q.getAction(s,d,c,P);if(U){var K=wa(U,q,P,x,A);if(K)return{action:K,interactable:q,element:P}}}return{action:null,interactable:null,element:null}}function xa(c,s,d,g,y){var x=[],A=[],D=g;function L(P){x.push(P),A.push(D)}for(;w.element(D);){x=[],A=[],y.interactables.forEachMatch(D,L);var q=kl(c,s,d,x,A,g,y);if(q.action&&!q.interactable.options[q.action.name].manualStart)return q;D=W(D)}return{action:null,interactable:null,element:null}}function Ea(c,s,d){var g=s.action,y=s.interactable,x=s.element;g=g||{name:null},c.interactable=y,c.element=x,Hn(c.prepared,g),c.rect=y&&g.name?y.getRect(x):null,Sa(c,d),d.fire("autoStart:prepared",{interaction:c})}function Jr(c,s,d,g){var y=c.options,x=y[d.name].max,A=y[d.name].maxPerElement,D=g.autoStart.maxInteractions,L=0,q=0,P=0;if(!(x&&A&&D))return!1;for(var U=0,K=g.interactions.list;U<K.length;U++){var re=K[U],ee=re.prepared.name;if(re.interacting()&&(++L>=D||re.interactable===c&&((q+=ee===d.name?1:0)>=x||re.element===s&&(P++,ee===d.name&&P>=A))))return!1}return D>0}function _a(c,s){return w.number(c)?(s.autoStart.maxInteractions=c,this):s.autoStart.maxInteractions}function Kn(c,s,d){var g=d.autoStart.cursorElement;g&&g!==c&&(g.style.cursor=""),c.ownerDocument.documentElement.style.cursor=s,c.style.cursor=s,d.autoStart.cursorElement=s?c:null}function Sa(c,s){var d=c.interactable,g=c.element,y=c.prepared;if(c.pointerType==="mouse"&&d&&d.options.styleCursor){var x="";if(y.name){var A=d.options[y.name].cursorChecker;x=w.func(A)?A(y,d,g,c._interacting):s.actions.map[y.name].getCursor(y)}Kn(c.element,x||"",s)}else s.autoStart.cursorElement&&Kn(s.autoStart.cursorElement,"",s)}var Nl={id:"auto-start/base",before:["actions"],install:function(c){var s=c.interactStatic,d=c.defaults;c.usePlugin(Al),d.base.actionChecker=null,d.base.styleCursor=!0,ne(d.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),s.maxInteractions=function(g){return _a(g,c)},c.autoStart={maxInteractions:1/0,withinInteractionLimit:Jr,cursorElement:null}},listeners:{"interactions:down":function(c,s){var d=c.interaction,g=c.pointer,y=c.event,x=c.eventTarget;d.interacting()||Ea(d,xa(d,g,y,x,s),s)},"interactions:move":function(c,s){(function(d,g){var y=d.interaction,x=d.pointer,A=d.event,D=d.eventTarget;y.pointerType!=="mouse"||y.pointerIsDown||y.interacting()||Ea(y,xa(y,x,A,D,g),g)})(c,s),function(d,g){var y=d.interaction;if(y.pointerIsDown&&!y.interacting()&&y.pointerWasMoved&&y.prepared.name){g.fire("autoStart:before-start",d);var x=y.interactable,A=y.prepared.name;A&&x&&(x.options[A].manualStart||!Jr(x,y.element,y.prepared,g)?y.stop():(y.start(y.prepared,x,y.element),Sa(y,g)))}}(c,s)},"interactions:stop":function(c,s){var d=c.interaction,g=d.interactable;g&&g.options.styleCursor&&Kn(d.element,"",s)}},maxInteractions:_a,withinInteractionLimit:Jr,validateAction:wa},Yn=Nl,Ml={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(c,s){var d=c.interaction,g=c.eventTarget,y=c.dx,x=c.dy;if(d.prepared.name==="drag"){var A=Math.abs(y),D=Math.abs(x),L=d.interactable.options.drag,q=L.startAxis,P=A>D?"x":A<D?"y":"xy";if(d.prepared.axis=L.lockAxis==="start"?P[0]:L.lockAxis,P!=="xy"&&q!=="xy"&&q!==P){d.prepared.name=null;for(var U=g,K=function(ee){if(ee!==d.interactable){var ie=d.interactable.options.drag;if(!ie.manualStart&&ee.testIgnoreAllow(ie,U,g)){var ue=ee.getAction(d.downPointer,d.downEvent,d,U);if(ue&&ue.name==="drag"&&function(ae,de){if(!de)return!1;var me=de.options.drag.startAxis;return ae==="xy"||me==="xy"||me===ae}(P,ee)&&Yn.validateAction(ue,ee,U,g,s))return ee}}};w.element(U);){var re=s.interactables.forEachMatch(U,K);if(re){d.prepared.name="drag",d.interactable=re,d.element=U;break}U=W(U)}}}}}};function Xn(c){var s=c.prepared&&c.prepared.name;if(!s)return null;var d=c.interactable.options;return d[s].hold||d[s].delay}var Cl={id:"auto-start/hold",install:function(c){var s=c.defaults;c.usePlugin(Yn),s.perAction.hold=0,s.perAction.delay=0},listeners:{"interactions:new":function(c){c.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(c){var s=c.interaction,d=Xn(s);d>0&&(s.autoStartHoldTimer=setTimeout(function(){s.start(s.prepared,s.interactable,s.element)},d))},"interactions:move":function(c){var s=c.interaction,d=c.duplicate;s.autoStartHoldTimer&&s.pointerWasMoved&&!d&&(clearTimeout(s.autoStartHoldTimer),s.autoStartHoldTimer=null)},"autoStart:before-start":function(c){var s=c.interaction;Xn(s)>0&&(s.prepared.name=null)}},getHoldDuration:Xn},Dl=Cl,Il={id:"auto-start",install:function(c){c.usePlugin(Yn),c.usePlugin(Dl),c.usePlugin(Ml)}},$l=function(c){return/^(always|never|auto)$/.test(c)?(this.options.preventDefault=c,this):w.bool(c)?(this.options.preventDefault=c?"always":"never",this):this.options.preventDefault};function zl(c){var s=c.interaction,d=c.event;s.interactable&&s.interactable.checkAndPreventDefault(d)}var Aa={id:"core/interactablePreventDefault",install:function(c){var s=c.Interactable;s.prototype.preventDefault=$l,s.prototype.checkAndPreventDefault=function(d){return function(g,y,x){var A=g.options.preventDefault;if(A!=="never")if(A!=="always"){if(y.events.supportsPassive&&/^touch(start|move)$/.test(x.type)){var D=E(x.target).document,L=y.getDocOptions(D);if(!L||!L.events||L.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(x.type)||w.element(x.target)&&Y(x.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||x.preventDefault()}else x.preventDefault()}(this,c,d)},c.interactions.docEvents.push({type:"dragstart",listener:function(d){for(var g=0,y=c.interactions.list;g<y.length;g++){var x=y[g];if(x.element&&(x.element===d.target||G(x.element,d.target)))return void x.interactable.checkAndPreventDefault(d)}}})},listeners:["down","move","up","cancel"].reduce(function(c,s){return c["interactions:".concat(s)]=zl,c},{})};function en(c,s){if(s.phaselessTypes[c])return!0;for(var d in s.map)if(c.indexOf(d)===0&&c.substr(d.length)in s.phases)return!0;return!1}function tr(c){var s={};for(var d in c){var g=c[d];w.plainObject(g)?s[d]=tr(g):w.array(g)?s[d]=Qr(g):s[d]=g}return s}var Vn=function(){function c(s){a(this,c),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=s,this.result=tn(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return l(c,[{key:"start",value:function(s,d){var g,y,x=s.phase,A=this.interaction,D=function(q){var P=q.interactable.options[q.prepared.name],U=P.modifiers;return U&&U.length?U:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(K){var re=P[K];return re&&re.enabled&&{options:re,methods:re._methods}}).filter(function(K){return!!K})}(A);this.prepareStates(D),this.startEdges=ne({},A.edges),this.edges=ne({},this.startEdges),this.startOffset=(g=A.rect,y=d,g?{left:y.x-g.left,top:y.y-g.top,right:g.right-y.x,bottom:g.bottom-y.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var L=this.fillArg({phase:x,pageCoords:d,preEnd:!1});return this.result=tn(),this.startAll(L),this.result=this.setAll(L)}},{key:"fillArg",value:function(s){var d=this.interaction;return s.interaction=d,s.interactable=d.interactable,s.element=d.element,s.rect||(s.rect=d.rect),s.edges||(s.edges=this.startEdges),s.startOffset=this.startOffset,s}},{key:"startAll",value:function(s){for(var d=0,g=this.states;d<g.length;d++){var y=g[d];y.methods.start&&(s.state=y,y.methods.start(s))}}},{key:"setAll",value:function(s){var d=s.phase,g=s.preEnd,y=s.skipModifiers,x=s.rect,A=s.edges;s.coords=ne({},s.pageCoords),s.rect=ne({},x),s.edges=ne({},A);for(var D=y?this.states.slice(y):this.states,L=tn(s.coords,s.rect),q=0;q<D.length;q++){var P,U=D[q],K=U.options,re=ne({},s.coords),ee=null;(P=U.methods)!=null&&P.set&&this.shouldDo(K,g,d)&&(s.state=U,ee=U.methods.set(s),Ue(s.edges,s.rect,{x:s.coords.x-re.x,y:s.coords.y-re.y})),L.eventProps.push(ee)}ne(this.edges,s.edges),L.delta.x=s.coords.x-s.pageCoords.x,L.delta.y=s.coords.y-s.pageCoords.y,L.rectDelta.left=s.rect.left-x.left,L.rectDelta.right=s.rect.right-x.right,L.rectDelta.top=s.rect.top-x.top,L.rectDelta.bottom=s.rect.bottom-x.bottom;var ie=this.result.coords,ue=this.result.rect;if(ie&&ue){var ae=L.rect.left!==ue.left||L.rect.right!==ue.right||L.rect.top!==ue.top||L.rect.bottom!==ue.bottom;L.changed=ae||ie.x!==L.coords.x||ie.y!==L.coords.y}return L}},{key:"applyToInteraction",value:function(s){var d=this.interaction,g=s.phase,y=d.coords.cur,x=d.coords.start,A=this.result,D=this.startDelta,L=A.delta;g==="start"&&ne(this.startDelta,A.delta);for(var q=0,P=[[x,D],[y,L]];q<P.length;q++){var U=P[q],K=U[0],re=U[1];K.page.x+=re.x,K.page.y+=re.y,K.client.x+=re.x,K.client.y+=re.y}var ee=this.result.rectDelta,ie=s.rect||d.rect;ie.left+=ee.left,ie.right+=ee.right,ie.top+=ee.top,ie.bottom+=ee.bottom,ie.width=ie.right-ie.left,ie.height=ie.bottom-ie.top}},{key:"setAndApply",value:function(s){var d=this.interaction,g=s.phase,y=s.preEnd,x=s.skipModifiers,A=this.setAll(this.fillArg({preEnd:y,phase:g,pageCoords:s.modifiedCoords||d.coords.cur.page}));if(this.result=A,!A.changed&&(!x||x<this.states.length)&&d.interacting())return!1;if(s.modifiedCoords){var D=d.coords.cur.page,L={x:s.modifiedCoords.x-D.x,y:s.modifiedCoords.y-D.y};A.coords.x+=L.x,A.coords.y+=L.y,A.delta.x+=L.x,A.delta.y+=L.y}this.applyToInteraction(s)}},{key:"beforeEnd",value:function(s){var d=s.interaction,g=s.event,y=this.states;if(y&&y.length){for(var x=!1,A=0;A<y.length;A++){var D=y[A];s.state=D;var L=D.options,q=D.methods,P=q.beforeEnd&&q.beforeEnd(s);if(P)return this.endResult=P,!1;x=x||!x&&this.shouldDo(L,!0,s.phase,!0)}x&&d.move({event:g,preEnd:!0})}}},{key:"stop",value:function(s){var d=s.interaction;if(this.states&&this.states.length){var g=ne({states:this.states,interactable:d.interactable,element:d.element,rect:null},s);this.fillArg(g);for(var y=0,x=this.states;y<x.length;y++){var A=x[y];g.state=A,A.methods.stop&&A.methods.stop(g)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(s){this.states=[];for(var d=0;d<s.length;d++){var g=s[d],y=g.options,x=g.methods,A=g.name;this.states.push({options:y,methods:x,index:d,name:A})}return this.states}},{key:"restoreInteractionCoords",value:function(s){var d=s.interaction,g=d.coords,y=d.rect,x=d.modification;if(x.result){for(var A=x.startDelta,D=x.result,L=D.delta,q=D.rectDelta,P=0,U=[[g.start,A],[g.cur,L]];P<U.length;P++){var K=U[P],re=K[0],ee=K[1];re.page.x-=ee.x,re.page.y-=ee.y,re.client.x-=ee.x,re.client.y-=ee.y}y.left-=q.left,y.right-=q.right,y.top-=q.top,y.bottom-=q.bottom}}},{key:"shouldDo",value:function(s,d,g,y){return!(!s||s.enabled===!1||y&&!s.endOnly||s.endOnly&&!d||g==="start"&&!s.setStart)}},{key:"copyFrom",value:function(s){this.startOffset=s.startOffset,this.startDelta=s.startDelta,this.startEdges=s.startEdges,this.edges=s.edges,this.states=s.states.map(function(d){return tr(d)}),this.result=tn(ne({},s.result.coords),ne({},s.result.rect))}},{key:"destroy",value:function(){for(var s in this)this[s]=null}}]),c}();function tn(c,s){return{rect:s,coords:c,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Mt(c,s){var d=c.defaults,g={start:c.start,set:c.set,beforeEnd:c.beforeEnd,stop:c.stop},y=function(x){var A=x||{};for(var D in A.enabled=A.enabled!==!1,d)D in A||(A[D]=d[D]);var L={options:A,methods:g,name:s,enable:function(){return A.enabled=!0,L},disable:function(){return A.enabled=!1,L}};return L};return s&&typeof s=="string"&&(y._defaults=d,y._methods=g),y}function xr(c){var s=c.iEvent,d=c.interaction.modification.result;d&&(s.modifiers=d.eventProps)}var Tl={id:"modifiers/base",before:["actions"],install:function(c){c.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(c){var s=c.interaction;s.modification=new Vn(s)},"interactions:before-action-start":function(c){var s=c.interaction,d=c.interaction.modification;d.start(c,s.coords.start.page),s.edges=d.edges,d.applyToInteraction(c)},"interactions:before-action-move":function(c){var s=c.interaction,d=s.modification,g=d.setAndApply(c);return s.edges=d.edges,g},"interactions:before-action-end":function(c){var s=c.interaction,d=s.modification,g=d.beforeEnd(c);return s.edges=d.startEdges,g},"interactions:action-start":xr,"interactions:action-move":xr,"interactions:action-end":xr,"interactions:after-action-start":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:after-action-move":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:stop":function(c){return c.interaction.modification.stop(c)}}},ka=Tl,Na={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},Qn=function(c){h(d,c);var s=b(d);function d(g,y,x,A,D,L,q){var P;a(this,d),(P=s.call(this,g)).relatedTarget=null,P.screenX=void 0,P.screenY=void 0,P.button=void 0,P.buttons=void 0,P.ctrlKey=void 0,P.shiftKey=void 0,P.altKey=void 0,P.metaKey=void 0,P.page=void 0,P.client=void 0,P.delta=void 0,P.rect=void 0,P.x0=void 0,P.y0=void 0,P.t0=void 0,P.dt=void 0,P.duration=void 0,P.clientX0=void 0,P.clientY0=void 0,P.velocity=void 0,P.speed=void 0,P.swipe=void 0,P.axes=void 0,P.preEnd=void 0,D=D||g.element;var U=g.interactable,K=(U&&U.options||Na).deltaSource,re=Ae(U,D,x),ee=A==="start",ie=A==="end",ue=ee?m(P):g.prevEvent,ae=ee?g.coords.start:ie?{page:ue.page,client:ue.client,timeStamp:g.coords.cur.timeStamp}:g.coords.cur;return P.page=ne({},ae.page),P.client=ne({},ae.client),P.rect=ne({},g.rect),P.timeStamp=ae.timeStamp,ie||(P.page.x-=re.x,P.page.y-=re.y,P.client.x-=re.x,P.client.y-=re.y),P.ctrlKey=y.ctrlKey,P.altKey=y.altKey,P.shiftKey=y.shiftKey,P.metaKey=y.metaKey,P.button=y.button,P.buttons=y.buttons,P.target=D,P.currentTarget=D,P.preEnd=L,P.type=q||x+(A||""),P.interactable=U,P.t0=ee?g.pointers[g.pointers.length-1].downTime:ue.t0,P.x0=g.coords.start.page.x-re.x,P.y0=g.coords.start.page.y-re.y,P.clientX0=g.coords.start.client.x-re.x,P.clientY0=g.coords.start.client.y-re.y,P.delta=ee||ie?{x:0,y:0}:{x:P[K].x-ue[K].x,y:P[K].y-ue[K].y},P.dt=g.coords.delta.timeStamp,P.duration=P.timeStamp-P.t0,P.velocity=ne({},g.coords.velocity[K]),P.speed=zt(P.velocity.x,P.velocity.y),P.swipe=ie||A==="inertiastart"?P.getSwipe():null,P}return l(d,[{key:"getSwipe",value:function(){var g=this._interaction;if(g.prevEvent.speed<600||this.timeStamp-g.prevEvent.timeStamp>150)return null;var y=180*Math.atan2(g.prevEvent.velocityY,g.prevEvent.velocityX)/Math.PI;y<0&&(y+=360);var x=112.5<=y&&y<247.5,A=202.5<=y&&y<337.5;return{up:A,down:!A&&22.5<=y&&y<157.5,left:x,right:!x&&(292.5<=y||y<67.5),angle:y,speed:g.prevEvent.speed,velocity:{x:g.prevEvent.velocityX,y:g.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),d}(Jt);Object.defineProperties(Qn.prototype,{pageX:{get:function(){return this.page.x},set:function(c){this.page.x=c}},pageY:{get:function(){return this.page.y},set:function(c){this.page.y=c}},clientX:{get:function(){return this.client.x},set:function(c){this.client.x=c}},clientY:{get:function(){return this.client.y},set:function(c){this.client.y=c}},dx:{get:function(){return this.delta.x},set:function(c){this.delta.x=c}},dy:{get:function(){return this.delta.y},set:function(c){this.delta.y=c}},velocityX:{get:function(){return this.velocity.x},set:function(c){this.velocity.x=c}},velocityY:{get:function(){return this.velocity.y},set:function(c){this.velocity.y=c}}});var Ll=l(function c(s,d,g,y,x){a(this,c),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=s,this.pointer=d,this.event=g,this.downTime=y,this.downTarget=x}),Pl=function(c){return c.interactable="",c.element="",c.prepared="",c.pointerIsDown="",c.pointerWasMoved="",c._proxy="",c}({}),Ma=function(c){return c.start="",c.move="",c.end="",c.stop="",c.interacting="",c}({}),Gl=0,Ol=function(){function c(s){var d=this,g=s.pointerType,y=s.scopeFire;a(this,c),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=wr(function(P){this.move(P)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=Gl++,this._scopeFire=y,this.pointerType=g;var x=this;this._proxy={};var A=function(P){Object.defineProperty(d._proxy,P,{get:function(){return x[P]}})};for(var D in Pl)A(D);var L=function(P){Object.defineProperty(d._proxy,P,{value:function(){return x[P].apply(x,arguments)}})};for(var q in Ma)L(q);this._scopeFire("interactions:new",{interaction:this})}return l(c,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(s,d,g){var y=this.updatePointer(s,d,g,!0),x=this.pointers[y];this._scopeFire("interactions:down",{pointer:s,event:d,eventTarget:g,pointerIndex:y,pointerInfo:x,type:"down",interaction:this})}},{key:"start",value:function(s,d,g){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(s.name==="gesture"?2:1)||!d.options[s.name].enabled)&&(Hn(this.prepared,s),this.interactable=d,this.element=g,this.rect=d.getRect(g),this.edges=this.prepared.edges?ne({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(s,d,g){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(s,d,g,!1);var y,x,A=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(y=this.coords.cur.client.x-this.coords.start.client.x,x=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=zt(y,x)>this.pointerMoveTolerance);var D,L,q,P=this.getPointerIndex(s),U={pointer:s,pointerIndex:P,pointerInfo:this.pointers[P],event:d,type:"move",eventTarget:g,dx:y,dy:x,duplicate:A,interaction:this};A||(D=this.coords.velocity,L=this.coords.delta,q=Math.max(L.timeStamp/1e3,.001),D.page.x=L.page.x/q,D.page.y=L.page.y/q,D.client.x=L.client.x/q,D.client.y=L.client.y/q,D.timeStamp=q),this._scopeFire("interactions:move",U),A||this.simulation||(this.interacting()&&(U.type=null,this.move(U)),this.pointerWasMoved&&Qt(this.coords.prev,this.coords.cur))}},{key:"move",value:function(s){s&&s.event||Yr(this.coords.delta),(s=ne({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},s||{})).phase="move",this._doPhase(s)}},{key:"pointerUp",value:function(s,d,g,y){var x=this.getPointerIndex(s);x===-1&&(x=this.updatePointer(s,d,g,!1));var A=/cancel$/i.test(d.type)?"cancel":"up";this._scopeFire("interactions:".concat(A),{pointer:s,pointerIndex:x,pointerInfo:this.pointers[x],event:d,eventTarget:g,type:A,curEventTarget:y,interaction:this}),this.simulation||this.end(d),this.removePointer(s,d)}},{key:"documentBlur",value:function(s){this.end(s),this._scopeFire("interactions:blur",{event:s,type:"blur",interaction:this})}},{key:"end",value:function(s){var d;this._ending=!0,s=s||this._latestPointer.event,this.interacting()&&(d=this._doPhase({event:s,interaction:this,phase:"end"})),this._ending=!1,d===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(s){var d=At(s);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:vt(this.pointers,function(g){return g.id===d})}},{key:"getPointerInfo",value:function(s){return this.pointers[this.getPointerIndex(s)]}},{key:"updatePointer",value:function(s,d,g,y){var x,A,D,L=At(s),q=this.getPointerIndex(s),P=this.pointers[q];return y=y!==!1&&(y||/(down|start)$/i.test(d.type)),P?P.pointer=s:(P=new Ll(L,s,d,null,null),q=this.pointers.length,this.pointers.push(P)),Lt(this.coords.cur,this.pointers.map(function(U){return U.pointer}),this._now()),x=this.coords.delta,A=this.coords.prev,D=this.coords.cur,x.page.x=D.page.x-A.page.x,x.page.y=D.page.y-A.page.y,x.client.x=D.client.x-A.client.x,x.client.y=D.client.y-A.client.y,x.timeStamp=D.timeStamp-A.timeStamp,y&&(this.pointerIsDown=!0,P.downTime=this.coords.cur.timeStamp,P.downTarget=g,Vt(this.downPointer,s),this.interacting()||(Qt(this.coords.start,this.coords.cur),Qt(this.coords.prev,this.coords.cur),this.downEvent=d,this.pointerWasMoved=!1)),this._updateLatestPointer(s,d,g),this._scopeFire("interactions:update-pointer",{pointer:s,event:d,eventTarget:g,down:y,pointerInfo:P,pointerIndex:q,interaction:this}),q}},{key:"removePointer",value:function(s,d){var g=this.getPointerIndex(s);if(g!==-1){var y=this.pointers[g];this._scopeFire("interactions:remove-pointer",{pointer:s,event:d,eventTarget:null,pointerIndex:g,pointerInfo:y,interaction:this}),this.pointers.splice(g,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(s,d,g){this._latestPointer.pointer=s,this._latestPointer.event=d,this._latestPointer.eventTarget=g}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(s,d,g,y){return new Qn(this,s,this.prepared.name,d,this.element,g,y)}},{key:"_fireEvent",value:function(s){var d;(d=this.interactable)==null||d.fire(s),(!this.prevEvent||s.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=s)}},{key:"_doPhase",value:function(s){var d=s.event,g=s.phase,y=s.preEnd,x=s.type,A=this.rect;if(A&&g==="move"&&(Ue(this.edges,A,this.coords.delta[this.interactable.options.deltaSource]),A.width=A.right-A.left,A.height=A.bottom-A.top),this._scopeFire("interactions:before-action-".concat(g),s)===!1)return!1;var D=s.iEvent=this._createPreparedEvent(d,g,y,x);return this._scopeFire("interactions:action-".concat(g),s),g==="start"&&(this.prevEvent=D),this._fireEvent(D),this._scopeFire("interactions:after-action-".concat(g),s),!0}},{key:"_now",value:function(){return Date.now()}}]),c}();function Ca(c){Da(c.interaction)}function Da(c){if(!function(d){return!(!d.offset.pending.x&&!d.offset.pending.y)}(c))return!1;var s=c.offset.pending;return Zn(c.coords.cur,s),Zn(c.coords.delta,s),Ue(c.edges,c.rect,s),s.x=0,s.y=0,!0}function Rl(c){var s=c.x,d=c.y;this.offset.pending.x+=s,this.offset.pending.y+=d,this.offset.total.x+=s,this.offset.total.y+=d}function Zn(c,s){var d=c.page,g=c.client,y=s.x,x=s.y;d.x+=y,d.y+=x,g.x+=y,g.y+=x}Ma.offsetBy="";var ql={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(c){c.Interaction.prototype.offsetBy=Rl},listeners:{"interactions:new":function(c){c.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(c){return function(s){s.pointerIsDown&&(Zn(s.coords.cur,s.offset.total),s.offset.pending.x=0,s.offset.pending.y=0)}(c.interaction)},"interactions:before-action-start":Ca,"interactions:before-action-move":Ca,"interactions:before-action-end":function(c){var s=c.interaction;if(Da(s))return s.move({offset:!0}),s.end(),!1},"interactions:stop":function(c){var s=c.interaction;s.offset.total.x=0,s.offset.total.y=0,s.offset.pending.x=0,s.offset.pending.y=0}}},Ia=ql,Bl=function(){function c(s){a(this,c),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=s}return l(c,[{key:"start",value:function(s){var d=this.interaction,g=rn(d);if(!g||!g.enabled)return!1;var y=d.coords.velocity.client,x=zt(y.x,y.y),A=this.modification||(this.modification=new Vn(d));if(A.copyFrom(d.modification),this.t0=d._now(),this.allowResume=g.allowResume,this.v0=x,this.currentOffset={x:0,y:0},this.startCoords=d.coords.cur.page,this.modifierArg=A.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-d.coords.cur.timeStamp<50&&x>g.minSpeed&&x>g.endSpeed)this.startInertia();else{if(A.result=A.setAll(this.modifierArg),!A.result.changed)return!1;this.startSmoothEnd()}return d.modification.result.rect=null,d.offsetBy(this.targetOffset),d._doPhase({interaction:d,event:s,phase:"inertiastart"}),d.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),d.modification.result.rect=null,this.active=!0,d.simulation=this,!0}},{key:"startInertia",value:function(){var s=this,d=this.interaction.coords.velocity.client,g=rn(this.interaction),y=g.resistance,x=-Math.log(g.endSpeed/this.v0)/y;this.targetOffset={x:(d.x-x)/y,y:(d.y-x)/y},this.te=x,this.lambda_v0=y/this.v0,this.one_ve_v0=1-g.endSpeed/this.v0;var A=this.modification,D=this.modifierArg;D.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},A.result=A.setAll(D),A.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+A.result.delta.x,y:this.targetOffset.y+A.result.delta.y}),this.onNextFrame(function(){return s.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var s=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return s.smoothEndTick()})}},{key:"onNextFrame",value:function(s){var d=this;this.timeout=Nt.request(function(){d.active&&s()})}},{key:"inertiaTick",value:function(){var s,d,g,y,x,A,D,L=this,q=this.interaction,P=rn(q).resistance,U=(q._now()-this.t0)/1e3;if(U<this.te){var K,re=1-(Math.exp(-P*U)-this.lambda_v0)/this.one_ve_v0;this.isModified?(s=0,d=0,g=this.targetOffset.x,y=this.targetOffset.y,x=this.modifiedOffset.x,A=this.modifiedOffset.y,K={x:$a(D=re,s,g,x),y:$a(D,d,y,A)}):K={x:this.targetOffset.x*re,y:this.targetOffset.y*re};var ee={x:K.x-this.currentOffset.x,y:K.y-this.currentOffset.y};this.currentOffset.x+=ee.x,this.currentOffset.y+=ee.y,q.offsetBy(ee),q.move(),this.onNextFrame(function(){return L.inertiaTick()})}else q.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var s=this,d=this.interaction,g=d._now()-this.t0,y=rn(d).smoothEndDuration;if(g<y){var x={x:za(g,0,this.targetOffset.x,y),y:za(g,0,this.targetOffset.y,y)},A={x:x.x-this.currentOffset.x,y:x.y-this.currentOffset.y};this.currentOffset.x+=A.x,this.currentOffset.y+=A.y,d.offsetBy(A),d.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return s.smoothEndTick()})}else d.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(s){var d=s.pointer,g=s.event,y=s.eventTarget,x=this.interaction;x.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),x.updatePointer(d,g,y,!0),x._doPhase({interaction:x,event:g,phase:"resume"}),Qt(x.coords.prev,x.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Nt.cancel(this.timeout)}}]),c}();function rn(c){var s=c.interactable,d=c.prepared;return s&&s.options&&d.name&&s.options[d.name].inertia}var Ul={id:"inertia",before:["modifiers","actions"],install:function(c){var s=c.defaults;c.usePlugin(Ia),c.usePlugin(ka),c.actions.phases.inertiastart=!0,c.actions.phases.resume=!0,s.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(c){var s=c.interaction;s.inertia=new Bl(s)},"interactions:before-action-end":function(c){var s=c.interaction,d=c.event;return(!s._interacting||s.simulation||!s.inertia.start(d))&&null},"interactions:down":function(c){var s=c.interaction,d=c.eventTarget,g=s.inertia;if(g.active)for(var y=d;w.element(y);){if(y===s.element){g.resume(c);break}y=W(y)}},"interactions:stop":function(c){var s=c.interaction.inertia;s.active&&s.stop()},"interactions:before-action-resume":function(c){var s=c.interaction.modification;s.stop(c),s.start(c,c.interaction.coords.cur.page),s.applyToInteraction(c)},"interactions:before-action-inertiastart":function(c){return c.interaction.modification.setAndApply(c)},"interactions:action-resume":xr,"interactions:action-inertiastart":xr,"interactions:after-action-inertiastart":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:after-action-resume":function(c){return c.interaction.modification.restoreInteractionCoords(c)}}};function $a(c,s,d,g){var y=1-c;return y*y*s+2*y*c*d+c*c*g}function za(c,s,d,g){return-d*(c/=g)*(c-2)+s}var jl=Ul;function Ta(c,s){for(var d=0;d<s.length;d++){var g=s[d];if(c.immediatePropagationStopped)break;g(c)}}var La=function(){function c(s){a(this,c),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=ne({},s||{})}return l(c,[{key:"fire",value:function(s){var d,g=this.global;(d=this.types[s.type])&&Ta(s,d),!s.propagationStopped&&g&&(d=g[s.type])&&Ta(s,d)}},{key:"on",value:function(s,d){var g=ke(s,d);for(s in g)this.types[s]=Vr(this.types[s]||[],g[s])}},{key:"off",value:function(s,d){var g=ke(s,d);for(s in g){var y=this.types[s];if(y&&y.length)for(var x=0,A=g[s];x<A.length;x++){var D=A[x],L=y.indexOf(D);L!==-1&&y.splice(L,1)}}}},{key:"getRect",value:function(s){return null}}]),c}(),Fl=function(){function c(s){a(this,c),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=s,Vt(this,s)}return l(c,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),c}();function Er(c){return w.object(c)?{capture:!!c.capture,passive:!!c.passive}:{capture:!!c,passive:!1}}function nn(c,s){return c===s||(typeof c=="boolean"?!!s.capture===c&&!s.passive:!!c.capture==!!s.capture&&!!c.passive==!!s.passive)}var Wl={id:"events",install:function(c){var s,d=[],g={},y=[],x={add:A,remove:D,addDelegate:function(P,U,K,re,ee){var ie=Er(ee);if(!g[K]){g[K]=[];for(var ue=0;ue<y.length;ue++){var ae=y[ue];A(ae,K,L),A(ae,K,q,!0)}}var de=g[K],me=Ze(de,function(Ee){return Ee.selector===P&&Ee.context===U});me||(me={selector:P,context:U,listeners:[]},de.push(me)),me.listeners.push({func:re,options:ie})},removeDelegate:function(P,U,K,re,ee){var ie,ue=Er(ee),ae=g[K],de=!1;if(ae)for(ie=ae.length-1;ie>=0;ie--){var me=ae[ie];if(me.selector===P&&me.context===U){for(var Ee=me.listeners,ge=Ee.length-1;ge>=0;ge--){var be=Ee[ge];if(be.func===re&&nn(be.options,ue)){Ee.splice(ge,1),Ee.length||(ae.splice(ie,1),D(U,K,L),D(U,K,q,!0)),de=!0;break}}if(de)break}}},delegateListener:L,delegateUseCapture:q,delegatedEvents:g,documents:y,targets:d,supportsOptions:!1,supportsPassive:!1};function A(P,U,K,re){if(P.addEventListener){var ee=Er(re),ie=Ze(d,function(ue){return ue.eventTarget===P});ie||(ie={eventTarget:P,events:{}},d.push(ie)),ie.events[U]||(ie.events[U]=[]),Ze(ie.events[U],function(ue){return ue.func===K&&nn(ue.options,ee)})||(P.addEventListener(U,K,x.supportsOptions?ee:ee.capture),ie.events[U].push({func:K,options:ee}))}}function D(P,U,K,re){if(P.addEventListener&&P.removeEventListener){var ee=vt(d,function(Pe){return Pe.eventTarget===P}),ie=d[ee];if(ie&&ie.events)if(U!=="all"){var ue=!1,ae=ie.events[U];if(ae){if(K==="all"){for(var de=ae.length-1;de>=0;de--){var me=ae[de];D(P,U,me.func,me.options)}return}for(var Ee=Er(re),ge=0;ge<ae.length;ge++){var be=ae[ge];if(be.func===K&&nn(be.options,Ee)){P.removeEventListener(U,K,x.supportsOptions?Ee:Ee.capture),ae.splice(ge,1),ae.length===0&&(delete ie.events[U],ue=!0);break}}}ue&&!Object.keys(ie.events).length&&d.splice(ee,1)}else for(U in ie.events)ie.events.hasOwnProperty(U)&&D(P,U,"all")}}function L(P,U){for(var K=Er(U),re=new Fl(P),ee=g[P.type],ie=Xr(P)[0],ue=ie;w.element(ue);){for(var ae=0;ae<ee.length;ae++){var de=ee[ae],me=de.selector,Ee=de.context;if(Y(ue,me)&&G(Ee,ie)&&G(Ee,ue)){var ge=de.listeners;re.currentTarget=ue;for(var be=0;be<ge.length;be++){var Pe=ge[be];nn(Pe.options,K)&&Pe.func(re)}}}ue=W(ue)}}function q(P){return L(P,!0)}return(s=c.document)==null||s.createElement("div").addEventListener("test",null,{get capture(){return x.supportsOptions=!0},get passive(){return x.supportsPassive=!0}}),c.events=x,x}},Jn={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(c){for(var s=0,d=Jn.methodOrder;s<d.length;s++){var g=d[s],y=Jn[g](c);if(y)return y}return null},simulationResume:function(c){var s=c.pointerType,d=c.eventType,g=c.eventTarget,y=c.scope;if(!/down|start/i.test(d))return null;for(var x=0,A=y.interactions.list;x<A.length;x++){var D=A[x],L=g;if(D.simulation&&D.simulation.allowResume&&D.pointerType===s)for(;L;){if(L===D.element)return D;L=W(L)}}return null},mouseOrPen:function(c){var s,d=c.pointerId,g=c.pointerType,y=c.eventType,x=c.scope;if(g!=="mouse"&&g!=="pen")return null;for(var A=0,D=x.interactions.list;A<D.length;A++){var L=D[A];if(L.pointerType===g){if(L.simulation&&!Pa(L,d))continue;if(L.interacting())return L;s||(s=L)}}if(s)return s;for(var q=0,P=x.interactions.list;q<P.length;q++){var U=P[q];if(!(U.pointerType!==g||/down/i.test(y)&&U.simulation))return U}return null},hasPointer:function(c){for(var s=c.pointerId,d=0,g=c.scope.interactions.list;d<g.length;d++){var y=g[d];if(Pa(y,s))return y}return null},idle:function(c){for(var s=c.pointerType,d=0,g=c.scope.interactions.list;d<g.length;d++){var y=g[d];if(y.pointers.length===1){var x=y.interactable;if(x&&(!x.options.gesture||!x.options.gesture.enabled))continue}else if(y.pointers.length>=2)continue;if(!y.interacting()&&s===y.pointerType)return y}return null}};function Pa(c,s){return c.pointers.some(function(d){return d.id===s})}var Hl=Jn,ei=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Ga(c,s){return function(d){var g=s.interactions.list,y=Zt(d),x=Xr(d),A=x[0],D=x[1],L=[];if(/^touch/.test(d.type)){s.prevTouchTime=s.now();for(var q=0,P=d.changedTouches;q<P.length;q++){var U=P[q],K={pointer:U,pointerId:At(U),pointerType:y,eventType:d.type,eventTarget:A,curEventTarget:D,scope:s},re=Oa(K);L.push([K.pointer,K.eventTarget,K.curEventTarget,re])}}else{var ee=!1;if(!H.supportsPointerEvent&&/mouse/.test(d.type)){for(var ie=0;ie<g.length&&!ee;ie++)ee=g[ie].pointerType!=="mouse"&&g[ie].pointerIsDown;ee=ee||s.now()-s.prevTouchTime<500||d.timeStamp===0}if(!ee){var ue={pointer:d,pointerId:At(d),pointerType:y,eventType:d.type,curEventTarget:D,eventTarget:A,scope:s},ae=Oa(ue);L.push([ue.pointer,ue.eventTarget,ue.curEventTarget,ae])}}for(var de=0;de<L.length;de++){var me=L[de],Ee=me[0],ge=me[1],be=me[2];me[3][c](Ee,d,ge,be)}}}function Oa(c){var s=c.pointerType,d=c.scope,g={interaction:Hl.search(c),searchDetails:c};return d.fire("interactions:find",g),g.interaction||d.interactions.new({pointerType:s})}function ti(c,s){var d=c.doc,g=c.scope,y=c.options,x=g.interactions.docEvents,A=g.events,D=A[s];for(var L in g.browser.isIOS&&!y.events&&(y.events={passive:!1}),A.delegatedEvents)D(d,L,A.delegateListener),D(d,L,A.delegateUseCapture,!0);for(var q=y&&y.events,P=0;P<x.length;P++){var U=x[P];D(d,U.type,U.listener,q)}}var Kl={id:"core/interactions",install:function(c){for(var s={},d=0;d<ei.length;d++){var g=ei[d];s[g]=Ga(g,c)}var y,x=H.pEventTypes;function A(){for(var D=0,L=c.interactions.list;D<L.length;D++){var q=L[D];if(q.pointerIsDown&&q.pointerType==="touch"&&!q._interacting)for(var P=function(){var re=K[U];c.documents.some(function(ee){return G(ee.doc,re.downTarget)})||q.removePointer(re.pointer,re.event)},U=0,K=q.pointers;U<K.length;U++)P()}}(y=te.PointerEvent?[{type:x.down,listener:A},{type:x.down,listener:s.pointerDown},{type:x.move,listener:s.pointerMove},{type:x.up,listener:s.pointerUp},{type:x.cancel,listener:s.pointerUp}]:[{type:"mousedown",listener:s.pointerDown},{type:"mousemove",listener:s.pointerMove},{type:"mouseup",listener:s.pointerUp},{type:"touchstart",listener:A},{type:"touchstart",listener:s.pointerDown},{type:"touchmove",listener:s.pointerMove},{type:"touchend",listener:s.pointerUp},{type:"touchcancel",listener:s.pointerUp}]).push({type:"blur",listener:function(D){for(var L=0,q=c.interactions.list;L<q.length;L++)q[L].documentBlur(D)}}),c.prevTouchTime=0,c.Interaction=function(D){h(q,D);var L=b(q);function q(){return a(this,q),L.apply(this,arguments)}return l(q,[{key:"pointerMoveTolerance",get:function(){return c.interactions.pointerMoveTolerance},set:function(P){c.interactions.pointerMoveTolerance=P}},{key:"_now",value:function(){return c.now()}}]),q}(Ol),c.interactions={list:[],new:function(D){D.scopeFire=function(q,P){return c.fire(q,P)};var L=new c.Interaction(D);return c.interactions.list.push(L),L},listeners:s,docEvents:y,pointerMoveTolerance:1},c.usePlugin(Aa)},listeners:{"scope:add-document":function(c){return ti(c,"add")},"scope:remove-document":function(c){return ti(c,"remove")},"interactable:unset":function(c,s){for(var d=c.interactable,g=s.interactions.list.length-1;g>=0;g--){var y=s.interactions.list[g];y.interactable===d&&(y.stop(),s.fire("interactions:destroy",{interaction:y}),y.destroy(),s.interactions.list.length>2&&s.interactions.list.splice(g,1))}}},onDocSignal:ti,doOnInteractions:Ga,methodNames:ei},Yl=Kl,Ct=function(c){return c[c.On=0]="On",c[c.Off=1]="Off",c}(Ct||{}),Xl=function(){function c(s,d,g,y){a(this,c),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new La,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=d.actions,this.target=s,this._context=d.context||g,this._win=E(ye(s)?this._context:s),this._doc=this._win.document,this._scopeEvents=y,this.set(d)}return l(c,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(s,d){return w.func(d.onstart)&&this.on("".concat(s,"start"),d.onstart),w.func(d.onmove)&&this.on("".concat(s,"move"),d.onmove),w.func(d.onend)&&this.on("".concat(s,"end"),d.onend),w.func(d.oninertiastart)&&this.on("".concat(s,"inertiastart"),d.oninertiastart),this}},{key:"updatePerActionListeners",value:function(s,d,g){var y,x=this,A=(y=this._actions.map[s])==null?void 0:y.filterEventType,D=function(L){return(A==null||A(L))&&en(L,x._actions)};(w.array(d)||w.object(d))&&this._onOff(Ct.Off,s,d,void 0,D),(w.array(g)||w.object(g))&&this._onOff(Ct.On,s,g,void 0,D)}},{key:"setPerAction",value:function(s,d){var g=this._defaults;for(var y in d){var x=y,A=this.options[s],D=d[x];x==="listeners"&&this.updatePerActionListeners(s,A.listeners,D),w.array(D)?A[x]=Qr(D):w.plainObject(D)?(A[x]=ne(A[x]||{},tr(D)),w.object(g.perAction[x])&&"enabled"in g.perAction[x]&&(A[x].enabled=D.enabled!==!1)):w.bool(D)&&w.object(g.perAction[x])?A[x].enabled=D:A[x]=D}}},{key:"getRect",value:function(s){return s=s||(w.element(this.target)?this.target:null),w.string(this.target)&&(s=s||this._context.querySelector(this.target)),le(s)}},{key:"rectChecker",value:function(s){var d=this;return w.func(s)?(this.getRect=function(g){var y=ne({},s.apply(d,g));return"width"in y||(y.width=y.right-y.left,y.height=y.bottom-y.top),y},this):s===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(s,d){if(ye(d)||w.object(d)){for(var g in this.options[s]=d,this._actions.map)this.options[g][s]=d;return this}return this.options[s]}},{key:"origin",value:function(s){return this._backCompatOption("origin",s)}},{key:"deltaSource",value:function(s){return s==="page"||s==="client"?(this.options.deltaSource=s,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var s=this.target;return w.string(s)?Array.from(this._context.querySelectorAll(s)):w.func(s)&&s.getAllElements?s.getAllElements():w.element(s)?[s]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(s){return this._context===s.ownerDocument||G(this._context,s)}},{key:"testIgnoreAllow",value:function(s,d,g){return!this.testIgnore(s.ignoreFrom,d,g)&&this.testAllow(s.allowFrom,d,g)}},{key:"testAllow",value:function(s,d,g){return!s||!!w.element(g)&&(w.string(s)?J(g,s,d):!!w.element(s)&&G(s,g))}},{key:"testIgnore",value:function(s,d,g){return!(!s||!w.element(g))&&(w.string(s)?J(g,s,d):!!w.element(s)&&G(s,g))}},{key:"fire",value:function(s){return this.events.fire(s),this}},{key:"_onOff",value:function(s,d,g,y,x){w.object(d)&&!w.array(d)&&(y=g,g=null);var A=ke(d,g,x);for(var D in A){D==="wheel"&&(D=H.wheelEvent);for(var L=0,q=A[D];L<q.length;L++){var P=q[L];en(D,this._actions)?this.events[s===Ct.On?"on":"off"](D,P):w.string(this.target)?this._scopeEvents[s===Ct.On?"addDelegate":"removeDelegate"](this.target,this._context,D,P,y):this._scopeEvents[s===Ct.On?"add":"remove"](this.target,D,P,y)}}return this}},{key:"on",value:function(s,d,g){return this._onOff(Ct.On,s,d,g)}},{key:"off",value:function(s,d,g){return this._onOff(Ct.Off,s,d,g)}},{key:"set",value:function(s){var d=this._defaults;for(var g in w.object(s)||(s={}),this.options=tr(d.base),this._actions.methodDict){var y=g,x=this._actions.methodDict[y];this.options[y]={},this.setPerAction(y,ne(ne({},d.perAction),d.actions[y])),this[x](s[y])}for(var A in s)A!=="getRect"?w.func(this[A])&&this[A](s[A]):this.rectChecker(s.getRect);return this}},{key:"unset",value:function(){if(w.string(this.target))for(var s in this._scopeEvents.delegatedEvents)for(var d=this._scopeEvents.delegatedEvents[s],g=d.length-1;g>=0;g--){var y=d[g],x=y.selector,A=y.context,D=y.listeners;x===this.target&&A===this._context&&d.splice(g,1);for(var L=D.length-1;L>=0;L--)this._scopeEvents.removeDelegate(this.target,this._context,s,D[L][0],D[L][1])}else this._scopeEvents.remove(this.target,"all")}}]),c}(),Vl=function(){function c(s){var d=this;a(this,c),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=s,s.addListeners({"interactable:unset":function(g){var y=g.interactable,x=y.target,A=w.string(x)?d.selectorMap[x]:x[d.scope.id],D=vt(A,function(L){return L===y});A.splice(D,1)}})}return l(c,[{key:"new",value:function(s,d){d=ne(d||{},{actions:this.scope.actions});var g=new this.scope.Interactable(s,d,this.scope.document,this.scope.events);return this.scope.addDocument(g._doc),this.list.push(g),w.string(s)?(this.selectorMap[s]||(this.selectorMap[s]=[]),this.selectorMap[s].push(g)):(g.target[this.scope.id]||Object.defineProperty(s,this.scope.id,{value:[],configurable:!0}),s[this.scope.id].push(g)),this.scope.fire("interactable:new",{target:s,options:d,interactable:g,win:this.scope._win}),g}},{key:"getExisting",value:function(s,d){var g=d&&d.context||this.scope.document,y=w.string(s),x=y?this.selectorMap[s]:s[this.scope.id];if(x)return Ze(x,function(A){return A._context===g&&(y||A.inContext(s))})}},{key:"forEachMatch",value:function(s,d){for(var g=0,y=this.list;g<y.length;g++){var x=y[g],A=void 0;if((w.string(x.target)?w.element(s)&&Y(s,x.target):s===x.target)&&x.inContext(s)&&(A=d(x)),A!==void 0)return A}}}]),c}(),Ql=function(){function c(){var s=this;a(this,c),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=H,this.defaults=tr(Na),this.Eventable=La,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(g){var y=function x(A,D){var L=g.interactables.getExisting(A,D);return L||((L=g.interactables.new(A,D)).events.global=x.globalEvents),L};return y.getPointerAverage=kt,y.getTouchBBox=Pt,y.getTouchDistance=Gt,y.getTouchAngle=Ot,y.getElementRect=le,y.getElementClientRect=ce,y.matchesSelector=Y,y.closest=B,y.globalEvents={},y.version="1.10.27",y.scope=g,y.use=function(x,A){return this.scope.usePlugin(x,A),this},y.isSet=function(x,A){return!!this.scope.interactables.get(x,A&&A.context)},y.on=wr(function(x,A,D){if(w.string(x)&&x.search(" ")!==-1&&(x=x.trim().split(/ +/)),w.array(x)){for(var L=0,q=x;L<q.length;L++){var P=q[L];this.on(P,A,D)}return this}if(w.object(x)){for(var U in x)this.on(U,x[U],A);return this}return en(x,this.scope.actions)?this.globalEvents[x]?this.globalEvents[x].push(A):this.globalEvents[x]=[A]:this.scope.events.add(this.scope.document,x,A,{options:D}),this},"The interact.on() method is being deprecated"),y.off=wr(function(x,A,D){if(w.string(x)&&x.search(" ")!==-1&&(x=x.trim().split(/ +/)),w.array(x)){for(var L=0,q=x;L<q.length;L++){var P=q[L];this.off(P,A,D)}return this}if(w.object(x)){for(var U in x)this.off(U,x[U],A);return this}var K;return en(x,this.scope.actions)?x in this.globalEvents&&(K=this.globalEvents[x].indexOf(A))!==-1&&this.globalEvents[x].splice(K,1):this.scope.events.remove(this.scope.document,x,A,D),this},"The interact.off() method is being deprecated"),y.debug=function(){return this.scope},y.supportsTouch=function(){return H.supportsTouch},y.supportsPointerEvent=function(){return H.supportsPointerEvent},y.stop=function(){for(var x=0,A=this.scope.interactions.list;x<A.length;x++)A[x].stop();return this},y.pointerMoveTolerance=function(x){return w.number(x)?(this.scope.interactions.pointerMoveTolerance=x,this):this.scope.interactions.pointerMoveTolerance},y.addDocument=function(x,A){this.scope.addDocument(x,A)},y.removeDocument=function(x){this.scope.removeDocument(x)},y}(this),this.InteractEvent=Qn,this.Interactable=void 0,this.interactables=new Vl(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(g){return s.removeDocument(g.target)};var d=this;this.Interactable=function(g){h(x,g);var y=b(x);function x(){return a(this,x),y.apply(this,arguments)}return l(x,[{key:"_defaults",get:function(){return d.defaults}},{key:"set",value:function(A){return S(p(x.prototype),"set",this).call(this,A),d.fire("interactable:set",{options:A,interactable:this}),this}},{key:"unset",value:function(){S(p(x.prototype),"unset",this).call(this);var A=d.interactables.list.indexOf(this);A<0||(d.interactables.list.splice(A,1),d.fire("interactable:unset",{interactable:this}))}}]),x}(Xl)}return l(c,[{key:"addListeners",value:function(s,d){this.listenerMaps.push({id:d,map:s})}},{key:"fire",value:function(s,d){for(var g=0,y=this.listenerMaps;g<y.length;g++){var x=y[g].map[s];if(x&&x(d,this,s)===!1)return!1}}},{key:"init",value:function(s){return this.isInitialized?this:function(d,g){return d.isInitialized=!0,w.window(g)&&$(g),te.init(g),H.init(g),Nt.init(g),d.window=g,d.document=g.document,d.usePlugin(Yl),d.usePlugin(Wl),d}(this,s)}},{key:"pluginIsInstalled",value:function(s){var d=s.id;return d?!!this._plugins.map[d]:this._plugins.list.indexOf(s)!==-1}},{key:"usePlugin",value:function(s,d){if(!this.isInitialized)return this;if(this.pluginIsInstalled(s))return this;if(s.id&&(this._plugins.map[s.id]=s),this._plugins.list.push(s),s.install&&s.install(this,d),s.listeners&&s.before){for(var g=0,y=this.listenerMaps.length,x=s.before.reduce(function(D,L){return D[L]=!0,D[Ra(L)]=!0,D},{});g<y;g++){var A=this.listenerMaps[g].id;if(A&&(x[A]||x[Ra(A)]))break}this.listenerMaps.splice(g,0,{id:s.id,map:s.listeners})}else s.listeners&&this.listenerMaps.push({id:s.id,map:s.listeners});return this}},{key:"addDocument",value:function(s,d){if(this.getDocIndex(s)!==-1)return!1;var g=E(s);d=d?ne({},d):{},this.documents.push({doc:s,options:d}),this.events.documents.push(s),s!==this.document&&this.events.add(g,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:s,window:g,scope:this,options:d})}},{key:"removeDocument",value:function(s){var d=this.getDocIndex(s),g=E(s),y=this.documents[d].options;this.events.remove(g,"unload",this.onWindowUnload),this.documents.splice(d,1),this.events.documents.splice(d,1),this.fire("scope:remove-document",{doc:s,window:g,scope:this,options:y})}},{key:"getDocIndex",value:function(s){for(var d=0;d<this.documents.length;d++)if(this.documents[d].doc===s)return d;return-1}},{key:"getDocOptions",value:function(s){var d=this.getDocIndex(s);return d===-1?null:this.documents[d].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),c}();function Ra(c){return c&&c.replace(/\/.*$/,"")}var qa=new Ql,Le=qa.interactStatic,Zl=typeof globalThis<"u"?globalThis:window;qa.init(Zl);var Jl=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(c){var s=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(g){var y=g[0],x=g[1];return y in c||x in c}),d=function(g,y){for(var x=c.range,A=c.limits,D=A===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:A,L=c.offset,q=L===void 0?{x:0,y:0}:L,P={range:x,grid:c,x:null,y:null},U=0;U<s.length;U++){var K=s[U],re=K[0],ee=K[1],ie=Math.round((g-q.x)/c[re]),ue=Math.round((y-q.y)/c[ee]);P[re]=Math.max(D.left,Math.min(D.right,ie*c[re]+q.x)),P[ee]=Math.max(D.top,Math.min(D.bottom,ue*c[ee]+q.y))}return P};return d.grid=c,d.coordFields=s,d}}),ed={id:"snappers",install:function(c){var s=c.interactStatic;s.snappers=ne(s.snappers||{},Jl),s.createSnapGrid=s.snappers.grid}},td=ed,rd={start:function(c){var s=c.state,d=c.rect,g=c.edges,y=c.pageCoords,x=s.options,A=x.ratio,D=x.enabled,L=s.options,q=L.equalDelta,P=L.modifiers;A==="preserve"&&(A=d.width/d.height),s.startCoords=ne({},y),s.startRect=ne({},d),s.ratio=A,s.equalDelta=q;var U=s.linkedEdges={top:g.top||g.left&&!g.bottom,left:g.left||g.top&&!g.right,bottom:g.bottom||g.right&&!g.top,right:g.right||g.bottom&&!g.left};if(s.xIsPrimaryAxis=!(!g.left&&!g.right),s.equalDelta){var K=(U.left?1:-1)*(U.top?1:-1);s.edgeSign={x:K,y:K}}else s.edgeSign={x:U.left?-1:1,y:U.top?-1:1};if(D!==!1&&ne(g,U),P!=null&&P.length){var re=new Vn(c.interaction);re.copyFrom(c.interaction.modification),re.prepareStates(P),s.subModification=re,re.startAll(n({},c))}},set:function(c){var s=c.state,d=c.rect,g=c.coords,y=s.linkedEdges,x=ne({},g),A=s.equalDelta?nd:id;if(ne(c.edges,y),A(s,s.xIsPrimaryAxis,g,d),!s.subModification)return null;var D=ne({},d);Ue(y,D,{x:g.x-x.x,y:g.y-x.y});var L=s.subModification.setAll(n(n({},c),{},{rect:D,edges:y,pageCoords:g,prevCoords:g,prevRect:D})),q=L.delta;return L.changed&&(A(s,Math.abs(q.x)>Math.abs(q.y),L.coords,L.rect),ne(g,L.coords)),L.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function nd(c,s,d){var g=c.startCoords,y=c.edgeSign;s?d.y=g.y+(d.x-g.x)*y.y:d.x=g.x+(d.y-g.y)*y.x}function id(c,s,d,g){var y=c.startRect,x=c.startCoords,A=c.ratio,D=c.edgeSign;if(s){var L=g.width/A;d.y=x.y+(L-y.height)*D.y}else{var q=g.height*A;d.x=x.x+(q-y.width)*D.x}}var od=Mt(rd,"aspectRatio"),Ba=function(){};Ba._defaults={};var on=Ba;function Bt(c,s,d){return w.func(c)?Se(c,s.interactable,s.element,[d.x,d.y,s]):Se(c,s.interactable,s.element)}var an={start:function(c){var s=c.rect,d=c.startOffset,g=c.state,y=c.interaction,x=c.pageCoords,A=g.options,D=A.elementRect,L=ne({left:0,top:0,right:0,bottom:0},A.offset||{});if(s&&D){var q=Bt(A.restriction,y,x);if(q){var P=q.right-q.left-s.width,U=q.bottom-q.top-s.height;P<0&&(L.left+=P,L.right+=P),U<0&&(L.top+=U,L.bottom+=U)}L.left+=d.left-s.width*D.left,L.top+=d.top-s.height*D.top,L.right+=d.right-s.width*(1-D.right),L.bottom+=d.bottom-s.height*(1-D.bottom)}g.offset=L},set:function(c){var s=c.coords,d=c.interaction,g=c.state,y=g.options,x=g.offset,A=Bt(y.restriction,d,s);if(A){var D=function(L){return!L||"left"in L&&"top"in L||((L=ne({},L)).left=L.x||0,L.top=L.y||0,L.right=L.right||L.left+L.width,L.bottom=L.bottom||L.top+L.height),L}(A);s.x=Math.max(Math.min(D.right-x.right,s.x),D.left+x.left),s.y=Math.max(Math.min(D.bottom-x.bottom,s.y),D.top+x.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},ad=Mt(an,"restrict"),Ua={top:1/0,left:1/0,bottom:-1/0,right:-1/0},ja={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Fa(c,s){for(var d=0,g=["top","left","bottom","right"];d<g.length;d++){var y=g[d];y in c||(c[y]=s[y])}return c}var _r={noInner:Ua,noOuter:ja,start:function(c){var s,d=c.interaction,g=c.startOffset,y=c.state,x=y.options;x&&(s=$e(Bt(x.offset,d,d.coords.start.page))),s=s||{x:0,y:0},y.offset={top:s.y+g.top,left:s.x+g.left,bottom:s.y-g.bottom,right:s.x-g.right}},set:function(c){var s=c.coords,d=c.edges,g=c.interaction,y=c.state,x=y.offset,A=y.options;if(d){var D=ne({},s),L=Bt(A.inner,g,D)||{},q=Bt(A.outer,g,D)||{};Fa(L,Ua),Fa(q,ja),d.top?s.y=Math.min(Math.max(q.top+x.top,D.y),L.top+x.top):d.bottom&&(s.y=Math.max(Math.min(q.bottom+x.bottom,D.y),L.bottom+x.bottom)),d.left?s.x=Math.min(Math.max(q.left+x.left,D.x),L.left+x.left):d.right&&(s.x=Math.max(Math.min(q.right+x.right,D.x),L.right+x.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},sd=Mt(_r,"restrictEdges"),ud=ne({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(c){}},an.defaults),cd=Mt({start:an.start,set:an.set,defaults:ud},"restrictRect"),ld={width:-1/0,height:-1/0},dd={width:1/0,height:1/0},hd=Mt({start:function(c){return _r.start(c)},set:function(c){var s=c.interaction,d=c.state,g=c.rect,y=c.edges,x=d.options;if(y){var A=Qe(Bt(x.min,s,c.coords))||ld,D=Qe(Bt(x.max,s,c.coords))||dd;d.options={endOnly:x.endOnly,inner:ne({},_r.noInner),outer:ne({},_r.noOuter)},y.top?(d.options.inner.top=g.bottom-A.height,d.options.outer.top=g.bottom-D.height):y.bottom&&(d.options.inner.bottom=g.top+A.height,d.options.outer.bottom=g.top+D.height),y.left?(d.options.inner.left=g.right-A.width,d.options.outer.left=g.right-D.width):y.right&&(d.options.inner.right=g.left+A.width,d.options.outer.right=g.left+D.width),_r.set(c),d.options=x}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),ri={start:function(c){var s,d=c.interaction,g=c.interactable,y=c.element,x=c.rect,A=c.state,D=c.startOffset,L=A.options,q=L.offsetWithOrigin?function(K){var re=K.interaction.element,ee=$e(Se(K.state.options.origin,null,null,[re])),ie=ee||Ae(K.interactable,re,K.interaction.prepared.name);return ie}(c):{x:0,y:0};if(L.offset==="startCoords")s={x:d.coords.start.page.x,y:d.coords.start.page.y};else{var P=Se(L.offset,g,y,[d]);(s=$e(P)||{x:0,y:0}).x+=q.x,s.y+=q.y}var U=L.relativePoints;A.offsets=x&&U&&U.length?U.map(function(K,re){return{index:re,relativePoint:K,x:D.left-x.width*K.x+s.x,y:D.top-x.height*K.y+s.y}}):[{index:0,relativePoint:null,x:s.x,y:s.y}]},set:function(c){var s=c.interaction,d=c.coords,g=c.state,y=g.options,x=g.offsets,A=Ae(s.interactable,s.element,s.prepared.name),D=ne({},d),L=[];y.offsetWithOrigin||(D.x-=A.x,D.y-=A.y);for(var q=0,P=x;q<P.length;q++)for(var U=P[q],K=D.x-U.x,re=D.y-U.y,ee=0,ie=y.targets.length;ee<ie;ee++){var ue=y.targets[ee],ae=void 0;(ae=w.func(ue)?ue(K,re,s._proxy,U,ee):ue)&&L.push({x:(w.number(ae.x)?ae.x:K)+U.x,y:(w.number(ae.y)?ae.y:re)+U.y,range:w.number(ae.range)?ae.range:y.range,source:ue,index:ee,offset:U})}for(var de={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},me=0;me<L.length;me++){var Ee=L[me],ge=Ee.range,be=Ee.x-D.x,Pe=Ee.y-D.y,Ne=zt(be,Pe),je=Ne<=ge;ge===1/0&&de.inRange&&de.range!==1/0&&(je=!1),de.target&&!(je?de.inRange&&ge!==1/0?Ne/ge<de.distance/de.range:ge===1/0&&de.range!==1/0||Ne<de.distance:!de.inRange&&Ne<de.distance)||(de.target=Ee,de.distance=Ne,de.range=ge,de.inRange=je,de.delta.x=be,de.delta.y=Pe)}return de.inRange&&(d.x=de.target.x,d.y=de.target.y),g.closest=de,de},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},fd=Mt(ri,"snap"),sn={start:function(c){var s=c.state,d=c.edges,g=s.options;if(!d)return null;c.state={options:{targets:null,relativePoints:[{x:d.left?0:1,y:d.top?0:1}],offset:g.offset||"self",origin:{x:0,y:0},range:g.range}},s.targetFields=s.targetFields||[["width","height"],["x","y"]],ri.start(c),s.offsets=c.state.offsets,c.state=s},set:function(c){var s=c.interaction,d=c.state,g=c.coords,y=d.options,x=d.offsets,A={x:g.x-x[0].x,y:g.y-x[0].y};d.options=ne({},y),d.options.targets=[];for(var D=0,L=y.targets||[];D<L.length;D++){var q=L[D],P=void 0;if(P=w.func(q)?q(A.x,A.y,s):q){for(var U=0,K=d.targetFields;U<K.length;U++){var re=K[U],ee=re[0],ie=re[1];if(ee in P||ie in P){P.x=P[ee],P.y=P[ie];break}}d.options.targets.push(P)}}var ue=ri.set(c);return d.options=y,ue},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},pd=Mt(sn,"snapSize"),ni={aspectRatio:od,restrictEdges:sd,restrict:ad,restrictRect:cd,restrictSize:hd,snapEdges:Mt({start:function(c){var s=c.edges;return s?(c.state.targetFields=c.state.targetFields||[[s.left?"left":"right",s.top?"top":"bottom"]],sn.start(c)):null},set:sn.set,defaults:ne(tr(sn.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:fd,snapSize:pd,spring:on,avoid:on,transform:on,rubberband:on},gd={id:"modifiers",install:function(c){var s=c.interactStatic;for(var d in c.usePlugin(ka),c.usePlugin(td),s.modifiers=ni,ni){var g=ni[d],y=g._defaults,x=g._methods;y._methods=x,c.defaults.perAction[d]=y}}},vd=gd,Wa=function(c){h(d,c);var s=b(d);function d(g,y,x,A,D,L){var q;if(a(this,d),Vt(m(q=s.call(this,D)),x),x!==y&&Vt(m(q),y),q.timeStamp=L,q.originalEvent=x,q.type=g,q.pointerId=At(y),q.pointerType=Zt(y),q.target=A,q.currentTarget=null,g==="tap"){var P=D.getPointerIndex(y);q.dt=q.timeStamp-D.pointers[P].downTime;var U=q.timeStamp-D.tapTime;q.double=!!D.prevTap&&D.prevTap.type!=="doubletap"&&D.prevTap.target===q.target&&U<500}else g==="doubletap"&&(q.dt=y.timeStamp-D.tapTime,q.double=!0);return q}return l(d,[{key:"_subtractOrigin",value:function(g){var y=g.x,x=g.y;return this.pageX-=y,this.pageY-=x,this.clientX-=y,this.clientY-=x,this}},{key:"_addOrigin",value:function(g){var y=g.x,x=g.y;return this.pageX+=y,this.pageY+=x,this.clientX+=y,this.clientY+=x,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),d}(Jt),Sr={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(c){c.pointerEvents=Sr,c.defaults.actions.pointerEvents=Sr.defaults,ne(c.actions.phaselessTypes,Sr.types)},listeners:{"interactions:new":function(c){var s=c.interaction;s.prevTap=null,s.tapTime=0},"interactions:update-pointer":function(c){var s=c.down,d=c.pointerInfo;!s&&d.hold||(d.hold={duration:1/0,timeout:null})},"interactions:move":function(c,s){var d=c.interaction,g=c.pointer,y=c.event,x=c.eventTarget;c.duplicate||d.pointerIsDown&&!d.pointerWasMoved||(d.pointerIsDown&&ii(c),Dt({interaction:d,pointer:g,event:y,eventTarget:x,type:"move"},s))},"interactions:down":function(c,s){(function(d,g){for(var y=d.interaction,x=d.pointer,A=d.event,D=d.eventTarget,L=d.pointerIndex,q=y.pointers[L].hold,P=he(D),U={interaction:y,pointer:x,event:A,eventTarget:D,type:"hold",targets:[],path:P,node:null},K=0;K<P.length;K++){var re=P[K];U.node=re,g.fire("pointerEvents:collect-targets",U)}if(U.targets.length){for(var ee=1/0,ie=0,ue=U.targets;ie<ue.length;ie++){var ae=ue[ie].eventable.options.holdDuration;ae<ee&&(ee=ae)}q.duration=ee,q.timeout=setTimeout(function(){Dt({interaction:y,eventTarget:D,pointer:x,event:A,type:"hold"},g)},ee)}})(c,s),Dt(c,s)},"interactions:up":function(c,s){ii(c),Dt(c,s),function(d,g){var y=d.interaction,x=d.pointer,A=d.event,D=d.eventTarget;y.pointerWasMoved||Dt({interaction:y,eventTarget:D,pointer:x,event:A,type:"tap"},g)}(c,s)},"interactions:cancel":function(c,s){ii(c),Dt(c,s)}},PointerEvent:Wa,fire:Dt,collectEventTargets:Ha,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Dt(c,s){var d=c.interaction,g=c.pointer,y=c.event,x=c.eventTarget,A=c.type,D=c.targets,L=D===void 0?Ha(c,s):D,q=new Wa(A,g,y,x,d,s.now());s.fire("pointerEvents:new",{pointerEvent:q});for(var P={interaction:d,pointer:g,event:y,eventTarget:x,targets:L,type:A,pointerEvent:q},U=0;U<L.length;U++){var K=L[U];for(var re in K.props||{})q[re]=K.props[re];var ee=Ae(K.eventable,K.node);if(q._subtractOrigin(ee),q.eventable=K.eventable,q.currentTarget=K.node,K.eventable.fire(q),q._addOrigin(ee),q.immediatePropagationStopped||q.propagationStopped&&U+1<L.length&&L[U+1].node!==q.currentTarget)break}if(s.fire("pointerEvents:fired",P),A==="tap"){var ie=q.double?Dt({interaction:d,pointer:g,event:y,eventTarget:x,type:"doubletap"},s):q;d.prevTap=ie,d.tapTime=ie.timeStamp}return q}function Ha(c,s){var d=c.interaction,g=c.pointer,y=c.event,x=c.eventTarget,A=c.type,D=d.getPointerIndex(g),L=d.pointers[D];if(A==="tap"&&(d.pointerWasMoved||!L||L.downTarget!==x))return[];for(var q=he(x),P={interaction:d,pointer:g,event:y,eventTarget:x,type:A,path:q,targets:[],node:null},U=0;U<q.length;U++){var K=q[U];P.node=K,s.fire("pointerEvents:collect-targets",P)}return A==="hold"&&(P.targets=P.targets.filter(function(re){var ee,ie;return re.eventable.options.holdDuration===((ee=d.pointers[D])==null||(ie=ee.hold)==null?void 0:ie.duration)})),P.targets}function ii(c){var s=c.interaction,d=c.pointerIndex,g=s.pointers[d].hold;g&&g.timeout&&(clearTimeout(g.timeout),g.timeout=null)}var yd=Object.freeze({__proto__:null,default:Sr});function md(c){var s=c.interaction;s.holdIntervalHandle&&(clearInterval(s.holdIntervalHandle),s.holdIntervalHandle=null)}var bd={id:"pointer-events/holdRepeat",install:function(c){c.usePlugin(Sr);var s=c.pointerEvents;s.defaults.holdRepeatInterval=0,s.types.holdrepeat=c.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(c,s){return c["pointerEvents:".concat(s)]=md,c},{"pointerEvents:new":function(c){var s=c.pointerEvent;s.type==="hold"&&(s.count=(s.count||0)+1)},"pointerEvents:fired":function(c,s){var d=c.interaction,g=c.pointerEvent,y=c.eventTarget,x=c.targets;if(g.type==="hold"&&x.length){var A=x[0].eventable.options.holdRepeatInterval;A<=0||(d.holdIntervalHandle=setTimeout(function(){s.pointerEvents.fire({interaction:d,eventTarget:y,type:"hold",pointer:g,event:g},s)},A))}}})},wd=bd,xd={id:"pointer-events/interactableTargets",install:function(c){var s=c.Interactable;s.prototype.pointerEvents=function(g){return ne(this.events.options,g),this};var d=s.prototype._backCompatOption;s.prototype._backCompatOption=function(g,y){var x=d.call(this,g,y);return x===this&&(this.events.options[g]=y),x}},listeners:{"pointerEvents:collect-targets":function(c,s){var d=c.targets,g=c.node,y=c.type,x=c.eventTarget;s.interactables.forEachMatch(g,function(A){var D=A.events,L=D.options;D.types[y]&&D.types[y].length&&A.testIgnoreAllow(L,g,x)&&d.push({node:g,eventable:D,props:{interactable:A}})})},"interactable:new":function(c){var s=c.interactable;s.events.getRect=function(d){return s.getRect(d)}},"interactable:set":function(c,s){var d=c.interactable,g=c.options;ne(d.events.options,s.pointerEvents.defaults),ne(d.events.options,g.pointerEvents||{})}}},Ed=xd,_d={id:"pointer-events",install:function(c){c.usePlugin(yd),c.usePlugin(wd),c.usePlugin(Ed)}},Sd=_d,Ad={id:"reflow",install:function(c){var s=c.Interactable;c.actions.phases.reflow=!0,s.prototype.reflow=function(d){return function(g,y,x){for(var A=g.getAllElements(),D=x.window.Promise,L=D?[]:null,q=function(){var U=A[P],K=g.getRect(U);if(!K)return 1;var re,ee=Ze(x.interactions.list,function(ae){return ae.interacting()&&ae.interactable===g&&ae.element===U&&ae.prepared.name===y.name});if(ee)ee.move(),L&&(re=ee._reflowPromise||new D(function(ae){ee._reflowResolve=ae}));else{var ie=Qe(K),ue=function(ae){return{coords:ae,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:ie.x,y:ie.y},client:{x:ie.x,y:ie.y},timeStamp:x.now()});re=function(ae,de,me,Ee,ge){var be=ae.interactions.new({pointerType:"reflow"}),Pe={interaction:be,event:ge,pointer:ge,eventTarget:me,phase:"reflow"};be.interactable=de,be.element=me,be.prevEvent=ge,be.updatePointer(ge,ge,me,!0),Yr(be.coords.delta),Hn(be.prepared,Ee),be._doPhase(Pe);var Ne=ae.window,je=Ne.Promise,Je=je?new je(function(bt){be._reflowResolve=bt}):void 0;return be._reflowPromise=Je,be.start(Ee,de,me),be._interacting?(be.move(Pe),be.end(ge)):(be.stop(),be._reflowResolve()),be.removePointer(ge,ge),Je}(x,g,U,y,ue)}L&&L.push(re)},P=0;P<A.length&&!q();P++);return L&&D.all(L).then(function(){return g})}(this,d,c)}},listeners:{"interactions:stop":function(c,s){var d=c.interaction;d.pointerType==="reflow"&&(d._reflowResolve&&d._reflowResolve(),function(g,y){g.splice(g.indexOf(y),1)}(s.interactions.list,d))}}},kd=Ad;if(Le.use(Aa),Le.use(Ia),Le.use(Sd),Le.use(jl),Le.use(vd),Le.use(Il),Le.use(wl),Le.use(El),Le.use(kd),Le.default=Le,o(r)==="object"&&r)try{r.exports=Le}catch{}return Le.default=Le,Le})}(Pr,Pr.exports)),Pr.exports}var p0=f0();const g0=We(p0),Ce=document;class v0{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.mettric=new gl(e),this.panels={info:Ce.getElementById("floating-panel"),tools:Ce.getElementById("tools-panel")},this.handels={info:"#info",tools:"#tools"},this.addEventListeners(),this.makePanelsDraggable(),this.listeners(),this.contexMenu()}init(){this.togglePanel("info","#panel-btn .check",this.settings.info_panel),this.togglePanel("tools","#tools-btn .check",this.settings.tools_panel)}contexMenu(){Ce.getElementById("custom-context-menu"),Ce.addEventListener("contextmenu",e=>{e.preventDefault();const t=Ce.getElementById("custom-context-menu"),n=t.offsetWidth,o=t.offsetHeight,a=window.innerWidth,u=window.innerHeight;let l=e.pageX,f=e.pageY;l+n>a&&(l-=n),f+o>u&&(f-=o),t.style.left=`${l}px`,t.style.top=`${f}px`,t.style.display="block"}),Ce.addEventListener("click",()=>{Ce.getElementById("custom-context-menu").style.display="none"})}togglePanel(e,t,n){const o=this.panels[e];Ce.querySelector(t).classList.toggle("hidden",!n),o.style.display=n?"flex":"none",n||this.resetPanel(o)}resetPanel(e){e.style.transform="translate(0px, 0px)",e.setAttribute("data-x",0),e.setAttribute("data-y",0)}addEventListeners(){const e=Ce.querySelector("#floating-panel .close"),t=Ce.querySelector("#floating-panel .max"),n=Ce.querySelector("#tools-panel .close");e&&e.addEventListener("click",()=>{this.eventBus.emit("toggleSetting",{key:"info_panel"})}),t&&t.addEventListener("click",()=>{this.resetPanel(this.panels.info),Ce.querySelector("#floating-panel").classList.toggle("MAX")}),n&&n.addEventListener("click",()=>{this.eventBus.emit("toggleSetting",{key:"tools_panel"})})}makePanelsDraggable(){Object.keys(this.panels).forEach(e=>{this.panels[e]&&this.handels[e]&&this.makeDraggable(this.panels[e],this.handels[e])})}makeDraggable(e,t){g0(e).draggable({allowFrom:t,listeners:{move(n){const o=n.target;let a=(parseFloat(o.getAttribute("data-x"))||0)+n.dx,u=(parseFloat(o.getAttribute("data-y"))||0)+n.dy;o.style.transform=`translate(${a}px, ${u}px)`,o.setAttribute("data-x",a),o.setAttribute("data-y",u)}}})}listeners(){Ce.querySelector("widgets #tools-panel .scale").addEventListener("click",e=>{this.eventBus.emit("toggleSetting",{key:"scale"})}),Ce.querySelector("widgets #tools-panel .tree").addEventListener("click",e=>{this.eventBus.emit("toggleSetting",{key:"tree"})}),Ce.querySelector("widgets #tools-panel .force").addEventListener("click",e=>{this.eventBus.emit("toggleSetting",{key:"forceSimulation"})}),Ce.querySelector("widgets #tools-panel .panning").addEventListener("click",e=>{this.eventBus.emit("toggleSetting",{key:"panning"})}),Ce.querySelector("widgets #tools-panel .select").addEventListener("click",e=>{this.eventBus.emit("toggleSetting",{key:"select"})}),Ce.querySelector("widgets #tools-panel .component").addEventListener("click",e=>{this.eventBus.emit("toggleSetting",{key:"component"})}),Ce.querySelector("widgets #tools-panel .color-picker").addEventListener("click",e=>{this.eventBus.emit("toggleSetting",{key:"colorPicker"})})}}class y0{constructor(e,t){this.app=e,this.settings=e.settings,this.canvas=e.canvas,this.ctx=e._canvas.ctx,this.selection={x:0,y:0,width:0,height:0,active:!1},this.scale={isDragging:!1,active:!1,activeHandle:null,scaleData:{},rect:{x:100,y:100,width:200,height:150},prevMouse:{x:0,y:0},offsetX:0,offsetY:0,handleSize:10,handles:["nw","n","ne","e","se","s","sw","w"],cursorMap:{nw:"nwse-resize",n:"ns-resize",ne:"nesw-resize",e:"ew-resize",se:"nwse-resize",s:"ns-resize",sw:"nesw-resize",w:"ew-resize"}}}init(){this.canvas.addEventListener("mousedown",this.startSelection.bind(this)),this.canvas.addEventListener("mousemove",this.updateSelection.bind(this)),this.canvas.addEventListener("mouseup",this.endSelection.bind(this)),this.app.drawGraph()}draw(){const e=this.selection;(this.settings.select||this.settings.scale)&&(e.active&&this.drawSelect(this.selection),this.settings.scale&&this.drawScale())}drawSelect(e){if(!e)return;const t=this.ctx;t.fillStyle="rgba(0, 0, 0, 0.1)",t.fillRect(e.x,e.y,e.width,e.height),t.strokeStyle="rgba(0, 0, 255, 0.7)",t.lineWidth=2,t.setLineDash([5,5]),t.strokeRect(e.x,e.y,e.width,e.height),t.setLineDash([])}drawScale(){this.scale.active&&this.drawScaleBox(this.scale.rect,this.ctx)}startSelection(e){if(this.settings.select||this.settings.scale){const t=this.selection,[n,o]=Ye(e,this.canvas);if(t.x=n,t.y=o,t.width=0,t.height=0,t.active=!this.scale.active,this.settings.scale&&this.scale.active){this.app.graphManager.saveGraphState();const[a,u]=Ye(e);if(this.scale.prevMouse={x:a,y:u},this.scale.activeHandle=this.hitTestHandle(a,u),this.scale.activeHandle)return;a>=this.scale.rect.x&&a<=this.scale.rect.x+this.scale.rect.width&&u>=this.scale.rect.y&&u<=this.scale.rect.y+this.scale.rect.height&&(this.scale.isDragging=!0,this.scale.offsetX=a-this.scale.rect.x,this.scale.offsetY=u-this.scale.rect.y)}}else this.selection.active=!1,this.scale.active=!1}updateSelection(e){const t=this.selection,n=this.scale.rect,o=this.app.graphManager.graph.getSelectedNodes();if(t.active&&!this.scale.active){const[a,u]=Ye(e,this.canvas);t.width=a-t.x,t.height=u-t.y,this.app.drawGraph();return}if(this.scale.active){const[a,u]=Ye(e);if(this.scale.activeHandle){this.resizeRect(this.scale.activeHandle,a,u);for(let f of o)this.app.graphManager.graph.updateNodeAttributes(f,h=>({...h,x:n.x+n.width*this.scale.scaleData[f].x,y:n.y+n.height*this.scale.scaleData[f].y}));this.app.drawGraph();return}if(this.scale.isDragging){this.scale.rect.x=a-this.scale.offsetX,this.scale.rect.y=u-this.scale.offsetY;const f=a-this.scale.prevMouse.x,h=u-this.scale.prevMouse.y;for(let p of o)this.app.graphManager.graph.updateNodeAttributes(p,v=>({...v,x:v.x+f,y:v.y+h}));this.scale.prevMouse={x:a,y:u},this.app.drawGraph();return}const l=this.hitTestHandle(a,u);l?this.canvas.style.cursor=this.scale.cursorMap[l]:a>=this.scale.rect.x&&a<=this.scale.rect.x+this.scale.rect.width&&u>=this.scale.rect.y&&u<=this.scale.rect.y+this.scale.rect.height?this.canvas.style.cursor="move":this.canvas.style.cursor="default"}}endSelection(e){this.selection.active=!1,this.scale.isDragging=!1,this.scale.activeHandle=null,this.pointsInRect(this.selection).forEach(a=>{this.app.graphManager.graph.toggleNodeSelection(a)}),this.linesInRect(this.selection).forEach(a=>{this.app.graphManager.graph.toggleEdgeSelection(a)});const o=this.app.graphManager.graph.getSelectedNodes();this.settings.scale&&o.length>0&&!this.scale.active&&(this.scale.active=!0,this.scale.rect=m0(this.app.graphManager.graph,o,this.settings.node_radius),this.scaleData={},o.forEach(a=>{const u=this.app.graphManager.graph.getNodeAttributes(a);this.scale.scaleData[a]={id:a,x:(u.x-this.scale.rect.x)/this.scale.rect.width,y:(u.y-this.scale.rect.y)/this.scale.rect.height}})),this.app.drawGraph()}pointsInRect(e){const[t,n,o,a]=gc(e);return this.app.graphManager.graph.filterNodes((u,l)=>Lo(l.x,l.y,t,n,o,a))}linesInRect(e){const t=gc(e);return this.app.graphManager.graph.filterEdges((n,o,a,u,l,f)=>this.lineIntersectsRect([l.x,l.y,f.x,f.y],t))}lineIntersectsRect(e,t){let[n,o,a,u]=e,[l,f,h,p]=t;const v=this.settings.node_radius/2+20;return!!(vc([n,o,a,u],[l,f,h,p])||vc([n,o,a,u],[l,p,h,f])||Lo(n,o,l+v,f+v,h-v,p-v)||Lo(a,u,l+v,f+v,h-v,p-v))}drawScaleBox(e,t){e&&(t.fillStyle="#cce5ff20",t.strokeStyle="#3399ff",t.lineWidth=2,t.fillRect(e.x,e.y,e.width,e.height),t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="#fff",t.strokeStyle="#000",this.scale.handles.forEach(n=>{const[o,a]=this.getHandlePosition(n);t.fillRect(o,a,this.scale.handleSize,this.scale.handleSize),t.strokeRect(o,a,this.scale.handleSize,this.scale.handleSize)}))}getHandlePosition(e){const{x:t,y:n,width:o,height:a}=this.scale.rect,u=this.scale.handleSize/2;switch(e){case"nw":return[t-u,n-u];case"n":return[t+o/2-u,n-u];case"ne":return[t+o-u,n-u];case"e":return[t+o-u,n+a/2-u];case"se":return[t+o-u,n+a-u];case"s":return[t+o/2-u,n+a-u];case"sw":return[t-u,n+a-u];case"w":return[t-u,n+a/2-u]}}hitTestHandle(e,t){return this.scale.handles.find(n=>{const[o,a]=this.getHandlePosition(n);return e>=o&&e<=o+this.scale.handleSize&&t>=a&&t<=a+this.scale.handleSize})}resizeRect(e,t,n){const a=t-this.scale.prevMouse.x,u=n-this.scale.prevMouse.y;let{x:l,y:f,width:h,height:p}=this.scale.rect;switch(e){case"nw":l+=a,f+=u,h-=a,p-=u;break;case"n":f+=u,p-=u;break;case"ne":f+=u,h+=a,p-=u;break;case"e":h+=a;break;case"se":h+=a,p+=u;break;case"s":p+=u;break;case"sw":l+=a,h-=a,p+=u;break;case"w":l+=a,h-=a;break}if(h<20){const v=20-h;e.includes("w")&&(l-=v),h=20}if(p<20){const v=20-p;e.includes("n")&&(f-=v),p=20}this.scale.rect.x=l,this.scale.rect.y=f,this.scale.rect.width=h,this.scale.rect.height=p,this.scale.prevMouse={x:t,y:n}}}function Lo(r,e,t,n,o,a){return r>=t&&r<=o&&e>=n&&e<=a}function gc(r){const e=Math.min(r.x,r.x+r.width),t=Math.min(r.y,r.y+r.height),n=Math.max(r.x,r.x+r.width),o=Math.max(r.y,r.y+r.height);return[e,t,n,o]}function vc(r,e){var t,n,o;const[a,u,l,f]=r,[h,p,v,m]=e;return t=(l-a)*(m-p)-(v-h)*(f-u),t===0?!1:(o=((m-p)*(v-a)+(h-v)*(m-u))/t,n=((u-f)*(v-a)+(l-a)*(m-u))/t,0<o&&o<1&&0<n&&n<1)}function m0(r,e,t){if(!e.length)return null;let n=1/0,o=1/0,a=-1/0,u=-1/0;e.forEach(f=>{const h=r.getNodeAttributes(f);h.x<n&&(n=h.x),h.y<o&&(o=h.y),h.x>a&&(a=h.x),h.y>u&&(u=h.y)});const l=t*1.5;return{x:n-l,y:o-l,width:a-n+2*l,height:u-o+2*l}}var Po={exports:{}};/*! Pickr 1.9.1 MIT | https://github.com/Simonwep/pickr */var yc;function b0(){return yc||(yc=1,function(r,e){(function(t,n){r.exports=n()})(self,()=>(()=>{var t={d:(H,G)=>{for(var B in G)t.o(G,B)&&!t.o(H,B)&&Object.defineProperty(H,B,{enumerable:!0,get:G[B]})},o:(H,G)=>Object.prototype.hasOwnProperty.call(H,G),r:H=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(H,"__esModule",{value:!0})}},n={};t.d(n,{default:()=>te});var o={};function a(H,G,B,W,Y={}){G instanceof HTMLCollection||G instanceof NodeList?G=Array.from(G):Array.isArray(G)||(G=[G]),Array.isArray(B)||(B=[B]);for(const F of G)for(const X of B)F[H](X,W,{capture:!1,...Y});return Array.prototype.slice.call(arguments,1)}t.r(o),t.d(o,{adjustableInputNumbers:()=>m,createElementFromString:()=>f,createFromTemplate:()=>h,eventPath:()=>p,off:()=>l,on:()=>u,resolveElement:()=>v});const u=a.bind(null,"addEventListener"),l=a.bind(null,"removeEventListener");function f(H){const G=document.createElement("div");return G.innerHTML=H.trim(),G.firstElementChild}function h(H){const G=(W,Y)=>{const F=W.getAttribute(Y);return W.removeAttribute(Y),F},B=(W,Y={})=>{const F=G(W,":obj"),X=G(W,":ref"),J=F?Y[F]={}:Y;X&&(Y[X]=W);for(const Z of Array.from(W.children)){const ce=G(Z,":arr"),le=B(Z,ce?{}:J);ce&&(J[ce]||(J[ce]=[])).push(Object.keys(le).length?le:Z)}return Y};return B(f(H))}function p(H){let G=H.path||H.composedPath&&H.composedPath();if(G)return G;let B=H.target.parentElement;for(G=[H.target,B];B=B.parentElement;)G.push(B);return G.push(document,window),G}function v(H){return H instanceof Element?H:typeof H=="string"?H.split(/>>/g).reduce((G,B,W,Y)=>(G=G.querySelector(B),W<Y.length-1?G.shadowRoot:G),document):null}function m(H,G=B=>B){function B(W){const Y=[.001,.01,.1][Number(W.shiftKey||2*W.ctrlKey)]*(W.deltaY<0?1:-1);let F=0,X=H.selectionStart;H.value=H.value.replace(/[\d.]+/g,(J,Z)=>Z<=X&&Z+J.length>=X?(X=Z,G(Number(J),Y,F)):(F++,J)),H.focus(),H.setSelectionRange(X,X),W.preventDefault(),H.dispatchEvent(new Event("input"))}u(H,"focus",()=>u(window,"wheel",B,{passive:!1})),u(H,"blur",()=>l(window,"wheel",B))}const{min:b,max:S,floor:_,round:N}=Math;function M(H,G,B){G/=100,B/=100;const W=_(H=H/360*6),Y=H-W,F=B*(1-G),X=B*(1-Y*G),J=B*(1-(1-Y)*G),Z=W%6;return[255*[B,X,F,F,J,B][Z],255*[J,B,B,X,F,F][Z],255*[F,F,J,B,B,X][Z]]}function k(H,G,B){const W=(2-(G/=100))*(B/=100)/2;return W!==0&&(G=W===1?0:W<.5?G*B/(2*W):G*B/(2-2*W)),[H,100*G,100*W]}function $(H,G,B){const W=b(H/=255,G/=255,B/=255),Y=S(H,G,B),F=Y-W;let X,J;if(F===0)X=J=0;else{J=F/Y;const Z=((Y-H)/6+F/2)/F,ce=((Y-G)/6+F/2)/F,le=((Y-B)/6+F/2)/F;H===Y?X=le-ce:G===Y?X=1/3+Z-le:B===Y&&(X=2/3+ce-Z),X<0?X+=1:X>1&&(X-=1)}return[360*X,100*J,100*Y]}function E(H,G,B,W){return G/=100,B/=100,[...$(255*(1-b(1,(H/=100)*(1-(W/=100))+W)),255*(1-b(1,G*(1-W)+W)),255*(1-b(1,B*(1-W)+W)))]}function C(H,G,B){G/=100;const W=2*(G*=(B/=100)<.5?B:1-B)/(B+G)*100,Y=100*(B+G);return[H,isNaN(W)?0:W,Y]}function O(H){return $(...H.match(/.{2}/g).map(G=>parseInt(G,16)))}function w(H){H=H.match(/^[a-zA-Z]+$/)?function(Y){if(Y.toLowerCase()==="black")return"#000";const F=document.createElement("canvas").getContext("2d");return F.fillStyle=Y,F.fillStyle==="#000"?null:F.fillStyle}(H):H;const G={cmyk:/^cmyk\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)/i,rgba:/^rgba?\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D*?(([\d.]+)(%?)|$)/i,hsla:/^hsla?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hsva:/^hsva?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},B=Y=>Y.map(F=>/^(|\d+)\.\d+|\d+$/.test(F)?Number(F):void 0);let W;e:for(const Y in G)if(W=G[Y].exec(H))switch(Y){case"cmyk":{const[,F,X,J,Z]=B(W);if(F>100||X>100||J>100||Z>100)break e;return{values:E(F,X,J,Z),type:Y}}case"rgba":{let[,F,,X,,J,,,Z]=B(W);if(F=W[2]==="%"?F/100*255:F,X=W[4]==="%"?X/100*255:X,J=W[6]==="%"?J/100*255:J,Z=W[9]==="%"?Z/100:Z,F>255||X>255||J>255||Z<0||Z>1)break e;return{values:[...$(F,X,J),Z],a:Z,type:Y}}case"hexa":{let[,F]=W;F.length!==4&&F.length!==3||(F=F.split("").map(Z=>Z+Z).join(""));const X=F.substring(0,6);let J=F.substring(6);return J=J?parseInt(J,16)/255:void 0,{values:[...O(X),J],a:J,type:Y}}case"hsla":{let[,F,X,J,,Z]=B(W);if(Z=W[6]==="%"?Z/100:Z,F>360||X>100||J>100||Z<0||Z>1)break e;return{values:[...C(F,X,J),Z],a:Z,type:Y}}case"hsva":{let[,F,X,J,,Z]=B(W);if(Z=W[6]==="%"?Z/100:Z,F>360||X>100||J>100||Z<0||Z>1)break e;return{values:[F,X,J,Z],a:Z,type:Y}}}return{values:null,type:null}}function I(H=0,G=0,B=0,W=1){const Y=(X,J)=>(Z=-1)=>J(~Z?X.map(ce=>Number(ce.toFixed(Z))):X),F={h:H,s:G,v:B,a:W,toHSVA(){const X=[F.h,F.s,F.v,F.a];return X.toString=Y(X,J=>`hsva(${J[0]}, ${J[1]}%, ${J[2]}%, ${F.a})`),X},toHSLA(){const X=[...k(F.h,F.s,F.v),F.a];return X.toString=Y(X,J=>`hsla(${J[0]}, ${J[1]}%, ${J[2]}%, ${F.a})`),X},toRGBA(){const X=[...M(F.h,F.s,F.v),F.a];return X.toString=Y(X,J=>`rgba(${J[0]}, ${J[1]}, ${J[2]}, ${F.a})`),X},toCMYK(){const X=function(J,Z,ce){const le=M(J,Z,ce),he=le[0]/255,ye=le[1]/255,ne=le[2]/255,we=b(1-he,1-ye,1-ne);return[100*(we===1?0:(1-he-we)/(1-we)),100*(we===1?0:(1-ye-we)/(1-we)),100*(we===1?0:(1-ne-we)/(1-we)),100*we]}(F.h,F.s,F.v);return X.toString=Y(X,J=>`cmyk(${J[0]}%, ${J[1]}%, ${J[2]}%, ${J[3]}%)`),X},toHEXA(){const X=function(Z,ce,le){return M(Z,ce,le).map(he=>N(he).toString(16).padStart(2,"0"))}(F.h,F.s,F.v),J=F.a>=1?"":Number((255*F.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return J&&X.push(J),X.toString=()=>`#${X.join("").toUpperCase()}`,X},clone:()=>I(F.h,F.s,F.v,F.a)};return F}const z=H=>Math.max(Math.min(H,1),0);function T(H){const G={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},H),_keyboard(F){const{options:X}=G,{type:J,key:Z}=F;if(document.activeElement===X.wrapper){const{lock:ce}=G.options,le=Z==="ArrowUp",he=Z==="ArrowRight",ye=Z==="ArrowDown",ne=Z==="ArrowLeft";if(J==="keydown"&&(le||he||ye||ne)){let we=0,Se=0;ce==="v"?we=le||he?1:-1:ce==="h"?we=le||he?-1:1:(Se=le?-1:ye?1:0,we=ne?-1:he?1:0),G.update(z(G.cache.x+.01*we),z(G.cache.y+.01*Se)),F.preventDefault()}else Z.startsWith("Arrow")&&(G.options.onstop(),F.preventDefault())}},_tapstart(F){u(document,["mouseup","touchend","touchcancel"],G._tapstop),u(document,["mousemove","touchmove"],G._tapmove),F.cancelable&&F.preventDefault(),G._tapmove(F)},_tapmove(F){const{options:X,cache:J}=G,{lock:Z,element:ce,wrapper:le}=X,he=le.getBoundingClientRect();let ye=0,ne=0;if(F){const $e=F&&F.touches&&F.touches[0];ye=F?($e||F).clientX:0,ne=F?($e||F).clientY:0,ye<he.left?ye=he.left:ye>he.left+he.width&&(ye=he.left+he.width),ne<he.top?ne=he.top:ne>he.top+he.height&&(ne=he.top+he.height),ye-=he.left,ne-=he.top}else J&&(ye=J.x*he.width,ne=J.y*he.height);Z!=="h"&&(ce.style.left=`calc(${ye/he.width*100}% - ${ce.offsetWidth/2}px)`),Z!=="v"&&(ce.style.top=`calc(${ne/he.height*100}% - ${ce.offsetHeight/2}px)`),G.cache={x:ye/he.width,y:ne/he.height};const we=z(ye/he.width),Se=z(ne/he.height);switch(Z){case"v":return X.onchange(we);case"h":return X.onchange(Se);default:return X.onchange(we,Se)}},_tapstop(){G.options.onstop(),l(document,["mouseup","touchend","touchcancel"],G._tapstop),l(document,["mousemove","touchmove"],G._tapmove)},trigger(){G._tapmove()},update(F=0,X=0){const{left:J,top:Z,width:ce,height:le}=G.options.wrapper.getBoundingClientRect();G.options.lock==="h"&&(X=F),G._tapmove({clientX:J+ce*F,clientY:Z+le*X})},destroy(){const{options:F,_tapstart:X,_keyboard:J}=G;l(document,["keydown","keyup"],J),l([F.wrapper,F.element],"mousedown",X),l([F.wrapper,F.element],"touchstart",X,{passive:!1})}},{options:B,_tapstart:W,_keyboard:Y}=G;return u([B.wrapper,B.element],"mousedown",W),u([B.wrapper,B.element],"touchstart",W,{passive:!1}),u(document,["keydown","keyup"],Y),G}function R(H={}){H=Object.assign({onchange:()=>0,className:"",elements:[]},H);const G=u(H.elements,"click",B=>{H.elements.forEach(W=>W.classList[B.target===W?"add":"remove"](H.className)),H.onchange(B),B.stopPropagation()});return{destroy:()=>l(...G)}}const j={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},V=(H,G,B)=>{const W=typeof H!="object"||H instanceof HTMLElement?{reference:H,popper:G,...B}:H;return{update(Y=W){const{reference:F,popper:X}=Object.assign(W,Y);if(!X||!F)throw new Error("Popper- or reference-element missing.");return((J,Z,ce)=>{const{container:le,arrow:he,margin:ye,padding:ne,position:we,variantFlipOrder:Se,positionFlipOrder:$e}={container:document.documentElement.getBoundingClientRect(),...j,...ce},{left:Qe,top:Ue}=Z.style;Z.style.left="0",Z.style.top="0";const Ae=J.getBoundingClientRect(),ke=Z.getBoundingClientRect(),Kr={t:Ae.top-ke.height-ye,b:Ae.bottom+ye,r:Ae.right+ye,l:Ae.left-ke.width-ye},zt={vs:Ae.left,vm:Ae.left+Ae.width/2-ke.width/2,ve:Ae.left+Ae.width-ke.width,hs:Ae.top,hm:Ae.bottom-Ae.height/2-ke.height/2,he:Ae.bottom-ke.height},[Un,Vt="middle"]=we.split("-"),Qt=$e[Un],Yr=Se[Vt],{top:yr,left:Tt,bottom:mr,right:At}=le;for(const Lt of Qt){const ut=Lt==="t"||Lt==="b";let kt=Kr[Lt];const[Pt,Gt]=ut?["top","left"]:["left","top"],[Ot,Zt]=ut?[ke.height,ke.width]:[ke.width,ke.height],[Xr,Jt]=ut?[mr,At]:[At,mr],[Vr,Qr]=ut?[yr,Tt]:[Tt,yr];if(!(kt<Vr||kt+Ot+ne>Xr))for(const vt of Yr){let Ze=zt[(ut?"v":"h")+vt];if(!(Ze<Qr||Ze+Zt+ne>Jt)){if(Ze-=ke[Gt],kt-=ke[Pt],Z.style[Gt]=`${Ze}px`,Z.style[Pt]=`${kt}px`,he){const ct=ut?Ae.width/2:Ae.height/2,Rt=Zt/2,er=ct>Rt,Zr=Ze+{s:er?Rt:ct,m:Rt,e:er?Rt:Zt-ct}[vt],br=kt+{t:Ot,b:0,r:0,l:Ot}[Lt];he.style[Gt]=`${Zr}px`,he.style[Pt]=`${br}px`}return Lt+vt}}}return Z.style.left=Qe,Z.style.top=Ue,null})(F,X,W)}}},Q=class Q{constructor(G){ze(this,"_initializingActive",!0);ze(this,"_recalc",!0);ze(this,"_nanopop",null);ze(this,"_root",null);ze(this,"_color",I());ze(this,"_lastColor",I());ze(this,"_swatchColors",[]);ze(this,"_setupAnimationFrame",null);ze(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]});this.options=G=Object.assign({...Q.DEFAULT_OPTIONS},G);const{swatches:B,components:W,theme:Y,sliders:F,lockOpacity:X,padding:J}=G;["nano","monolith"].includes(Y)&&!F&&(G.sliders="h"),W.interaction||(W.interaction={});const{preview:Z,opacity:ce,hue:le,palette:he}=W;W.opacity=!X&&ce,W.palette=he||Z||ce||le,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),B&&B.length&&B.forEach(Se=>this.addSwatch(Se));const{button:ye,app:ne}=this._root;this._nanopop=V(ye,ne,{margin:J}),ye.setAttribute("role","button"),ye.setAttribute("aria-label",this._t("btn:toggle"));const we=this;this._setupAnimationFrame=requestAnimationFrame(function Se(){if(!ne.offsetWidth)return requestAnimationFrame(Se);we.setColor(G.default),we._rePositioningPicker(),G.defaultRepresentation&&(we._representation=G.defaultRepresentation,we.setColorRepresentation(we._representation)),G.showAlways&&we.show(),we._initializingActive=!1,we._emit("init")})}_preBuild(){const{options:G}=this;for(const B of["el","container"])G[B]=v(G[B]);this._root=(B=>{const{components:W,useAsButton:Y,inline:F,appClass:X,theme:J,lockOpacity:Z}=B.options,ce=ne=>ne?"":'style="display:none" hidden',le=ne=>B._t(ne),he=h(`
      <div :ref="root" class="pickr">

        ${Y?"":'<button type="button" :ref="button" class="pcr-button"></button>'}

        <div :ref="app" class="pcr-app ${X||""}" data-theme="${J}" ${F?'style="position: unset"':""} aria-label="${le("ui:dialog")}" role="window">
          <div class="pcr-selection" ${ce(W.palette)}>
            <div :obj="preview" class="pcr-color-preview" ${ce(W.preview)}>
              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${le("btn:last-color")}"></button>
              <div :ref="currentColor" class="pcr-current-color"></div>
            </div>

            <div :obj="palette" class="pcr-color-palette">
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${le("aria:palette")}" role="listbox"></div>
            </div>

            <div :obj="hue" class="pcr-color-chooser" ${ce(W.hue)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${le("aria:hue")}" role="slider"></div>
            </div>

            <div :obj="opacity" class="pcr-color-opacity" ${ce(W.opacity)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${le("aria:opacity")}" role="slider"></div>
            </div>
          </div>

          <div class="pcr-swatches ${W.palette?"":"pcr-last"}" :ref="swatches"></div>

          <div :obj="interaction" class="pcr-interaction" ${ce(Object.keys(W.interaction).length)}>
            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${ce(W.interaction.input)} aria-label="${le("aria:input")}">

            <input :arr="options" class="pcr-type" data-type="HEXA" value="${Z?"HEX":"HEXA"}" type="button" ${ce(W.interaction.hex)}>
            <input :arr="options" class="pcr-type" data-type="RGBA" value="${Z?"RGB":"RGBA"}" type="button" ${ce(W.interaction.rgba)}>
            <input :arr="options" class="pcr-type" data-type="HSLA" value="${Z?"HSL":"HSLA"}" type="button" ${ce(W.interaction.hsla)}>
            <input :arr="options" class="pcr-type" data-type="HSVA" value="${Z?"HSV":"HSVA"}" type="button" ${ce(W.interaction.hsva)}>
            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${ce(W.interaction.cmyk)}>

            <input :ref="save" class="pcr-save" value="${le("btn:save")}" type="button" ${ce(W.interaction.save)} aria-label="${le("aria:btn:save")}">
            <input :ref="cancel" class="pcr-cancel" value="${le("btn:cancel")}" type="button" ${ce(W.interaction.cancel)} aria-label="${le("aria:btn:cancel")}">
            <input :ref="clear" class="pcr-clear" value="${le("btn:clear")}" type="button" ${ce(W.interaction.clear)} aria-label="${le("aria:btn:clear")}">
          </div>
        </div>
      </div>
    `),ye=he.interaction;return ye.options.find(ne=>!ne.hidden&&!ne.classList.add("active")),ye.type=()=>ye.options.find(ne=>ne.classList.contains("active")),he})(this),G.useAsButton&&(this._root.button=G.el),G.container.appendChild(this._root.root)}_finalBuild(){const G=this.options,B=this._root;if(G.container.removeChild(B.root),G.inline){const W=G.el.parentElement;G.el.nextSibling?W.insertBefore(B.app,G.el.nextSibling):W.appendChild(B.app)}else G.container.appendChild(B.app);G.useAsButton?G.inline&&G.el.remove():G.el.parentNode.replaceChild(B.root,G.el),G.disabled&&this.disable(),G.comparison||(B.button.style.transition="none",G.useAsButton||(B.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const G=this,B=this.options.components,W=(G.options.sliders||"v").repeat(2),[Y,F]=W.match(/^[vh]+$/g)?W:[],X=()=>this._color||(this._color=this._lastColor.clone()),J={palette:T({element:G._root.palette.picker,wrapper:G._root.palette.palette,onstop:()=>G._emit("changestop","slider",G),onchange(Z,ce){if(!B.palette)return;const le=X(),{_root:he,options:ye}=G,{lastColor:ne,currentColor:we}=he.preview;G._recalc&&(le.s=100*Z,le.v=100-100*ce,le.v<0&&(le.v=0),G._updateOutput("slider"));const Se=le.toRGBA().toString(0);this.element.style.background=Se,this.wrapper.style.background=`
                        linear-gradient(to top, rgba(0, 0, 0, ${le.a}), transparent),
                        linear-gradient(to left, hsla(${le.h}, 100%, 50%, ${le.a}), rgba(255, 255, 255, ${le.a}))
                    `,ye.comparison?ye.useAsButton||G._lastColor||ne.style.setProperty("--pcr-color",Se):(he.button.style.setProperty("--pcr-color",Se),he.button.classList.remove("clear"));const $e=le.toHEXA().toString();for(const{el:Qe,color:Ue}of G._swatchColors)Qe.classList[$e===Ue.toHEXA().toString()?"add":"remove"]("pcr-active");we.style.setProperty("--pcr-color",Se)}}),hue:T({lock:F==="v"?"h":"v",element:G._root.hue.picker,wrapper:G._root.hue.slider,onstop:()=>G._emit("changestop","slider",G),onchange(Z){if(!B.hue||!B.palette)return;const ce=X();G._recalc&&(ce.h=360*Z),this.element.style.backgroundColor=`hsl(${ce.h}, 100%, 50%)`,J.palette.trigger()}}),opacity:T({lock:Y==="v"?"h":"v",element:G._root.opacity.picker,wrapper:G._root.opacity.slider,onstop:()=>G._emit("changestop","slider",G),onchange(Z){if(!B.opacity||!B.palette)return;const ce=X();G._recalc&&(ce.a=Math.round(100*Z)/100),this.element.style.background=`rgba(0, 0, 0, ${ce.a})`,J.palette.trigger()}}),selectable:R({elements:G._root.interaction.options,className:"active",onchange(Z){G._representation=Z.target.getAttribute("data-type").toUpperCase(),G._recalc&&G._updateOutput("swatch")}})};this._components=J}_bindEvents(){const{_root:G,options:B}=this,W=[u(G.interaction.clear,"click",()=>this._clearColor()),u([G.interaction.cancel,G.preview.lastColor],"click",()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")}),u(G.interaction.save,"click",()=>{!this.applyColor()&&!B.showAlways&&this.hide()}),u(G.interaction.result,["keyup","input"],Y=>{this.setColor(Y.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),Y.stopImmediatePropagation()}),u(G.interaction.result,["focus","blur"],Y=>{this._recalc=Y.type==="blur",this._recalc&&this._updateOutput(null)}),u([G.palette.palette,G.palette.picker,G.hue.slider,G.hue.picker,G.opacity.slider,G.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0,{passive:!0})];if(!B.showAlways){const Y=B.closeWithKey;W.push(u(G.button,"click",()=>this.isOpen()?this.hide():this.show()),u(document,"keyup",F=>this.isOpen()&&(F.key===Y||F.code===Y)&&this.hide()),u(document,["touchstart","mousedown"],F=>{this.isOpen()&&!p(F).some(X=>X===G.app||X===G.button)&&this.hide()},{capture:!0}))}if(B.adjustableNumbers){const Y={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};m(G.interaction.result,(F,X,J)=>{const Z=Y[this.getColorRepresentation().toLowerCase()];if(Z){const ce=Z[J],le=F+(ce>=100?1e3*X:X);return le<=0?0:Number((le<ce?le:ce).toPrecision(3))}return F})}if(B.autoReposition&&!B.inline){let Y=null;const F=this;W.push(u(window,["scroll","resize"],()=>{F.isOpen()&&(B.closeOnScroll&&F.hide(),Y===null?(Y=setTimeout(()=>Y=null,100),requestAnimationFrame(function X(){F._rePositioningPicker(),Y!==null&&requestAnimationFrame(X)})):(clearTimeout(Y),Y=setTimeout(()=>Y=null,100)))},{capture:!0}))}this._eventBindings=W}_rePositioningPicker(){const{options:G}=this;if(!G.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:G.position})){const B=this._root.app,W=B.getBoundingClientRect();B.style.top=(window.innerHeight-W.height)/2+"px",B.style.left=(window.innerWidth-W.width)/2+"px"}}_updateOutput(G){const{_root:B,_color:W,options:Y}=this;if(B.interaction.type()){const F=`to${B.interaction.type().getAttribute("data-type")}`;B.interaction.result.value=typeof W[F]=="function"?W[F]().toString(Y.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",W,G,this)}_clearColor(G=!1){const{_root:B,options:W}=this;W.useAsButton||B.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),B.button.classList.add("clear"),W.showAlways||this.hide(),this._lastColor=null,this._initializingActive||G||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(G){const{values:B,type:W,a:Y}=w(G),{lockOpacity:F}=this.options,X=Y!==void 0&&Y!==1;return B&&B.length===3&&(B[3]=void 0),{values:!B||F&&X?null:B,type:W}}_t(G){return this.options.i18n[G]||Q.I18N_DEFAULTS[G]}_emit(G,...B){this._eventListener[G].forEach(W=>W(...B,this))}on(G,B){return this._eventListener[G].push(B),this}off(G,B){const W=this._eventListener[G]||[],Y=W.indexOf(B);return~Y&&W.splice(Y,1),this}addSwatch(G){const{values:B}=this._parseLocalColor(G);if(B){const{_swatchColors:W,_root:Y}=this,F=I(...B),X=f(`<button type="button" style="--pcr-color: ${F.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return Y.swatches.appendChild(X),W.push({el:X,color:F}),this._eventBindings.push(u(X,"click",()=>{this.setHSVA(...F.toHSVA(),!0),this._emit("swatchselect",F),this._emit("change",F,"swatch",this)})),!0}return!1}removeSwatch(G){const B=this._swatchColors[G];if(B){const{el:W}=B;return this._root.swatches.removeChild(W),this._swatchColors.splice(G,1),!0}return!1}applyColor(G=!1){const{preview:B,button:W}=this._root,Y=this._color.toRGBA().toString(0);return B.lastColor.style.setProperty("--pcr-color",Y),this.options.useAsButton||W.style.setProperty("--pcr-color",Y),W.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||G||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach(G=>l(...G)),Object.keys(this._components).forEach(G=>this._components[G].destroy())}destroyAndRemove(){this.destroy();const{root:G,app:B}=this._root;G.parentElement&&G.parentElement.removeChild(G),B.parentElement.removeChild(B),Object.keys(this).forEach(W=>this[W]=null)}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(G=360,B=0,W=0,Y=1,F=!1){const X=this._recalc;if(this._recalc=!1,G<0||G>360||B<0||B>100||W<0||W>100||Y<0||Y>1)return!1;this._color=I(G,B,W,Y);const{hue:J,opacity:Z,palette:ce}=this._components;return J.update(G/360),Z.update(Y),ce.update(B/100,1-W/100),F||this.applyColor(),X&&this._updateOutput(),this._recalc=X,!0}setColor(G,B=!1){if(G===null)return this._clearColor(B),!0;const{values:W,type:Y}=this._parseLocalColor(G);if(W){const F=Y.toUpperCase(),{options:X}=this._root.interaction,J=X.find(Z=>Z.getAttribute("data-type")===F);if(J&&!J.hidden)for(const Z of X)Z.classList[Z===J?"add":"remove"]("active");return!!this.setHSVA(...W,B)&&this.setColorRepresentation(F)}return!1}setColorRepresentation(G){return G=G.toUpperCase(),!!this._root.interaction.options.find(B=>B.getAttribute("data-type").startsWith(G)&&!B.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}};ze(Q,"utils",o),ze(Q,"version","1.9.1"),ze(Q,"I18N_DEFAULTS",{"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"}),ze(Q,"DEFAULT_OPTIONS",{appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"}),ze(Q,"create",G=>new Q(G));let te=Q;return n=n.default})())}(Po)),Po.exports}var w0=b0();const x0=We(w0);class E0{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.pickrs={},["node","stroke","edge","label","background","grid"].forEach(n=>{const o=`#${n}-color`;this.pickrs[n]=x0.create({el:o,theme:"nano",default:this.settings[`${n}_color`],components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!0,rgba:!0,input:!0,save:!0}}})})}init(){for(const e in this.pickrs){const t=this.pickrs[e];t.on("change",n=>{const o=n.toRGBA().toString();t.setColor(o),this.eventBus.emit("updateSetting",{key:`${e}_color`,value:o})})}}setColor(e,t){const n=this.pickrs[e];n&&(n.setColor(t),this.eventBus.emit("updateSetting",{key:`${e}_color`,value:t}))}getColor(e){const t=this.pickrs[e];return t?t.getColor().toRGBA().toString():null}resetColors(){for(const e in this.pickrs)this.setColor(e,this.settings[`${e}_color`])}}class _0{constructor(){this.eventBus=zg,this.appSettings=new Ho(this),this.settings=this.appSettings.settings,this._canvas=new Pg(this),this.canvas=this._canvas.canvas,this.layout=new d0(this),this.graphManager=new Xm(this,this.settings.historyLimit,this.settings.type),this.rect=new y0(this),this.menu=new Jm(this,t0),this.widget=new v0(this),this.keyHandler=new Zm(this),this.eventHanders=new e0(this),this.colorPicker=new E0(this),this.simulation=null,this.nodes=[],this.links=[],this.init()}init(){this.menu.init(),this.appSettings.init(),this.widget.init(),this._canvas.init(),this.rect.init(),this.keyHandler.init(),this.eventHanders.init(),this.initSimulation(),this.loadInitialGraph(),this.colorPicker.init(),this.startAnimationLoop()}initSimulation(){this.nodes=this.graphManager.graph.getNodesForD3(),this.links=this.graphManager.graph.getEdgesForD3(),this.simulation=Cg(this.nodes).force("link",xg(this.links).id(e=>e.id).distance(10).strength(.5)).force("charge",Dg().strength(-300)).force("collide",bg(20)).force("center",eg(this.canvas.width/2,this.canvas.height/2)).force("x",Ig(this.canvas.width/2).strength(.05)).force("y",$g(this.canvas.height/1).strength(.05)).velocityDecay(.3).alphaDecay(.02),this.appSettings.settings.forceSimulation||this.simulation.stop()}loadInitialGraph(){this.graphManager.loadHitoryFromLocalStorage()||this.graphManager.generator.clusters(20,20,10)}drawGraph(){const e=this.graphManager.graph,t=this.canvas,n=this.appSettings.settings,o=this._canvas.ctx;o.clearRect(0,0,t.width,t.height),e.forEachEdge((a,u,l,f,h,p)=>{if(u.label===void 0){const v=Gr(u.id);e.setEdgeAttribute(a,"label",v)}if(u.color||e.setEdgeAttribute(a,"color",n.edge_color),u.labelColor||e.setEdgeAttribute(a,"labelColor",n.label_color),e.isDirected(a)){const v=p.x-h.x,m=p.y-h.y,b=Math.sqrt(v*v+m*m),S=12+Number(n.edge_size),_=v/b*S,N=m/b*S,M=e.hasEdge(f,l),k=M?h.x+_:h.x,$=M?h.y+N:h.y,E=p.x-_,C=p.y-N;o.beginPath(),o.moveTo(k,$),o.lineTo(E,C),o.strokeStyle=u.selected?"orange":u.color,o.lineWidth=n.edge_size,o.stroke(),o.closePath()}else o.beginPath(),o.moveTo(h.x,h.y),o.lineTo(p.x,p.y),o.strokeStyle=u.selected?"orange":u.color,o.lineWidth=n.edge_size,o.stroke(),o.closePath();if(e.isDirected(a)){const v=14+Number(n.edge_size),m=Math.atan2(p.y-h.y,p.x-h.x),b=p.x-Math.cos(m)*n.node_radius/4,S=p.y-Math.sin(m)*n.node_radius/4;o.beginPath(),o.moveTo(b,S),o.lineTo(b-v*Math.cos(m-Math.PI/6),S-v*Math.sin(m-Math.PI/6)),o.lineTo(b-v*Math.cos(m+Math.PI/6),S-v*Math.sin(m+Math.PI/6)),o.closePath(),o.fillStyle=u.selected?"orange":u.color,o.fill()}if(n.edgeLabel||n.weightLabel){o.fillStyle=u.labelColor,o.font=`${n.label_size}px sans-serif`,o.textAlign="center",o.textBaseline="middle";const v=(h.x+p.x)/2,m=(h.y+p.y)/2,b=p.x-h.x,S=p.y-h.y,_=Math.sqrt(b*b+S*S),N=10,M=-S/_,k=b/_,$=v+M*N+n.label_pos.x,E=m+k*N+n.label_pos.y;n.edgeLabel&&n.weightLabel?u.weight?o.fillText(`${u.label}, ${u.weight}`,$,E):o.fillText(u.label,$,E):!n.edgeLabel&&n.weightLabel&&u.weight?o.fillText(u.weight,$,E):n.edgeLabel&&!n.weightLabel&&o.fillText(u.label,$,E)}}),e.forEachNode((a,u)=>{if(u.label===void 0){const l=Gr(a);e.setNodeAttribute(a,"label",l)}u.color||e.setNodeAttribute(a,"color",n.node_color),u.stroke||e.setNodeAttribute(a,"stroke",n.stroke_color),u.labelColor||e.setNodeAttribute(a,"labelColor",n.label_color),o.beginPath(),o.arc(u.x,u.y,n.node_radius*u.size,0,2*Math.PI),o.fillStyle=u.selected?"orange":u.color,o.fill(),this.settings.stroke_size!=0&&(o.lineWidth=this.settings.stroke_size,o.strokeStyle=u.selected?"orange":u.stroke,o.stroke()),o.closePath(),n.vertexLabel&&(o.fillStyle=u.labelColor,o.font=`${n.label_size}px sans-serif`,o.textAlign="center",o.textBaseline="middle",o.fillText(u.label,u.x+n.label_pos.x,u.y+n.label_pos.y))}),this.rect.draw()}ticked(){this.nodes.forEach(e=>{this.graphManager.graph.updateNodeAttributes(e.id,t=>({...t,x:e.x,y:e.y}))}),this.eventBus.emit("graph:updated",{type:"tick"})}startSimulation(){this.simulation.alpha(.3).restart()}stopSimulation(){this.simulation.stop()}updateSimulation(){this.nodes.length=0,this.nodes=this.graphManager.graph.getNodesForD3(),this.links.length=0,this.links=this.graphManager.graph.getEdgesForD3(),this.simulation.nodes(this.nodes),this.simulation.force("link").links(this.links),this.appSettings.settings.forceSimulation?this.startSimulation():this.stopSimulation()}updateForce(){const e=this.graphManager.graph;this.nodes.length=0,e.forEachNode((t,n)=>{this.nodes.push({id:Number(t),x:n.x,y:n.y})}),this.links.length=0,e.forEachEdge(function(t,n,o,a,u,l){this.links.push({source:Number(o),target:Number(a)})})}startAnimationLoop(){const e=()=>{this.appSettings.settings.forceSimulation&&(this.simulation.tick(),this.ticked()),this.drawGraph(),requestAnimationFrame(e)};requestAnimationFrame(e)}}document.addEventListener("DOMContentLoaded",()=>{const r=new _0;window.graphStudio=r,window.addEventListener("resize",()=>{r.canvas.width=window.innerWidth,r.canvas.height=window.innerHeight,r.drawGraph()}),document.querySelectorAll("img").forEach(e=>{e.setAttribute("draggable","false")})});
