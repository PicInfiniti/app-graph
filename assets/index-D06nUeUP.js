var Jd=Object.defineProperty;var is=n=>{throw TypeError(n)};var eh=(n,e,t)=>e in n?Jd(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Re=(n,e,t)=>eh(n,typeof e!="symbol"?e+"":e,t),os=(n,e,t)=>e.has(n)||is("Cannot "+t);var pn=(n,e,t)=>(os(n,e,"read from private field"),t?t.call(n):e.get(n)),as=(n,e,t)=>e.has(n)?is("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),ss=(n,e,t,r)=>(os(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function Tn(n,e){let t=0,r=0;if(e===void 0)for(let o of n)o!=null&&(o=+o)>=o&&(++t,r+=o);else{let o=-1;for(let a of n)(a=e(a,++o,n))!=null&&(a=+a)>=a&&(++t,r+=a)}if(t)return r/t}var th={value:()=>{}};function Bn(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new Ln(t)}function Ln(n){this._=n}function rh(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",o=t.indexOf(".");if(o>=0&&(r=t.slice(o+1),t=t.slice(0,o)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}Ln.prototype=Bn.prototype={constructor:Ln,on:function(n,e){var t=this._,r=rh(n+"",t),o,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((o=(n=r[a]).type)&&(o=nh(t[o],n.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(o=(n=r[a]).type)t[o]=us(t[o],n.name,e);else if(e==null)for(o in t)t[o]=us(t[o],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Ln(n)},call:function(n,e){if((o=arguments.length-2)>0)for(var t=new Array(o),r=0,o,a;r<o;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(a=this._[n],r=0,o=a.length;r<o;++r)a[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],o=0,a=r.length;o<a;++o)r[o].value.apply(e,t)}};function nh(n,e){for(var t=0,r=n.length,o;t<r;++t)if((o=n[t]).name===e)return o.value}function us(n,e,t){for(var r=0,o=n.length;r<o;++r)if(n[r].name===e){n[r]=th,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var Yo="http://www.w3.org/1999/xhtml";const cs={svg:"http://www.w3.org/2000/svg",xhtml:Yo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Un(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),cs.hasOwnProperty(e)?{space:cs[e],local:n}:n}function ih(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Yo&&e.documentElement.namespaceURI===Yo?e.createElement(n):e.createElementNS(t,n)}}function oh(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Bc(n){var e=Un(n);return(e.local?oh:ih)(e)}function ah(){}function ia(n){return n==null?ah:function(){return this.querySelector(n)}}function sh(n){typeof n!="function"&&(n=ia(n));for(var e=this._groups,t=e.length,r=new Array(t),o=0;o<t;++o)for(var a=e[o],s=a.length,l=r[o]=new Array(s),h,d,p=0;p<s;++p)(h=a[p])&&(d=n.call(h,h.__data__,p,a))&&("__data__"in h&&(d.__data__=h.__data__),l[p]=d);return new nt(r,this._parents)}function uh(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function ch(){return[]}function Uc(n){return n==null?ch:function(){return this.querySelectorAll(n)}}function lh(n){return function(){return uh(n.apply(this,arguments))}}function dh(n){typeof n=="function"?n=lh(n):n=Uc(n);for(var e=this._groups,t=e.length,r=[],o=[],a=0;a<t;++a)for(var s=e[a],l=s.length,h,d=0;d<l;++d)(h=s[d])&&(r.push(n.call(h,h.__data__,d,s)),o.push(h));return new nt(r,o)}function Hc(n){return function(){return this.matches(n)}}function Wc(n){return function(e){return e.matches(n)}}var hh=Array.prototype.find;function fh(n){return function(){return hh.call(this.children,n)}}function ph(){return this.firstElementChild}function gh(n){return this.select(n==null?ph:fh(typeof n=="function"?n:Wc(n)))}var yh=Array.prototype.filter;function vh(){return Array.from(this.children)}function mh(n){return function(){return yh.call(this.children,n)}}function bh(n){return this.selectAll(n==null?vh:mh(typeof n=="function"?n:Wc(n)))}function wh(n){typeof n!="function"&&(n=Hc(n));for(var e=this._groups,t=e.length,r=new Array(t),o=0;o<t;++o)for(var a=e[o],s=a.length,l=r[o]=[],h,d=0;d<s;++d)(h=a[d])&&n.call(h,h.__data__,d,a)&&l.push(h);return new nt(r,this._parents)}function Kc(n){return new Array(n.length)}function Eh(){return new nt(this._enter||this._groups.map(Kc),this._parents)}function Pn(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}Pn.prototype={constructor:Pn,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function xh(n){return function(){return n}}function _h(n,e,t,r,o,a){for(var s=0,l,h=e.length,d=a.length;s<d;++s)(l=e[s])?(l.__data__=a[s],r[s]=l):t[s]=new Pn(n,a[s]);for(;s<h;++s)(l=e[s])&&(o[s]=l)}function Sh(n,e,t,r,o,a,s){var l,h,d=new Map,p=e.length,y=a.length,v=new Array(p),m;for(l=0;l<p;++l)(h=e[l])&&(v[l]=m=s.call(h,h.__data__,l,e)+"",d.has(m)?o[l]=h:d.set(m,h));for(l=0;l<y;++l)m=s.call(n,a[l],l,a)+"",(h=d.get(m))?(r[l]=h,h.__data__=a[l],d.delete(m)):t[l]=new Pn(n,a[l]);for(l=0;l<p;++l)(h=e[l])&&d.get(v[l])===h&&(o[l]=h)}function Ah(n){return n.__data__}function kh(n,e){if(!arguments.length)return Array.from(this,Ah);var t=e?Sh:_h,r=this._parents,o=this._groups;typeof n!="function"&&(n=xh(n));for(var a=o.length,s=new Array(a),l=new Array(a),h=new Array(a),d=0;d<a;++d){var p=r[d],y=o[d],v=y.length,m=Ch(n.call(p,p&&p.__data__,d,r)),E=m.length,_=l[d]=new Array(E),A=s[d]=new Array(E),C=h[d]=new Array(v);t(p,y,_,A,C,m,e);for(var k=0,M=0,x,N;k<E;++k)if(x=_[k]){for(k>=M&&(M=k+1);!(N=A[M])&&++M<E;);x._next=N||null}}return s=new nt(s,r),s._enter=l,s._exit=h,s}function Ch(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Dh(){return new nt(this._exit||this._groups.map(Kc),this._parents)}function Nh(n,e,t){var r=this.enter(),o=this,a=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(o=e(o),o&&(o=o.selection())),t==null?a.remove():t(a),r&&o?r.merge(o).order():o}function Ih(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,o=t.length,a=r.length,s=Math.min(o,a),l=new Array(o),h=0;h<s;++h)for(var d=t[h],p=r[h],y=d.length,v=l[h]=new Array(y),m,E=0;E<y;++E)(m=d[E]||p[E])&&(v[E]=m);for(;h<o;++h)l[h]=t[h];return new nt(l,this._parents)}function Mh(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],o=r.length-1,a=r[o],s;--o>=0;)(s=r[o])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function Lh(n){n||(n=zh);function e(y,v){return y&&v?n(y.__data__,v.__data__):!y-!v}for(var t=this._groups,r=t.length,o=new Array(r),a=0;a<r;++a){for(var s=t[a],l=s.length,h=o[a]=new Array(l),d,p=0;p<l;++p)(d=s[p])&&(h[p]=d);h.sort(e)}return new nt(o,this._parents).order()}function zh(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function $h(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Th(){return Array.from(this)}function Ph(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],o=0,a=r.length;o<a;++o){var s=r[o];if(s)return s}return null}function Oh(){let n=0;for(const e of this)++n;return n}function Gh(){return!this.node()}function Rh(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var o=e[t],a=0,s=o.length,l;a<s;++a)(l=o[a])&&n.call(l,l.__data__,a,o);return this}function qh(n){return function(){this.removeAttribute(n)}}function Fh(n){return function(){this.removeAttributeNS(n.space,n.local)}}function jh(n,e){return function(){this.setAttribute(n,e)}}function Bh(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function Uh(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function Hh(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function Wh(n,e){var t=Un(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?Fh:qh:typeof e=="function"?t.local?Hh:Uh:t.local?Bh:jh)(t,e))}function Xc(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function Kh(n){return function(){this.style.removeProperty(n)}}function Xh(n,e,t){return function(){this.style.setProperty(n,e,t)}}function Yh(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function Vh(n,e,t){return arguments.length>1?this.each((e==null?Kh:typeof e=="function"?Yh:Xh)(n,e,t??"")):xr(this.node(),n)}function xr(n,e){return n.style.getPropertyValue(e)||Xc(n).getComputedStyle(n,null).getPropertyValue(e)}function Qh(n){return function(){delete this[n]}}function Zh(n,e){return function(){this[n]=e}}function Jh(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function ef(n,e){return arguments.length>1?this.each((e==null?Qh:typeof e=="function"?Jh:Zh)(n,e)):this.node()[n]}function Yc(n){return n.trim().split(/^|\s+/)}function oa(n){return n.classList||new Vc(n)}function Vc(n){this._node=n,this._names=Yc(n.getAttribute("class")||"")}Vc.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function Qc(n,e){for(var t=oa(n),r=-1,o=e.length;++r<o;)t.add(e[r])}function Zc(n,e){for(var t=oa(n),r=-1,o=e.length;++r<o;)t.remove(e[r])}function tf(n){return function(){Qc(this,n)}}function rf(n){return function(){Zc(this,n)}}function nf(n,e){return function(){(e.apply(this,arguments)?Qc:Zc)(this,n)}}function of(n,e){var t=Yc(n+"");if(arguments.length<2){for(var r=oa(this.node()),o=-1,a=t.length;++o<a;)if(!r.contains(t[o]))return!1;return!0}return this.each((typeof e=="function"?nf:e?tf:rf)(t,e))}function af(){this.textContent=""}function sf(n){return function(){this.textContent=n}}function uf(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function cf(n){return arguments.length?this.each(n==null?af:(typeof n=="function"?uf:sf)(n)):this.node().textContent}function lf(){this.innerHTML=""}function df(n){return function(){this.innerHTML=n}}function hf(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function ff(n){return arguments.length?this.each(n==null?lf:(typeof n=="function"?hf:df)(n)):this.node().innerHTML}function pf(){this.nextSibling&&this.parentNode.appendChild(this)}function gf(){return this.each(pf)}function yf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vf(){return this.each(yf)}function mf(n){var e=typeof n=="function"?n:Bc(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function bf(){return null}function wf(n,e){var t=typeof n=="function"?n:Bc(n),r=e==null?bf:typeof e=="function"?e:ia(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function Ef(){var n=this.parentNode;n&&n.removeChild(this)}function xf(){return this.each(Ef)}function _f(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function Sf(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function Af(n){return this.select(n?Sf:_f)}function kf(n){return arguments.length?this.property("__data__",n):this.node().__data__}function Cf(n){return function(e){n.call(this,e,this.__data__)}}function Df(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function Nf(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,o=e.length,a;t<o;++t)a=e[t],(!n.type||a.type===n.type)&&a.name===n.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function If(n,e,t){return function(){var r=this.__on,o,a=Cf(e);if(r){for(var s=0,l=r.length;s<l;++s)if((o=r[s]).type===n.type&&o.name===n.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=t),o.value=e;return}}this.addEventListener(n.type,a,t),o={type:n.type,name:n.name,value:e,listener:a,options:t},r?r.push(o):this.__on=[o]}}function Mf(n,e,t){var r=Df(n+""),o,a=r.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var h=0,d=l.length,p;h<d;++h)for(o=0,p=l[h];o<a;++o)if((s=r[o]).type===p.type&&s.name===p.name)return p.value}return}for(l=e?If:Nf,o=0;o<a;++o)this.each(l(r[o],e,t));return this}function Jc(n,e,t){var r=Xc(n),o=r.CustomEvent;typeof o=="function"?o=new o(e,t):(o=r.document.createEvent("Event"),t?(o.initEvent(e,t.bubbles,t.cancelable),o.detail=t.detail):o.initEvent(e,!1,!1)),n.dispatchEvent(o)}function Lf(n,e){return function(){return Jc(this,n,e)}}function zf(n,e){return function(){return Jc(this,n,e.apply(this,arguments))}}function $f(n,e){return this.each((typeof e=="function"?zf:Lf)(n,e))}function*Tf(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],o=0,a=r.length,s;o<a;++o)(s=r[o])&&(yield s)}var el=[null];function nt(n,e){this._groups=n,this._parents=e}function Qr(){return new nt([[document.documentElement]],el)}function Pf(){return this}nt.prototype=Qr.prototype={constructor:nt,select:sh,selectAll:dh,selectChild:gh,selectChildren:bh,filter:wh,data:kh,enter:Eh,exit:Dh,join:Nh,merge:Ih,selection:Pf,order:Mh,sort:Lh,call:$h,nodes:Th,node:Ph,size:Oh,empty:Gh,each:Rh,attr:Wh,style:Vh,property:ef,classed:of,text:cf,html:ff,raise:gf,lower:vf,append:mf,insert:wf,remove:xf,clone:Af,datum:kf,on:Mf,dispatch:$f,[Symbol.iterator]:Tf};function nr(n){return typeof n=="string"?new nt([[document.querySelector(n)]],[document.documentElement]):new nt([[n]],el)}function Of(n){let e;for(;e=n.sourceEvent;)n=e;return n}function ct(n,e){if(n=Of(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[n.clientX-o.left-e.clientLeft,n.clientY-o.top-e.clientTop]}}return[n.pageX,n.pageY]}const Gf={passive:!1},Wr={capture:!0,passive:!1};function hi(n){n.stopImmediatePropagation()}function wr(n){n.preventDefault(),n.stopImmediatePropagation()}function Rf(n){var e=n.document.documentElement,t=nr(n).on("dragstart.drag",wr,Wr);"onselectstart"in e?t.on("selectstart.drag",wr,Wr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function qf(n,e){var t=n.document.documentElement,r=nr(n).on("dragstart.drag",null);e&&(r.on("click.drag",wr,Wr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const gn=n=>()=>n;function Vo(n,{sourceEvent:e,subject:t,target:r,identifier:o,active:a,x:s,y:l,dx:h,dy:d,dispatch:p}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:p}})}Vo.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function Ff(n){return!n.ctrlKey&&!n.button}function jf(){return this.parentNode}function Bf(n,e){return e??{x:n.x,y:n.y}}function Uf(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hf(){var n=Ff,e=jf,t=Bf,r=Uf,o={},a=Bn("start","drag","end"),s=0,l,h,d,p,y=0;function v(x){x.on("mousedown.drag",m).filter(r).on("touchstart.drag",A).on("touchmove.drag",C,Gf).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(x,N){if(!(p||!n.call(this,x,N))){var O=M(this,e.call(this,x,N),x,N,"mouse");O&&(nr(x.view).on("mousemove.drag",E,Wr).on("mouseup.drag",_,Wr),Rf(x.view),hi(x),d=!1,l=x.clientX,h=x.clientY,O("start",x))}}function E(x){if(wr(x),!d){var N=x.clientX-l,O=x.clientY-h;d=N*N+O*O>y}o.mouse("drag",x)}function _(x){nr(x.view).on("mousemove.drag mouseup.drag",null),qf(x.view,d),wr(x),o.mouse("end",x)}function A(x,N){if(n.call(this,x,N)){var O=x.changedTouches,w=e.call(this,x,N),L=O.length,z,T;for(z=0;z<L;++z)(T=M(this,w,x,N,O[z].identifier,O[z]))&&(hi(x),T("start",x,O[z]))}}function C(x){var N=x.changedTouches,O=N.length,w,L;for(w=0;w<O;++w)(L=o[N[w].identifier])&&(wr(x),L("drag",x,N[w]))}function k(x){var N=x.changedTouches,O=N.length,w,L;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),w=0;w<O;++w)(L=o[N[w].identifier])&&(hi(x),L("end",x,N[w]))}function M(x,N,O,w,L,z){var T=a.copy(),q=ct(z||O,N),j,P,ee;if((ee=t.call(x,new Vo("beforestart",{sourceEvent:O,target:v,identifier:L,active:s,x:q[0],y:q[1],dx:0,dy:0,dispatch:T}),w))!=null)return j=ee.x-q[0]||0,P=ee.y-q[1]||0,function J(F,D,U){var H=q,Q;switch(F){case"start":o[L]=J,Q=s++;break;case"end":delete o[L],--s;case"drag":q=ct(U||D,N),Q=s;break}T.call(F,x,new Vo(F,{sourceEvent:D,subject:ee,target:v,identifier:L,active:Q,x:q[0]+j,y:q[1]+P,dx:q[0]-H[0],dy:q[1]-H[1],dispatch:T}),w)}}return v.filter=function(x){return arguments.length?(n=typeof x=="function"?x:gn(!!x),v):n},v.container=function(x){return arguments.length?(e=typeof x=="function"?x:gn(x),v):e},v.subject=function(x){return arguments.length?(t=typeof x=="function"?x:gn(x),v):t},v.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:gn(!!x),v):r},v.on=function(){var x=a.on.apply(a,arguments);return x===a?v:x},v.clickDistance=function(x){return arguments.length?(y=(x=+x)*x,v):Math.sqrt(y)},v}function aa(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function tl(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Zr(){}var Kr=.7,On=1/Kr,Er="\\s*([+-]?\\d+)\\s*",Xr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ct="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wf=/^#([0-9a-f]{3,8})$/,Kf=new RegExp(`^rgb\\(${Er},${Er},${Er}\\)$`),Xf=new RegExp(`^rgb\\(${Ct},${Ct},${Ct}\\)$`),Yf=new RegExp(`^rgba\\(${Er},${Er},${Er},${Xr}\\)$`),Vf=new RegExp(`^rgba\\(${Ct},${Ct},${Ct},${Xr}\\)$`),Qf=new RegExp(`^hsl\\(${Xr},${Ct},${Ct}\\)$`),Zf=new RegExp(`^hsla\\(${Xr},${Ct},${Ct},${Xr}\\)$`),ls={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};aa(Zr,Yr,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:ds,formatHex:ds,formatHex8:Jf,formatHsl:ep,formatRgb:hs,toString:hs});function ds(){return this.rgb().formatHex()}function Jf(){return this.rgb().formatHex8()}function ep(){return rl(this).formatHsl()}function hs(){return this.rgb().formatRgb()}function Yr(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Wf.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?fs(e):t===3?new Je(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?yn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?yn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Kf.exec(n))?new Je(e[1],e[2],e[3],1):(e=Xf.exec(n))?new Je(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Yf.exec(n))?yn(e[1],e[2],e[3],e[4]):(e=Vf.exec(n))?yn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Qf.exec(n))?ys(e[1],e[2]/100,e[3]/100,1):(e=Zf.exec(n))?ys(e[1],e[2]/100,e[3]/100,e[4]):ls.hasOwnProperty(n)?fs(ls[n]):n==="transparent"?new Je(NaN,NaN,NaN,0):null}function fs(n){return new Je(n>>16&255,n>>8&255,n&255,1)}function yn(n,e,t,r){return r<=0&&(n=e=t=NaN),new Je(n,e,t,r)}function tp(n){return n instanceof Zr||(n=Yr(n)),n?(n=n.rgb(),new Je(n.r,n.g,n.b,n.opacity)):new Je}function Qo(n,e,t,r){return arguments.length===1?tp(n):new Je(n,e,t,r??1)}function Je(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}aa(Je,Qo,tl(Zr,{brighter(n){return n=n==null?On:Math.pow(On,n),new Je(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Kr:Math.pow(Kr,n),new Je(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Je(ir(this.r),ir(this.g),ir(this.b),Gn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ps,formatHex:ps,formatHex8:rp,formatRgb:gs,toString:gs}));function ps(){return`#${tr(this.r)}${tr(this.g)}${tr(this.b)}`}function rp(){return`#${tr(this.r)}${tr(this.g)}${tr(this.b)}${tr((isNaN(this.opacity)?1:this.opacity)*255)}`}function gs(){const n=Gn(this.opacity);return`${n===1?"rgb(":"rgba("}${ir(this.r)}, ${ir(this.g)}, ${ir(this.b)}${n===1?")":`, ${n})`}`}function Gn(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ir(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function tr(n){return n=ir(n),(n<16?"0":"")+n.toString(16)}function ys(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new vt(n,e,t,r)}function rl(n){if(n instanceof vt)return new vt(n.h,n.s,n.l,n.opacity);if(n instanceof Zr||(n=Yr(n)),!n)return new vt;if(n instanceof vt)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,o=Math.min(e,t,r),a=Math.max(e,t,r),s=NaN,l=a-o,h=(a+o)/2;return l?(e===a?s=(t-r)/l+(t<r)*6:t===a?s=(r-e)/l+2:s=(e-t)/l+4,l/=h<.5?a+o:2-a-o,s*=60):l=h>0&&h<1?0:s,new vt(s,l,h,n.opacity)}function np(n,e,t,r){return arguments.length===1?rl(n):new vt(n,e,t,r??1)}function vt(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}aa(vt,np,tl(Zr,{brighter(n){return n=n==null?On:Math.pow(On,n),new vt(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Kr:Math.pow(Kr,n),new vt(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,o=2*t-r;return new Je(fi(n>=240?n-240:n+120,o,r),fi(n,o,r),fi(n<120?n+240:n-120,o,r),this.opacity)},clamp(){return new vt(vs(this.h),vn(this.s),vn(this.l),Gn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Gn(this.opacity);return`${n===1?"hsl(":"hsla("}${vs(this.h)}, ${vn(this.s)*100}%, ${vn(this.l)*100}%${n===1?")":`, ${n})`}`}}));function vs(n){return n=(n||0)%360,n<0?n+360:n}function vn(n){return Math.max(0,Math.min(1,n||0))}function fi(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const nl=n=>()=>n;function ip(n,e){return function(t){return n+t*e}}function op(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function ap(n){return(n=+n)==1?il:function(e,t){return t-e?op(e,t,n):nl(isNaN(e)?t:e)}}function il(n,e){var t=e-n;return t?ip(n,t):nl(isNaN(n)?e:n)}const ms=function n(e){var t=ap(e);function r(o,a){var s=t((o=Qo(o)).r,(a=Qo(a)).r),l=t(o.g,a.g),h=t(o.b,a.b),d=il(o.opacity,a.opacity);return function(p){return o.r=s(p),o.g=l(p),o.b=h(p),o.opacity=d(p),o+""}}return r.gamma=n,r}(1);function Wt(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var Zo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pi=new RegExp(Zo.source,"g");function sp(n){return function(){return n}}function up(n){return function(e){return n(e)+""}}function cp(n,e){var t=Zo.lastIndex=pi.lastIndex=0,r,o,a,s=-1,l=[],h=[];for(n=n+"",e=e+"";(r=Zo.exec(n))&&(o=pi.exec(e));)(a=o.index)>t&&(a=e.slice(t,a),l[s]?l[s]+=a:l[++s]=a),(r=r[0])===(o=o[0])?l[s]?l[s]+=o:l[++s]=o:(l[++s]=null,h.push({i:s,x:Wt(r,o)})),t=pi.lastIndex;return t<e.length&&(a=e.slice(t),l[s]?l[s]+=a:l[++s]=a),l.length<2?h[0]?up(h[0].x):sp(e):(e=h.length,function(d){for(var p=0,y;p<e;++p)l[(y=h[p]).i]=y.x(d);return l.join("")})}var bs=180/Math.PI,Jo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ol(n,e,t,r,o,a){var s,l,h;return(s=Math.sqrt(n*n+e*e))&&(n/=s,e/=s),(h=n*t+e*r)&&(t-=n*h,r-=e*h),(l=Math.sqrt(t*t+r*r))&&(t/=l,r/=l,h/=l),n*r<e*t&&(n=-n,e=-e,h=-h,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(e,n)*bs,skewX:Math.atan(h)*bs,scaleX:s,scaleY:l}}var mn;function lp(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Jo:ol(e.a,e.b,e.c,e.d,e.e,e.f)}function dp(n){return n==null||(mn||(mn=document.createElementNS("http://www.w3.org/2000/svg","g")),mn.setAttribute("transform",n),!(n=mn.transform.baseVal.consolidate()))?Jo:(n=n.matrix,ol(n.a,n.b,n.c,n.d,n.e,n.f))}function al(n,e,t,r){function o(d){return d.length?d.pop()+" ":""}function a(d,p,y,v,m,E){if(d!==y||p!==v){var _=m.push("translate(",null,e,null,t);E.push({i:_-4,x:Wt(d,y)},{i:_-2,x:Wt(p,v)})}else(y||v)&&m.push("translate("+y+e+v+t)}function s(d,p,y,v){d!==p?(d-p>180?p+=360:p-d>180&&(d+=360),v.push({i:y.push(o(y)+"rotate(",null,r)-2,x:Wt(d,p)})):p&&y.push(o(y)+"rotate("+p+r)}function l(d,p,y,v){d!==p?v.push({i:y.push(o(y)+"skewX(",null,r)-2,x:Wt(d,p)}):p&&y.push(o(y)+"skewX("+p+r)}function h(d,p,y,v,m,E){if(d!==y||p!==v){var _=m.push(o(m)+"scale(",null,",",null,")");E.push({i:_-4,x:Wt(d,y)},{i:_-2,x:Wt(p,v)})}else(y!==1||v!==1)&&m.push(o(m)+"scale("+y+","+v+")")}return function(d,p){var y=[],v=[];return d=n(d),p=n(p),a(d.translateX,d.translateY,p.translateX,p.translateY,y,v),s(d.rotate,p.rotate,y,v),l(d.skewX,p.skewX,y,v),h(d.scaleX,d.scaleY,p.scaleX,p.scaleY,y,v),d=p=null,function(m){for(var E=-1,_=v.length,A;++E<_;)y[(A=v[E]).i]=A.x(m);return y.join("")}}}var hp=al(lp,"px, ","px)","deg)"),fp=al(dp,", ",")",")"),_r=0,Fr=0,$r=0,sl=1e3,Rn,jr,qn=0,or=0,Hn=0,Vr=typeof performance=="object"&&performance.now?performance:Date,ul=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function sa(){return or||(ul(pp),or=Vr.now()+Hn)}function pp(){or=0}function Fn(){this._call=this._time=this._next=null}Fn.prototype=ua.prototype={constructor:Fn,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?sa():+t)+(e==null?0:+e),!this._next&&jr!==this&&(jr?jr._next=this:Rn=this,jr=this),this._call=n,this._time=t,ea()},stop:function(){this._call&&(this._call=null,this._time=1/0,ea())}};function ua(n,e,t){var r=new Fn;return r.restart(n,e,t),r}function gp(){sa(),++_r;for(var n=Rn,e;n;)(e=or-n._time)>=0&&n._call.call(void 0,e),n=n._next;--_r}function ws(){or=(qn=Vr.now())+Hn,_r=Fr=0;try{gp()}finally{_r=0,vp(),or=0}}function yp(){var n=Vr.now(),e=n-qn;e>sl&&(Hn-=e,qn=n)}function vp(){for(var n,e=Rn,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:Rn=t);jr=n,ea(r)}function ea(n){if(!_r){Fr&&(Fr=clearTimeout(Fr));var e=n-or;e>24?(n<1/0&&(Fr=setTimeout(ws,n-Vr.now()-Hn)),$r&&($r=clearInterval($r))):($r||(qn=Vr.now(),$r=setInterval(yp,sl)),_r=1,ul(ws))}}function Es(n,e,t){var r=new Fn;return e=e==null?0:+e,r.restart(o=>{r.stop(),n(o+e)},e,t),r}var mp=Bn("start","end","cancel","interrupt"),bp=[],cl=0,xs=1,ta=2,zn=3,_s=4,ra=5,$n=6;function Wn(n,e,t,r,o,a){var s=n.__transition;if(!s)n.__transition={};else if(t in s)return;wp(n,t,{name:e,index:r,group:o,on:mp,tween:bp,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:cl})}function ca(n,e){var t=mt(n,e);if(t.state>cl)throw new Error("too late; already scheduled");return t}function Dt(n,e){var t=mt(n,e);if(t.state>zn)throw new Error("too late; already running");return t}function mt(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function wp(n,e,t){var r=n.__transition,o;r[e]=t,t.timer=ua(a,0,t.time);function a(d){t.state=xs,t.timer.restart(s,t.delay,t.time),t.delay<=d&&s(d-t.delay)}function s(d){var p,y,v,m;if(t.state!==xs)return h();for(p in r)if(m=r[p],m.name===t.name){if(m.state===zn)return Es(s);m.state===_s?(m.state=$n,m.timer.stop(),m.on.call("interrupt",n,n.__data__,m.index,m.group),delete r[p]):+p<e&&(m.state=$n,m.timer.stop(),m.on.call("cancel",n,n.__data__,m.index,m.group),delete r[p])}if(Es(function(){t.state===zn&&(t.state=_s,t.timer.restart(l,t.delay,t.time),l(d))}),t.state=ta,t.on.call("start",n,n.__data__,t.index,t.group),t.state===ta){for(t.state=zn,o=new Array(v=t.tween.length),p=0,y=-1;p<v;++p)(m=t.tween[p].value.call(n,n.__data__,t.index,t.group))&&(o[++y]=m);o.length=y+1}}function l(d){for(var p=d<t.duration?t.ease.call(null,d/t.duration):(t.timer.restart(h),t.state=ra,1),y=-1,v=o.length;++y<v;)o[y].call(n,p);t.state===ra&&(t.on.call("end",n,n.__data__,t.index,t.group),h())}function h(){t.state=$n,t.timer.stop(),delete r[e];for(var d in r)return;delete n.__transition}}function Ep(n,e){var t=n.__transition,r,o,a=!0,s;if(t){e=e==null?null:e+"";for(s in t){if((r=t[s]).name!==e){a=!1;continue}o=r.state>ta&&r.state<ra,r.state=$n,r.timer.stop(),r.on.call(o?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[s]}a&&delete n.__transition}}function xp(n){return this.each(function(){Ep(this,n)})}function _p(n,e){var t,r;return function(){var o=Dt(this,n),a=o.tween;if(a!==t){r=t=a;for(var s=0,l=r.length;s<l;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function Sp(n,e,t){var r,o;if(typeof t!="function")throw new Error;return function(){var a=Dt(this,n),s=a.tween;if(s!==r){o=(r=s).slice();for(var l={name:e,value:t},h=0,d=o.length;h<d;++h)if(o[h].name===e){o[h]=l;break}h===d&&o.push(l)}a.tween=o}}function Ap(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=mt(this.node(),t).tween,o=0,a=r.length,s;o<a;++o)if((s=r[o]).name===n)return s.value;return null}return this.each((e==null?_p:Sp)(t,n,e))}function la(n,e,t){var r=n._id;return n.each(function(){var o=Dt(this,r);(o.value||(o.value={}))[e]=t.apply(this,arguments)}),function(o){return mt(o,r).value[e]}}function ll(n,e){var t;return(typeof e=="number"?Wt:e instanceof Yr?ms:(t=Yr(e))?(e=t,ms):cp)(n,e)}function kp(n){return function(){this.removeAttribute(n)}}function Cp(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Dp(n,e,t){var r,o=t+"",a;return function(){var s=this.getAttribute(n);return s===o?null:s===r?a:a=e(r=s,t)}}function Np(n,e,t){var r,o=t+"",a;return function(){var s=this.getAttributeNS(n.space,n.local);return s===o?null:s===r?a:a=e(r=s,t)}}function Ip(n,e,t){var r,o,a;return function(){var s,l=t(this),h;return l==null?void this.removeAttribute(n):(s=this.getAttribute(n),h=l+"",s===h?null:s===r&&h===o?a:(o=h,a=e(r=s,l)))}}function Mp(n,e,t){var r,o,a;return function(){var s,l=t(this),h;return l==null?void this.removeAttributeNS(n.space,n.local):(s=this.getAttributeNS(n.space,n.local),h=l+"",s===h?null:s===r&&h===o?a:(o=h,a=e(r=s,l)))}}function Lp(n,e){var t=Un(n),r=t==="transform"?fp:ll;return this.attrTween(n,typeof e=="function"?(t.local?Mp:Ip)(t,r,la(this,"attr."+n,e)):e==null?(t.local?Cp:kp)(t):(t.local?Np:Dp)(t,r,e))}function zp(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function $p(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function Tp(n,e){var t,r;function o(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&$p(n,a)),t}return o._value=e,o}function Pp(n,e){var t,r;function o(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&zp(n,a)),t}return o._value=e,o}function Op(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=Un(n);return this.tween(t,(r.local?Tp:Pp)(r,e))}function Gp(n,e){return function(){ca(this,n).delay=+e.apply(this,arguments)}}function Rp(n,e){return e=+e,function(){ca(this,n).delay=e}}function qp(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Gp:Rp)(e,n)):mt(this.node(),e).delay}function Fp(n,e){return function(){Dt(this,n).duration=+e.apply(this,arguments)}}function jp(n,e){return e=+e,function(){Dt(this,n).duration=e}}function Bp(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Fp:jp)(e,n)):mt(this.node(),e).duration}function Up(n,e){if(typeof e!="function")throw new Error;return function(){Dt(this,n).ease=e}}function Hp(n){var e=this._id;return arguments.length?this.each(Up(e,n)):mt(this.node(),e).ease}function Wp(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Dt(this,n).ease=t}}function Kp(n){if(typeof n!="function")throw new Error;return this.each(Wp(this._id,n))}function Xp(n){typeof n!="function"&&(n=Hc(n));for(var e=this._groups,t=e.length,r=new Array(t),o=0;o<t;++o)for(var a=e[o],s=a.length,l=r[o]=[],h,d=0;d<s;++d)(h=a[d])&&n.call(h,h.__data__,d,a)&&l.push(h);return new Gt(r,this._parents,this._name,this._id)}function Yp(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,o=t.length,a=Math.min(r,o),s=new Array(r),l=0;l<a;++l)for(var h=e[l],d=t[l],p=h.length,y=s[l]=new Array(p),v,m=0;m<p;++m)(v=h[m]||d[m])&&(y[m]=v);for(;l<r;++l)s[l]=e[l];return new Gt(s,this._parents,this._name,this._id)}function Vp(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function Qp(n,e,t){var r,o,a=Vp(e)?ca:Dt;return function(){var s=a(this,n),l=s.on;l!==r&&(o=(r=l).copy()).on(e,t),s.on=o}}function Zp(n,e){var t=this._id;return arguments.length<2?mt(this.node(),t).on.on(n):this.each(Qp(t,n,e))}function Jp(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function eg(){return this.on("end.remove",Jp(this._id))}function tg(n){var e=this._name,t=this._id;typeof n!="function"&&(n=ia(n));for(var r=this._groups,o=r.length,a=new Array(o),s=0;s<o;++s)for(var l=r[s],h=l.length,d=a[s]=new Array(h),p,y,v=0;v<h;++v)(p=l[v])&&(y=n.call(p,p.__data__,v,l))&&("__data__"in p&&(y.__data__=p.__data__),d[v]=y,Wn(d[v],e,t,v,d,mt(p,t)));return new Gt(a,this._parents,e,t)}function rg(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Uc(n));for(var r=this._groups,o=r.length,a=[],s=[],l=0;l<o;++l)for(var h=r[l],d=h.length,p,y=0;y<d;++y)if(p=h[y]){for(var v=n.call(p,p.__data__,y,h),m,E=mt(p,t),_=0,A=v.length;_<A;++_)(m=v[_])&&Wn(m,e,t,_,v,E);a.push(v),s.push(p)}return new Gt(a,s,e,t)}var ng=Qr.prototype.constructor;function ig(){return new ng(this._groups,this._parents)}function og(n,e){var t,r,o;return function(){var a=xr(this,n),s=(this.style.removeProperty(n),xr(this,n));return a===s?null:a===t&&s===r?o:o=e(t=a,r=s)}}function dl(n){return function(){this.style.removeProperty(n)}}function ag(n,e,t){var r,o=t+"",a;return function(){var s=xr(this,n);return s===o?null:s===r?a:a=e(r=s,t)}}function sg(n,e,t){var r,o,a;return function(){var s=xr(this,n),l=t(this),h=l+"";return l==null&&(h=l=(this.style.removeProperty(n),xr(this,n))),s===h?null:s===r&&h===o?a:(o=h,a=e(r=s,l))}}function ug(n,e){var t,r,o,a="style."+e,s="end."+a,l;return function(){var h=Dt(this,n),d=h.on,p=h.value[a]==null?l||(l=dl(e)):void 0;(d!==t||o!==p)&&(r=(t=d).copy()).on(s,o=p),h.on=r}}function cg(n,e,t){var r=(n+="")=="transform"?hp:ll;return e==null?this.styleTween(n,og(n,r)).on("end.style."+n,dl(n)):typeof e=="function"?this.styleTween(n,sg(n,r,la(this,"style."+n,e))).each(ug(this._id,n)):this.styleTween(n,ag(n,r,e),t).on("end.style."+n,null)}function lg(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function dg(n,e,t){var r,o;function a(){var s=e.apply(this,arguments);return s!==o&&(r=(o=s)&&lg(n,s,t)),r}return a._value=e,a}function hg(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,dg(n,e,t??""))}function fg(n){return function(){this.textContent=n}}function pg(n){return function(){var e=n(this);this.textContent=e??""}}function gg(n){return this.tween("text",typeof n=="function"?pg(la(this,"text",n)):fg(n==null?"":n+""))}function yg(n){return function(e){this.textContent=n.call(this,e)}}function vg(n){var e,t;function r(){var o=n.apply(this,arguments);return o!==t&&(e=(t=o)&&yg(o)),e}return r._value=n,r}function mg(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,vg(n))}function bg(){for(var n=this._name,e=this._id,t=hl(),r=this._groups,o=r.length,a=0;a<o;++a)for(var s=r[a],l=s.length,h,d=0;d<l;++d)if(h=s[d]){var p=mt(h,e);Wn(h,n,t,d,s,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Gt(r,this._parents,n,t)}function wg(){var n,e,t=this,r=t._id,o=t.size();return new Promise(function(a,s){var l={value:s},h={value:function(){--o===0&&a()}};t.each(function(){var d=Dt(this,r),p=d.on;p!==n&&(e=(n=p).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(h)),d.on=e}),o===0&&a()})}var Eg=0;function Gt(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function hl(){return++Eg}var $t=Qr.prototype;Gt.prototype={constructor:Gt,select:tg,selectAll:rg,selectChild:$t.selectChild,selectChildren:$t.selectChildren,filter:Xp,merge:Yp,selection:ig,transition:bg,call:$t.call,nodes:$t.nodes,node:$t.node,size:$t.size,empty:$t.empty,each:$t.each,on:Zp,attr:Lp,attrTween:Op,style:cg,styleTween:hg,text:gg,textTween:mg,remove:eg,tween:Ap,delay:qp,duration:Bp,ease:Hp,easeVarying:Kp,end:wg,[Symbol.iterator]:$t[Symbol.iterator]};function xg(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var _g={time:null,delay:0,duration:250,ease:xg};function Sg(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function Ag(n){var e,t;n instanceof Gt?(e=n._id,n=n._name):(e=hl(),(t=_g).time=sa(),n=n==null?null:n+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var s=r[a],l=s.length,h,d=0;d<l;++d)(h=s[d])&&Wn(h,n,e,d,s,t||Sg(h,e));return new Gt(r,this._parents,n,e)}Qr.prototype.interrupt=xp;Qr.prototype.transition=Ag;function kg(n,e){var t,r=1;n==null&&(n=0),e==null&&(e=0);function o(){var a,s=t.length,l,h=0,d=0;for(a=0;a<s;++a)l=t[a],h+=l.x,d+=l.y;for(h=(h/s-n)*r,d=(d/s-e)*r,a=0;a<s;++a)l=t[a],l.x-=h,l.y-=d}return o.initialize=function(a){t=a},o.x=function(a){return arguments.length?(n=+a,o):n},o.y=function(a){return arguments.length?(e=+a,o):e},o.strength=function(a){return arguments.length?(r=+a,o):r},o}function Cg(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return fl(this.cover(e,t),e,t,n)}function fl(n,e,t,r){if(isNaN(e)||isNaN(t))return n;var o,a=n._root,s={data:r},l=n._x0,h=n._y0,d=n._x1,p=n._y1,y,v,m,E,_,A,C,k;if(!a)return n._root=s,n;for(;a.length;)if((_=e>=(y=(l+d)/2))?l=y:d=y,(A=t>=(v=(h+p)/2))?h=v:p=v,o=a,!(a=a[C=A<<1|_]))return o[C]=s,n;if(m=+n._x.call(null,a.data),E=+n._y.call(null,a.data),e===m&&t===E)return s.next=a,o?o[C]=s:n._root=s,n;do o=o?o[C]=new Array(4):n._root=new Array(4),(_=e>=(y=(l+d)/2))?l=y:d=y,(A=t>=(v=(h+p)/2))?h=v:p=v;while((C=A<<1|_)===(k=(E>=v)<<1|m>=y));return o[k]=a,o[C]=s,n}function Dg(n){var e,t,r=n.length,o,a,s=new Array(r),l=new Array(r),h=1/0,d=1/0,p=-1/0,y=-1/0;for(t=0;t<r;++t)isNaN(o=+this._x.call(null,e=n[t]))||isNaN(a=+this._y.call(null,e))||(s[t]=o,l[t]=a,o<h&&(h=o),o>p&&(p=o),a<d&&(d=a),a>y&&(y=a));if(h>p||d>y)return this;for(this.cover(h,d).cover(p,y),t=0;t<r;++t)fl(this,s[t],l[t],n[t]);return this}function Ng(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,o=this._x1,a=this._y1;if(isNaN(t))o=(t=Math.floor(n))+1,a=(r=Math.floor(e))+1;else{for(var s=o-t||1,l=this._root,h,d;t>n||n>=o||r>e||e>=a;)switch(d=(e<r)<<1|n<t,h=new Array(4),h[d]=l,l=h,s*=2,d){case 0:o=t+s,a=r+s;break;case 1:t=o-s,a=r+s;break;case 2:o=t+s,r=a-s;break;case 3:t=o-s,r=a-s;break}this._root&&this._root.length&&(this._root=l)}return this._x0=t,this._y0=r,this._x1=o,this._y1=a,this}function Ig(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Mg(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ke(n,e,t,r,o){this.node=n,this.x0=e,this.y0=t,this.x1=r,this.y1=o}function Lg(n,e,t){var r,o=this._x0,a=this._y0,s,l,h,d,p=this._x1,y=this._y1,v=[],m=this._root,E,_;for(m&&v.push(new Ke(m,o,a,p,y)),t==null?t=1/0:(o=n-t,a=e-t,p=n+t,y=e+t,t*=t);E=v.pop();)if(!(!(m=E.node)||(s=E.x0)>p||(l=E.y0)>y||(h=E.x1)<o||(d=E.y1)<a))if(m.length){var A=(s+h)/2,C=(l+d)/2;v.push(new Ke(m[3],A,C,h,d),new Ke(m[2],s,C,A,d),new Ke(m[1],A,l,h,C),new Ke(m[0],s,l,A,C)),(_=(e>=C)<<1|n>=A)&&(E=v[v.length-1],v[v.length-1]=v[v.length-1-_],v[v.length-1-_]=E)}else{var k=n-+this._x.call(null,m.data),M=e-+this._y.call(null,m.data),x=k*k+M*M;if(x<t){var N=Math.sqrt(t=x);o=n-N,a=e-N,p=n+N,y=e+N,r=m.data}}return r}function zg(n){if(isNaN(p=+this._x.call(null,n))||isNaN(y=+this._y.call(null,n)))return this;var e,t=this._root,r,o,a,s=this._x0,l=this._y0,h=this._x1,d=this._y1,p,y,v,m,E,_,A,C;if(!t)return this;if(t.length)for(;;){if((E=p>=(v=(s+h)/2))?s=v:h=v,(_=y>=(m=(l+d)/2))?l=m:d=m,e=t,!(t=t[A=_<<1|E]))return this;if(!t.length)break;(e[A+1&3]||e[A+2&3]||e[A+3&3])&&(r=e,C=A)}for(;t.data!==n;)if(o=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,o?(a?o.next=a:delete o.next,this):e?(a?e[A]=a:delete e[A],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[C]=t:this._root=t),this):(this._root=a,this)}function $g(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function Tg(){return this._root}function Pg(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Og(n){var e=[],t,r=this._root,o,a,s,l,h;for(r&&e.push(new Ke(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(r=t.node,a=t.x0,s=t.y0,l=t.x1,h=t.y1)&&r.length){var d=(a+l)/2,p=(s+h)/2;(o=r[3])&&e.push(new Ke(o,d,p,l,h)),(o=r[2])&&e.push(new Ke(o,a,p,d,h)),(o=r[1])&&e.push(new Ke(o,d,s,l,p)),(o=r[0])&&e.push(new Ke(o,a,s,d,p))}return this}function Gg(n){var e=[],t=[],r;for(this._root&&e.push(new Ke(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var o=r.node;if(o.length){var a,s=r.x0,l=r.y0,h=r.x1,d=r.y1,p=(s+h)/2,y=(l+d)/2;(a=o[0])&&e.push(new Ke(a,s,l,p,y)),(a=o[1])&&e.push(new Ke(a,p,l,h,y)),(a=o[2])&&e.push(new Ke(a,s,y,p,d)),(a=o[3])&&e.push(new Ke(a,p,y,h,d))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Rg(n){return n[0]}function qg(n){return arguments.length?(this._x=n,this):this._x}function Fg(n){return n[1]}function jg(n){return arguments.length?(this._y=n,this):this._y}function da(n,e,t){var r=new ha(e??Rg,t??Fg,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function ha(n,e,t,r,o,a){this._x=n,this._y=e,this._x0=t,this._y0=r,this._x1=o,this._y1=a,this._root=void 0}function Ss(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var Ye=da.prototype=ha.prototype;Ye.copy=function(){var n=new ha(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=Ss(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var o=0;o<4;++o)(r=e.source[o])&&(r.length?t.push({source:r,target:e.target[o]=new Array(4)}):e.target[o]=Ss(r));return n};Ye.add=Cg;Ye.addAll=Dg;Ye.cover=Ng;Ye.data=Ig;Ye.extent=Mg;Ye.find=Lg;Ye.remove=zg;Ye.removeAll=$g;Ye.root=Tg;Ye.size=Pg;Ye.visit=Og;Ye.visitAfter=Gg;Ye.x=qg;Ye.y=jg;function Xe(n){return function(){return n}}function Kt(n){return(n()-.5)*1e-6}function Bg(n){return n.x+n.vx}function Ug(n){return n.y+n.vy}function Hg(n){var e,t,r,o=1,a=1;typeof n!="function"&&(n=Xe(n==null?1:+n));function s(){for(var d,p=e.length,y,v,m,E,_,A,C=0;C<a;++C)for(y=da(e,Bg,Ug).visitAfter(l),d=0;d<p;++d)v=e[d],_=t[v.index],A=_*_,m=v.x+v.vx,E=v.y+v.vy,y.visit(k);function k(M,x,N,O,w){var L=M.data,z=M.r,T=_+z;if(L){if(L.index>v.index){var q=m-L.x-L.vx,j=E-L.y-L.vy,P=q*q+j*j;P<T*T&&(q===0&&(q=Kt(r),P+=q*q),j===0&&(j=Kt(r),P+=j*j),P=(T-(P=Math.sqrt(P)))/P*o,v.vx+=(q*=P)*(T=(z*=z)/(A+z)),v.vy+=(j*=P)*T,L.vx-=q*(T=1-T),L.vy-=j*T)}return}return x>m+T||O<m-T||N>E+T||w<E-T}}function l(d){if(d.data)return d.r=t[d.data.index];for(var p=d.r=0;p<4;++p)d[p]&&d[p].r>d.r&&(d.r=d[p].r)}function h(){if(e){var d,p=e.length,y;for(t=new Array(p),d=0;d<p;++d)y=e[d],t[y.index]=+n(y,d,e)}}return s.initialize=function(d,p){e=d,r=p,h()},s.iterations=function(d){return arguments.length?(a=+d,s):a},s.strength=function(d){return arguments.length?(o=+d,s):o},s.radius=function(d){return arguments.length?(n=typeof d=="function"?d:Xe(+d),h(),s):n},s}function Wg(n){return n.index}function As(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function Kg(n){var e=Wg,t=y,r,o=Xe(30),a,s,l,h,d,p=1;n==null&&(n=[]);function y(A){return 1/Math.min(l[A.source.index],l[A.target.index])}function v(A){for(var C=0,k=n.length;C<p;++C)for(var M=0,x,N,O,w,L,z,T;M<k;++M)x=n[M],N=x.source,O=x.target,w=O.x+O.vx-N.x-N.vx||Kt(d),L=O.y+O.vy-N.y-N.vy||Kt(d),z=Math.sqrt(w*w+L*L),z=(z-a[M])/z*A*r[M],w*=z,L*=z,O.vx-=w*(T=h[M]),O.vy-=L*T,N.vx+=w*(T=1-T),N.vy+=L*T}function m(){if(s){var A,C=s.length,k=n.length,M=new Map(s.map((N,O)=>[e(N,O,s),N])),x;for(A=0,l=new Array(C);A<k;++A)x=n[A],x.index=A,typeof x.source!="object"&&(x.source=As(M,x.source)),typeof x.target!="object"&&(x.target=As(M,x.target)),l[x.source.index]=(l[x.source.index]||0)+1,l[x.target.index]=(l[x.target.index]||0)+1;for(A=0,h=new Array(k);A<k;++A)x=n[A],h[A]=l[x.source.index]/(l[x.source.index]+l[x.target.index]);r=new Array(k),E(),a=new Array(k),_()}}function E(){if(s)for(var A=0,C=n.length;A<C;++A)r[A]=+t(n[A],A,n)}function _(){if(s)for(var A=0,C=n.length;A<C;++A)a[A]=+o(n[A],A,n)}return v.initialize=function(A,C){s=A,d=C,m()},v.links=function(A){return arguments.length?(n=A,m(),v):n},v.id=function(A){return arguments.length?(e=A,v):e},v.iterations=function(A){return arguments.length?(p=+A,v):p},v.strength=function(A){return arguments.length?(t=typeof A=="function"?A:Xe(+A),E(),v):t},v.distance=function(A){return arguments.length?(o=typeof A=="function"?A:Xe(+A),_(),v):o},v}const Xg=1664525,Yg=1013904223,ks=4294967296;function Vg(){let n=1;return()=>(n=(Xg*n+Yg)%ks)/ks}function Qg(n){return n.x}function Zg(n){return n.y}var Jg=10,ey=Math.PI*(3-Math.sqrt(5));function ty(n){var e,t=1,r=.001,o=1-Math.pow(r,1/300),a=0,s=.6,l=new Map,h=ua(y),d=Bn("tick","end"),p=Vg();n==null&&(n=[]);function y(){v(),d.call("tick",e),t<r&&(h.stop(),d.call("end",e))}function v(_){var A,C=n.length,k;_===void 0&&(_=1);for(var M=0;M<_;++M)for(t+=(a-t)*o,l.forEach(function(x){x(t)}),A=0;A<C;++A)k=n[A],k.fx==null?k.x+=k.vx*=s:(k.x=k.fx,k.vx=0),k.fy==null?k.y+=k.vy*=s:(k.y=k.fy,k.vy=0);return e}function m(){for(var _=0,A=n.length,C;_<A;++_){if(C=n[_],C.index=_,C.fx!=null&&(C.x=C.fx),C.fy!=null&&(C.y=C.fy),isNaN(C.x)||isNaN(C.y)){var k=Jg*Math.sqrt(.5+_),M=_*ey;C.x=k*Math.cos(M),C.y=k*Math.sin(M)}(isNaN(C.vx)||isNaN(C.vy))&&(C.vx=C.vy=0)}}function E(_){return _.initialize&&_.initialize(n,p),_}return m(),e={tick:v,restart:function(){return h.restart(y),e},stop:function(){return h.stop(),e},nodes:function(_){return arguments.length?(n=_,m(),l.forEach(E),e):n},alpha:function(_){return arguments.length?(t=+_,e):t},alphaMin:function(_){return arguments.length?(r=+_,e):r},alphaDecay:function(_){return arguments.length?(o=+_,e):+o},alphaTarget:function(_){return arguments.length?(a=+_,e):a},velocityDecay:function(_){return arguments.length?(s=1-_,e):1-s},randomSource:function(_){return arguments.length?(p=_,l.forEach(E),e):p},force:function(_,A){return arguments.length>1?(A==null?l.delete(_):l.set(_,E(A)),e):l.get(_)},find:function(_,A,C){var k=0,M=n.length,x,N,O,w,L;for(C==null?C=1/0:C*=C,k=0;k<M;++k)w=n[k],x=_-w.x,N=A-w.y,O=x*x+N*N,O<C&&(L=w,C=O);return L},on:function(_,A){return arguments.length>1?(d.on(_,A),e):d.on(_)}}}function ry(){var n,e,t,r,o=Xe(-30),a,s=1,l=1/0,h=.81;function d(m){var E,_=n.length,A=da(n,Qg,Zg).visitAfter(y);for(r=m,E=0;E<_;++E)e=n[E],A.visit(v)}function p(){if(n){var m,E=n.length,_;for(a=new Array(E),m=0;m<E;++m)_=n[m],a[_.index]=+o(_,m,n)}}function y(m){var E=0,_,A,C=0,k,M,x;if(m.length){for(k=M=x=0;x<4;++x)(_=m[x])&&(A=Math.abs(_.value))&&(E+=_.value,C+=A,k+=A*_.x,M+=A*_.y);m.x=k/C,m.y=M/C}else{_=m,_.x=_.data.x,_.y=_.data.y;do E+=a[_.data.index];while(_=_.next)}m.value=E}function v(m,E,_,A){if(!m.value)return!0;var C=m.x-e.x,k=m.y-e.y,M=A-E,x=C*C+k*k;if(M*M/h<x)return x<l&&(C===0&&(C=Kt(t),x+=C*C),k===0&&(k=Kt(t),x+=k*k),x<s&&(x=Math.sqrt(s*x)),e.vx+=C*m.value*r/x,e.vy+=k*m.value*r/x),!0;if(m.length||x>=l)return;(m.data!==e||m.next)&&(C===0&&(C=Kt(t),x+=C*C),k===0&&(k=Kt(t),x+=k*k),x<s&&(x=Math.sqrt(s*x)));do m.data!==e&&(M=a[m.data.index]*r/x,e.vx+=C*M,e.vy+=k*M);while(m=m.next)}return d.initialize=function(m,E){n=m,t=E,p()},d.strength=function(m){return arguments.length?(o=typeof m=="function"?m:Xe(+m),p(),d):o},d.distanceMin=function(m){return arguments.length?(s=m*m,d):Math.sqrt(s)},d.distanceMax=function(m){return arguments.length?(l=m*m,d):Math.sqrt(l)},d.theta=function(m){return arguments.length?(h=m*m,d):Math.sqrt(h)},d}function ny(n){var e=Xe(.1),t,r,o;typeof n!="function"&&(n=Xe(n==null?0:+n));function a(l){for(var h=0,d=t.length,p;h<d;++h)p=t[h],p.vx+=(o[h]-p.x)*r[h]*l}function s(){if(t){var l,h=t.length;for(r=new Array(h),o=new Array(h),l=0;l<h;++l)r[l]=isNaN(o[l]=+n(t[l],l,t))?0:+e(t[l],l,t)}}return a.initialize=function(l){t=l,s()},a.strength=function(l){return arguments.length?(e=typeof l=="function"?l:Xe(+l),s(),a):e},a.x=function(l){return arguments.length?(n=typeof l=="function"?l:Xe(+l),s(),a):n},a}function iy(n){var e=Xe(.1),t,r,o;typeof n!="function"&&(n=Xe(n==null?0:+n));function a(l){for(var h=0,d=t.length,p;h<d;++h)p=t[h],p.vy+=(o[h]-p.y)*r[h]*l}function s(){if(t){var l,h=t.length;for(r=new Array(h),o=new Array(h),l=0;l<h;++l)r[l]=isNaN(o[l]=+n(t[l],l,t))?0:+e(t[l],l,t)}}return a.initialize=function(l){t=l,s()},a.strength=function(l){return arguments.length?(e=typeof l=="function"?l:Xe(+l),s(),a):e},a.y=function(l){return arguments.length?(n=typeof l=="function"?l:Xe(+l),s(),a):n},a}function Br(n,e,t){this.k=n,this.x=e,this.y=t}Br.prototype={constructor:Br,scale:function(n){return n===1?this:new Br(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Br(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Br.prototype;const oy={listeners:new Map,emit(n,e={}){document.dispatchEvent(new CustomEvent(n,{detail:e}))},on(n,e){if(typeof e!="function"){console.warn(`EventBus: Tried to register a non-function listener for event: ${n}`);return}this.listeners.has(n)||this.listeners.set(n,new Set);const t=this.listeners.get(n);if(t.has(e)){console.warn(`EventBus: Listener for event "${n}" is already registered.`);return}document.addEventListener(n,e),t.add(e)},off(n,e){if(!this.listeners.has(n)){console.warn(`EventBus: Attempted to remove a listener from a non-existent event: ${n}`);return}const t=this.listeners.get(n);if(!t.has(e)){console.warn(`EventBus: Attempted to remove a non-existent listener from event: ${n}`);return}document.removeEventListener(n,e),t.delete(e),t.size===0&&this.listeners.delete(n)},removeAll(n){if(!this.listeners.has(n)){console.warn(`EventBus: Attempted to remove all listeners from a non-existent event: ${n}`);return}this.listeners.get(n).forEach(e=>{document.removeEventListener(n,e)}),this.listeners.delete(n)}};function gi(n){const e=new Set(n.map(Number));let t=0;for(;e.has(t);)t++;return t}function Hr(n,e=3){const t="abcdefghijklmnopqrstuvwxyz",r=[];function o(s,l,h){if(h===0){r.push(s);return}for(let d=l;d<t.length;d++)if(o(s+t[d],d+1,h-1),r.length>n)return}let a=1;for(;r.length<=n&&a<=e;)o("",0,a),a++;return r[n]||null}function ay(n,e,t,r,o,a){let s=n-t,l=e-r,h=o-t,d=a-r,p=s*h+l*d,y=h*h+d*d,v=y!==0?p/y:-1,m,E;v<0?(m=t,E=r):v>1?(m=o,E=a):(m=t+v*h,E=r+v*d);let _=n-m,A=e-E;return Math.sqrt(_*_+A*A)}function bn(n,e){return(n%e+e)%e}const Le=document;function sy(n,e){Le.querySelector(".container").classList.toggle("grid-hidden",n.grid<=2),Le.getElementById("grid-size-1").value=n.node_radius,Le.getElementById("vertex-size-1").value=n.node_radius,Le.getElementById("edge-size-1").value=n.edge_size,Le.getElementById("label-size-1").value=n.label_size,Le.getElementById("history-limit-1").value=n.historyLimit,Le.querySelector("#vertex-label .check").classList.toggle("hidden",!n.vertexLabel),Le.querySelector("#edge-label .check").classList.toggle("hidden",!n.edgeLabel),Le.querySelector("#face-label .check").classList.toggle("hidden",!n.faceLabel),Le.querySelector("#weight-label .check").classList.toggle("hidden",!n.weightLabel),Le.querySelector("#save-history .check").classList.toggle("hidden",!n.saveHistory),Le.querySelector("#component").classList.toggle("gray-background",!n.component),Le.querySelector("#scale").classList.toggle("gray-background",!n.scale),Le.querySelector("#tree").classList.toggle("gray-background",!n.tree),Le.querySelector("#force").classList.toggle("gray-background",!n.forceSimulation),Le.querySelector("#colorPicker").classList.toggle("gray-background",!n.colorPicker),Le.querySelector("#panning").classList.toggle("gray-background",!n.panning),Le.querySelector("#select").classList.toggle("gray-background",!n.select),e.style.cursor=n.panning?"move":"default";const t=Le.documentElement;Le.querySelector(".container").classList.toggle("grid-hidden",n.grid<=2),t.style.setProperty("--grid-size",`${n.grid}px`),t.style.setProperty("--grid-color",n.grid_color),Le.querySelector(".container").style.backgroundColor=n.background_color}class uy{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.appSettings.settings,this.canvas=nr("#chart").node(),this.ctx=this.canvas.getContext("2d"),this.mouse={x:0,y:0,dragging:!1}}init(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.canvas.addEventListener("dblclick",this.handleDbclick.bind(this)),this.canvas.addEventListener("click",this.handleclick.bind(this));let e=0;this.canvas.addEventListener("touchend",t=>{const r=new Date().getTime(),o=r-e;o<300&&o>0&&this.handleDbclick(t),e=r}),nr("canvas").on("mousedown",t=>{this.mouse.dragging=!1,[this.mouse.x,this.mouse.y]=ct(t)}).on("mousemove",t=>{const[r,o]=ct(t);(Math.abs(r-this.mouse.x)>2||Math.abs(o-this.mouse.y)>2)&&(this.mouse.dragging=!0)}).on("mouseup",t=>{this.mouse.dragging||([this.mouse.x,this.mouse.y]=ct(t))}),nr(this.canvas).call(Hf().container(this.canvas).subject(this.dragsubject.bind(this)).filter(t=>!(this.settings.scale||this.settings.select)).on("start",this.dragstarted.bind(this)).on("drag",this.dragged.bind(this)).on("end",this.dragended.bind(this)))}addNodeAtEvent(e){e.preventDefault();const[t,r]=e.type=="touchend"?Cs(e,this.canvas):ct(e,this.canvas),o=gi(this.app.graphManager.graph.nodes()),a=Hr(o);this.app.graphManager.addNode(o,{x:t,y:r,color:this.settings.node_color,label:a})}addNodeConnectedToNode(e){const t=gi(this.app.graphManager.graph.nodes()),r=Hr(t),o={x:e.x+30,y:e.y+30,color:this.settings.node_color,label:r};this.app.graphManager.addNode(t,o),this.app.graphManager.graph.addEdge(e.id,t),this.eventBus.emit("graph:updated",{type:"addNode",node:t})}dragsubject(e){let t={id:null},r=1/0;return this.app.nodes.forEach(o=>{const a=e.x-o.x,s=e.y-o.y,l=Math.sqrt(a*a+s*s);l<this.settings.node_radius*o.size&&l<r&&(r=l,t=o)}),t&&(this.settings.component?t.component=this.app.graphManager.metric.getComponent(t.id):t.component=this.app.graphManager.graph.getSelectedNodes()),this.settings.panning&&(t.component=this.app.graphManager.graph.nodes()),t}dragstarted(e){!e.active&&this.settings.forceSimulation&&this.app.simulation.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y,e.subject.__moved=!1}dragged(e){if(e.subject.fx=e.x,e.subject.fy=e.y,(e.dx!==0||e.dy!==0)&&(e.subject.__moved=!0),!this.settings.forceSimulation&&e.subject.component){for(let t of e.subject.component)this.app.graphManager.graph.updateNodeAttributes(t,r=>({...r,x:r.x+e.dx,y:r.y+e.dy}));e.subject.id!==null&&this.app.graphManager.graph.updateNodeAttributes(e.subject.id,t=>({...t,x:e.x,y:e.y}))}}dragended(e){e.active||this.app.simulation.alphaTarget(0),e.subject.fx=null,e.subject.fy=null,e.subject.x=e.x,e.subject.y=e.y,this.settings.forceSimulation||this.app.updateSimulation(),e.subject.__moved&&e.subject.id&&!this.settings.forceSimulation&&this.app.graphManager.saveGraphState()}findClickedNode(e,t){return this.app.nodes.find(r=>{let o=e-r.x,a=t-r.y;return Math.sqrt(o*o+a*a)<this.settings.node_radius*r.size})}findClickedEdge(e,t){let r=10;return this.app.links.find(o=>{let a=o.source,s=o.target;return ay(e,t,a.x,a.y,s.x,s.y)<r})}insertNodeInEdge(e){const t=gi(this.app.graphManager.graph.nodes()),r=Hr(t);let o=(e.source.x+e.target.x)/2,a=(e.source.y+e.target.y)/2;this.app.graphManager.graph.addNode(t,{x:o,y:a,color:this.settings.color,label:r}),this.app.graphManager.graph.dropEdge(e.source.id,e.target.id),this.app.graphManager.graph.addEdge(e.source.id,t),this.app.graphManager.graph.addEdge(t,e.target.id),this.eventBus.emit("graph:updated",{type:"addNodeInEdge",node:t})}handleDbclick(e){const[t,r]=e.type=="touchend"?Cs(e,this.canvas):ct(e,this.canvas);let o=this.findClickedNode(t,r),a=this.findClickedEdge(t,r);o?this.settings.tree?this.addNodeConnectedToNode(o):this.app.graphManager.graph.toggleNodeSelection(o.id):a?this.settings.tree?this.insertNodeInEdge(a):this.app.graphManager.graph.findEdge(a.source.id,a.target.id,s=>{this.app.graphManager.graph.toggleEdgeSelection(s)}):this.addNodeAtEvent(e)}handleclick(e){if(this.mouse.dragging)return;let[t,r]=ct(e,this.canvas),o=this.findClickedNode(t,r),a=this.findClickedEdge(t,r);o?this.settings.select?(this.app.graphManager.graph.toggleNodeSelection(o.id),this.settings.forceSimulation||this.eventBus.emit("graph:updated",{type:"selected"})):(this.app.graphManager.metric.addNodeInfo(o),this.settings.colorPicker&&(this.app.colorPicker.setColor("node",o.color),this.app.colorPicker.setColor("stroke",o.stroke),this.app.colorPicker.setColor("label",o.labelColor))):a?this.settings.select?this.app.graphManager.graph.findEdge(a.source.id,a.target.id,s=>{this.app.graphManager.graph.toggleEdgeSelection(s),this.settings.forceSimulation||this.eventBus.emit("graph:updated",{type:"selected"})}):(this.app.graphManager.metric.addEdgeInfo(a),this.settings.colorPicker&&(this.app.colorPicker.setColor("edge",a.color),this.app.colorPicker.setColor("label",a.labelColor))):(this.app.graphManager.deselectAll(),this.app.rect.scale.active=!1)}}function Cs(n,e){const t=n.changedTouches[0],r=e.getBoundingClientRect();return[t.clientX-r.left,t.clientY-r.top]}function Ve(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wn={exports:{}},Ds;function cy(){if(Ds)return wn.exports;Ds=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(N,O,w){return Function.prototype.apply.call(N,O,w)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:t=function(N){return Object.getOwnPropertyNames(N)};function r(x){console&&console.warn&&console.warn(x)}var o=Number.isNaN||function(N){return N!==N};function a(){a.init.call(this)}wn.exports=a,wn.exports.once=C,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function l(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(x){if(typeof x!="number"||x<0||o(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");s=x}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(N){if(typeof N!="number"||N<0||o(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this};function h(x){return x._maxListeners===void 0?a.defaultMaxListeners:x._maxListeners}a.prototype.getMaxListeners=function(){return h(this)},a.prototype.emit=function(N){for(var O=[],w=1;w<arguments.length;w++)O.push(arguments[w]);var L=N==="error",z=this._events;if(z!==void 0)L=L&&z.error===void 0;else if(!L)return!1;if(L){var T;if(O.length>0&&(T=O[0]),T instanceof Error)throw T;var q=new Error("Unhandled error."+(T?" ("+T.message+")":""));throw q.context=T,q}var j=z[N];if(j===void 0)return!1;if(typeof j=="function")e(j,this,O);else for(var P=j.length,ee=E(j,P),w=0;w<P;++w)e(ee[w],this,O);return!0};function d(x,N,O,w){var L,z,T;if(l(O),z=x._events,z===void 0?(z=x._events=Object.create(null),x._eventsCount=0):(z.newListener!==void 0&&(x.emit("newListener",N,O.listener?O.listener:O),z=x._events),T=z[N]),T===void 0)T=z[N]=O,++x._eventsCount;else if(typeof T=="function"?T=z[N]=w?[O,T]:[T,O]:w?T.unshift(O):T.push(O),L=h(x),L>0&&T.length>L&&!T.warned){T.warned=!0;var q=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");q.name="MaxListenersExceededWarning",q.emitter=x,q.type=N,q.count=T.length,r(q)}return x}a.prototype.addListener=function(N,O){return d(this,N,O,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(N,O){return d(this,N,O,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(x,N,O){var w={fired:!1,wrapFn:void 0,target:x,type:N,listener:O},L=p.bind(w);return L.listener=O,w.wrapFn=L,L}a.prototype.once=function(N,O){return l(O),this.on(N,y(this,N,O)),this},a.prototype.prependOnceListener=function(N,O){return l(O),this.prependListener(N,y(this,N,O)),this},a.prototype.removeListener=function(N,O){var w,L,z,T,q;if(l(O),L=this._events,L===void 0)return this;if(w=L[N],w===void 0)return this;if(w===O||w.listener===O)--this._eventsCount===0?this._events=Object.create(null):(delete L[N],L.removeListener&&this.emit("removeListener",N,w.listener||O));else if(typeof w!="function"){for(z=-1,T=w.length-1;T>=0;T--)if(w[T]===O||w[T].listener===O){q=w[T].listener,z=T;break}if(z<0)return this;z===0?w.shift():_(w,z),w.length===1&&(L[N]=w[0]),L.removeListener!==void 0&&this.emit("removeListener",N,q||O)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(N){var O,w,L;if(w=this._events,w===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[N]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete w[N]),this;if(arguments.length===0){var z=Object.keys(w),T;for(L=0;L<z.length;++L)T=z[L],T!=="removeListener"&&this.removeAllListeners(T);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(O=w[N],typeof O=="function")this.removeListener(N,O);else if(O!==void 0)for(L=O.length-1;L>=0;L--)this.removeListener(N,O[L]);return this};function v(x,N,O){var w=x._events;if(w===void 0)return[];var L=w[N];return L===void 0?[]:typeof L=="function"?O?[L.listener||L]:[L]:O?A(L):E(L,L.length)}a.prototype.listeners=function(N){return v(this,N,!0)},a.prototype.rawListeners=function(N){return v(this,N,!1)},a.listenerCount=function(x,N){return typeof x.listenerCount=="function"?x.listenerCount(N):m.call(x,N)},a.prototype.listenerCount=m;function m(x){var N=this._events;if(N!==void 0){var O=N[x];if(typeof O=="function")return 1;if(O!==void 0)return O.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function E(x,N){for(var O=new Array(N),w=0;w<N;++w)O[w]=x[w];return O}function _(x,N){for(;N+1<x.length;N++)x[N]=x[N+1];x.pop()}function A(x){for(var N=new Array(x.length),O=0;O<N.length;++O)N[O]=x[O].listener||x[O];return N}function C(x,N){return new Promise(function(O,w){function L(T){x.removeListener(N,z),w(T)}function z(){typeof x.removeListener=="function"&&x.removeListener("error",L),O([].slice.call(arguments))}M(x,N,z,{once:!0}),N!=="error"&&k(x,L,{once:!0})})}function k(x,N,O){typeof x.on=="function"&&M(x,"error",N,O)}function M(x,N,O,w){if(typeof x.on=="function")w.once?x.once(N,O):x.on(N,O);else if(typeof x.addEventListener=="function")x.addEventListener(N,function L(z){w.once&&x.removeEventListener(N,L),O(z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x)}return wn.exports}var ly=cy(),yi,Ns;function ar(){if(Ns)return yi;Ns=1;function n(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}return typeof Symbol<"u"&&(n.prototype[Symbol.iterator]=function(){return this}),n.of=function(){var e=arguments,t=e.length,r=0;return new n(function(){return r>=t?{done:!0}:{done:!1,value:e[r++]}})},n.empty=function(){var e=new n(function(){return{done:!0}});return e},n.fromSequence=function(e){var t=0,r=e.length;return new n(function(){return t>=r?{done:!0}:{done:!1,value:e[t++]}})},n.is=function(e){return e instanceof n?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"},yi=n,yi}var dy=ar();const dt=Ve(dy);var En={},Is;function pl(){return Is||(Is=1,En.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",En.SYMBOL_SUPPORT=typeof Symbol<"u"),En}var vi,Ms;function gl(){if(Ms)return vi;Ms=1;var n=ar(),e=pl(),t=e.ARRAY_BUFFER_SUPPORT,r=e.SYMBOL_SUPPORT;function o(a){return typeof a=="string"||Array.isArray(a)||t&&ArrayBuffer.isView(a)?n.fromSequence(a):typeof a!="object"||a===null?null:r&&typeof a[Symbol.iterator]=="function"?a[Symbol.iterator]():typeof a.next=="function"?a:null}return vi=function(s){var l=o(s);if(!l)throw new Error("obliterator: target is not iterable nor a valid iterator.");return l},vi}var mi,Ls;function hy(){if(Ls)return mi;Ls=1;var n=gl();return mi=function(t,r){for(var o=arguments.length>1?r:1/0,a=o!==1/0?new Array(o):[],s,l=0,h=n(t);;){if(l===o)return a;if(s=h.next(),s.done)return l!==r&&(a.length=l),a;a[l++]=s.value}},mi}var fy=hy();const yl=Ve(fy);var bi,zs;function py(){if(zs)return bi;zs=1;var n=ar(),e=gl();return bi=function(){var r=arguments,o=null,a=-1;return new n(function(){var l=null;do{if(o===null){if(a++,a>=r.length)return{done:!0};o=e(r[a])}if(l=o.next(),l.done===!0){o=null;continue}break}while(!0);return l})},bi}var gy=py();const Ot=Ve(gy);function yy(){const n=arguments[0];for(let e=1,t=arguments.length;e<t;e++)if(arguments[e])for(const r in arguments[e])n[r]=arguments[e][r];return n}let $e=yy;typeof Object.assign=="function"&&($e=Object.assign);function lt(n,e,t,r){const o=n._nodes.get(e);let a=null;return o&&(r==="mixed"?a=o.out&&o.out[t]||o.undirected&&o.undirected[t]:r==="directed"?a=o.out&&o.out[t]:a=o.undirected&&o.undirected[t]),a}function Pe(n){return typeof n=="object"&&n!==null}function vl(n){let e;for(e in n)return!1;return!0}function at(n,e,t){Object.defineProperty(n,e,{enumerable:!1,configurable:!1,writable:!0,value:t})}function pt(n,e,t){const r={enumerable:!0,configurable:!0};typeof t=="function"?r.get=t:(r.value=t,r.writable=!1),Object.defineProperty(n,e,r)}function $s(n){return!(!Pe(n)||n.attributes&&!Array.isArray(n.attributes))}function vy(){let n=Math.floor(Math.random()*256)&255;return()=>n++}class fa extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}let le=class ml extends fa{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ml.prototype.constructor)}};class ae extends fa{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ae.prototype.constructor)}}class we extends fa{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,we.prototype.constructor)}}function bl(n,e){this.key=n,this.attributes=e,this.clear()}bl.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function wl(n,e){this.key=n,this.attributes=e,this.clear()}wl.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function El(n,e){this.key=n,this.attributes=e,this.clear()}El.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Sr(n,e,t,r,o){this.key=e,this.attributes=o,this.undirected=n,this.source=t,this.target=r}Sr.prototype.attach=function(){let n="out",e="in";this.undirected&&(n=e="undirected");const t=this.source.key,r=this.target.key;this.source[n][r]=this,!(this.undirected&&t===r)&&(this.target[e][t]=this)};Sr.prototype.attachMulti=function(){let n="out",e="in";const t=this.source.key,r=this.target.key;this.undirected&&(n=e="undirected");const o=this.source[n],a=o[r];if(typeof a>"u"){o[r]=this,this.undirected&&t===r||(this.target[e][t]=this);return}a.previous=this,this.next=a,o[r]=this,this.target[e][t]=this};Sr.prototype.detach=function(){const n=this.source.key,e=this.target.key;let t="out",r="in";this.undirected&&(t=r="undirected"),delete this.source[t][e],delete this.target[r][n]};Sr.prototype.detachMulti=function(){const n=this.source.key,e=this.target.key;let t="out",r="in";this.undirected&&(t=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][e],delete this.target[r][n]):(this.next.previous=void 0,this.source[t][e]=this.next,this.target[r][n]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const xl=0,_l=1,my=2,Sl=3;function Rt(n,e,t,r,o,a,s){let l,h,d,p;if(r=""+r,t===xl){if(l=n._nodes.get(r),!l)throw new ae(`Graph.${e}: could not find the "${r}" node in the graph.`);d=o,p=a}else if(t===Sl){if(o=""+o,h=n._edges.get(o),!h)throw new ae(`Graph.${e}: could not find the "${o}" edge in the graph.`);const y=h.source.key,v=h.target.key;if(r===y)l=h.target;else if(r===v)l=h.source;else throw new ae(`Graph.${e}: the "${r}" node is not attached to the "${o}" edge (${y}, ${v}).`);d=a,p=s}else{if(h=n._edges.get(r),!h)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`);t===_l?l=h.source:l=h.target,d=o,p=a}return[l,d,p]}function by(n,e,t){n.prototype[e]=function(r,o,a){const[s,l]=Rt(this,e,t,r,o,a);return s.attributes[l]}}function wy(n,e,t){n.prototype[e]=function(r,o){const[a]=Rt(this,e,t,r,o);return a.attributes}}function Ey(n,e,t){n.prototype[e]=function(r,o,a){const[s,l]=Rt(this,e,t,r,o,a);return s.attributes.hasOwnProperty(l)}}function xy(n,e,t){n.prototype[e]=function(r,o,a,s){const[l,h,d]=Rt(this,e,t,r,o,a,s);return l.attributes[h]=d,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:h}),this}}function _y(n,e,t){n.prototype[e]=function(r,o,a,s){const[l,h,d]=Rt(this,e,t,r,o,a,s);if(typeof d!="function")throw new le(`Graph.${e}: updater should be a function.`);const p=l.attributes,y=d(p[h]);return p[h]=y,this.emit("nodeAttributesUpdated",{key:l.key,type:"set",attributes:l.attributes,name:h}),this}}function Sy(n,e,t){n.prototype[e]=function(r,o,a){const[s,l]=Rt(this,e,t,r,o,a);return delete s.attributes[l],this.emit("nodeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:l}),this}}function Ay(n,e,t){n.prototype[e]=function(r,o,a){const[s,l]=Rt(this,e,t,r,o,a);if(!Pe(l))throw new le(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=l,this.emit("nodeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function ky(n,e,t){n.prototype[e]=function(r,o,a){const[s,l]=Rt(this,e,t,r,o,a);if(!Pe(l))throw new le(`Graph.${e}: provided attributes are not a plain object.`);return $e(s.attributes,l),this.emit("nodeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:l}),this}}function Cy(n,e,t){n.prototype[e]=function(r,o,a){const[s,l]=Rt(this,e,t,r,o,a);if(typeof l!="function")throw new le(`Graph.${e}: provided updater is not a function.`);return s.attributes=l(s.attributes),this.emit("nodeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Dy=[{name:n=>`get${n}Attribute`,attacher:by},{name:n=>`get${n}Attributes`,attacher:wy},{name:n=>`has${n}Attribute`,attacher:Ey},{name:n=>`set${n}Attribute`,attacher:xy},{name:n=>`update${n}Attribute`,attacher:_y},{name:n=>`remove${n}Attribute`,attacher:Sy},{name:n=>`replace${n}Attributes`,attacher:Ay},{name:n=>`merge${n}Attributes`,attacher:ky},{name:n=>`update${n}Attributes`,attacher:Cy}];function Ny(n){Dy.forEach(function({name:e,attacher:t}){t(n,e("Node"),xl),t(n,e("Source"),_l),t(n,e("Target"),my),t(n,e("Opposite"),Sl)})}function Iy(n,e,t){n.prototype[e]=function(r,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,l=""+o;if(o=arguments[2],a=lt(this,s,l,t),!a)throw new ae(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return a.attributes[o]}}function My(n,e,t){n.prototype[e]=function(r){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+arguments[1];if(o=lt(this,a,s,t),!o)throw new ae(`Graph.${e}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes}}function Ly(n,e,t){n.prototype[e]=function(r,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,l=""+o;if(o=arguments[2],a=lt(this,s,l,t),!a)throw new ae(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return a.attributes.hasOwnProperty(o)}}function zy(n,e,t){n.prototype[e]=function(r,o,a){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+r,h=""+o;if(o=arguments[2],a=arguments[3],s=lt(this,l,h,t),!s)throw new ae(`Graph.${e}: could not find an edge for the given path ("${l}" - "${h}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[o]=a,this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:o}),this}}function $y(n,e,t){n.prototype[e]=function(r,o,a){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+r,h=""+o;if(o=arguments[2],a=arguments[3],s=lt(this,l,h,t),!s)throw new ae(`Graph.${e}: could not find an edge for the given path ("${l}" - "${h}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof a!="function")throw new le(`Graph.${e}: updater should be a function.`);return s.attributes[o]=a(s.attributes[o]),this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:o}),this}}function Ty(n,e,t){n.prototype[e]=function(r,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,l=""+o;if(o=arguments[2],a=lt(this,s,l,t),!a)throw new ae(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete a.attributes[o],this.emit("edgeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:o}),this}}function Py(n,e,t){n.prototype[e]=function(r,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,l=""+o;if(o=arguments[2],a=lt(this,s,l,t),!a)throw new ae(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Pe(o))throw new le(`Graph.${e}: provided attributes are not a plain object.`);return a.attributes=o,this.emit("edgeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function Oy(n,e,t){n.prototype[e]=function(r,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,l=""+o;if(o=arguments[2],a=lt(this,s,l,t),!a)throw new ae(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Pe(o))throw new le(`Graph.${e}: provided attributes are not a plain object.`);return $e(a.attributes,o),this.emit("edgeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:o}),this}}function Gy(n,e,t){n.prototype[e]=function(r,o){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new we(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new we(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,l=""+o;if(o=arguments[2],a=lt(this,s,l,t),!a)throw new ae(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(t!=="mixed")throw new we(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new ae(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof o!="function")throw new le(`Graph.${e}: provided updater is not a function.`);return a.attributes=o(a.attributes),this.emit("edgeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const Ry=[{name:n=>`get${n}Attribute`,attacher:Iy},{name:n=>`get${n}Attributes`,attacher:My},{name:n=>`has${n}Attribute`,attacher:Ly},{name:n=>`set${n}Attribute`,attacher:zy},{name:n=>`update${n}Attribute`,attacher:$y},{name:n=>`remove${n}Attribute`,attacher:Ty},{name:n=>`replace${n}Attributes`,attacher:Py},{name:n=>`merge${n}Attributes`,attacher:Oy},{name:n=>`update${n}Attributes`,attacher:Gy}];function qy(n){Ry.forEach(function({name:e,attacher:t}){t(n,e("Edge"),"mixed"),t(n,e("DirectedEdge"),"directed"),t(n,e("UndirectedEdge"),"undirected")})}const Fy=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function jy(n,e,t,r){let o=!1;for(const a in e){if(a===r)continue;const s=e[a];if(o=t(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),n&&o)return s.key}}function By(n,e,t,r){let o,a,s,l=!1;for(const h in e)if(h!==r){o=e[h];do{if(a=o.source,s=o.target,l=t(o.key,o.attributes,a.key,s.key,a.attributes,s.attributes,o.undirected),n&&l)return o.key;o=o.next}while(o!==void 0)}}function wi(n,e){const t=Object.keys(n),r=t.length;let o,a=0;return new dt(function(){do if(o)o=o.next;else{if(a>=r)return{done:!0};const l=t[a++];if(l===e){o=void 0;continue}o=n[l]}while(!o);return{done:!1,value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected}}})}function Uy(n,e,t,r){const o=e[t];if(!o)return;const a=o.source,s=o.target;if(r(o.key,o.attributes,a.key,s.key,a.attributes,s.attributes,o.undirected)&&n)return o.key}function Hy(n,e,t,r){let o=e[t];if(!o)return;let a=!1;do{if(a=r(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),n&&a)return o.key;o=o.next}while(o!==void 0)}function Ei(n,e){let t=n[e];return t.next!==void 0?new dt(function(){if(!t)return{done:!0};const r={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:r}}):dt.of({edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected})}function Wy(n,e){if(n.size===0)return[];if(e==="mixed"||e===n.type)return typeof Array.from=="function"?Array.from(n._edges.keys()):yl(n._edges.keys(),n._edges.size);const t=e==="undirected"?n.undirectedSize:n.directedSize,r=new Array(t),o=e==="undirected",a=n._edges.values();let s=0,l,h;for(;l=a.next(),l.done!==!0;)h=l.value,h.undirected===o&&(r[s++]=h.key);return r}function Al(n,e,t,r){if(e.size===0)return;const o=t!=="mixed"&&t!==e.type,a=t==="undirected";let s,l,h=!1;const d=e._edges.values();for(;s=d.next(),s.done!==!0;){if(l=s.value,o&&l.undirected!==a)continue;const{key:p,attributes:y,source:v,target:m}=l;if(h=r(p,y,v.key,m.key,v.attributes,m.attributes,l.undirected),n&&h)return p}}function Ky(n,e){if(n.size===0)return dt.empty();const t=e!=="mixed"&&e!==n.type,r=e==="undirected",o=n._edges.values();return new dt(function(){let s,l;for(;;){if(s=o.next(),s.done)return s;if(l=s.value,!(t&&l.undirected!==r))break}return{value:{edge:l.key,attributes:l.attributes,source:l.source.key,target:l.target.key,sourceAttributes:l.source.attributes,targetAttributes:l.target.attributes,undirected:l.undirected},done:!1}})}function pa(n,e,t,r,o,a){const s=e?By:jy;let l;if(t!=="undirected"&&(r!=="out"&&(l=s(n,o.in,a),n&&l)||r!=="in"&&(l=s(n,o.out,a,r?void 0:o.key),n&&l))||t!=="directed"&&(l=s(n,o.undirected,a),n&&l))return l}function Xy(n,e,t,r){const o=[];return pa(!1,n,e,t,r,function(a){o.push(a)}),o}function Yy(n,e,t){let r=dt.empty();return n!=="undirected"&&(e!=="out"&&typeof t.in<"u"&&(r=Ot(r,wi(t.in))),e!=="in"&&typeof t.out<"u"&&(r=Ot(r,wi(t.out,e?void 0:t.key)))),n!=="directed"&&typeof t.undirected<"u"&&(r=Ot(r,wi(t.undirected))),r}function ga(n,e,t,r,o,a,s){const l=t?Hy:Uy;let h;if(e!=="undirected"&&(typeof o.in<"u"&&r!=="out"&&(h=l(n,o.in,a,s),n&&h)||typeof o.out<"u"&&r!=="in"&&(r||o.key!==a)&&(h=l(n,o.out,a,s),n&&h))||e!=="directed"&&typeof o.undirected<"u"&&(h=l(n,o.undirected,a,s),n&&h))return h}function Vy(n,e,t,r,o){const a=[];return ga(!1,n,e,t,r,o,function(s){a.push(s)}),a}function Qy(n,e,t,r){let o=dt.empty();return n!=="undirected"&&(typeof t.in<"u"&&e!=="out"&&r in t.in&&(o=Ot(o,Ei(t.in,r))),typeof t.out<"u"&&e!=="in"&&r in t.out&&(e||t.key!==r)&&(o=Ot(o,Ei(t.out,r)))),n!=="directed"&&typeof t.undirected<"u"&&r in t.undirected&&(o=Ot(o,Ei(t.undirected,r))),o}function Zy(n,e){const{name:t,type:r,direction:o}=e;n.prototype[t]=function(a,s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return Wy(this,r);if(arguments.length===1){a=""+a;const l=this._nodes.get(a);if(typeof l>"u")throw new ae(`Graph.${t}: could not find the "${a}" node in the graph.`);return Xy(this.multi,r==="mixed"?this.type:r,o,l)}if(arguments.length===2){a=""+a,s=""+s;const l=this._nodes.get(a);if(!l)throw new ae(`Graph.${t}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(s))throw new ae(`Graph.${t}:  could not find the "${s}" target node in the graph.`);return Vy(r,this.multi,o,l,s)}throw new le(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Jy(n,e){const{name:t,type:r,direction:o}=e,a="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[a]=function(d,p,y){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return y=d,Al(!1,this,r,y);if(arguments.length===2){d=""+d,y=p;const v=this._nodes.get(d);if(typeof v>"u")throw new ae(`Graph.${a}: could not find the "${d}" node in the graph.`);return pa(!1,this.multi,r==="mixed"?this.type:r,o,v,y)}if(arguments.length===3){d=""+d,p=""+p;const v=this._nodes.get(d);if(!v)throw new ae(`Graph.${a}:  could not find the "${d}" source node in the graph.`);if(!this._nodes.has(p))throw new ae(`Graph.${a}:  could not find the "${p}" target node in the graph.`);return ga(!1,r,this.multi,o,v,p,y)}throw new le(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const s="map"+t[0].toUpperCase()+t.slice(1);n.prototype[s]=function(){const d=Array.prototype.slice.call(arguments),p=d.pop();let y;if(d.length===0){let v=0;r!=="directed"&&(v+=this.undirectedSize),r!=="undirected"&&(v+=this.directedSize),y=new Array(v);let m=0;d.push((E,_,A,C,k,M,x)=>{y[m++]=p(E,_,A,C,k,M,x)})}else y=[],d.push((v,m,E,_,A,C,k)=>{y.push(p(v,m,E,_,A,C,k))});return this[a].apply(this,d),y};const l="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(){const d=Array.prototype.slice.call(arguments),p=d.pop(),y=[];return d.push((v,m,E,_,A,C,k)=>{p(v,m,E,_,A,C,k)&&y.push(v)}),this[a].apply(this,d),y};const h="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[h]=function(){let d=Array.prototype.slice.call(arguments);if(d.length<2||d.length>4)throw new le(`Graph.${h}: invalid number of arguments (expecting 2, 3 or 4 and got ${d.length}).`);if(typeof d[d.length-1]=="function"&&typeof d[d.length-2]!="function")throw new le(`Graph.${h}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let p,y;d.length===2?(p=d[0],y=d[1],d=[]):d.length===3?(p=d[1],y=d[2],d=[d[0]]):d.length===4&&(p=d[2],y=d[3],d=[d[0],d[1]]);let v=y;return d.push((m,E,_,A,C,k,M)=>{v=p(v,m,E,_,A,C,k,M)}),this[a].apply(this,d),v}}function ev(n,e){const{name:t,type:r,direction:o}=e,a="find"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[a]=function(h,d,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return p=h,Al(!0,this,r,p);if(arguments.length===2){h=""+h,p=d;const y=this._nodes.get(h);if(typeof y>"u")throw new ae(`Graph.${a}: could not find the "${h}" node in the graph.`);return pa(!0,this.multi,r==="mixed"?this.type:r,o,y,p)}if(arguments.length===3){h=""+h,d=""+d;const y=this._nodes.get(h);if(!y)throw new ae(`Graph.${a}:  could not find the "${h}" source node in the graph.`);if(!this._nodes.has(d))throw new ae(`Graph.${a}:  could not find the "${d}" target node in the graph.`);return ga(!0,r,this.multi,o,y,d,p)}throw new le(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const s="some"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(){const h=Array.prototype.slice.call(arguments),d=h.pop();return h.push((y,v,m,E,_,A,C)=>d(y,v,m,E,_,A,C)),!!this[a].apply(this,h)};const l="every"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[l]=function(){const h=Array.prototype.slice.call(arguments),d=h.pop();return h.push((y,v,m,E,_,A,C)=>!d(y,v,m,E,_,A,C)),!this[a].apply(this,h)}}function tv(n,e){const{name:t,type:r,direction:o}=e,a=t.slice(0,-1)+"Entries";n.prototype[a]=function(s,l){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return dt.empty();if(!arguments.length)return Ky(this,r);if(arguments.length===1){s=""+s;const h=this._nodes.get(s);if(!h)throw new ae(`Graph.${a}: could not find the "${s}" node in the graph.`);return Yy(r,o,h)}if(arguments.length===2){s=""+s,l=""+l;const h=this._nodes.get(s);if(!h)throw new ae(`Graph.${a}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(l))throw new ae(`Graph.${a}:  could not find the "${l}" target node in the graph.`);return Qy(r,o,h,l)}throw new le(`Graph.${a}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function rv(n){Fy.forEach(e=>{Zy(n,e),Jy(n,e),ev(n,e),tv(n,e)})}const nv=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Kn(){this.A=null,this.B=null}Kn.prototype.wrap=function(n){this.A===null?this.A=n:this.B===null&&(this.B=n)};Kn.prototype.has=function(n){return this.A!==null&&n in this.A||this.B!==null&&n in this.B};function Tr(n,e,t,r,o){for(const a in r){const s=r[a],l=s.source,h=s.target,d=l===t?h:l;if(e&&e.has(d.key))continue;const p=o(d.key,d.attributes);if(n&&p)return d.key}}function ya(n,e,t,r,o){if(e!=="mixed"){if(e==="undirected")return Tr(n,null,r,r.undirected,o);if(typeof t=="string")return Tr(n,null,r,r[t],o)}const a=new Kn;let s;if(e!=="undirected"){if(t!=="out"){if(s=Tr(n,null,r,r.in,o),n&&s)return s;a.wrap(r.in)}if(t!=="in"){if(s=Tr(n,a,r,r.out,o),n&&s)return s;a.wrap(r.out)}}if(e!=="directed"&&(s=Tr(n,a,r,r.undirected,o),n&&s))return s}function iv(n,e,t){if(n!=="mixed"){if(n==="undirected")return Object.keys(t.undirected);if(typeof e=="string")return Object.keys(t[e])}const r=[];return ya(!1,n,e,t,function(o){r.push(o)}),r}function Pr(n,e,t){const r=Object.keys(t),o=r.length;let a=0;return new dt(function(){let l=null;do{if(a>=o)return n&&n.wrap(t),{done:!0};const h=t[r[a++]],d=h.source,p=h.target;if(l=d===e?p:d,n&&n.has(l.key)){l=null;continue}}while(l===null);return{done:!1,value:{neighbor:l.key,attributes:l.attributes}}})}function ov(n,e,t){if(n!=="mixed"){if(n==="undirected")return Pr(null,t,t.undirected);if(typeof e=="string")return Pr(null,t,t[e])}let r=dt.empty();const o=new Kn;return n!=="undirected"&&(e!=="out"&&(r=Ot(r,Pr(o,t,t.in))),e!=="in"&&(r=Ot(r,Pr(o,t,t.out)))),n!=="directed"&&(r=Ot(r,Pr(o,t,t.undirected))),r}function av(n,e){const{name:t,type:r,direction:o}=e;n.prototype[t]=function(a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];a=""+a;const s=this._nodes.get(a);if(typeof s>"u")throw new ae(`Graph.${t}: could not find the "${a}" node in the graph.`);return iv(r==="mixed"?this.type:r,o,s)}}function sv(n,e){const{name:t,type:r,direction:o}=e,a="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[a]=function(d,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;d=""+d;const y=this._nodes.get(d);if(typeof y>"u")throw new ae(`Graph.${a}: could not find the "${d}" node in the graph.`);ya(!1,r==="mixed"?this.type:r,o,y,p)};const s="map"+t[0].toUpperCase()+t.slice(1);n.prototype[s]=function(d,p){const y=[];return this[a](d,(v,m)=>{y.push(p(v,m))}),y};const l="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(d,p){const y=[];return this[a](d,(v,m)=>{p(v,m)&&y.push(v)}),y};const h="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[h]=function(d,p,y){if(arguments.length<3)throw new le(`Graph.${h}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let v=y;return this[a](d,(m,E)=>{v=p(v,m,E)}),v}}function uv(n,e){const{name:t,type:r,direction:o}=e,a=t[0].toUpperCase()+t.slice(1,-1),s="find"+a;n.prototype[s]=function(d,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;d=""+d;const y=this._nodes.get(d);if(typeof y>"u")throw new ae(`Graph.${s}: could not find the "${d}" node in the graph.`);return ya(!0,r==="mixed"?this.type:r,o,y,p)};const l="some"+a;n.prototype[l]=function(d,p){return!!this[s](d,p)};const h="every"+a;n.prototype[h]=function(d,p){return!this[s](d,(v,m)=>!p(v,m))}}function cv(n,e){const{name:t,type:r,direction:o}=e,a=t.slice(0,-1)+"Entries";n.prototype[a]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return dt.empty();s=""+s;const l=this._nodes.get(s);if(typeof l>"u")throw new ae(`Graph.${a}: could not find the "${s}" node in the graph.`);return ov(r==="mixed"?this.type:r,o,l)}}function lv(n){nv.forEach(e=>{av(n,e),sv(n,e),uv(n,e),cv(n,e)})}function xn(n,e,t,r,o){const a=r._nodes.values(),s=r.type;let l,h,d,p,y,v;for(;l=a.next(),l.done!==!0;){let m=!1;if(h=l.value,s!=="undirected"){p=h.out;for(d in p){y=p[d];do v=y.target,m=!0,o(h.key,v.key,h.attributes,v.attributes,y.key,y.attributes,y.undirected),y=y.next;while(y)}}if(s!=="directed"){p=h.undirected;for(d in p)if(!(e&&h.key>d)){y=p[d];do v=y.target,v.key!==d&&(v=y.source),m=!0,o(h.key,v.key,h.attributes,v.attributes,y.key,y.attributes,y.undirected),y=y.next;while(y)}}t&&!m&&o(h.key,null,h.attributes,null,null,null,null)}}function dv(n,e){const t={key:n};return vl(e.attributes)||(t.attributes=$e({},e.attributes)),t}function hv(n,e,t){const r={key:e,source:t.source.key,target:t.target.key};return vl(t.attributes)||(r.attributes=$e({},t.attributes)),n==="mixed"&&t.undirected&&(r.undirected=!0),r}function fv(n){if(!Pe(n))throw new le('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in n))throw new le("Graph.import: serialized node is missing its key.");if("attributes"in n&&(!Pe(n.attributes)||n.attributes===null))throw new le("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function pv(n){if(!Pe(n))throw new le('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in n))throw new le("Graph.import: serialized edge is missing its source.");if(!("target"in n))throw new le("Graph.import: serialized edge is missing its target.");if("attributes"in n&&(!Pe(n.attributes)||n.attributes===null))throw new le("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in n&&typeof n.undirected!="boolean")throw new le("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const gv=vy(),yv=new Set(["directed","undirected","mixed"]),Ts=new Set(["domain","_events","_eventsCount","_maxListeners"]),vv=[{name:n=>`${n}Edge`,generateKey:!0},{name:n=>`${n}DirectedEdge`,generateKey:!0,type:"directed"},{name:n=>`${n}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:n=>`${n}EdgeWithKey`},{name:n=>`${n}DirectedEdgeWithKey`,type:"directed"},{name:n=>`${n}UndirectedEdgeWithKey`,type:"undirected"}],mv={allowSelfLoops:!0,multi:!1,type:"mixed"};function bv(n,e,t){if(t&&!Pe(t))throw new le(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(e=""+e,t=t||{},n._nodes.has(e))throw new we(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new n.NodeDataClass(e,t);return n._nodes.set(e,r),n.emit("nodeAdded",{key:e,attributes:t}),r}function Ps(n,e,t){const r=new n.NodeDataClass(e,t);return n._nodes.set(e,r),n.emit("nodeAdded",{key:e,attributes:t}),r}function kl(n,e,t,r,o,a,s,l){if(!r&&n.type==="undirected")throw new we(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&n.type==="directed")throw new we(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(l&&!Pe(l))throw new le(`Graph.${e}: invalid attributes. Expecting an object but got "${l}"`);if(a=""+a,s=""+s,l=l||{},!n.allowSelfLoops&&a===s)throw new we(`Graph.${e}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const h=n._nodes.get(a),d=n._nodes.get(s);if(!h)throw new ae(`Graph.${e}: source node "${a}" not found.`);if(!d)throw new ae(`Graph.${e}: target node "${s}" not found.`);const p={key:null,undirected:r,source:a,target:s,attributes:l};if(t)o=n._edgeKeyGenerator();else if(o=""+o,n._edges.has(o))throw new we(`Graph.${e}: the "${o}" edge already exists in the graph.`);if(!n.multi&&(r?typeof h.undirected[s]<"u":typeof h.out[s]<"u"))throw new we(`Graph.${e}: an edge linking "${a}" to "${s}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const y=new Sr(r,o,h,d,l);n._edges.set(o,y);const v=a===s;return r?(h.undirectedDegree++,d.undirectedDegree++,v&&(h.undirectedLoops++,n._undirectedSelfLoopCount++)):(h.outDegree++,d.inDegree++,v&&(h.directedLoops++,n._directedSelfLoopCount++)),n.multi?y.attachMulti():y.attach(),r?n._undirectedSize++:n._directedSize++,p.key=o,n.emit("edgeAdded",p),o}function wv(n,e,t,r,o,a,s,l,h){if(!r&&n.type==="undirected")throw new we(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&n.type==="directed")throw new we(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(l){if(h){if(typeof l!="function")throw new le(`Graph.${e}: invalid updater function. Expecting a function but got "${l}"`)}else if(!Pe(l))throw new le(`Graph.${e}: invalid attributes. Expecting an object but got "${l}"`)}a=""+a,s=""+s;let d;if(h&&(d=l,l=void 0),!n.allowSelfLoops&&a===s)throw new we(`Graph.${e}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let p=n._nodes.get(a),y=n._nodes.get(s),v,m;if(!t&&(v=n._edges.get(o),v)){if((v.source.key!==a||v.target.key!==s)&&(!r||v.source.key!==s||v.target.key!==a))throw new we(`Graph.${e}: inconsistency detected when attempting to merge the "${o}" edge with "${a}" source & "${s}" target vs. ("${v.source.key}", "${v.target.key}").`);m=v}if(!m&&!n.multi&&p&&(m=r?p.undirected[s]:p.out[s]),m){const k=[m.key,!1,!1,!1];if(h?!d:!l)return k;if(h){const M=m.attributes;m.attributes=d(M),n.emit("edgeAttributesUpdated",{type:"replace",key:m.key,attributes:m.attributes})}else $e(m.attributes,l),n.emit("edgeAttributesUpdated",{type:"merge",key:m.key,attributes:m.attributes,data:l});return k}l=l||{},h&&d&&(l=d(l));const E={key:null,undirected:r,source:a,target:s,attributes:l};if(t)o=n._edgeKeyGenerator();else if(o=""+o,n._edges.has(o))throw new we(`Graph.${e}: the "${o}" edge already exists in the graph.`);let _=!1,A=!1;p||(p=Ps(n,a,{}),_=!0,a===s&&(y=p,A=!0)),y||(y=Ps(n,s,{}),A=!0),v=new Sr(r,o,p,y,l),n._edges.set(o,v);const C=a===s;return r?(p.undirectedDegree++,y.undirectedDegree++,C&&(p.undirectedLoops++,n._undirectedSelfLoopCount++)):(p.outDegree++,y.inDegree++,C&&(p.directedLoops++,n._directedSelfLoopCount++)),n.multi?v.attachMulti():v.attach(),r?n._undirectedSize++:n._directedSize++,E.key=o,n.emit("edgeAdded",E),[o,!0,_,A]}function dr(n,e){n._edges.delete(e.key);const{source:t,target:r,attributes:o}=e,a=e.undirected,s=t===r;a?(t.undirectedDegree--,r.undirectedDegree--,s&&(t.undirectedLoops--,n._undirectedSelfLoopCount--)):(t.outDegree--,r.inDegree--,s&&(t.directedLoops--,n._directedSelfLoopCount--)),n.multi?e.detachMulti():e.detach(),a?n._undirectedSize--:n._directedSize--,n.emit("edgeDropped",{key:e.key,attributes:o,source:t.key,target:r.key,undirected:a})}class Ne extends ly.EventEmitter{constructor(e){if(super(),e=$e({},mv,e),typeof e.multi!="boolean")throw new le(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!yv.has(e.type))throw new le(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new le(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const t=e.type==="mixed"?bl:e.type==="directed"?wl:El;at(this,"NodeDataClass",t);const r="geid_"+gv()+"_";let o=0;const a=()=>{let s;do s=r+o++;while(this._edges.has(s));return s};at(this,"_attributes",{}),at(this,"_nodes",new Map),at(this,"_edges",new Map),at(this,"_directedSize",0),at(this,"_undirectedSize",0),at(this,"_directedSelfLoopCount",0),at(this,"_undirectedSelfLoopCount",0),at(this,"_edgeKeyGenerator",a),at(this,"_options",e),Ts.forEach(s=>at(this,s,this[s])),pt(this,"order",()=>this._nodes.size),pt(this,"size",()=>this._edges.size),pt(this,"directedSize",()=>this._directedSize),pt(this,"undirectedSize",()=>this._undirectedSize),pt(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),pt(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),pt(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),pt(this,"multi",this._options.multi),pt(this,"type",this._options.type),pt(this,"allowSelfLoops",this._options.allowSelfLoops),pt(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,o=this._edges.get(r);return!!o&&!o.undirected}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(t):!1}throw new le(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,o=this._edges.get(r);return!!o&&o.undirected}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(t):!1}throw new le(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(t)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(t):!1}throw new le(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if(this.type==="undirected")return;if(e=""+e,t=""+t,this.multi)throw new we("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new ae(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new ae(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const o=r.out&&r.out[t]||void 0;if(o)return o.key}undirectedEdge(e,t){if(this.type==="directed")return;if(e=""+e,t=""+t,this.multi)throw new we("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new ae(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new ae(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const o=r.undirected&&r.undirected[t]||void 0;if(o)return o.key}edge(e,t){if(this.multi)throw new we("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ae(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new ae(`Graph.edge: could not find the "${t}" target node in the graph.`);const o=r.out&&r.out[t]||r.undirected&&r.undirected[t]||void 0;if(o)return o.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ae(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.in||t in r.out}areOutNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ae(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.out}areInNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ae(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ae(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:t in r.undirected}areNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ae(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(t in r.in||t in r.out)||this.type!=="directed"&&t in r.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ae(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in r.in||this.type!=="directed"&&t in r.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new ae(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in r.out||this.type!=="directed"&&t in r.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.inDegree),r}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.outDegree),r}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.inDegree+t.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,o=0;return this.type!=="directed"&&(r+=t.undirectedDegree,o+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.inDegree,o+=t.directedLoops),r-o}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,o=0;return this.type!=="directed"&&(r+=t.undirectedDegree,o+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.outDegree,o+=t.directedLoops),r-o}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,o=0;return this.type!=="directed"&&(r+=t.undirectedDegree,o+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.inDegree+t.outDegree,o+=t.directedLoops*2),r-o}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ae(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ae(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ae(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const r=this._edges.get(t);if(!r)throw new ae(`Graph.opposite: could not find the "${t}" edge in the graph.`);const o=r.source.key,a=r.target.key;if(e===o)return a;if(e===a)return o;throw new ae(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${o}, ${a}).`)}hasExtremity(e,t){e=""+e,t=""+t;const r=this._edges.get(e);if(!r)throw new ae(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===t||r.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ae(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ae(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new ae(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return bv(this,e,t).key}mergeNode(e,t){if(t&&!Pe(t))throw new le(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let r=this._nodes.get(e);return r?(t&&($e(r.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:t})),[e,!1]):(r=new this.NodeDataClass(e,t),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&typeof t!="function")throw new le(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let r=this._nodes.get(e);if(r){if(t){const a=r.attributes;r.attributes=t(a),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const o=t?t({}):{};return r=new this.NodeDataClass(e,o),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:o}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new ae(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const o in t.out){r=t.out[o];do dr(this,r),r=r.next;while(r)}for(const o in t.in){r=t.in[o];do dr(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const o in t.undirected){r=t.undirected[o];do dr(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const r=""+arguments[0],o=""+arguments[1];if(t=lt(this,r,o,this.type),!t)throw new ae(`Graph.dropEdge: could not find the "${r}" -> "${o}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new ae(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return dr(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new we("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new we("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,t=""+t;const r=lt(this,e,t,"directed");if(!r)throw new ae(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return dr(this,r),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new we("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new we("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=lt(this,e,t,"undirected");if(!r)throw new ae(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return dr(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if(typeof t!="function")throw new le("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=t(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Pe(e))throw new le("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Pe(e))throw new le("Graph.mergeAttributes: provided attributes are not a plain object.");return $e(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new le("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if(typeof e!="function")throw new le("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!$s(t))throw new le("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let o,a;for(;o=r.next(),o.done!==!0;)a=o.value,a.attributes=e(a.key,a.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if(typeof e!="function")throw new le("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!$s(t))throw new le("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let o,a,s,l;for(;o=r.next(),o.done!==!0;)a=o.value,s=a.source,l=a.target,a.attributes=e(a.key,a.attributes,s.key,l.key,s.attributes,l.attributes,a.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new le("Graph.forEachAdjacencyEntry: expecting a callback.");xn(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new le("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");xn(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new le("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");xn(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new le("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");xn(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):yl(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new le("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let r,o;for(;r=t.next(),r.done!==!0;)o=r.value,e(o.key,o.attributes)}findNode(e){if(typeof e!="function")throw new le("Graph.findNode: expecting a callback.");const t=this._nodes.values();let r,o;for(;r=t.next(),r.done!==!0;)if(o=r.value,e(o.key,o.attributes))return o.key}mapNodes(e){if(typeof e!="function")throw new le("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let r,o;const a=new Array(this.order);let s=0;for(;r=t.next(),r.done!==!0;)o=r.value,a[s++]=e(o.key,o.attributes);return a}someNode(e){if(typeof e!="function")throw new le("Graph.someNode: expecting a callback.");const t=this._nodes.values();let r,o;for(;r=t.next(),r.done!==!0;)if(o=r.value,e(o.key,o.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new le("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let r,o;for(;r=t.next(),r.done!==!0;)if(o=r.value,!e(o.key,o.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new le("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let r,o;const a=[];for(;r=t.next(),r.done!==!0;)o=r.value,e(o.key,o.attributes)&&a.push(o.key);return a}reduceNodes(e,t){if(typeof e!="function")throw new le("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new le("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=t;const o=this._nodes.values();let a,s;for(;a=o.next(),a.done!==!0;)s=a.value,r=e(r,s.key,s.attributes);return r}nodeEntries(){const e=this._nodes.values();return new dt(()=>{const t=e.next();if(t.done)return t;const r=t.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach((o,a)=>{e[t++]=dv(a,o)});const r=new Array(this._edges.size);return t=0,this._edges.forEach((o,a)=>{r[t++]=hv(this.type,a,o)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,t=!1){if(e instanceof Ne)return e.forEachNode((h,d)=>{t?this.mergeNode(h,d):this.addNode(h,d)}),e.forEachEdge((h,d,p,y,v,m,E)=>{t?E?this.mergeUndirectedEdgeWithKey(h,p,y,d):this.mergeDirectedEdgeWithKey(h,p,y,d):E?this.addUndirectedEdgeWithKey(h,p,y,d):this.addDirectedEdgeWithKey(h,p,y,d)}),this;if(!Pe(e))throw new le("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Pe(e.attributes))throw new le("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,o,a,s,l;if(e.nodes){if(a=e.nodes,!Array.isArray(a))throw new le("Graph.import: invalid nodes. Expecting an array.");for(r=0,o=a.length;r<o;r++){s=a[r],fv(s);const{key:h,attributes:d}=s;t?this.mergeNode(h,d):this.addNode(h,d)}}if(e.edges){let h=!1;if(this.type==="undirected"&&(h=!0),a=e.edges,!Array.isArray(a))throw new le("Graph.import: invalid edges. Expecting an array.");for(r=0,o=a.length;r<o;r++){l=a[r],pv(l);const{source:d,target:p,attributes:y,undirected:v=h}=l;let m;"key"in l?(m=t?v?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:v?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,m.call(this,l.key,d,p,y)):(m=t?v?this.mergeUndirectedEdge:this.mergeDirectedEdge:v?this.addUndirectedEdge:this.addDirectedEdge,m.call(this,d,p,y))}}return this}nullCopy(e){const t=new Ne($e({},this._options,e));return t.replaceAttributes($e({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach((r,o)=>{const a=$e({},r.attributes);r=new t.NodeDataClass(o,a),t._nodes.set(o,r)}),t}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new we(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new we("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new we("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),r=this._edges.values();let o,a;for(;o=r.next(),o.done!==!0;)a=o.value,kl(t,"copy",!1,a.undirected,a.key,a.source.key,a.target.key,$e({},a.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((a,s)=>{e[s]=a.attributes});const t={},r={};this._edges.forEach((a,s)=>{const l=a.undirected?"--":"->";let h="",d=a.source.key,p=a.target.key,y;a.undirected&&d>p&&(y=d,d=p,p=y);const v=`(${d})${l}(${p})`;s.startsWith("geid_")?this.multi&&(typeof r[v]>"u"?r[v]=0:r[v]++,h+=`${r[v]}. `):h+=`[${s}]: `,h+=v,t[h]=a.attributes});const o={};for(const a in this)this.hasOwnProperty(a)&&!Ts.has(a)&&typeof this[a]!="function"&&typeof a!="symbol"&&(o[a]=this[a]);return o.attributes=this._attributes,o.nodes=e,o.edges=t,at(o,"constructor",this.constructor),o}}typeof Symbol<"u"&&(Ne.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ne.prototype.inspect);vv.forEach(n=>{["add","merge","update"].forEach(e=>{const t=n.name(e),r=e==="add"?kl:wv;n.generateKey?Ne.prototype[t]=function(o,a,s){return r(this,t,!0,(n.type||this.type)==="undirected",null,o,a,s,e==="update")}:Ne.prototype[t]=function(o,a,s,l){return r(this,t,!1,(n.type||this.type)==="undirected",o,a,s,l,e==="update")}})});Ny(Ne);qy(Ne);rv(Ne);lv(Ne);let Cl=class extends Ne{constructor(e){const t=$e({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new le("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new le('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}},Dl=class extends Ne{constructor(e){const t=$e({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new le("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new le('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}};class Nl extends Ne{constructor(e){const t=$e({multi:!0},e);if("multi"in t&&t.multi!==!0)throw new le("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class Il extends Ne{constructor(e){const t=$e({type:"directed",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new le("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new le('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Ml extends Ne{constructor(e){const t=$e({type:"undirected",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new le("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new le('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function Ar(n){n.from=function(e,t){const r=$e({},e.options,t),o=new n(r);return o.import(e),o}}Ar(Ne);Ar(Cl);Ar(Dl);Ar(Nl);Ar(Il);Ar(Ml);Ne.Graph=Ne;Ne.DirectedGraph=Cl;Ne.UndirectedGraph=Dl;Ne.MultiGraph=Nl;Ne.MultiDirectedGraph=Il;Ne.MultiUndirectedGraph=Ml;Ne.InvalidArgumentsGraphError=le;Ne.NotFoundGraphError=ae;Ne.UsageGraphError=we;var gt={},xi,Os;function Ae(){return Os||(Os=1,xi=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),xi}var _i={},Gs;function va(){return Gs||(Gs=1,_i.copyNode=function(n,e,t){return t=Object.assign({},t),n.addNode(e,t)}),_i}var hr={},Rs;function qt(){return Rs||(Rs=1,hr.addEdge=function(e,t,r,o,a,s){return t?r==null?e.addUndirectedEdge(o,a,s):e.addUndirectedEdgeWithKey(r,o,a,s):r==null?e.addDirectedEdge(o,a,s):e.addDirectedEdgeWithKey(r,o,a,s)},hr.copyEdge=function(e,t,r,o,a,s){return s=Object.assign({},s),t?r==null?e.addUndirectedEdge(o,a,s):e.addUndirectedEdgeWithKey(r,o,a,s):r==null?e.addDirectedEdge(o,a,s):e.addDirectedEdgeWithKey(r,o,a,s)},hr.mergeEdge=function(e,t,r,o,a,s){return t?r==null?e.mergeUndirectedEdge(o,a,s):e.mergeUndirectedEdgeWithKey(r,o,a,s):r==null?e.mergeDirectedEdge(o,a,s):e.mergeDirectedEdgeWithKey(r,o,a,s)},hr.updateEdge=function(e,t,r,o,a,s){return t?r==null?e.updateUndirectedEdge(o,a,s):e.updateUndirectedEdgeWithKey(r,o,a,s):r==null?e.updateDirectedEdge(o,a,s):e.updateDirectedEdgeWithKey(r,o,a,s)}),hr}var Si,qs;function Ev(){if(qs)return Si;qs=1;var n=Ae(),e=va().copyNode,t=qt().copyEdge;return Si=function(o,a){if(!n(o)||!n(a))throw new Error("graphology-operators/disjoint-union: invalid graph.");if(o.multi!==a.multi)throw new Error("graphology-operators/disjoint-union: both graph should be simple or multi.");var s=o.nullCopy();s.mergeAttributes(o.getAttributes());var l={},h={},d=0;return o.forEachNode(function(p,y){l[p]=d,e(s,d,y),d++}),a.forEachNode(function(p,y){h[p]=d,e(s,d,y),d++}),d=0,o.forEachEdge(function(p,y,v,m,E,_,A){t(s,A,d++,l[v],l[m],m,y)}),a.forEachEdge(function(p,y,v,m,E,_,A){t(s,A,d++,h[v],h[m],m,y)}),s},Si}var Ai,Fs;function xv(){if(Fs)return Ai;Fs=1;var n=Ae(),e=qt().copyEdge;return Ai=function(r){if(!n(r))throw new Error("graphology-operators/reverse: invalid graph.");var o=r.emptyCopy();return r.forEachEdge(function(a,s,l,h,d,p,y){y?e(o,!0,a,l,h,s):e(o,!1,a,h,l,s)}),o},Ai}var ki,js;function Ll(){if(js)return ki;js=1;var n=Ae(),e=va().copyNode,t=qt().copyEdge;return ki=function(o,a){if(!n(o))throw new Error("graphology-operators/subgraph: invalid graph instance.");var s=o.nullCopy(),l=a;if(Array.isArray(a)){if(a.length===0)return s;a=new Set(a)}if(a instanceof Set){if(a.size===0)return s;l=function(d){return a.has(d)};var h=a;a=new Set,h.forEach(function(d){a.add(""+d)})}if(typeof l!="function")throw new Error("graphology-operators/subgraph: invalid nodes. Expecting an array or a set or a filtering function.");if(typeof a=="function"){if(o.forEachNode(function(d,p){l(d,p)&&e(s,d,p)}),s.order===0)return s}else a.forEach(function(d){if(!o.hasNode(d))throw new Error('graphology-operators/subgraph: the "'+d+'" node was not found in the graph.');e(s,d,o.getNodeAttributes(d))});return o.forEachEdge(function(d,p,y,v,m,E,_){l(y,m)&&(v!==y&&!l(v,E)||t(s,_,d,y,v,p))}),s},ki}var Ci,Bs;function _v(){if(Bs)return Ci;Bs=1;var n=Ae(),e=qt().copyEdge;return Ci=function(r,o){if(!n(r))throw new Error("graphology-operators/to-directed: expecting a valid graphology instance.");typeof o=="function"&&(o={mergeEdge:o}),o=o||{};var a=typeof o.mergeEdge=="function"?o.mergeEdge:null;if(r.type==="directed")return r.copy();var s=r.emptyCopy({type:"directed"});return r.forEachDirectedEdge(function(l,h,d,p){e(s,!1,l,d,p,h)}),r.forEachUndirectedEdge(function(l,h,d,p){var y=!r.multi&&r.type==="mixed"&&s.edge(d,p),v=!r.multi&&r.type==="mixed"&&s.edge(p,d);y?s.replaceEdgeAttributes(y,a(s.getEdgeAttributes(y),h)):e(s,!1,null,d,p,h),d!==p&&(v?s.replaceEdgeAttributes(v,a(s.getEdgeAttributes(v),h)):e(s,!1,null,p,d,h))}),s},Ci}var Di,Us;function Sv(){if(Us)return Di;Us=1;var n=Ae();return Di=function(t){if(!n(t))throw new Error("graphology-operators/to-mixed: expecting a valid graphology instance.");return t.copy({type:"mixed"})},Di}var Ni,Hs;function Av(){if(Hs)return Ni;Hs=1;var n=Ae();return Ni=function(t){if(!n(t))throw new Error("graphology-operators/to-multi: expecting a valid graphology instance.");return t.copy({multi:!0})},Ni}var Ii,Ws;function kv(){if(Ws)return Ii;Ws=1;var n=Ae(),e=qt().copyEdge;return Ii=function(r,o){if(!n(r))throw new Error("graphology-operators/to-simple: expecting a valid graphology instance.");typeof o=="function"&&(o={mergeEdge:o}),o=o||{};var a=typeof o.mergeEdge=="function"?o.mergeEdge:null;if(!r.multi)return r.copy();var s=r.emptyCopy({multi:!1});return r.forEachEdge(function(l,h,d,p,y,v,m){var E=m?s.undirectedEdge(d,p):s.directedEdge(d,p);if(E){a&&s.replaceEdgeAttributes(E,a(s.getEdgeAttributes(E),h));return}e(s,m,l,d,p,h)}),s},Ii}var Mi,Ks;function Cv(){if(Ks)return Mi;Ks=1;var n=Ae(),e=qt().copyEdge;return Mi=function(r,o){if(!n(r))throw new Error("graphology-operators/to-undirected: expecting a valid graphology instance.");typeof o=="function"&&(o={mergeEdge:o}),o=o||{};var a=typeof o.mergeEdge=="function"?o.mergeEdge:null;if(r.type==="undirected")return r.copy();var s=r.emptyCopy({type:"undirected"});return r.forEachUndirectedEdge(function(l,h,d,p){e(s,!0,l,d,p,h)}),r.forEachDirectedEdge(function(l,h,d,p){if(!r.multi){var y=s.edge(d,p);if(y){a&&s.replaceEdgeAttributes(y,a(s.getEdgeAttributes(y),h));return}}e(s,!0,null,d,p,h)}),s},Mi}var Li,Xs;function Dv(){if(Xs)return Li;Xs=1;var n=Ae();return Li=function(t,r){if(!n(t)||!n(r))throw new Error("graphology-operators/union: invalid graph.");if(t.multi!==r.multi)throw new Error("graphology-operators/union: both graph should be simple or multi.");var o=t.copy();return o.import(r,!0),o},Li}var Ys;function Nv(){return Ys||(Ys=1,gt.disjointUnion=Ev(),gt.reverse=xv(),gt.subgraph=Ll(),gt.toDirected=_v(),gt.toMixed=Sv(),gt.toMulti=Av(),gt.toSimple=kv(),gt.toUndirected=Cv(),gt.union=Dv()),gt}var kt=Nv();function Iv(n){n.prototype.updateSelectedNodesName=function(e){this.updateSelectedNodesAttributes({label:e})},n.prototype.updateSelectedNodesInfo=function(e){this.updateSelectedNodesAttributes({desc:e})},n.prototype.setDefaultNodeWeight=function(e=1){this.updateEachNodeAttributes((t,r)=>({...r,weight:e}))},n.prototype.getNodesForD3=function(){return this.nodes().map(e=>({...this.getNodeAttributes(e),id:Number(e)}))},n.prototype.selectNode=function(e){this.setNodeAttribute(e,"selected",!0)},n.prototype.deselectNode=function(e){this.setNodeAttribute(e,"selected",!1)},n.prototype.toggleNodeSelection=function(e){if((this.getNodeAttribute(e,"selected")||0)>0)this.setNodeAttribute(e,"selected",0);else{let r=0;this.forEachNode((o,a)=>{a.selected>r&&(r=a.selected)}),this.setNodeAttribute(e,"selected",r+1)}},n.prototype.getSelectedNodes=function(){return this.filterNodes((e,t)=>t.selected>0).sort((e,t)=>this.getNodeAttribute(e,"selected")-this.getNodeAttribute(t,"selected"))},n.prototype.updateSelectedNodesColor=function(e,t,r){!e||!t||!r?e?this.updateSelectedNodesAttributes({color:e}):t?this.updateSelectedNodesAttributes({stroke:t}):r&&this.updateSelectedNodesAttributes({labelColor:r}):this.updateSelectedNodesAttributes({color:e,stroke:t,labelColor:r})},n.prototype.updateSelectedNodesAttributes=function(e){this.getSelectedNodes().forEach(t=>{this.mergeNodeAttributes(t,e)})},n.prototype.connectSelectedNodes=function(e,t="directed"){const r=this.getSelectedNodes();if(!(r.length<1)){if(r.length>1)for(let o=0;o<r.length;o++)for(let a=o+1;a<r.length;a++){const s=r[o],l=r[a],h={color:e,selected:!1};t==="undirected"?this.mergeUndirectedEdge(s,l,h):this.mergeDirectedEdge(s,l,h)}else if(this.allowSelfLoops){const o=r[0],a={color:e,selected:!1};t==="undirected"?this.mergeUndirectedEdge(o,o,a):this.mergeDirectedEdge(o,o,a)}}},n.prototype.connectSelectedNodesInOrder=function(e,t="directed"){const r=this.getSelectedNodes();for(let o=0;o<r.length-1;o++){const a=r[o],s=r[o+1],l={color:e,selected:!1};t==="undirected"?this.mergeUndirectedEdge(a,s,l):this.mergeDirectedEdge(a,s,l)}}}function Mv(n){n.prototype.setDefaultEdgeWeight=function(e=1){this.updateEachEdgeAttributes((t,r)=>({...r,weight:e}))},n.prototype.getEdgeSourceTarget=function(e){return[this.source(e),this.target(e)]},n.prototype.updateSelectedEdgesName=function(e){this.updateSelectedEdgesAttributes({label:e})},n.prototype.updateSelectedEdgesInfo=function(e){this.updateSelectedEdgesAttributes({desc:e})},n.prototype.getEdgesForD3=function(){return this.edges().map(e=>{const{source:t,target:r,...o}=this.getEdgeAttributes(e);return{source:Number(t),target:Number(r),...o}})},n.prototype.selectEdge=function(e){this.setEdgeAttribute(e,"selected",!0)},n.prototype.deselectEdge=function(e){this.setEdgeAttribute(e,"selected",!1)},n.prototype.toggleEdgeSelection=function(e){if((this.getEdgeAttribute(e,"selected")||0)>0)this.setEdgeAttribute(e,"selected",0);else{let r=0;this.forEachEdge((o,a)=>{a.selected>r&&(r=a.selected)}),this.setEdgeAttribute(e,"selected",r+1)}},n.prototype.getSelectedEdges=function(){return this.filterEdges((e,t)=>t.selected>0).sort((e,t)=>this.getEdgeAttribute(e,"selected")-this.getEdgeAttribute(t,"selected"))},n.prototype.updateSelectedEdgesAttributes=function(e){this.getSelectedEdges().forEach(t=>{this.mergeEdgeAttributes(t,e)})},n.prototype.updateSelectedEdgesColor=function(e,t){const r={...e&&{color:e},...t&&{labelColor:t}};this.updateSelectedEdgesAttributes(r)},n.prototype.updateSelectedEdgesName=function(e){this.updateSelectedEdgesAttributes({label:e})},n.prototype.updateSelectedEdgesInfo=function(e){this.updateSelectedEdgesAttributes({desc:e})}}function Lv(n){n.prototype.addFace=function(e,t){console.log("jk");const r=e.join("_");t={...t,key:r,id:this._faces.size,nodes:e};var o=new zv(r,e,t);this._faces.set(r,o)},n.prototype.faces=function(){return Array.from(this._faces.keys())},n.prototype.findFace=function(e){return e.sort(),e.join("_")},n.prototype.dropFace=function(e){this._faces.has(e)&&this._faces.delete(e)},n.prototype.hasFace=function(e){return this._faces.has(e)},n.prototype.faceNodeNeighbors=function(e){const t=[];return this.forEachFace((r,o)=>{o.nodes.includes(e)&&t.push(r)}),t},n.prototype.faceEdgeNeighbors=function(e){const{source:t,target:r}=this.getEdgeAttributes(e),o=[];return this.forEachFace((a,s)=>{s.nodes.includes(""+t)&&s.nodes.includes(""+r)&&o.push(a)}),o},n.prototype.forEachFace=function(e){for(const t of this._faces.values())e(t.key,t.attributes)},n.prototype.setFaceAttribute=function(e,t,r){this._faces.get(e).attributes[t]=r},n.prototype.getFaceAttribute=function(e,t){return this._faces.get(e).attributes[t]},n.prototype.getFaceAttributes=function(e){return this._faces.get(e).attributes},n.prototype.selectFace=function(e){this.setFaceAttribute(e,"selected",!0)},n.prototype.deselectFace=function(e){this.setFaceAttribute(e,"selected",!1)},n.prototype.toggleFaceSelection=function(e){if((this.getFaceAttribute(e,"selected")||0)>0)this.setFaceAttribute(e,"selected",0);else{let r=0;this.forEachFace((o,a)=>{a.selected>r&&(r=a.selected)}),this.setFaceAttribute(e,"selected",r+1)}},n.prototype.getSelectedFaces=function(){return this.faces().filter(e=>this.getFaceAttributes(e).selected>0).sort((e,t)=>this.getFaceAttribute(e,"selected")-this.getFaceAttribute(t,"selected"))},n.prototype.updateSelectedFacesAttributes=function(e){this.getSelectedFaces().forEach(t=>{const r=this.getFaceAttributes(t);this._faces.get(t).attributes={...r,...e}})},n.prototype.updateSelectedFacesColor=function(e,t){const r={...e&&{color:e},...t&&{labelColor:t}};this.updateSelectedFacesAttributes(r)},n.prototype.updateSelectedFacesName=function(e){this.updateSelectedFacesAttributes({label:e})},n.prototype.updateSelectedFacesInfo=function(e){this.updateSelectedFacesAttributes({desc:e})},n.prototype.updateSelectedFacesWeight=function(e){this.updateSelectedFacesAttributes({weight:e})},n.prototype.deleteSelectedFaces=function(){this.getSelectedFaces().forEach(e=>this.dropFace(e))}}class zv{constructor(e,t,r){this.key=e,this.attributes=r,this.nodes=t}}class Xt extends Ne{constructor(e){super(e),this.isCustom=!0,this.on("nodeAdded",({key:t})=>{const r=this.getNodeAttributes(t);r.id||this.setNodeAttribute(t,"id",Number(t)),r.label===void 0&&this.setNodeAttribute(t,"label",void 0),r.weight===void 0&&this.setNodeAttribute(t,"weight",void 0),r.color===void 0&&this.setNodeAttribute(t,"color",void 0),r.labelColor===void 0&&this.setNodeAttribute(t,"labelColor",void 0),r.selected===void 0&&this.setNodeAttribute(t,"selected",!1),r.size===void 0&&this.setNodeAttribute(t,"size",.25),r.magnitude===void 0&&this.setNodeAttribute(t,"magnitude",1),r.desc===void 0&&this.setNodeAttribute(t,"desc",{})}),this.on("edgeAdded",({key:t,source:r,target:o})=>{const a=this.getEdgeAttributes(t);a.id||this.setEdgeAttribute(t,"id",this.size-1),a.label===void 0&&this.setEdgeAttribute(t,"label",void 0),a.weight===void 0&&this.setEdgeAttribute(t,"weight",void 0),a.color===void 0&&this.setEdgeAttribute(t,"color",void 0),a.labelColor===void 0&&this.setEdgeAttribute(t,"labelColor",void 0),a.source||this.setEdgeAttribute(t,"source",Number(r)),a.target||this.setEdgeAttribute(t,"target",Number(o)),a.selected===void 0&&this.setEdgeAttribute(t,"selected",!1),a.desc===void 0&&this.setEdgeAttribute(t,"desc",{})}),this._faces=new Map}nullCopy(e){var t=new Xt(jn({},this._options,e));return t.replaceAttributes(jn({},this.getAttributes())),t}deselectAll(){this.updateEachNodeAttributes((e,t)=>({...t,selected:0})),this.updateEachEdgeAttributes((e,t)=>({...t,selected:!1}))}deleteSelected(){this.getSelectedEdges().forEach(e=>this.dropEdge(e)),this.getSelectedNodes().forEach(e=>this.dropNode(e))}updateSelectedName(e){this.updateSelectedNodesAttributes({label:e}),this.updateSelectedEdgesAttributes({label:e})}updateSelectedInfo(e){this.updateSelectedNodesAttributes({desc:e}),this.updateSelectedEdgesAttributes({desc:e})}updateSelectedWeight(e){this.updateSelectedNodesAttributes({weight:e}),this.updateSelectedEdgesAttributes({weight:e})}selectPath(e){this.deselectAll(),e.forEach(t=>{this.hasNode(t)&&this.selectNode(t)});for(let t=0;t<e.length-1;t++){const r=e[t],o=e[t+1];if(this.hasEdge(r,o)){const a=this.edge(r,o);this.selectEdge(a)}}}copySubgraph(){const e=this.getSelectedNodes();return e.length===0?null:kt.subgraph(this,e)}cutSubgraph(){const e=this.copySubgraph();return e&&this.deleteSelected(),e}pasteSubgraph(e,t=!1,r={x:0,y:0}){if(!e)return;e.forEachNode((a,s)=>{const l={...s};"x"in l&&(l.x+=r.x),"y"in l&&(l.y+=r.y),e.replaceNodeAttributes(a,l)}),this.deselectAll();let o;return t?o=kt.union(this,e):o=kt.disjointUnion(this,e),this.clear(),this.import(o.export()),e}replace(e){this.clear(),this.import(e.export())}dropNode(e){const t=this.faceNodeNeighbors(e);t.length&&t.map(r=>{this.dropFace(r)}),super.dropNode(e)}dropEdge(e){const t=this.faceEdgeNeighbors(e);t.length&&t.map(r=>{this.dropFace(r)}),super.dropEdge(e)}export(){const e=super.export();var t=new Array(this._faces.size),r=0;return this._faces.forEach(function(o,a){t[r++]=Tv(a,o)}),e.faces=t,e}import(e){const t=super.import(e);for(const r of e.faces)this.addFace(r.nodes,r.attributes);return t}}function $v(){for(var n=arguments[0],e=1,t=arguments.length;e<t;e++)if(arguments[e])for(var r in arguments[e])n[r]=arguments[e][r];return n}var jn=$v;typeof Object.assign=="function"&&(jn=Object.assign);function Tv(n,e){var t={key:n,nodes:e.nodes};return Object.keys(e.attributes).length&&(t.attributes=jn({},e.attributes)),t}Iv(Xt);Mv(Xt);Lv(Xt);class Pv extends Xt{constructor(e={}){const t=Object.assign({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new InvalidArgumentsGraphError("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new InvalidArgumentsGraphError(`DirectedGraph.from: inconsistent "${t.type}" type in given options!`);super(t)}}class Ov extends Xt{constructor(e={}){const t=Object.assign({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new InvalidArgumentsGraphError("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new InvalidArgumentsGraphError(`UndirectedGraph.from: inconsistent "${t.type}" type in given options!`);super(t)}}var fr={},zi,Vs;function bt(){return Vs||(Vs=1,zi=function(e){return e!==null&&typeof e=="function"&&typeof e.prototype=="object"&&typeof e.prototype.addUndirectedEdgeWithKey=="function"&&typeof e.prototype.dropNode=="function"}),zi}var $i,Qs;function Gv(){if(Qs)return $i;Qs=1;var n=bt();return $i=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/complete: invalid Graph constructor.");var o=new t,a,s;for(a=0;a<r;a++)o.addNode(a);for(a=0;a<r;a++)for(s=a+1;s<r;s++)o.type!=="directed"&&o.addUndirectedEdge(a,s),o.type!=="undirected"&&(o.addDirectedEdge(a,s),o.addDirectedEdge(s,a));return o},$i}var Ti,Zs;function ma(){if(Zs)return Ti;Zs=1;var n=bt();return Ti=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/empty: invalid Graph constructor.");var o=new t,a;for(a=0;a<r;a++)o.addNode(a);return o},Ti}var Pi,Js;function Rv(){if(Js)return Pi;Js=1;var n=bt();return Pi=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/ladder: invalid Graph constructor.");var o=new t,a;for(a=0;a<r-1;a++)o.mergeEdge(a,a+1);for(a=r;a<r*2-1;a++)o.mergeEdge(a,a+1);for(a=0;a<r;a++)o.addEdge(a,a+r);return o},Pi}var Oi,eu;function qv(){if(eu)return Oi;eu=1;var n=bt();return Oi=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/path: invalid Graph constructor.");for(var o=new t,a=0;a<r-1;a++)o.mergeEdge(a,a+1);return o},Oi}var tu;function Fv(){return tu||(tu=1,fr.complete=Gv(),fr.empty=ma(),fr.ladder=Rv(),fr.path=qv()),fr}var Pt=Fv(),yt={},Gi,ru;function jv(){if(ru)return Gi;ru=1;function n(e){this.graph=e,this.stack=new Array(e.order),this.seen=new Set,this.size=0}return n.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},n.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},n.prototype.forEachNodeYetUnseen=function(e){var t=this.seen,r=this.graph;r.someNode(function(o,a){if(t.size===r.order)return!0;if(t.has(o))return!1;var s=e(o,a);return!!s})},n.prototype.has=function(e){return this.seen.has(e)},n.prototype.push=function(e){var t=this.seen.size;return this.seen.add(e),t===this.seen.size?!1:(this.stack[this.size++]=e,!0)},n.prototype.pushWith=function(e,t){var r=this.seen.size;return this.seen.add(e),r===this.seen.size?!1:(this.stack[this.size++]=t,!0)},n.prototype.pop=function(){if(this.size!==0)return this.stack[--this.size]},Gi=n,Gi}var nu;function Bv(){if(nu)return yt;nu=1;var n=Ae(),e=va().copyNode,t=qt().copyEdge,r=jv();function o(m,E){if(!n(m))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(m.order){var _=new r(m),A=_.push.bind(_);_.forEachNodeYetUnseen(function(C){var k=[];_.push(C);for(var M;_.size!==0;)M=_.pop(),k.push(M),m.forEachNeighbor(M,A);E(k)})}}function a(m,E){if(!n(m))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(m.order){var _=new r(m),A=_.push.bind(_);_.forEachNodeYetUnseen(function(C){var k=0;_.push(C);for(var M;_.size!==0;)M=_.pop(),k++,m.forEachNeighbor(M,A);E(k)})}}function s(m,E,_){if(!n(m))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!m.order)return;var A=new r(m),C;function k(M,x,N,O,w,L,z){C===O&&(O=N),E(M,x,N,O,w,L,z)&&A.push(O)}A.forEachNodeYetUnseen(function(M){var x=0;for(A.push(M);A.size!==0;)C=A.pop(),x++,m.forEachEdge(C,k);_(x)})}function l(m){var E=0;return a(m,function(){E++}),E}function h(m){var E=[];return o(m,function(_){E.push(_)}),E}function d(m){if(!n(m))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!m.order)return[];var E=new r(m),_=E.push.bind(E),A=[],C;return E.forEachNodeYetUnseen(function(k){C=[],E.push(k);for(var M;E.size!==0;)M=E.pop(),C.push(M),m.forEachNeighbor(M,_);return C.length>A.length&&(A=C),A.length>E.countUnseenNodes()}),A}function p(m){var E=d(m),_=m.nullCopy();return E.forEach(function(A){e(_,A,m.getNodeAttributes(A))}),m.forEachEdge(function(A,C,k,M,x,N,O){_.hasNode(k)&&t(_,O,A,k,M,C)}),_}function y(m){var E=new Set(d(m));m.forEachNode(function(_){E.has(_)||m.dropNode(_)})}function v(m){if(!n(m))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!m.order)return[];if(m.type==="undirected")throw new Error("graphology-components: the given graph is undirected");var E=m.nodes(),_=[],A,C;if(!m.size){for(A=0,C=E.length;A<C;A++)_.push([E[A]]);return _}var k=1,M=[],x=[],N=new Map,O=new Set,w,L,z,T=function(q){var j,P=m.outboundNeighbors(q),ee;N.set(q,k++),M.push(q),x.push(q);for(var J=0,F=P.length;J<F;J++)if(j=P[J],N.has(j)){if(ee=N.get(j),!O.has(j))for(;N.get(M[M.length-1])>ee;)M.pop()}else T(j);if(N.get(M[M.length-1])===N.get(q)){w=[];do L=x.pop(),w.push(L),O.add(L);while(L!==q);_.push(w),M.pop()}};for(A=0,C=E.length;A<C;A++)z=E[A],O.has(z)||T(z);return _}return yt.forEachConnectedComponent=o,yt.forEachConnectedComponentOrder=a,yt.forEachConnectedComponentOrderWithEdgeFilter=s,yt.countConnectedComponents=l,yt.connectedComponents=h,yt.largestConnectedComponent=d,yt.largestConnectedComponentSubgraph=p,yt.cropToLargestConnectedComponent=y,yt.stronglyConnectedComponents=v,yt}var _n=Bv(),xt={},Jt={},Ri,iu;function ba(){if(iu)return Ri;iu=1;var n=pl(),e=n.ARRAY_BUFFER_SUPPORT,t=n.SYMBOL_SUPPORT;return Ri=function(o,a){var s,l,h,d,p;if(!o)throw new Error("obliterator/forEach: invalid iterable.");if(typeof a!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(o)||e&&ArrayBuffer.isView(o)||typeof o=="string"||o.toString()==="[object Arguments]"){for(h=0,d=o.length;h<d;h++)a(o[h],h);return}if(typeof o.forEach=="function"){o.forEach(a);return}if(t&&Symbol.iterator in o&&typeof o.next!="function"&&(o=o[Symbol.iterator]()),typeof o.next=="function"){for(s=o,h=0;p=s.next(),p.done!==!0;)a(p.value,h),h++;return}for(l in o)o.hasOwnProperty(l)&&a(o[l],l)},Ri}var qi,ou;function Uv(){if(ou)return qi;ou=1;var n=ar(),e=ba();function t(){this.clear()}return t.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},t.prototype.enqueue=function(r){return this.items.push(r),++this.size},t.prototype.dequeue=function(){if(this.size){var r=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,r}},t.prototype.peek=function(){if(this.size)return this.items[this.offset]},t.prototype.forEach=function(r,o){o=arguments.length>1?o:this;for(var a=this.offset,s=0,l=this.items.length;a<l;a++,s++)r.call(o,this.items[a],s,this)},t.prototype.toArray=function(){return this.items.slice(this.offset)},t.prototype.values=function(){var r=this.items,o=this.offset;return new n(function(){if(o>=r.length)return{done:!0};var a=r[o];return o++,{value:a,done:!1}})},t.prototype.entries=function(){var r=this.items,o=this.offset,a=0;return new n(function(){if(o>=r.length)return{done:!0};var s=r[o];return o++,{value:[a++,s],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.toString=function(){return this.toArray().join(",")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(r){var o=new t;return e(r,function(a){o.enqueue(a)}),o},t.of=function(){return t.from(arguments)},qi=t,qi}var Fi,au;function Hv(){return au||(au=1,Fi=function(e,t){var r=t.length;if(r!==0){var o=e.length;e.length+=r;for(var a=0;a<r;a++)e[o+a]=t[a]}}),Fi}var su;function wa(){if(su)return Jt;su=1;var n=Ae(),e=Uv(),t=Hv();function r(d,p,y){if(!n(d))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!d.hasNode(p))throw new Error('graphology-shortest-path: the "'+p+'" source node does not exist in the given graph.');if(!d.hasNode(y))throw new Error('graphology-shortest-path: the "'+y+'" target node does not exist in the given graph.');if(p=""+p,y=""+y,p===y)return[p];var v=d.inboundNeighbors.bind(d),m=d.outboundNeighbors.bind(d),E={},_={};E[p]=null,_[y]=null;var A=[p],C=[y],k,M,x,N,O,w,L,z,T=!1;e:for(;A.length&&C.length;)if(A.length<=C.length){for(k=A,A=[],O=0,L=k.length;O<L;O++)for(M=k[O],x=m(M),w=0,z=x.length;w<z;w++)if(N=x[w],N in E||(A.push(N),E[N]=M),N in _){T=!0;break e}}else for(k=C,C=[],O=0,L=k.length;O<L;O++)for(M=k[O],x=v(M),w=0,z=x.length;w<z;w++)if(N=x[w],N in _||(C.push(N),_[N]=M),N in E){T=!0;break e}if(!T)return null;for(var q=[];N;)q.unshift(N),N=E[N];for(N=_[q[q.length-1]];N;)q.push(N),N=_[N];return q.length?q:null}function o(d,p){if(!n(d))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!d.hasNode(p))throw new Error('graphology-shortest-path: the "'+p+'" source node does not exist in the given graph.');p=""+p;var y={},v={},m,E,_,A,C,k;for(y[p]=!0,v[p]=[p];Object.keys(y).length;){m=y,y={};for(_ in m)for(E=d.outboundNeighbors(_),C=0,k=E.length;C<k;C++)A=E[C],v[A]||(v[A]=v[_].concat(A),y[A]=!0)}return v}function a(d,p,y){if(!n(p))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!p.hasNode(y))throw new Error('graphology-shortest-path: the "'+y+'" source node does not exist in the given graph.');y=""+y;var v=new Set,m={},E=0;m[y]=0;for(var _=[y],A,C,k;_.length!==0;){var M=[];for(A=0,C=_.length;A<C;A++)k=_[A],!v.has(k)&&(v.add(k),t(M,p[d](k)),m[k]=E);E++,_=M}return m}var s=a.bind(null,"outboundNeighbors"),l=a.bind(null,"neighbors");function h(d,p){p=""+p;var y=[],v={},m={},E=d.nodes(),_,A,C,k,M,x,N,O,w;for(x=0,O=E.length;x<O;x++)k=E[x],v[k]=[],m[k]=0;var L={};m[p]=1,L[p]=0;for(var z=e.of(p);z.size;)for(k=z.dequeue(),y.push(k),_=L[k],A=m[k],C=d.outboundNeighbors(k),N=0,w=C.length;N<w;N++)M=C[N],M in L||(z.enqueue(M),L[M]=_+1),L[M]===_+1&&(m[M]+=A,v[M].push(k));return[y,v,m]}return Jt.bidirectional=r,Jt.singleSource=o,Jt.singleSourceLength=s,Jt.undirectedSingleSourceLength=l,Jt.brandes=h,Jt}var ji={},uu;function Wv(){if(uu)return ji;uu=1;var n=function(){return!0};return ji.edgePathFromNodePath=function(e,t){var r=t.length,o,a,s,l;if(r<2)return a=t[0],l=e.multi?e.findEdge(a,a,n):e.edge(a,a),l?[l]:[];r--;var h=new Array(r);for(o=0;o<r;o++){if(a=t[o],s=t[o+1],l=e.multi?e.findOutboundEdge(a,s,n):e.edge(a,s),l===void 0)throw new Error("graphology-shortest-path: given path is impossible in given graph.");h[o]=l}return h},ji}var Or={},Gr={},cu;function kr(){if(cu)return Gr;cu=1;function n(r){return typeof r!="number"||isNaN(r)?1:r}function e(r,o){var a={},s=function(d){return typeof d>"u"?o:d};typeof o=="function"&&(s=o);var l=function(d){return s(d[r])},h=function(){return s(void 0)};return typeof r=="string"?(a.fromAttributes=l,a.fromGraph=function(d,p){return l(d.getNodeAttributes(p))},a.fromEntry=function(d,p){return l(p)}):typeof r=="function"?(a.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},a.fromGraph=function(d,p){return s(r(p,d.getNodeAttributes(p)))},a.fromEntry=function(d,p){return s(r(d,p))}):(a.fromAttributes=h,a.fromGraph=h,a.fromEntry=h),a}function t(r,o){var a={},s=function(d){return typeof d>"u"?o:d};typeof o=="function"&&(s=o);var l=function(d){return s(d[r])},h=function(){return s(void 0)};return typeof r=="string"?(a.fromAttributes=l,a.fromGraph=function(d,p){return l(d.getEdgeAttributes(p))},a.fromEntry=function(d,p){return l(p)},a.fromPartialEntry=a.fromEntry,a.fromMinimalEntry=a.fromEntry):typeof r=="function"?(a.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},a.fromGraph=function(d,p){var y=d.extremities(p);return s(r(p,d.getEdgeAttributes(p),y[0],y[1],d.getNodeAttributes(y[0]),d.getNodeAttributes(y[1]),d.isUndirected(p)))},a.fromEntry=function(d,p,y,v,m,E,_){return s(r(d,p,y,v,m,E,_))},a.fromPartialEntry=function(d,p,y,v){return s(r(d,p,y,v))},a.fromMinimalEntry=function(d,p){return s(r(d,p))}):(a.fromAttributes=h,a.fromGraph=h,a.fromEntry=h,a.fromMinimalEntry=h),a}return Gr.createNodeValueGetter=e,Gr.createEdgeValueGetter=t,Gr.createEdgeWeightGetter=function(r){return t(r,n)},Gr}var pr={},lu;function Ea(){if(lu)return pr;lu=1;var n=function(o,a){return o<a?-1:o>a?1:0},e=function(o,a){return o<a?1:o>a?-1:0};function t(o){return function(a,s){return o(s,a)}}function r(o){return o===2?function(a,s){return a[0]<s[0]?-1:a[0]>s[0]?1:a[1]<s[1]?-1:a[1]>s[1]?1:0}:function(a,s){for(var l=0;l<o;){if(a[l]<s[l])return-1;if(a[l]>s[l])return 1;l++}return 0}}return pr.DEFAULT_COMPARATOR=n,pr.DEFAULT_REVERSE_COMPARATOR=e,pr.reverseComparator=t,pr.createTupleComparator=r,pr}var gr={},Bi={},du;function Jr(){return du||(du=1,function(n){var e=Math.pow(2,8)-1,t=Math.pow(2,16)-1,r=Math.pow(2,32)-1,o=Math.pow(2,7)-1,a=Math.pow(2,15)-1,s=Math.pow(2,31)-1;n.getPointerArray=function(h){var d=h-1;if(d<=e)return Uint8Array;if(d<=t)return Uint16Array;if(d<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},n.getSignedPointerArray=function(h){var d=h-1;return d<=o?Int8Array:d<=a?Int16Array:d<=s?Int32Array:Float64Array},n.getNumberType=function(h){return h===(h|0)?Math.sign(h)===-1?h<=127&&h>=-128?Int8Array:h<=32767&&h>=-32768?Int16Array:Int32Array:h<=255?Uint8Array:h<=65535?Uint16Array:Uint32Array:Float64Array};var l={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};n.getMinimalRepresentation=function(h,d){var p=null,y=0,v,m,E,_,A;for(_=0,A=h.length;_<A;_++)E=d?d(h[_]):h[_],m=n.getNumberType(E),v=l[m.name],v>y&&(y=v,p=m);return p},n.isTypedArray=function(h){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(h)},n.concat=function(){var h=0,d,p,y;for(d=0,y=arguments.length;d<y;d++)h+=arguments[d].length;var v=new arguments[0].constructor(h);for(d=0,p=0;d<y;d++)v.set(arguments[d],p),p+=arguments[d].length;return v},n.indices=function(h){for(var d=n.getPointerArray(h),p=new d(h),y=0;y<h;y++)p[y]=y;return p}}(Bi)),Bi}var hu;function Xn(){if(hu)return gr;hu=1;var n=ba(),e=Jr();function t(s){return Array.isArray(s)||e.isTypedArray(s)}function r(s){if(typeof s.length=="number")return s.length;if(typeof s.size=="number")return s.size}function o(s){var l=r(s),h=typeof l=="number"?new Array(l):[],d=0;return n(s,function(p){h[d++]=p}),h}function a(s){var l=r(s),h=typeof l=="number"?e.getPointerArray(l):Array,d=typeof l=="number"?new Array(l):[],p=typeof l=="number"?new h(l):[],y=0;return n(s,function(v){d[y]=v,p[y]=y++}),[d,p]}return gr.isArrayLike=t,gr.guessLength=r,gr.toArray=o,gr.toArrayWithIndices=a,gr}var Ui,fu;function xa(){if(fu)return Ui;fu=1;var n=ba(),e=Ea(),t=Xn(),r=e.DEFAULT_COMPARATOR,o=e.reverseComparator;function a(C,k,M,x){for(var N=k[x],O,w;x>M;){if(O=x-1>>1,w=k[O],C(N,w)<0){k[x]=w,x=O;continue}break}k[x]=N}function s(C,k,M){for(var x=k.length,N=M,O=k[M],w=2*M+1,L;w<x;)L=w+1,L<x&&C(k[w],k[L])>=0&&(w=L),k[M]=k[w],M=w,w=2*M+1;k[M]=O,a(C,k,N,M)}function l(C,k,M){k.push(M),a(C,k,0,k.length-1)}function h(C,k){var M=k.pop();if(k.length!==0){var x=k[0];return k[0]=M,s(C,k,0),x}return M}function d(C,k,M){if(k.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var x=k[0];return k[0]=M,s(C,k,0),x}function p(C,k,M){var x;return k.length!==0&&C(k[0],M)<0&&(x=k[0],k[0]=M,M=x,s(C,k,0)),M}function y(C,k){for(var M=k.length,x=M>>1,N=x;--N>=0;)s(C,k,N)}function v(C,k){for(var M=k.length,x=0,N=new Array(M);x<M;)N[x++]=h(C,k);return N}function m(C,k,M){arguments.length===2&&(M=k,k=C,C=r);var x=o(C),N,O,w,L=1/0,z;if(k===1){if(t.isArrayLike(M)){for(N=0,O=M.length;N<O;N++)w=M[N],(L===1/0||C(w,L)<0)&&(L=w);return z=new M.constructor(1),z[0]=L,z}return n(M,function(q){(L===1/0||C(q,L)<0)&&(L=q)}),[L]}if(t.isArrayLike(M)){if(k>=M.length)return M.slice().sort(C);for(z=M.slice(0,k),y(x,z),N=k,O=M.length;N<O;N++)x(M[N],z[0])>0&&d(x,z,M[N]);return z.sort(C)}var T=t.guessLength(M);return T!==null&&T<k&&(k=T),z=new Array(k),N=0,n(M,function(q){N<k?z[N]=q:(N===k&&y(x,z),x(q,z[0])>0&&d(x,z,q)),N++}),z.length>N&&(z.length=N),z.sort(C)}function E(C,k,M){arguments.length===2&&(M=k,k=C,C=r);var x=o(C),N,O,w,L=-1/0,z;if(k===1){if(t.isArrayLike(M)){for(N=0,O=M.length;N<O;N++)w=M[N],(L===-1/0||C(w,L)>0)&&(L=w);return z=new M.constructor(1),z[0]=L,z}return n(M,function(q){(L===-1/0||C(q,L)>0)&&(L=q)}),[L]}if(t.isArrayLike(M)){if(k>=M.length)return M.slice().sort(x);for(z=M.slice(0,k),y(C,z),N=k,O=M.length;N<O;N++)C(M[N],z[0])>0&&d(C,z,M[N]);return z.sort(x)}var T=t.guessLength(M);return T!==null&&T<k&&(k=T),z=new Array(k),N=0,n(M,function(q){N<k?z[N]=q:(N===k&&y(C,z),C(q,z[0])>0&&d(C,z,q)),N++}),z.length>N&&(z.length=N),z.sort(x)}function _(C){if(this.clear(),this.comparator=C||r,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}_.prototype.clear=function(){this.items=[],this.size=0},_.prototype.push=function(C){return l(this.comparator,this.items,C),++this.size},_.prototype.peek=function(){return this.items[0]},_.prototype.pop=function(){return this.size!==0&&this.size--,h(this.comparator,this.items)},_.prototype.replace=function(C){return d(this.comparator,this.items,C)},_.prototype.pushpop=function(C){return p(this.comparator,this.items,C)},_.prototype.consume=function(){return this.size=0,v(this.comparator,this.items)},_.prototype.toArray=function(){return v(this.comparator,this.items.slice())},_.prototype.inspect=function(){var C=this.toArray();return Object.defineProperty(C,"constructor",{value:_,enumerable:!1}),C},typeof Symbol<"u"&&(_.prototype[Symbol.for("nodejs.util.inspect.custom")]=_.prototype.inspect);function A(C){if(this.clear(),this.comparator=C||r,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=o(this.comparator)}return A.prototype=_.prototype,_.from=function(C,k){var M=new _(k),x;return t.isArrayLike(C)?x=C.slice():x=t.toArray(C),y(M.comparator,x),M.items=x,M.size=x.length,M},A.from=function(C,k){var M=new A(k),x;return t.isArrayLike(C)?x=C.slice():x=t.toArray(C),y(M.comparator,x),M.items=x,M.size=x.length,M},_.siftUp=s,_.siftDown=a,_.push=l,_.pop=h,_.replace=d,_.pushpop=p,_.heapify=y,_.consume=v,_.nsmallest=m,_.nlargest=E,_.MinHeap=_,_.MaxHeap=A,Ui=_,Ui}var pu;function Kv(){if(pu)return Or;pu=1;var n=Ae(),e=kr().createEdgeWeightGetter,t=xa(),r="weight";function o(y,v){return y[0]>v[0]?1:y[0]<v[0]?-1:y[1]>v[1]?1:y[1]<v[1]?-1:y[2]>v[2]?1:y[2]<v[2]?-1:0}function a(y,v){return y[0]>v[0]?1:y[0]<v[0]?-1:y[1]>v[1]?1:y[1]<v[1]?-1:y[2]>v[2]?1:y[2]<v[2]?-1:y[3]>v[3]?1:y[3]<v[3]?-1:0}function s(y,v,m,E){if(v=""+v,m=""+m,!n(y))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(v&&!y.hasNode(v))throw new Error('graphology-shortest-path/dijkstra: the "'+v+'" source node does not exist in the given graph.');if(m&&!y.hasNode(m))throw new Error('graphology-shortest-path/dijkstra: the "'+m+'" target node does not exist in the given graph.');if(E=e(E||r).fromMinimalEntry,v===m)return[0,[v]];var _=[{},{}],A=[{},{}],C=[new t(o),new t(o)],k=[{},{}];A[0][v]=[v],A[1][m]=[m],k[0][v]=0,k[1][m]=0;var M=[],x=1/0,N=0,O=1,w,L,z,T,q,j,P,ee,J;for(C[0].push([0,N++,v]),C[1].push([0,N++,m]);C[0].size&&C[1].size;)if(O=1-O,w=C[O].pop(),T=w[0],q=w[2],!(q in _[O])){if(_[O][q]=T,q in _[1-O])return[x,M];for(L=O===1?y.inboundEdges(q):y.outboundEdges(q),ee=0,J=L.length;ee<J;ee++){if(P=L[ee],j=y.opposite(q,P),z=_[O][q]+E(P,y.getEdgeAttributes(P)),j in _[O]&&z<_[O][j])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(j in k[O])||z<k[O][j])&&(k[O][j]=z,C[O].push([z,N++,j]),A[O][j]=A[O][q].concat(j),j in k[0]&&j in k[1]&&(T=k[0][j]+k[1][j],(M.length===0||x>T)&&(x=T,M=A[0][j].concat(A[1][j].slice(0,-1).reverse()))))}}return[1/0,null]}function l(y,v,m,E,_,A){if(!n(y))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");m=e(m||r).fromMinimalEntry;var C={},k={},M=new t(o),x=0,N,O,w,L,z,T,q,j,P,ee,J;for(j=0,ee=v.length;j<ee;j++)L=v[j],k[L]=0,M.push([0,x++,L]),A[L]=[L];for(;M.size;)if(O=M.pop(),q=O[0],L=O[2],!(L in C)){if(C[L]=q,L===_)break;for(N=y.outboundEdges(L),P=0,J=N.length;P<J;P++){if(T=N[P],z=y.opposite(L,T),w=m(T,y.getEdgeAttributes(T))+C[L],z in C&&w<C[z])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(z in k)||w<k[z])&&(k[z]=w,M.push([w,x++,z]),A[z]=A[L].concat(z))}}return C}function h(y,v,m){var E={};return l(y,[v],m,0,null,E),E}function d(y,v,m,E){return s(y,v,m,E)[1]}function p(y,v,m){v=""+v,m=e(m||r).fromMinimalEntry;var E=[],_={},A={},C=y.nodes(),k,M,x,N,O,w,L,z,T,q;for(T=0,q=C.length;T<q;T++)w=C[T],_[w]=[],A[w]=0;var j={};A[v]=1;var P={};P[v]=0;var ee=0,J=new t(a);for(J.push([0,ee++,v,v]);J.size;)if(M=J.pop(),N=M[0],x=M[2],w=M[3],!(w in j))for(A[w]+=A[x],E.push(w),j[w]=N,k=y.outboundEdges(w),T=0,q=k.length;T<q;T++)z=k[T],L=y.opposite(w,z),O=N+m(z,y.getEdgeAttributes(z)),!(L in j)&&(!(L in P)||O<P[L])?(P[L]=O,J.push([O,ee++,w,L]),A[L]=0,_[L]=[w]):O===P[L]&&(A[L]+=A[w],_[L].push(w));return[E,_,A]}return Or.bidirectional=d,Or.singleSource=h,Or.brandes=p,Or}var gu;function Xv(){if(gu)return xt;gu=1;var n=wa(),e=Wv();return xt.unweighted=n,xt.dijkstra=Kv(),xt.bidirectional=n.bidirectional,xt.singleSource=n.singleSource,xt.singleSourceLength=n.singleSourceLength,xt.undirectedSingleSourceLength=n.undirectedSingleSourceLength,xt.brandes=n.brandes,xt.edgePathFromNodePath=e.edgePathFromNodePath,xt}var yu=Xv(),qe={},_t={},Hi,vu;function zl(){if(vu)return Hi;vu=1;var n=Ae();return Hi=function(t){if(!n(t))throw new Error("graphology-metrics/simple-size: the given graph is not a valid graphology instance.");if(!t.multi)return t.size;var r=0,o=0;function a(){r++}function s(){o++}return t.forEachNode(function(l){t.type!=="directed"&&t.forEachUndirectedNeighbor(l,a),t.type!=="undirected"&&t.forEachOutNeighbor(l,s)}),r/2+o},Hi}var mu;function $l(){if(mu)return _t;mu=1;var n=Ae(),e=zl();function t(s,l){return 2*l/(s*(s-1))}function r(s,l){return l/(s*(s-1))}function o(s,l){var h=s*(s-1);return l/(h+h/2)}function a(s,l,h){var d,p;if(arguments.length>3){if(d=h,p=arguments[3],typeof d!="number"||d<0)throw new Error("graphology-metrics/density: given order is not a valid number.");if(typeof p!="number"||p<0)throw new Error("graphology-metrics/density: given size is not a valid number.")}else{if(!n(h))throw new Error("graphology-metrics/density: given graph is not a valid graphology instance.");d=h.order,p=h.size,h.multi&&l===!1&&(p=e(h))}if(d<2)return 0;s===null&&(s=h.type),l===null&&(l=h.multi);var y;return s==="undirected"?y=t:s==="directed"?y=r:y=o,y(d,p)}return _t.abstractDensity=a,_t.density=a.bind(null,null,null),_t.directedDensity=a.bind(null,"directed",!1),_t.undirectedDensity=a.bind(null,"undirected",!1),_t.mixedDensity=a.bind(null,"mixed",!1),_t.multiDirectedDensity=a.bind(null,"directed",!0),_t.multiUndirectedDensity=a.bind(null,"undirected",!0),_t.multiMixedDensity=a.bind(null,"mixed",!0),_t}var Sn={},bu;function Yv(){if(bu)return Sn;bu=1;var n=Ae();function e(r,o){if(!n(r))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var a=[].concat(o),s,l,h,d={};for(h=0;h<a.length;h++)l=a[h],d[l]=[1/0,-1/0];return r.forEachNode(function(p,y){for(h=0;h<a.length;h++)l=a[h],s=y[l],s<d[l][0]&&(d[l][0]=s),s>d[l][1]&&(d[l][1]=s)}),typeof o=="string"?d[o]:d}function t(r,o){if(!n(r))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var a=[].concat(o),s,l,h,d={};for(h=0;h<a.length;h++)l=a[h],d[l]=[1/0,-1/0];return r.forEachEdge(function(p,y){for(h=0;h<a.length;h++)l=a[h],s=y[l],s<d[l][0]&&(d[l][0]=s),s>d[l][1]&&(d[l][1]=s)}),typeof o=="string"?d[o]:d}return Sn.nodeExtent=e,Sn.edgeExtent=t,Sn}var Wi,wu;function Tl(){if(wu)return Wi;wu=1;var n=Ae(),e=wa().singleSourceLength;return Wi=function(r,o){if(!n(r))throw new Error("graphology-metrics/eccentricity: given graph is not a valid graphology instance.");if(r.size===0)return 1/0;var a=-1/0,s=e(r,o),l,h,d=0;for(l in s)h=s[l],h>a&&(a=h),d++;return d<r.order?1/0:a},Wi}var Ki,Eu;function Vv(){if(Eu)return Ki;Eu=1;var n=Ae(),e=Tl();return Ki=function(r){if(!n(r))throw new Error("graphology-metrics/diameter: given graph is not a valid graphology instance.");if(r.size===0)return 1/0;var o=-1/0;return r.someNode(function(a){var s=e(r,a);return s>o&&(o=s),o===1/0}),o},Ki}var Xi,xu;function Nt(){if(xu)return Xi;xu=1;function n(t){return!t||typeof t!="object"||typeof t=="function"||Array.isArray(t)||t instanceof Set||t instanceof Map||t instanceof RegExp||t instanceof Date}function e(t,r){t=t||{};var o={};for(var a in r){var s=t[a],l=r[a];if(!n(l)){o[a]=e(s,l);continue}s===void 0?o[a]=l:o[a]=s}return o}return Xi=e,Xi}var Yi,_u;function _a(){if(_u)return Yi;_u=1;var n=Ae();return Yi=function(t){if(!n(t))throw new Error("graphology-utils/infer-type: expecting a valid graphology instance.");var r=t.type;return r!=="mixed"?r:t.directedSize===0&&t.undirectedSize===0||t.directedSize>0&&t.undirectedSize>0?"mixed":t.directedSize>0?"directed":"undirected"},Yi}var Vi,Su;function Qv(){if(Su)return Vi;Su=1;var n=Nt(),e=Ae(),t=_a(),r=kr(),o={getNodeCommunity:"community",getEdgeWeight:"weight",resolution:1};function a(k,M){var x=new Array(k.order),N=new Float64Array(k.order),O={},w=0,L=r.createEdgeWeightGetter(M.getEdgeWeight).fromEntry,z=r.createNodeValueGetter(M.getNodeCommunity).fromEntry,T=0,q={};return k.forEachNode(function(j,P){q[j]=T,x[T++]=z(j,P)}),k.forEachUndirectedEdge(function(j,P,ee,J,F,D,U){var H=L(j,P,ee,J,F,D,U);w+=H,O[j]=H,N[q[ee]]+=H,ee!==J&&(N[q[J]]+=H)}),{weights:O,communities:x,weightedDegrees:N,M:w}}function s(k,M){var x=new Array(k.order),N=new Float64Array(k.order),O=new Float64Array(k.order),w={},L=0,z=r.createEdgeWeightGetter(M.getEdgeWeight).fromEntry,T=r.createNodeValueGetter(M.getNodeCommunity).fromEntry,q=0,j={};return k.forEachNode(function(P,ee){j[P]=q,x[q++]=T(P,ee)}),k.forEachDirectedEdge(function(P,ee,J,F,D,U,H){var Q=z(P,ee,J,F,D,U,H);L+=Q,w[P]=Q,O[j[J]]+=Q,N[j[F]]+=Q}),{weights:w,communities:x,weightedInDegrees:N,weightedOutDegrees:O,M:L}}function l(k,M){var x=M.resolution,N=a(k,M),O=N.communities,w=N.weightedDegrees,L=N.M,z=k.nodes(),T,q,j,P,ee,J,F=0,D=L*2;for(T=0,j=k.order;T<j;T++)for(q=0;q<j;q++)O[T]===O[q]&&(J=k.undirectedEdge(z[T],z[q]),P=N.weights[J]||0,ee=w[T]*w[q],T===q&&typeof J<"u"?F+=(P-ee/D*x)*2:F+=P-ee/D*x);return F/D}function h(k,M){var x=M.resolution,N=s(k,M),O=N.communities,w=N.weightedInDegrees,L=N.weightedOutDegrees,z=N.M,T=k.nodes(),q,j,P,ee,J,F,D=0;for(q=0,P=k.order;q<P;q++)for(j=0;j<P;j++)O[q]===O[j]&&(F=k.directedEdge(T[q],T[j]),ee=N.weights[F]||0,J=w[q]*L[j],D+=ee-J/z*x);return D/z}function d(k,M){var x={},N={},O={},w=r.createNodeValueGetter(M.getNodeCommunity).fromEntry;return k.forEachNode(function(L,z){var T=w(L,z);if(x[L]=T,typeof T>"u")throw new Error('graphology-metrics/modularity: the "'+L+'" node is not in the partition.');N[T]=0,O[T]=0}),{communities:x,totalWeights:N,internalWeights:O}}function p(k,M){var x={},N={},O={},w={},L=r.createNodeValueGetter(M.getNodeCommunity).fromEntry;return k.forEachNode(function(z,T){var q=L(z,T);if(x[z]=q,typeof q>"u")throw new Error('graphology-metrics/modularity: the "'+z+'" node is not in the partition.');N[q]=0,O[q]=0,w[q]=0}),{communities:x,totalInWeights:N,totalOutWeights:O,internalWeights:w}}function y(k,M){var x=M.resolution,N=d(k,M),O=0,w=N.totalWeights,L=N.internalWeights,z=N.communities,T=r.createEdgeWeightGetter(M.getEdgeWeight).fromEntry;k.forEachUndirectedEdge(function(ee,J,F,D,U,H,Q){var W=T(ee,J,F,D,U,H,Q);O+=W;var Y=z[F],X=z[D];w[Y]+=W,w[X]+=W,Y===X&&(L[Y]+=W*2)});var q=0,j=O*2;for(var P in L)q+=L[P]/j-Math.pow(w[P]/j,2)*x;return q}function v(k,M){var x=M.resolution,N=p(k,M),O=0,w=N.totalInWeights,L=N.totalOutWeights,z=N.internalWeights,T=N.communities,q=r.createEdgeWeightGetter(M.getEdgeWeight).fromEntry;k.forEachDirectedEdge(function(ee,J,F,D,U,H,Q){var W=q(ee,J,F,D,U,H,Q);O+=W;var Y=T[F],X=T[D];L[Y]+=W,w[X]+=W,Y===X&&(z[Y]+=W)});var j=0;for(var P in z)j+=z[P]/O-w[P]*L[P]/Math.pow(O,2)*x;return j}function m(k,M,x,N){return N/(2*k)-M*x/(2*(k*k))}function E(k,M,x,N,O,w){return w/k-(O*M+N*x)/(k*k)}function _(k,M){if(!e(k))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(k.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(k.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var x=t(k);if(x==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return M=n(M,o),x==="directed"?h(k,M):l(k,M)}function A(k,M){if(!e(k))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(k.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(k.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var x=t(k);if(x==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return M=n(M,o),x==="directed"?v(k,M):y(k,M)}var C=A;return C.sparse=A,C.dense=_,C.undirectedDelta=m,C.directedDelta=E,Vi=C,Vi}var Qi,Au;function Zv(){if(Au)return Qi;Au=1;var n=Ae(),e=kr().createEdgeWeightGetter,t="weight";return Qi=function(o,a){if(!n(o))throw new Error("graphology-metrics/weighted-size: the given graph is not a valid graphology instance.");a=e(a||t).fromEntry;var s=0;return o.forEachEdge(function(l,h,d,p,y,v,m){s+=a(l,h,d,p,y,v,m)}),s},Qi}var ku;function Jv(){if(ku)return qe;ku=1;var n=$l(),e=Yv();return qe.diameter=Vv(),qe.modularity=Qv(),qe.simpleSize=zl(),qe.weightedSize=Zv(),qe.abstractDensity=n.abstractDensity,qe.density=n.density,qe.directedDensity=n.directedDensity,qe.undirectedDensity=n.undirectedDensity,qe.mixedDensity=n.mixedDensity,qe.multiDirectedDensity=n.multiDirectedDensity,qe.multiUndirectedDensity=n.multiUndirectedDensity,qe.multiMixedDensity=n.multiMixedDensity,qe.nodeExtent=e.nodeExtent,qe.edgeExtent=e.edgeExtent,qe}var Cu=Jv(),An={},Zi,Du;function Pl(){if(Du)return Zi;Du=1;var n=Ae(),e=_a(),t=Nt(),r=kr().createEdgeWeightGetter,o={edgeDisparityAttribute:"disparity",getEdgeWeight:"weight"};function a(l,h,d){if(!n(h))throw new Error("graphology-metrics/edge/disparity: the given graph is not a valid graphology instance.");if(h.multi||e(h)==="mixed")throw new Error("graphology-metrics/edge/disparity: not defined for multi nor mixed graphs.");d=t(d,o);var p=r(d.getEdgeWeight).fromEntry,y={};h.forEachNode(function(A){y[A]=0}),h.forEachEdge(function(A,C,k,M,x,N,O){var w=p(A,C,k,M,x,N,O);y[k]+=w,y[M]+=w});var v,m,E,_={};if(h.forEachAssymetricAdjacencyEntry(function(A,C,k,M,x,N,O){var w=p(x,N,A,C,k,M,O);v!==A&&(v=A,m=h.degree(A),E=y[A]);var L=h.degree(C),z=y[C],T=w/E,q=w/z,j=Math.pow(1-T,m-1),P=Math.pow(1-q,L-1);_[x]=Math.min(j,P)}),l){h.updateEachEdgeAttributes(function(A,C){return C[d.edgeDisparityAttribute]=_[A],C},{attributes:[d.edgeDisparityAttribute]});return}return _}var s=a.bind(null,!1);return s.assign=a.bind(null,!0),Zi=s,Zi}var Ji={},Nu;function Ol(){return Nu||(Nu=1,function(n){n.intersection=function(){if(arguments.length<2)throw new Error("mnemonist/Set.intersection: needs at least two arguments.");var e=new Set,t=1/0,r=null,o,a,s=arguments.length;for(a=0;a<s;a++){if(o=arguments[a],o.size===0)return e;o.size<t&&(t=o.size,r=o)}for(var l=r.values(),h,d,p,y;h=l.next(),!h.done;){for(d=h.value,p=!0,a=0;a<s;a++)if(y=arguments[a],y!==r&&!y.has(d)){p=!1;break}p&&e.add(d)}return e},n.union=function(){if(arguments.length<2)throw new Error("mnemonist/Set.union: needs at least two arguments.");var e=new Set,t,r=arguments.length,o,a;for(t=0;t<r;t++)for(o=arguments[t].values();a=o.next(),!a.done;)e.add(a.value);return e},n.difference=function(e,t){if(!e.size)return new Set;if(!t.size)return new Set(e);for(var r=new Set,o=e.values(),a;a=o.next(),!a.done;)t.has(a.value)||r.add(a.value);return r},n.symmetricDifference=function(e,t){for(var r=new Set,o=e.values(),a;a=o.next(),!a.done;)t.has(a.value)||r.add(a.value);for(o=t.values();a=o.next(),!a.done;)e.has(a.value)||r.add(a.value);return r},n.isSubset=function(e,t){var r=e.values(),o;if(e===t)return!0;if(e.size>t.size)return!1;for(;o=r.next(),!o.done;)if(!t.has(o.value))return!1;return!0},n.isSuperset=function(e,t){return n.isSubset(t,e)},n.add=function(e,t){for(var r=t.values(),o;o=r.next(),!o.done;)e.add(o.value)},n.subtract=function(e,t){for(var r=t.values(),o;o=r.next(),!o.done;)e.delete(o.value)},n.intersect=function(e,t){for(var r=e.values(),o;o=r.next(),!o.done;)t.has(o.value)||e.delete(o.value)},n.disjunct=function(e,t){for(var r=e.values(),o,a=[];o=r.next(),!o.done;)t.has(o.value)&&a.push(o.value);for(r=t.values();o=r.next(),!o.done;)e.has(o.value)||e.add(o.value);for(var s=0,l=a.length;s<l;s++)e.delete(a[s])},n.intersectionSize=function(e,t){var r;if(e.size>t.size&&(r=e,e=t,t=r),e.size===0)return 0;if(e===t)return e.size;for(var o=e.values(),a,s=0;a=o.next(),!a.done;)t.has(a.value)&&s++;return s},n.unionSize=function(e,t){var r=n.intersectionSize(e,t);return e.size+t.size-r},n.jaccard=function(e,t){var r=n.intersectionSize(e,t);if(r===0)return 0;var o=e.size+t.size-r;return r/o},n.overlap=function(e,t){var r=n.intersectionSize(e,t);return r===0?0:r/Math.min(e.size,t.size)}}(Ji)),Ji}var eo,Iu;function em(){if(Iu)return eo;Iu=1;var n=Ae(),e=Ol().intersectionSize;function t(o,a){if(!n(a))throw new Error("graphology-metrics/simmelian-strength: given graph is not a valid graphology instance.");var s={};if(a.forEachNode(function(h){s[h]=new Set(a.neighbors(h))}),!o){var l={};return a.forEachEdge(function(h,d,p,y){l[h]=e(s[p],s[y])}),l}a.updateEachEdgeAttributes(function(h,d,p,y){return d.simmelianStrength=e(s[p],s[y]),d},{attributes:["simmelianStrength"]})}var r=t.bind(null,!1);return r.assign=t.bind(null,!0),eo=r,eo}var Mu;function tm(){return Mu||(Mu=1,An.disparity=Pl(),An.simmelianStrength=em()),An}var rm=tm(),to,Lu;function Gl(){if(Lu)return to;Lu=1;var n=Xn(),e=ar();function t(r,o){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof o!="number"||o<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=r,this.capacity=o,this.items=new r(this.capacity),this.clear()}return t.prototype.clear=function(){this.start=0,this.size=0},t.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var o=this.start+this.size;return o>=this.capacity&&(o-=this.capacity),this.items[o]=r,++this.size},t.prototype.unshift=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var o=this.start-1;return this.start===0&&(o=this.capacity-1),this.items[o]=r,this.start=o,++this.size},t.prototype.pop=function(){if(this.size!==0){this.size--;var r=this.start+this.size;return r>=this.capacity&&(r-=this.capacity),this.items[r]}},t.prototype.shift=function(){if(this.size!==0){var r=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[r]}},t.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]},t.prototype.peekLast=function(){if(this.size!==0){var r=this.start+this.size-1;return r>=this.capacity&&(r-=this.capacity),this.items[r]}},t.prototype.get=function(r){if(!(this.size===0||r>=this.capacity))return r=this.start+r,r>=this.capacity&&(r-=this.capacity),this.items[r]},t.prototype.forEach=function(r,o){o=arguments.length>1?o:this;for(var a=this.capacity,s=this.size,l=this.start,h=0;h<s;)r.call(o,this.items[l],h,this),l++,h++,l===a&&(l=0)},t.prototype.toArray=function(){var r=this.start+this.size;if(r<this.capacity)return this.items.slice(this.start,r);for(var o=new this.ArrayClass(this.size),a=this.capacity,s=this.size,l=this.start,h=0;h<s;)o[h]=this.items[l],l++,h++,l===a&&(l=0);return o},t.prototype.values=function(){var r=this.items,o=this.capacity,a=this.size,s=this.start,l=0;return new e(function(){if(l>=a)return{done:!0};var h=r[s];return s++,l++,s===o&&(s=0),{value:h,done:!1}})},t.prototype.entries=function(){var r=this.items,o=this.capacity,a=this.size,s=this.start,l=0;return new e(function(){if(l>=a)return{done:!0};var h=r[s];return s++,s===o&&(s=0),{value:[l++,h],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(r,o,a){if(arguments.length<3&&(a=n.guessLength(r),typeof a!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var s=new t(o,a);if(n.isArrayLike(r)){var l,h;for(l=0,h=r.length;l<h;l++)s.items[l]=r[l];return s.size=h,s}return n.forEach(r,function(d){s.push(d)}),s},to=t,to}var ro,zu;function nm(){if(zu)return ro;zu=1;var n=ar(),e=Jr().getPointerArray;function t(r){var o=e(r);this.size=0,this.length=r,this.dense=new o(r),this.sparse=new o(r)}return t.prototype.clear=function(){this.size=0},t.prototype.has=function(r){var o=this.sparse[r];return o<this.size&&this.dense[o]===r},t.prototype.add=function(r){var o=this.sparse[r];return o<this.size&&this.dense[o]===r?this:(this.dense[this.size]=r,this.sparse[r]=this.size,this.size++,this)},t.prototype.delete=function(r){var o=this.sparse[r];return o>=this.size||this.dense[o]!==r?!1:(o=this.dense[this.size-1],this.dense[this.sparse[r]]=o,this.sparse[o]=this.sparse[r],this.size--,!0)},t.prototype.forEach=function(r,o){o=arguments.length>1?o:this;for(var a,s=0;s<this.size;s++)a=this.dense[s],r.call(o,a,a)},t.prototype.values=function(){var r=this.size,o=this.dense,a=0;return new n(function(){if(a<r){var s=o[a];return a++,{value:s}}return{done:!0}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.inspect=function(){for(var r=new Set,o=0;o<this.size;o++)r.add(this.dense[o]);return Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r.length=this.length,r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),ro=t,ro}var kn={},$u;function Yn(){if($u)return kn;$u=1;var n=Jr(),e=kr().createEdgeWeightGetter;function t(a,s){return a==="outbound"||a==="inbound"?s.directedSize+s.undirectedSize*2:a==="in"||a==="out"||a==="directed"?s.directedSize:s.undirectedSize*2}function r(a,s){s=s||"outbound";var l=a[s+"Neighbors"].bind(a),h=t(s,a),d=n.getPointerArray(h),p=n.getPointerArray(a.order);this.graph=a,this.neighborhood=new p(h),this.starts=new d(a.order+1),this.nodes=a.nodes();var y={},v,m,E,_,A,C,k=0;for(v=0,m=a.order;v<m;v++)y[this.nodes[v]]=v;for(v=0,m=a.order;v<m;v++)for(A=this.nodes[v],C=l(A),this.starts[v]=k,E=0,_=C.length;E<_;E++)this.neighborhood[k++]=y[C[E]];this.starts[v]=h}r.prototype.bounds=function(a){return[this.starts[a],this.starts[a+1]]},r.prototype.project=function(){var a=this,s={};return a.nodes.forEach(function(l,h){s[l]=Array.from(a.neighborhood.slice(a.starts[h],a.starts[h+1])).map(function(d){return a.nodes[d]})}),s},r.prototype.collect=function(a){var s,l,h={};for(s=0,l=a.length;s<l;s++)h[this.nodes[s]]=a[s];return h},r.prototype.assign=function(a,s){var l=0;this.graph.updateEachNodeAttributes(function(h,d){return d[a]=s[l++],d},{attributes:[a]})},kn.NeighborhoodIndex=r;function o(a,s,l){l=l||"outbound";var h=a[l+"Edges"].bind(a),d=t(l,a),p=n.getPointerArray(d),y=n.getPointerArray(a.order),v=e(s).fromMinimalEntry;this.graph=a,this.neighborhood=new y(d),this.weights=new Float64Array(d),this.outDegrees=new Float64Array(a.order),this.starts=new p(a.order+1),this.nodes=a.nodes();var m={},E,_,A,C,k,M,x,N,O,w=0;for(E=0,_=a.order;E<_;E++)m[this.nodes[E]]=E;for(E=0,_=a.order;E<_;E++)for(k=this.nodes[E],x=h(k),this.starts[E]=w,A=0,C=x.length;A<C;A++)N=x[A],M=a.opposite(k,N),O=v(N,a.getEdgeAttributes(N)),this.neighborhood[w]=m[M],this.weights[w++]=O,this.outDegrees[E]+=O;this.starts[E]=d}return o.prototype.bounds=r.prototype.bounds,o.prototype.project=r.prototype.project,o.prototype.collect=r.prototype.collect,o.prototype.assign=r.prototype.assign,kn.WeightedNeighborhoodIndex=o,kn}var no,Tu;function im(){if(Tu)return no;Tu=1;var n=Ae(),e=Nt(),t=Gl(),r=nm(),o=Yn().NeighborhoodIndex,a={nodeCentralityAttribute:"closenessCentrality",wassermanFaust:!1};function s(d){this.index=new o(d,"inbound"),this.queue=new t(Array,d.order),this.seen=new r(d.order)}s.prototype.fromNode=function(d){var p=this.index,y=this.queue,v=this.seen;v.clear(),y.clear(),v.add(d),y.push([d,0]);for(var m,E,_,A,C,k,M=0,x=0;y.size!==0;)for(m=y.shift(),E=m[0],_=m[1],_!==0&&(M+=_,x+=1),C=p.starts[E+1],A=p.starts[E];A<C;A++)k=p.neighborhood[A],!v.has(k)&&(v.add(k),y.push([k,_+1]));return[x,M]};function l(d,p,y){if(!n(p))throw new Error("graphology-metrics/centrality/closeness: the given graph is not a valid graphology instance.");y=e(y,a);var v=y.wassermanFaust,m=new s(p),E=p.order,_,A,C,k,M,x=new Float64Array(E);for(_=0;_<E;_++)A=m.fromNode(_),C=A[0],k=A[1],M=0,k>0&&E>1&&(M=C/k,v&&(M*=C/(E-1))),x[_]=M;return d?m.index.assign(y.nodeCentralityAttribute,x):m.index.collect(x)}var h=l.bind(null,!1);return h.assign=l.bind(null,!0),no=h,no}var om=im();const am=Ve(om);var Rr={},Pu;function sm(){if(Pu)return Rr;Pu=1;var n=Ae();function e(a,s,l,h){var d=s+"Centrality";if(!n(l))throw new Error("graphology-centrality/"+d+": the given graph is not a valid graphology instance.");if(s!=="degree"&&l.type==="undirected")throw new Error("graphology-centrality/"+d+": cannot compute "+s+" centrality on an undirected graph.");h=h||{};var p=h.nodeCentralityAttribute||d,y=l.order-1,v=l[s].bind(l);if(a){l.updateEachNodeAttributes(function(E,_){return _[p]=v(E)/y,_},{attributes:[p]});return}var m={};return l.forEachNode(function(E){m[E]=v(E)/y}),m}var t=e.bind(null,!1,"degree"),r=e.bind(null,!1,"inDegree"),o=e.bind(null,!1,"outDegree");return t.assign=e.bind(null,!0,"degree"),r.assign=e.bind(null,!0,"inDegree"),o.assign=e.bind(null,!0,"outDegree"),Rr.degreeCentrality=t,Rr.inDegreeCentrality=r,Rr.outDegreeCentrality=o,Rr}var um=sm(),Cn={},io,Ou;function cm(){if(Ou)return io;Ou=1;var n=ar(),e=Xn();function t(r,o){if(arguments.length<2)throw new Error("mnemonist/fixed-stack: expecting an Array class and a capacity.");if(typeof o!="number"||o<=0)throw new Error("mnemonist/fixed-stack: `capacity` should be a positive number.");this.capacity=o,this.ArrayClass=r,this.items=new this.ArrayClass(this.capacity),this.clear()}return t.prototype.clear=function(){this.size=0},t.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-stack.push: stack capacity ("+this.capacity+") exceeded!");return this.items[this.size++]=r,this.size},t.prototype.pop=function(){if(this.size!==0)return this.items[--this.size]},t.prototype.peek=function(){return this.items[this.size-1]},t.prototype.forEach=function(r,o){o=arguments.length>1?o:this;for(var a=0,s=this.items.length;a<s;a++)r.call(o,this.items[s-a-1],a,this)},t.prototype.toArray=function(){for(var r=new this.ArrayClass(this.size),o=this.size-1,a=this.size;a--;)r[a]=this.items[o-a];return r},t.prototype.values=function(){var r=this.items,o=this.size,a=0;return new n(function(){if(a>=o)return{done:!0};var s=r[o-a-1];return a++,{value:s,done:!1}})},t.prototype.entries=function(){var r=this.items,o=this.size,a=0;return new n(function(){if(a>=o)return{done:!0};var s=r[o-a-1];return{value:[a++,s],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.toString=function(){return this.toArray().join(",")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(r,o,a){if(arguments.length<3&&(a=e.guessLength(r),typeof a!="number"))throw new Error("mnemonist/fixed-stack.from: could not guess iterable length. Please provide desired capacity as last argument.");var s=new t(o,a);if(e.isArrayLike(r)){var l,h;for(l=0,h=r.length;l<h;l++)s.items[l]=r[l];return s.size=h,s}return e.forEach(r,function(d){s.push(d)}),s},io=t,io}var Gu;function lm(){if(Gu)return Cn;Gu=1;var n=Gl(),e=cm(),t=xa(),r=Jr(),o=Yn(),a=o.NeighborhoodIndex,s=o.WeightedNeighborhoodIndex;Cn.createUnweightedIndexedBrandes=function(d){var p=new a(d),y=p.neighborhood,v=p.starts,m=d.order,E=new e(r.getPointerArray(m),m),_=new Uint32Array(m),A=new Array(m),C=new Int32Array(m),k=new n(Uint32Array,m),M=function(x){var N,O,w,L,z,T,q;for(T=0;T<m;T++)A[T]=[],_[T]=0,C[T]=-1;for(_[x]=1,C[x]=0,k.push(x);k.size!==0;)for(T=k.shift(),E.push(T),N=C[T],O=_[T],w=v[T],L=v[T+1],z=w;z<L;z++)q=y[z],C[q]===-1&&(k.push(q),C[q]=N+1),C[q]===N+1&&(_[q]+=O,A[q].push(T));return[E,A,_]};return M.index=p,M};function l(h,d){return h[0]>d[0]?1:h[0]<d[0]?-1:h[1]>d[1]?1:h[1]<d[1]?-1:h[2]>d[2]?1:h[2]<d[2]?-1:h[3]>d[3]?1:h[3]<d[3]?-1:0}return Cn.createDijkstraIndexedBrandes=function(d,p){var y=new s(d,p||"weight"),v=y.neighborhood,m=y.weights,E=y.starts,_=d.order,A=new e(r.getPointerArray(_),_),C=new Uint32Array(_),k=new Array(_),M=new Float64Array(_),x=new Float64Array(_),N=new t(l),O=function(w){var L,z,T,q,j,P,ee,J,F,D=0;for(J=0;J<_;J++)k[J]=[],C[J]=0,M[J]=-1,x[J]=-1;for(C[w]=1,x[w]=0,N.push([0,D++,w,w]);N.size!==0;)if(T=N.pop(),q=T[0],j=T[2],J=T[3],M[J]===-1)for(A.push(J),M[J]=q,C[J]+=C[j],L=E[J],z=E[J+1],ee=L;ee<z;ee++)F=v[ee],P=q+m[ee],M[F]===-1&&(x[F]===-1||P<x[F])?(x[F]=P,N.push([P,D++,J,F]),C[F]=0,k[F]=[J]):P===x[F]&&(C[F]+=C[J],k[F].push(J));return[A,k,C]};return O.index=y,O},Cn}var oo,Ru;function dm(){if(Ru)return oo;Ru=1;var n=Ae(),e=lm(),t=Nt(),r=e.createUnweightedIndexedBrandes,o=e.createDijkstraIndexedBrandes,a={nodeCentralityAttribute:"betweennessCentrality",getEdgeWeight:"weight",normalized:!0};function s(h,d,p){if(!n(d))throw new Error("graphology-centrality/beetweenness-centrality: the given graph is not a valid graphology instance.");p=t(p,a);var y=p.nodeCentralityAttribute,v=p.normalized,m=p.getEdgeWeight?o(d,p.getEdgeWeight):r(d),E=d.order,_,A,C,k,M,x,N,O,w,L,z=new Float64Array(E),T=new Float64Array(E);for(x=0;x<E;x++){for(_=m(x),A=_[0],C=_[1],k=_[2],N=A.size;N--;)z[A.items[A.size-N]]=0;for(;A.size!==0;){for(L=A.pop(),M=(1+z[L])/k[L],N=0,O=C[L].length;N<O;N++)w=C[L][N],z[w]+=k[w]*M;L!==x&&(T[L]+=z[L])}}var q=null;if(v?q=E<=2?null:1/((E-1)*(E-2)):q=d.type==="undirected"?.5:null,q!==null)for(x=0;x<E;x++)T[x]*=q;return h?m.index.assign(y,T):m.index.collect(T)}var l=s.bind(null,!1);return l.assign=s.bind(null,!0),oo=l,oo}var hm=dm();const fm=Ve(hm);var ao,qu;function pm(){if(qu)return ao;qu=1;var n=Ae(),e=Nt(),t=Yn().WeightedNeighborhoodIndex,r={nodeCentralityAttribute:"eigenvectorCentrality",getEdgeWeight:"weight",maxIterations:100,tolerance:1e-6};function o(l){for(var h=0,d=0,p=0,y=l.length;p<y;p++){var v=Math.abs(l[p]);v>h&&(d*=h/v*(h/v),h=v),d+=v===0&&h===0?0:v/h*(v/h)}return h===1/0?1:h*Math.sqrt(d)}function a(l,h,d){if(!n(h))throw new Error("graphology-metrics/centrality/eigenvector: the given graph is not a valid graphology instance.");d=e(d,r);var p=d.maxIterations,y=d.tolerance,v=h.order,m=new t(h,d.getEdgeWeight),E,_,A,C,k=new Float64Array(h.order);for(E=0;E<v;E++)k[E]=1/v;for(var M=0,x=0,N,O,w,L=!1;M<p;){for(O=k,k=new Float64Array(O),E=0;E<v;E++)for(A=m.starts[E+1],_=m.starts[E];_<A;_++)N=m.neighborhood[_],C=m.weights[_],k[N]+=O[E]*C;for(w=o(k),E=0;E<v;E++)k[E]/=w;for(x=0,E=0;E<v;E++)x+=Math.abs(k[E]-O[E]);if(x<v*y){L=!0;break}M++}if(!L)throw Error("graphology-metrics/centrality/eigenvector: failed to converge.");if(l){m.assign(d.nodeCentralityAttribute,k);return}return m.collect(k)}var s=a.bind(null,!1);return s.assign=a.bind(null,!0),ao=s,ao}var gm=pm();const ym=Ve(gm);var yr={},so,Fu;function vm(){if(Fu)return so;Fu=1;var n=Ae();function e(r,o){if(r.length<1)throw new Error("graphology-metrics/layout-quality/connected-closeness.max: not enough values!");for(var a=void 0,s,l=1,h=r.length;l<h;l++)s=r[l],o!==void 0&&(s=o(s)),(a===void 0||s>a)&&(a=s);return a}function t(r,o){if(r.length<1)throw new Error("graphology-metrics/layout-quality/connected-closeness.min: not enough values!");for(var a=void 0,s,l=1,h=r.length;l<h;l++)s=r[l],o!==void 0&&(s=o(s)),(a===void 0||s<a)&&(a=s);return a}return so=function(o,a){if(!n(o))throw new Error("graphology-metrics/layout-quality/connected-closeness: given graph is not a valid graphology instance.");if(o.size<2)return{deltaMax:void 0,ePercentOfDeltaMax:void 0,pPercentOfDeltaMax:void 0,pEdgeOfDeltaMax:void 0,cMax:M.C};a=a||{},a.epsilon=a.epsilon||.03,a.gridSize=a.gridSize||10;var s=a.rng||Math.random,l=N(),h=o.edges().map(function(w){var L=o.getNodeAttributes(o.source(w)),z=o.getNodeAttributes(o.target(w)),T=Math.sqrt(Math.pow(L.x-z.x,2)+Math.pow(L.y-z.y,2));return T}),d=[0,Math.max(e(l),e(h)||0)],p=0,y={},v,m,E,_,A,C=-1;do{for(_=0;_<=a.gridSize;_++)v=d[0]+(d[1]-d[0])*_/a.gridSize,y[v]===void 0&&(y[v]=x(v,o,l,h));m=p,p=0,A=Object.values(y),A.forEach(function(w,L){E=w.C,E>p&&(p=E,C=L)}),d=[A[Math.max(0,C-1)].Delta,A[Math.min(A.length-1,C+1)].Delta]}while((p-m)/p>=a.epsilon/10);var k=O(A,a.epsilon),M=x(k,o,l,h);if(M.C<.1)return{deltaMax:void 0,ePercentOfDeltaMax:void 0,pPercentOfDeltaMax:void 0,pEdgeOfDeltaMax:void 0,cMax:M.C};return{deltaMax:k,ePercentOfDeltaMax:M.ePercent,pPercentOfDeltaMax:M.pPercent,pEdgeOfDeltaMax:M.pEdge,cMax:M.C};function x(w,L,z,T){var q=T.filter(function(Q){return Q<=w}),j=z.filter(function(Q){return Q<=w}),P=q.length,ee=P/T.length,J=j.length,F=J/z.length,D=ee-F,U=L.undirected?1:2,H=P/(U*J*(L.order*(L.order-1))/z.length);return{Delta:w,ePercent:ee,pPercent:F,pEdge:H,C:D}}function N(){if(o.order<2)return[];var w=[],L,z,T,q,j,P=o.size;if(P<1)return[];for(var ee=0;ee<P;ee++){L=o.nodes()[Math.floor(s()*o.order)];do z=o.nodes()[Math.floor(s()*o.order)];while(L===z);T=o.getNodeAttributes(L),q=o.getNodeAttributes(z),j=Math.sqrt(Math.pow(T.x-q.x,2)+Math.pow(T.y-q.y,2)),w.push(j)}return w}function O(w,L){var z=e(w,function(q){return q.C}),T=t(w.filter(function(q){return q.C>=(1-L)*z}),function(q){return q.Delta});return T}},so}var uo,ju;function mm(){if(ju)return uo;ju=1;var n=Ae();function e(t,r){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}return uo=function(r){if(!n(r))throw new Error("graphology-metrics/layout-quality/edge-uniformity: given graph is not a valid graphology instance.");if(r.size===0)return 0;var o=0,a=0,s,l=new Float64Array(r.size);r.forEachEdge(function(y,v,m,E,_,A){var C=e(_,A);l[a++]=C,o+=C});var h=o/r.size,d=0;for(a=0,s=r.size;a<s;a++)d+=Math.pow(h-l[a],2);var p=d/(r.size*Math.pow(h,2));return Math.sqrt(p)},uo}var co,Bu;function bm(){if(Bu)return co;Bu=1;var n=Ea(),e=xa(),t=n.DEFAULT_COMPARATOR,r=n.reverseComparator;function o(l,h,d,p){for(var y=d,v=p,m=h[p],E=2*p+1,_;E<y;)_=E+1,_<y&&l(h[E],h[_])>=0&&(E=_),h[p]=h[E],p=E,E=2*p+1;h[p]=m,e.siftDown(l,h,v,p)}function a(l,h,d,p){for(var y=p,v=y,m=new l(p),E,_;v>0;)E=d[--v],v!==0&&(_=d[0],d[0]=E,o(h,d,--p,0),E=_),m[v]=E;return m}function s(l,h,d){if(arguments.length===2&&(d=h,h=null),this.ArrayClass=l,this.capacity=d,this.items=new l(d),this.clear(),this.comparator=h||t,typeof d!="number"&&d<=0)throw new Error("mnemonist/FixedReverseHeap.constructor: capacity should be a number > 0.");if(typeof this.comparator!="function")throw new Error("mnemonist/FixedReverseHeap.constructor: given comparator should be a function.");this.comparator=r(this.comparator)}return s.prototype.clear=function(){this.size=0},s.prototype.push=function(l){return this.size<this.capacity?(this.items[this.size]=l,e.siftDown(this.comparator,this.items,0,this.size),this.size++):this.comparator(l,this.items[0])>0&&e.replace(this.comparator,this.items,l),this.size},s.prototype.peek=function(){return this.items[0]},s.prototype.consume=function(){var l=a(this.ArrayClass,this.comparator,this.items,this.size);return this.size=0,l},s.prototype.toArray=function(){return a(this.ArrayClass,this.comparator,this.items.slice(0,this.size),this.size)},s.prototype.inspect=function(){var l=this.toArray();return Object.defineProperty(l,"constructor",{value:s,enumerable:!1}),l},typeof Symbol<"u"&&(s.prototype[Symbol.for("nodejs.util.inspect.custom")]=s.prototype.inspect),co=s,co}var Dn={},Uu;function wm(){if(Uu)return Dn;Uu=1;var n=new Float64Array(64),e=new Float64Array(64);function t(o,a,s){var l,h,d,p,y;for(n[0]=a,e[0]=s,h=0;h>=0;)if(d=n[h],p=e[h]-1,d<p){for(l=o[d];d<p;){for(;o[p]>=l&&d<p;)p--;for(d<p&&(o[d++]=o[p]);o[d]<=l&&d<p;)d++;d<p&&(o[p--]=o[d])}o[d]=l,n[h+1]=d+1,e[h+1]=e[h],e[h++]=d,e[h]-n[h]>e[h-1]-n[h-1]&&(y=n[h],n[h]=n[h-1],n[h-1]=y,y=e[h],e[h]=e[h-1],e[h-1]=y)}else h--;return o}Dn.inplaceQuickSort=t;function r(o,a,s,l){var h,d,p,y,v,m;for(n[0]=s,e[0]=l,d=0;d>=0;)if(p=n[d],y=e[d]-1,p<y){for(v=a[p],h=o[v];p<y;){for(;o[a[y]]>=h&&p<y;)y--;for(p<y&&(a[p++]=a[y]);o[a[p]]<=h&&p<y;)p++;p<y&&(a[y--]=a[p])}a[p]=v,n[d+1]=p+1,e[d+1]=e[d],e[d++]=p,e[d]-n[d]>e[d-1]-n[d-1]&&(m=n[d],n[d]=n[d-1],n[d-1]=m,m=e[d],e[d]=e[d-1],e[d-1]=m)}else d--;return a}return Dn.inplaceQuickSortIndices=r,Dn}var lo,Hu;function Em(){if(Hu)return lo;Hu=1;var n=Xn(),e=Jr(),t=Ea().createTupleComparator,r=bm(),o=wm().inplaceQuickSortIndices;function a(y,v,m,E){var _,A=0,C;for(_=0;_<y;_++)C=v[_][m]-E[_],A+=C*C;return A}function s(y,v){var m=v.length,E=new Array(y),_=new Array(m),A,C=e.getPointerArray(m),k=new C(m),M,x,N,O=!0;for(M=0;M<y;M++){for(A=new Float64Array(m),x=0;x<m;x++)N=v[x],A[x]=N[1][M],O&&(_[x]=N[0],k[x]=x);O=!1,E[M]=A}return{axes:E,ids:k,labels:_}}function l(y,v,m,E){for(var _=E.length,A=e.getPointerArray(_+1),C=new A(_),k=new A(_),M=new A(_),x=[[0,0,m.length,-1,0]],N,O,w,L,z,T,q,j,P=0;x.length!==0;)N=x.pop(),j=N[0],T=N[1],q=N[2],O=N[3],w=N[4],o(v[j],m,T,q),_=q-T,L=T+(_>>>1),z=m[L],C[P]=z,O>-1&&(w===0?k[O]=P+1:M[O]=P+1),j=(j+1)%y,L!==T&&L!==q-1&&x.push([j,L+1,q,P,1]),L!==T&&x.push([j,T,L,P,0]),P++;return{axes:v,labels:E,pivots:C,lefts:k,rights:M}}function h(y,v){this.dimensions=y,this.visited=0,this.axes=v.axes,this.labels=v.labels,this.pivots=v.pivots,this.lefts=v.lefts,this.rights=v.rights,this.size=this.labels.length}h.prototype.nearestNeighbor=function(y){var v=1/0,m=null,E=this.dimensions,_=this.axes,A=this.pivots,C=this.lefts,k=this.rights,M=0;function x(N,O){M++;var w=C[O],L=k[O],z=A[O],T=a(E,_,z,y);if(!(T<v&&(m=z,v=T,T===0))){var q=_[N][z]-y[N];N=(N+1)%E,q>0?w!==0&&x(N,w-1):L!==0&&x(N,L-1),q*q<v&&(q>0?L!==0&&x(N,L-1):w!==0&&x(N,w-1))}}return x(0,0),this.visited=M,this.labels[m]};var d=t(3),p=t(2);return h.prototype.kNearestNeighbors=function(y,v){if(y<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");if(y=Math.min(y,this.size),y===1)return[this.nearestNeighbor(v)];var m=new r(Array,d,y),E=this.dimensions,_=this.axes,A=this.pivots,C=this.lefts,k=this.rights,M=0;function x(w,L){var z=C[L],T=k[L],q=A[L],j=a(E,_,q,v);m.push([j,M++,q]);var P=v[w],ee=_[w][q],J=P-ee;w=(w+1)%E,P<ee?z!==0&&x(w,z-1):T!==0&&x(w,T-1),(J*J<m.peek()[0]||m.size<y)&&(P<ee?T!==0&&x(w,T-1):z!==0&&x(w,z-1))}x(0,0),this.visited=M;for(var N=m.consume(),O=0;O<N.length;O++)N[O]=this.labels[N[O][2]];return N},h.prototype.linearKNearestNeighbors=function(y,v){if(y<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");y=Math.min(y,this.size);var m=new r(Array,p,y),E,_,A;for(E=0,_=this.size;E<_;E++)A=a(this.dimensions,this.axes,this.pivots[E],v),m.push([A,E]);var C=m.consume();for(E=0;E<C.length;E++)C[E]=this.labels[this.pivots[C[E][1]]];return C},h.prototype.inspect=function(){var y=new Map;y.dimensions=this.dimensions,Object.defineProperty(y,"constructor",{value:h,enumerable:!1});var v,m,E;for(v=0;v<this.size;v++){for(E=new Array(this.dimensions),m=0;m<this.dimensions;m++)E[m]=this.axes[m][v];y.set(this.labels[v],E)}return y},typeof Symbol<"u"&&(h.prototype[Symbol.for("nodejs.util.inspect.custom")]=h.prototype.inspect),h.from=function(y,v){var m=n.toArray(y),E=s(v,m),_=l(v,E.axes,E.ids,E.labels);return new h(v,_)},h.fromAxes=function(y,v){v||(v=e.indices(y[0].length));var m=y.length,E=l(y.length,y,e.indices(v.length),v);return new h(m,E)},lo=h,lo}var ho,Wu;function Rl(){if(Wu)return ho;Wu=1;var n=Ae(),e=Em(),t=Ol().intersectionSize;return ho=function(o){if(!n(o))throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: given graph is not a valid graphology instance.");if(o.order===0)throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: cannot compute stress for a null graph.");if(o.size===0)return 0;var a=[new Float64Array(o.order),new Float64Array(o.order)],s=0;o.forEachNode(function(d,p){a[0][s]=p.x,a[1][s++]=p.y});var l=e.fromAxes(a,o.nodes()),h=0;return o.forEachNode(function(d,p){var y=new Set(o.neighbors(d));if(y.size===0||y.size===o.order-1){h+=1;return}var v=l.kNearestNeighbors(y.size+1,[p.x,p.y]);v=new Set(v.slice(1));var m=t(y,v);h+=m/v.size}),h/o.order},ho}var fo,Ku;function ql(){if(Ku)return fo;Ku=1;var n=Ae(),e=wa().undirectedSingleSourceLength;function t(r,o){return Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2))}return fo=function(o){if(!n(o))throw new Error("graphology-metrics/layout-quality/stress: given graph is not a valid graphology instance.");if(o.order===0)throw new Error("graphology-metrics/layout-quality/stress: cannot compute stress for a null graph.");var a=new Array(o.order),s=new Array(o.order),l=0,h=o.order*4;o.forEachNode(function(k,M){a[l]=k,s[l++]=M});var d,p,y,v,m,E,_,A,C=0;for(l=0,p=o.order;l<p;l++)for(m=e(o,a[l]),y=s[l],d=l+1;d<p;d++)v=s[d],E=m[a[d]],typeof E>"u"&&(E=h),A=t(y,v),_=1/(E*E),C+=_*Math.pow(A-E,2);return C},fo}var Xu;function xm(){return Xu||(Xu=1,yr.connectedCloseness=vm(),yr.edgeUniformity=mm(),yr.neighborhoodPreservation=Rl(),yr.stress=ql()),yr}var _m=xm(),Sm=ql();const Am=Ve(Sm);var km=Tl();const Cm=Ve(km);var po,Yu;function Dm(){if(Yu)return po;Yu=1;var n=Ae(),e=Nt(),t=Yn().WeightedNeighborhoodIndex,r={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function o(s,l,h){if(!n(l))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");h=e(h,r);var d=h.alpha,p=h.maxIterations,y=h.tolerance,v=h.nodePagerankAttribute,m=l.order,E=1/m,_=new t(l,h.getEdgeWeight),A,C,k,M,x=new Float64Array(l.order),N=new Float64Array(_.weights.length),O=[];for(A=0;A<m;A++)for(x[A]=E,k=_.starts[A+1],M=_.outDegrees[A],M===0&&O.push(A),C=_.starts[A];C<k;C++)N[C]=_.weights[C]/M;for(var w=0,L=0,z,T,q,j=!1;w<p;){for(q=x,x=new Float64Array(l.order),z=0,A=0,k=O.length;A<k;A++)z+=q[O[A]];for(z*=d,A=0;A<m;A++){for(k=_.starts[A+1],C=_.starts[A];C<k;C++)T=_.neighborhood[C],x[T]+=d*q[A]*N[C];x[A]+=z*E+(1-d)*E}for(L=0,A=0;A<m;A++)L+=Math.abs(x[A]-q[A]);if(L<m*y){j=!0;break}w++}if(!j)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(s){_.assign(v,x);return}return _.collect(x)}var a=o.bind(null,!1);return a.assign=o.bind(null,!0),po=a,po}var Nm=Dm();const Im=Ve(Nm);var Mm=Rl();const Lm=Ve(Mm);var zm=Pl();const $m=Ve(zm);var go={},Vu;function Tm(){return Vu||(Vu=1,function(n){const e=Ae(),t=Ll();function r(y,v,m){if(m=m||"core",!e(v))throw new Error("graphology-cores: the given graph is not a valid graphology instance.");if(v.selfLoopCount>0)throw new Error("graphology-cores: the given graph has self loops which is not permitted.");const E={},_={};let A=0;v.forEachNode(O=>{const w=[],L=v.degree(O);v.type!=="undirected"&&(v.forEachInNeighbor(O,z=>{w.push(z)}),v.forEachOutNeighbor(O,z=>{w.push(z)})),v.type!=="directed"&&v.forEachUndirectedNeighbor(O,z=>{w.push(z)}),E[O]=L,L>A&&(A=L),_[O]=w});const C=v.nodes().sort((O,w)=>v.degree(O)-v.degree(w)),k=new Array(C.length*A);k[0]=0;const M={};let x=0,N=1;for(let O=0;O<C.length;O++){const w=C[O];M[w]=O;const L=E[w];if(L>x){let z=L-x;for(;z--;)k[N++]=O;x=L}}return C.forEach(O=>{const w=_[O],L=E[O];for(let z=0,T=w.length;z<T;z++){const q=w[z],j=E[q];if(j<=L)continue;const P=_[q];P.splice(P.indexOf(O),1);const ee=M[q],J=k[j];M[q]=J,M[C[J]]=ee;const F=C[J];C[J]=C[ee],C[ee]=F,k[j]+=1,E[q]-=1}}),y&&v.updateEachNodeAttributes((O,w)=>(w[m]=E[O],w),{attributes:[m]}),E}function o(y,v,m,E){if(E===void 0&&(E=r(!1,y)),m===void 0){m=0;for(const A in E)E[A]>m&&(m=E[A])}const _=[];for(const A in E)v(A,m,E)&&_.push(A);return t(y,_)}function a(y,v,m){return o(y,(E,_,A)=>A[E]>=_,v,m)}function s(y,v,m){return o(y,(E,_,A)=>A[E]===_,v,m)}function l(y,v,m){if(m===void 0&&(m=r(!1,y)),v===void 0){v=0;for(const E in m)m[E]-1>v&&(v=m[E]-1)}return t(y,E=>m[E]<=v)}function h(y,v,m){return o(y,(E,_,A)=>{let C=null;return y.type==="directed"?C=y.inNeighbors(E).reduce((k,M)=>A[M]>=_?k+1:k,0)+y.outNeighbors(E).reduce((k,M)=>A[M]>=_?k+1:k,0):C=y.neighbors(E).reduce((k,M)=>A[M]>=_?k+1:k,0),A[E]===_&&_===C},v,m)}function d(y,v){if(!e(y))throw new Error("graphology-cores: the given graph is not a valid graphology instance.");if(v===void 0)throw Error("graphology-cores : missing parameter k.");if(y.type==="directed"||y.multi)throw Error("graphology-cores : unimplemented metric for directed graphs and multigraphs.");if(y.selfLoopCount>0)throw Error("graphology-cores : onion loyers not available for graphs with self-loops.");const m=y.copy();let E=1;for(;E>0;){E=0;const _=[],A=new Set;m.forEachNode(C=>{const k=new Set(m.neighbors(C));A.add(C),[...k].reduce((x,N)=>(A.has(N)||x.push(N),x),[]).forEach(x=>{const N=new Set(m.neighbors(x)),O=new Set;for(const w of k)N.has(w)&&O.add(w);O.size<v-2&&_.push(y.edge(C,x))})}),_.forEach(C=>{C&&m.dropEdge(C)}),E=_.length,m.forEachNode(C=>{m.degree(C)===0&&m.dropNode(C)})}return m}function p(y,v,m){m=m||"onionLayer";const E=function(w,L){const z={};for(const T in w)T!==L&&(z[T]=w[T]);return z},_=function(w){let L=0;for(const z in w)L++;return L};if(v.type==="directed"||v.multi)throw Error("graphology-cores : unimplemented metric for directed graphs and multigraphs.");if(v.selfLoopCount>0)throw Error("graphology-cores : onion layers not available for graphs with self-loops.");let A={};const C={},k=[];v.forEachNode(w=>{const L=v.degree(w);A[w]=L,L===0&&k.push(w),C[w]=v.neighbors(w)});const M={};let x=1,N=1;k.length>0&&(k.forEach(w=>{M[w]=N,A=E(A,w)}),N+=1);const O=(w,L)=>A[w]-A[L];for(;_(A)>0;){const w=_(A);let L=0;const z=new Array(w);for(const j in A)z[L++]=j;z.sort(O);const T=A[z[0]];T>x&&(x=T);const q=[];for(let j=0;j<z.length&&!(A[z[j]]>x);j++)q.push(z[j]);for(let j=0;j<q.length;j++){const P=q[j];M[P]=N;for(let ee=0;ee<C[P].length;++ee){const J=C[P][ee];C[J].splice(C[J].indexOf(P),1),A[J]-=1}A=E(A,P)}N++}return y&&v.updateEachNodeAttributes((w,L)=>(L[m]=M[w],L)),M}n.coreNumber=r.bind(null,!1),n.coreNumber.assign=r.bind(null,!0),n.onionLayers=p.bind(null,!1),n.onionLayers.assign=p.bind(null,!0),n.kCore=a,n.kShell=s,n.kCrust=l,n.kCorona=h,n.kTruss=d}(go)),go}var Qu=Tm();const Nn=document;class Fl{constructor(e){this.graphManager=e,this.pannel=Nn.querySelector("#floating-panel .body-info")}basicInfo(){const e=this.graphManager.graph;this.addHeader("Basic Informattion"),this.addInfo(`|V|: ${e.order}`),this.addInfo(`|E|: ${e.size}`);const t=e.someEdge((r,o)=>o.weight);this.addInfo(t?`Type: ${e.type}, weighted`:`Type: ${e.type}`),this.addLine(),console.log(Qu.coreNumber(e)),Qu.coreNumber.assign(e,"core")}addHeader(e){const t=Nn.createElement("h4");t.textContent=e,this.pannel.appendChild(t),console.log(e)}addInfo(e){const t=Nn.createElement("div");t.insertAdjacentHTML("beforeend",e),this.pannel.appendChild(t),console.log(e)}addLine(){const e=Nn.createElement("hr");this.pannel.appendChild(e),this.pannel.scrollTop=this.pannel.scrollHeight}addNodeInfo(e){if(typeof e=="string"){const t=this.graphManager.graph.getNodeAttributes(e);if(t.desc&&Object.keys(t.desc).length!=0||t.weight){this.addHeader(`${t.label}:`);for(let r in t.desc)this.addInfo(`${r}: ${t.desc[r]}`);t.weight&&this.addInfo(`weight: ${t.weight}`),this.addLine()}}else{const t=e;if(t.desc&&Object.keys(t.desc).length!=0||t.weight){this.addHeader(`${t.label}:`);for(let r in t.desc)this.addInfo(`${r}: ${t.desc[r]}`);t.weight&&this.addInfo(`weight: ${t.weight}`),this.addLine()}}}allNodeInfo(){for(let e of this.graphManager.graph.getSelectedNodes())this.addNodeInfo(e)}addEdgeInfo(e){if(typeof e=="string"){const t=this.graphManager.graph.getEdgeAttributes(e);if(t.desc&&Object.keys(t.desc).length!=0||t.weight){this.addHeader(`${t.label}:`);for(let r in t.desc)this.addInfo(`${r}: ${t.desc[r]}`);t.weight&&this.addInfo(`weight: ${t.weight}`),this.addLine()}}else{const t=e;if(t.desc&&Object.keys(t.desc).length!=0||t.weight){this.addHeader(`${t.label}:`);for(let r in t.desc)this.addInfo(`${r}: ${t.desc[r]}`);t.weight&&this.addInfo(`weight: ${t.weight}`),this.addLine()}}}allEdgeInfo(){for(let e of this.graphManager.graph.getSelectedEdges())this.addEdgeInfo(e)}getComponent(e){const t=this.graphManager.graph,r=_n.connectedComponents(t);for(let o of r)if(o.includes(String(e)))return o;return null}degreeSequesnce(){this.addHeader("Degree Sequence");const e=this.graphManager.graph,r=`(${e.mapNodes((o,a)=>e.degree(o)).join(", ")})`;this.addInfo(r),this.addLine()}countComponents(){const e=this.graphManager.graph;this.addHeader("Connected Components");const t=_n.countConnectedComponents(e);this.addInfo(`Count: ${t}`),_n.forEachConnectedComponent(e,r=>{this.addInfo(r.map(o=>e.getNodeAttribute(o,"label")).join(", "))}),this.addLine()}neighbors(){const e=this.graphManager.graph;this.addHeader("Neighbors");const t=this.graphManager.graph.getSelectedNodes();if(t.length!==1){this.addInfo("Select one node"),this.addLine();return}const[r]=t,o=e.neighbors(r);this.addInfo(o.map(a=>e.getNodeAttribute(a,"label")).join(", ")),this.addLine()}shortestPath(){this.addHeader("Shortest Path");const e=this.graphManager.graph,t=this.graphManager.graph.getSelectedNodes();if(t.length!==2){this.addInfo("Select two nodes"),this.addLine();return}const[r,o]=t,a=yu.bidirectional(e,r,o);a?(this.addInfo(a.map(s=>e.getNodeAttribute(s,"label")).join(" -> ")),this.addLine(),e.selectPath(a),this.graphManager.app.drawGraph()):(this.addInfo("They are not connected"),this.addLine())}density(){this.addHeader("Density");const e=this.graphManager.graph,t=Cu.density(e);this.addInfo(t),this.addLine()}diameter(){this.addHeader("Diameter");const e=this.graphManager.graph,t=Cu.diameter(e);this.addInfo(t),this.addLine()}eccentricity(){this.addHeader("Eccentricity");const e=this.graphManager.graph,t=this.graphManager.graph.getSelectedNodes();if(t.length!==1){this.addInfo("Select one node"),this.addLine();return}const[r]=t,o=Cm(e,r);this.addInfo(o),this.addLine()}simmelianStrength(){this.addHeader("Simmelian strength");const e=this.graphManager.graph,t=rm.simmelianStrength(e);for(const r in t){const{source:o,target:a}=e.getEdgeAttributes(r);this.addInfo(`${e.getNodeAttribute(o,"label")}, ${e.getNodeAttribute(a,"label")} : ${t[r]}`)}this.addLine()}betweennessCentrality(){this.addHeader("Betweenness centrality");const e=this.graphManager.graph,t=fm(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}closenessCentrality(){this.addHeader("Closeness centrality");const e=this.graphManager.graph,t=am(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}degreeCentrality(){this.addHeader("Degree centrality");const e=this.graphManager.graph,t=um.degreeCentrality(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}eigenvectorCentrality(){this.addHeader("Eigenvector centrality");const e=this.graphManager.graph,t=ym(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}pagerank(){this.addHeader("Pagerank");const e=this.graphManager.graph,t=Im(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}edgeUniformity(){this.addHeader("Edge Uniformity");const e=this.graphManager.graph,t=_m.edgeUniformity(e);this.addInfo(t),this.addLine()}neighborhoodPreservation(){this.addHeader("Neighborhood preservation");const e=this.graphManager.graph,t=Lm(e);this.addInfo(t),this.addLine()}stress(){this.addHeader("Stress");const e=this.graphManager.graph,t=Am(e);this.addInfo(t),this.addLine()}disparity(){this.addHeader("Disparity");const e=this.graphManager.graph,t=$m(e);for(const r in t){const{source:o,target:a}=e.getEdgeAttributes(r);this.addInfo(`${e.getNodeAttribute(o,"label")}, ${e.getNodeAttribute(a,"label")} : ${t[r]}`)}this.addLine()}_isCycle(e){if(e.order==e.size&&_n.countConnectedComponents(e)==1){const t=e.edges()[0],{source:r,target:o}=e.getEdgeAttributes(t);return e.dropEdge(t),yu.bidirectional(e,o,r)}return!1}liesOnCycle(){this.addHeader("Lies on cycle");const e=this.graphManager.graph,t=this.graphManager.graph.getSelectedNodes();if(t.length<3){this.addInfo("Select at least 3 nodes"),this.addLine();return}const r=kt.subgraph(e,t);this.addInfo(!!this._isCycle(r)),this.addLine()}}var In={},yo,Zu;function Pm(){if(Zu)return yo;Zu=1;var n=bt(),e=ma();return yo=function(r,o,a){if(!n(r))throw new Error("graphology-generators/community/caveman: invalid Graph constructor.");var s=o*a,l=e(r,s);if(a<2)return l;var h,d,p;for(h=0;h<s;h+=a)for(d=h;d<h+a;d++)for(p=d+1;p<h+a;p++)l.addEdge(d,p);return l},yo}var vo,Ju;function Om(){if(Ju)return vo;Ju=1;var n=bt(),e=ma();return vo=function(r,o,a){if(!n(r))throw new Error("graphology-generators/community/connected-caveman: invalid Graph constructor.");var s=o*a,l=e(r,s);if(a<2)return l;var h,d,p;for(h=0;h<s;h+=a){for(d=h;d<h+a;d++)for(p=d+1;p<h+a;p++)(d!==h||d!==p-1)&&l.addEdge(d,p);h>0&&l.addEdge(h,(h-1)%s)}return l.addEdge(0,s-1),l},vo}var ec;function Gm(){return ec||(ec=1,In.caveman=Pm(),In.connectedCaveman=Om()),In}var tc=Gm(),qr={},mo,rc;function Rm(){if(rc)return mo;rc=1;var n=bt();return mo=function(e,t){if(!n(e))throw new Error("graphology-generators/random/clusters: invalid Graph constructor.");t=t||{};var r="clusterDensity"in t?t.clusterDensity:.5,o=t.rng||Math.random,a=t.order,s=t.size,l=t.clusters;if(typeof r!="number"||r>1||r<0)throw new Error("graphology-generators/random/clusters: `clusterDensity` option should be a number between 0 and 1.");if(typeof o!="function")throw new Error("graphology-generators/random/clusters: `rng` option should be a function.");if(typeof a!="number"||a<=0)throw new Error("graphology-generators/random/clusters: `order` option should be a positive number.");if(typeof s!="number"||s<=0)throw new Error("graphology-generators/random/clusters: `size` option should be a positive number.");if(typeof l!="number"||l<=0)throw new Error("graphology-generators/random/clusters: `clusters` option should be a positive number.");var h=new e;if(!a)return h;var d=new Array(l),p,y,v;for(v=0;v<l;v++)d[v]=[];for(v=0;v<a;v++)p=o()*l|0,h.addNode(v,{cluster:p}),d[p].push(v);if(!s)return h;var m,E,_;for(v=0;v<s;v++){if(o()<1-r){m=o()*a|0;do E=o()*a|0;while(m===E)}else{if(p=o()*l|0,y=d[p],_=y.length,!_||_<2)continue;m=y[o()*_|0];do E=y[o()*_|0];while(m===E)}h.multi?h.addEdge(m,E):h.mergeEdge(m,E)}return h},mo}var bo,nc;function qm(){if(nc)return bo;nc=1;var n=bt(),e=$l().abstractDensity;function t(o,a){if(!n(o))throw new Error("graphology-generators/random/erdos-renyi: invalid Graph constructor.");var s=a.order,l=a.probability,h=a.rng||Math.random,d=new o;if(typeof a.approximateSize=="number"&&(l=e(d.type,!1,s,a.approximateSize)),typeof s!="number"||s<=0)throw new Error("graphology-generators/random/erdos-renyi: invalid `order`. Should be a positive number.");if(typeof l!="number"||l<0||l>1)throw new Error("graphology-generators/random/erdos-renyi: invalid `probability`. Should be a number between 0 and 1. Or maybe you gave an `approximateSize` exceeding the graph's density.");if(typeof h!="function")throw new Error("graphology-generators/random/erdos-renyi: invalid `rng`. Should be a function.");var p,y;for(p=0;p<s;p++)d.addNode(p);if(l<=0)return d;for(p=0;p<s;p++)for(y=p+1;y<s;y++)d.type!=="directed"&&h()<l&&d.addUndirectedEdge(p,y),d.type!=="undirected"&&(h()<l&&d.addDirectedEdge(p,y),h()<l&&d.addDirectedEdge(y,p));return d}function r(o,a){if(!n(o))throw new Error("graphology-generators/random/erdos-renyi: invalid Graph constructor.");var s=a.order,l=a.probability,h=a.rng||Math.random,d=new o;if(typeof a.approximateSize=="number"&&(l=e(d.type,!1,s,a.approximateSize)),typeof s!="number"||s<=0)throw new Error("graphology-generators/random/erdos-renyi: invalid `order`. Should be a positive number.");if(typeof l!="number"||l<0||l>1)throw new Error("graphology-generators/random/erdos-renyi: invalid `probability`. Should be a number between 0 and 1. Or maybe you gave an `approximateSize` exceeding the graph's density.");if(typeof h!="function")throw new Error("graphology-generators/random/erdos-renyi: invalid `rng`. Should be a function.");for(var p=0;p<s;p++)d.addNode(p);if(l<=0)return d;var y=-1,v=Math.log(1-l),m,E;if(d.type!=="undirected")for(E=0;E<s;){for(m=Math.log(1-h()),y+=1+(m/v|0),E===y&&y++;E<s&&s<=y;)y-=s,E++,E===y&&y++;E<s&&d.addDirectedEdge(E,y)}if(y=-1,d.type!=="directed")for(E=1;E<s;){for(m=Math.log(1-h()),y+=1+(m/v|0);y>=E&&E<s;)y-=E,E++;E<s&&d.addUndirectedEdge(E,y)}return d}return t.sparse=r,bo=t,bo}var wo,ic;function Fm(){if(ic)return wo;ic=1;var n=bt();return wo=function(t,r){if(!n(t))throw new Error("graphology-generators/random/girvan-newman: invalid Graph constructor.");var o=r.zOut,a=r.rng||Math.random;if(typeof o!="number")throw new Error("graphology-generators/random/girvan-newman: invalid `zOut`. Should be a number.");if(typeof a!="function")throw new Error("graphology-generators/random/girvan-newman: invalid `rng`. Should be a function.");var s=o/96,l=(16-s*96)/31,h=new t,d,p,y;for(p=0;p<128;p++)h.addNode(p);for(p=0;p<128;p++)for(y=p+1;y<128;y++)d=a(),p%4===y%4?d<l&&h.addEdge(p,y):d<s&&h.addEdge(p,y);return h},wo}var oc;function jm(){return oc||(oc=1,qr.clusters=Rm(),qr.erdosRenyi=qm(),qr.girvanNewman=Fm()),qr}var Eo=jm(),St={},xo,ac;function Bm(){return ac||(ac=1,xo=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,o,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(!n(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;for(o of e.entries())if(!n(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[o]))return!1;for(o=r;o--!==0;){var s=a[o];if(!n(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}),xo}var sc;function Um(){if(sc)return St;sc=1;var n=Bm(),e=Symbol("size");function t(p,y){var v=p.length,m=y.length;if(v!==m)return!1;var E,_,A,C,k=new Set;e:for(A=0;A<v;A++){for(E=p[A],C=0;C<m;C++)if(!k.has(C)&&(_=y[C],n(E,_))){k.add(C);continue e}return!1}return!0}function r(p,y){if(p[e]!==y[e])return!1;for(var v in p)if(!t(p[v],y[v]))return!1;return!0}function o(p,y){var v={},m;return p.forEachOutEdge(y,function(E,_,A,C){m=v[C]||0,m++,v[C]=m}),v}function a(p,y){var v={},m;return p.forEachUndirectedEdge(y,function(E,_,A,C){C=y===A?C:A,!(y>C)&&(m=v[C]||0,m++,v[C]=m)}),v}function s(p,y){var v={};v[e]=0;var m;return p.forEachOutEdge(y,function(E,_,A,C){m=v[C],m||(m=[],v[e]+=1,v[C]=m),m.push(_)}),v}function l(p,y){var v={};v[e]=0;var m;return p.forEachUndirectedEdge(y,function(E,_,A,C){C=y===A?C:A,!(y>C)&&(m=v[C],m||(m=[],v[e]+=1,v[C]=m),m.push(_))}),v}function h(p,y,v){return y===v?!0:y.order!==v.order?!1:y.everyNode(function(m,E){return v.hasNode(m)?p?n(E,v.getNodeAttributes(m)):!0:!1})}function d(p,y,v,m){if(v===m)return!0;if(y){if(v.type==="directed"&&m.type==="undirected"||v.type==="undirected"&&m.type==="directed")return!1}else if(v.type!==m.type||v.allowSelfLoops!==m.allowSelfLoops||v.multi!==m.multi)return!1;if(v.directedSize!==m.directedSize||v.undirectedSize!==m.undirectedSize||!h(p,v,m))return!1;var E=!1,_=!1;if(!v.multi&&!m.multi){if(E=v.everyDirectedEdge(function(k,M,x,N){return m.hasDirectedEdge(x,N)?p?n(v.getDirectedEdgeAttributes(x,N),m.getDirectedEdgeAttributes(x,N)):!0:!1}),!E||(_=v.everyUndirectedEdge(function(k,M,x,N){return m.hasUndirectedEdge(x,N)?p?n(v.getUndirectedEdgeAttributes(x,N),m.getUndirectedEdgeAttributes(x,N)):!0:!1}),!_))return!1}else{var A=p?s:o,C=p?r:n;if(E=v.everyNode(function(k){var M=A(v,k),x=A(m,k);return C(M,x)}),!E||(A=p?l:a,_=v.everyNode(function(k){var M=A(v,k),x=A(m,k);return C(M,x)}),!_))return!1}return!0}return St.isGraph=Ae(),St.isGraphConstructor=bt(),St.haveSameNodes=h.bind(null,!1),St.haveSameNodesDeep=h.bind(null,!0),St.areSameGraphs=d.bind(null,!1,!1),St.areSameGraphsDeep=d.bind(null,!0,!1),St.haveSameEdges=d.bind(null,!1,!0),St.haveSameEdgesDeep=d.bind(null,!0,!0),St}var _o,uc;function Hm(){return uc||(uc=1,_o=Um()),_o}var Sa=Hm(),cc=["0111111110111100010101000000000100","1011000100000100010101000000001000","1101000111000100000000000001100010","1110000100001100000000000000000000","1000001000100000000000000000000000","1000001000100000100000000000000000","1000110000000000100000000000000000","1111000000000000000000000000000000","1010000000000000000000000000001011","0010000000000000000000000000000001","1000110000000000000000000000000000","1000000000000000000000000000000000","1001000000000000000000000000000000","1111000000000000000000000000000001","0000000000000000000000000000000011","0000000000000000000000000000000011","0000011000000000000000000000000000","1100000000000000000000000000000000","0000000000000000000000000000000011","1100000000000000000000000000000001","0000000000000000000000000000000011","1100000000000000000000000000000000","0000000000000000000000000000000011","0000000000000000000000000101010011","0000000000000000000000000101000100","0000000000000000000000011000000100","0000000000000000000000000000010001","0010000000000000000000011000000001","0010000000000000000000000000000101","0000000000000000000000010010000011","0100000010000000000000000000000011","1000000000000000000000001100100011","0010000010000011001010110000011101","0000000011000111001110110011111110"],Wm=new Set([0,1,2,3,4,5,6,7,8,10,11,12,13,16,17,19,21]);function Km(n,e={}){if(!Sa.isGraphConstructor(n))throw new Error("graphology-generators/social/karate: invalid Graph constructor.");for(var t=new n(e),r,o=0;o<34;o++)r=Wm.has(o)?"Mr. Hi":"Officer",t.addNode(o,{club:r});var a,s,l,h,d,p;for(l=0,d=cc.length;l<d;l++)for(a=cc[l].split(""),h=l+1,p=a.length;h<p;h++)s=+a[h],s&&t.addEdgeWithKey(l+"->"+h,l,h);return t}var So=[[0,1],[2,3],[2,4],[2,5],[1,5],[1,6],[1,7],[1,8],[1,9],[9,10],[3,4],[3,11],[4,6],[4,11],[6,7],[7,12],[8,13],[8,12],[11,12],[12,14]];function Xm(n,e={}){if(!Sa.isGraphConstructor(n))throw new Error("graphology-generators/social/florentine-families: invalid Graph constructor.");var t=new n(e),r,o;for(r=0,o=So.length;r<o;r++)t.mergeEdge(So[r][0],So[r][1]);return t}var st={},Ao,lc;function Ym(){if(lc)return Ao;lc=1;var n=Ae();return Ao=function(t){if(!n(t))throw new Error("graphology-utils/infer-multi: expecting a valid graphology instance.");if(!t.multi||t.order===0||t.size<2)return!1;var r=!1,o,a,s,l;return t.forEachAssymetricAdjacencyEntry(function(h,d,p,y,v,m,E){if(!r){if(E&&h>d&&(l=d,d=h,h=l),h===o&&d===a&&E===s){r=!0;return}o=h,a=d,s=E}}),r},Ao}var ko,dc;function Vm(){return dc||(dc=1,ko=function(e,t){if(t.length!==0){var r,o,a,s,l;for(a=0,l=t.length;a<l;a++)for(r=t[a],s=a+1;s<l;s++)o=t[s],e.mergeEdge(r,o)}}),ko}var Co,hc;function Qm(){return hc||(hc=1,Co=function(e,t){if(t.length!==0){var r,o,a,s;if(e.mergeNode(t[0]),t.length!==1){for(a=1,s=t.length;a<s;a++)r=t[a-1],o=t[a],e.mergeEdge(r,o);e.mergeEdge(o,t[0])}}}),Co}var Do,fc;function Zm(){return fc||(fc=1,Do=function(e,t){if(t.length!==0){var r,o,a,s;for(e.mergeNode(t[0]),a=1,s=t.length;a<s;a++)r=t[a-1],o=t[a],e.mergeEdge(r,o)}}),Do}var No,pc;function Jm(){return pc||(pc=1,No=function(e,t){if(t.length!==0){var r,o,a,s=t[0];for(e.mergeNode(s),o=1,a=t.length;o<a;o++)r=t[o],e.mergeEdge(s,r)}}),No}var Io,gc;function e0(){if(gc)return Io;gc=1;var n=qt().copyEdge;return Io=function(t,r,o){typeof r>"u"&&(r={}),typeof o>"u"&&(o={});var a=t.nullCopy();t.forEachNode(function(h,d){var p=r[h];typeof p>"u"&&(p=h),a.addNode(p,d)});var s,l;return t.forEachAssymetricAdjacencyEntry(function(h,d,p,y,v,m,E){h!==s&&(s=h,l=r[h],typeof l>"u"&&(l=h));var _=r[d];typeof _>"u"&&(_=d);var A=o[v];typeof A>"u"&&(A=v),n(a,E,A,l,_,m)}),a},Io}var Mo,yc;function t0(){if(yc)return Mo;yc=1;var n=qt().copyEdge;return Mo=function(t,r,o){var a=t.nullCopy();t.forEachNode(function(h,d){var p=r?r(h,d):h;a.addNode(p,d)});var s,l;return t.forEachAssymetricAdjacencyEntry(function(h,d,p,y,v,m,E){h!==s&&(s=h,l=r?r(h,p):h);var _=r?r(d,y):d,A=o?o(v,m,h,d,p,y,E):v;n(a,E,A,l,_,m)}),a},Mo}var vc;function r0(){return vc||(vc=1,st.inferMulti=Ym(),st.inferType=_a(),st.isGraph=Ae(),st.isGraphConstructor=bt(),st.mergeClique=Vm(),st.mergeCycle=Qm(),st.mergePath=Zm(),st.mergeStar=Jm(),st.renameGraphKeys=e0(),st.updateGraphKeys=t0()),st}var Lo,mc;function n0(){return mc||(mc=1,Lo=r0()),Lo}var i0=n0(),bc=[[0,1,2,3,4],[1,0,5,6],[2,0,3,4],[3,0,1,2,5,4,6],[5,1,3,6],[4,0,2,3,6,7],[6,1,3,5,4,7],[7,4,6,8],[8,7,9],[9,8]];function o0(n,e={}){if(!Sa.isGraphConstructor(n))throw new Error("invalid Graph constructor.");var t=new n(e),r,o;for(r=0,o=bc.length;r<o;r++)i0.mergeStar(t,bc[r]);return t}const a0={stars:[{id:0,label:"Hamal",ra:"02 08 34.7",dec:"23 34 50.5",magnitude:2.17},{id:1,label:"Sheratan",ra:"01 56 01.0",dec:"20 55 48.5",magnitude:2.7},{id:2,label:"Gamma",ra:"01 54 53.8",dec:"19 24 58.7",magnitude:3.84},{id:3,label:"41 Arietis",ra:"02 51 27.2",dec:"27 21 50.6",magnitude:3.58}],edges:[[0,1],[1,2],[0,3]]},s0={stars:[{id:0,label:"Aldebaran",ra:"04 37 21.6",dec:"16 33 34.5",magnitude:1},{id:1,label:"Elnath",ra:"05 26 17.5",dec:"28 36 27.0",magnitude:1.65},{id:2,label:"Zeta",ra:"05 37 38.7",dec:"21 08 33.0",magnitude:2.97},{id:3,label:"Theta2",ra:"04 30 05.6",dec:"15 55 34.7",magnitude:3.45},{id:4,label:"Lambda",ra:"04 02 04.1",dec:"12 33 38.8",magnitude:3.38},{id:5,label:"Omicron",ra:"03 26 09.5",dec:"09 06 59.4",magnitude:3.77},{id:6,label:"Gamma",ra:"04 21 13.2",dec:"15 41 16.8",magnitude:3.8},{id:7,label:"Delta",ra:"04 24 22.8",dec:"17 36 04.5",magnitude:3.92},{id:8,label:"Delta3",ra:"04 26 56.4",dec:"17 59 06.4",magnitude:4.31},{id:9,label:"Ain",ra:"04 30 04.9",dec:"19 14 09.9",magnitude:3.69},{id:10,label:"Tau",ra:"04 43 45.1",dec:"23 00 19.2",magnitude:4.22},{id:11,label:"Atlas",ra:"03 50 39.0",dec:"24 07 49.6",magnitude:4.22}],edges:[[0,3],[0,2],[6,4],[4,5],[3,6],[6,7],[8,7],[8,9],[9,0],[9,10],[1,10],[11,7]]},u0={stars:[{id:0,label:"Castor",ra:"07 36 12.8",dec:"31 50 01.2",magnitude:1.58},{id:1,label:"Pollux",ra:"07 46 52.0",dec:"27 57 57.2",magnitude:1.29},{id:2,label:"Kappa",ra:"07 45 58.6",dec:"24 20 15.9",magnitude:3.72},{id:3,label:"Upsilon",ra:"07 37 29.0",dec:"26 50 24.6",magnitude:4.16},{id:4,label:"Iota",ra:"07 27 17.9",dec:"27 44 54.9",magnitude:3.94},{id:5,label:"Tau",ra:"07 12 44.9",dec:"30 12 16.7",magnitude:4.53},{id:6,label:"Theta",ra:"06 54 27.2",dec:"33 55 55.1",magnitude:3.63},{id:7,label:"Wasat",ra:"07 21 38.1",dec:"21 56 09.7",magnitude:3.59},{id:8,label:"Mekbuda",ra:"07 05 36.5",dec:"20 32 00.0",magnitude:4.16},{id:9,label:"Alhena",ra:"06 39 10.1",dec:"16 22 38.5",magnitude:1.92},{id:10,label:"Lambda",ra:"07 19 32.8",dec:"16 29 40.3",magnitude:3.61},{id:11,label:"Xi",ra:"06 46 42.4",dec:"12 52 04.2",magnitude:3.44},{id:12,label:"Mebsuta",ra:"06 45 29.1",dec:"25 06 23.7",magnitude:3.19},{id:13,label:"Nu",ra:"06 30 27.6",dec:"20 11 46.3",magnitude:4.09},{id:14,label:"Tejat",ra:"06 24 29.2",dec:"22 30 03.1",magnitude:2.91},{id:15,label:"Propus",ra:"06 16 24.0",dec:"22 29 58.9",magnitude:3.28},{id:16,label:"1",ra:"06 05 39.1",dec:"23 15 43.8",magnitude:4.31}],edges:[[0,5],[1,3],[3,2],[3,4],[4,5],[5,6],[3,7],[7,8],[7,10],[8,9],[10,11],[5,12],[12,13],[12,14],[14,15],[15,16]]},c0={stars:[{id:0,label:"Acubens",ra:"08 59 52.7",dec:"11 45 32.4",magnitude:4.28},{id:1,label:"Beta",ra:"08 17 53.5",dec:"09 06 24.1",magnitude:3.66},{id:2,label:"Asellus Australis",ra:"08 46 07.7",dec:"18 03 39.9",magnitude:4.09},{id:3,label:"Asellus Borealis",ra:"08 44 45.4",dec:"21 22 39.2",magnitude:4.66},{id:4,label:"Chi",ra:"08 21 36.4",dec:"27 08 10.9",magnitude:5.22},{id:5,label:"Iota",ra:"08 48 14.1",dec:"28 40 04.4",magnitude:4.19}],edges:[[0,2],[1,2],[2,3],[3,4],[3,5]]},l0={stars:[{id:0,label:"Regulus",ra:"10 09 44.0",dec:"11 50 33.1",magnitude:1.32},{id:1,label:"Algieba",ra:"10 21 22.9",dec:"19 42 46.3",magnitude:2.16},{id:2,label:"Zosma",ra:"11 15 28.3",dec:"20 23 02.6",magnitude:2.58},{id:3,label:"Adhafera",ra:"10 18 06.7",dec:"23 17 27.1",magnitude:3.5},{id:4,label:"Denebola",ra:"11 50 22.2",dec:"14 25 44.7",magnitude:2.16},{id:5,label:"Chertan",ra:"11 15 35.1",dec:"15 17 24.1",magnitude:3.33},{id:6,label:"Eta",ra:"10 08 43.5",dec:"16 38 18.8",magnitude:3.5},{id:7,label:"Rasalas",ra:"09 54 12.9",dec:"25 53 16.1",magnitude:4.03},{id:8,label:"Epsilon",ra:"09 47 18.0",dec:"23 39 27.6",magnitude:3.11}],edges:[[1,3],[2,5],[5,4],[1,6],[2,1],[6,0],[0,5],[3,7],[7,8],[2,4]]},d0={stars:[{id:0,label:"Nu",ra:"11 47 10.7",dec:"06 23 09.0",magnitude:4.13},{id:1,label:"Zaniah",ra:"12 21 13.2",dec:"-00 48 34.3",magnitude:3.89},{id:2,label:"Porrima",ra:"12 42 57.7",dec:"-01 35 23.7",magnitude:2.81},{id:3,label:"Spica",ra:"13 26 32.8",dec:"-11 17 43.6",magnitude:.89},{id:4,label:"Kappa",ra:"14 14 15.9",dec:"-10 23 36.5",magnitude:4.31},{id:5,label:"Syrma",ra:"14 17 21.6",dec:"-06 07 24.0",magnitude:4.16},{id:6,label:"Mu",ra:"14 44 24.8",dec:"-05 46 13.4",magnitude:3.95},{id:7,label:"109",ra:"14 47 32.8",dec:"01 47 01.4",magnitude:3.73},{id:8,label:"Tau",ra:"14 02 57.3",dec:"01 25 10.9",magnitude:4.25},{id:9,label:"Heze",ra:"13 36 00.2",dec:"-00 43 38.6",magnitude:3.41},{id:10,label:"Delta",ra:"12 56 53.9",dec:"03 15 28.1",magnitude:3.44},{id:11,label:"Vindemiatrix",ra:"13 03 27.4",dec:"10 49 15.5",magnitude:2.98}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[7,8],[8,9],[9,10],[10,11],[2,10],[3,9]]},h0={stars:[{id:0,label:"Zubenelgenubi II",ra:"14 52 17.9",dec:"-16 08 54.7",magnitude:2.78},{id:1,label:"Sigma",ra:"15 05 34.3",dec:"-25 22 56.3",magnitude:3.3},{id:2,label:"Zubeneschamali",ra:"15 18 23.1",dec:"-09 28 41.6",magnitude:2.56},{id:3,label:"Gamma",ra:"15 36 57.5",dec:"-14 52 31.6",magnitude:4.06},{id:4,label:"Theta",ra:"15 55 16.9",dec:"-16 48 17.5",magnitude:4.28},{id:5,label:"Upsilon",ra:"15 38 34.7",dec:"-28 13 09.8",magnitude:3.73}],edges:[[0,1],[0,2],[2,3],[3,4],[2,1],[1,5]]},f0={stars:[{id:0,label:"Acrab",ra:"16 06 55.3",dec:"-19 52 32.6",magnitude:2.59},{id:1,label:"Dschubba",ra:"16 01 50.6",dec:"-22 41 40.4",magnitude:2.25},{id:2,label:"Pi",ra:"16 00 23.8",dec:"-26 11 14.7",magnitude:2.81},{id:3,label:"Antares",ra:"16 30 58.3",dec:"-26 29 18.3",magnitude:.97},{id:4,label:"Tau",ra:"16 37 28.1",dec:"-28 16 06.8",magnitude:2.73},{id:5,label:"Epsilon",ra:"16 51 48.9",dec:"-34 20 18.8",magnitude:2.45},{id:6,label:"Mu1",ra:"16 53 35.8",dec:"-38 05 23.0",magnitude:2.92},{id:7,label:"Zeta2",ra:"16 56 22.6",dec:"-42 24 11.1",magnitude:3.75},{id:8,label:"Eta",ra:"17 13 58.6",dec:"-43 16 14.8",magnitude:3.41},{id:9,label:"Sargas",ra:"17 39 08.6",dec:"-43 00 43.4",magnitude:1.92},{id:10,label:"Iota1",ra:"17 49 21.5",dec:"-40 08 06.6",magnitude:3.09},{id:11,label:"Kappa",ra:"17 44 14.6",dec:"-39 02 29.6",magnitude:2.31},{id:12,label:"Shaula",ra:"17 35 19.9",dec:"-37 07 15.9",magnitude:1.52},{id:13,label:"Lesath",ra:"17 32 29.4",dec:"-37 18 53.3",magnitude:2.59}],edges:[[0,3],[1,3],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[11,12]]},p0={stars:[{id:0,label:"51",ra:"17 22 58.0",dec:"-23 58 57.0",magnitude:4.78},{id:1,label:"Sabik",ra:"17 11 50.2",dec:"-15 45 26.7",magnitude:2.44},{id:2,label:"Zeta",ra:"16 38 33.8",dec:"-10 37 12.4",magnitude:2.56},{id:3,label:"Yed",ra:"16 19 40.3",dec:"-04 45 23.3",magnitude:3.38},{id:4,label:"Kappa",ra:"16 58 52.5",dec:"09 19 55.5",magnitude:3.36},{id:5,label:"Resalhague",ra:"17 36 06.9",dec:"12 32 15.6",magnitude:2.13},{id:6,label:"Cabalrai",ra:"17 44 43.7",dec:"04 33 12.4",magnitude:2.92},{id:7,label:"Gaia DR2",ra:"15 50 57.4",dec:"-03 30 35.9",magnitude:3.33},{id:8,label:"Epsilon",ra:"15 52 05.6",dec:"04 23 55.1",magnitude:3.75},{id:9,label:"Unukalhai",ra:"15 45 31.8",dec:"06 20 34.7",magnitude:2.8},{id:10,label:"Delta A",ra:"15 36 01.6",dec:"10 27 03.7",magnitude:3.86},{id:11,label:"Beta",ra:"15 47 22.3",dec:"15 20 20.6",magnitude:3.67},{id:12,label:"Gamma",ra:"15 57 38.2",dec:"15 34 31.3",magnitude:3.94},{id:13,label:"Kappa",ra:"15 49 53.7",dec:"18 03 34.6",magnitude:4.19},{id:14,label:"Nu",ra:"17 22 15.5",dec:"-12 52 26.5",magnitude:4.34},{id:15,label:"Xi",ra:"17 39 02.5",dec:"-15 24 56.5",magnitude:3.59},{id:16,label:"Omicron",ra:"17 42 50.5",dec:"-12 53 25.2",magnitude:4.25},{id:17,label:"Eta",ra:"18 22 37.2",dec:"-02 53 41.5",magnitude:3.39},{id:18,label:"Alya",ra:"18 57 28.5",dec:"04 13 59.3",magnitude:4.66}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,1],[14,15],[15,16],[16,17],[17,18],[7,8],[8,9],[9,10],[10,11],[11,12],[12,13],[13,11]]},g0={stars:[{id:0,label:"Beta2",ra:"19 25 02.3",dec:"-44 45 00.2",magnitude:4.34},{id:1,label:"Rukbat",ra:"19 25 37.9",dec:"-40 34 00.1",magnitude:3.92},{id:2,label:"Iota",ra:"19 56 59.7",dec:"-41 48 00.9",magnitude:4.25},{id:3,label:"Theta1",ra:"20 01 22.3",dec:"-35 12 25.3",magnitude:4.28},{id:4,label:"62",ra:"20 04 12.2",dec:"-27 38 22.1",magnitude:4.44},{id:5,label:"h2",ra:"19 38 14.3",dec:"-24 49 40.7",magnitude:4.56},{id:6,label:"Tau",ra:"19 08 30.9",dec:"-27 37 59.7",magnitude:3.47},{id:7,label:"Nunki",ra:"18 56 49.9",dec:"-26 15 54.9",magnitude:2},{id:8,label:"Xi2",ra:"18 59 14.2",dec:"-21 04 26.3",magnitude:3.69},{id:9,label:"Omicron",ra:"19 06 11.7",dec:"-21 42 17.7",magnitude:3.91},{id:10,label:"43",ra:"19 19 06.6",dec:"-18 54 31.3",magnitude:5.03},{id:11,label:"Rho1",ra:"19 23 08.0",dec:"-17 48 01.9",magnitude:3.98},{id:12,label:"Eta",ra:"18 19 20.5",dec:"-36 45 10.2",magnitude:3.14},{id:13,label:"Kaus Australis",ra:"18 25 51.1",dec:"-34 22 17.9",magnitude:1.8},{id:14,label:"Ascella",ra:"19 04 13.1",dec:"-29 50 36.0",magnitude:2.61},{id:15,label:"Phi",ra:"18 47 14.1",dec:"-26 57 52.7",magnitude:3.13},{id:16,label:"Kaus Media",ra:"18 22 36.8",dec:"-29 49 00.8",magnitude:2.86},{id:17,label:"Alnsal",ra:"18 07 26.2",dec:"-30 25 23.7",magnitude:3.13},{id:18,label:"3",ra:"17 49 09.4",dec:"-27 50 24.9",magnitude:4.66},{id:19,label:"Kaus Borealis",ra:"18 29 32.0",dec:"-25 24 28.0",magnitude:2.97},{id:20,label:"Mu",ra:"18 15 16.7",dec:"-21 03 09.9",magnitude:3.86},{id:21,label:"HD 180885",ra:"19 21 20.2",dec:"-35 22 27.8",magnitude:5.53},{id:22,label:"V4089",ra:"19 35 52.0",dec:"-39 58 43.5",magnitude:5.91}],edges:[[0,1],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[12,13],[16,17],[17,18],[19,20],[7,15],[6,14],[15,19],[16,19],[14,21],[5,21],[2,22],[1,21],[21,22],[13,16],[13,17],[15,14],[15,16]]},y0={stars:[{id:0,label:"Algedi",ra:"20 19 26.8",dec:"-12 28 05.0",magnitude:3.73},{id:1,label:"Dabih",ra:"20 22 25.3",dec:"-14 42 10.1",magnitude:3.2},{id:2,label:"Psi",ra:"20 47 34.8",dec:"-25 10 49.4",magnitude:4.22},{id:3,label:"Omega",ra:"20 53 18.9",dec:"-26 49 29.2",magnitude:4.22},{id:4,label:"Theta",ra:"21 07 21.2",dec:"-17 08 01.0",magnitude:4.06},{id:5,label:"Zeta",ra:"21 28 05.7",dec:"-22 18 09.6",magnitude:3.92},{id:6,label:"Iota",ra:"21 23 38.3",dec:"-16 43 41.4",magnitude:4.44},{id:7,label:"Nashira",ra:"21 41 28.5",dec:"-16 32 58.0",magnitude:3.77},{id:8,label:"Deneb",ra:"21 48 25.1",dec:"-16 00 50.3",magnitude:2.94},{id:9,label:"Nu",ra:"20 22 03.4",dec:"-12 40 51.8",magnitude:4.72},{id:10,label:"Sigma",ra:"20 20 50.5",dec:"-19 02 25.9",magnitude:5.41}],edges:[[0,1],[1,2],[3,4],[4,1],[4,5],[5,6],[4,6],[6,7],[7,8],[1,9],[1,10]]},v0={stars:[{id:0,label:"c2",ra:"23 10 46.4",dec:"-21 02 11.8",magnitude:3.84},{id:1,label:"Skat",ra:"22 55 58.3",dec:"-15 41 17.0",magnitude:3.28},{id:2,label:"Tua",ra:"22 50 54.6",dec:"-13 27 39.6",magnitude:4.13},{id:3,label:"Sigma",ra:"22 31 57.9",dec:"-10 33 01.7",magnitude:4.81},{id:4,label:"Ancha",ra:"22 18 09.0",dec:"-07 39 34.2",magnitude:4.31},{id:5,label:"Sadalmelik",ra:"22 07 03.9",dec:"-00 11 58.6",magnitude:3.09},{id:6,label:"Sadachbia",ra:"22 22 56.6",dec:"-01 15 44.7",magnitude:3.83},{id:7,label:"Zeta",ra:"22 30 06.8",dec:"00 06 25.3",magnitude:3.73},{id:8,label:"Eta",ra:"22 36 38.2",dec:"00 00 37.0",magnitude:4},{id:9,label:"Lambda",ra:"22 53 54.9",dec:"-07 26 50.0",magnitude:3.8},{id:10,label:"Psi1",ra:"23 17 11.7",dec:"-08 57 07.4",magnitude:4.41},{id:11,label:"b1",ra:"23 24 16.6",dec:"-19 57 51.0",magnitude:4.09},{id:12,label:"Iota",ra:"22 07 47.0",dec:"-13 44 55.3",magnitude:4.25},{id:13,label:"Sadalsuud",ra:"21 32 52.4",dec:"-05 27 43.9",magnitude:3.03},{id:14,label:"Albali",ra:"20 49 01.9",dec:"-09 24 18.4",magnitude:3.78}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[4,12],[13,14],[5,13]]},m0={stars:[{id:0,label:"Upsilon",ra:"25 20 50.0",dec:"27 23 43.0",magnitude:4.75},{id:1,label:"Sigma",ra:"25 04 10.7",dec:"31 56 17.7",magnitude:5.47},{id:2,label:"Phi",ra:"25 15 06.0",dec:"24 42 57.1",magnitude:4.81},{id:3,label:"Eta",ra:"25 32 49.0",dec:"15 28 27.7",magnitude:3.78},{id:4,label:"Omicron",ra:"25 46 42.6",dec:"09 16 58.9",magnitude:4.41},{id:5,label:"Alrescha",ra:"26 03 20.2",dec:"02 53 02.2",magnitude:3.81},{id:6,label:"Xi",ra:"25 54 50.8",dec:"03 18 37.5",magnitude:4.75},{id:7,label:"Nu",ra:"25 42 43.7",dec:"05 36 49.0",magnitude:4.56},{id:8,label:"Mu",ra:"25 31 29.4",dec:"06 16 19.8",magnitude:4.97},{id:9,label:"Epsilon",ra:"25 04 14.1",dec:"08 01 26.9",magnitude:4.41},{id:10,label:"Delta",ra:"24 49 58.4",dec:"07 43 13.8",magnitude:4.53},{id:11,label:"41",ra:"24 21 52.7",dec:"08 19 42.0",magnitude:5.53},{id:12,label:"Omega",ra:"24 00 35.3",dec:"07 00 03.0",magnitude:4.09},{id:13,label:"Iota",ra:"23 41 13.8",dec:"05 45 38.8",magnitude:4.22},{id:14,label:"Theta",ra:"23 29 13.8",dec:"06 30 54.9",magnitude:4.44},{id:15,label:"Gamma",ra:"23 18 27.4",dec:"03 25 04.4",magnitude:3.84},{id:16,label:"Kappa",ra:"23 28 12.5",dec:"01 23 29.7",magnitude:4.94},{id:17,label:"Lambda",ra:"23 43 18.9",dec:"01 55 00.3",magnitude:4.53}],edges:[[0,1],[1,2],[0,2],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[11,12],[12,13],[13,14],[14,15],[15,16],[16,17],[17,13]]},b0={aries:a0,taurus:s0,gemini:u0,cancer:c0,leo:l0,virgo:d0,libra:h0,scorpius:f0,ophiuchus:p0,sagittarius:g0,capricornus:y0,aquarius:v0,pisces:m0};class w0{constructor(e){this.graphManager=e,this.settings=e.settings,this.layout=e.layout}load(e){const t=b0[e.toLowerCase()];t?(this.graphManager.graph=S0(e,t.stars,t.edges,this.graphManager.graphClass[this.settings.type]),this.layout.applyLayout("rotate180")):console.warn(`Constellation "${e}" not found.`)}aries(){this.load("aries")}taurus(){this.load("taurus")}gemini(){this.load("gemini")}cancer(){this.load("cancer")}leo(){this.load("leo")}virgo(){this.load("virgo")}libra(){this.load("libra")}scorpius(){this.load("scorpius")}ophiuchus(){this.load("ophiuchus")}sagittarius(){this.load("sagittarius")}capricornus(){this.load("capricornus")}aquarius(){this.load("aquarius")}pisces(){this.load("pisces")}orion(){this.load("orion")}}function E0(n=3){return Math.pow(.8,n)}function x0(n){const[e,t,r]=n.split(" ").map(parseFloat);return(e+t/60+r/3600)*15}function _0(n){const e=n.trim().startsWith("-")?-1:1,t=n.trim().replace("+","").replace("-","").split(" ").map(parseFloat),[r,o,a]=t;return e*(r+o/60+a/3600)}function S0(n,e,t,r){const o=new r;return e.forEach(a=>{const s=x0(a.ra),l=_0(a.dec);o.addNode(a.id,{label:a.label,x:s,y:l,magnitude:a.magnitude,size:E0(a.magnitude),desc:{name:a.label,magnitude:a.magnitude,RA:A0(a.ra),DEC:a.dec}})}),t.forEach(([a,s])=>{o.mergeEdge(a,s)}),o}function A0(n){let[e=0,t=0,r=0]=n.split(" ").map(Number);r=r%60,t=t%60,e=e%24;const o=String(e).padStart(2,"0"),a=String(t).padStart(2,"0"),s=r.toFixed(1).padStart(4,"0");return[o,a,s].join(" ")}class k0{constructor(e){this.graphManager=e,this.settings=e.settings,this.layout=e.layout,this.zodiac=new w0(e)}empty(e){this.graphManager.graph=Pt.empty(this.graphManager.graphClass[this.settings.type],Number(e)),this.layout.applyLayout("circle")}complete(e){this.graphManager.graph=Pt.complete(this.graphManager.graphClass[this.settings.type],Number(e)),this.layout.applyLayout("circle")}ladder(e){this.graphManager.graph=Pt.ladder(this.graphManager.graphClass[this.settings.type],Number(e)),this.layout.applyLayout("twoLine",{line1Count:Number(e),Y:50})}completeBipartite(e,t){this.graphManager.graph=Pt.empty(this.graphManager.graphClass[this.settings.type],Number(e)+Number(t));for(let r=0;r<Number(e);r++)for(let o=Number(e);o<Number(e)+Number(t);o++)this.graphManager.graph.addEdge(r,o);this.layout.applyLayout("twoLine",{line1Count:Number(e),Y:50})}cycle(e){this.graphManager.graph=Pt.path(this.graphManager.graphClass[this.settings.type],Number(e)),this.graphManager.graph.addEdge(0,Number(e)-1),this.layout.applyLayout("circle")}path(e){this.graphManager.graph=Pt.path(this.graphManager.graphClass[this.settings.type],Number(e)),this.layout.applyLayout("oneLine")}caveman(e,t){this.graphManager.graph=tc.caveman(this.graphManager.graphClass[this.settings.type],Number(e),Number(t)),this.layout.applyLayout("circle")}connectedCaveman(e,t){this.graphManager.graph=tc.connectedCaveman(this.graphManager.graphClass[this.settings.type],Number(e),Number(t)),this.layout.applyLayout("circle")}clusters(e,t,r){this.graphManager.graph=Eo.clusters(this.graphManager.graphClass[this.settings.type],{order:Number(e),size:Number(t),clusters:Number(r)}),this.layout.applyLayout("random")}erdosRenyi(e,t){this.graphManager.graph=Eo.erdosRenyi(this.graphManager.graphClass[this.settings.type],{order:Number(e),probability:Number(t)}),this.layout.applyLayout("circle")}girvanNewman(e){this.graphManager.graph=Eo.girvanNewman(this.graphManager.graphClass[this.settings.type],{zOut:4}),this.layout.applyLayout("circle")}krackhardtkite(){this.graphManager.graph=o0(this.graphManager.graphClass[this.settings.type]),this.layout.applyLayout("oneLine")}florentineFamilies(){this.graphManager.graph=Xm(this.graphManager.graphClass[this.settings.type]),this.layout.applyLayout("circle")}karateClub(){this.graphManager.graph=Km(this.graphManager.graphClass[this.settings.type]),this.layout.applyLayout("circle")}}const wc=document;class C0{constructor(e){this.app=e.app,this.eventBus=this.app.eventBus,this.graphManager=e,this.panel=wc.querySelector("widgets #graphs-panel"),this.ul=this.panel.querySelector("ul"),this.index=0}init(){this.listeners()}lis(e="id"){const t=this.ul.querySelectorAll("li.select");return e=="id"?[...t].map(r=>r.id.split("-")[1]):t}selectLis(e){if(this.index=e.split("-")[1],this.selectLi(this.index),this.app.keyHandler.isCtrlHold())this.graphManager.graphIndex=this.index;else{let t=this.lis().map(r=>this.graphManager.graphs[r].nodes());t=new Set(t.flat()),this.graphManager.selectAllNode(t)}}updateGraphsPanel(){this.ul.innerHTML="",this.graphManager.graphs.forEach((e,t)=>{e.getAttribute("label")==="Graph"?e.setAttribute("id",0):e.setAttribute("id",t),e.getAttribute("label")||e.setAttribute("label",`graph ${t}`);const r=wc.createElement("li");r.id=`graphs-${e.getAttribute("id")}`,r.setAttribute("name","graphs"),r.textContent=e.getAttribute("label"),this.ul.appendChild(r)})}listeners(){this.panel.addEventListener("click",e=>{e.target.id=="graphs-panel"&&this.deselectLis()})}selectLi(e){this.app.keyHandler.isCtrlHold()&&this.deselectLis();const t=this.ul.querySelector(`#graphs-${e}`);t&&t.classList.toggle("select")}deselectLis(){this.lis("node").forEach(e=>e.classList.remove("select")),this.graphManager.deselectAll()}}const Ec=document;class D0{constructor(e){this.app=e.app,this.eventBus=this.app.eventBus,this.graphManager=e,this.settings=e.settings,this.panel=Ec.querySelector("widgets #face-panel"),this.ul=this.panel.querySelector("ul"),this.index=0}init(){this.listeners(),this.events()}lis(e="id"){const t=this.ul.querySelectorAll("li.select");return e=="id"?[...t].map(r=>r.id.split("-")[1]):t}selectLis(e){const t=this.graphManager.graph,r=e.split("-")[1];t.getFaceAttributes(r),this.selectLi(r);let o=this.lis().map(a=>t.getFaceAttribute(a,"nodes"));o=new Set(o.flat()),this.graphManager.selectAllNode(o)}updateFacePanel(){this.ul.innerHTML="";const e=this.graphManager.graph;let t=1;e.forEachFace((r,o)=>{e.getFaceAttribute(r,"id")===void 0&&e.setFaceAttribute(r,"id",index),e.getFaceAttribute(r,"label")||e.setFaceAttribute(r,"label",`face ${t++}`);const a=Ec.createElement("li");a.id=`face-${r}`,a.setAttribute("name","faces"),a.setAttribute("key",r),a.textContent=e.getFaceAttribute(r,"label"),this.ul.appendChild(a)})}listeners(){this.panel.addEventListener("click",e=>{e.target.id=="face-panel"&&this.deselectLis()})}events(){this.eventBus.on("key:down",e=>{[...e.detail.key].join("")})}selectLi(e){const t=this.ul.querySelector(`#face-${e}`);if(t&&t.classList.toggle("select"),console.log(5),this.settings.colorPicker){const r=this.graphManager.graph.getFaceAttribute(e,"color"),o=this.graphManager.graph.getFaceAttribute(e,"labelColor");this.app.colorPicker.setColor("face",r),this.app.colorPicker.setColor("label",o)}}deselectLis(){this.lis("node").forEach(e=>e.classList.remove("select")),this.graphManager.deselectAll()}}class N0{constructor(e,t,r="mixed"){this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.layout=e.layout,this.generator=new k0(this),this.metric=new Fl(this),this.graphsPanel=new C0(this),this.facePanel=new D0(this),this.limit=t,this.index=0,this.cut=!1,this.graphClass={directed:Pv,undirected:Ov,mixed:Xt},this.graphIndex=0,this._graph=Pt.empty(this.graphClass[r],0),this._graph.updateAttributes(o=>({...o,label:"Graph",id:0})),this.graphs=[this._graph],this.history=[this.graphs.map(o=>o.export())],this.selectNodeIndex=0,this.selectEdgeIndex=0,this.subGraph=void 0,this.init()}init(){this.setupEventListeners(),this.graphsPanel.init(),this.facePanel.init()}get graph(){return this.graphs[this.graphIndex]}set graph(e){e.mergeAttributes(this.graphs[this.graphIndex].getAttributes()),this.graphs=[e]}addNode(e,t){this.graph.addNode(e,t),this.saveGraphState()}getHistory(){return this.history}getIndex(e){return this.history[e]??void 0}updateIndex(e){if(e<0)return console.log("Nothing to Undo..."),!1;if(e>=this.history.length)return console.log("Nothing to Redo..."),!1;this.index=e,this.graphs=[];for(const t of this.history[this.index]){const r=Pt.empty(this.graphClass[t.options.type],0);this.graphs.push(r.import(t))}return this.eventBus.emit("updateSetting",{key:"type",value:this.history[this.index][0].options.type}),this.graphIndex=0,this.graphsPanel.updateGraphsPanel(),this.facePanel.updateFacePanel(),this.settings.forceSimulation&&this.app.updateSimulation(),!0}clearTo(e="mixed"){this.eventBus.emit("updateSetting",{key:"type",value:e}),this.graph=Pt.empty(this.graphClass[e],0),this.saveGraphState()}setupEventListeners(){this.eventBus.on("redo",e=>{this.updateIndex(this.index+1)&&this.eventBus.emit("graph:updated",{type:"redo"})}),this.eventBus.on("undo",e=>{this.updateIndex(this.index-1)&&this.eventBus.emit("graph:updated",{type:"undo"})})}push(e){this.history.push(e),this.index++,this.history.length>=this.limit&&(this.history=this.history.slice(-this.limit),this.index=this.history.length-1)}saveGraphState(e=!0){this.history.length!=this.index+1&&(this.history.length=this.index+1),this.push(this.graphs.map(t=>t.export())),this.settings.saveHistory&&this.saveHistoryToLocalStorage(),this.graphsPanel.updateGraphsPanel(),this.facePanel.updateFacePanel(),e&&this.app.updateSimulation()}makeGraphComplete(e="directed"){for(let t=0;t<this.graph.order;t++)for(let r=t+1;r<this.graph.order;r++)this.graph.type=="mixed"?e=="undirected"?this.graph.mergeUndirectedEdge(t,r):this.graph.mergeDirectedEdge(t,r):this.graph.mergeEdge(t,r);this.saveGraphState()}dropSelectedNodesEdges(){const e=this.graph.getSelectedEdges(),t=this.graph.getSelectedNodes();this.graphs.forEach((r,o)=>{e.forEach(a=>{r.hasEdge(a)&&r.dropEdge(a)}),t.forEach(a=>{r.hasNode(a)&&r.dropNode(a)})}),this.saveGraphState()}connectSelectedNodes(e="directed"){this.graph.connectSelectedNodes(this.settings.edge_color,e),this.saveGraphState()}connectSelectedNodesInOrder(e="directed"){this.graph.connectSelectedNodesInOrder(this.settings.edge_color,e),this.saveGraphState()}updateSelectedNodesEdgesColor(e=!0,t=!0,r=!0,o=!0){this.graph.updateSelectedNodesColor(e?this.settings.node_color:!1,t?this.settings.stroke_color:!1,o?this.settings.label_color:!1),this.graph.updateSelectedEdgesColor(r?this.settings.edge_color:!1,o?this.settings.label_color:!1),this.saveGraphState(!1)}updateSelectedName(e){e?this.graph.updateSelectedName(e):this.graph.updateSelectedName(""),this.saveGraphState(!1)}updateSelectedInfo(e){e?this.graph.updateSelectedInfo({"":e}):this.graph.updateSelectedInfo({}),this.saveGraphState(!1)}updateSelectedWeight(e){const t=parseFloat(e);t?this.graph.updateSelectedWeight(t):this.graph.updateSelectedWeight(void 0),this.saveGraphState(!1)}deselectAll(){this.deselectAllNode(),this.deselectAllEdge()}deselectAllNode(){this.graph.updateEachNodeAttributes((e,t)=>({...t,selected:!1})),this.app.rect.scale.active=!1}deselectAllEdge(){this.graph.updateEachEdgeAttributes((e,t)=>({...t,selected:!1})),this.app.rect.scale.active=!1}selectAll(e=null){this.selectAllNode(e),this.selectAllEdge(e)}selectAllEdge(e){e||this.graph.updateEachEdgeAttributes((t,r)=>({...r,selected:r.id+1}))}selectAllNode(e){e?(this.deselectAllNode(),e.forEach(t=>{this.graph.hasNode(t)&&this.graph.updateNodeAttributes(t,r=>({...r,selected:r.id+1}))})):this.graph.updateEachNodeAttributes((t,r)=>({...r,selected:r.id+1}))}selectNode(e){this.graph.selectNode(e)}selectNextNode(){this.app.keyHandler.isShiftHold()||this.deselectAllNode(),this.selectNodeIndex=bn(this.selectNodeIndex+1,this.graph.order);const e=this.graph.nodes()[this.selectNodeIndex];this.graph.selectNode(e)}selectPerviousNode(){this.app.keyHandler.isShiftHold()||this.deselectAllNode(),this.selectNodeIndex=bn(this.selectNodeIndex-1,this.graph.order);const e=this.graph.nodes()[this.selectNodeIndex];this.graph.selectNode(e)}selectNextEdge(){this.app.keyHandler.isShiftHold()||this.deselectAllEdge(),this.selectEdgeIndex=bn(this.selectEdgeIndex+1,this.graph.size);const e=this.graph.edges()[this.selectEdgeIndex];this.graph.selectEdge(e)}selectPerviousEdge(){this.app.keyHandler.isShiftHold()||this.deselectAllEdge(),this.selectEdgeIndex=bn(this.selectEdgeIndex+1,this.graph.size);const e=this.graph.edges()[this.selectEdgeIndex];this.graph.selectEdge(e)}copySubgraph(){this.subGraph=this.graph.copySubgraph(),this.cut=!1}cutSubgraph(){this.subGraph=this.graph.cutSubgraph(),this.cut=!0}pasteSubgraph(e=!1,t={x:150,y:100}){this.subGraph=this.graph.pasteSubgraph(this.subGraph,this.cut,t),e&&this.subgraph(),this.cut=!1,this.saveGraphState()}reverseGraph(){if(this.graph.type!=="undirected"){const e=kt.reverse(this.graph);this.graph.replace(e),this.saveGraphState()}}toDirectedGraph(){if(this.graph.type!=="directed"){const e=kt.toDirected(this.graph);this.clearTo("directed"),this.graph.replace(e),this.eventBus.emit("updateSetting",{key:"type",value:"directed"}),this.saveGraphState()}}toMixedGraph(){if(this.graph.type!=="mixed"){const e=kt.toMixed(this.graph);this.clearTo("mixed"),this.graph.replace(e),this.eventBus.emit("updateSetting",{key:"type",value:"mixed"}),this.saveGraphState()}}toUndirectedGraph(){if(this.graph.type!=="undirected"){const e=kt.toUndirected(this.graph);this.clearTo("undirected"),this.graph.replace(e),this.eventBus.emit("updateSetting",{key:"type",value:"undirected"}),this.saveGraphState()}}toWeighted(){this.graph.updateEachEdgeAttributes((e,t)=>({...t,weight:1})),this.saveGraphState()}toUnweighted(){this.graph.updateEachEdgeAttributes((e,t)=>({...t,weight:void 0})),this.saveGraphState()}saveHistoryToLocalStorage(){if(!this.validateHistory(this.history))return console.warn("Cannot save: history data is invalid."),!1;try{const e=JSON.stringify(this.history);return localStorage.setItem("graphStudio-history",e),!0}catch(e){return console.error("Failed to save history to local storage:",e),!1}}loadHitoryFromLocalStorage(){const e=localStorage.getItem("graphStudio-history");if(e)try{const t=JSON.parse(e);if(this.validateHistory(t))return this.history=t,this.updateIndex(this.history.length-1),!0}catch{console.warn("Invalid JSON format in localStorage.")}}cleanLocalStorage(){localStorage.removeItem("graphStudio-history")}validateHistory(e){if(!Array.isArray(e))return console.error("Graph data must be an array."),!1;for(const t of e){const r=t[0];if(!r)return console.error(`Graph at index ${i} is missing.`),!1;if(!Array.isArray(r.nodes))return console.error(`Graph at index ${i} has invalid or missing nodes.`),!1;for(const o of r.nodes){if(typeof o.key!="string")return console.error(`Node missing or invalid key at graph ${i}.`),!1;if(typeof o.attributes!="object"||o.attributes===null)return console.error(`Node ${o.key} missing attributes at graph ${i}.`),!1;if(!("id"in o.attributes))return console.error(`Node ${o.key} missing id at graph ${i}.`),!1}if(!Array.isArray(r.edges))return console.error(`Graph at index ${i} has invalid or missing edges.`),!1;for(const o of r.edges){if(typeof o.key!="string")return console.error(`Edge missing or invalid key at graph ${i}.`),!1;if(typeof o.source!="string"||typeof o.target!="string")return console.error(`Edge ${o.key} missing or invalid source/target at graph ${i}.`),!1;if(typeof o.attributes!="object"||o.attributes===null)return console.error(`Edge ${o.key} missing attributes at graph ${i}.`),!1}}return!0}subgraph(){if(!this.graph.getSelectedNodes().length){this.metric.addHeader("Graphs"),this.metric.addInfo("Select at least one node"),this.metric.addLine();return}const t=this.graph.copySubgraph();t.removeAttribute("id"),t.removeAttribute("label"),this.graphs.push(t),t.deselectAll(),this.deselectAll(),this.saveGraphState()}addFace(){const e=this.graph.getSelectedNodes(),t=kt.subgraph(this.graph,e);this.metric._isCycle(t)&&(this.graph.addFace(e),this.saveGraphState())}}const I0="Shortcuts",M0={n:{desc:"New graph",action:"new-mixed-btn"},o:{desc:"Import graph",action:"import-graph"},s:{desc:"Scale",action:"toggle-scale-btn",value:!0},u:{desc:"Undo",action:"undo-btn"},d:{desc:"Delete",action:"remove-selection-btn"},c:{desc:"Update color",action:"color-selection-btn"},e:{desc:"Add edge",action:"add-edge-btn"},"alt+e":{desc:"Add edge",action:"add-edge-in-order-btn"},a:{desc:"All node info",action:"all-node-info-btn"},q:{desc:"Clear panel",action:"clear-info-panel-btn"},y:{desc:"Copy",action:"copy-subgraph"},x:{desc:"Cut",action:"cut-subgraph"},p:{desc:"Paste",action:"paste-subgraph"},"ctrl+p":{desc:"Paste",action:"paste-subgraph-seprate"},r:{desc:"Rename",action:"rename-btn"},i:{desc:"Info",action:"desc-btn"},w:{desc:"weight",action:"weight-btn"},f:{desc:"Force Simulation",action:"toggle-force-btn",value:!0},"ctrl+f":{desc:"Force Simulation",action:"add-face-btn"},t:{desc:"Tree",action:"toggle-tree-btn",value:!0},F5:{desc:"Reload",action:"reload"},ArrowUp:{desc:"Select all node",action:"select-all-node"},ArrowDown:{desc:"Deselect all node",action:"deselect-all-node"},ArrowRight:{desc:"Select next node",action:"select-next-node"},ArrowLeft:{desc:"Select previous node",action:"select-pervious-node"},"shift+ArrowRight":{desc:"Select next node",action:"select-next-node"},"shift+ArrowLeft":{desc:"Select previous node",action:"select-pervious-node"},shift:{desc:"Tree",action:"toggle-select-btn",value:!0},alt:{desc:"Component",action:"toggle-component-btn",value:!0},ctrl:{desc:"Panning",action:"toggle-panning-btn",value:!0},"alt+a":{desc:"All edge info",action:"all-edge-info-btn"},"alt+ArrowUp":{desc:"Select all edge",action:"select-all-edge"},"alt+ArrowDown":{desc:"Deselect all edge",action:"deselect-all-edge"},"alt+ArrowRight":{desc:"Select next edge",action:"select-next-edge"},"alt+ArrowLeft":{desc:"Select previous edge",action:"select-pervious-edge"},"shift+alt+ArrowRight":{desc:"Select next edge",action:"select-next-edge"},"shift+alt+ArrowLeft":{desc:"Select previous edge",action:"select-pervious-edge"},"ctrl+r":{desc:"Redo",action:"redo-btn"},"ctrl+s":{desc:"Export graph",action:"export-graph"},C:{desc:"Complete",action:"complete-btn"},"alt+C":{desc:"Complete",action:"complete-directed-btn"},O:{desc:"Organize circle",action:"organize-circle"},E:{desc:"Add directed edge",action:"add-directed-edge-btn"},"alt+E":{desc:"Add directed edge",action:"add-directed-edge-in-order-btn"},P:{desc:"Export PNG",action:"export-png"},"shift+C":{desc:"Complete",action:"complete-btn"},"shift+alt+C":{desc:"Complete",action:"complete-directed-btn"},"shift+O":{desc:"Organize circle",action:"organize-circle"},"shift+alt+E":{desc:"Add directed edge",action:"add-directed-edge-in-order-btn"},"shift+E":{desc:"Add directed edge",action:"add-directed-edge-btn"},"shift+P":{desc:"Export PNG",action:"export-png"},space:{desc:"Home",action:{c:{desc:"+ Color",action:{c:{desc:"Color Picker",action:"color-picker-btn"},n:{desc:"Update Node Color",action:"update-node-color"},s:{desc:"Update Stroke Color",action:"update-stroke-color"},e:{desc:"Update Edge Color",action:"update-edge-color"},l:{desc:"Update Label Color",action:"update-label-color"}}},n:{desc:"+ New Graph",action:{m:{desc:"Mixed Graph",action:"new-mixed-btn"},d:{desc:"Directed Graph",action:"new-digraph-btn"},u:{desc:"Undirected Graph",action:"new-undirected-graph-btn"}}},"":{desc:"Next Node (Alt for Edge)",action:""},"":{desc:"Pervious Node (Alt for Edge)",action:""},"":{desc:"Select all Nodes (Alt for Edges)",action:""},"":{desc:"Deselect all Nodes (Alt for Edges)",action:""}}}},Mn={desc:I0,action:M0},Ze=document;class L0{constructor(e){this.app=e,this.eventBus=e.eventBus,this.eventKeyMap={AltRight:"alt",ControlRight:"ctrl",ShiftRight:"shift",AltLeft:"alt",ControlLeft:"ctrl",ShiftLeft:"shift",Space:"space"},this.pressedKeys=new Set,this.lastChord=Mn.action.space.action,this.modalChord=Ze.querySelector(".modal-chord"),this.inputModal=Ze.querySelector(".modal-input"),this._input=!1,this.header=Ze.querySelector(".modal-chord .shortcut-chord .header"),this.fakeHeader=Ze.querySelector(".modal-chord  .shortcut-chord-fake .header"),this._Chord=Ze.querySelector(".shortcut-chord"),this.fakeChord=Ze.querySelector(".shortcut-chord-fake"),this.exceptionKey=["ArrowUp","ArrowDown","arrowLeft","ArrowRight"]}init(){this.chordGenerator(this.lastChord),Ze.addEventListener("keydown",t=>{if(t.repeat&&!this.exceptionKey.includes(t.key))return;const r=this.updatePressedKeys(t,"add");if(this._input){if(r==="Escape"&&this.toggleInput("rename",!1),r==="Enter"){const o=Ze.querySelector(".input-chord input");this.app.menu.handleMenuAction(this._input,o.value),this.toggleInput("rename",!1)}}else{this.isChordVisible()&&this.eventBus.emit("key:down",{key:this.pressedKeys});const o=this.findKey();o&&t.preventDefault(),this.action(o)}}),Ze.addEventListener("keyup",t=>{if(t.repeat&&!this.exceptionKey.includes(t.key))return;const r=this.updatePressedKeys(t,"delete");this._input||(t.preventDefault(),this.lastChord[r]&&typeof this.lastChord[r].value=="boolean"&&this.app.menu.handleMenuAction(this.lastChord[r].action,!this.lastChord[r].value)),this.eventBus.emit("key:up",{key:this.pressedKeys})});const e=Ze.querySelectorAll(".modal, .modal-chord, .modal-input");e.length>0&&e.forEach(t=>{t.addEventListener("click",r=>{r.target===t&&(t.style.display="none",this.lastChord=Mn.action,this._input=!1)})})}chordGenerator(e){const t=Ze.createElement("ul");for(const a in e){const s=e[a].desc,l=Ze.createElement("li");l.innerHTML=`
      <span class="title">${a}</span>
      <span class="arrow"></span>
      <span class="desc">${s}</span>
    `,t.appendChild(l)}const r=this._Chord.querySelector("ul");r&&this._Chord.removeChild(r);const o=this.fakeChord.querySelector("ul");o&&this.fakeChord.removeChild(o),this._Chord.appendChild(t),this.fakeChord.appendChild(t.cloneNode(!0))}action(e){const t=this.lastChord[e];t?typeof t.action=="string"?(this.app.menu.handleMenuAction(t.action,t.value),this.lastChord=Mn.action,this.toggleChord(!1)):(this.lastChord=t.action,this.chordGenerator(this.lastChord),this.toggleChord(!0)):(this.toggleChord(!1),this.lastChord=Mn.action)}toggleChord(e=!0){e?this.modalChord.style.display="flex":this.modalChord.style.display="none"}toggleInput(e="rename",t=!0){const r=Ze.querySelector(".input-chord .header"),o=Ze.querySelector(".input-chord input");switch(e){case"rename":r.textContent="Rename",o.name="rename",o.placeholder="Enter New Name ...";break;case"desc":r.textContent="Description",o.name="desc",o.placeholder="Enter New Description ...";break;case"weight":r.textContent="Weight",o.name="weight",o.placeholder="Enter New Weight ...";break}t?(this.inputModal.style.display="flex",o.focus(),this._input=e):(this.inputModal.style.display="none",this._input=!1),setTimeout(()=>{o.value=""},1)}findKey(){return Object.keys(this.lastChord).find(r=>{const o=r.split("+");return this.isCombo(...o)})}isCombo(...e){return e.every(t=>this.pressedKeys.has(t))&&this.pressedKeys.size===e.length}updatePressedKeys(e,t="add"){const r=this.eventKeyMap[e.code]||e.key;return t==="add"&&r!=="meta"?this.pressedKeys.add(r):this.pressedKeys.delete(r),r}isShiftHold(){return this.pressedKeys.has("shift")}isCtrlHold(){return this.pressedKeys.has("ctrl")}isChordVisible(){return this.modalChord.style.display!=="none"}}var rr;const br=class br{constructor(e){as(this,rr,!0);if(this.app=e,this.eventBus=e.eventBus,br.instance)return br.instance;br.instance=this,this.debounceTimer=null,this.defaultSettings={background_color:"#ffffff",colorPicker:!1,component:!1,console_panel:!0,directed:!0,directed_edge:!0,edgeLabel:!0,edge_color:"#4682b4",edge_size:2,forceSimulation:!0,grid:20,type:"mixed",grid_color:"#00000020",info_panel:!0,label_color:"#000000",label_pos:{x:0,y:0},label_size:15,node_color:"#ffffff",face_color:"#4682b455",node_radius:40,panning:!1,scale:!1,select:!1,stroke_color:"#4682b4",stroke_size:2,tools_panel:!0,tree:!0,vertexLabel:!0,faceLabel:!0,weightLabel:!0,saveHistory:!0,historyLimit:100,graphs_panel:!0,face_panel:!0},this.nightSkyTheme={background_color:"#0d1b2a",edge_color:"#60a5fa",edge_size:1,forceSimulation:!1,grid_color:"#ffffff10",label_color:"#d1d5db",label_pos:{x:-20,y:-20},node_color:"#ffffff",node_radius:10,stroke_color:"#ffffff",stroke_size:0},this.settings=this.loadFromLocalStorage(),this.registerEventListeners()}init(){sy(this.settings,this.app.canvas)}registerEventListeners(){this.eventBus.on("updateSetting",e=>{const{key:t,value:r}=e.detail;if(this.setSetting(t,r),t=="grid"){const o=document.documentElement;document.querySelector(".container").classList.toggle("grid-hidden",this.settings.grid<=2),o.style.setProperty("--grid-size",`${this.settings.grid}px`)}else t&&r!==void 0&&this.eventBus.emit("graph:updated",{type:t})}),this.eventBus.on("updateAllSettings",e=>{const t=e.detail;t&&typeof t=="object"&&this.setAllSettings(t)}),this.eventBus.on("resetSettings",()=>{this.resetToDefault()}),this.eventBus.on("toggleSetting",e=>{const{key:t,value:r}=e.detail;t&&(this.toggleSetting(t,r),(t=="vertexLabel"||t=="directed_edge"||t=="edgeLabel"||t=="weightLabel")&&this.eventBus.emit("graph:updated",{type:"vertexLabel"}))})}loadFromLocalStorage(){const e=localStorage.getItem("appSettings");if(e)try{const t=JSON.parse(e);return this.validateSettings(t)}catch{console.warn("Invalid settings in localStorage. Using defaults.")}return{...this.defaultSettings}}saveToLocalStorage(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{localStorage.setItem("appSettings",JSON.stringify(this.settings)),console.log("Settings saved to localStorage"),this.eventBus.emit("settingsChanged",this.getAllSettings())},500)}resetToDefault(){this.setAllSettings(this.defaultSettings)}getSetting(e){return this.settings[e]}getAllSettings(){return{...this.settings}}setSetting(e,t){e in this.settings?this.settings[e]!==t&&(this.settings[e]=t,this.eventBus.emit("settingChanged",{key:e,value:t}),pn(this,rr)&&this.saveToLocalStorage()):console.warn(`Setting "${e}" does not exist.`)}setAllSettings(e){Object.keys(e).forEach(t=>{t in this.settings&&(this.settings[t]=e[t])}),this.eventBus.emit("settingsChanged",this.getAllSettings()),pn(this,rr)&&this.saveToLocalStorage(),this.init(),this.app.drawGraph()}toggleSetting(e,t=null){const r=["scale","panning","select","component"];e in this.settings&&typeof this.settings[e]=="boolean"?(t===null?this.settings[e]=!this.settings[e]:this.settings[e]=t,r.includes(e)&&r.forEach(o=>{o!=e&&this.settings[e]&&(this.settings[o]=!1)}),(e==="component"&&this.settings.component||e==="scale"&&this.settings.scale||e==="panning"&&this.settings.panning)&&(this.settings.forceSimulation=!1,this.eventBus.emit("settingToggled",{key:"forceSimulation",value:this.settings.forceSimulation})),e==="forceSimulation"&&this.settings.forceSimulation&&(this.settings.component=!1,this.settings.scale=!1,this.settings.panning=!1),this.eventBus.emit("settingToggled",{key:e,value:this.settings[e]}),pn(this,rr)&&t===null&&this.saveToLocalStorage(),this.init(),this.app.widget.init()):console.warn(`Setting "${e}" does not exist or is not a boolean.`)}setAutoSave(e){ss(this,rr,e)}validateSettings(e){return Object.keys(this.defaultSettings).reduce((t,r)=>(t[r]=e&&e.hasOwnProperty(r)?e[r]:this.defaultSettings[r],t),{})}loadNightSkyTheme(){this.setAllSettings(this.nightSkyTheme)}};rr=new WeakMap,Re(br,"instance",null);let na=br;const me=document;class z0{constructor(e,t,r="menu-bar"){if(this.app=e,this.eventBus=e.eventBus,this.graphManager=e.graphManager,this.appSettings=e.appSettings,this.layout=e.layout,this.menuData=t,this.container=me.getElementById(r),!this.container){console.error("Menu container not found!");return}this.spaceEvent=new KeyboardEvent("keydown",{key:" ",code:"Space",keyCode:32,which:32,bubbles:!0})}init(){this.renderMenu(),this.attachEventListeners()}renderMenu(){this.container.innerHTML="";const e=me.createElement("ul");this.menuData.forEach(t=>{const r=this.createMenu(t);e.appendChild(r)}),this.container.appendChild(e)}createMenu(e){const t=me.createElement("li");if(e.id&&(t.id=e.id),e.title&&(t.textContent=e.title),e.submenu){const r=this.createSubmenu(e.submenu);t.appendChild(r)}return t}createSubmenu(e){const t=me.createElement("ul");return e.forEach(r=>{if(r.type==="divider"){t.appendChild(me.createElement("hr"));return}const o=me.createElement("li");if(r.id&&(o.id=r.id),r.title){const a=me.createElement("label");if(a.textContent=r.title,r.link){const s=me.createElement("a");s.href=r.link,s.target="_blank",r.label?s.textContent=r.label:(s.textContent="?",s.classList.add("border")),a.insertBefore(s,a.firstChild)}o.appendChild(a)}if(r.shortcut){const a=me.createElement("span");a.textContent=r.shortcut,o.appendChild(a)}if("check"in r&&!r.shortcut){const a=me.createElement("span");a.innerHTML="&#10004;",a.classList.add("check"),r.check||a.classList.add("hidden"),o.appendChild(a)}if(r.input)if(r.id==="import-graph")o.appendChild(this.createInput(r.input[0]));else{const a=me.createElement("div");r.input.forEach(s=>{a.appendChild(this.createInput(s))}),o.appendChild(a)}r.name&&o.setAttribute("name",r.name),r.submenu&&o.appendChild(this.createSubmenu(r.submenu)),t.appendChild(o)}),t}createInput(e){const t=me.createElement("input");return t.type=e.type||"text",t.id=e.id,"hidden"in e&&(t.hidden=e.hidden),e.name&&(t.name=e.name),e.placeholder&&(t.placeholder=e.placeholder),e.required&&(t.required=!0),["number","range","date"].includes(t.type)&&(e.min!==void 0&&(t.min=e.min),e.max!==void 0&&(t.max=e.max),e.step!==void 0&&(t.step=e.step)),e.value!==void 0&&(e.type==="checkbox"||e.type==="radio"?t.checked=e.value:t.value=e.value),t}handleMenuAction(e,t){const r={"new-mixed-btn":()=>{this.graphManager.clearTo("mixed")},"new-digraph-btn":()=>{this.graphManager.clearTo("directed")},"new-undirected-graph-btn":()=>{this.graphManager.clearTo("undirected")},"import-graph":()=>this.eventBus.emit("import"),"export-graph":()=>this.eventBus.emit("export",{type:"json"}),"export-png":()=>this.eventBus.emit("export",{type:"png"}),"default-settings-btn":()=>this.appSettings.resetToDefault(),"sky-night-theme-btn":()=>this.appSettings.loadNightSkyTheme(),reload:()=>location.reload(),"add-edge-btn":()=>this.graphManager.connectSelectedNodes("undirected"),"add-face-btn":()=>this.graphManager.addFace(),"add-edge-in-order-btn":()=>this.graphManager.connectSelectedNodesInOrder("undirected"),"add-directed-edge-btn":()=>this.graphManager.connectSelectedNodes("directed"),"add-directed-edge-in-order-btn":()=>this.graphManager.connectSelectedNodesInOrder("directed"),"remove-selection-btn":()=>this.graphManager.dropSelectedNodesEdges(),"color-selection-btn":()=>this.graphManager.updateSelectedNodesEdgesColor(!0,!0,!0,!0),"complete-btn":()=>this.graphManager.makeGraphComplete("undirected"),"complete-directed-btn":()=>this.graphManager.makeGraphComplete("directed"),"node-color":()=>this.eventBus.emit("updateSetting",{key:"node_color",value:t}),"edge-color":()=>this.eventBus.emit("updateSetting",{key:"edge_color",value:t}),"label-color":()=>this.eventBus.emit("updateSetting",{key:"label_color",value:t}),"stroke-color":()=>this.eventBus.emit("updateSetting",{key:"stroke_color",value:t}),"background-color":()=>{me.querySelector(".container").style.backgroundColor=t,this.eventBus.emit("updateSetting",{key:"background_color",value:t})},"grid-color":()=>{me.documentElement.style.setProperty("--grid-color",t),this.eventBus.emit("updateSetting",{key:"grid_color",value:t})},rename:()=>this.graphManager.updateSelectedName(t),"rename-btn":()=>this.app.keyHandler.toggleInput("rename"),desc:()=>this.graphManager.updateSelectedInfo(t),"desc-btn":()=>this.app.keyHandler.toggleInput("desc"),weight:()=>this.graphManager.updateSelectedWeight(t),"weight-btn":()=>this.app.keyHandler.toggleInput("weight"),"redo-btn":()=>this.eventBus.emit("redo"),"undo-btn":()=>this.eventBus.emit("undo"),"panel-btn":()=>this.eventBus.emit("toggleSetting",{key:"info_panel"}),"tools-btn":()=>this.eventBus.emit("toggleSetting",{key:"tools_panel"}),"graphs-btn":()=>this.eventBus.emit("toggleSetting",{key:"graphs_panel"}),"faces-btn":()=>this.eventBus.emit("toggleSetting",{key:"face_panel"}),"shortcut-chord-btn":()=>me.dispatchEvent(this.spaceEvent),"component-btn":()=>this.eventBus.emit("toggleSetting",{key:"component"}),"scale-btn":()=>this.eventBus.emit("toggleSetting",{key:"scale"}),"tree-btn":()=>this.eventBus.emit("toggleSetting",{key:"tree"}),"force-btn":()=>this.eventBus.emit("toggleSetting",{key:"forceSimulation"}),"panning-btn":()=>this.eventBus.emit("toggleSetting",{key:"panning"}),"select-btn":()=>this.eventBus.emit("toggleSetting",{key:"select"}),"toggle-component-btn":()=>this.eventBus.emit("toggleSetting",{key:"component",value:t}),"toggle-scale-btn":()=>this.eventBus.emit("toggleSetting",{key:"scale",value:t}),"toggle-tree-btn":()=>this.eventBus.emit("toggleSetting",{key:"tree",value:t}),"toggle-force-btn":()=>this.eventBus.emit("toggleSetting",{key:"forceSimulation",value:t}),"toggle-panning-btn":()=>this.eventBus.emit("toggleSetting",{key:"panning",value:t}),"toggle-select-btn":()=>this.eventBus.emit("toggleSetting",{key:"select",value:t}),"color-picker-btn":()=>this.eventBus.emit("toggleSetting",{key:"colorPicker"}),"vertex-label":()=>this.eventBus.emit("toggleSetting",{key:"vertexLabel"}),"edge-label":()=>this.eventBus.emit("toggleSetting",{key:"edgeLabel"}),"face-label":()=>this.eventBus.emit("toggleSetting",{key:"faceLabel"}),"weight-label":()=>this.eventBus.emit("toggleSetting",{key:"weightLabel"}),"vertex-size-1":()=>this.eventBus.emit("updateSetting",{key:"node_radius",value:t}),"edge-size-1":()=>this.eventBus.emit("updateSetting",{key:"edge_size",value:t}),"label-size-1":()=>this.eventBus.emit("updateSetting",{key:"label_size",value:t}),"grid-size-1":()=>this.eventBus.emit("updateSetting",{key:"grid",value:t}),"stroke-size-1":()=>this.eventBus.emit("updateSetting",{key:"stroke_size",value:t}),"save-history":()=>this.eventBus.emit("toggleSetting",{key:"saveHistory"}),"clear-histoory-btn":()=>this.graphManager.cleanLocalStorage(),"history-limit-1":()=>{this.graphManager.limit=t,this.eventBus.emit("updateSetting",{key:"historyLimit",value:t})},"basic-info-btn":()=>this.graphManager.metric.basicInfo(),"lies-on-cycle-btn":()=>this.graphManager.metric.liesOnCycle(),"list-degrees-btn":()=>this.graphManager.metric.degreeSequesnce(),"components-btn":()=>this.graphManager.metric.countComponents(),"neighbors-btn":()=>this.graphManager.metric.neighbors(),"shortest-path-btn":()=>this.graphManager.metric.shortestPath(),"density-btn":()=>this.graphManager.metric.density(),"diameter-btn":()=>this.graphManager.metric.diameter(),"eccentricity-btn":()=>this.graphManager.metric.eccentricity(),"simmelian-strength-btn":()=>this.graphManager.metric.simmelianStrength(),"betweenness-centrality-btn":()=>this.graphManager.metric.betweennessCentrality(),"closeness-centrality-btn":()=>this.graphManager.metric.closenessCentrality(),"degree-centrality-btn":()=>this.graphManager.metric.degreeCentrality(),"eigenvector-centrality-btn":()=>this.graphManager.metric.eigenvectorCentrality(),"pagerank-btn":()=>this.graphManager.metric.pagerank(),"edge-uniformity-btn":()=>this.graphManager.metric.edgeUniformity(),"neighborhood-preservation-btn":()=>this.graphManager.metric.neighborhoodPreservation(),"stress-btn":()=>this.graphManager.metric.stress(),"disparity-btn":()=>this.graphManager.metric.disparity(),"clear-info-panel-btn":()=>me.querySelector("#floating-panel .body-info").innerHTML="","all-node-info-btn":()=>this.graphManager.metric.allNodeInfo(),"all-edge-info-btn":()=>this.graphManager.metric.allEdgeInfo(),empty:()=>this.graphManager.generator.empty(me.getElementById("g-empty-1").value),"g-empty-1":()=>this.graphManager.generator.empty(t),cycle:()=>this.graphManager.generator.cycle(me.getElementById("g-cycle-1").value),"g-cycle-1":()=>this.graphManager.generator.cycle(t),path:()=>this.graphManager.generator.path(me.getElementById("g-path-1").value),"g-path-1":()=>this.graphManager.generator.path(t),ladder:()=>this.graphManager.generator.ladder(me.getElementById("g-ladder-1").value),"g-ladder-1":()=>this.graphManager.generator.ladder(t),complete:()=>this.graphManager.generator.complete(me.getElementById("g-complete-1").value),"g-complete-1":()=>this.graphManager.generator.complete(t),"complete-bipartite":()=>this.graphManager.generator.completeBipartite(me.getElementById("g-complete-bipartite-1").value,me.getElementById("g-complete-bipartite-2").value),"g-complete-bipartite-1":()=>this.graphManager.generator.completeBipartite(t,me.getElementById("g-complete-bipartite-2").value),"g-complete-bipartite-2":()=>this.graphManager.generator.completeBipartite(me.getElementById("g-complete-bipartite-1").value,t),caveman:()=>this.graphManager.generator.caveman(me.getElementById("g-caveman-1").value,me.getElementById("g-caveman-2").value),"g-caveman-1":()=>this.graphManager.generator.caveman(t,me.getElementById("g-caveman-2").value),"g-caveman-2":()=>this.graphManager.generator.caveman(me.getElementById("g-caveman-1").value,t),"connected-caveman":()=>this.graphManager.generator.connectedCaveman(me.getElementById("g-connected-caveman-1").value,me.getElementById("g-connected-caveman-2").value),"g-connected-caveman-1":()=>this.graphManager.generator.connectedCaveman(t,me.getElementById("g-connected-caveman-2").value),"g-connected-caveman-2":()=>this.graphManager.generator.connectedCaveman(me.getElementById("g-connected-caveman-1").value,t),clusters:()=>this.graphManager.generator.clusters(me.getElementById("g-clusters-1").value,me.getElementById("g-clusters-2").value,me.getElementById("g-clusters-3").value),"g-clusters-1":()=>this.graphManager.generator.clusters(t,me.getElementById("g-clusters-2").value,me.getElementById("g-clusters-3").value),"g-clusters-2":()=>this.graphManager.generator.clusters(me.getElementById("g-clusters-1").value,t,me.getElementById("g-clusters-3").value),"g-clusters-3":()=>this.graphManager.generator.clusters(me.getElementById("g-clusters-1").value,me.getElementById("g-clusters-2").value,t),"erdos-renyi":()=>this.graphManager.generator.erdosRenyi(me.getElementById("g-erdos-renyi-1").value,me.getElementById("g-erdos-renyi-2").value),"g-erdos-renyi-1":()=>this.graphManager.generator.erdosRenyi(t,me.getElementById("g-erdos-renyi-2").value),"g-erdos-renyi-2":()=>this.graphManager.generator.erdosRenyi(me.getElementById("g-erdos-renyi-1").value,t),"griven-newmn":()=>this.graphManager.generator.girvanNewman(me.getElementById("g-girvan-newman-1").value),"g-girvan-newman-1":()=>this.graphManager.generator.girvanNewman(t),"krackhardt-kite":()=>this.graphManager.generator.krackhardtkite(),"florentine-families":()=>this.graphManager.generator.florentineFamilies(),"karate-club":()=>this.graphManager.generator.karateClub(),aries:()=>this.graphManager.generator.zodiac.aries(),taurus:()=>this.graphManager.generator.zodiac.taurus(),gemini:()=>this.graphManager.generator.zodiac.gemini(),cancer:()=>this.graphManager.generator.zodiac.cancer(),leo:()=>this.graphManager.generator.zodiac.leo(),virgo:()=>this.graphManager.generator.zodiac.virgo(),libra:()=>this.graphManager.generator.zodiac.libra(),scorpius:()=>this.graphManager.generator.zodiac.scorpius(),ophiuchus:()=>this.graphManager.generator.zodiac.ophiuchus(),sagittarius:()=>this.graphManager.generator.zodiac.sagittarius(),capricornus:()=>this.graphManager.generator.zodiac.capricornus(),aquarius:()=>this.graphManager.generator.zodiac.aquarius(),pisces:()=>this.graphManager.generator.zodiac.pisces(),"organize-circle":()=>this.layout.applyLayout("circle"),"center-layout":()=>this.layout.applyLayout("center"),"random-layout":()=>this.layout.applyLayout("random"),"rotate-layout-1":()=>this.layout.applyLayout("rotate",t),"rotate-layout":()=>{const o=me.getElementById("rotate-layout-1").value;return this.layout.applyLayout("rotate",o)},"hflip-layout":()=>this.layout.applyLayout("h-flip"),"vflip-layout":()=>this.layout.applyLayout("v-flip"),"force-layout":()=>this.layout.applyLayout("force",{itteration:me.getElementById("force-itteration").value,gravity:me.getElementById("force-gravity").value}),"froce-itteration":()=>this.layout.applyLayout("force",{val:t,gravity:me.getElementById("force-gravity").value}),"force-gravity":()=>this.layout.applyLayout("force",{itteration:me.getElementById("force-itteration").value,gravity:t}),"noverlap-layout":()=>this.layout.applyLayout("noverlap"),"reverse-direction":()=>this.graphManager.reverseGraph(),"to-undirected":()=>this.graphManager.toUndirectedGraph(),"to-directed":()=>this.graphManager.toDirectedGraph(),"to-mixed":()=>this.graphManager.toMixedGraph(),"to-weighted":()=>this.graphManager.toWeighted(),"to-unweighted":()=>this.graphManager.toUnweighted(),"subgraph-btn":()=>this.graphManager.subgraph(),graphs:()=>this.graphManager.graphsPanel.selectLis(t),faces:()=>this.graphManager.facePanel.selectLis(t),"how-to-use":()=>window.open("https://www.youtube.com/playlist?list=PLaa8UNGS4QED9DUhAZt7O963qkScAWah3","_blank"),command:()=>{me.querySelector(".modal").style.display="flex",me.querySelector(".modal .help-panel").style.display="block"},about:()=>window.open("http://picinfiniti.net/","_blank"),"select-all-node":()=>this.graphManager.selectAllNode(),"deselect-all-node":()=>this.graphManager.deselectAllNode(),"select-next-node":()=>this.graphManager.selectNextNode(),"select-pervious-node":()=>this.graphManager.selectPerviousNode(),"select-all-edge":()=>this.graphManager.selectAllEdge(),"deselect-all-edge":()=>this.graphManager.deselectAllEdge(),"select-next-edge":()=>this.graphManager.selectNextEdge(),"select-pervious-edge":()=>this.graphManager.selectPerviousEdge(),"copy-subgraph":()=>this.graphManager.copySubgraph(),"cut-subgraph":()=>this.graphManager.cutSubgraph(),"paste-subgraph":()=>this.graphManager.pasteSubgraph(),"paste-subgraph-seprate":()=>this.graphManager.pasteSubgraph(!0),"update-node-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!0,!1,!1,!1),"update-stroke-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!1,!0,!1,!1),"update-edge-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!1,!1,!0,!1),"update-label-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!1,!1,!1,!0)};r[e]?r[e]():console.log(`No action defined for: ${e}`)}attachEventListeners(){me.addEventListener("click",e=>{if(e.target.tagName==="INPUT")return;const t=e.target.closest("li");if(!t)return;const r=t.getAttribute("name")||t.id;r&&this.handleMenuAction(r,t.id)}),me.addEventListener("input",e=>{const t=e.target;if(!t||t.name=="rename"||t.name=="desc"||t.name=="weight")return;const r=t.id||t.getAttribute("name");r&&this.handleMenuAction(r,t.value)})}}const Ht=document;class $0{constructor(e){this.app=e,this.eventBus=e.eventBus}init(){this.app.eventBus.on("settingToggled",e=>{const{key:t,value:r}=e.detail;t=="forceSimulation"&&(r?this.app.startSimulation():this.app.stopSimulation())}),this.app.eventBus.on("import",e=>{Ht.getElementById("file-input").click()}),this.app.eventBus.on("export",e=>{if(e.detail.type==="json"){const t=this.app.graphManager.history,r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2)),o=Ht.createElement("a");o.href=r,o.download="graph.json",Ht.body.appendChild(o),o.click(),Ht.body.removeChild(o)}e.detail.type==="png"&&this.app.canvas.toBlob(function(t){let r=Ht.createElement("a");r.href=URL.createObjectURL(t),r.download="d3-canvas-export.png",Ht.body.appendChild(r),r.click(),Ht.body.removeChild(r)},"image/png")}),Ht.getElementById("file-input").addEventListener("change",e=>{const t=e.target.files[0];if(t){const r=new FileReader;r.onload=o=>{const a=JSON.parse(o.target.result);this.app.graphManager.history.push(...a),this.app.graphManager.updateIndex(this.app.graphManager.history.length-1)},r.readAsText(t)}e.target.value=""})}}const T0=[{title:"File",id:"file",submenu:[{title:" New Graph",id:"new-mixed-btn",shortcut:"(n)"},{title:" Import",id:"import-graph",shortcut:"(o)",input:[{type:"file",id:"file-input",hidden:!0}]},{title:" Export",id:"export-graph",shortcut:"(Ctrl+s)"},{title:" Export to PNG",id:"export-png",shortcut:"(P)"},{type:"divider"},{title:" Default Setting",id:"default-settings-btn"},{title:" Sky Night",id:"sky-night-theme-btn"},{type:"divider"},{title:" Reload",id:"reload",shortcut:"(F5)"}]},{title:"Edit",id:"edit",submenu:[{title:"Delete",name:"remove-selection-btn",shortcut:"(d)"},{title:"Assign Color",name:"color-selection-btn",shortcut:"(c)"},{title:"Add Edge",name:"add-edge-btn",shortcut:"(alt-e)"},{title:"Add Directed Edge",name:"add-directed-edge-btn",shortcut:"(alt-E)"},{title:"Add Face",name:"add-face-btn",shortcut:"(ctrl+f)"},{type:"divider"},{title:"Copy",name:"copy-subgraph",shortcut:"(y)"},{title:"Cut",name:"cut-subgraph",shortcut:"(x)"},{title:"Paste",name:"paste-subgraph",shortcut:"(p)"},{type:"divider"},{title:"Rename",name:"rename-btn",shortcut:"(r)"},{title:"Edit Info",name:"desc-btn",shortcut:"(i)"},{title:"Edit Weight",name:"weight-btn",shortcut:"(w)"},{type:"divider"},{title:"Undo",name:"undo-btn",shortcut:"(u)"},{title:"Redo",name:"redo-btn",shortcut:"(Ctrl+r)"}]},{title:"Settings",id:"settings",submenu:[{title:"Graph",id:"graph-settings",shortcut:">",submenu:[{title:"Vertex",id:"vertex-label",check:!0},{title:"Edge",id:"edge-label",check:!0},{title:"Face",id:"face-label",check:!0},{title:"Weight",id:"weight-label",check:!0},{type:"divider"},{title:"Grid",id:"gride-size",input:[{type:"range",id:"grid-size-1",min:0,max:100,value:20}]},{title:"Node",id:"vertex-size",input:[{type:"range",id:"vertex-size-1",min:0,max:200,value:10,step:.1}]},{title:"Edge",id:"edge-size",input:[{type:"range",id:"edge-size-1",min:1,max:100,value:2}]},{title:"Label",id:"label-size",input:[{type:"range",id:"label-size-1",min:0,max:100,value:15}]},{title:"Stroke",id:"stroke-size",input:[{type:"range",id:"stroke-size-1",min:0,max:50,value:5,step:.1}]}]},{title:"View",id:"view",shortcut:">",submenu:[{title:"Info Panel",id:"panel-btn",check:!0},{title:"Tools Panel",id:"tools-btn",check:!0},{title:"Graphs Panel",id:"graphs-btn",check:!0},{title:"Face Panel",id:"faces-btn",check:!0},{type:"divider"},{title:"Key Chord",id:"shortcut-chord-btn",shortcut:""}]},{type:"divider"},{title:"History",id:"History",shortcut:">",submenu:[{title:"History Limit",id:"history-limit",input:[{type:"number",id:"history-limit-1",min:5,max:1e4,value:5}]},{title:"Save History",id:"save-history",check:!0},{title:"Clear History",id:"clear-histoory-btn"}]}]},{title:"Tools",id:"tools",submenu:[{title:"Scale",id:"scale-btn",check:!1,shortcut:"(s)"},{title:"Panning",id:"panning-btn",check:!1,shortcut:"Ctrl"},{title:"Selecting",id:"select-btn",check:!1,shortcut:"Shift"},{title:"Component",id:"component-btn",check:!1,shortcut:"Alt"},{type:"divider"},{title:"Tree",id:"tree-btn",check:!1,shortcut:"(t)"},{title:"Force Simulation",id:"force-btn",check:!1,shortcut:"(f)"},{type:"divider"},{title:"Color Picker",id:"color-picker-btn",check:!1,shortcut:" cc"}]},{title:"Generator",id:"generator",submenu:[{title:"Classic",id:"classic",shortcut:">",submenu:[{title:"Empty",id:"empty",input:[{type:"number",id:"g-empty-1",min:1,max:500,value:5}]},{title:"K",id:"complete",link:"https://en.wikipedia.org/wiki/Complete_graph",input:[{type:"number",id:"g-complete-1",min:1,max:500,value:5}]},{title:"K,",id:"complete-bipartite",link:"https://en.wikipedia.org/wiki/Complete_bipartite_graph",input:[{type:"number",id:"g-complete-bipartite-1",min:1,max:500,value:5},{type:"number",id:"g-complete-bipartite-2",min:1,max:500,value:5}]},{title:"P",id:"path",link:"https://en.wikipedia.org/wiki/Path_graph",input:[{type:"number",id:"g-path-1",min:2,max:500,value:5}]},{title:"C",id:"cycle",link:"https://en.wikipedia.org/wiki/Cycle_graph",input:[{type:"number",id:"g-cycle-1",min:3,max:500,value:5}]},{title:"L",id:"ladder",link:"https://en.wikipedia.org/wiki/Ladder_graph",input:[{type:"number",id:"g-ladder-1",min:2,max:500,value:5}]}]},{title:"Community",id:"community",shortcut:">",submenu:[{title:"C,",id:"caveman",link:"https://mathworld.wolfram.com/CavemanGraph.html",input:[{type:"number",id:"g-caveman-1",min:1,max:500,value:5},{type:"number",id:"g-caveman-2",min:1,max:500,value:5}]},{title:"Q,",id:"connected-caveman",link:"https://mathworld.wolfram.com/CavemanGraph.html",input:[{type:"number",id:"g-connected-caveman-1",min:1,max:500,value:5},{type:"number",id:"g-connected-caveman-2",min:1,max:500,value:5}]}]},{title:"Random",id:"random",shortcut:">",submenu:[{title:"Clusters",id:"clusters",input:[{type:"number",id:"g-clusters-1",min:2,max:500,value:20},{type:"number",id:"g-clusters-2",min:2,max:500,value:20},{type:"number",id:"g-clusters-3",min:2,max:500,value:10}]},{title:"erdos Renyi",id:"erdos-renyi",link:"https://en.wikipedia.org/wiki/Erd%C5%91s%E2%80%93R%C3%A9nyi_model",input:[{type:"number",id:"g-erdos-renyi-1",min:1,max:500,value:10},{type:"number",id:"g-erdos-renyi-2",min:0,max:1,step:.1,value:.5}]},{title:"Girvan Newman",id:"griven-newmn",link:"https://www.pnas.org/doi/pdf/10.1073/pnas.122653799",input:[{type:"number",id:"g-girvan-newman-1",min:1,max:500,value:5}]}]},{title:"Small",id:"small",shortcut:">",submenu:[{title:"Krackhardt kite",id:"krackhardt-kite",link:"https://en.wikipedia.org/wiki/Krackhardt_kite_graph"}]},{title:"Social",id:"social",shortcut:">",submenu:[{title:"Florentine families",id:"florentine-families"},{title:"Zacharys karate club",id:"karate-club",link:"https://en.wikipedia.org/wiki/Zachary%27s_karate_club"}]},{type:"divider"},{title:"Zodiac",id:"zodiac",shortcut:">",submenu:[{title:"Aries",id:"aries",label:"",link:"https://en.wikipedia.org/wiki/Aries_(astrology)"},{title:"Taurus",id:"taurus",label:"",link:"https://en.wikipedia.org/wiki/Taurus_(astrology)"},{title:"Gemini",id:"gemini",label:"",link:"https://en.wikipedia.org/wiki/Gemini_(astrology)"},{title:"Cancer",id:"cancer",label:"",link:"https://en.wikipedia.org/wiki/Cancer_(astrology)"},{title:"Leo",id:"leo",label:"",link:"https://en.wikipedia.org/wiki/Leo_(astrology)"},{title:"Virgo",id:"virgo",label:"",link:"https://en.wikipedia.org/wiki/Virgo_(astrology)"},{title:"Libra",id:"libra",label:"",link:"https://en.wikipedia.org/wiki/Libra_(astrology)"},{title:"Scorpius",id:"scorpius",label:"",link:"https://en.wikipedia.org/wiki/Scorpio_(astrology)"},{title:"Ophiuchus",id:"ophiuchus",label:"",link:"https://en.wikipedia.org/wiki/Ophiuchus_(astrology)"},{title:"Sagittarius",id:"sagittarius",label:"",link:"https://en.wikipedia.org/wiki/Sagittarius_(astrology)"},{title:"Capricornus",id:"capricornus",label:"",link:"https://en.wikipedia.org/wiki/Capricorn_(astrology)"},{title:"Aquarius",id:"aquarius",label:"",link:"https://en.wikipedia.org/wiki/Aquarius_(astrology)"},{title:"Pisces",id:"pisces",label:"",link:"https://en.wikipedia.org/wiki/Pisces_(astrology)"}]}]},{title:"Metrics",id:"metrics",submenu:[{title:"Basic",id:"basic",shortcut:">",submenu:[{title:"Basic Information",id:"basic-info-btn"},{title:"Components",id:"components-btn"},{title:"Lies On Cycle",id:"lies-on-cycle-btn"},{title:"Degree Sequence",id:"list-degrees-btn"},{title:"Density",id:"density-btn"},{title:"Diameter",id:"diameter-btn"}]},{title:"Centrality",id:"centrality",shortcut:">",submenu:[{title:"Betweenness Centrality",id:"betweenness-centrality-btn"},{title:"Closeness Centrality",id:"closeness-centrality-btn"},{title:"Degree Centrality",id:"degree-centrality-btn"},{title:"Eccentricity",id:"eccentricity-btn"},{title:"Eigenvector Centrality",id:"eigenvector-centrality-btn"},{title:"PageRank",id:"pagerank-btn"}]},{title:"Layout Quality",id:"layout-quality",shortcut:">",submenu:[{title:"Edge Uniformity",id:"edge-uniformity-btn"},{title:"Neighborhood Preservation",id:"neighborhood-preservation-btn"},{title:"Stress",id:"stress-btn"}]},{title:"Other",shortcut:">",id:"other",submenu:[{title:"Simmelian Strength",id:"simmelian-strength-btn"},{title:"Disparity",id:"disparity-btn"}]},{type:"divider"},{title:"Neighbors",id:"neighbors-btn"},{title:"Shortest Path",id:"shortest-path-btn"},{title:"Selected Nodes Info",id:"all-node-info-btn",shortcut:"(a)"},{title:"Selected Edges Info",id:"all-edge-info-btn",shortcut:"(Alt+a)"},{type:"divider"},{title:"Clear Panel",id:"clear-info-panel-btn",shortcut:"(q)"}]},{title:"Operators",id:"help",submenu:[{title:"Layout",id:"layout",shortcut:">",submenu:[{title:"Center Nodes",name:"center-layout"},{title:"Organize Nodes",name:"organize-circle",shortcut:"(O)"},{title:"Random",name:"random-layout"},{title:"Vertical Flip",name:"vflip-layout"},{title:"Horizontal Flip",name:"hflip-layout"},{title:"Rotate",name:"rotate-layout",input:[{type:"number",id:"rotate-layout-1",min:-180,max:180,value:45}]},{type:"divider"},{title:"Force Atlas",name:"force-layout",input:[{type:"number",id:"force-itteration",min:0,max:500,value:50},{type:"number",id:"force-gravity",min:0,max:1,value:25}],link:"https://graphology.github.io/standard-library/layout-forceatlas2.html"}]},{title:"Converter",id:"converter",shortcut:">",submenu:[{title:"To Mixed",id:"to-mixed"},{title:"To Undirected",id:"to-undirected"},{title:"To Directed",id:"to-directed"},{title:"To Weighted",id:"to-weighted"},{title:"To Unweighted",id:"to-unweighted"}]},{title:"Reverse Direction",id:"reverse-direction"},{title:"Subgraph",id:"subgraph-btn"},{title:"Complete Graph",name:"complete-btn",shortcut:"(alt-C)"}]},{title:"Help",id:"help",submenu:[{title:"Mouse Commnads",id:"command",name:"command-btn"},{title:"How to use",id:"how-to-use"},{title:"About",id:"about",shortcut:"version: 1.4.0"}]}];var vr={},xc;function P0(){if(xc)return vr;xc=1;var n=Ae();function e(l){return typeof l=="number"&&!isNaN(l)}var t=["x","y"];function r(l,h){if(!n(l))throw new Error("graphology-layout/utils.collectLayout: the given graph is not a valid graphology instance.");h=h||{};var d=h.dimensions,p=h.exhaustive!==!1;d||(d=t);var y={},v=d.length;return l.forEachNode(function(m,E){var _=0,A={},C;for(C=0;C<v;C++){var k=d[C],M=E[k];e(M)&&(A[k]=M,_++)}p?_===v&&(y[m]=A):_&&(y[m]=A)}),y}function o(l,h,d){if(!n(l))throw new Error("graphology-layout/utils.assignLayout: the given graph is not a valid graphology instance.");d=d||{};var p=d.dimensions||t,y=p.length,v;l.updateEachNodeAttributes(function(m,E){var _=h[m];if(!_)return E;for(var A=0;A<y;A++)v=p[A],E[v]=_[v];return E},{attributes:p})}function a(l,h){if(!n(l))throw new Error("graphology-layout/utils.collectLayout: the given graph is not a valid graphology instance.");h=h||{};var d=h.dimensions,p=h.type||Float64Array;d||(d=t);var y=d.length,v=new p(l.order*y),m=0;return l.forEachNode(function(E,_){var A;for(A=0;A<y;A++){var C=d[A],k=_[C];e(k)||(k=0),v[m++]=k}}),v}function s(l,h,d){if(!n(l))throw new Error("graphology-layout/utils.assignLayoutAsFlatArray: the given graph is not a valid graphology instance.");d=d||{};var p=d.dimensions;p||(p=t);var y=p.length;if(h.length!==l.order*y)throw new Error("graphology-layout/utils.assignLayoutAsFlatArray: given layout has an incorrect length wrt number of nodes & dimenions.");var v=0;l.updateEachNodeAttributes(function(m,E){for(var _=0;_<y;_++)E[p[_]]=h[v++];return E},{attributes:p})}return vr.collectLayout=r,vr.assignLayout=o,vr.collectLayoutAsFlatArray=a,vr.assignLayoutAsFlatArray=s,vr}var At=P0(),mr={},zo,_c;function O0(){if(_c)return zo;_c=1;function n(t){return function(r,o){return r+Math.floor(t()*(o-r+1))}}var e=n(Math.random);return e.createRandom=n,zo=e,zo}var $o,Sc;function G0(){if(Sc)return $o;Sc=1;var n=O0().createRandom;function e(r){var o=n(r);return function(a){for(var s=a.length,l=s-1,h=-1;++h<s;){var d=o(h,l),p=a[d];a[d]=a[h],a[h]=p}}}var t=e(Math.random);return t.createShuffleInPlace=e,$o=t,$o}var To,Ac;function R0(){if(Ac)return To;Ac=1;var n=Nt(),e=Ae(),t=G0(),r={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function o(w,L,z,T,q){this.wrappedCircle=q||null,this.children={},this.countChildren=0,this.id=w||null,this.next=null,this.previous=null,this.x=L||null,this.y=z||null,q?this.r=1010101:this.r=T||999}o.prototype.hasChildren=function(){return this.countChildren>0},o.prototype.addChild=function(w,L){this.children[w]=L,++this.countChildren},o.prototype.getChild=function(w){if(!this.children.hasOwnProperty(w)){var L=new o;this.children[w]=L,++this.countChildren}return this.children[w]},o.prototype.applyPositionToChildren=function(){if(this.hasChildren()){var w=this;for(var L in w.children){var z=w.children[L];z.x+=w.x,z.y+=w.y,z.applyPositionToChildren()}}};function a(w,L,z){for(var T in L.children){var q=L.children[T];q.hasChildren()?a(w,q,z):z[q.id]={x:q.x,y:q.y}}}function s(w,L){var z=w.r-L.r,T=L.x-w.x,q=L.y-w.y;return z<0||z*z<T*T+q*q}function l(w,L){var z=w.r-L.r+1e-6,T=L.x-w.x,q=L.y-w.y;return z>0&&z*z>T*T+q*q}function h(w,L){for(var z=0;z<L.length;++z)if(!l(w,L[z]))return!1;return!0}function d(w){return new o(null,w.x,w.y,w.r)}function p(w,L){var z=w.x,T=w.y,q=w.r,j=L.x,P=L.y,ee=L.r,J=j-z,F=P-T,D=ee-q,U=Math.sqrt(J*J+F*F);return new o(null,(z+j+J/U*D)/2,(T+P+F/U*D)/2,(U+q+ee)/2)}function y(w,L,z){var T=w.x,q=w.y,j=w.r,P=L.x,ee=L.y,J=L.r,F=z.x,D=z.y,U=z.r,H=T-P,Q=T-F,W=q-ee,Y=q-D,X=J-j,te=U-j,se=T*T+q*q-j*j,fe=se-P*P-ee*ee+J*J,pe=se-F*F-D*D+U*U,Ee=Q*W-H*Y,re=(W*pe-Y*fe)/(Ee*2)-T,de=(Y*X-W*te)/Ee,ye=(Q*fe-H*pe)/(Ee*2)-q,be=(H*te-Q*X)/Ee,De=de*de+be*be-1,ge=2*(j+re*de+ye*be),ue=re*re+ye*ye-j*j,V=-(De?(ge+Math.sqrt(ge*ge-4*De*ue))/(2*De):ue/ge);return new o(null,T+re+de*V,q+ye+be*V,V)}function v(w){switch(w.length){case 1:return d(w[0]);case 2:return p(w[0],w[1]);case 3:return y(w[0],w[1],w[2]);default:throw new Error("graphology-layout/circlepack: Invalid basis length "+w.length)}}function m(w,L){var z,T;if(h(L,w))return[L];for(z=0;z<w.length;++z)if(s(L,w[z])&&h(p(w[z],L),w))return[w[z],L];for(z=0;z<w.length-1;++z)for(T=z+1;T<w.length;++T)if(s(p(w[z],w[T]),L)&&s(p(w[z],L),w[T])&&s(p(w[T],L),w[z])&&h(y(w[z],w[T],L),w))return[w[z],w[T],L];throw new Error("graphology-layout/circlepack: extendBasis failure !")}function E(w){var L=w.wrappedCircle,z=w.next.wrappedCircle,T=L.r+z.r,q=(L.x*z.r+z.x*L.r)/T,j=(L.y*z.r+z.y*L.r)/T;return q*q+j*j}function _(w,L){var z=0,T=w.slice(),q=w.length,j=[],P,ee;for(L(T);z<q;)P=T[z],ee&&l(ee,P)?++z:(j=m(j,P),ee=v(j),z=0);return ee}function A(w,L,z){var T=w.x-L.x,q,j,P=w.y-L.y,ee,J,F=T*T+P*P;F?(j=L.r+z.r,j*=j,J=w.r+z.r,J*=J,j>J?(q=(F+J-j)/(2*F),ee=Math.sqrt(Math.max(0,J/F-q*q)),z.x=w.x-q*T-ee*P,z.y=w.y-q*P+ee*T):(q=(F+j-J)/(2*F),ee=Math.sqrt(Math.max(0,j/F-q*q)),z.x=L.x+q*T-ee*P,z.y=L.y+q*P+ee*T)):(z.x=L.x+z.r,z.y=L.y)}function C(w,L){var z=w.r+L.r-1e-6,T=L.x-w.x,q=L.y-w.y;return z>0&&z*z>T*T+q*q}function k(w,L){var z=w.length;if(z===0)return 0;var T,q,j,P,ee,J,F,D,U,H;if(T=w[0],T.x=0,T.y=0,z<=1)return T.r;if(q=w[1],T.x=-q.r,q.x=T.r,q.y=0,z<=2)return T.r+q.r;j=w[2],A(q,T,j),T=new o(null,null,null,null,T),q=new o(null,null,null,null,q),j=new o(null,null,null,null,j),T.next=j.previous=q,q.next=T.previous=j,j.next=q.previous=T;e:for(J=3;J<z;++J){j=w[J],A(T.wrappedCircle,q.wrappedCircle,j),j=new o(null,null,null,null,j),F=q.next,D=T.previous,U=q.wrappedCircle.r,H=T.wrappedCircle.r;do if(U<=H){if(C(F.wrappedCircle,j.wrappedCircle)){q=F,T.next=q,q.previous=T,--J;continue e}U+=F.wrappedCircle.r,F=F.next}else{if(C(D.wrappedCircle,j.wrappedCircle)){T=D,T.next=q,q.previous=T,--J;continue e}H+=D.wrappedCircle.r,D=D.previous}while(F!==D.next);for(j.previous=T,j.next=q,T.next=q.previous=q=j,P=E(T);(j=j.next)!==q;)(ee=E(j))<P&&(T=j,P=ee);q=T.next}T=[q.wrappedCircle],j=q;for(var Q=1e4;(j=j.next)!==q&&--Q!==0;)T.push(j.wrappedCircle);for(j=_(T,L),J=0;J<z;++J)T=w[J],T.x-=j.x,T.y-=j.y;return j.r}function M(w,L){var z=0;if(w.hasChildren()){for(var T in w.children){var q=w.children[T];q.hasChildren()&&(q.r=M(q,L))}z=k(Object.values(w.children),L)}return z}function x(w,L){M(w,L);for(var z in w.children){var T=w.children[z];T.applyPositionToChildren()}}function N(w,L,z){if(!e(L))throw new Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");z=n(z,r);var T={},q={},j=L.nodes(),P=z.center,ee=z.hierarchyAttributes,J=t.createShuffleInPlace(z.rng),F=z.scale,D=new o;L.forEachNode(function(X,te){var se=te.size?te.size:1,fe=new o(X,null,null,se),pe=D;ee.forEach(function(Ee){var re=te[Ee];pe=pe.getChild(re)}),pe.addChild(X,fe)}),x(D,J),a(L,D,T);var U=j.length,H,Q,W;for(W=0;W<U;W++){var Y=j[W];H=P+F*T[Y].x,Q=P+F*T[Y].y,q[Y]={x:H,y:Q},w&&(L.setNodeAttribute(Y,z.attributes.x,H),L.setNodeAttribute(Y,z.attributes.y,Q))}return q}var O=N.bind(null,!1);return O.assign=N.bind(null,!0),To=O,To}var Po,kc;function q0(){if(kc)return Po;kc=1;var n=Nt(),e=Ae(),t={dimensions:["x","y"],center:.5,scale:1};function r(a,s,l){if(!e(s))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");l=n(l,t);var h=l.dimensions;if(!Array.isArray(h)||h.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var d=l.center,p=l.scale,y=Math.PI*2,v=(d-.5)*p,m=s.order,E=h[0],_=h[1];function A(M,x){return x[E]=p*Math.cos(M*y/m)+v,x[_]=p*Math.sin(M*y/m)+v,x}var C=0;if(!a){var k={};return s.forEachNode(function(M){k[M]=A(C++,{})}),k}s.updateEachNodeAttributes(function(M,x){return A(C++,x),x},{attributes:h})}var o=r.bind(null,!1);return o.assign=r.bind(null,!0),Po=o,Po}var Oo,Cc;function F0(){if(Cc)return Oo;Cc=1;var n=Nt(),e=Ae(),t={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function r(a,s,l){if(!e(s))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");l=n(l,t);var h=l.dimensions;if(!Array.isArray(h)||h.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var d=h.length,p=l.center,y=l.rng,v=l.scale,m=(p-.5)*v;function E(A){for(var C=0;C<d;C++)A[h[C]]=y()*v+m;return A}if(!a){var _={};return s.forEachNode(function(A){_[A]=E({})}),_}s.updateEachNodeAttributes(function(A,C){return E(C),C},{attributes:h})}var o=r.bind(null,!1);return o.assign=r.bind(null,!0),Oo=o,Oo}var Go,Dc;function j0(){if(Dc)return Go;Dc=1;var n=Nt(),e=Ae(),t=Math.PI/180,r={dimensions:["x","y"],centeredOnZero:!1,degrees:!1};function o(s,l,h,d){if(!e(l))throw new Error("graphology-layout/rotation: the given graph is not a valid graphology instance.");d=n(d,r),d.degrees&&(h*=t);var p=d.dimensions;if(!Array.isArray(p)||p.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");if(l.order===0)return s?void 0:{};var y=p[0],v=p[1],m=0,E=0;if(!d.centeredOnZero){var _=1/0,A=-1/0,C=1/0,k=-1/0;l.forEachNode(function(w,L){var z=L[y],T=L[v];z<_&&(_=z),z>A&&(A=z),T<C&&(C=T),T>k&&(k=T)}),m=(_+A)/2,E=(C+k)/2}var M=Math.cos(h),x=Math.sin(h);function N(w){var L=w[y],z=w[v];return w[y]=m+(L-m)*M-(z-E)*x,w[v]=E+(L-m)*x+(z-E)*M,w}if(!s){var O={};return l.forEachNode(function(w,L){var z={};z[y]=L[y],z[v]=L[v],O[w]=N(z)}),O}l.updateEachNodeAttributes(function(w,L){return N(L),L},{attributes:p})}var a=o.bind(null,!1);return a.assign=o.bind(null,!0),Go=a,Go}var Nc;function B0(){return Nc||(Nc=1,mr.circlepack=R0(),mr.circular=q0(),mr.random=F0(),mr.rotation=j0()),mr}var Ro,Ic;function U0(){return Ic||(Ic=1,Ro=B0()),Ro}var qo=U0(),Fo,Mc;function H0(){if(Mc)return Fo;Mc=1;var n=0,e=1,t=2,r=3,o=4,a=5,s=6,l=7,h=8,d=9,p=0,y=1,v=2,m=0,E=1,_=2,A=3,C=4,k=5,M=6,x=7,N=8,O=3,w=10,L=3,z=9,T=10;return Fo=function(j,P,ee){var J,F,D,U,H,Q,W,Y,X,te,se=P.length,fe=ee.length,pe=j.adjustSizes,Ee=j.barnesHutTheta*j.barnesHutTheta,re,de,ye,be,De,ge,ue,V=[];for(D=0;D<se;D+=w)P[D+o]=P[D+t],P[D+a]=P[D+r],P[D+t]=0,P[D+r]=0;if(j.outboundAttractionDistribution){for(re=0,D=0;D<se;D+=w)re+=P[D+s];re/=se/w}if(j.barnesHutOptimize){var Fe=1/0,ze=-1/0,Qe=1/0,Te=-1/0,Ie,Oe,je;for(D=0;D<se;D+=w)Fe=Math.min(Fe,P[D+n]),ze=Math.max(ze,P[D+n]),Qe=Math.min(Qe,P[D+e]),Te=Math.max(Te,P[D+e]);var Be=ze-Fe,wt=Te-Qe;for(Be>wt?(Qe-=(Be-wt)/2,Te=Qe+Be):(Fe-=(wt-Be)/2,ze=Fe+wt),V[0+m]=-1,V[0+E]=(Fe+ze)/2,V[0+_]=(Qe+Te)/2,V[0+A]=Math.max(ze-Fe,Te-Qe),V[0+C]=-1,V[0+k]=-1,V[0+M]=0,V[0+x]=0,V[0+N]=0,J=1,D=0;D<se;D+=w)for(F=0,je=O;;)if(V[F+k]>=0){P[D+n]<V[F+E]?P[D+e]<V[F+_]?Ie=V[F+k]:Ie=V[F+k]+z:P[D+e]<V[F+_]?Ie=V[F+k]+z*2:Ie=V[F+k]+z*3,V[F+x]=(V[F+x]*V[F+M]+P[D+n]*P[D+s])/(V[F+M]+P[D+s]),V[F+N]=(V[F+N]*V[F+M]+P[D+e]*P[D+s])/(V[F+M]+P[D+s]),V[F+M]+=P[D+s],F=Ie;continue}else if(V[F+m]<0){V[F+m]=D;break}else{if(V[F+k]=J*z,Y=V[F+A]/2,X=V[F+k],V[X+m]=-1,V[X+E]=V[F+E]-Y,V[X+_]=V[F+_]-Y,V[X+A]=Y,V[X+C]=X+z,V[X+k]=-1,V[X+M]=0,V[X+x]=0,V[X+N]=0,X+=z,V[X+m]=-1,V[X+E]=V[F+E]-Y,V[X+_]=V[F+_]+Y,V[X+A]=Y,V[X+C]=X+z,V[X+k]=-1,V[X+M]=0,V[X+x]=0,V[X+N]=0,X+=z,V[X+m]=-1,V[X+E]=V[F+E]+Y,V[X+_]=V[F+_]-Y,V[X+A]=Y,V[X+C]=X+z,V[X+k]=-1,V[X+M]=0,V[X+x]=0,V[X+N]=0,X+=z,V[X+m]=-1,V[X+E]=V[F+E]+Y,V[X+_]=V[F+_]+Y,V[X+A]=Y,V[X+C]=V[F+C],V[X+k]=-1,V[X+M]=0,V[X+x]=0,V[X+N]=0,J+=4,P[V[F+m]+n]<V[F+E]?P[V[F+m]+e]<V[F+_]?Ie=V[F+k]:Ie=V[F+k]+z:P[V[F+m]+e]<V[F+_]?Ie=V[F+k]+z*2:Ie=V[F+k]+z*3,V[F+M]=P[V[F+m]+s],V[F+x]=P[V[F+m]+n],V[F+N]=P[V[F+m]+e],V[Ie+m]=V[F+m],V[F+m]=-1,P[D+n]<V[F+E]?P[D+e]<V[F+_]?Oe=V[F+k]:Oe=V[F+k]+z:P[D+e]<V[F+_]?Oe=V[F+k]+z*2:Oe=V[F+k]+z*3,Ie===Oe)if(je--){F=Ie;continue}else{je=O;break}V[Oe+m]=D;break}}if(j.barnesHutOptimize)for(de=j.scalingRatio,D=0;D<se;D+=w)for(F=0;;)if(V[F+k]>=0)if(ge=Math.pow(P[D+n]-V[F+x],2)+Math.pow(P[D+e]-V[F+N],2),te=V[F+A],4*te*te/ge<Ee){if(ye=P[D+n]-V[F+x],be=P[D+e]-V[F+N],pe===!0?ge>0?(ue=de*P[D+s]*V[F+M]/ge,P[D+t]+=ye*ue,P[D+r]+=be*ue):ge<0&&(ue=-de*P[D+s]*V[F+M]/Math.sqrt(ge),P[D+t]+=ye*ue,P[D+r]+=be*ue):ge>0&&(ue=de*P[D+s]*V[F+M]/ge,P[D+t]+=ye*ue,P[D+r]+=be*ue),F=V[F+C],F<0)break;continue}else{F=V[F+k];continue}else{if(Q=V[F+m],Q>=0&&Q!==D&&(ye=P[D+n]-P[Q+n],be=P[D+e]-P[Q+e],ge=ye*ye+be*be,pe===!0?ge>0?(ue=de*P[D+s]*P[Q+s]/ge,P[D+t]+=ye*ue,P[D+r]+=be*ue):ge<0&&(ue=-de*P[D+s]*P[Q+s]/Math.sqrt(ge),P[D+t]+=ye*ue,P[D+r]+=be*ue):ge>0&&(ue=de*P[D+s]*P[Q+s]/ge,P[D+t]+=ye*ue,P[D+r]+=be*ue)),F=V[F+C],F<0)break;continue}else for(de=j.scalingRatio,U=0;U<se;U+=w)for(H=0;H<U;H+=w)ye=P[U+n]-P[H+n],be=P[U+e]-P[H+e],pe===!0?(ge=Math.sqrt(ye*ye+be*be)-P[U+h]-P[H+h],ge>0?(ue=de*P[U+s]*P[H+s]/ge/ge,P[U+t]+=ye*ue,P[U+r]+=be*ue,P[H+t]-=ye*ue,P[H+r]-=be*ue):ge<0&&(ue=100*de*P[U+s]*P[H+s],P[U+t]+=ye*ue,P[U+r]+=be*ue,P[H+t]-=ye*ue,P[H+r]-=be*ue)):(ge=Math.sqrt(ye*ye+be*be),ge>0&&(ue=de*P[U+s]*P[H+s]/ge/ge,P[U+t]+=ye*ue,P[U+r]+=be*ue,P[H+t]-=ye*ue,P[H+r]-=be*ue));for(X=j.gravity/j.scalingRatio,de=j.scalingRatio,D=0;D<se;D+=w)ue=0,ye=P[D+n],be=P[D+e],ge=Math.sqrt(Math.pow(ye,2)+Math.pow(be,2)),j.strongGravityMode?ge>0&&(ue=de*P[D+s]*X):ge>0&&(ue=de*P[D+s]*X/ge),P[D+t]-=ye*ue,P[D+r]-=be*ue;for(de=1*(j.outboundAttractionDistribution?re:1),W=0;W<fe;W+=L)U=ee[W+p],H=ee[W+y],Y=ee[W+v],De=Math.pow(Y,j.edgeWeightInfluence),ye=P[U+n]-P[H+n],be=P[U+e]-P[H+e],pe===!0?(ge=Math.sqrt(ye*ye+be*be)-P[U+h]-P[H+h],j.linLogMode?j.outboundAttractionDistribution?ge>0&&(ue=-de*De*Math.log(1+ge)/ge/P[U+s]):ge>0&&(ue=-de*De*Math.log(1+ge)/ge):j.outboundAttractionDistribution?ge>0&&(ue=-de*De/P[U+s]):ge>0&&(ue=-de*De)):(ge=Math.sqrt(Math.pow(ye,2)+Math.pow(be,2)),j.linLogMode?j.outboundAttractionDistribution?ge>0&&(ue=-de*De*Math.log(1+ge)/ge/P[U+s]):ge>0&&(ue=-de*De*Math.log(1+ge)/ge):j.outboundAttractionDistribution?(ge=1,ue=-de*De/P[U+s]):(ge=1,ue=-de*De)),ge>0&&(P[U+t]+=ye*ue,P[U+r]+=be*ue,P[H+t]-=ye*ue,P[H+r]-=be*ue);var et,tt,Ue,Ge,it,ot;if(pe===!0)for(D=0;D<se;D+=w)P[D+d]!==1&&(et=Math.sqrt(Math.pow(P[D+t],2)+Math.pow(P[D+r],2)),et>T&&(P[D+t]=P[D+t]*T/et,P[D+r]=P[D+r]*T/et),tt=P[D+s]*Math.sqrt((P[D+o]-P[D+t])*(P[D+o]-P[D+t])+(P[D+a]-P[D+r])*(P[D+a]-P[D+r])),Ue=Math.sqrt((P[D+o]+P[D+t])*(P[D+o]+P[D+t])+(P[D+a]+P[D+r])*(P[D+a]+P[D+r]))/2,Ge=.1*Math.log(1+Ue)/(1+Math.sqrt(tt)),it=P[D+n]+P[D+t]*(Ge/j.slowDown),P[D+n]=it,ot=P[D+e]+P[D+r]*(Ge/j.slowDown),P[D+e]=ot);else for(D=0;D<se;D+=w)P[D+d]!==1&&(tt=P[D+s]*Math.sqrt((P[D+o]-P[D+t])*(P[D+o]-P[D+t])+(P[D+a]-P[D+r])*(P[D+a]-P[D+r])),Ue=Math.sqrt((P[D+o]+P[D+t])*(P[D+o]+P[D+t])+(P[D+a]+P[D+r])*(P[D+a]+P[D+r]))/2,Ge=P[D+l]*Math.log(1+Ue)/(1+Math.sqrt(tt)),P[D+l]=Math.min(1,Math.sqrt(Ge*(Math.pow(P[D+t],2)+Math.pow(P[D+r],2))/(1+Math.sqrt(tt)))),it=P[D+n]+P[D+t]*(Ge/j.slowDown),P[D+n]=it,ot=P[D+e]+P[D+r]*(Ge/j.slowDown),P[D+e]=ot);return{}},Fo}var Tt={},Lc;function W0(){if(Lc)return Tt;Lc=1;var n=10,e=3;return Tt.assign=function(t){t=t||{};var r=Array.prototype.slice.call(arguments).slice(1),o,a,s;for(o=0,s=r.length;o<s;o++)if(r[o])for(a in r[o])t[a]=r[o][a];return t},Tt.validateSettings=function(t){return"linLogMode"in t&&typeof t.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in t&&typeof t.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in t&&typeof t.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in t&&typeof t.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in t&&!(typeof t.scalingRatio=="number"&&t.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in t&&typeof t.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in t&&!(typeof t.gravity=="number"&&t.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in t&&!(typeof t.slowDown=="number"||t.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in t&&typeof t.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in t&&!(typeof t.barnesHutTheta=="number"&&t.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},Tt.graphToByteArrays=function(t,r){var o=t.order,a=t.size,s={},l,h=new Float32Array(o*n),d=new Float32Array(a*e);return l=0,t.forEachNode(function(p,y){s[p]=l,h[l]=y.x,h[l+1]=y.y,h[l+2]=0,h[l+3]=0,h[l+4]=0,h[l+5]=0,h[l+6]=1,h[l+7]=1,h[l+8]=y.size||1,h[l+9]=y.fixed?1:0,l+=n}),l=0,t.forEachEdge(function(p,y,v,m,E,_,A){var C=s[v],k=s[m],M=r(p,y,v,m,E,_,A);h[C+6]+=M,h[k+6]+=M,d[l]=C,d[l+1]=k,d[l+2]=M,l+=e}),{nodes:h,edges:d}},Tt.assignLayoutChanges=function(t,r,o){var a=0;t.updateEachNodeAttributes(function(s,l){return l.x=r[a],l.y=r[a+1],a+=n,o?o(s,l):l})},Tt.readGraphPositions=function(t,r){var o=0;t.forEachNode(function(a,s){r[o]=s.x,r[o+1]=s.y,o+=n})},Tt.collectLayoutChanges=function(t,r,o){for(var a=t.nodes(),s={},l=0,h=0,d=r.length;l<d;l+=n){if(o){var p=Object.assign({},t.getNodeAttributes(a[h]));p.x=r[l],p.y=r[l+1],p=o(a[h],p),s[a[h]]={x:p.x,y:p.y}}else s[a[h]]={x:r[l],y:r[l+1]};h++}return s},Tt.createWorker=function(r){var o=window.URL||window.webkitURL,a=r.toString(),s=o.createObjectURL(new Blob(["("+a+").call(this);"],{type:"text/javascript"})),l=new Worker(s);return o.revokeObjectURL(s),l},Tt}var jo,zc;function K0(){return zc||(zc=1,jo={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),jo}var Bo,$c;function X0(){if($c)return Bo;$c=1;var n=Ae(),e=kr().createEdgeWeightGetter,t=H0(),r=W0(),o=K0();function a(h,d,p){if(!n(d))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof p=="number"&&(p={iterations:p});var y=p.iterations;if(typeof y!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(y<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var v=e("getEdgeWeight"in p?p.getEdgeWeight:"weight").fromEntry,m=typeof p.outputReducer=="function"?p.outputReducer:null,E=r.assign({},o,p.settings),_=r.validateSettings(E);if(_)throw new Error("graphology-layout-forceatlas2: "+_.message);var A=r.graphToByteArrays(d,v),C;for(C=0;C<y;C++)t(E,A.nodes,A.edges);if(h){r.assignLayoutChanges(d,A.nodes,m);return}return r.collectLayoutChanges(d,A.nodes)}function s(h){var d=typeof h=="number"?h:h.order;return{barnesHutOptimize:d>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(d)}}var l=a.bind(null,!1);return l.assign=a.bind(null,!0),l.inferSettings=s,Bo=l,Bo}var Y0=X0();const V0=Ve(Y0);var Uo,Tc;function Q0(){if(Tc)return Uo;Tc=1;var n=0,e=1,t=2,r=3;function o(s,l){return s+""+l}function a(){return .01*(.5-Math.random())}return Uo=function(l,h){var d=l.margin,p=l.ratio,y=l.expansion,v=l.gridSize,m=l.speed,E,_,A,C,k,M,x=!0,N=h.length,O=N/r|0,w=new Float32Array(O),L=new Float32Array(O),z=1/0,T=1/0,q=-1/0,j=-1/0;for(E=0;E<N;E+=r)A=h[E+n],C=h[E+e],M=h[E+t]*p+d,z=Math.min(z,A-M),q=Math.max(q,A+M),T=Math.min(T,C-M),j=Math.max(j,C+M);var P=q-z,ee=j-T,J=(z+q)/2,F=(T+j)/2;z=J-y*P/2,q=J+y*P/2,T=F-y*ee/2,j=F+y*ee/2;var D=new Array(v*v),U=D.length,H;for(H=0;H<U;H++)D[H]=[];var Q,W,Y,X,te,se,fe,pe,Ee,re;for(E=0;E<N;E+=r)for(A=h[E+n],C=h[E+e],M=h[E+t]*p+d,Q=A-M,W=A+M,Y=C-M,X=C+M,te=Math.floor(v*(Q-z)/(q-z)),se=Math.floor(v*(W-z)/(q-z)),fe=Math.floor(v*(Y-T)/(j-T)),pe=Math.floor(v*(X-T)/(j-T)),Ee=te;Ee<=se;Ee++)for(re=fe;re<=pe;re++)D[Ee*v+re].push(E);var de,ye=new Set,be,De,ge,ue,V,Fe,ze,Qe,Te,Ie,Oe,je,Be;for(H=0;H<U;H++)for(de=D[H],E=0,k=de.length;E<k;E++)for(be=de[E],ge=h[be+n],V=h[be+e],ze=h[be+t],_=E+1;_<k;_++)De=de[_],Te=o(be,De),!(U>1&&ye.has(Te))&&(U>1&&ye.add(Te),ue=h[De+n],Fe=h[De+e],Qe=h[De+t],Ie=ue-ge,Oe=Fe-V,je=Math.sqrt(Ie*Ie+Oe*Oe),Be=je<ze*p+d+(Qe*p+d),Be&&(x=!1,De=De/r|0,je>0?(w[De]+=Ie/je*(1+ze),L[De]+=Oe/je*(1+ze)):(w[De]+=P*a(),L[De]+=ee*a())));for(E=0,_=0;E<N;E+=r,_++)h[E+n]+=w[_]*.1*m,h[E+e]+=L[_]*.1*m;return{converged:x}},Uo}var er={},Pc;function Z0(){if(Pc)return er;Pc=1;var n=3;return er.validateSettings=function(e){return"gridSize"in e&&typeof e.gridSize!="number"||e.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in e&&typeof e.margin!="number"||e.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in e&&typeof e.expansion!="number"||e.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in e&&typeof e.ratio!="number"||e.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in e&&typeof e.speed!="number"||e.speed<=0?{message:"the `speed` setting should be a positive number."}:null},er.graphToByteArray=function(e,t){var r=e.order,o=new Float32Array(r*n),a=0;return e.forEachNode(function(s,l){typeof t=="function"&&(l=t(s,l)),o[a]=l.x,o[a+1]=l.y,o[a+2]=l.size||1,a+=n}),o},er.assignLayoutChanges=function(e,t,r){var o=0;e.forEachNode(function(a){var s={x:t[o],y:t[o+1]};typeof r=="function"&&(s=r(a,s)),e.mergeNodeAttributes(a,s),o+=n})},er.collectLayoutChanges=function(e,t,r){var o={},a=0;return e.forEachNode(function(s){var l={x:t[a],y:t[a+1]};typeof r=="function"&&(l=r(s,l)),o[s]=l,a+=n}),o},er.createWorker=function(t){var r=window.URL||window.webkitURL,o=t.toString(),a=r.createObjectURL(new Blob(["("+o+").call(this);"],{type:"text/javascript"})),s=new Worker(a);return r.revokeObjectURL(a),s},er}var Ho,Oc;function J0(){return Oc||(Oc=1,Ho={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3}),Ho}var Wo,Gc;function eb(){if(Gc)return Wo;Gc=1;var n=Ae(),e=Q0(),t=Z0(),r=J0(),o=500;function a(l,h,d){if(!n(h))throw new Error("graphology-layout-noverlap: the given graph is not a valid graphology instance.");typeof d=="number"?d={maxIterations:d}:d=d||{};var p=d.maxIterations||o;if(typeof p!="number"||p<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");var y=Object.assign({},r,d.settings),v=t.validateSettings(y);if(v)throw new Error("graphology-layout-noverlap: "+v.message);var m=t.graphToByteArray(h,d.inputReducer),E=!1,_;for(_=0;_<p&&!E;_++)E=e(y,m).converged;if(l){t.assignLayoutChanges(h,m,d.outputReducer);return}return t.collectLayoutChanges(h,m,d.outputReducer)}var s=a.bind(null,!1);return s.assign=a.bind(null,!0),Wo=s,Wo}var tb=eb();const rb=Ve(tb);class nb{constructor(e){this.app=e,this.eventBus=e.eventBus,this.canvas=e.canvas}init(){}applyLayout(e,t){let r=!0;switch(e){case"force":this.force(t.itteration,t.gravity);break;case"noverlap":this.noverlap();break;case"rotate180":this.rotate180();break;case"rotate":this.rotate(t);break;case"h-flip":this.hFlip();break;case"v-flip":this.vFlip();break;case"center":this.center();break;case"random":this.random();break;case"circle":this.organizeNodesInCircle();break;case"oneLine":this.organizeNodesInLine();break;case"twoLine":this.organizeNodesInTwoLines(t.line1Count,t.Y);break;default:r=!1;break}r&&this.app.graphManager.saveGraphState()}noverlap(){const e=this.app.graphManager.graph,t=rb(e,{maxIterations:50,settings:{ratio:100,expansion:1.5,gridSize:5}});this.center(t)}force(e=50,t=25){console.log(e,t);const r=this.app.graphManager.graph,o=V0(r,{iterations:parseInt(e),settings:{gravity:parseInt(t),scalingRatio:100}});this.center(o)}hFlip(){const e=this.canvas.width/2,t=this.app.graphManager.graph,r=At.collectLayout(t);Object.values(r).forEach(o=>{const a=e-o.x;o.x+=2*a}),At.assignLayout(t,r)}vFlip(){const e=this.canvas.height/2,t=this.app.graphManager.graph,r=At.collectLayout(t);Object.values(r).forEach(o=>{const a=e-o.y;o.y+=2*a}),At.assignLayout(t,r)}rotate(e=90){const t=this.app.graphManager.graph,r=e*Math.PI/-180,o=qo.rotation(t,r);this.center(o)}center(e=void 0){const t=this.canvas.width/2,r=this.canvas.height/2,o=this.app.graphManager.graph;e||(e=At.collectLayout(o));const a={x:Tn(Object.values(e),h=>h.x),y:Tn(Object.values(e),h=>h.y)},s=t-a.x,l=r-a.y;Object.values(e).forEach(h=>{h.x+=s,h.y+=l}),At.assignLayout(o,e)}random(){const e=this.canvas.width/2,t=this.canvas.height/2,r=this.app.graphManager.graph,o=qo.random(r,{scale:Math.max(e,t)-200});this.center(o)}organizeNodesInCircle(){const e=this.canvas.width/2,t=this.canvas.height/2,r=this.app.graphManager.graph,o=Math.min(e*.5,t*.5),a=qo.circular(r,{scale:o,dimensions:["x","y"]});Object.values(a).forEach(s=>{s.x+=e,s.y+=t}),At.assignLayout(r,a)}organizeNodesInLine(){const e=this.canvas.width/2,t=this.canvas.height/2,r=e*.1,o=this.app.graphManager.graph,a=this.app.graphManager.graph.nodes(),s={};if(o.order===0)return;const l=(this.canvas.width-2*r)/Math.max(1,o.order-1);a.forEach((h,d)=>{s[h]={x:r+d*l,y:t}}),At.assignLayout(o,s)}organizeNodesInTwoLines(e,t=50){const r=this.canvas.width/2,o=this.canvas.height/2,a=r*.1,s=t,l=this.app.graphManager.graph,h=this.app.graphManager.graph.nodes(),d={};if(l.order===0)return;if(e>l.order){console.error("Line1 count exceeds total nodes.");return}const p=h.slice(0,e),y=h.slice(e),v=p.length,m=y.length,E=v>1?(this.canvas.width-2*a)/(v-1):0,_=m>1?(this.canvas.width-2*a)/(m-1):0,A=o-s,C=o+s;p.forEach((k,M)=>{d[k]={x:a+M*E,y:A}}),y.forEach((k,M)=>{d[k]={x:a+M*_,y:C}}),At.assignLayout(l,d)}rotate180(){const e=this.canvas.width,t=this.canvas.height,r=e*.15,o=this.app.graphManager.graph,a=o.nodes(),s={};if(o.order===0)return;let l=1/0,h=1/0,d=-1/0,p=-1/0;a.forEach(k=>{const{x:M,y:x}=o.getNodeAttributes(k);M<l&&(l=M),x<h&&(h=x),M>d&&(d=M),x>p&&(p=x)});const y=d-l,v=p-h,m=(e-2*r)/y,E=(t-2*r)/v,_=Math.min(m,E),A=(e-y*_)/2,C=(t-v*_)/2;o.forEachNode((k,M)=>{const x=e-((M.x-l)*_+A),N=t-((M.y-h)*_+C);s[k]={x,y:N}}),At.assignLayout(o,s)}}var Ur={exports:{}},ib=Ur.exports,Rc;function ob(){return Rc||(Rc=1,function(n,e){(function(t,r){n.exports=r()})(ib,function(){function t(c,u){var f=Object.keys(c);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(c);u&&(g=g.filter(function(b){return Object.getOwnPropertyDescriptor(c,b).enumerable})),f.push.apply(f,g)}return f}function r(c){for(var u=1;u<arguments.length;u++){var f=arguments[u]!=null?arguments[u]:{};u%2?t(Object(f),!0).forEach(function(g){h(c,g,f[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(f)):t(Object(f)).forEach(function(g){Object.defineProperty(c,g,Object.getOwnPropertyDescriptor(f,g))})}return c}function o(c){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},o(c)}function a(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function s(c,u){for(var f=0;f<u.length;f++){var g=u[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(c,_(g.key),g)}}function l(c,u,f){return u&&s(c.prototype,u),Object.defineProperty(c,"prototype",{writable:!1}),c}function h(c,u,f){return(u=_(u))in c?Object.defineProperty(c,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):c[u]=f,c}function d(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(u&&u.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),u&&y(c,u)}function p(c){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)},p(c)}function y(c,u){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,g){return f.__proto__=g,f},y(c,u)}function v(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function m(c){var u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var f,g=p(c);if(u){var b=p(this).constructor;f=Reflect.construct(g,arguments,b)}else f=g.apply(this,arguments);return function(S,I){if(I&&(typeof I=="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v(S)}(this,f)}}function E(){return E=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(c,u,f){var g=function(S,I){for(;!Object.prototype.hasOwnProperty.call(S,I)&&(S=p(S))!==null;);return S}(c,u);if(g){var b=Object.getOwnPropertyDescriptor(g,u);return b.get?b.get.call(arguments.length<3?c:f):b.value}},E.apply(this,arguments)}function _(c){var u=function(f,g){if(typeof f!="object"||f===null)return f;var b=f[Symbol.toPrimitive];if(b!==void 0){var S=b.call(f,g);if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}(c,"string");return typeof u=="symbol"?u:u+""}var A=function(c){return!(!c||!c.Window)&&c instanceof c.Window},C=void 0,k=void 0;function M(c){C=c;var u=c.document.createTextNode("");u.ownerDocument!==c.document&&typeof c.wrap=="function"&&c.wrap(u)===u&&(c=c.wrap(c)),k=c}function x(c){return A(c)?c:(c.ownerDocument||c).defaultView||k.window}typeof window<"u"&&window&&M(window);var N=function(c){return!!c&&o(c)==="object"},O=function(c){return typeof c=="function"},w={window:function(c){return c===k||A(c)},docFrag:function(c){return N(c)&&c.nodeType===11},object:N,func:O,number:function(c){return typeof c=="number"},bool:function(c){return typeof c=="boolean"},string:function(c){return typeof c=="string"},element:function(c){if(!c||o(c)!=="object")return!1;var u=x(c)||k;return/object|function/.test(typeof Element>"u"?"undefined":o(Element))?c instanceof Element||c instanceof u.Element:c.nodeType===1&&typeof c.nodeName=="string"},plainObject:function(c){return N(c)&&!!c.constructor&&/function Object\b/.test(c.constructor.toString())},array:function(c){return N(c)&&c.length!==void 0&&O(c.splice)}};function L(c){var u=c.interaction;if(u.prepared.name==="drag"){var f=u.prepared.axis;f==="x"?(u.coords.cur.page.y=u.coords.start.page.y,u.coords.cur.client.y=u.coords.start.client.y,u.coords.velocity.client.y=0,u.coords.velocity.page.y=0):f==="y"&&(u.coords.cur.page.x=u.coords.start.page.x,u.coords.cur.client.x=u.coords.start.client.x,u.coords.velocity.client.x=0,u.coords.velocity.page.x=0)}}function z(c){var u=c.iEvent,f=c.interaction;if(f.prepared.name==="drag"){var g=f.prepared.axis;if(g==="x"||g==="y"){var b=g==="x"?"y":"x";u.page[b]=f.coords.start.page[b],u.client[b]=f.coords.start.client[b],u.delta[b]=0}}}var T={id:"actions/drag",install:function(c){var u=c.actions,f=c.Interactable,g=c.defaults;f.prototype.draggable=T.draggable,u.map.drag=T,u.methodDict.drag="draggable",g.actions.drag=T.defaults},listeners:{"interactions:before-action-move":L,"interactions:action-resume":L,"interactions:action-move":z,"auto-start:check":function(c){var u=c.interaction,f=c.interactable,g=c.buttons,b=f.options.drag;if(b&&b.enabled&&(!u.pointerIsDown||!/mouse|pointer/.test(u.pointerType)||g&f.options.drag.mouseButtons))return c.action={name:"drag",axis:b.lockAxis==="start"?b.startAxis:b.lockAxis},!1}},draggable:function(c){return w.object(c)?(this.options.drag.enabled=c.enabled!==!1,this.setPerAction("drag",c),this.setOnEvents("drag",c),/^(xy|x|y|start)$/.test(c.lockAxis)&&(this.options.drag.lockAxis=c.lockAxis),/^(xy|x|y)$/.test(c.startAxis)&&(this.options.drag.startAxis=c.startAxis),this):w.bool(c)?(this.options.drag.enabled=c,this):this.options.drag},beforeMove:L,move:z,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(c){return c.search("drag")===0}},q=T,j={init:function(c){var u=c;j.document=u.document,j.DocumentFragment=u.DocumentFragment||P,j.SVGElement=u.SVGElement||P,j.SVGSVGElement=u.SVGSVGElement||P,j.SVGElementInstance=u.SVGElementInstance||P,j.Element=u.Element||P,j.HTMLElement=u.HTMLElement||j.Element,j.Event=u.Event,j.Touch=u.Touch||P,j.PointerEvent=u.PointerEvent||u.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function P(){}var ee=j,J={init:function(c){var u=ee.Element,f=c.navigator||{};J.supportsTouch="ontouchstart"in c||w.func(c.DocumentTouch)&&ee.document instanceof c.DocumentTouch,J.supportsPointerEvent=f.pointerEnabled!==!1&&!!ee.PointerEvent,J.isIOS=/iP(hone|od|ad)/.test(f.platform),J.isIOS7=/iP(hone|od|ad)/.test(f.platform)&&/OS 7[^\d]/.test(f.appVersion),J.isIe9=/MSIE 9/.test(f.userAgent),J.isOperaMobile=f.appName==="Opera"&&J.supportsTouch&&/Presto/.test(f.userAgent),J.prefixedMatchesSelector="matches"in u.prototype?"matches":"webkitMatchesSelector"in u.prototype?"webkitMatchesSelector":"mozMatchesSelector"in u.prototype?"mozMatchesSelector":"oMatchesSelector"in u.prototype?"oMatchesSelector":"msMatchesSelector",J.pEventTypes=J.supportsPointerEvent?ee.PointerEvent===c.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,J.wheelEvent=ee.document&&"onmousewheel"in ee.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},F=J;function D(c,u){if(c.contains)return c.contains(u);for(;u;){if(u===c)return!0;u=u.parentNode}return!1}function U(c,u){for(;w.element(c);){if(Q(c,u))return c;c=H(c)}return null}function H(c){var u=c.parentNode;if(w.docFrag(u)){for(;(u=u.host)&&w.docFrag(u););return u}return u}function Q(c,u){return k!==C&&(u=u.replace(/\/deep\//g," ")),c[F.prefixedMatchesSelector](u)}var W=function(c){return c.parentNode||c.host};function Y(c,u){for(var f,g=[],b=c;(f=W(b))&&b!==u&&f!==b.ownerDocument;)g.unshift(b),b=f;return g}function X(c,u,f){for(;w.element(c);){if(Q(c,u))return!0;if((c=H(c))===f)return Q(c,u)}return!1}function te(c){return c.correspondingUseElement||c}function se(c){var u=c instanceof ee.SVGElement?c.getBoundingClientRect():c.getClientRects()[0];return u&&{left:u.left,right:u.right,top:u.top,bottom:u.bottom,width:u.width||u.right-u.left,height:u.height||u.bottom-u.top}}function fe(c){var u,f=se(c);if(!F.isIOS7&&f){var g={x:(u=(u=x(c))||k).scrollX||u.document.documentElement.scrollLeft,y:u.scrollY||u.document.documentElement.scrollTop};f.left+=g.x,f.right+=g.x,f.top+=g.y,f.bottom+=g.y}return f}function pe(c){for(var u=[];c;)u.push(c),c=H(c);return u}function Ee(c){return!!w.string(c)&&(ee.document.querySelector(c),!0)}function re(c,u){for(var f in u)c[f]=u[f];return c}function de(c,u,f){return c==="parent"?H(f):c==="self"?u.getRect(f):U(f,c)}function ye(c,u,f,g){var b=c;return w.string(b)?b=de(b,u,f):w.func(b)&&(b=b.apply(void 0,g)),w.element(b)&&(b=fe(b)),b}function be(c){return c&&{x:"x"in c?c.x:c.left,y:"y"in c?c.y:c.top}}function De(c){return!c||"x"in c&&"y"in c||((c=re({},c)).x=c.left||0,c.y=c.top||0,c.width=c.width||(c.right||0)-c.x,c.height=c.height||(c.bottom||0)-c.y),c}function ge(c,u,f){c.left&&(u.left+=f.x),c.right&&(u.right+=f.x),c.top&&(u.top+=f.y),c.bottom&&(u.bottom+=f.y),u.width=u.right-u.left,u.height=u.bottom-u.top}function ue(c,u,f){var g=f&&c.options[f];return be(ye(g&&g.origin||c.options.origin,c,u,[c&&u]))||{x:0,y:0}}function V(c,u){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(G){return!0},g=arguments.length>3?arguments[3]:void 0;if(g=g||{},w.string(c)&&c.search(" ")!==-1&&(c=Fe(c)),w.array(c))return c.forEach(function(G){return V(G,u,f,g)}),g;if(w.object(c)&&(u=c,c=""),w.func(u)&&f(c))g[c]=g[c]||[],g[c].push(u);else if(w.array(u))for(var b=0,S=u;b<S.length;b++){var I=S[b];V(c,I,f,g)}else if(w.object(u))for(var $ in u)V(Fe($).map(function(G){return"".concat(c).concat(G)}),u[$],f,g);return g}function Fe(c){return c.trim().split(/ +/)}var ze=function(c,u){return Math.sqrt(c*c+u*u)},Qe=["webkit","moz"];function Te(c,u){c.__set||(c.__set={});var f=function(b){if(Qe.some(function(S){return b.indexOf(S)===0}))return 1;typeof c[b]!="function"&&b!=="__set"&&Object.defineProperty(c,b,{get:function(){return b in c.__set?c.__set[b]:c.__set[b]=u[b]},set:function(S){c.__set[b]=S},configurable:!0})};for(var g in u)f(g);return c}function Ie(c,u){c.page=c.page||{},c.page.x=u.page.x,c.page.y=u.page.y,c.client=c.client||{},c.client.x=u.client.x,c.client.y=u.client.y,c.timeStamp=u.timeStamp}function Oe(c){c.page.x=0,c.page.y=0,c.client.x=0,c.client.y=0}function je(c){return c instanceof ee.Event||c instanceof ee.Touch}function Be(c,u,f){return c=c||"page",(f=f||{}).x=u[c+"X"],f.y=u[c+"Y"],f}function wt(c,u){return u=u||{x:0,y:0},F.isOperaMobile&&je(c)?(Be("screen",c,u),u.x+=window.scrollX,u.y+=window.scrollY):Be("page",c,u),u}function et(c){return w.number(c.pointerId)?c.pointerId:c.identifier}function tt(c,u,f){var g=u.length>1?Ge(u):u[0];wt(g,c.page),function(b,S){S=S||{},F.isOperaMobile&&je(b)?Be("screen",b,S):Be("client",b,S)}(g,c.client),c.timeStamp=f}function Ue(c){var u=[];return w.array(c)?(u[0]=c[0],u[1]=c[1]):c.type==="touchend"?c.touches.length===1?(u[0]=c.touches[0],u[1]=c.changedTouches[0]):c.touches.length===0&&(u[0]=c.changedTouches[0],u[1]=c.changedTouches[1]):(u[0]=c.touches[0],u[1]=c.touches[1]),u}function Ge(c){for(var u={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},f=0;f<c.length;f++){var g=c[f];for(var b in u)u[b]+=g[b]}for(var S in u)u[S]/=c.length;return u}function it(c){if(!c.length)return null;var u=Ue(c),f=Math.min(u[0].pageX,u[1].pageX),g=Math.min(u[0].pageY,u[1].pageY),b=Math.max(u[0].pageX,u[1].pageX),S=Math.max(u[0].pageY,u[1].pageY);return{x:f,y:g,left:f,top:g,right:b,bottom:S,width:b-f,height:S-g}}function ot(c,u){var f=u+"X",g=u+"Y",b=Ue(c),S=b[0][f]-b[1][f],I=b[0][g]-b[1][g];return ze(S,I)}function Yt(c,u){var f=u+"X",g=u+"Y",b=Ue(c),S=b[1][f]-b[0][f],I=b[1][g]-b[0][g];return 180*Math.atan2(I,S)/Math.PI}function sr(c){return w.string(c.pointerType)?c.pointerType:w.number(c.pointerType)?[void 0,void 0,"touch","pen","mouse"][c.pointerType]:/touch/.test(c.type||"")||c instanceof ee.Touch?"touch":"mouse"}function en(c){var u=w.func(c.composedPath)?c.composedPath():c.path;return[te(u?u[0]:c.target),te(c.currentTarget)]}var ur=function(){function c(u){a(this,c),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=u}return l(c,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),c}();Object.defineProperty(ur.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var tn=function(c,u){for(var f=0;f<u.length;f++){var g=u[f];c.push(g)}return c},rn=function(c){return tn([],c)},It=function(c,u){for(var f=0;f<c.length;f++)if(u(c[f],f,c))return f;return-1},ht=function(c,u){return c[It(c,u)]},Et=function(c){d(f,c);var u=m(f);function f(g,b,S){var I;a(this,f),(I=u.call(this,b._interaction)).dropzone=void 0,I.dragEvent=void 0,I.relatedTarget=void 0,I.draggable=void 0,I.propagationStopped=!1,I.immediatePropagationStopped=!1;var $=S==="dragleave"?g.prev:g.cur,G=$.element,B=$.dropzone;return I.type=S,I.target=G,I.currentTarget=G,I.dropzone=B,I.dragEvent=b,I.relatedTarget=b.target,I.draggable=b.interactable,I.timeStamp=b.timeStamp,I}return l(f,[{key:"reject",value:function(){var g=this,b=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&b.cur.dropzone===this.dropzone&&b.cur.element===this.target)if(b.prev.dropzone=this.dropzone,b.prev.element=this.target,b.rejected=!0,b.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var S=b.activeDrops,I=It(S,function(G){var B=G.dropzone,R=G.element;return B===g.dropzone&&R===g.target});b.activeDrops.splice(I,1);var $=new f(b,this.dragEvent,"dropdeactivate");$.dropzone=this.dropzone,$.target=this.target,this.dropzone.fire($)}else this.dropzone.fire(new f(b,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),f}(ur);function Vt(c,u){for(var f=0,g=c.slice();f<g.length;f++){var b=g[f],S=b.dropzone,I=b.element;u.dropzone=S,u.target=I,S.fire(u),u.propagationStopped=u.immediatePropagationStopped=!1}}function cr(c,u){for(var f=function(S,I){for(var $=[],G=0,B=S.interactables.list;G<B.length;G++){var R=B[G];if(R.options.drop.enabled){var K=R.options.drop.accept;if(!(w.element(K)&&K!==I||w.string(K)&&!Q(I,K)||w.func(K)&&!K({dropzone:R,draggableElement:I})))for(var Z=0,ie=R.getAllElements();Z<ie.length;Z++){var ne=ie[Z];ne!==I&&$.push({dropzone:R,element:ne,rect:R.getRect(ne)})}}}return $}(c,u),g=0;g<f.length;g++){var b=f[g];b.rect=b.dropzone.getRect(b.element)}return f}function nn(c,u,f){for(var g=c.dropState,b=c.interactable,S=c.element,I=[],$=0,G=g.activeDrops;$<G.length;$++){var B=G[$],R=B.dropzone,K=B.element,Z=B.rect,ie=R.dropCheck(u,f,b,S,K,Z);I.push(ie?K:null)}var ne=function(oe){for(var he,ce,ve,Se=[],Ce=0;Ce<oe.length;Ce++){var xe=oe[Ce],ke=oe[he];if(xe&&Ce!==he)if(ke){var We=W(xe),Me=W(ke);if(We!==xe.ownerDocument)if(Me!==xe.ownerDocument)if(We!==Me){Se=Se.length?Se:Y(ke);var rt=void 0;if(ke instanceof ee.HTMLElement&&xe instanceof ee.SVGElement&&!(xe instanceof ee.SVGSVGElement)){if(xe===Me)continue;rt=xe.ownerSVGElement}else rt=xe;for(var ft=Y(rt,ke.ownerDocument),zt=0;ft[zt]&&ft[zt]===Se[zt];)zt++;var fn=[ft[zt-1],ft[zt],Se[zt]];if(fn[0])for(var zr=fn[0].lastChild;zr;){if(zr===fn[1]){he=Ce,Se=ft;break}if(zr===fn[2])break;zr=zr.previousSibling}}else ve=ke,(parseInt(x(ce=xe).getComputedStyle(ce).zIndex,10)||0)>=(parseInt(x(ve).getComputedStyle(ve).zIndex,10)||0)&&(he=Ce);else he=Ce}else he=Ce}return he}(I);return g.activeDrops[ne]||null}function Cr(c,u,f){var g=c.dropState,b={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return f.type==="dragstart"&&(b.activate=new Et(g,f,"dropactivate"),b.activate.target=null,b.activate.dropzone=null),f.type==="dragend"&&(b.deactivate=new Et(g,f,"dropdeactivate"),b.deactivate.target=null,b.deactivate.dropzone=null),g.rejected||(g.cur.element!==g.prev.element&&(g.prev.dropzone&&(b.leave=new Et(g,f,"dragleave"),f.dragLeave=b.leave.target=g.prev.element,f.prevDropzone=b.leave.dropzone=g.prev.dropzone),g.cur.dropzone&&(b.enter=new Et(g,f,"dragenter"),f.dragEnter=g.cur.element,f.dropzone=g.cur.dropzone)),f.type==="dragend"&&g.cur.dropzone&&(b.drop=new Et(g,f,"drop"),f.dropzone=g.cur.dropzone,f.relatedTarget=g.cur.element),f.type==="dragmove"&&g.cur.dropzone&&(b.move=new Et(g,f,"dropmove"),f.dropzone=g.cur.dropzone)),b}function Vn(c,u){var f=c.dropState,g=f.activeDrops,b=f.cur,S=f.prev;u.leave&&S.dropzone.fire(u.leave),u.enter&&b.dropzone.fire(u.enter),u.move&&b.dropzone.fire(u.move),u.drop&&b.dropzone.fire(u.drop),u.deactivate&&Vt(g,u.deactivate),f.prev.dropzone=b.dropzone,f.prev.element=b.element}function Aa(c,u){var f=c.interaction,g=c.iEvent,b=c.event;if(g.type==="dragmove"||g.type==="dragend"){var S=f.dropState;u.dynamicDrop&&(S.activeDrops=cr(u,f.element));var I=g,$=nn(f,I,b);S.rejected=S.rejected&&!!$&&$.dropzone===S.cur.dropzone&&$.element===S.cur.element,S.cur.dropzone=$&&$.dropzone,S.cur.element=$&&$.element,S.events=Cr(f,0,I)}}var ka={id:"actions/drop",install:function(c){var u=c.actions,f=c.interactStatic,g=c.Interactable,b=c.defaults;c.usePlugin(q),g.prototype.dropzone=function(S){return function(I,$){if(w.object($)){if(I.options.drop.enabled=$.enabled!==!1,$.listeners){var G=V($.listeners),B=Object.keys(G).reduce(function(K,Z){return K[/^(enter|leave)/.test(Z)?"drag".concat(Z):/^(activate|deactivate|move)/.test(Z)?"drop".concat(Z):Z]=G[Z],K},{}),R=I.options.drop.listeners;R&&I.off(R),I.on(B),I.options.drop.listeners=B}return w.func($.ondrop)&&I.on("drop",$.ondrop),w.func($.ondropactivate)&&I.on("dropactivate",$.ondropactivate),w.func($.ondropdeactivate)&&I.on("dropdeactivate",$.ondropdeactivate),w.func($.ondragenter)&&I.on("dragenter",$.ondragenter),w.func($.ondragleave)&&I.on("dragleave",$.ondragleave),w.func($.ondropmove)&&I.on("dropmove",$.ondropmove),/^(pointer|center)$/.test($.overlap)?I.options.drop.overlap=$.overlap:w.number($.overlap)&&(I.options.drop.overlap=Math.max(Math.min(1,$.overlap),0)),"accept"in $&&(I.options.drop.accept=$.accept),"checker"in $&&(I.options.drop.checker=$.checker),I}return w.bool($)?(I.options.drop.enabled=$,I):I.options.drop}(this,S)},g.prototype.dropCheck=function(S,I,$,G,B,R){return function(K,Z,ie,ne,oe,he,ce){var ve=!1;if(!(ce=ce||K.getRect(he)))return!!K.options.drop.checker&&K.options.drop.checker(Z,ie,ve,K,he,ne,oe);var Se=K.options.drop.overlap;if(Se==="pointer"){var Ce=ue(ne,oe,"drag"),xe=wt(Z);xe.x+=Ce.x,xe.y+=Ce.y;var ke=xe.x>ce.left&&xe.x<ce.right,We=xe.y>ce.top&&xe.y<ce.bottom;ve=ke&&We}var Me=ne.getRect(oe);if(Me&&Se==="center"){var rt=Me.left+Me.width/2,ft=Me.top+Me.height/2;ve=rt>=ce.left&&rt<=ce.right&&ft>=ce.top&&ft<=ce.bottom}return Me&&w.number(Se)&&(ve=Math.max(0,Math.min(ce.right,Me.right)-Math.max(ce.left,Me.left))*Math.max(0,Math.min(ce.bottom,Me.bottom)-Math.max(ce.top,Me.top))/(Me.width*Me.height)>=Se),K.options.drop.checker&&(ve=K.options.drop.checker(Z,ie,ve,K,he,ne,oe)),ve}(this,S,I,$,G,B,R)},f.dynamicDrop=function(S){return w.bool(S)?(c.dynamicDrop=S,f):c.dynamicDrop},re(u.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),u.methodDict.drop="dropzone",c.dynamicDrop=!1,b.actions.drop=ka.defaults},listeners:{"interactions:before-action-start":function(c){var u=c.interaction;u.prepared.name==="drag"&&(u.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(c,u){var f=c.interaction,g=(c.event,c.iEvent);if(f.prepared.name==="drag"){var b=f.dropState;b.activeDrops=[],b.events={},b.activeDrops=cr(u,f.element),b.events=Cr(f,0,g),b.events.activate&&(Vt(b.activeDrops,b.events.activate),u.fire("actions/drop:start",{interaction:f,dragEvent:g}))}},"interactions:action-move":Aa,"interactions:after-action-move":function(c,u){var f=c.interaction,g=c.iEvent;if(f.prepared.name==="drag"){var b=f.dropState;Vn(f,b.events),u.fire("actions/drop:move",{interaction:f,dragEvent:g}),b.events={}}},"interactions:action-end":function(c,u){if(c.interaction.prepared.name==="drag"){var f=c.interaction,g=c.iEvent;Aa(c,u),Vn(f,f.dropState.events),u.fire("actions/drop:end",{interaction:f,dragEvent:g})}},"interactions:stop":function(c){var u=c.interaction;if(u.prepared.name==="drag"){var f=u.dropState;f&&(f.activeDrops=null,f.events=null,f.cur.dropzone=null,f.cur.element=null,f.prev.dropzone=null,f.prev.element=null,f.rejected=!1)}}},getActiveDrops:cr,getDrop:nn,getDropEvents:Cr,fireDropEvents:Vn,filterEventType:function(c){return c.search("drag")===0||c.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},jl=ka;function Qn(c){var u=c.interaction,f=c.iEvent,g=c.phase;if(u.prepared.name==="gesture"){var b=u.pointers.map(function(B){return B.pointer}),S=g==="start",I=g==="end",$=u.interactable.options.deltaSource;if(f.touches=[b[0],b[1]],S)f.distance=ot(b,$),f.box=it(b),f.scale=1,f.ds=0,f.angle=Yt(b,$),f.da=0,u.gesture.startDistance=f.distance,u.gesture.startAngle=f.angle;else if(I||u.pointers.length<2){var G=u.prevEvent;f.distance=G.distance,f.box=G.box,f.scale=G.scale,f.ds=0,f.angle=G.angle,f.da=0}else f.distance=ot(b,$),f.box=it(b),f.scale=f.distance/u.gesture.startDistance,f.angle=Yt(b,$),f.ds=f.scale-u.gesture.scale,f.da=f.angle-u.gesture.angle;u.gesture.distance=f.distance,u.gesture.angle=f.angle,w.number(f.scale)&&f.scale!==1/0&&!isNaN(f.scale)&&(u.gesture.scale=f.scale)}}var Zn={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(c){var u=c.actions,f=c.Interactable,g=c.defaults;f.prototype.gesturable=function(b){return w.object(b)?(this.options.gesture.enabled=b.enabled!==!1,this.setPerAction("gesture",b),this.setOnEvents("gesture",b),this):w.bool(b)?(this.options.gesture.enabled=b,this):this.options.gesture},u.map.gesture=Zn,u.methodDict.gesture="gesturable",g.actions.gesture=Zn.defaults},listeners:{"interactions:action-start":Qn,"interactions:action-move":Qn,"interactions:action-end":Qn,"interactions:new":function(c){c.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(c){if(!(c.interaction.pointers.length<2)){var u=c.interactable.options.gesture;if(u&&u.enabled)return c.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(c){return c.search("gesture")===0}},Bl=Zn;function Ul(c,u,f,g,b,S,I){if(!u)return!1;if(u===!0){var $=w.number(S.width)?S.width:S.right-S.left,G=w.number(S.height)?S.height:S.bottom-S.top;if(I=Math.min(I,Math.abs((c==="left"||c==="right"?$:G)/2)),$<0&&(c==="left"?c="right":c==="right"&&(c="left")),G<0&&(c==="top"?c="bottom":c==="bottom"&&(c="top")),c==="left"){var B=$>=0?S.left:S.right;return f.x<B+I}if(c==="top"){var R=G>=0?S.top:S.bottom;return f.y<R+I}if(c==="right")return f.x>($>=0?S.right:S.left)-I;if(c==="bottom")return f.y>(G>=0?S.bottom:S.top)-I}return!!w.element(g)&&(w.element(u)?u===g:X(g,u,b))}function Ca(c){var u=c.iEvent,f=c.interaction;if(f.prepared.name==="resize"&&f.resizeAxes){var g=u;f.interactable.options.resize.square?(f.resizeAxes==="y"?g.delta.x=g.delta.y:g.delta.y=g.delta.x,g.axes="xy"):(g.axes=f.resizeAxes,f.resizeAxes==="x"?g.delta.y=0:f.resizeAxes==="y"&&(g.delta.x=0))}}var Mt,Qt,Lt={id:"actions/resize",before:["actions/drag"],install:function(c){var u=c.actions,f=c.browser,g=c.Interactable,b=c.defaults;Lt.cursors=function(S){return S.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(f),Lt.defaultMargin=f.supportsTouch||f.supportsPointerEvent?20:10,g.prototype.resizable=function(S){return function(I,$,G){return w.object($)?(I.options.resize.enabled=$.enabled!==!1,I.setPerAction("resize",$),I.setOnEvents("resize",$),w.string($.axis)&&/^x$|^y$|^xy$/.test($.axis)?I.options.resize.axis=$.axis:$.axis===null&&(I.options.resize.axis=G.defaults.actions.resize.axis),w.bool($.preserveAspectRatio)?I.options.resize.preserveAspectRatio=$.preserveAspectRatio:w.bool($.square)&&(I.options.resize.square=$.square),I):w.bool($)?(I.options.resize.enabled=$,I):I.options.resize}(this,S,c)},u.map.resize=Lt,u.methodDict.resize="resizable",b.actions.resize=Lt.defaults},listeners:{"interactions:new":function(c){c.interaction.resizeAxes="xy"},"interactions:action-start":function(c){(function(u){var f=u.iEvent,g=u.interaction;if(g.prepared.name==="resize"&&g.prepared.edges){var b=f,S=g.rect;g._rects={start:re({},S),corrected:re({},S),previous:re({},S),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},b.edges=g.prepared.edges,b.rect=g._rects.corrected,b.deltaRect=g._rects.delta}})(c),Ca(c)},"interactions:action-move":function(c){(function(u){var f=u.iEvent,g=u.interaction;if(g.prepared.name==="resize"&&g.prepared.edges){var b=f,S=g.interactable.options.resize.invert,I=S==="reposition"||S==="negate",$=g.rect,G=g._rects,B=G.start,R=G.corrected,K=G.delta,Z=G.previous;if(re(Z,R),I){if(re(R,$),S==="reposition"){if(R.top>R.bottom){var ie=R.top;R.top=R.bottom,R.bottom=ie}if(R.left>R.right){var ne=R.left;R.left=R.right,R.right=ne}}}else R.top=Math.min($.top,B.bottom),R.bottom=Math.max($.bottom,B.top),R.left=Math.min($.left,B.right),R.right=Math.max($.right,B.left);for(var oe in R.width=R.right-R.left,R.height=R.bottom-R.top,R)K[oe]=R[oe]-Z[oe];b.edges=g.prepared.edges,b.rect=R,b.deltaRect=K}})(c),Ca(c)},"interactions:action-end":function(c){var u=c.iEvent,f=c.interaction;if(f.prepared.name==="resize"&&f.prepared.edges){var g=u;g.edges=f.prepared.edges,g.rect=f._rects.corrected,g.deltaRect=f._rects.delta}},"auto-start:check":function(c){var u=c.interaction,f=c.interactable,g=c.element,b=c.rect,S=c.buttons;if(b){var I=re({},u.coords.cur.page),$=f.options.resize;if($&&$.enabled&&(!u.pointerIsDown||!/mouse|pointer/.test(u.pointerType)||S&$.mouseButtons)){if(w.object($.edges)){var G={left:!1,right:!1,top:!1,bottom:!1};for(var B in G)G[B]=Ul(B,$.edges[B],I,u._latestPointer.eventTarget,g,b,$.margin||Lt.defaultMargin);G.left=G.left&&!G.right,G.top=G.top&&!G.bottom,(G.left||G.right||G.top||G.bottom)&&(c.action={name:"resize",edges:G})}else{var R=$.axis!=="y"&&I.x>b.right-Lt.defaultMargin,K=$.axis!=="x"&&I.y>b.bottom-Lt.defaultMargin;(R||K)&&(c.action={name:"resize",axes:(R?"x":"")+(K?"y":"")})}return!c.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(c){var u=c.edges,f=c.axis,g=c.name,b=Lt.cursors,S=null;if(f)S=b[g+f];else if(u){for(var I="",$=0,G=["top","bottom","left","right"];$<G.length;$++){var B=G[$];u[B]&&(I+=B)}S=b[I]}return S},filterEventType:function(c){return c.search("resize")===0},defaultMargin:null},Hl=Lt,Wl={id:"actions",install:function(c){c.usePlugin(Bl),c.usePlugin(Hl),c.usePlugin(q),c.usePlugin(jl)}},Da=0,Ft={request:function(c){return Mt(c)},cancel:function(c){return Qt(c)},init:function(c){if(Mt=c.requestAnimationFrame,Qt=c.cancelAnimationFrame,!Mt)for(var u=["ms","moz","webkit","o"],f=0;f<u.length;f++){var g=u[f];Mt=c["".concat(g,"RequestAnimationFrame")],Qt=c["".concat(g,"CancelAnimationFrame")]||c["".concat(g,"CancelRequestAnimationFrame")]}Mt=Mt&&Mt.bind(c),Qt=Qt&&Qt.bind(c),Mt||(Mt=function(b){var S=Date.now(),I=Math.max(0,16-(S-Da)),$=c.setTimeout(function(){b(S+I)},I);return Da=S+I,$},Qt=function(b){return clearTimeout(b)})}},_e={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(c){_e.isScrolling=!0,Ft.cancel(_e.i),c.autoScroll=_e,_e.interaction=c,_e.prevTime=_e.now(),_e.i=Ft.request(_e.scroll)},stop:function(){_e.isScrolling=!1,_e.interaction&&(_e.interaction.autoScroll=null),Ft.cancel(_e.i)},scroll:function(){var c=_e.interaction,u=c.interactable,f=c.element,g=c.prepared.name,b=u.options[g].autoScroll,S=Na(b.container,u,f),I=_e.now(),$=(I-_e.prevTime)/1e3,G=b.speed*$;if(G>=1){var B={x:_e.x*G,y:_e.y*G};if(B.x||B.y){var R=Ia(S);w.window(S)?S.scrollBy(B.x,B.y):S&&(S.scrollLeft+=B.x,S.scrollTop+=B.y);var K=Ia(S),Z={x:K.x-R.x,y:K.y-R.y};(Z.x||Z.y)&&u.fire({type:"autoscroll",target:f,interactable:u,delta:Z,interaction:c,container:S})}_e.prevTime=I}_e.isScrolling&&(Ft.cancel(_e.i),_e.i=Ft.request(_e.scroll))},check:function(c,u){var f;return(f=c.options[u].autoScroll)==null?void 0:f.enabled},onInteractionMove:function(c){var u=c.interaction,f=c.pointer;if(u.interacting()&&_e.check(u.interactable,u.prepared.name))if(u.simulation)_e.x=_e.y=0;else{var g,b,S,I,$=u.interactable,G=u.element,B=u.prepared.name,R=$.options[B].autoScroll,K=Na(R.container,$,G);if(w.window(K))I=f.clientX<_e.margin,g=f.clientY<_e.margin,b=f.clientX>K.innerWidth-_e.margin,S=f.clientY>K.innerHeight-_e.margin;else{var Z=se(K);I=f.clientX<Z.left+_e.margin,g=f.clientY<Z.top+_e.margin,b=f.clientX>Z.right-_e.margin,S=f.clientY>Z.bottom-_e.margin}_e.x=b?1:I?-1:0,_e.y=S?1:g?-1:0,_e.isScrolling||(_e.margin=R.margin,_e.speed=R.speed,_e.start(u))}}};function Na(c,u,f){return(w.string(c)?de(c,u,f):c)||x(f)}function Ia(c){return w.window(c)&&(c=window.document.body),{x:c.scrollLeft,y:c.scrollTop}}var Kl={id:"auto-scroll",install:function(c){var u=c.defaults,f=c.actions;c.autoScroll=_e,_e.now=function(){return c.now()},f.phaselessTypes.autoscroll=!0,u.perAction.autoScroll=_e.defaults},listeners:{"interactions:new":function(c){c.interaction.autoScroll=null},"interactions:destroy":function(c){c.interaction.autoScroll=null,_e.stop(),_e.interaction&&(_e.interaction=null)},"interactions:stop":_e.stop,"interactions:action-move":function(c){return _e.onInteractionMove(c)}}},Xl=Kl;function Dr(c,u){var f=!1;return function(){return f||(k.console.warn(u),f=!0),c.apply(this,arguments)}}function Jn(c,u){return c.name=u.name,c.axis=u.axis,c.edges=u.edges,c}function Yl(c){return w.bool(c)?(this.options.styleCursor=c,this):c===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Vl(c){return w.func(c)?(this.options.actionChecker=c,this):c===null?(delete this.options.actionChecker,this):this.options.actionChecker}var Ql={id:"auto-start/interactableMethods",install:function(c){var u=c.Interactable;u.prototype.getAction=function(f,g,b,S){var I=function($,G,B,R,K){var Z=$.getRect(R),ie=G.buttons||{0:1,1:4,3:8,4:16}[G.button],ne={action:null,interactable:$,interaction:B,element:R,rect:Z,buttons:ie};return K.fire("auto-start:check",ne),ne.action}(this,g,b,S,c);return this.options.actionChecker?this.options.actionChecker(f,g,I,this,S,b):I},u.prototype.ignoreFrom=Dr(function(f){return this._backCompatOption("ignoreFrom",f)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),u.prototype.allowFrom=Dr(function(f){return this._backCompatOption("allowFrom",f)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),u.prototype.actionChecker=Vl,u.prototype.styleCursor=Yl}};function Ma(c,u,f,g,b){return u.testIgnoreAllow(u.options[c.name],f,g)&&u.options[c.name].enabled&&on(u,f,c,b)?c:null}function Zl(c,u,f,g,b,S,I){for(var $=0,G=g.length;$<G;$++){var B=g[$],R=b[$],K=B.getAction(u,f,c,R);if(K){var Z=Ma(K,B,R,S,I);if(Z)return{action:Z,interactable:B,element:R}}}return{action:null,interactable:null,element:null}}function La(c,u,f,g,b){var S=[],I=[],$=g;function G(R){S.push(R),I.push($)}for(;w.element($);){S=[],I=[],b.interactables.forEachMatch($,G);var B=Zl(c,u,f,S,I,g,b);if(B.action&&!B.interactable.options[B.action.name].manualStart)return B;$=H($)}return{action:null,interactable:null,element:null}}function za(c,u,f){var g=u.action,b=u.interactable,S=u.element;g=g||{name:null},c.interactable=b,c.element=S,Jn(c.prepared,g),c.rect=b&&g.name?b.getRect(S):null,Ta(c,f),f.fire("autoStart:prepared",{interaction:c})}function on(c,u,f,g){var b=c.options,S=b[f.name].max,I=b[f.name].maxPerElement,$=g.autoStart.maxInteractions,G=0,B=0,R=0;if(!(S&&I&&$))return!1;for(var K=0,Z=g.interactions.list;K<Z.length;K++){var ie=Z[K],ne=ie.prepared.name;if(ie.interacting()&&(++G>=$||ie.interactable===c&&((B+=ne===f.name?1:0)>=S||ie.element===u&&(R++,ne===f.name&&R>=I))))return!1}return $>0}function $a(c,u){return w.number(c)?(u.autoStart.maxInteractions=c,this):u.autoStart.maxInteractions}function ei(c,u,f){var g=f.autoStart.cursorElement;g&&g!==c&&(g.style.cursor=""),c.ownerDocument.documentElement.style.cursor=u,c.style.cursor=u,f.autoStart.cursorElement=u?c:null}function Ta(c,u){var f=c.interactable,g=c.element,b=c.prepared;if(c.pointerType==="mouse"&&f&&f.options.styleCursor){var S="";if(b.name){var I=f.options[b.name].cursorChecker;S=w.func(I)?I(b,f,g,c._interacting):u.actions.map[b.name].getCursor(b)}ei(c.element,S||"",u)}else u.autoStart.cursorElement&&ei(u.autoStart.cursorElement,"",u)}var Jl={id:"auto-start/base",before:["actions"],install:function(c){var u=c.interactStatic,f=c.defaults;c.usePlugin(Ql),f.base.actionChecker=null,f.base.styleCursor=!0,re(f.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),u.maxInteractions=function(g){return $a(g,c)},c.autoStart={maxInteractions:1/0,withinInteractionLimit:on,cursorElement:null}},listeners:{"interactions:down":function(c,u){var f=c.interaction,g=c.pointer,b=c.event,S=c.eventTarget;f.interacting()||za(f,La(f,g,b,S,u),u)},"interactions:move":function(c,u){(function(f,g){var b=f.interaction,S=f.pointer,I=f.event,$=f.eventTarget;b.pointerType!=="mouse"||b.pointerIsDown||b.interacting()||za(b,La(b,S,I,$,g),g)})(c,u),function(f,g){var b=f.interaction;if(b.pointerIsDown&&!b.interacting()&&b.pointerWasMoved&&b.prepared.name){g.fire("autoStart:before-start",f);var S=b.interactable,I=b.prepared.name;I&&S&&(S.options[I].manualStart||!on(S,b.element,b.prepared,g)?b.stop():(b.start(b.prepared,S,b.element),Ta(b,g)))}}(c,u)},"interactions:stop":function(c,u){var f=c.interaction,g=f.interactable;g&&g.options.styleCursor&&ei(f.element,"",u)}},maxInteractions:$a,withinInteractionLimit:on,validateAction:Ma},ti=Jl,ed={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(c,u){var f=c.interaction,g=c.eventTarget,b=c.dx,S=c.dy;if(f.prepared.name==="drag"){var I=Math.abs(b),$=Math.abs(S),G=f.interactable.options.drag,B=G.startAxis,R=I>$?"x":I<$?"y":"xy";if(f.prepared.axis=G.lockAxis==="start"?R[0]:G.lockAxis,R!=="xy"&&B!=="xy"&&B!==R){f.prepared.name=null;for(var K=g,Z=function(ne){if(ne!==f.interactable){var oe=f.interactable.options.drag;if(!oe.manualStart&&ne.testIgnoreAllow(oe,K,g)){var he=ne.getAction(f.downPointer,f.downEvent,f,K);if(he&&he.name==="drag"&&function(ce,ve){if(!ve)return!1;var Se=ve.options.drag.startAxis;return ce==="xy"||Se==="xy"||Se===ce}(R,ne)&&ti.validateAction(he,ne,K,g,u))return ne}}};w.element(K);){var ie=u.interactables.forEachMatch(K,Z);if(ie){f.prepared.name="drag",f.interactable=ie,f.element=K;break}K=H(K)}}}}}};function ri(c){var u=c.prepared&&c.prepared.name;if(!u)return null;var f=c.interactable.options;return f[u].hold||f[u].delay}var td={id:"auto-start/hold",install:function(c){var u=c.defaults;c.usePlugin(ti),u.perAction.hold=0,u.perAction.delay=0},listeners:{"interactions:new":function(c){c.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(c){var u=c.interaction,f=ri(u);f>0&&(u.autoStartHoldTimer=setTimeout(function(){u.start(u.prepared,u.interactable,u.element)},f))},"interactions:move":function(c){var u=c.interaction,f=c.duplicate;u.autoStartHoldTimer&&u.pointerWasMoved&&!f&&(clearTimeout(u.autoStartHoldTimer),u.autoStartHoldTimer=null)},"autoStart:before-start":function(c){var u=c.interaction;ri(u)>0&&(u.prepared.name=null)}},getHoldDuration:ri},rd=td,nd={id:"auto-start",install:function(c){c.usePlugin(ti),c.usePlugin(rd),c.usePlugin(ed)}},id=function(c){return/^(always|never|auto)$/.test(c)?(this.options.preventDefault=c,this):w.bool(c)?(this.options.preventDefault=c?"always":"never",this):this.options.preventDefault};function od(c){var u=c.interaction,f=c.event;u.interactable&&u.interactable.checkAndPreventDefault(f)}var Pa={id:"core/interactablePreventDefault",install:function(c){var u=c.Interactable;u.prototype.preventDefault=id,u.prototype.checkAndPreventDefault=function(f){return function(g,b,S){var I=g.options.preventDefault;if(I!=="never")if(I!=="always"){if(b.events.supportsPassive&&/^touch(start|move)$/.test(S.type)){var $=x(S.target).document,G=b.getDocOptions($);if(!G||!G.events||G.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(S.type)||w.element(S.target)&&Q(S.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||S.preventDefault()}else S.preventDefault()}(this,c,f)},c.interactions.docEvents.push({type:"dragstart",listener:function(f){for(var g=0,b=c.interactions.list;g<b.length;g++){var S=b[g];if(S.element&&(S.element===f.target||D(S.element,f.target)))return void S.interactable.checkAndPreventDefault(f)}}})},listeners:["down","move","up","cancel"].reduce(function(c,u){return c["interactions:".concat(u)]=od,c},{})};function an(c,u){if(u.phaselessTypes[c])return!0;for(var f in u.map)if(c.indexOf(f)===0&&c.substr(f.length)in u.phases)return!0;return!1}function lr(c){var u={};for(var f in c){var g=c[f];w.plainObject(g)?u[f]=lr(g):w.array(g)?u[f]=rn(g):u[f]=g}return u}var ni=function(){function c(u){a(this,c),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=u,this.result=sn(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return l(c,[{key:"start",value:function(u,f){var g,b,S=u.phase,I=this.interaction,$=function(B){var R=B.interactable.options[B.prepared.name],K=R.modifiers;return K&&K.length?K:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(Z){var ie=R[Z];return ie&&ie.enabled&&{options:ie,methods:ie._methods}}).filter(function(Z){return!!Z})}(I);this.prepareStates($),this.startEdges=re({},I.edges),this.edges=re({},this.startEdges),this.startOffset=(g=I.rect,b=f,g?{left:b.x-g.left,top:b.y-g.top,right:g.right-b.x,bottom:g.bottom-b.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var G=this.fillArg({phase:S,pageCoords:f,preEnd:!1});return this.result=sn(),this.startAll(G),this.result=this.setAll(G)}},{key:"fillArg",value:function(u){var f=this.interaction;return u.interaction=f,u.interactable=f.interactable,u.element=f.element,u.rect||(u.rect=f.rect),u.edges||(u.edges=this.startEdges),u.startOffset=this.startOffset,u}},{key:"startAll",value:function(u){for(var f=0,g=this.states;f<g.length;f++){var b=g[f];b.methods.start&&(u.state=b,b.methods.start(u))}}},{key:"setAll",value:function(u){var f=u.phase,g=u.preEnd,b=u.skipModifiers,S=u.rect,I=u.edges;u.coords=re({},u.pageCoords),u.rect=re({},S),u.edges=re({},I);for(var $=b?this.states.slice(b):this.states,G=sn(u.coords,u.rect),B=0;B<$.length;B++){var R,K=$[B],Z=K.options,ie=re({},u.coords),ne=null;(R=K.methods)!=null&&R.set&&this.shouldDo(Z,g,f)&&(u.state=K,ne=K.methods.set(u),ge(u.edges,u.rect,{x:u.coords.x-ie.x,y:u.coords.y-ie.y})),G.eventProps.push(ne)}re(this.edges,u.edges),G.delta.x=u.coords.x-u.pageCoords.x,G.delta.y=u.coords.y-u.pageCoords.y,G.rectDelta.left=u.rect.left-S.left,G.rectDelta.right=u.rect.right-S.right,G.rectDelta.top=u.rect.top-S.top,G.rectDelta.bottom=u.rect.bottom-S.bottom;var oe=this.result.coords,he=this.result.rect;if(oe&&he){var ce=G.rect.left!==he.left||G.rect.right!==he.right||G.rect.top!==he.top||G.rect.bottom!==he.bottom;G.changed=ce||oe.x!==G.coords.x||oe.y!==G.coords.y}return G}},{key:"applyToInteraction",value:function(u){var f=this.interaction,g=u.phase,b=f.coords.cur,S=f.coords.start,I=this.result,$=this.startDelta,G=I.delta;g==="start"&&re(this.startDelta,I.delta);for(var B=0,R=[[S,$],[b,G]];B<R.length;B++){var K=R[B],Z=K[0],ie=K[1];Z.page.x+=ie.x,Z.page.y+=ie.y,Z.client.x+=ie.x,Z.client.y+=ie.y}var ne=this.result.rectDelta,oe=u.rect||f.rect;oe.left+=ne.left,oe.right+=ne.right,oe.top+=ne.top,oe.bottom+=ne.bottom,oe.width=oe.right-oe.left,oe.height=oe.bottom-oe.top}},{key:"setAndApply",value:function(u){var f=this.interaction,g=u.phase,b=u.preEnd,S=u.skipModifiers,I=this.setAll(this.fillArg({preEnd:b,phase:g,pageCoords:u.modifiedCoords||f.coords.cur.page}));if(this.result=I,!I.changed&&(!S||S<this.states.length)&&f.interacting())return!1;if(u.modifiedCoords){var $=f.coords.cur.page,G={x:u.modifiedCoords.x-$.x,y:u.modifiedCoords.y-$.y};I.coords.x+=G.x,I.coords.y+=G.y,I.delta.x+=G.x,I.delta.y+=G.y}this.applyToInteraction(u)}},{key:"beforeEnd",value:function(u){var f=u.interaction,g=u.event,b=this.states;if(b&&b.length){for(var S=!1,I=0;I<b.length;I++){var $=b[I];u.state=$;var G=$.options,B=$.methods,R=B.beforeEnd&&B.beforeEnd(u);if(R)return this.endResult=R,!1;S=S||!S&&this.shouldDo(G,!0,u.phase,!0)}S&&f.move({event:g,preEnd:!0})}}},{key:"stop",value:function(u){var f=u.interaction;if(this.states&&this.states.length){var g=re({states:this.states,interactable:f.interactable,element:f.element,rect:null},u);this.fillArg(g);for(var b=0,S=this.states;b<S.length;b++){var I=S[b];g.state=I,I.methods.stop&&I.methods.stop(g)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(u){this.states=[];for(var f=0;f<u.length;f++){var g=u[f],b=g.options,S=g.methods,I=g.name;this.states.push({options:b,methods:S,index:f,name:I})}return this.states}},{key:"restoreInteractionCoords",value:function(u){var f=u.interaction,g=f.coords,b=f.rect,S=f.modification;if(S.result){for(var I=S.startDelta,$=S.result,G=$.delta,B=$.rectDelta,R=0,K=[[g.start,I],[g.cur,G]];R<K.length;R++){var Z=K[R],ie=Z[0],ne=Z[1];ie.page.x-=ne.x,ie.page.y-=ne.y,ie.client.x-=ne.x,ie.client.y-=ne.y}b.left-=B.left,b.right-=B.right,b.top-=B.top,b.bottom-=B.bottom}}},{key:"shouldDo",value:function(u,f,g,b){return!(!u||u.enabled===!1||b&&!u.endOnly||u.endOnly&&!f||g==="start"&&!u.setStart)}},{key:"copyFrom",value:function(u){this.startOffset=u.startOffset,this.startDelta=u.startDelta,this.startEdges=u.startEdges,this.edges=u.edges,this.states=u.states.map(function(f){return lr(f)}),this.result=sn(re({},u.result.coords),re({},u.result.rect))}},{key:"destroy",value:function(){for(var u in this)this[u]=null}}]),c}();function sn(c,u){return{rect:u,coords:c,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function jt(c,u){var f=c.defaults,g={start:c.start,set:c.set,beforeEnd:c.beforeEnd,stop:c.stop},b=function(S){var I=S||{};for(var $ in I.enabled=I.enabled!==!1,f)$ in I||(I[$]=f[$]);var G={options:I,methods:g,name:u,enable:function(){return I.enabled=!0,G},disable:function(){return I.enabled=!1,G}};return G};return u&&typeof u=="string"&&(b._defaults=f,b._methods=g),b}function Nr(c){var u=c.iEvent,f=c.interaction.modification.result;f&&(u.modifiers=f.eventProps)}var ad={id:"modifiers/base",before:["actions"],install:function(c){c.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(c){var u=c.interaction;u.modification=new ni(u)},"interactions:before-action-start":function(c){var u=c.interaction,f=c.interaction.modification;f.start(c,u.coords.start.page),u.edges=f.edges,f.applyToInteraction(c)},"interactions:before-action-move":function(c){var u=c.interaction,f=u.modification,g=f.setAndApply(c);return u.edges=f.edges,g},"interactions:before-action-end":function(c){var u=c.interaction,f=u.modification,g=f.beforeEnd(c);return u.edges=f.startEdges,g},"interactions:action-start":Nr,"interactions:action-move":Nr,"interactions:action-end":Nr,"interactions:after-action-start":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:after-action-move":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:stop":function(c){return c.interaction.modification.stop(c)}}},Oa=ad,Ga={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},ii=function(c){d(f,c);var u=m(f);function f(g,b,S,I,$,G,B){var R;a(this,f),(R=u.call(this,g)).relatedTarget=null,R.screenX=void 0,R.screenY=void 0,R.button=void 0,R.buttons=void 0,R.ctrlKey=void 0,R.shiftKey=void 0,R.altKey=void 0,R.metaKey=void 0,R.page=void 0,R.client=void 0,R.delta=void 0,R.rect=void 0,R.x0=void 0,R.y0=void 0,R.t0=void 0,R.dt=void 0,R.duration=void 0,R.clientX0=void 0,R.clientY0=void 0,R.velocity=void 0,R.speed=void 0,R.swipe=void 0,R.axes=void 0,R.preEnd=void 0,$=$||g.element;var K=g.interactable,Z=(K&&K.options||Ga).deltaSource,ie=ue(K,$,S),ne=I==="start",oe=I==="end",he=ne?v(R):g.prevEvent,ce=ne?g.coords.start:oe?{page:he.page,client:he.client,timeStamp:g.coords.cur.timeStamp}:g.coords.cur;return R.page=re({},ce.page),R.client=re({},ce.client),R.rect=re({},g.rect),R.timeStamp=ce.timeStamp,oe||(R.page.x-=ie.x,R.page.y-=ie.y,R.client.x-=ie.x,R.client.y-=ie.y),R.ctrlKey=b.ctrlKey,R.altKey=b.altKey,R.shiftKey=b.shiftKey,R.metaKey=b.metaKey,R.button=b.button,R.buttons=b.buttons,R.target=$,R.currentTarget=$,R.preEnd=G,R.type=B||S+(I||""),R.interactable=K,R.t0=ne?g.pointers[g.pointers.length-1].downTime:he.t0,R.x0=g.coords.start.page.x-ie.x,R.y0=g.coords.start.page.y-ie.y,R.clientX0=g.coords.start.client.x-ie.x,R.clientY0=g.coords.start.client.y-ie.y,R.delta=ne||oe?{x:0,y:0}:{x:R[Z].x-he[Z].x,y:R[Z].y-he[Z].y},R.dt=g.coords.delta.timeStamp,R.duration=R.timeStamp-R.t0,R.velocity=re({},g.coords.velocity[Z]),R.speed=ze(R.velocity.x,R.velocity.y),R.swipe=oe||I==="inertiastart"?R.getSwipe():null,R}return l(f,[{key:"getSwipe",value:function(){var g=this._interaction;if(g.prevEvent.speed<600||this.timeStamp-g.prevEvent.timeStamp>150)return null;var b=180*Math.atan2(g.prevEvent.velocityY,g.prevEvent.velocityX)/Math.PI;b<0&&(b+=360);var S=112.5<=b&&b<247.5,I=202.5<=b&&b<337.5;return{up:I,down:!I&&22.5<=b&&b<157.5,left:S,right:!S&&(292.5<=b||b<67.5),angle:b,speed:g.prevEvent.speed,velocity:{x:g.prevEvent.velocityX,y:g.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),f}(ur);Object.defineProperties(ii.prototype,{pageX:{get:function(){return this.page.x},set:function(c){this.page.x=c}},pageY:{get:function(){return this.page.y},set:function(c){this.page.y=c}},clientX:{get:function(){return this.client.x},set:function(c){this.client.x=c}},clientY:{get:function(){return this.client.y},set:function(c){this.client.y=c}},dx:{get:function(){return this.delta.x},set:function(c){this.delta.x=c}},dy:{get:function(){return this.delta.y},set:function(c){this.delta.y=c}},velocityX:{get:function(){return this.velocity.x},set:function(c){this.velocity.x=c}},velocityY:{get:function(){return this.velocity.y},set:function(c){this.velocity.y=c}}});var sd=l(function c(u,f,g,b,S){a(this,c),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=u,this.pointer=f,this.event=g,this.downTime=b,this.downTarget=S}),ud=function(c){return c.interactable="",c.element="",c.prepared="",c.pointerIsDown="",c.pointerWasMoved="",c._proxy="",c}({}),Ra=function(c){return c.start="",c.move="",c.end="",c.stop="",c.interacting="",c}({}),cd=0,ld=function(){function c(u){var f=this,g=u.pointerType,b=u.scopeFire;a(this,c),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Dr(function(R){this.move(R)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=cd++,this._scopeFire=b,this.pointerType=g;var S=this;this._proxy={};var I=function(R){Object.defineProperty(f._proxy,R,{get:function(){return S[R]}})};for(var $ in ud)I($);var G=function(R){Object.defineProperty(f._proxy,R,{value:function(){return S[R].apply(S,arguments)}})};for(var B in Ra)G(B);this._scopeFire("interactions:new",{interaction:this})}return l(c,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(u,f,g){var b=this.updatePointer(u,f,g,!0),S=this.pointers[b];this._scopeFire("interactions:down",{pointer:u,event:f,eventTarget:g,pointerIndex:b,pointerInfo:S,type:"down",interaction:this})}},{key:"start",value:function(u,f,g){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(u.name==="gesture"?2:1)||!f.options[u.name].enabled)&&(Jn(this.prepared,u),this.interactable=f,this.element=g,this.rect=f.getRect(g),this.edges=this.prepared.edges?re({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(u,f,g){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(u,f,g,!1);var b,S,I=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(b=this.coords.cur.client.x-this.coords.start.client.x,S=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=ze(b,S)>this.pointerMoveTolerance);var $,G,B,R=this.getPointerIndex(u),K={pointer:u,pointerIndex:R,pointerInfo:this.pointers[R],event:f,type:"move",eventTarget:g,dx:b,dy:S,duplicate:I,interaction:this};I||($=this.coords.velocity,G=this.coords.delta,B=Math.max(G.timeStamp/1e3,.001),$.page.x=G.page.x/B,$.page.y=G.page.y/B,$.client.x=G.client.x/B,$.client.y=G.client.y/B,$.timeStamp=B),this._scopeFire("interactions:move",K),I||this.simulation||(this.interacting()&&(K.type=null,this.move(K)),this.pointerWasMoved&&Ie(this.coords.prev,this.coords.cur))}},{key:"move",value:function(u){u&&u.event||Oe(this.coords.delta),(u=re({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},u||{})).phase="move",this._doPhase(u)}},{key:"pointerUp",value:function(u,f,g,b){var S=this.getPointerIndex(u);S===-1&&(S=this.updatePointer(u,f,g,!1));var I=/cancel$/i.test(f.type)?"cancel":"up";this._scopeFire("interactions:".concat(I),{pointer:u,pointerIndex:S,pointerInfo:this.pointers[S],event:f,eventTarget:g,type:I,curEventTarget:b,interaction:this}),this.simulation||this.end(f),this.removePointer(u,f)}},{key:"documentBlur",value:function(u){this.end(u),this._scopeFire("interactions:blur",{event:u,type:"blur",interaction:this})}},{key:"end",value:function(u){var f;this._ending=!0,u=u||this._latestPointer.event,this.interacting()&&(f=this._doPhase({event:u,interaction:this,phase:"end"})),this._ending=!1,f===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(u){var f=et(u);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:It(this.pointers,function(g){return g.id===f})}},{key:"getPointerInfo",value:function(u){return this.pointers[this.getPointerIndex(u)]}},{key:"updatePointer",value:function(u,f,g,b){var S,I,$,G=et(u),B=this.getPointerIndex(u),R=this.pointers[B];return b=b!==!1&&(b||/(down|start)$/i.test(f.type)),R?R.pointer=u:(R=new sd(G,u,f,null,null),B=this.pointers.length,this.pointers.push(R)),tt(this.coords.cur,this.pointers.map(function(K){return K.pointer}),this._now()),S=this.coords.delta,I=this.coords.prev,$=this.coords.cur,S.page.x=$.page.x-I.page.x,S.page.y=$.page.y-I.page.y,S.client.x=$.client.x-I.client.x,S.client.y=$.client.y-I.client.y,S.timeStamp=$.timeStamp-I.timeStamp,b&&(this.pointerIsDown=!0,R.downTime=this.coords.cur.timeStamp,R.downTarget=g,Te(this.downPointer,u),this.interacting()||(Ie(this.coords.start,this.coords.cur),Ie(this.coords.prev,this.coords.cur),this.downEvent=f,this.pointerWasMoved=!1)),this._updateLatestPointer(u,f,g),this._scopeFire("interactions:update-pointer",{pointer:u,event:f,eventTarget:g,down:b,pointerInfo:R,pointerIndex:B,interaction:this}),B}},{key:"removePointer",value:function(u,f){var g=this.getPointerIndex(u);if(g!==-1){var b=this.pointers[g];this._scopeFire("interactions:remove-pointer",{pointer:u,event:f,eventTarget:null,pointerIndex:g,pointerInfo:b,interaction:this}),this.pointers.splice(g,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(u,f,g){this._latestPointer.pointer=u,this._latestPointer.event=f,this._latestPointer.eventTarget=g}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(u,f,g,b){return new ii(this,u,this.prepared.name,f,this.element,g,b)}},{key:"_fireEvent",value:function(u){var f;(f=this.interactable)==null||f.fire(u),(!this.prevEvent||u.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=u)}},{key:"_doPhase",value:function(u){var f=u.event,g=u.phase,b=u.preEnd,S=u.type,I=this.rect;if(I&&g==="move"&&(ge(this.edges,I,this.coords.delta[this.interactable.options.deltaSource]),I.width=I.right-I.left,I.height=I.bottom-I.top),this._scopeFire("interactions:before-action-".concat(g),u)===!1)return!1;var $=u.iEvent=this._createPreparedEvent(f,g,b,S);return this._scopeFire("interactions:action-".concat(g),u),g==="start"&&(this.prevEvent=$),this._fireEvent($),this._scopeFire("interactions:after-action-".concat(g),u),!0}},{key:"_now",value:function(){return Date.now()}}]),c}();function qa(c){Fa(c.interaction)}function Fa(c){if(!function(f){return!(!f.offset.pending.x&&!f.offset.pending.y)}(c))return!1;var u=c.offset.pending;return oi(c.coords.cur,u),oi(c.coords.delta,u),ge(c.edges,c.rect,u),u.x=0,u.y=0,!0}function dd(c){var u=c.x,f=c.y;this.offset.pending.x+=u,this.offset.pending.y+=f,this.offset.total.x+=u,this.offset.total.y+=f}function oi(c,u){var f=c.page,g=c.client,b=u.x,S=u.y;f.x+=b,f.y+=S,g.x+=b,g.y+=S}Ra.offsetBy="";var hd={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(c){c.Interaction.prototype.offsetBy=dd},listeners:{"interactions:new":function(c){c.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(c){return function(u){u.pointerIsDown&&(oi(u.coords.cur,u.offset.total),u.offset.pending.x=0,u.offset.pending.y=0)}(c.interaction)},"interactions:before-action-start":qa,"interactions:before-action-move":qa,"interactions:before-action-end":function(c){var u=c.interaction;if(Fa(u))return u.move({offset:!0}),u.end(),!1},"interactions:stop":function(c){var u=c.interaction;u.offset.total.x=0,u.offset.total.y=0,u.offset.pending.x=0,u.offset.pending.y=0}}},ja=hd,fd=function(){function c(u){a(this,c),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=u}return l(c,[{key:"start",value:function(u){var f=this.interaction,g=un(f);if(!g||!g.enabled)return!1;var b=f.coords.velocity.client,S=ze(b.x,b.y),I=this.modification||(this.modification=new ni(f));if(I.copyFrom(f.modification),this.t0=f._now(),this.allowResume=g.allowResume,this.v0=S,this.currentOffset={x:0,y:0},this.startCoords=f.coords.cur.page,this.modifierArg=I.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-f.coords.cur.timeStamp<50&&S>g.minSpeed&&S>g.endSpeed)this.startInertia();else{if(I.result=I.setAll(this.modifierArg),!I.result.changed)return!1;this.startSmoothEnd()}return f.modification.result.rect=null,f.offsetBy(this.targetOffset),f._doPhase({interaction:f,event:u,phase:"inertiastart"}),f.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),f.modification.result.rect=null,this.active=!0,f.simulation=this,!0}},{key:"startInertia",value:function(){var u=this,f=this.interaction.coords.velocity.client,g=un(this.interaction),b=g.resistance,S=-Math.log(g.endSpeed/this.v0)/b;this.targetOffset={x:(f.x-S)/b,y:(f.y-S)/b},this.te=S,this.lambda_v0=b/this.v0,this.one_ve_v0=1-g.endSpeed/this.v0;var I=this.modification,$=this.modifierArg;$.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},I.result=I.setAll($),I.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+I.result.delta.x,y:this.targetOffset.y+I.result.delta.y}),this.onNextFrame(function(){return u.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var u=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return u.smoothEndTick()})}},{key:"onNextFrame",value:function(u){var f=this;this.timeout=Ft.request(function(){f.active&&u()})}},{key:"inertiaTick",value:function(){var u,f,g,b,S,I,$,G=this,B=this.interaction,R=un(B).resistance,K=(B._now()-this.t0)/1e3;if(K<this.te){var Z,ie=1-(Math.exp(-R*K)-this.lambda_v0)/this.one_ve_v0;this.isModified?(u=0,f=0,g=this.targetOffset.x,b=this.targetOffset.y,S=this.modifiedOffset.x,I=this.modifiedOffset.y,Z={x:Ba($=ie,u,g,S),y:Ba($,f,b,I)}):Z={x:this.targetOffset.x*ie,y:this.targetOffset.y*ie};var ne={x:Z.x-this.currentOffset.x,y:Z.y-this.currentOffset.y};this.currentOffset.x+=ne.x,this.currentOffset.y+=ne.y,B.offsetBy(ne),B.move(),this.onNextFrame(function(){return G.inertiaTick()})}else B.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var u=this,f=this.interaction,g=f._now()-this.t0,b=un(f).smoothEndDuration;if(g<b){var S={x:Ua(g,0,this.targetOffset.x,b),y:Ua(g,0,this.targetOffset.y,b)},I={x:S.x-this.currentOffset.x,y:S.y-this.currentOffset.y};this.currentOffset.x+=I.x,this.currentOffset.y+=I.y,f.offsetBy(I),f.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return u.smoothEndTick()})}else f.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(u){var f=u.pointer,g=u.event,b=u.eventTarget,S=this.interaction;S.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),S.updatePointer(f,g,b,!0),S._doPhase({interaction:S,event:g,phase:"resume"}),Ie(S.coords.prev,S.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Ft.cancel(this.timeout)}}]),c}();function un(c){var u=c.interactable,f=c.prepared;return u&&u.options&&f.name&&u.options[f.name].inertia}var pd={id:"inertia",before:["modifiers","actions"],install:function(c){var u=c.defaults;c.usePlugin(ja),c.usePlugin(Oa),c.actions.phases.inertiastart=!0,c.actions.phases.resume=!0,u.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(c){var u=c.interaction;u.inertia=new fd(u)},"interactions:before-action-end":function(c){var u=c.interaction,f=c.event;return(!u._interacting||u.simulation||!u.inertia.start(f))&&null},"interactions:down":function(c){var u=c.interaction,f=c.eventTarget,g=u.inertia;if(g.active)for(var b=f;w.element(b);){if(b===u.element){g.resume(c);break}b=H(b)}},"interactions:stop":function(c){var u=c.interaction.inertia;u.active&&u.stop()},"interactions:before-action-resume":function(c){var u=c.interaction.modification;u.stop(c),u.start(c,c.interaction.coords.cur.page),u.applyToInteraction(c)},"interactions:before-action-inertiastart":function(c){return c.interaction.modification.setAndApply(c)},"interactions:action-resume":Nr,"interactions:action-inertiastart":Nr,"interactions:after-action-inertiastart":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:after-action-resume":function(c){return c.interaction.modification.restoreInteractionCoords(c)}}};function Ba(c,u,f,g){var b=1-c;return b*b*u+2*b*c*f+c*c*g}function Ua(c,u,f,g){return-f*(c/=g)*(c-2)+u}var gd=pd;function Ha(c,u){for(var f=0;f<u.length;f++){var g=u[f];if(c.immediatePropagationStopped)break;g(c)}}var Wa=function(){function c(u){a(this,c),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=re({},u||{})}return l(c,[{key:"fire",value:function(u){var f,g=this.global;(f=this.types[u.type])&&Ha(u,f),!u.propagationStopped&&g&&(f=g[u.type])&&Ha(u,f)}},{key:"on",value:function(u,f){var g=V(u,f);for(u in g)this.types[u]=tn(this.types[u]||[],g[u])}},{key:"off",value:function(u,f){var g=V(u,f);for(u in g){var b=this.types[u];if(b&&b.length)for(var S=0,I=g[u];S<I.length;S++){var $=I[S],G=b.indexOf($);G!==-1&&b.splice(G,1)}}}},{key:"getRect",value:function(u){return null}}]),c}(),yd=function(){function c(u){a(this,c),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=u,Te(this,u)}return l(c,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),c}();function Ir(c){return w.object(c)?{capture:!!c.capture,passive:!!c.passive}:{capture:!!c,passive:!1}}function cn(c,u){return c===u||(typeof c=="boolean"?!!u.capture===c&&!u.passive:!!c.capture==!!u.capture&&!!c.passive==!!u.passive)}var vd={id:"events",install:function(c){var u,f=[],g={},b=[],S={add:I,remove:$,addDelegate:function(R,K,Z,ie,ne){var oe=Ir(ne);if(!g[Z]){g[Z]=[];for(var he=0;he<b.length;he++){var ce=b[he];I(ce,Z,G),I(ce,Z,B,!0)}}var ve=g[Z],Se=ht(ve,function(Ce){return Ce.selector===R&&Ce.context===K});Se||(Se={selector:R,context:K,listeners:[]},ve.push(Se)),Se.listeners.push({func:ie,options:oe})},removeDelegate:function(R,K,Z,ie,ne){var oe,he=Ir(ne),ce=g[Z],ve=!1;if(ce)for(oe=ce.length-1;oe>=0;oe--){var Se=ce[oe];if(Se.selector===R&&Se.context===K){for(var Ce=Se.listeners,xe=Ce.length-1;xe>=0;xe--){var ke=Ce[xe];if(ke.func===ie&&cn(ke.options,he)){Ce.splice(xe,1),Ce.length||(ce.splice(oe,1),$(K,Z,G),$(K,Z,B,!0)),ve=!0;break}}if(ve)break}}},delegateListener:G,delegateUseCapture:B,delegatedEvents:g,documents:b,targets:f,supportsOptions:!1,supportsPassive:!1};function I(R,K,Z,ie){if(R.addEventListener){var ne=Ir(ie),oe=ht(f,function(he){return he.eventTarget===R});oe||(oe={eventTarget:R,events:{}},f.push(oe)),oe.events[K]||(oe.events[K]=[]),ht(oe.events[K],function(he){return he.func===Z&&cn(he.options,ne)})||(R.addEventListener(K,Z,S.supportsOptions?ne:ne.capture),oe.events[K].push({func:Z,options:ne}))}}function $(R,K,Z,ie){if(R.addEventListener&&R.removeEventListener){var ne=It(f,function(We){return We.eventTarget===R}),oe=f[ne];if(oe&&oe.events)if(K!=="all"){var he=!1,ce=oe.events[K];if(ce){if(Z==="all"){for(var ve=ce.length-1;ve>=0;ve--){var Se=ce[ve];$(R,K,Se.func,Se.options)}return}for(var Ce=Ir(ie),xe=0;xe<ce.length;xe++){var ke=ce[xe];if(ke.func===Z&&cn(ke.options,Ce)){R.removeEventListener(K,Z,S.supportsOptions?Ce:Ce.capture),ce.splice(xe,1),ce.length===0&&(delete oe.events[K],he=!0);break}}}he&&!Object.keys(oe.events).length&&f.splice(ne,1)}else for(K in oe.events)oe.events.hasOwnProperty(K)&&$(R,K,"all")}}function G(R,K){for(var Z=Ir(K),ie=new yd(R),ne=g[R.type],oe=en(R)[0],he=oe;w.element(he);){for(var ce=0;ce<ne.length;ce++){var ve=ne[ce],Se=ve.selector,Ce=ve.context;if(Q(he,Se)&&D(Ce,oe)&&D(Ce,he)){var xe=ve.listeners;ie.currentTarget=he;for(var ke=0;ke<xe.length;ke++){var We=xe[ke];cn(We.options,Z)&&We.func(ie)}}}he=H(he)}}function B(R){return G(R,!0)}return(u=c.document)==null||u.createElement("div").addEventListener("test",null,{get capture(){return S.supportsOptions=!0},get passive(){return S.supportsPassive=!0}}),c.events=S,S}},ai={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(c){for(var u=0,f=ai.methodOrder;u<f.length;u++){var g=f[u],b=ai[g](c);if(b)return b}return null},simulationResume:function(c){var u=c.pointerType,f=c.eventType,g=c.eventTarget,b=c.scope;if(!/down|start/i.test(f))return null;for(var S=0,I=b.interactions.list;S<I.length;S++){var $=I[S],G=g;if($.simulation&&$.simulation.allowResume&&$.pointerType===u)for(;G;){if(G===$.element)return $;G=H(G)}}return null},mouseOrPen:function(c){var u,f=c.pointerId,g=c.pointerType,b=c.eventType,S=c.scope;if(g!=="mouse"&&g!=="pen")return null;for(var I=0,$=S.interactions.list;I<$.length;I++){var G=$[I];if(G.pointerType===g){if(G.simulation&&!Ka(G,f))continue;if(G.interacting())return G;u||(u=G)}}if(u)return u;for(var B=0,R=S.interactions.list;B<R.length;B++){var K=R[B];if(!(K.pointerType!==g||/down/i.test(b)&&K.simulation))return K}return null},hasPointer:function(c){for(var u=c.pointerId,f=0,g=c.scope.interactions.list;f<g.length;f++){var b=g[f];if(Ka(b,u))return b}return null},idle:function(c){for(var u=c.pointerType,f=0,g=c.scope.interactions.list;f<g.length;f++){var b=g[f];if(b.pointers.length===1){var S=b.interactable;if(S&&(!S.options.gesture||!S.options.gesture.enabled))continue}else if(b.pointers.length>=2)continue;if(!b.interacting()&&u===b.pointerType)return b}return null}};function Ka(c,u){return c.pointers.some(function(f){return f.id===u})}var md=ai,si=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Xa(c,u){return function(f){var g=u.interactions.list,b=sr(f),S=en(f),I=S[0],$=S[1],G=[];if(/^touch/.test(f.type)){u.prevTouchTime=u.now();for(var B=0,R=f.changedTouches;B<R.length;B++){var K=R[B],Z={pointer:K,pointerId:et(K),pointerType:b,eventType:f.type,eventTarget:I,curEventTarget:$,scope:u},ie=Ya(Z);G.push([Z.pointer,Z.eventTarget,Z.curEventTarget,ie])}}else{var ne=!1;if(!F.supportsPointerEvent&&/mouse/.test(f.type)){for(var oe=0;oe<g.length&&!ne;oe++)ne=g[oe].pointerType!=="mouse"&&g[oe].pointerIsDown;ne=ne||u.now()-u.prevTouchTime<500||f.timeStamp===0}if(!ne){var he={pointer:f,pointerId:et(f),pointerType:b,eventType:f.type,curEventTarget:$,eventTarget:I,scope:u},ce=Ya(he);G.push([he.pointer,he.eventTarget,he.curEventTarget,ce])}}for(var ve=0;ve<G.length;ve++){var Se=G[ve],Ce=Se[0],xe=Se[1],ke=Se[2];Se[3][c](Ce,f,xe,ke)}}}function Ya(c){var u=c.pointerType,f=c.scope,g={interaction:md.search(c),searchDetails:c};return f.fire("interactions:find",g),g.interaction||f.interactions.new({pointerType:u})}function ui(c,u){var f=c.doc,g=c.scope,b=c.options,S=g.interactions.docEvents,I=g.events,$=I[u];for(var G in g.browser.isIOS&&!b.events&&(b.events={passive:!1}),I.delegatedEvents)$(f,G,I.delegateListener),$(f,G,I.delegateUseCapture,!0);for(var B=b&&b.events,R=0;R<S.length;R++){var K=S[R];$(f,K.type,K.listener,B)}}var bd={id:"core/interactions",install:function(c){for(var u={},f=0;f<si.length;f++){var g=si[f];u[g]=Xa(g,c)}var b,S=F.pEventTypes;function I(){for(var $=0,G=c.interactions.list;$<G.length;$++){var B=G[$];if(B.pointerIsDown&&B.pointerType==="touch"&&!B._interacting)for(var R=function(){var ie=Z[K];c.documents.some(function(ne){return D(ne.doc,ie.downTarget)})||B.removePointer(ie.pointer,ie.event)},K=0,Z=B.pointers;K<Z.length;K++)R()}}(b=ee.PointerEvent?[{type:S.down,listener:I},{type:S.down,listener:u.pointerDown},{type:S.move,listener:u.pointerMove},{type:S.up,listener:u.pointerUp},{type:S.cancel,listener:u.pointerUp}]:[{type:"mousedown",listener:u.pointerDown},{type:"mousemove",listener:u.pointerMove},{type:"mouseup",listener:u.pointerUp},{type:"touchstart",listener:I},{type:"touchstart",listener:u.pointerDown},{type:"touchmove",listener:u.pointerMove},{type:"touchend",listener:u.pointerUp},{type:"touchcancel",listener:u.pointerUp}]).push({type:"blur",listener:function($){for(var G=0,B=c.interactions.list;G<B.length;G++)B[G].documentBlur($)}}),c.prevTouchTime=0,c.Interaction=function($){d(B,$);var G=m(B);function B(){return a(this,B),G.apply(this,arguments)}return l(B,[{key:"pointerMoveTolerance",get:function(){return c.interactions.pointerMoveTolerance},set:function(R){c.interactions.pointerMoveTolerance=R}},{key:"_now",value:function(){return c.now()}}]),B}(ld),c.interactions={list:[],new:function($){$.scopeFire=function(B,R){return c.fire(B,R)};var G=new c.Interaction($);return c.interactions.list.push(G),G},listeners:u,docEvents:b,pointerMoveTolerance:1},c.usePlugin(Pa)},listeners:{"scope:add-document":function(c){return ui(c,"add")},"scope:remove-document":function(c){return ui(c,"remove")},"interactable:unset":function(c,u){for(var f=c.interactable,g=u.interactions.list.length-1;g>=0;g--){var b=u.interactions.list[g];b.interactable===f&&(b.stop(),u.fire("interactions:destroy",{interaction:b}),b.destroy(),u.interactions.list.length>2&&u.interactions.list.splice(g,1))}}},onDocSignal:ui,doOnInteractions:Xa,methodNames:si},wd=bd,Bt=function(c){return c[c.On=0]="On",c[c.Off=1]="Off",c}(Bt||{}),Ed=function(){function c(u,f,g,b){a(this,c),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new Wa,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=f.actions,this.target=u,this._context=f.context||g,this._win=x(Ee(u)?this._context:u),this._doc=this._win.document,this._scopeEvents=b,this.set(f)}return l(c,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(u,f){return w.func(f.onstart)&&this.on("".concat(u,"start"),f.onstart),w.func(f.onmove)&&this.on("".concat(u,"move"),f.onmove),w.func(f.onend)&&this.on("".concat(u,"end"),f.onend),w.func(f.oninertiastart)&&this.on("".concat(u,"inertiastart"),f.oninertiastart),this}},{key:"updatePerActionListeners",value:function(u,f,g){var b,S=this,I=(b=this._actions.map[u])==null?void 0:b.filterEventType,$=function(G){return(I==null||I(G))&&an(G,S._actions)};(w.array(f)||w.object(f))&&this._onOff(Bt.Off,u,f,void 0,$),(w.array(g)||w.object(g))&&this._onOff(Bt.On,u,g,void 0,$)}},{key:"setPerAction",value:function(u,f){var g=this._defaults;for(var b in f){var S=b,I=this.options[u],$=f[S];S==="listeners"&&this.updatePerActionListeners(u,I.listeners,$),w.array($)?I[S]=rn($):w.plainObject($)?(I[S]=re(I[S]||{},lr($)),w.object(g.perAction[S])&&"enabled"in g.perAction[S]&&(I[S].enabled=$.enabled!==!1)):w.bool($)&&w.object(g.perAction[S])?I[S].enabled=$:I[S]=$}}},{key:"getRect",value:function(u){return u=u||(w.element(this.target)?this.target:null),w.string(this.target)&&(u=u||this._context.querySelector(this.target)),fe(u)}},{key:"rectChecker",value:function(u){var f=this;return w.func(u)?(this.getRect=function(g){var b=re({},u.apply(f,g));return"width"in b||(b.width=b.right-b.left,b.height=b.bottom-b.top),b},this):u===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(u,f){if(Ee(f)||w.object(f)){for(var g in this.options[u]=f,this._actions.map)this.options[g][u]=f;return this}return this.options[u]}},{key:"origin",value:function(u){return this._backCompatOption("origin",u)}},{key:"deltaSource",value:function(u){return u==="page"||u==="client"?(this.options.deltaSource=u,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var u=this.target;return w.string(u)?Array.from(this._context.querySelectorAll(u)):w.func(u)&&u.getAllElements?u.getAllElements():w.element(u)?[u]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(u){return this._context===u.ownerDocument||D(this._context,u)}},{key:"testIgnoreAllow",value:function(u,f,g){return!this.testIgnore(u.ignoreFrom,f,g)&&this.testAllow(u.allowFrom,f,g)}},{key:"testAllow",value:function(u,f,g){return!u||!!w.element(g)&&(w.string(u)?X(g,u,f):!!w.element(u)&&D(u,g))}},{key:"testIgnore",value:function(u,f,g){return!(!u||!w.element(g))&&(w.string(u)?X(g,u,f):!!w.element(u)&&D(u,g))}},{key:"fire",value:function(u){return this.events.fire(u),this}},{key:"_onOff",value:function(u,f,g,b,S){w.object(f)&&!w.array(f)&&(b=g,g=null);var I=V(f,g,S);for(var $ in I){$==="wheel"&&($=F.wheelEvent);for(var G=0,B=I[$];G<B.length;G++){var R=B[G];an($,this._actions)?this.events[u===Bt.On?"on":"off"]($,R):w.string(this.target)?this._scopeEvents[u===Bt.On?"addDelegate":"removeDelegate"](this.target,this._context,$,R,b):this._scopeEvents[u===Bt.On?"add":"remove"](this.target,$,R,b)}}return this}},{key:"on",value:function(u,f,g){return this._onOff(Bt.On,u,f,g)}},{key:"off",value:function(u,f,g){return this._onOff(Bt.Off,u,f,g)}},{key:"set",value:function(u){var f=this._defaults;for(var g in w.object(u)||(u={}),this.options=lr(f.base),this._actions.methodDict){var b=g,S=this._actions.methodDict[b];this.options[b]={},this.setPerAction(b,re(re({},f.perAction),f.actions[b])),this[S](u[b])}for(var I in u)I!=="getRect"?w.func(this[I])&&this[I](u[I]):this.rectChecker(u.getRect);return this}},{key:"unset",value:function(){if(w.string(this.target))for(var u in this._scopeEvents.delegatedEvents)for(var f=this._scopeEvents.delegatedEvents[u],g=f.length-1;g>=0;g--){var b=f[g],S=b.selector,I=b.context,$=b.listeners;S===this.target&&I===this._context&&f.splice(g,1);for(var G=$.length-1;G>=0;G--)this._scopeEvents.removeDelegate(this.target,this._context,u,$[G][0],$[G][1])}else this._scopeEvents.remove(this.target,"all")}}]),c}(),xd=function(){function c(u){var f=this;a(this,c),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=u,u.addListeners({"interactable:unset":function(g){var b=g.interactable,S=b.target,I=w.string(S)?f.selectorMap[S]:S[f.scope.id],$=It(I,function(G){return G===b});I.splice($,1)}})}return l(c,[{key:"new",value:function(u,f){f=re(f||{},{actions:this.scope.actions});var g=new this.scope.Interactable(u,f,this.scope.document,this.scope.events);return this.scope.addDocument(g._doc),this.list.push(g),w.string(u)?(this.selectorMap[u]||(this.selectorMap[u]=[]),this.selectorMap[u].push(g)):(g.target[this.scope.id]||Object.defineProperty(u,this.scope.id,{value:[],configurable:!0}),u[this.scope.id].push(g)),this.scope.fire("interactable:new",{target:u,options:f,interactable:g,win:this.scope._win}),g}},{key:"getExisting",value:function(u,f){var g=f&&f.context||this.scope.document,b=w.string(u),S=b?this.selectorMap[u]:u[this.scope.id];if(S)return ht(S,function(I){return I._context===g&&(b||I.inContext(u))})}},{key:"forEachMatch",value:function(u,f){for(var g=0,b=this.list;g<b.length;g++){var S=b[g],I=void 0;if((w.string(S.target)?w.element(u)&&Q(u,S.target):u===S.target)&&S.inContext(u)&&(I=f(S)),I!==void 0)return I}}}]),c}(),_d=function(){function c(){var u=this;a(this,c),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=F,this.defaults=lr(Ga),this.Eventable=Wa,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(g){var b=function S(I,$){var G=g.interactables.getExisting(I,$);return G||((G=g.interactables.new(I,$)).events.global=S.globalEvents),G};return b.getPointerAverage=Ge,b.getTouchBBox=it,b.getTouchDistance=ot,b.getTouchAngle=Yt,b.getElementRect=fe,b.getElementClientRect=se,b.matchesSelector=Q,b.closest=U,b.globalEvents={},b.version="1.10.27",b.scope=g,b.use=function(S,I){return this.scope.usePlugin(S,I),this},b.isSet=function(S,I){return!!this.scope.interactables.get(S,I&&I.context)},b.on=Dr(function(S,I,$){if(w.string(S)&&S.search(" ")!==-1&&(S=S.trim().split(/ +/)),w.array(S)){for(var G=0,B=S;G<B.length;G++){var R=B[G];this.on(R,I,$)}return this}if(w.object(S)){for(var K in S)this.on(K,S[K],I);return this}return an(S,this.scope.actions)?this.globalEvents[S]?this.globalEvents[S].push(I):this.globalEvents[S]=[I]:this.scope.events.add(this.scope.document,S,I,{options:$}),this},"The interact.on() method is being deprecated"),b.off=Dr(function(S,I,$){if(w.string(S)&&S.search(" ")!==-1&&(S=S.trim().split(/ +/)),w.array(S)){for(var G=0,B=S;G<B.length;G++){var R=B[G];this.off(R,I,$)}return this}if(w.object(S)){for(var K in S)this.off(K,S[K],I);return this}var Z;return an(S,this.scope.actions)?S in this.globalEvents&&(Z=this.globalEvents[S].indexOf(I))!==-1&&this.globalEvents[S].splice(Z,1):this.scope.events.remove(this.scope.document,S,I,$),this},"The interact.off() method is being deprecated"),b.debug=function(){return this.scope},b.supportsTouch=function(){return F.supportsTouch},b.supportsPointerEvent=function(){return F.supportsPointerEvent},b.stop=function(){for(var S=0,I=this.scope.interactions.list;S<I.length;S++)I[S].stop();return this},b.pointerMoveTolerance=function(S){return w.number(S)?(this.scope.interactions.pointerMoveTolerance=S,this):this.scope.interactions.pointerMoveTolerance},b.addDocument=function(S,I){this.scope.addDocument(S,I)},b.removeDocument=function(S){this.scope.removeDocument(S)},b}(this),this.InteractEvent=ii,this.Interactable=void 0,this.interactables=new xd(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(g){return u.removeDocument(g.target)};var f=this;this.Interactable=function(g){d(S,g);var b=m(S);function S(){return a(this,S),b.apply(this,arguments)}return l(S,[{key:"_defaults",get:function(){return f.defaults}},{key:"set",value:function(I){return E(p(S.prototype),"set",this).call(this,I),f.fire("interactable:set",{options:I,interactable:this}),this}},{key:"unset",value:function(){E(p(S.prototype),"unset",this).call(this);var I=f.interactables.list.indexOf(this);I<0||(f.interactables.list.splice(I,1),f.fire("interactable:unset",{interactable:this}))}}]),S}(Ed)}return l(c,[{key:"addListeners",value:function(u,f){this.listenerMaps.push({id:f,map:u})}},{key:"fire",value:function(u,f){for(var g=0,b=this.listenerMaps;g<b.length;g++){var S=b[g].map[u];if(S&&S(f,this,u)===!1)return!1}}},{key:"init",value:function(u){return this.isInitialized?this:function(f,g){return f.isInitialized=!0,w.window(g)&&M(g),ee.init(g),F.init(g),Ft.init(g),f.window=g,f.document=g.document,f.usePlugin(wd),f.usePlugin(vd),f}(this,u)}},{key:"pluginIsInstalled",value:function(u){var f=u.id;return f?!!this._plugins.map[f]:this._plugins.list.indexOf(u)!==-1}},{key:"usePlugin",value:function(u,f){if(!this.isInitialized)return this;if(this.pluginIsInstalled(u))return this;if(u.id&&(this._plugins.map[u.id]=u),this._plugins.list.push(u),u.install&&u.install(this,f),u.listeners&&u.before){for(var g=0,b=this.listenerMaps.length,S=u.before.reduce(function($,G){return $[G]=!0,$[Va(G)]=!0,$},{});g<b;g++){var I=this.listenerMaps[g].id;if(I&&(S[I]||S[Va(I)]))break}this.listenerMaps.splice(g,0,{id:u.id,map:u.listeners})}else u.listeners&&this.listenerMaps.push({id:u.id,map:u.listeners});return this}},{key:"addDocument",value:function(u,f){if(this.getDocIndex(u)!==-1)return!1;var g=x(u);f=f?re({},f):{},this.documents.push({doc:u,options:f}),this.events.documents.push(u),u!==this.document&&this.events.add(g,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:u,window:g,scope:this,options:f})}},{key:"removeDocument",value:function(u){var f=this.getDocIndex(u),g=x(u),b=this.documents[f].options;this.events.remove(g,"unload",this.onWindowUnload),this.documents.splice(f,1),this.events.documents.splice(f,1),this.fire("scope:remove-document",{doc:u,window:g,scope:this,options:b})}},{key:"getDocIndex",value:function(u){for(var f=0;f<this.documents.length;f++)if(this.documents[f].doc===u)return f;return-1}},{key:"getDocOptions",value:function(u){var f=this.getDocIndex(u);return f===-1?null:this.documents[f].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),c}();function Va(c){return c&&c.replace(/\/.*$/,"")}var Qa=new _d,He=Qa.interactStatic,Sd=typeof globalThis<"u"?globalThis:window;Qa.init(Sd);var Ad=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(c){var u=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(g){var b=g[0],S=g[1];return b in c||S in c}),f=function(g,b){for(var S=c.range,I=c.limits,$=I===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:I,G=c.offset,B=G===void 0?{x:0,y:0}:G,R={range:S,grid:c,x:null,y:null},K=0;K<u.length;K++){var Z=u[K],ie=Z[0],ne=Z[1],oe=Math.round((g-B.x)/c[ie]),he=Math.round((b-B.y)/c[ne]);R[ie]=Math.max($.left,Math.min($.right,oe*c[ie]+B.x)),R[ne]=Math.max($.top,Math.min($.bottom,he*c[ne]+B.y))}return R};return f.grid=c,f.coordFields=u,f}}),kd={id:"snappers",install:function(c){var u=c.interactStatic;u.snappers=re(u.snappers||{},Ad),u.createSnapGrid=u.snappers.grid}},Cd=kd,Dd={start:function(c){var u=c.state,f=c.rect,g=c.edges,b=c.pageCoords,S=u.options,I=S.ratio,$=S.enabled,G=u.options,B=G.equalDelta,R=G.modifiers;I==="preserve"&&(I=f.width/f.height),u.startCoords=re({},b),u.startRect=re({},f),u.ratio=I,u.equalDelta=B;var K=u.linkedEdges={top:g.top||g.left&&!g.bottom,left:g.left||g.top&&!g.right,bottom:g.bottom||g.right&&!g.top,right:g.right||g.bottom&&!g.left};if(u.xIsPrimaryAxis=!(!g.left&&!g.right),u.equalDelta){var Z=(K.left?1:-1)*(K.top?1:-1);u.edgeSign={x:Z,y:Z}}else u.edgeSign={x:K.left?-1:1,y:K.top?-1:1};if($!==!1&&re(g,K),R!=null&&R.length){var ie=new ni(c.interaction);ie.copyFrom(c.interaction.modification),ie.prepareStates(R),u.subModification=ie,ie.startAll(r({},c))}},set:function(c){var u=c.state,f=c.rect,g=c.coords,b=u.linkedEdges,S=re({},g),I=u.equalDelta?Nd:Id;if(re(c.edges,b),I(u,u.xIsPrimaryAxis,g,f),!u.subModification)return null;var $=re({},f);ge(b,$,{x:g.x-S.x,y:g.y-S.y});var G=u.subModification.setAll(r(r({},c),{},{rect:$,edges:b,pageCoords:g,prevCoords:g,prevRect:$})),B=G.delta;return G.changed&&(I(u,Math.abs(B.x)>Math.abs(B.y),G.coords,G.rect),re(g,G.coords)),G.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Nd(c,u,f){var g=c.startCoords,b=c.edgeSign;u?f.y=g.y+(f.x-g.x)*b.y:f.x=g.x+(f.y-g.y)*b.x}function Id(c,u,f,g){var b=c.startRect,S=c.startCoords,I=c.ratio,$=c.edgeSign;if(u){var G=g.width/I;f.y=S.y+(G-b.height)*$.y}else{var B=g.height*I;f.x=S.x+(B-b.width)*$.x}}var Md=jt(Dd,"aspectRatio"),Za=function(){};Za._defaults={};var ln=Za;function Zt(c,u,f){return w.func(c)?ye(c,u.interactable,u.element,[f.x,f.y,u]):ye(c,u.interactable,u.element)}var dn={start:function(c){var u=c.rect,f=c.startOffset,g=c.state,b=c.interaction,S=c.pageCoords,I=g.options,$=I.elementRect,G=re({left:0,top:0,right:0,bottom:0},I.offset||{});if(u&&$){var B=Zt(I.restriction,b,S);if(B){var R=B.right-B.left-u.width,K=B.bottom-B.top-u.height;R<0&&(G.left+=R,G.right+=R),K<0&&(G.top+=K,G.bottom+=K)}G.left+=f.left-u.width*$.left,G.top+=f.top-u.height*$.top,G.right+=f.right-u.width*(1-$.right),G.bottom+=f.bottom-u.height*(1-$.bottom)}g.offset=G},set:function(c){var u=c.coords,f=c.interaction,g=c.state,b=g.options,S=g.offset,I=Zt(b.restriction,f,u);if(I){var $=function(G){return!G||"left"in G&&"top"in G||((G=re({},G)).left=G.x||0,G.top=G.y||0,G.right=G.right||G.left+G.width,G.bottom=G.bottom||G.top+G.height),G}(I);u.x=Math.max(Math.min($.right-S.right,u.x),$.left+S.left),u.y=Math.max(Math.min($.bottom-S.bottom,u.y),$.top+S.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},Ld=jt(dn,"restrict"),Ja={top:1/0,left:1/0,bottom:-1/0,right:-1/0},es={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function ts(c,u){for(var f=0,g=["top","left","bottom","right"];f<g.length;f++){var b=g[f];b in c||(c[b]=u[b])}return c}var Mr={noInner:Ja,noOuter:es,start:function(c){var u,f=c.interaction,g=c.startOffset,b=c.state,S=b.options;S&&(u=be(Zt(S.offset,f,f.coords.start.page))),u=u||{x:0,y:0},b.offset={top:u.y+g.top,left:u.x+g.left,bottom:u.y-g.bottom,right:u.x-g.right}},set:function(c){var u=c.coords,f=c.edges,g=c.interaction,b=c.state,S=b.offset,I=b.options;if(f){var $=re({},u),G=Zt(I.inner,g,$)||{},B=Zt(I.outer,g,$)||{};ts(G,Ja),ts(B,es),f.top?u.y=Math.min(Math.max(B.top+S.top,$.y),G.top+S.top):f.bottom&&(u.y=Math.max(Math.min(B.bottom+S.bottom,$.y),G.bottom+S.bottom)),f.left?u.x=Math.min(Math.max(B.left+S.left,$.x),G.left+S.left):f.right&&(u.x=Math.max(Math.min(B.right+S.right,$.x),G.right+S.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},zd=jt(Mr,"restrictEdges"),$d=re({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(c){}},dn.defaults),Td=jt({start:dn.start,set:dn.set,defaults:$d},"restrictRect"),Pd={width:-1/0,height:-1/0},Od={width:1/0,height:1/0},Gd=jt({start:function(c){return Mr.start(c)},set:function(c){var u=c.interaction,f=c.state,g=c.rect,b=c.edges,S=f.options;if(b){var I=De(Zt(S.min,u,c.coords))||Pd,$=De(Zt(S.max,u,c.coords))||Od;f.options={endOnly:S.endOnly,inner:re({},Mr.noInner),outer:re({},Mr.noOuter)},b.top?(f.options.inner.top=g.bottom-I.height,f.options.outer.top=g.bottom-$.height):b.bottom&&(f.options.inner.bottom=g.top+I.height,f.options.outer.bottom=g.top+$.height),b.left?(f.options.inner.left=g.right-I.width,f.options.outer.left=g.right-$.width):b.right&&(f.options.inner.right=g.left+I.width,f.options.outer.right=g.left+$.width),Mr.set(c),f.options=S}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),ci={start:function(c){var u,f=c.interaction,g=c.interactable,b=c.element,S=c.rect,I=c.state,$=c.startOffset,G=I.options,B=G.offsetWithOrigin?function(Z){var ie=Z.interaction.element,ne=be(ye(Z.state.options.origin,null,null,[ie])),oe=ne||ue(Z.interactable,ie,Z.interaction.prepared.name);return oe}(c):{x:0,y:0};if(G.offset==="startCoords")u={x:f.coords.start.page.x,y:f.coords.start.page.y};else{var R=ye(G.offset,g,b,[f]);(u=be(R)||{x:0,y:0}).x+=B.x,u.y+=B.y}var K=G.relativePoints;I.offsets=S&&K&&K.length?K.map(function(Z,ie){return{index:ie,relativePoint:Z,x:$.left-S.width*Z.x+u.x,y:$.top-S.height*Z.y+u.y}}):[{index:0,relativePoint:null,x:u.x,y:u.y}]},set:function(c){var u=c.interaction,f=c.coords,g=c.state,b=g.options,S=g.offsets,I=ue(u.interactable,u.element,u.prepared.name),$=re({},f),G=[];b.offsetWithOrigin||($.x-=I.x,$.y-=I.y);for(var B=0,R=S;B<R.length;B++)for(var K=R[B],Z=$.x-K.x,ie=$.y-K.y,ne=0,oe=b.targets.length;ne<oe;ne++){var he=b.targets[ne],ce=void 0;(ce=w.func(he)?he(Z,ie,u._proxy,K,ne):he)&&G.push({x:(w.number(ce.x)?ce.x:Z)+K.x,y:(w.number(ce.y)?ce.y:ie)+K.y,range:w.number(ce.range)?ce.range:b.range,source:he,index:ne,offset:K})}for(var ve={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},Se=0;Se<G.length;Se++){var Ce=G[Se],xe=Ce.range,ke=Ce.x-$.x,We=Ce.y-$.y,Me=ze(ke,We),rt=Me<=xe;xe===1/0&&ve.inRange&&ve.range!==1/0&&(rt=!1),ve.target&&!(rt?ve.inRange&&xe!==1/0?Me/xe<ve.distance/ve.range:xe===1/0&&ve.range!==1/0||Me<ve.distance:!ve.inRange&&Me<ve.distance)||(ve.target=Ce,ve.distance=Me,ve.range=xe,ve.inRange=rt,ve.delta.x=ke,ve.delta.y=We)}return ve.inRange&&(f.x=ve.target.x,f.y=ve.target.y),g.closest=ve,ve},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},Rd=jt(ci,"snap"),hn={start:function(c){var u=c.state,f=c.edges,g=u.options;if(!f)return null;c.state={options:{targets:null,relativePoints:[{x:f.left?0:1,y:f.top?0:1}],offset:g.offset||"self",origin:{x:0,y:0},range:g.range}},u.targetFields=u.targetFields||[["width","height"],["x","y"]],ci.start(c),u.offsets=c.state.offsets,c.state=u},set:function(c){var u=c.interaction,f=c.state,g=c.coords,b=f.options,S=f.offsets,I={x:g.x-S[0].x,y:g.y-S[0].y};f.options=re({},b),f.options.targets=[];for(var $=0,G=b.targets||[];$<G.length;$++){var B=G[$],R=void 0;if(R=w.func(B)?B(I.x,I.y,u):B){for(var K=0,Z=f.targetFields;K<Z.length;K++){var ie=Z[K],ne=ie[0],oe=ie[1];if(ne in R||oe in R){R.x=R[ne],R.y=R[oe];break}}f.options.targets.push(R)}}var he=ci.set(c);return f.options=b,he},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},qd=jt(hn,"snapSize"),li={aspectRatio:Md,restrictEdges:zd,restrict:Ld,restrictRect:Td,restrictSize:Gd,snapEdges:jt({start:function(c){var u=c.edges;return u?(c.state.targetFields=c.state.targetFields||[[u.left?"left":"right",u.top?"top":"bottom"]],hn.start(c)):null},set:hn.set,defaults:re(lr(hn.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:Rd,snapSize:qd,spring:ln,avoid:ln,transform:ln,rubberband:ln},Fd={id:"modifiers",install:function(c){var u=c.interactStatic;for(var f in c.usePlugin(Oa),c.usePlugin(Cd),u.modifiers=li,li){var g=li[f],b=g._defaults,S=g._methods;b._methods=S,c.defaults.perAction[f]=b}}},jd=Fd,rs=function(c){d(f,c);var u=m(f);function f(g,b,S,I,$,G){var B;if(a(this,f),Te(v(B=u.call(this,$)),S),S!==b&&Te(v(B),b),B.timeStamp=G,B.originalEvent=S,B.type=g,B.pointerId=et(b),B.pointerType=sr(b),B.target=I,B.currentTarget=null,g==="tap"){var R=$.getPointerIndex(b);B.dt=B.timeStamp-$.pointers[R].downTime;var K=B.timeStamp-$.tapTime;B.double=!!$.prevTap&&$.prevTap.type!=="doubletap"&&$.prevTap.target===B.target&&K<500}else g==="doubletap"&&(B.dt=b.timeStamp-$.tapTime,B.double=!0);return B}return l(f,[{key:"_subtractOrigin",value:function(g){var b=g.x,S=g.y;return this.pageX-=b,this.pageY-=S,this.clientX-=b,this.clientY-=S,this}},{key:"_addOrigin",value:function(g){var b=g.x,S=g.y;return this.pageX+=b,this.pageY+=S,this.clientX+=b,this.clientY+=S,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),f}(ur),Lr={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(c){c.pointerEvents=Lr,c.defaults.actions.pointerEvents=Lr.defaults,re(c.actions.phaselessTypes,Lr.types)},listeners:{"interactions:new":function(c){var u=c.interaction;u.prevTap=null,u.tapTime=0},"interactions:update-pointer":function(c){var u=c.down,f=c.pointerInfo;!u&&f.hold||(f.hold={duration:1/0,timeout:null})},"interactions:move":function(c,u){var f=c.interaction,g=c.pointer,b=c.event,S=c.eventTarget;c.duplicate||f.pointerIsDown&&!f.pointerWasMoved||(f.pointerIsDown&&di(c),Ut({interaction:f,pointer:g,event:b,eventTarget:S,type:"move"},u))},"interactions:down":function(c,u){(function(f,g){for(var b=f.interaction,S=f.pointer,I=f.event,$=f.eventTarget,G=f.pointerIndex,B=b.pointers[G].hold,R=pe($),K={interaction:b,pointer:S,event:I,eventTarget:$,type:"hold",targets:[],path:R,node:null},Z=0;Z<R.length;Z++){var ie=R[Z];K.node=ie,g.fire("pointerEvents:collect-targets",K)}if(K.targets.length){for(var ne=1/0,oe=0,he=K.targets;oe<he.length;oe++){var ce=he[oe].eventable.options.holdDuration;ce<ne&&(ne=ce)}B.duration=ne,B.timeout=setTimeout(function(){Ut({interaction:b,eventTarget:$,pointer:S,event:I,type:"hold"},g)},ne)}})(c,u),Ut(c,u)},"interactions:up":function(c,u){di(c),Ut(c,u),function(f,g){var b=f.interaction,S=f.pointer,I=f.event,$=f.eventTarget;b.pointerWasMoved||Ut({interaction:b,eventTarget:$,pointer:S,event:I,type:"tap"},g)}(c,u)},"interactions:cancel":function(c,u){di(c),Ut(c,u)}},PointerEvent:rs,fire:Ut,collectEventTargets:ns,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Ut(c,u){var f=c.interaction,g=c.pointer,b=c.event,S=c.eventTarget,I=c.type,$=c.targets,G=$===void 0?ns(c,u):$,B=new rs(I,g,b,S,f,u.now());u.fire("pointerEvents:new",{pointerEvent:B});for(var R={interaction:f,pointer:g,event:b,eventTarget:S,targets:G,type:I,pointerEvent:B},K=0;K<G.length;K++){var Z=G[K];for(var ie in Z.props||{})B[ie]=Z.props[ie];var ne=ue(Z.eventable,Z.node);if(B._subtractOrigin(ne),B.eventable=Z.eventable,B.currentTarget=Z.node,Z.eventable.fire(B),B._addOrigin(ne),B.immediatePropagationStopped||B.propagationStopped&&K+1<G.length&&G[K+1].node!==B.currentTarget)break}if(u.fire("pointerEvents:fired",R),I==="tap"){var oe=B.double?Ut({interaction:f,pointer:g,event:b,eventTarget:S,type:"doubletap"},u):B;f.prevTap=oe,f.tapTime=oe.timeStamp}return B}function ns(c,u){var f=c.interaction,g=c.pointer,b=c.event,S=c.eventTarget,I=c.type,$=f.getPointerIndex(g),G=f.pointers[$];if(I==="tap"&&(f.pointerWasMoved||!G||G.downTarget!==S))return[];for(var B=pe(S),R={interaction:f,pointer:g,event:b,eventTarget:S,type:I,path:B,targets:[],node:null},K=0;K<B.length;K++){var Z=B[K];R.node=Z,u.fire("pointerEvents:collect-targets",R)}return I==="hold"&&(R.targets=R.targets.filter(function(ie){var ne,oe;return ie.eventable.options.holdDuration===((ne=f.pointers[$])==null||(oe=ne.hold)==null?void 0:oe.duration)})),R.targets}function di(c){var u=c.interaction,f=c.pointerIndex,g=u.pointers[f].hold;g&&g.timeout&&(clearTimeout(g.timeout),g.timeout=null)}var Bd=Object.freeze({__proto__:null,default:Lr});function Ud(c){var u=c.interaction;u.holdIntervalHandle&&(clearInterval(u.holdIntervalHandle),u.holdIntervalHandle=null)}var Hd={id:"pointer-events/holdRepeat",install:function(c){c.usePlugin(Lr);var u=c.pointerEvents;u.defaults.holdRepeatInterval=0,u.types.holdrepeat=c.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(c,u){return c["pointerEvents:".concat(u)]=Ud,c},{"pointerEvents:new":function(c){var u=c.pointerEvent;u.type==="hold"&&(u.count=(u.count||0)+1)},"pointerEvents:fired":function(c,u){var f=c.interaction,g=c.pointerEvent,b=c.eventTarget,S=c.targets;if(g.type==="hold"&&S.length){var I=S[0].eventable.options.holdRepeatInterval;I<=0||(f.holdIntervalHandle=setTimeout(function(){u.pointerEvents.fire({interaction:f,eventTarget:b,type:"hold",pointer:g,event:g},u)},I))}}})},Wd=Hd,Kd={id:"pointer-events/interactableTargets",install:function(c){var u=c.Interactable;u.prototype.pointerEvents=function(g){return re(this.events.options,g),this};var f=u.prototype._backCompatOption;u.prototype._backCompatOption=function(g,b){var S=f.call(this,g,b);return S===this&&(this.events.options[g]=b),S}},listeners:{"pointerEvents:collect-targets":function(c,u){var f=c.targets,g=c.node,b=c.type,S=c.eventTarget;u.interactables.forEachMatch(g,function(I){var $=I.events,G=$.options;$.types[b]&&$.types[b].length&&I.testIgnoreAllow(G,g,S)&&f.push({node:g,eventable:$,props:{interactable:I}})})},"interactable:new":function(c){var u=c.interactable;u.events.getRect=function(f){return u.getRect(f)}},"interactable:set":function(c,u){var f=c.interactable,g=c.options;re(f.events.options,u.pointerEvents.defaults),re(f.events.options,g.pointerEvents||{})}}},Xd=Kd,Yd={id:"pointer-events",install:function(c){c.usePlugin(Bd),c.usePlugin(Wd),c.usePlugin(Xd)}},Vd=Yd,Qd={id:"reflow",install:function(c){var u=c.Interactable;c.actions.phases.reflow=!0,u.prototype.reflow=function(f){return function(g,b,S){for(var I=g.getAllElements(),$=S.window.Promise,G=$?[]:null,B=function(){var K=I[R],Z=g.getRect(K);if(!Z)return 1;var ie,ne=ht(S.interactions.list,function(ce){return ce.interacting()&&ce.interactable===g&&ce.element===K&&ce.prepared.name===b.name});if(ne)ne.move(),G&&(ie=ne._reflowPromise||new $(function(ce){ne._reflowResolve=ce}));else{var oe=De(Z),he=function(ce){return{coords:ce,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:oe.x,y:oe.y},client:{x:oe.x,y:oe.y},timeStamp:S.now()});ie=function(ce,ve,Se,Ce,xe){var ke=ce.interactions.new({pointerType:"reflow"}),We={interaction:ke,event:xe,pointer:xe,eventTarget:Se,phase:"reflow"};ke.interactable=ve,ke.element=Se,ke.prevEvent=xe,ke.updatePointer(xe,xe,Se,!0),Oe(ke.coords.delta),Jn(ke.prepared,Ce),ke._doPhase(We);var Me=ce.window,rt=Me.Promise,ft=rt?new rt(function(zt){ke._reflowResolve=zt}):void 0;return ke._reflowPromise=ft,ke.start(Ce,ve,Se),ke._interacting?(ke.move(We),ke.end(xe)):(ke.stop(),ke._reflowResolve()),ke.removePointer(xe,xe),ft}(S,g,K,b,he)}G&&G.push(ie)},R=0;R<I.length&&!B();R++);return G&&$.all(G).then(function(){return g})}(this,f,c)}},listeners:{"interactions:stop":function(c,u){var f=c.interaction;f.pointerType==="reflow"&&(f._reflowResolve&&f._reflowResolve(),function(g,b){g.splice(g.indexOf(b),1)}(u.interactions.list,f))}}},Zd=Qd;if(He.use(Pa),He.use(ja),He.use(Vd),He.use(gd),He.use(jd),He.use(nd),He.use(Wl),He.use(Xl),He.use(Zd),He.default=He,o(n)==="object"&&n)try{n.exports=He}catch{}return He.default=He,He})}(Ur,Ur.exports)),Ur.exports}var ab=ob();const sb=Ve(ab),ut=document;class ub{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.metric=new Fl(e),this.panels={info:ut.getElementById("floating-panel"),tools:ut.getElementById("tools-panel"),graphs:ut.getElementById("graphs-panel"),faces:ut.getElementById("face-panel")},this.handles={info:"#info",tools:"#tools",graphs:"#graphs",faces:"#faces"},this.addEventListeners(),this.makePanelsDraggable(),this.registerToolListeners(),this.setupContextMenu()}init(){this.togglePanel("info","#panel-btn .check",this.settings.info_panel),this.togglePanel("tools","#tools-btn .check",this.settings.tools_panel),this.togglePanel("graphs","#graphs-btn .check",this.settings.graphs_panel),this.togglePanel("faces","#faces-btn .check",this.settings.face_panel)}setupContextMenu(){const e=ut.getElementById("custom-context-menu");ut.addEventListener("contextmenu",t=>{t.preventDefault();const{offsetWidth:r,offsetHeight:o}=e,{innerWidth:a,innerHeight:s}=window;let{pageX:l,pageY:h}=t;l+r>a&&(l-=r),h+o>s&&(h-=o),Object.assign(e.style,{left:`${l}px`,top:`${h}px`,display:"block"})}),ut.addEventListener("click",()=>{e.style.display="none"})}togglePanel(e,t,r){const o=this.panels[e],a=ut.querySelector(t);a==null||a.classList.toggle("hidden",!r),o&&(o.style.display=r?"flex":"none",r||this.resetPanel(o))}resetPanel(e){e.style.transform="translate(0px, 0px)",e.setAttribute("data-x",0),e.setAttribute("data-y",0)}addEventListeners(){const e=(r,o)=>{var a;(a=ut.querySelector(r))==null||a.addEventListener("click",()=>{this.eventBus.emit("toggleSetting",{key:o})})};e("#floating-panel .close","info_panel"),e("#tools-panel .close","tools_panel"),e("#graphs-panel .close","graphs_panel"),e("#face-panel .close","face_panel");const t=ut.querySelector("#floating-panel .max");t==null||t.addEventListener("click",()=>{var r;this.resetPanel(this.panels.info),(r=ut.getElementById("floating-panel"))==null||r.classList.toggle("MAX")})}makePanelsDraggable(){Object.entries(this.panels).forEach(([e,t])=>{const r=this.handles[e];t&&r&&this.makeDraggable(t,r)})}makeDraggable(e,t){sb(e).draggable({allowFrom:t,listeners:{move(r){const o=r.target,a=(parseFloat(o.getAttribute("data-x"))||0)+r.dx,s=(parseFloat(o.getAttribute("data-y"))||0)+r.dy;o.style.transform=`translate(${a}px, ${s}px)`,o.setAttribute("data-x",a),o.setAttribute("data-y",s)}}})}registerToolListeners(){Object.entries({scale:"scale",tree:"tree",force:"forceSimulation",panning:"panning",select:"select",component:"component","color-picker":"colorPicker"}).forEach(([t,r])=>{var o;(o=ut.querySelector(`widgets #tools-panel .${t}`))==null||o.addEventListener("click",()=>{this.eventBus.emit("toggleSetting",{key:r})})})}}class cb{constructor(e,t){this.app=e,this.settings=e.settings,this.canvas=e.canvas,this.ctx=e._canvas.ctx,this.selection={x:0,y:0,width:0,height:0,active:!1},this.scale={isDragging:!1,active:!1,activeHandle:null,scaleData:{},rect:{x:100,y:100,width:200,height:150},prevMouse:{x:0,y:0},offsetX:0,offsetY:0,handleSize:10,handles:["nw","n","ne","e","se","s","sw","w"],cursorMap:{nw:"nwse-resize",n:"ns-resize",ne:"nesw-resize",e:"ew-resize",se:"nwse-resize",s:"ns-resize",sw:"nesw-resize",w:"ew-resize"}}}init(){this.canvas.addEventListener("mousedown",this.startSelection.bind(this)),this.canvas.addEventListener("mousemove",this.updateSelection.bind(this)),this.canvas.addEventListener("mouseup",this.endSelection.bind(this)),this.app.drawGraph()}draw(){(this.settings.select||this.settings.scale)&&(this.selection.active&&this.drawSelect(this.selection),this.settings.scale&&this.drawScale())}drawSelect(e){if(!e)return;const t=this.ctx;t.fillStyle="rgba(0, 0, 0, 0.1)",t.fillRect(e.x,e.y,e.width,e.height),t.strokeStyle="rgba(0, 0, 255, 0.7)",t.lineWidth=2,t.setLineDash([5,5]),t.strokeRect(e.x,e.y,e.width,e.height),t.setLineDash([])}drawScale(){this.scale.active&&this.drawScaleBox(this.scale.rect,this.ctx)}startSelection(e){if(this.settings.select||this.settings.scale){const[t,r]=ct(e,this.canvas);if(this.selection.x=t,this.selection.y=r,this.selection.width=0,this.selection.height=0,this.selection.active=!this.scale.active,this.settings.scale&&this.scale.active){const[o,a]=ct(e);if(this.scale.prevMouse={x:o,y:a},this.scale.activeHandle=this.hitTestHandle(o,a),this.scale.activeHandle)return;o>=this.scale.rect.x&&o<=this.scale.rect.x+this.scale.rect.width&&a>=this.scale.rect.y&&a<=this.scale.rect.y+this.scale.rect.height&&(this.scale.isDragging=!0,this.scale.offsetX=o-this.scale.rect.x,this.scale.offsetY=a-this.scale.rect.y),this.app.graphManager.saveGraphState()}}else this.selection.active=!1,this.scale.active=!1}updateSelection(e){const t=this.selection,r=this.scale.rect,o=this.app.graphManager.graph.getSelectedNodes();if(t.active&&!this.scale.active){const[a,s]=ct(e,this.canvas);t.width=a-t.x,t.height=s-t.y,this.app.drawGraph();return}if(this.scale.active){const[a,s]=ct(e);if(this.scale.activeHandle){this.resizeRect(this.scale.activeHandle,a,s);for(let h of o)this.app.graphManager.graph.updateNodeAttributes(h,d=>({...d,x:r.x+r.width*this.scale.scaleData[h].x,y:r.y+r.height*this.scale.scaleData[h].y}));this.app.drawGraph();return}if(this.scale.isDragging){this.scale.rect.x=a-this.scale.offsetX,this.scale.rect.y=s-this.scale.offsetY;const h=a-this.scale.prevMouse.x,d=s-this.scale.prevMouse.y;for(let p of o)this.app.graphManager.graph.updateNodeAttributes(p,y=>({...y,x:y.x+h,y:y.y+d}));this.scale.prevMouse={x:a,y:s},this.app.drawGraph();return}const l=this.hitTestHandle(a,s);l?this.canvas.style.cursor=this.scale.cursorMap[l]:a>=this.scale.rect.x&&a<=this.scale.rect.x+this.scale.rect.width&&s>=this.scale.rect.y&&s<=this.scale.rect.y+this.scale.rect.height?this.canvas.style.cursor="move":this.canvas.style.cursor="default"}}endSelection(e){this.selection.active=!1,this.scale.isDragging=!1,this.scale.activeHandle=null,this.pointsInRect(this.selection).forEach(a=>{this.app.graphManager.graph.toggleNodeSelection(a)}),this.linesInRect(this.selection).forEach(a=>{this.app.graphManager.graph.toggleEdgeSelection(a)});const o=this.app.graphManager.graph.getSelectedNodes();this.settings.scale&&o.length>0&&!this.scale.active&&(this.scale.active=!0,this.scale.rect=lb(this.app.graphManager.graph,o,this.settings.node_radius),this.scaleData={},o.forEach(a=>{const s=this.app.graphManager.graph.getNodeAttributes(a);this.scale.scaleData[a]={id:a,x:(s.x-this.scale.rect.x)/this.scale.rect.width,y:(s.y-this.scale.rect.y)/this.scale.rect.height}})),this.app.drawGraph()}pointsInRect(e){const[t,r,o,a]=qc(e);return this.app.graphManager.graph.filterNodes((s,l)=>Ko(l.x,l.y,t,r,o,a))}linesInRect(e){const t=qc(e);return this.app.graphManager.graph.filterEdges((r,o,a,s,l,h)=>this.lineIntersectsRect([l.x,l.y,h.x,h.y],t))}lineIntersectsRect(e,t){let[r,o,a,s]=e,[l,h,d,p]=t;const y=this.settings.node_radius/2+20;return!!(Fc([r,o,a,s],[l,h,d,p])||Fc([r,o,a,s],[l,p,d,h])||Ko(r,o,l+y,h+y,d-y,p-y)||Ko(a,s,l+y,h+y,d-y,p-y))}drawScaleBox(e,t){e&&(t.fillStyle="#cce5ff20",t.strokeStyle="#3399ff",t.lineWidth=2,t.fillRect(e.x,e.y,e.width,e.height),t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="#fff",t.strokeStyle="#000",this.scale.handles.forEach(r=>{const[o,a]=this.getHandlePosition(r);t.fillRect(o,a,this.scale.handleSize,this.scale.handleSize),t.strokeRect(o,a,this.scale.handleSize,this.scale.handleSize)}))}getHandlePosition(e){const{x:t,y:r,width:o,height:a}=this.scale.rect,s=this.scale.handleSize/2;switch(e){case"nw":return[t-s,r-s];case"n":return[t+o/2-s,r-s];case"ne":return[t+o-s,r-s];case"e":return[t+o-s,r+a/2-s];case"se":return[t+o-s,r+a-s];case"s":return[t+o/2-s,r+a-s];case"sw":return[t-s,r+a-s];case"w":return[t-s,r+a/2-s]}}hitTestHandle(e,t){return this.scale.handles.find(r=>{const[o,a]=this.getHandlePosition(r);return e>=o&&e<=o+this.scale.handleSize&&t>=a&&t<=a+this.scale.handleSize})}resizeRect(e,t,r){const a=t-this.scale.prevMouse.x,s=r-this.scale.prevMouse.y;let{x:l,y:h,width:d,height:p}=this.scale.rect;switch(e){case"nw":l+=a,h+=s,d-=a,p-=s;break;case"n":h+=s,p-=s;break;case"ne":h+=s,d+=a,p-=s;break;case"e":d+=a;break;case"se":d+=a,p+=s;break;case"s":p+=s;break;case"sw":l+=a,d-=a,p+=s;break;case"w":l+=a,d-=a;break}if(d<20){const y=20-d;e.includes("w")&&(l-=y),d=20}if(p<20){const y=20-p;e.includes("n")&&(h-=y),p=20}this.scale.rect.x=l,this.scale.rect.y=h,this.scale.rect.width=d,this.scale.rect.height=p,this.scale.prevMouse={x:t,y:r}}}function Ko(n,e,t,r,o,a){return n>=t&&n<=o&&e>=r&&e<=a}function qc(n){const e=Math.min(n.x,n.x+n.width),t=Math.min(n.y,n.y+n.height),r=Math.max(n.x,n.x+n.width),o=Math.max(n.y,n.y+n.height);return[e,t,r,o]}function Fc(n,e){var t,r,o;const[a,s,l,h]=n,[d,p,y,v]=e;return t=(l-a)*(v-p)-(y-d)*(h-s),t===0?!1:(o=((v-p)*(y-a)+(d-y)*(v-s))/t,r=((s-h)*(y-a)+(l-a)*(v-s))/t,0<o&&o<1&&0<r&&r<1)}function lb(n,e,t){if(!e.length)return null;let r=1/0,o=1/0,a=-1/0,s=-1/0;e.forEach(h=>{const d=n.getNodeAttributes(h);d.x<r&&(r=d.x),d.y<o&&(o=d.y),d.x>a&&(a=d.x),d.y>s&&(s=d.y)});const l=t*1.5;return{x:r-l,y:o-l,width:a-r+2*l,height:s-o+2*l}}var Xo={exports:{}};/*! Pickr 1.9.1 MIT | https://github.com/Simonwep/pickr */var jc;function db(){return jc||(jc=1,function(n,e){(function(t,r){n.exports=r()})(self,()=>(()=>{var t={d:(F,D)=>{for(var U in D)t.o(D,U)&&!t.o(F,U)&&Object.defineProperty(F,U,{enumerable:!0,get:D[U]})},o:(F,D)=>Object.prototype.hasOwnProperty.call(F,D),r:F=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})}},r={};t.d(r,{default:()=>ee});var o={};function a(F,D,U,H,Q={}){D instanceof HTMLCollection||D instanceof NodeList?D=Array.from(D):Array.isArray(D)||(D=[D]),Array.isArray(U)||(U=[U]);for(const W of D)for(const Y of U)W[F](Y,H,{capture:!1,...Q});return Array.prototype.slice.call(arguments,1)}t.r(o),t.d(o,{adjustableInputNumbers:()=>v,createElementFromString:()=>h,createFromTemplate:()=>d,eventPath:()=>p,off:()=>l,on:()=>s,resolveElement:()=>y});const s=a.bind(null,"addEventListener"),l=a.bind(null,"removeEventListener");function h(F){const D=document.createElement("div");return D.innerHTML=F.trim(),D.firstElementChild}function d(F){const D=(H,Q)=>{const W=H.getAttribute(Q);return H.removeAttribute(Q),W},U=(H,Q={})=>{const W=D(H,":obj"),Y=D(H,":ref"),X=W?Q[W]={}:Q;Y&&(Q[Y]=H);for(const te of Array.from(H.children)){const se=D(te,":arr"),fe=U(te,se?{}:X);se&&(X[se]||(X[se]=[])).push(Object.keys(fe).length?fe:te)}return Q};return U(h(F))}function p(F){let D=F.path||F.composedPath&&F.composedPath();if(D)return D;let U=F.target.parentElement;for(D=[F.target,U];U=U.parentElement;)D.push(U);return D.push(document,window),D}function y(F){return F instanceof Element?F:typeof F=="string"?F.split(/>>/g).reduce((D,U,H,Q)=>(D=D.querySelector(U),H<Q.length-1?D.shadowRoot:D),document):null}function v(F,D=U=>U){function U(H){const Q=[.001,.01,.1][Number(H.shiftKey||2*H.ctrlKey)]*(H.deltaY<0?1:-1);let W=0,Y=F.selectionStart;F.value=F.value.replace(/[\d.]+/g,(X,te)=>te<=Y&&te+X.length>=Y?(Y=te,D(Number(X),Q,W)):(W++,X)),F.focus(),F.setSelectionRange(Y,Y),H.preventDefault(),F.dispatchEvent(new Event("input"))}s(F,"focus",()=>s(window,"wheel",U,{passive:!1})),s(F,"blur",()=>l(window,"wheel",U))}const{min:m,max:E,floor:_,round:A}=Math;function C(F,D,U){D/=100,U/=100;const H=_(F=F/360*6),Q=F-H,W=U*(1-D),Y=U*(1-Q*D),X=U*(1-(1-Q)*D),te=H%6;return[255*[U,Y,W,W,X,U][te],255*[X,U,U,Y,W,W][te],255*[W,W,X,U,U,Y][te]]}function k(F,D,U){const H=(2-(D/=100))*(U/=100)/2;return H!==0&&(D=H===1?0:H<.5?D*U/(2*H):D*U/(2-2*H)),[F,100*D,100*H]}function M(F,D,U){const H=m(F/=255,D/=255,U/=255),Q=E(F,D,U),W=Q-H;let Y,X;if(W===0)Y=X=0;else{X=W/Q;const te=((Q-F)/6+W/2)/W,se=((Q-D)/6+W/2)/W,fe=((Q-U)/6+W/2)/W;F===Q?Y=fe-se:D===Q?Y=1/3+te-fe:U===Q&&(Y=2/3+se-te),Y<0?Y+=1:Y>1&&(Y-=1)}return[360*Y,100*X,100*Q]}function x(F,D,U,H){return D/=100,U/=100,[...M(255*(1-m(1,(F/=100)*(1-(H/=100))+H)),255*(1-m(1,D*(1-H)+H)),255*(1-m(1,U*(1-H)+H)))]}function N(F,D,U){D/=100;const H=2*(D*=(U/=100)<.5?U:1-U)/(U+D)*100,Q=100*(U+D);return[F,isNaN(H)?0:H,Q]}function O(F){return M(...F.match(/.{2}/g).map(D=>parseInt(D,16)))}function w(F){F=F.match(/^[a-zA-Z]+$/)?function(Q){if(Q.toLowerCase()==="black")return"#000";const W=document.createElement("canvas").getContext("2d");return W.fillStyle=Q,W.fillStyle==="#000"?null:W.fillStyle}(F):F;const D={cmyk:/^cmyk\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)/i,rgba:/^rgba?\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D*?(([\d.]+)(%?)|$)/i,hsla:/^hsla?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hsva:/^hsva?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},U=Q=>Q.map(W=>/^(|\d+)\.\d+|\d+$/.test(W)?Number(W):void 0);let H;e:for(const Q in D)if(H=D[Q].exec(F))switch(Q){case"cmyk":{const[,W,Y,X,te]=U(H);if(W>100||Y>100||X>100||te>100)break e;return{values:x(W,Y,X,te),type:Q}}case"rgba":{let[,W,,Y,,X,,,te]=U(H);if(W=H[2]==="%"?W/100*255:W,Y=H[4]==="%"?Y/100*255:Y,X=H[6]==="%"?X/100*255:X,te=H[9]==="%"?te/100:te,W>255||Y>255||X>255||te<0||te>1)break e;return{values:[...M(W,Y,X),te],a:te,type:Q}}case"hexa":{let[,W]=H;W.length!==4&&W.length!==3||(W=W.split("").map(te=>te+te).join(""));const Y=W.substring(0,6);let X=W.substring(6);return X=X?parseInt(X,16)/255:void 0,{values:[...O(Y),X],a:X,type:Q}}case"hsla":{let[,W,Y,X,,te]=U(H);if(te=H[6]==="%"?te/100:te,W>360||Y>100||X>100||te<0||te>1)break e;return{values:[...N(W,Y,X),te],a:te,type:Q}}case"hsva":{let[,W,Y,X,,te]=U(H);if(te=H[6]==="%"?te/100:te,W>360||Y>100||X>100||te<0||te>1)break e;return{values:[W,Y,X,te],a:te,type:Q}}}return{values:null,type:null}}function L(F=0,D=0,U=0,H=1){const Q=(Y,X)=>(te=-1)=>X(~te?Y.map(se=>Number(se.toFixed(te))):Y),W={h:F,s:D,v:U,a:H,toHSVA(){const Y=[W.h,W.s,W.v,W.a];return Y.toString=Q(Y,X=>`hsva(${X[0]}, ${X[1]}%, ${X[2]}%, ${W.a})`),Y},toHSLA(){const Y=[...k(W.h,W.s,W.v),W.a];return Y.toString=Q(Y,X=>`hsla(${X[0]}, ${X[1]}%, ${X[2]}%, ${W.a})`),Y},toRGBA(){const Y=[...C(W.h,W.s,W.v),W.a];return Y.toString=Q(Y,X=>`rgba(${X[0]}, ${X[1]}, ${X[2]}, ${W.a})`),Y},toCMYK(){const Y=function(X,te,se){const fe=C(X,te,se),pe=fe[0]/255,Ee=fe[1]/255,re=fe[2]/255,de=m(1-pe,1-Ee,1-re);return[100*(de===1?0:(1-pe-de)/(1-de)),100*(de===1?0:(1-Ee-de)/(1-de)),100*(de===1?0:(1-re-de)/(1-de)),100*de]}(W.h,W.s,W.v);return Y.toString=Q(Y,X=>`cmyk(${X[0]}%, ${X[1]}%, ${X[2]}%, ${X[3]}%)`),Y},toHEXA(){const Y=function(te,se,fe){return C(te,se,fe).map(pe=>A(pe).toString(16).padStart(2,"0"))}(W.h,W.s,W.v),X=W.a>=1?"":Number((255*W.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return X&&Y.push(X),Y.toString=()=>`#${Y.join("").toUpperCase()}`,Y},clone:()=>L(W.h,W.s,W.v,W.a)};return W}const z=F=>Math.max(Math.min(F,1),0);function T(F){const D={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},F),_keyboard(W){const{options:Y}=D,{type:X,key:te}=W;if(document.activeElement===Y.wrapper){const{lock:se}=D.options,fe=te==="ArrowUp",pe=te==="ArrowRight",Ee=te==="ArrowDown",re=te==="ArrowLeft";if(X==="keydown"&&(fe||pe||Ee||re)){let de=0,ye=0;se==="v"?de=fe||pe?1:-1:se==="h"?de=fe||pe?-1:1:(ye=fe?-1:Ee?1:0,de=re?-1:pe?1:0),D.update(z(D.cache.x+.01*de),z(D.cache.y+.01*ye)),W.preventDefault()}else te.startsWith("Arrow")&&(D.options.onstop(),W.preventDefault())}},_tapstart(W){s(document,["mouseup","touchend","touchcancel"],D._tapstop),s(document,["mousemove","touchmove"],D._tapmove),W.cancelable&&W.preventDefault(),D._tapmove(W)},_tapmove(W){const{options:Y,cache:X}=D,{lock:te,element:se,wrapper:fe}=Y,pe=fe.getBoundingClientRect();let Ee=0,re=0;if(W){const be=W&&W.touches&&W.touches[0];Ee=W?(be||W).clientX:0,re=W?(be||W).clientY:0,Ee<pe.left?Ee=pe.left:Ee>pe.left+pe.width&&(Ee=pe.left+pe.width),re<pe.top?re=pe.top:re>pe.top+pe.height&&(re=pe.top+pe.height),Ee-=pe.left,re-=pe.top}else X&&(Ee=X.x*pe.width,re=X.y*pe.height);te!=="h"&&(se.style.left=`calc(${Ee/pe.width*100}% - ${se.offsetWidth/2}px)`),te!=="v"&&(se.style.top=`calc(${re/pe.height*100}% - ${se.offsetHeight/2}px)`),D.cache={x:Ee/pe.width,y:re/pe.height};const de=z(Ee/pe.width),ye=z(re/pe.height);switch(te){case"v":return Y.onchange(de);case"h":return Y.onchange(ye);default:return Y.onchange(de,ye)}},_tapstop(){D.options.onstop(),l(document,["mouseup","touchend","touchcancel"],D._tapstop),l(document,["mousemove","touchmove"],D._tapmove)},trigger(){D._tapmove()},update(W=0,Y=0){const{left:X,top:te,width:se,height:fe}=D.options.wrapper.getBoundingClientRect();D.options.lock==="h"&&(Y=W),D._tapmove({clientX:X+se*W,clientY:te+fe*Y})},destroy(){const{options:W,_tapstart:Y,_keyboard:X}=D;l(document,["keydown","keyup"],X),l([W.wrapper,W.element],"mousedown",Y),l([W.wrapper,W.element],"touchstart",Y,{passive:!1})}},{options:U,_tapstart:H,_keyboard:Q}=D;return s([U.wrapper,U.element],"mousedown",H),s([U.wrapper,U.element],"touchstart",H,{passive:!1}),s(document,["keydown","keyup"],Q),D}function q(F={}){F=Object.assign({onchange:()=>0,className:"",elements:[]},F);const D=s(F.elements,"click",U=>{F.elements.forEach(H=>H.classList[U.target===H?"add":"remove"](F.className)),F.onchange(U),U.stopPropagation()});return{destroy:()=>l(...D)}}const j={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},P=(F,D,U)=>{const H=typeof F!="object"||F instanceof HTMLElement?{reference:F,popper:D,...U}:F;return{update(Q=H){const{reference:W,popper:Y}=Object.assign(H,Q);if(!Y||!W)throw new Error("Popper- or reference-element missing.");return((X,te,se)=>{const{container:fe,arrow:pe,margin:Ee,padding:re,position:de,variantFlipOrder:ye,positionFlipOrder:be}={container:document.documentElement.getBoundingClientRect(),...j,...se},{left:De,top:ge}=te.style;te.style.left="0",te.style.top="0";const ue=X.getBoundingClientRect(),V=te.getBoundingClientRect(),Fe={t:ue.top-V.height-Ee,b:ue.bottom+Ee,r:ue.right+Ee,l:ue.left-V.width-Ee},ze={vs:ue.left,vm:ue.left+ue.width/2-V.width/2,ve:ue.left+ue.width-V.width,hs:ue.top,hm:ue.bottom-ue.height/2-V.height/2,he:ue.bottom-V.height},[Qe,Te="middle"]=de.split("-"),Ie=be[Qe],Oe=ye[Te],{top:je,left:Be,bottom:wt,right:et}=fe;for(const tt of Ie){const Ue=tt==="t"||tt==="b";let Ge=Fe[tt];const[it,ot]=Ue?["top","left"]:["left","top"],[Yt,sr]=Ue?[V.height,V.width]:[V.width,V.height],[en,ur]=Ue?[wt,et]:[et,wt],[tn,rn]=Ue?[je,Be]:[Be,je];if(!(Ge<tn||Ge+Yt+re>en))for(const It of Oe){let ht=ze[(Ue?"v":"h")+It];if(!(ht<rn||ht+sr+re>ur)){if(ht-=V[ot],Ge-=V[it],te.style[ot]=`${ht}px`,te.style[it]=`${Ge}px`,pe){const Et=Ue?ue.width/2:ue.height/2,Vt=sr/2,cr=Et>Vt,nn=ht+{s:cr?Vt:Et,m:Vt,e:cr?Vt:sr-Et}[It],Cr=Ge+{t:Yt,b:0,r:0,l:Yt}[tt];pe.style[ot]=`${nn}px`,pe.style[it]=`${Cr}px`}return tt+It}}}return te.style.left=De,te.style.top=ge,null})(W,Y,H)}}},J=class J{constructor(D){Re(this,"_initializingActive",!0);Re(this,"_recalc",!0);Re(this,"_nanopop",null);Re(this,"_root",null);Re(this,"_color",L());Re(this,"_lastColor",L());Re(this,"_swatchColors",[]);Re(this,"_setupAnimationFrame",null);Re(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]});this.options=D=Object.assign({...J.DEFAULT_OPTIONS},D);const{swatches:U,components:H,theme:Q,sliders:W,lockOpacity:Y,padding:X}=D;["nano","monolith"].includes(Q)&&!W&&(D.sliders="h"),H.interaction||(H.interaction={});const{preview:te,opacity:se,hue:fe,palette:pe}=H;H.opacity=!Y&&se,H.palette=pe||te||se||fe,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),U&&U.length&&U.forEach(ye=>this.addSwatch(ye));const{button:Ee,app:re}=this._root;this._nanopop=P(Ee,re,{margin:X}),Ee.setAttribute("role","button"),Ee.setAttribute("aria-label",this._t("btn:toggle"));const de=this;this._setupAnimationFrame=requestAnimationFrame(function ye(){if(!re.offsetWidth)return requestAnimationFrame(ye);de.setColor(D.default),de._rePositioningPicker(),D.defaultRepresentation&&(de._representation=D.defaultRepresentation,de.setColorRepresentation(de._representation)),D.showAlways&&de.show(),de._initializingActive=!1,de._emit("init")})}_preBuild(){const{options:D}=this;for(const U of["el","container"])D[U]=y(D[U]);this._root=(U=>{const{components:H,useAsButton:Q,inline:W,appClass:Y,theme:X,lockOpacity:te}=U.options,se=re=>re?"":'style="display:none" hidden',fe=re=>U._t(re),pe=d(`
      <div :ref="root" class="pickr">

        ${Q?"":'<button type="button" :ref="button" class="pcr-button"></button>'}

        <div :ref="app" class="pcr-app ${Y||""}" data-theme="${X}" ${W?'style="position: unset"':""} aria-label="${fe("ui:dialog")}" role="window">
          <div class="pcr-selection" ${se(H.palette)}>
            <div :obj="preview" class="pcr-color-preview" ${se(H.preview)}>
              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${fe("btn:last-color")}"></button>
              <div :ref="currentColor" class="pcr-current-color"></div>
            </div>

            <div :obj="palette" class="pcr-color-palette">
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${fe("aria:palette")}" role="listbox"></div>
            </div>

            <div :obj="hue" class="pcr-color-chooser" ${se(H.hue)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${fe("aria:hue")}" role="slider"></div>
            </div>

            <div :obj="opacity" class="pcr-color-opacity" ${se(H.opacity)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${fe("aria:opacity")}" role="slider"></div>
            </div>
          </div>

          <div class="pcr-swatches ${H.palette?"":"pcr-last"}" :ref="swatches"></div>

          <div :obj="interaction" class="pcr-interaction" ${se(Object.keys(H.interaction).length)}>
            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${se(H.interaction.input)} aria-label="${fe("aria:input")}">

            <input :arr="options" class="pcr-type" data-type="HEXA" value="${te?"HEX":"HEXA"}" type="button" ${se(H.interaction.hex)}>
            <input :arr="options" class="pcr-type" data-type="RGBA" value="${te?"RGB":"RGBA"}" type="button" ${se(H.interaction.rgba)}>
            <input :arr="options" class="pcr-type" data-type="HSLA" value="${te?"HSL":"HSLA"}" type="button" ${se(H.interaction.hsla)}>
            <input :arr="options" class="pcr-type" data-type="HSVA" value="${te?"HSV":"HSVA"}" type="button" ${se(H.interaction.hsva)}>
            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${se(H.interaction.cmyk)}>

            <input :ref="save" class="pcr-save" value="${fe("btn:save")}" type="button" ${se(H.interaction.save)} aria-label="${fe("aria:btn:save")}">
            <input :ref="cancel" class="pcr-cancel" value="${fe("btn:cancel")}" type="button" ${se(H.interaction.cancel)} aria-label="${fe("aria:btn:cancel")}">
            <input :ref="clear" class="pcr-clear" value="${fe("btn:clear")}" type="button" ${se(H.interaction.clear)} aria-label="${fe("aria:btn:clear")}">
          </div>
        </div>
      </div>
    `),Ee=pe.interaction;return Ee.options.find(re=>!re.hidden&&!re.classList.add("active")),Ee.type=()=>Ee.options.find(re=>re.classList.contains("active")),pe})(this),D.useAsButton&&(this._root.button=D.el),D.container.appendChild(this._root.root)}_finalBuild(){const D=this.options,U=this._root;if(D.container.removeChild(U.root),D.inline){const H=D.el.parentElement;D.el.nextSibling?H.insertBefore(U.app,D.el.nextSibling):H.appendChild(U.app)}else D.container.appendChild(U.app);D.useAsButton?D.inline&&D.el.remove():D.el.parentNode.replaceChild(U.root,D.el),D.disabled&&this.disable(),D.comparison||(U.button.style.transition="none",D.useAsButton||(U.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const D=this,U=this.options.components,H=(D.options.sliders||"v").repeat(2),[Q,W]=H.match(/^[vh]+$/g)?H:[],Y=()=>this._color||(this._color=this._lastColor.clone()),X={palette:T({element:D._root.palette.picker,wrapper:D._root.palette.palette,onstop:()=>D._emit("changestop","slider",D),onchange(te,se){if(!U.palette)return;const fe=Y(),{_root:pe,options:Ee}=D,{lastColor:re,currentColor:de}=pe.preview;D._recalc&&(fe.s=100*te,fe.v=100-100*se,fe.v<0&&(fe.v=0),D._updateOutput("slider"));const ye=fe.toRGBA().toString(0);this.element.style.background=ye,this.wrapper.style.background=`
                        linear-gradient(to top, rgba(0, 0, 0, ${fe.a}), transparent),
                        linear-gradient(to left, hsla(${fe.h}, 100%, 50%, ${fe.a}), rgba(255, 255, 255, ${fe.a}))
                    `,Ee.comparison?Ee.useAsButton||D._lastColor||re.style.setProperty("--pcr-color",ye):(pe.button.style.setProperty("--pcr-color",ye),pe.button.classList.remove("clear"));const be=fe.toHEXA().toString();for(const{el:De,color:ge}of D._swatchColors)De.classList[be===ge.toHEXA().toString()?"add":"remove"]("pcr-active");de.style.setProperty("--pcr-color",ye)}}),hue:T({lock:W==="v"?"h":"v",element:D._root.hue.picker,wrapper:D._root.hue.slider,onstop:()=>D._emit("changestop","slider",D),onchange(te){if(!U.hue||!U.palette)return;const se=Y();D._recalc&&(se.h=360*te),this.element.style.backgroundColor=`hsl(${se.h}, 100%, 50%)`,X.palette.trigger()}}),opacity:T({lock:Q==="v"?"h":"v",element:D._root.opacity.picker,wrapper:D._root.opacity.slider,onstop:()=>D._emit("changestop","slider",D),onchange(te){if(!U.opacity||!U.palette)return;const se=Y();D._recalc&&(se.a=Math.round(100*te)/100),this.element.style.background=`rgba(0, 0, 0, ${se.a})`,X.palette.trigger()}}),selectable:q({elements:D._root.interaction.options,className:"active",onchange(te){D._representation=te.target.getAttribute("data-type").toUpperCase(),D._recalc&&D._updateOutput("swatch")}})};this._components=X}_bindEvents(){const{_root:D,options:U}=this,H=[s(D.interaction.clear,"click",()=>this._clearColor()),s([D.interaction.cancel,D.preview.lastColor],"click",()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")}),s(D.interaction.save,"click",()=>{!this.applyColor()&&!U.showAlways&&this.hide()}),s(D.interaction.result,["keyup","input"],Q=>{this.setColor(Q.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),Q.stopImmediatePropagation()}),s(D.interaction.result,["focus","blur"],Q=>{this._recalc=Q.type==="blur",this._recalc&&this._updateOutput(null)}),s([D.palette.palette,D.palette.picker,D.hue.slider,D.hue.picker,D.opacity.slider,D.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0,{passive:!0})];if(!U.showAlways){const Q=U.closeWithKey;H.push(s(D.button,"click",()=>this.isOpen()?this.hide():this.show()),s(document,"keyup",W=>this.isOpen()&&(W.key===Q||W.code===Q)&&this.hide()),s(document,["touchstart","mousedown"],W=>{this.isOpen()&&!p(W).some(Y=>Y===D.app||Y===D.button)&&this.hide()},{capture:!0}))}if(U.adjustableNumbers){const Q={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};v(D.interaction.result,(W,Y,X)=>{const te=Q[this.getColorRepresentation().toLowerCase()];if(te){const se=te[X],fe=W+(se>=100?1e3*Y:Y);return fe<=0?0:Number((fe<se?fe:se).toPrecision(3))}return W})}if(U.autoReposition&&!U.inline){let Q=null;const W=this;H.push(s(window,["scroll","resize"],()=>{W.isOpen()&&(U.closeOnScroll&&W.hide(),Q===null?(Q=setTimeout(()=>Q=null,100),requestAnimationFrame(function Y(){W._rePositioningPicker(),Q!==null&&requestAnimationFrame(Y)})):(clearTimeout(Q),Q=setTimeout(()=>Q=null,100)))},{capture:!0}))}this._eventBindings=H}_rePositioningPicker(){const{options:D}=this;if(!D.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:D.position})){const U=this._root.app,H=U.getBoundingClientRect();U.style.top=(window.innerHeight-H.height)/2+"px",U.style.left=(window.innerWidth-H.width)/2+"px"}}_updateOutput(D){const{_root:U,_color:H,options:Q}=this;if(U.interaction.type()){const W=`to${U.interaction.type().getAttribute("data-type")}`;U.interaction.result.value=typeof H[W]=="function"?H[W]().toString(Q.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",H,D,this)}_clearColor(D=!1){const{_root:U,options:H}=this;H.useAsButton||U.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),U.button.classList.add("clear"),H.showAlways||this.hide(),this._lastColor=null,this._initializingActive||D||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(D){const{values:U,type:H,a:Q}=w(D),{lockOpacity:W}=this.options,Y=Q!==void 0&&Q!==1;return U&&U.length===3&&(U[3]=void 0),{values:!U||W&&Y?null:U,type:H}}_t(D){return this.options.i18n[D]||J.I18N_DEFAULTS[D]}_emit(D,...U){this._eventListener[D].forEach(H=>H(...U,this))}on(D,U){return this._eventListener[D].push(U),this}off(D,U){const H=this._eventListener[D]||[],Q=H.indexOf(U);return~Q&&H.splice(Q,1),this}addSwatch(D){const{values:U}=this._parseLocalColor(D);if(U){const{_swatchColors:H,_root:Q}=this,W=L(...U),Y=h(`<button type="button" style="--pcr-color: ${W.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return Q.swatches.appendChild(Y),H.push({el:Y,color:W}),this._eventBindings.push(s(Y,"click",()=>{this.setHSVA(...W.toHSVA(),!0),this._emit("swatchselect",W),this._emit("change",W,"swatch",this)})),!0}return!1}removeSwatch(D){const U=this._swatchColors[D];if(U){const{el:H}=U;return this._root.swatches.removeChild(H),this._swatchColors.splice(D,1),!0}return!1}applyColor(D=!1){const{preview:U,button:H}=this._root,Q=this._color.toRGBA().toString(0);return U.lastColor.style.setProperty("--pcr-color",Q),this.options.useAsButton||H.style.setProperty("--pcr-color",Q),H.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||D||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach(D=>l(...D)),Object.keys(this._components).forEach(D=>this._components[D].destroy())}destroyAndRemove(){this.destroy();const{root:D,app:U}=this._root;D.parentElement&&D.parentElement.removeChild(D),U.parentElement.removeChild(U),Object.keys(this).forEach(H=>this[H]=null)}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(D=360,U=0,H=0,Q=1,W=!1){const Y=this._recalc;if(this._recalc=!1,D<0||D>360||U<0||U>100||H<0||H>100||Q<0||Q>1)return!1;this._color=L(D,U,H,Q);const{hue:X,opacity:te,palette:se}=this._components;return X.update(D/360),te.update(Q),se.update(U/100,1-H/100),W||this.applyColor(),Y&&this._updateOutput(),this._recalc=Y,!0}setColor(D,U=!1){if(D===null)return this._clearColor(U),!0;const{values:H,type:Q}=this._parseLocalColor(D);if(H){const W=Q.toUpperCase(),{options:Y}=this._root.interaction,X=Y.find(te=>te.getAttribute("data-type")===W);if(X&&!X.hidden)for(const te of Y)te.classList[te===X?"add":"remove"]("active");return!!this.setHSVA(...H,U)&&this.setColorRepresentation(W)}return!1}setColorRepresentation(D){return D=D.toUpperCase(),!!this._root.interaction.options.find(U=>U.getAttribute("data-type").startsWith(D)&&!U.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}};Re(J,"utils",o),Re(J,"version","1.9.1"),Re(J,"I18N_DEFAULTS",{"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"}),Re(J,"DEFAULT_OPTIONS",{appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"}),Re(J,"create",D=>new J(D));let ee=J;return r=r.default})())}(Xo)),Xo.exports}var hb=db();const fb=Ve(hb);class pb{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.pickrs={},["node","stroke","edge","face","label","background","grid"].forEach(r=>{const o=`#${r}-color`;this.pickrs[r]=fb.create({el:o,theme:"nano",default:this.settings[`${r}_color`],components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!0,rgba:!0,input:!0,save:!0}}})})}init(){for(const e in this.pickrs){const t=this.pickrs[e];t.on("change",r=>{const o=r.toRGBA().toString();t.setColor(o),this.eventBus.emit("updateSetting",{key:`${e}_color`,value:o})})}}setColor(e,t){const r=this.pickrs[e];r&&(r.setColor(t),this.eventBus.emit("updateSetting",{key:`${e}_color`,value:t}))}getColor(e){const t=this.pickrs[e];return t?t.getColor().toRGBA().toString():null}resetColors(){for(const e in this.pickrs)this.setColor(e,this.settings[`${e}_color`])}}class gb{constructor(){this.eventBus=oy,this.appSettings=new na(this),this.settings=this.appSettings.settings,this._canvas=new uy(this),this.canvas=this._canvas.canvas,this.layout=new nb(this),this.graphManager=new N0(this,this.settings.historyLimit,this.settings.type),this.rect=new cb(this),this.menu=new z0(this,T0),this.widget=new ub(this),this.keyHandler=new L0(this),this.eventHanders=new $0(this),this.colorPicker=new pb(this),this.simulation=null,this.nodes=[],this.links=[],this.init()}init(){this.menu.init(),this.appSettings.init(),this.widget.init(),this._canvas.init(),this.rect.init(),this.keyHandler.init(),this.eventHanders.init(),this.initSimulation(),this.loadInitialGraph(),this.colorPicker.init(),this.startAnimationLoop()}initSimulation(){this.nodes=this.graphManager.graph.getNodesForD3(),this.links=this.graphManager.graph.getEdgesForD3(),this.simulation=ty(this.nodes).force("link",Kg(this.links).id(e=>e.id).distance(10).strength(.5)).force("charge",ry().strength(-300)).force("collide",Hg(20)).force("center",kg(this.canvas.width/2,this.canvas.height/2)).force("x",ny(this.canvas.width/2).strength(.05)).force("y",iy(this.canvas.height/1).strength(.05)).velocityDecay(.3).alphaDecay(.02),this.appSettings.settings.forceSimulation||this.simulation.stop()}loadInitialGraph(){this.graphManager.loadHitoryFromLocalStorage()||this.graphManager.generator.clusters(20,20,10)}drawGraph(){const e=this.graphManager.graph,t=this.canvas,r=this.appSettings.settings,o=this._canvas.ctx;o.clearRect(0,0,t.width,t.height),e.forEachFace((a,s)=>{s.color||e.setFaceAttribute(a,"color",r.face_color),s.labelColor||e.setFaceAttribute(a,"labelColor",r.label_color),kt.subgraph(e,s.nodes);const l=s.nodes.map(d=>{const p=e.getNodeAttributes(d);return[p.x,p.y]}),h={x:Tn(l,d=>d[0]),y:Tn(l,d=>d[1])};if(l){o.fillStyle=s.color,o.beginPath(),o.moveTo(l[0][0],l[0][1]);for(let d=1;d<l.length;d++)o.lineTo(l[d][0],l[d][1]);o.closePath(),o.fill()}r.faceLabel&&(o.fillStyle=s.labelColor||"#000",o.font=`${r.label_size}px sans-serif`,o.textAlign="center",o.textBaseline="middle",o.fillText(s.label,h.x,h.y))}),e.forEachEdge((a,s,l,h,d,p)=>{if(s.label===void 0){const y=Hr(s.id);e.setEdgeAttribute(a,"label",y)}if(s.color||e.setEdgeAttribute(a,"color",r.edge_color),s.labelColor||e.setEdgeAttribute(a,"labelColor",r.label_color),e.isDirected(a)){const y=p.x-d.x,v=p.y-d.y,m=Math.sqrt(y*y+v*v),E=12+Number(r.edge_size),_=y/m*E,A=v/m*E,C=e.hasEdge(h,l),k=C?d.x+_:d.x,M=C?d.y+A:d.y,x=p.x-_,N=p.y-A;o.beginPath(),o.moveTo(k,M),o.lineTo(x,N),o.strokeStyle=s.selected?"orange":s.color,o.lineWidth=r.edge_size,o.stroke(),o.closePath()}else o.beginPath(),o.moveTo(d.x,d.y),o.lineTo(p.x,p.y),o.strokeStyle=s.selected?"orange":s.color,o.lineWidth=r.edge_size,o.stroke(),o.closePath();if(e.isDirected(a)){const y=14+Number(r.edge_size),v=Math.atan2(p.y-d.y,p.x-d.x),m=p.x-Math.cos(v)*r.node_radius/4,E=p.y-Math.sin(v)*r.node_radius/4;o.beginPath(),o.moveTo(m,E),o.lineTo(m-y*Math.cos(v-Math.PI/6),E-y*Math.sin(v-Math.PI/6)),o.lineTo(m-y*Math.cos(v+Math.PI/6),E-y*Math.sin(v+Math.PI/6)),o.closePath(),o.fillStyle=s.selected?"orange":s.color,o.fill()}if(r.edgeLabel||r.weightLabel){o.fillStyle=s.labelColor,o.font=`${r.label_size}px sans-serif`,o.textAlign="center",o.textBaseline="middle";const y=(d.x+p.x)/2,v=(d.y+p.y)/2,m=p.x-d.x,E=p.y-d.y,_=Math.sqrt(m*m+E*E),A=10,C=-E/_,k=m/_,M=y+C*A+r.label_pos.x,x=v+k*A+r.label_pos.y;r.edgeLabel&&r.weightLabel?s.weight?o.fillText(`${s.label}, ${s.weight}`,M,x):o.fillText(s.label,M,x):!r.edgeLabel&&r.weightLabel&&s.weight?o.fillText(s.weight,M,x):r.edgeLabel&&!r.weightLabel&&o.fillText(s.label,M,x)}}),e.forEachNode((a,s)=>{if(s.label===void 0){const l=Hr(a);e.setNodeAttribute(a,"label",l)}s.color||e.setNodeAttribute(a,"color",r.node_color),s.stroke||e.setNodeAttribute(a,"stroke",r.stroke_color),s.labelColor||e.setNodeAttribute(a,"labelColor",r.label_color),o.beginPath(),o.arc(s.x,s.y,r.node_radius*s.size,0,2*Math.PI),o.fillStyle=s.selected?"orange":s.color,o.fill(),this.settings.stroke_size!=0&&(o.lineWidth=this.settings.stroke_size,o.strokeStyle=s.selected?"orange":s.stroke,o.stroke()),o.closePath(),r.vertexLabel&&(o.fillStyle=s.labelColor,o.font=`${r.label_size}px sans-serif`,o.textAlign="center",o.textBaseline="middle",o.fillText(s.label,s.x+r.label_pos.x,s.y+r.label_pos.y))}),this.rect.draw()}ticked(){this.nodes.forEach(e=>{this.graphManager.graph.updateNodeAttributes(e.id,t=>({...t,x:e.x,y:e.y}))}),this.eventBus.emit("graph:updated",{type:"tick"})}startSimulation(){this.simulation.alpha(.3).restart()}stopSimulation(){this.simulation.stop()}updateSimulation(){this.nodes.length=0,this.nodes=this.graphManager.graph.getNodesForD3(),this.links.length=0,this.links=this.graphManager.graph.getEdgesForD3(),this.simulation.nodes(this.nodes),this.simulation.force("link").links(this.links),this.appSettings.settings.forceSimulation?this.startSimulation():this.stopSimulation()}updateForce(){const e=this.graphManager.graph;this.nodes.length=0,e.forEachNode((t,r)=>{this.nodes.push({id:Number(t),x:r.x,y:r.y})}),this.links.length=0,e.forEachEdge(function(t,r,o,a,s,l){this.links.push({source:Number(o),target:Number(a)})})}startAnimationLoop(){const e=()=>{this.appSettings.settings.forceSimulation&&(this.simulation.tick(),this.ticked()),this.drawGraph(),requestAnimationFrame(e)};requestAnimationFrame(e)}}document.addEventListener("DOMContentLoaded",()=>{const n=new gb;window.graphStudio=n,window.addEventListener("resize",()=>{n.canvas.width=window.innerWidth,n.canvas.height=window.innerHeight,n.drawGraph()}),document.querySelectorAll("img").forEach(e=>{e.setAttribute("draggable","false")})});
