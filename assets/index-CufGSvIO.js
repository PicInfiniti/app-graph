var Ng=Object.defineProperty;var Wu=n=>{throw TypeError(n)};var Rg=(n,e,t)=>e in n?Ng(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ve=(n,e,t)=>Rg(n,typeof e!="symbol"?e+"":e,t),Uu=(n,e,t)=>e.has(n)||Wu("Cannot "+t);var Ln=(n,e,t)=>(Uu(n,e,"read from private field"),t?t.call(n):e.get(n)),ju=(n,e,t)=>e.has(n)?Wu("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Bu=(n,e,t,r)=>(Uu(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function hi(n,e){let t=0,r=0;if(e===void 0)for(let i of n)i!=null&&(i=+i)>=i&&(++t,r+=i);else{let i=-1;for(let a of n)(a=e(a,++i,n))!=null&&(a=+a)>=a&&(++t,r+=a)}if(t)return r/t}var Gg={value:()=>{}};function bi(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new ui(t)}function ui(n){this._=n}function Pg(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}ui.prototype=bi.prototype={constructor:ui,on:function(n,e){var t=this._,r=Pg(n+"",t),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(n=r[a]).type)&&(i=$g(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(n=r[a]).type)t[i]=Hu(t[i],n.name,e);else if(e==null)for(i in t)t[i]=Hu(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new ui(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,a;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(a=this._[n],r=0,i=a.length;r<i;++r)a[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,a=r.length;i<a;++i)r[i].value.apply(e,t)}};function $g(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function Hu(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=Gg,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var Is="http://www.w3.org/1999/xhtml";const Ku={svg:"http://www.w3.org/2000/svg",xhtml:Is,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wi(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),Ku.hasOwnProperty(e)?{space:Ku[e],local:n}:n}function Og(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Is&&e.documentElement.namespaceURI===Is?e.createElement(n):e.createElementNS(t,n)}}function qg(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function tf(n){var e=wi(n);return(e.local?qg:Og)(e)}function Fg(){}function Fs(n){return n==null?Fg:function(){return this.querySelector(n)}}function Wg(n){typeof n!="function"&&(n=Fs(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),u,l,d=0;d<o;++d)(u=a[d])&&(l=n.call(u,u.__data__,d,a))&&("__data__"in u&&(l.__data__=u.__data__),s[d]=l);return new ht(r,this._parents)}function Ug(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function jg(){return[]}function rf(n){return n==null?jg:function(){return this.querySelectorAll(n)}}function Bg(n){return function(){return Ug(n.apply(this,arguments))}}function Hg(n){typeof n=="function"?n=Bg(n):n=rf(n);for(var e=this._groups,t=e.length,r=[],i=[],a=0;a<t;++a)for(var o=e[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&(r.push(n.call(u,u.__data__,l,o)),i.push(u));return new ht(r,i)}function nf(n){return function(){return this.matches(n)}}function af(n){return function(e){return e.matches(n)}}var Kg=Array.prototype.find;function Xg(n){return function(){return Kg.call(this.children,n)}}function Yg(){return this.firstElementChild}function Vg(n){return this.select(n==null?Yg:Xg(typeof n=="function"?n:af(n)))}var Qg=Array.prototype.filter;function Zg(){return Array.from(this.children)}function Jg(n){return function(){return Qg.call(this.children,n)}}function ev(n){return this.selectAll(n==null?Zg:Jg(typeof n=="function"?n:af(n)))}function tv(n){typeof n!="function"&&(n=nf(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var a=e[i],o=a.length,s=r[i]=[],u,l=0;l<o;++l)(u=a[l])&&n.call(u,u.__data__,l,a)&&s.push(u);return new ht(r,this._parents)}function of(n){return new Array(n.length)}function rv(){return new ht(this._enter||this._groups.map(of),this._parents)}function di(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}di.prototype={constructor:di,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function nv(n){return function(){return n}}function iv(n,e,t,r,i,a){for(var o=0,s,u=e.length,l=a.length;o<l;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):t[o]=new di(n,a[o]);for(;o<u;++o)(s=e[o])&&(i[o]=s)}function av(n,e,t,r,i,a,o){var s,u,l=new Map,d=e.length,f=a.length,g=new Array(d),m;for(s=0;s<d;++s)(u=e[s])&&(g[s]=m=o.call(u,u.__data__,s,e)+"",l.has(m)?i[s]=u:l.set(m,u));for(s=0;s<f;++s)m=o.call(n,a[s],s,a)+"",(u=l.get(m))?(r[s]=u,u.__data__=a[s],l.delete(m)):t[s]=new di(n,a[s]);for(s=0;s<d;++s)(u=e[s])&&l.get(g[s])===u&&(i[s]=u)}function ov(n){return n.__data__}function sv(n,e){if(!arguments.length)return Array.from(this,ov);var t=e?av:iv,r=this._parents,i=this._groups;typeof n!="function"&&(n=nv(n));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var d=r[l],f=i[l],g=f.length,m=uv(n.call(d,d&&d.__data__,l,r)),w=m.length,x=s[l]=new Array(w),S=o[l]=new Array(w),A=u[l]=new Array(g);t(d,f,x,S,A,m,e);for(var b=0,_=0,y,D;b<w;++b)if(y=x[b]){for(b>=_&&(_=b+1);!(D=S[_])&&++_<w;);y._next=D||null}}return o=new ht(o,r),o._enter=s,o._exit=u,o}function uv(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function lv(){return new ht(this._exit||this._groups.map(of),this._parents)}function cv(n,e,t){var r=this.enter(),i=this,a=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(i=e(i),i&&(i=i.selection())),t==null?a.remove():t(a),r&&i?r.merge(i).order():i}function hv(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,i=t.length,a=r.length,o=Math.min(i,a),s=new Array(i),u=0;u<o;++u)for(var l=t[u],d=r[u],f=l.length,g=s[u]=new Array(f),m,w=0;w<f;++w)(m=l[w]||d[w])&&(g[w]=m);for(;u<i;++u)s[u]=t[u];return new ht(s,this._parents)}function dv(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function fv(n){n||(n=pv);function e(f,g){return f&&g?n(f.__data__,g.__data__):!f-!g}for(var t=this._groups,r=t.length,i=new Array(r),a=0;a<r;++a){for(var o=t[a],s=o.length,u=i[a]=new Array(s),l,d=0;d<s;++d)(l=o[d])&&(u[d]=l);u.sort(e)}return new ht(i,this._parents).order()}function pv(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function gv(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function vv(){return Array.from(this)}function yv(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function mv(){let n=0;for(const e of this)++n;return n}function bv(){return!this.node()}function wv(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],a=0,o=i.length,s;a<o;++a)(s=i[a])&&n.call(s,s.__data__,a,i);return this}function Ev(n){return function(){this.removeAttribute(n)}}function xv(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Sv(n,e){return function(){this.setAttribute(n,e)}}function Av(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function _v(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function kv(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function Dv(n,e){var t=wi(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?xv:Ev:typeof e=="function"?t.local?kv:_v:t.local?Av:Sv)(t,e))}function sf(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function Cv(n){return function(){this.style.removeProperty(n)}}function Iv(n,e,t){return function(){this.style.setProperty(n,e,t)}}function Mv(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function Lv(n,e,t){return arguments.length>1?this.each((e==null?Cv:typeof e=="function"?Mv:Iv)(n,e,t??"")):Or(this.node(),n)}function Or(n,e){return n.style.getPropertyValue(e)||sf(n).getComputedStyle(n,null).getPropertyValue(e)}function zv(n){return function(){delete this[n]}}function Tv(n,e){return function(){this[n]=e}}function Nv(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function Rv(n,e){return arguments.length>1?this.each((e==null?zv:typeof e=="function"?Nv:Tv)(n,e)):this.node()[n]}function uf(n){return n.trim().split(/^|\s+/)}function Ws(n){return n.classList||new lf(n)}function lf(n){this._node=n,this._names=uf(n.getAttribute("class")||"")}lf.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function cf(n,e){for(var t=Ws(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function hf(n,e){for(var t=Ws(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function Gv(n){return function(){cf(this,n)}}function Pv(n){return function(){hf(this,n)}}function $v(n,e){return function(){(e.apply(this,arguments)?cf:hf)(this,n)}}function Ov(n,e){var t=uf(n+"");if(arguments.length<2){for(var r=Ws(this.node()),i=-1,a=t.length;++i<a;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?$v:e?Gv:Pv)(t,e))}function qv(){this.textContent=""}function Fv(n){return function(){this.textContent=n}}function Wv(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function Uv(n){return arguments.length?this.each(n==null?qv:(typeof n=="function"?Wv:Fv)(n)):this.node().textContent}function jv(){this.innerHTML=""}function Bv(n){return function(){this.innerHTML=n}}function Hv(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function Kv(n){return arguments.length?this.each(n==null?jv:(typeof n=="function"?Hv:Bv)(n)):this.node().innerHTML}function Xv(){this.nextSibling&&this.parentNode.appendChild(this)}function Yv(){return this.each(Xv)}function Vv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qv(){return this.each(Vv)}function Zv(n){var e=typeof n=="function"?n:tf(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Jv(){return null}function e0(n,e){var t=typeof n=="function"?n:tf(n),r=e==null?Jv:typeof e=="function"?e:Fs(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function t0(){var n=this.parentNode;n&&n.removeChild(this)}function r0(){return this.each(t0)}function n0(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function i0(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function a0(n){return this.select(n?i0:n0)}function o0(n){return arguments.length?this.property("__data__",n):this.node().__data__}function s0(n){return function(e){n.call(this,e,this.__data__)}}function u0(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function l0(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,i=e.length,a;t<i;++t)a=e[t],(!n.type||a.type===n.type)&&a.name===n.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function c0(n,e,t){return function(){var r=this.__on,i,a=s0(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=t),i.value=e;return}}this.addEventListener(n.type,a,t),i={type:n.type,name:n.name,value:e,listener:a,options:t},r?r.push(i):this.__on=[i]}}function h0(n,e,t){var r=u0(n+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,d;u<l;++u)for(i=0,d=s[u];i<a;++i)if((o=r[i]).type===d.type&&o.name===d.name)return d.value}return}for(s=e?c0:l0,i=0;i<a;++i)this.each(s(r[i],e,t));return this}function df(n,e,t){var r=sf(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function d0(n,e){return function(){return df(this,n,e)}}function f0(n,e){return function(){return df(this,n,e.apply(this,arguments))}}function p0(n,e){return this.each((typeof e=="function"?f0:d0)(n,e))}function*g0(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var ff=[null];function ht(n,e){this._groups=n,this._parents=e}function yn(){return new ht([[document.documentElement]],ff)}function v0(){return this}ht.prototype=yn.prototype={constructor:ht,select:Wg,selectAll:Hg,selectChild:Vg,selectChildren:ev,filter:tv,data:sv,enter:rv,exit:lv,join:cv,merge:hv,selection:v0,order:dv,sort:fv,call:gv,nodes:vv,node:yv,size:mv,empty:bv,each:wv,attr:Dv,style:Lv,property:Rv,classed:Ov,text:Uv,html:Kv,raise:Yv,lower:Qv,append:Zv,insert:e0,remove:r0,clone:a0,datum:o0,on:h0,dispatch:p0,[Symbol.iterator]:g0};function rt(n){return typeof n=="string"?new ht([[document.querySelector(n)]],[document.documentElement]):new ht([[n]],ff)}function y0(n){let e;for(;e=n.sourceEvent;)n=e;return n}function yt(n,e){if(n=y0(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop]}}return[n.pageX,n.pageY]}const m0={passive:!1},dn={capture:!0,passive:!1};function Ui(n){n.stopImmediatePropagation()}function Pr(n){n.preventDefault(),n.stopImmediatePropagation()}function b0(n){var e=n.document.documentElement,t=rt(n).on("dragstart.drag",Pr,dn);"onselectstart"in e?t.on("selectstart.drag",Pr,dn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function w0(n,e){var t=n.document.documentElement,r=rt(n).on("dragstart.drag",null);e&&(r.on("click.drag",Pr,dn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const zn=n=>()=>n;function Ms(n,{sourceEvent:e,subject:t,target:r,identifier:i,active:a,x:o,y:s,dx:u,dy:l,dispatch:d}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:d}})}Ms.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function E0(n){return!n.ctrlKey&&!n.button}function x0(){return this.parentNode}function S0(n,e){return e??{x:n.x,y:n.y}}function A0(){return navigator.maxTouchPoints||"ontouchstart"in this}function _0(){var n=E0,e=x0,t=S0,r=A0,i={},a=bi("start","drag","end"),o=0,s,u,l,d,f=0;function g(y){y.on("mousedown.drag",m).filter(r).on("touchstart.drag",S).on("touchmove.drag",A,m0).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(y,D){if(!(d||!n.call(this,y,D))){var R=_(this,e.call(this,y,D),y,D,"mouse");R&&(rt(y.view).on("mousemove.drag",w,dn).on("mouseup.drag",x,dn),b0(y.view),Ui(y),l=!1,s=y.clientX,u=y.clientY,R("start",y))}}function w(y){if(Pr(y),!l){var D=y.clientX-s,R=y.clientY-u;l=D*D+R*R>f}i.mouse("drag",y)}function x(y){rt(y.view).on("mousemove.drag mouseup.drag",null),w0(y.view,l),Pr(y),i.mouse("end",y)}function S(y,D){if(n.call(this,y,D)){var R=y.changedTouches,v=e.call(this,y,D),C=R.length,M,L;for(M=0;M<C;++M)(L=_(this,v,y,D,R[M].identifier,R[M]))&&(Ui(y),L("start",y,R[M]))}}function A(y){var D=y.changedTouches,R=D.length,v,C;for(v=0;v<R;++v)(C=i[D[v].identifier])&&(Pr(y),C("drag",y,D[v]))}function b(y){var D=y.changedTouches,R=D.length,v,C;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),v=0;v<R;++v)(C=i[D[v].identifier])&&(Ui(y),C("end",y,D[v]))}function _(y,D,R,v,C,M){var L=a.copy(),G=yt(M||R,D),$,N,Y;if((Y=t.call(y,new Ms("beforestart",{sourceEvent:R,target:g,identifier:C,active:o,x:G[0],y:G[1],dx:0,dy:0,dispatch:L}),v))!=null)return $=Y.x-G[0]||0,N=Y.y-G[1]||0,function V(F,I,T){var j=G,X;switch(F){case"start":i[C]=V,X=o++;break;case"end":delete i[C],--o;case"drag":G=yt(T||I,D),X=o;break}L.call(F,y,new Ms(F,{sourceEvent:I,subject:Y,target:g,identifier:C,active:X,x:G[0]+$,y:G[1]+N,dx:G[0]-j[0],dy:G[1]-j[1],dispatch:L}),v)}}return g.filter=function(y){return arguments.length?(n=typeof y=="function"?y:zn(!!y),g):n},g.container=function(y){return arguments.length?(e=typeof y=="function"?y:zn(y),g):e},g.subject=function(y){return arguments.length?(t=typeof y=="function"?y:zn(y),g):t},g.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:zn(!!y),g):r},g.on=function(){var y=a.on.apply(a,arguments);return y===a?g:y},g.clickDistance=function(y){return arguments.length?(f=(y=+y)*y,g):Math.sqrt(f)},g}function Us(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function pf(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function mn(){}var fn=.7,fi=1/fn,$r="\\s*([+-]?\\d+)\\s*",pn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",k0=/^#([0-9a-f]{3,8})$/,D0=new RegExp(`^rgb\\(${$r},${$r},${$r}\\)$`),C0=new RegExp(`^rgb\\(${$t},${$t},${$t}\\)$`),I0=new RegExp(`^rgba\\(${$r},${$r},${$r},${pn}\\)$`),M0=new RegExp(`^rgba\\(${$t},${$t},${$t},${pn}\\)$`),L0=new RegExp(`^hsl\\(${pn},${$t},${$t}\\)$`),z0=new RegExp(`^hsla\\(${pn},${$t},${$t},${pn}\\)$`),Xu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Us(mn,gn,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Yu,formatHex:Yu,formatHex8:T0,formatHsl:N0,formatRgb:Vu,toString:Vu});function Yu(){return this.rgb().formatHex()}function T0(){return this.rgb().formatHex8()}function N0(){return gf(this).formatHsl()}function Vu(){return this.rgb().formatRgb()}function gn(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=k0.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?Qu(e):t===3?new ut(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Tn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Tn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=D0.exec(n))?new ut(e[1],e[2],e[3],1):(e=C0.exec(n))?new ut(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=I0.exec(n))?Tn(e[1],e[2],e[3],e[4]):(e=M0.exec(n))?Tn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=L0.exec(n))?el(e[1],e[2]/100,e[3]/100,1):(e=z0.exec(n))?el(e[1],e[2]/100,e[3]/100,e[4]):Xu.hasOwnProperty(n)?Qu(Xu[n]):n==="transparent"?new ut(NaN,NaN,NaN,0):null}function Qu(n){return new ut(n>>16&255,n>>8&255,n&255,1)}function Tn(n,e,t,r){return r<=0&&(n=e=t=NaN),new ut(n,e,t,r)}function R0(n){return n instanceof mn||(n=gn(n)),n?(n=n.rgb(),new ut(n.r,n.g,n.b,n.opacity)):new ut}function Ls(n,e,t,r){return arguments.length===1?R0(n):new ut(n,e,t,r??1)}function ut(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Us(ut,Ls,pf(mn,{brighter(n){return n=n==null?fi:Math.pow(fi,n),new ut(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?fn:Math.pow(fn,n),new ut(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new ut(br(this.r),br(this.g),br(this.b),pi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zu,formatHex:Zu,formatHex8:G0,formatRgb:Ju,toString:Ju}));function Zu(){return`#${yr(this.r)}${yr(this.g)}${yr(this.b)}`}function G0(){return`#${yr(this.r)}${yr(this.g)}${yr(this.b)}${yr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ju(){const n=pi(this.opacity);return`${n===1?"rgb(":"rgba("}${br(this.r)}, ${br(this.g)}, ${br(this.b)}${n===1?")":`, ${n})`}`}function pi(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function br(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function yr(n){return n=br(n),(n<16?"0":"")+n.toString(16)}function el(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Dt(n,e,t,r)}function gf(n){if(n instanceof Dt)return new Dt(n.h,n.s,n.l,n.opacity);if(n instanceof mn||(n=gn(n)),!n)return new Dt;if(n instanceof Dt)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-i,u=(a+i)/2;return s?(e===a?o=(t-r)/s+(t<r)*6:t===a?o=(r-e)/s+2:o=(e-t)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Dt(o,s,u,n.opacity)}function P0(n,e,t,r){return arguments.length===1?gf(n):new Dt(n,e,t,r??1)}function Dt(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Us(Dt,P0,pf(mn,{brighter(n){return n=n==null?fi:Math.pow(fi,n),new Dt(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?fn:Math.pow(fn,n),new Dt(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new ut(ji(n>=240?n-240:n+120,i,r),ji(n,i,r),ji(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Dt(tl(this.h),Nn(this.s),Nn(this.l),pi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=pi(this.opacity);return`${n===1?"hsl(":"hsla("}${tl(this.h)}, ${Nn(this.s)*100}%, ${Nn(this.l)*100}%${n===1?")":`, ${n})`}`}}));function tl(n){return n=(n||0)%360,n<0?n+360:n}function Nn(n){return Math.max(0,Math.min(1,n||0))}function ji(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const vf=n=>()=>n;function $0(n,e){return function(t){return n+t*e}}function O0(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function q0(n){return(n=+n)==1?yf:function(e,t){return t-e?O0(e,t,n):vf(isNaN(e)?t:e)}}function yf(n,e){var t=e-n;return t?$0(n,t):vf(isNaN(n)?e:n)}const rl=function n(e){var t=q0(e);function r(i,a){var o=t((i=Ls(i)).r,(a=Ls(a)).r),s=t(i.g,a.g),u=t(i.b,a.b),l=yf(i.opacity,a.opacity);return function(d){return i.r=o(d),i.g=s(d),i.b=u(d),i.opacity=l(d),i+""}}return r.gamma=n,r}(1);function ar(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var zs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bi=new RegExp(zs.source,"g");function F0(n){return function(){return n}}function W0(n){return function(e){return n(e)+""}}function U0(n,e){var t=zs.lastIndex=Bi.lastIndex=0,r,i,a,o=-1,s=[],u=[];for(n=n+"",e=e+"";(r=zs.exec(n))&&(i=Bi.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:ar(r,i)})),t=Bi.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?W0(u[0].x):F0(e):(e=u.length,function(l){for(var d=0,f;d<e;++d)s[(f=u[d]).i]=f.x(l);return s.join("")})}var nl=180/Math.PI,Ts={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mf(n,e,t,r,i,a){var o,s,u;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(u=n*t+e*r)&&(t-=n*u,r-=e*u),(s=Math.sqrt(t*t+r*r))&&(t/=s,r/=s,u/=s),n*r<e*t&&(n=-n,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,n)*nl,skewX:Math.atan(u)*nl,scaleX:o,scaleY:s}}var Rn;function j0(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Ts:mf(e.a,e.b,e.c,e.d,e.e,e.f)}function B0(n){return n==null||(Rn||(Rn=document.createElementNS("http://www.w3.org/2000/svg","g")),Rn.setAttribute("transform",n),!(n=Rn.transform.baseVal.consolidate()))?Ts:(n=n.matrix,mf(n.a,n.b,n.c,n.d,n.e,n.f))}function bf(n,e,t,r){function i(l){return l.length?l.pop()+" ":""}function a(l,d,f,g,m,w){if(l!==f||d!==g){var x=m.push("translate(",null,e,null,t);w.push({i:x-4,x:ar(l,f)},{i:x-2,x:ar(d,g)})}else(f||g)&&m.push("translate("+f+e+g+t)}function o(l,d,f,g){l!==d?(l-d>180?d+=360:d-l>180&&(l+=360),g.push({i:f.push(i(f)+"rotate(",null,r)-2,x:ar(l,d)})):d&&f.push(i(f)+"rotate("+d+r)}function s(l,d,f,g){l!==d?g.push({i:f.push(i(f)+"skewX(",null,r)-2,x:ar(l,d)}):d&&f.push(i(f)+"skewX("+d+r)}function u(l,d,f,g,m,w){if(l!==f||d!==g){var x=m.push(i(m)+"scale(",null,",",null,")");w.push({i:x-4,x:ar(l,f)},{i:x-2,x:ar(d,g)})}else(f!==1||g!==1)&&m.push(i(m)+"scale("+f+","+g+")")}return function(l,d){var f=[],g=[];return l=n(l),d=n(d),a(l.translateX,l.translateY,d.translateX,d.translateY,f,g),o(l.rotate,d.rotate,f,g),s(l.skewX,d.skewX,f,g),u(l.scaleX,l.scaleY,d.scaleX,d.scaleY,f,g),l=d=null,function(m){for(var w=-1,x=g.length,S;++w<x;)f[(S=g[w]).i]=S.x(m);return f.join("")}}}var H0=bf(j0,"px, ","px)","deg)"),K0=bf(B0,", ",")",")"),qr=0,sn=0,Vr=0,wf=1e3,gi,un,vi=0,wr=0,Ei=0,vn=typeof performance=="object"&&performance.now?performance:Date,Ef=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function js(){return wr||(Ef(X0),wr=vn.now()+Ei)}function X0(){wr=0}function yi(){this._call=this._time=this._next=null}yi.prototype=Bs.prototype={constructor:yi,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?js():+t)+(e==null?0:+e),!this._next&&un!==this&&(un?un._next=this:gi=this,un=this),this._call=n,this._time=t,Ns()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ns())}};function Bs(n,e,t){var r=new yi;return r.restart(n,e,t),r}function Y0(){js(),++qr;for(var n=gi,e;n;)(e=wr-n._time)>=0&&n._call.call(void 0,e),n=n._next;--qr}function il(){wr=(vi=vn.now())+Ei,qr=sn=0;try{Y0()}finally{qr=0,Q0(),wr=0}}function V0(){var n=vn.now(),e=n-vi;e>wf&&(Ei-=e,vi=n)}function Q0(){for(var n,e=gi,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:gi=t);un=n,Ns(r)}function Ns(n){if(!qr){sn&&(sn=clearTimeout(sn));var e=n-wr;e>24?(n<1/0&&(sn=setTimeout(il,n-vn.now()-Ei)),Vr&&(Vr=clearInterval(Vr))):(Vr||(vi=vn.now(),Vr=setInterval(V0,wf)),qr=1,Ef(il))}}function al(n,e,t){var r=new yi;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}var Z0=bi("start","end","cancel","interrupt"),J0=[],xf=0,ol=1,Rs=2,li=3,sl=4,Gs=5,ci=6;function xi(n,e,t,r,i,a){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;ey(n,t,{name:e,index:r,group:i,on:Z0,tween:J0,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:xf})}function Hs(n,e){var t=Ct(n,e);if(t.state>xf)throw new Error("too late; already scheduled");return t}function Ot(n,e){var t=Ct(n,e);if(t.state>li)throw new Error("too late; already running");return t}function Ct(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function ey(n,e,t){var r=n.__transition,i;r[e]=t,t.timer=Bs(a,0,t.time);function a(l){t.state=ol,t.timer.restart(o,t.delay,t.time),t.delay<=l&&o(l-t.delay)}function o(l){var d,f,g,m;if(t.state!==ol)return u();for(d in r)if(m=r[d],m.name===t.name){if(m.state===li)return al(o);m.state===sl?(m.state=ci,m.timer.stop(),m.on.call("interrupt",n,n.__data__,m.index,m.group),delete r[d]):+d<e&&(m.state=ci,m.timer.stop(),m.on.call("cancel",n,n.__data__,m.index,m.group),delete r[d])}if(al(function(){t.state===li&&(t.state=sl,t.timer.restart(s,t.delay,t.time),s(l))}),t.state=Rs,t.on.call("start",n,n.__data__,t.index,t.group),t.state===Rs){for(t.state=li,i=new Array(g=t.tween.length),d=0,f=-1;d<g;++d)(m=t.tween[d].value.call(n,n.__data__,t.index,t.group))&&(i[++f]=m);i.length=f+1}}function s(l){for(var d=l<t.duration?t.ease.call(null,l/t.duration):(t.timer.restart(u),t.state=Gs,1),f=-1,g=i.length;++f<g;)i[f].call(n,d);t.state===Gs&&(t.on.call("end",n,n.__data__,t.index,t.group),u())}function u(){t.state=ci,t.timer.stop(),delete r[e];for(var l in r)return;delete n.__transition}}function ty(n,e){var t=n.__transition,r,i,a=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((r=t[o]).name!==e){a=!1;continue}i=r.state>Rs&&r.state<Gs,r.state=ci,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[o]}a&&delete n.__transition}}function ry(n){return this.each(function(){ty(this,n)})}function ny(n,e){var t,r;return function(){var i=Ot(this,n),a=i.tween;if(a!==t){r=t=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function iy(n,e,t){var r,i;if(typeof t!="function")throw new Error;return function(){var a=Ot(this,n),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:t},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}function ay(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=Ct(this.node(),t).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===n)return o.value;return null}return this.each((e==null?ny:iy)(t,n,e))}function Ks(n,e,t){var r=n._id;return n.each(function(){var i=Ot(this,r);(i.value||(i.value={}))[e]=t.apply(this,arguments)}),function(i){return Ct(i,r).value[e]}}function Sf(n,e){var t;return(typeof e=="number"?ar:e instanceof gn?rl:(t=gn(e))?(e=t,rl):U0)(n,e)}function oy(n){return function(){this.removeAttribute(n)}}function sy(n){return function(){this.removeAttributeNS(n.space,n.local)}}function uy(n,e,t){var r,i=t+"",a;return function(){var o=this.getAttribute(n);return o===i?null:o===r?a:a=e(r=o,t)}}function ly(n,e,t){var r,i=t+"",a;return function(){var o=this.getAttributeNS(n.space,n.local);return o===i?null:o===r?a:a=e(r=o,t)}}function cy(n,e,t){var r,i,a;return function(){var o,s=t(this),u;return s==null?void this.removeAttribute(n):(o=this.getAttribute(n),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,s)))}}function hy(n,e,t){var r,i,a;return function(){var o,s=t(this),u;return s==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,s)))}}function dy(n,e){var t=wi(n),r=t==="transform"?K0:Sf;return this.attrTween(n,typeof e=="function"?(t.local?hy:cy)(t,r,Ks(this,"attr."+n,e)):e==null?(t.local?sy:oy)(t):(t.local?ly:uy)(t,r,e))}function fy(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function py(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function gy(n,e){var t,r;function i(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&py(n,a)),t}return i._value=e,i}function vy(n,e){var t,r;function i(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&fy(n,a)),t}return i._value=e,i}function yy(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=wi(n);return this.tween(t,(r.local?gy:vy)(r,e))}function my(n,e){return function(){Hs(this,n).delay=+e.apply(this,arguments)}}function by(n,e){return e=+e,function(){Hs(this,n).delay=e}}function wy(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?my:by)(e,n)):Ct(this.node(),e).delay}function Ey(n,e){return function(){Ot(this,n).duration=+e.apply(this,arguments)}}function xy(n,e){return e=+e,function(){Ot(this,n).duration=e}}function Sy(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Ey:xy)(e,n)):Ct(this.node(),e).duration}function Ay(n,e){if(typeof e!="function")throw new Error;return function(){Ot(this,n).ease=e}}function _y(n){var e=this._id;return arguments.length?this.each(Ay(e,n)):Ct(this.node(),e).ease}function ky(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Ot(this,n).ease=t}}function Dy(n){if(typeof n!="function")throw new Error;return this.each(ky(this._id,n))}function Cy(n){typeof n!="function"&&(n=nf(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var a=e[i],o=a.length,s=r[i]=[],u,l=0;l<o;++l)(u=a[l])&&n.call(u,u.__data__,l,a)&&s.push(u);return new Vt(r,this._parents,this._name,this._id)}function Iy(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,i=t.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u=e[s],l=t[s],d=u.length,f=o[s]=new Array(d),g,m=0;m<d;++m)(g=u[m]||l[m])&&(f[m]=g);for(;s<r;++s)o[s]=e[s];return new Vt(o,this._parents,this._name,this._id)}function My(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function Ly(n,e,t){var r,i,a=My(e)?Hs:Ot;return function(){var o=a(this,n),s=o.on;s!==r&&(i=(r=s).copy()).on(e,t),o.on=i}}function zy(n,e){var t=this._id;return arguments.length<2?Ct(this.node(),t).on.on(n):this.each(Ly(t,n,e))}function Ty(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function Ny(){return this.on("end.remove",Ty(this._id))}function Ry(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Fs(n));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],u=s.length,l=a[o]=new Array(u),d,f,g=0;g<u;++g)(d=s[g])&&(f=n.call(d,d.__data__,g,s))&&("__data__"in d&&(f.__data__=d.__data__),l[g]=f,xi(l[g],e,t,g,l,Ct(d,t)));return new Vt(a,this._parents,e,t)}function Gy(n){var e=this._name,t=this._id;typeof n!="function"&&(n=rf(n));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u=r[s],l=u.length,d,f=0;f<l;++f)if(d=u[f]){for(var g=n.call(d,d.__data__,f,u),m,w=Ct(d,t),x=0,S=g.length;x<S;++x)(m=g[x])&&xi(m,e,t,x,g,w);a.push(g),o.push(d)}return new Vt(a,o,e,t)}var Py=yn.prototype.constructor;function $y(){return new Py(this._groups,this._parents)}function Oy(n,e){var t,r,i;return function(){var a=Or(this,n),o=(this.style.removeProperty(n),Or(this,n));return a===o?null:a===t&&o===r?i:i=e(t=a,r=o)}}function Af(n){return function(){this.style.removeProperty(n)}}function qy(n,e,t){var r,i=t+"",a;return function(){var o=Or(this,n);return o===i?null:o===r?a:a=e(r=o,t)}}function Fy(n,e,t){var r,i,a;return function(){var o=Or(this,n),s=t(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(n),Or(this,n))),o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,s))}}function Wy(n,e){var t,r,i,a="style."+e,o="end."+a,s;return function(){var u=Ot(this,n),l=u.on,d=u.value[a]==null?s||(s=Af(e)):void 0;(l!==t||i!==d)&&(r=(t=l).copy()).on(o,i=d),u.on=r}}function Uy(n,e,t){var r=(n+="")=="transform"?H0:Sf;return e==null?this.styleTween(n,Oy(n,r)).on("end.style."+n,Af(n)):typeof e=="function"?this.styleTween(n,Fy(n,r,Ks(this,"style."+n,e))).each(Wy(this._id,n)):this.styleTween(n,qy(n,r,e),t).on("end.style."+n,null)}function jy(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function By(n,e,t){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&jy(n,o,t)),r}return a._value=e,a}function Hy(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,By(n,e,t??""))}function Ky(n){return function(){this.textContent=n}}function Xy(n){return function(){var e=n(this);this.textContent=e??""}}function Yy(n){return this.tween("text",typeof n=="function"?Xy(Ks(this,"text",n)):Ky(n==null?"":n+""))}function Vy(n){return function(e){this.textContent=n.call(this,e)}}function Qy(n){var e,t;function r(){var i=n.apply(this,arguments);return i!==t&&(e=(t=i)&&Vy(i)),e}return r._value=n,r}function Zy(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,Qy(n))}function Jy(){for(var n=this._name,e=this._id,t=_f(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,l=0;l<s;++l)if(u=o[l]){var d=Ct(u,e);xi(u,n,t,l,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Vt(r,this._parents,n,t)}function em(){var n,e,t=this,r=t._id,i=t.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--i===0&&a()}};t.each(function(){var l=Ot(this,r),d=l.on;d!==n&&(e=(n=d).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),l.on=e}),i===0&&a()})}var tm=0;function Vt(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function _f(){return++tm}var Bt=yn.prototype;Vt.prototype={constructor:Vt,select:Ry,selectAll:Gy,selectChild:Bt.selectChild,selectChildren:Bt.selectChildren,filter:Cy,merge:Iy,selection:$y,transition:Jy,call:Bt.call,nodes:Bt.nodes,node:Bt.node,size:Bt.size,empty:Bt.empty,each:Bt.each,on:zy,attr:dy,attrTween:yy,style:Uy,styleTween:Hy,text:Yy,textTween:Zy,remove:Ny,tween:ay,delay:wy,duration:Sy,ease:_y,easeVarying:Dy,end:em,[Symbol.iterator]:Bt[Symbol.iterator]};function rm(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var nm={time:null,delay:0,duration:250,ease:rm};function im(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function am(n){var e,t;n instanceof Vt?(e=n._id,n=n._name):(e=_f(),(t=nm).time=js(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&xi(u,n,e,l,o,t||im(u,e));return new Vt(r,this._parents,n,e)}yn.prototype.interrupt=ry;yn.prototype.transition=am;function om(n,e){var t,r=1;n==null&&(n=0),e==null&&(e=0);function i(){var a,o=t.length,s,u=0,l=0;for(a=0;a<o;++a)s=t[a],u+=s.x,l+=s.y;for(u=(u/o-n)*r,l=(l/o-e)*r,a=0;a<o;++a)s=t[a],s.x-=u,s.y-=l}return i.initialize=function(a){t=a},i.x=function(a){return arguments.length?(n=+a,i):n},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(r=+a,i):r},i}function sm(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return kf(this.cover(e,t),e,t,n)}function kf(n,e,t,r){if(isNaN(e)||isNaN(t))return n;var i,a=n._root,o={data:r},s=n._x0,u=n._y0,l=n._x1,d=n._y1,f,g,m,w,x,S,A,b;if(!a)return n._root=o,n;for(;a.length;)if((x=e>=(f=(s+l)/2))?s=f:l=f,(S=t>=(g=(u+d)/2))?u=g:d=g,i=a,!(a=a[A=S<<1|x]))return i[A]=o,n;if(m=+n._x.call(null,a.data),w=+n._y.call(null,a.data),e===m&&t===w)return o.next=a,i?i[A]=o:n._root=o,n;do i=i?i[A]=new Array(4):n._root=new Array(4),(x=e>=(f=(s+l)/2))?s=f:l=f,(S=t>=(g=(u+d)/2))?u=g:d=g;while((A=S<<1|x)===(b=(w>=g)<<1|m>=f));return i[b]=a,i[A]=o,n}function um(n){var e,t,r=n.length,i,a,o=new Array(r),s=new Array(r),u=1/0,l=1/0,d=-1/0,f=-1/0;for(t=0;t<r;++t)isNaN(i=+this._x.call(null,e=n[t]))||isNaN(a=+this._y.call(null,e))||(o[t]=i,s[t]=a,i<u&&(u=i),i>d&&(d=i),a<l&&(l=a),a>f&&(f=a));if(u>d||l>f)return this;for(this.cover(u,l).cover(d,f),t=0;t<r;++t)kf(this,o[t],s[t],n[t]);return this}function lm(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(t))i=(t=Math.floor(n))+1,a=(r=Math.floor(e))+1;else{for(var o=i-t||1,s=this._root,u,l;t>n||n>=i||r>e||e>=a;)switch(l=(e<r)<<1|n<t,u=new Array(4),u[l]=s,s=u,o*=2,l){case 0:i=t+o,a=r+o;break;case 1:t=i-o,a=r+o;break;case 2:i=t+o,r=a-o;break;case 3:t=i-o,r=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=t,this._y0=r,this._x1=i,this._y1=a,this}function cm(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function hm(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function nt(n,e,t,r,i){this.node=n,this.x0=e,this.y0=t,this.x1=r,this.y1=i}function dm(n,e,t){var r,i=this._x0,a=this._y0,o,s,u,l,d=this._x1,f=this._y1,g=[],m=this._root,w,x;for(m&&g.push(new nt(m,i,a,d,f)),t==null?t=1/0:(i=n-t,a=e-t,d=n+t,f=e+t,t*=t);w=g.pop();)if(!(!(m=w.node)||(o=w.x0)>d||(s=w.y0)>f||(u=w.x1)<i||(l=w.y1)<a))if(m.length){var S=(o+u)/2,A=(s+l)/2;g.push(new nt(m[3],S,A,u,l),new nt(m[2],o,A,S,l),new nt(m[1],S,s,u,A),new nt(m[0],o,s,S,A)),(x=(e>=A)<<1|n>=S)&&(w=g[g.length-1],g[g.length-1]=g[g.length-1-x],g[g.length-1-x]=w)}else{var b=n-+this._x.call(null,m.data),_=e-+this._y.call(null,m.data),y=b*b+_*_;if(y<t){var D=Math.sqrt(t=y);i=n-D,a=e-D,d=n+D,f=e+D,r=m.data}}return r}function fm(n){if(isNaN(d=+this._x.call(null,n))||isNaN(f=+this._y.call(null,n)))return this;var e,t=this._root,r,i,a,o=this._x0,s=this._y0,u=this._x1,l=this._y1,d,f,g,m,w,x,S,A;if(!t)return this;if(t.length)for(;;){if((w=d>=(g=(o+u)/2))?o=g:u=g,(x=f>=(m=(s+l)/2))?s=m:l=m,e=t,!(t=t[S=x<<1|w]))return this;if(!t.length)break;(e[S+1&3]||e[S+2&3]||e[S+3&3])&&(r=e,A=S)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,i?(a?i.next=a:delete i.next,this):e?(a?e[S]=a:delete e[S],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[A]=t:this._root=t),this):(this._root=a,this)}function pm(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function gm(){return this._root}function vm(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function ym(n){var e=[],t,r=this._root,i,a,o,s,u;for(r&&e.push(new nt(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(r=t.node,a=t.x0,o=t.y0,s=t.x1,u=t.y1)&&r.length){var l=(a+s)/2,d=(o+u)/2;(i=r[3])&&e.push(new nt(i,l,d,s,u)),(i=r[2])&&e.push(new nt(i,a,d,l,u)),(i=r[1])&&e.push(new nt(i,l,o,s,d)),(i=r[0])&&e.push(new nt(i,a,o,l,d))}return this}function mm(n){var e=[],t=[],r;for(this._root&&e.push(new nt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var a,o=r.x0,s=r.y0,u=r.x1,l=r.y1,d=(o+u)/2,f=(s+l)/2;(a=i[0])&&e.push(new nt(a,o,s,d,f)),(a=i[1])&&e.push(new nt(a,d,s,u,f)),(a=i[2])&&e.push(new nt(a,o,f,d,l)),(a=i[3])&&e.push(new nt(a,d,f,u,l))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this}function bm(n){return n[0]}function wm(n){return arguments.length?(this._x=n,this):this._x}function Em(n){return n[1]}function xm(n){return arguments.length?(this._y=n,this):this._y}function Xs(n,e,t){var r=new Ys(e??bm,t??Em,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function Ys(n,e,t,r,i,a){this._x=n,this._y=e,this._x0=t,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function ul(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var at=Xs.prototype=Ys.prototype;at.copy=function(){var n=new Ys(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=ul(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=ul(r));return n};at.add=sm;at.addAll=um;at.cover=lm;at.data=cm;at.extent=hm;at.find=dm;at.remove=fm;at.removeAll=pm;at.root=gm;at.size=vm;at.visit=ym;at.visitAfter=mm;at.x=wm;at.y=xm;function it(n){return function(){return n}}function sr(n){return(n()-.5)*1e-6}function Sm(n){return n.x+n.vx}function Am(n){return n.y+n.vy}function _m(n){var e,t,r,i=1,a=1;typeof n!="function"&&(n=it(n==null?1:+n));function o(){for(var l,d=e.length,f,g,m,w,x,S,A=0;A<a;++A)for(f=Xs(e,Sm,Am).visitAfter(s),l=0;l<d;++l)g=e[l],x=t[g.index],S=x*x,m=g.x+g.vx,w=g.y+g.vy,f.visit(b);function b(_,y,D,R,v){var C=_.data,M=_.r,L=x+M;if(C){if(C.index>g.index){var G=m-C.x-C.vx,$=w-C.y-C.vy,N=G*G+$*$;N<L*L&&(G===0&&(G=sr(r),N+=G*G),$===0&&($=sr(r),N+=$*$),N=(L-(N=Math.sqrt(N)))/N*i,g.vx+=(G*=N)*(L=(M*=M)/(S+M)),g.vy+=($*=N)*L,C.vx-=G*(L=1-L),C.vy-=$*L)}return}return y>m+L||R<m-L||D>w+L||v<w-L}}function s(l){if(l.data)return l.r=t[l.data.index];for(var d=l.r=0;d<4;++d)l[d]&&l[d].r>l.r&&(l.r=l[d].r)}function u(){if(e){var l,d=e.length,f;for(t=new Array(d),l=0;l<d;++l)f=e[l],t[f.index]=+n(f,l,e)}}return o.initialize=function(l,d){e=l,r=d,u()},o.iterations=function(l){return arguments.length?(a=+l,o):a},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(n=typeof l=="function"?l:it(+l),u(),o):n},o}function km(n){return n.index}function ll(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function Dm(n){var e=km,t=f,r,i=it(30),a,o,s,u,l,d=1;n==null&&(n=[]);function f(S){return 1/Math.min(s[S.source.index],s[S.target.index])}function g(S){for(var A=0,b=n.length;A<d;++A)for(var _=0,y,D,R,v,C,M,L;_<b;++_)y=n[_],D=y.source,R=y.target,v=R.x+R.vx-D.x-D.vx||sr(l),C=R.y+R.vy-D.y-D.vy||sr(l),M=Math.sqrt(v*v+C*C),M=(M-a[_])/M*S*r[_],v*=M,C*=M,R.vx-=v*(L=u[_]),R.vy-=C*L,D.vx+=v*(L=1-L),D.vy+=C*L}function m(){if(o){var S,A=o.length,b=n.length,_=new Map(o.map((D,R)=>[e(D,R,o),D])),y;for(S=0,s=new Array(A);S<b;++S)y=n[S],y.index=S,typeof y.source!="object"&&(y.source=ll(_,y.source)),typeof y.target!="object"&&(y.target=ll(_,y.target)),s[y.source.index]=(s[y.source.index]||0)+1,s[y.target.index]=(s[y.target.index]||0)+1;for(S=0,u=new Array(b);S<b;++S)y=n[S],u[S]=s[y.source.index]/(s[y.source.index]+s[y.target.index]);r=new Array(b),w(),a=new Array(b),x()}}function w(){if(o)for(var S=0,A=n.length;S<A;++S)r[S]=+t(n[S],S,n)}function x(){if(o)for(var S=0,A=n.length;S<A;++S)a[S]=+i(n[S],S,n)}return g.initialize=function(S,A){o=S,l=A,m()},g.links=function(S){return arguments.length?(n=S,m(),g):n},g.id=function(S){return arguments.length?(e=S,g):e},g.iterations=function(S){return arguments.length?(d=+S,g):d},g.strength=function(S){return arguments.length?(t=typeof S=="function"?S:it(+S),w(),g):t},g.distance=function(S){return arguments.length?(i=typeof S=="function"?S:it(+S),x(),g):i},g}const Cm=1664525,Im=1013904223,cl=4294967296;function Mm(){let n=1;return()=>(n=(Cm*n+Im)%cl)/cl}function Lm(n){return n.x}function zm(n){return n.y}var Tm=10,Nm=Math.PI*(3-Math.sqrt(5));function Rm(n){var e,t=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,u=Bs(f),l=bi("tick","end"),d=Mm();n==null&&(n=[]);function f(){g(),l.call("tick",e),t<r&&(u.stop(),l.call("end",e))}function g(x){var S,A=n.length,b;x===void 0&&(x=1);for(var _=0;_<x;++_)for(t+=(a-t)*i,s.forEach(function(y){y(t)}),S=0;S<A;++S)b=n[S],b.fx==null?b.x+=b.vx*=o:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=o:(b.y=b.fy,b.vy=0);return e}function m(){for(var x=0,S=n.length,A;x<S;++x){if(A=n[x],A.index=x,A.fx!=null&&(A.x=A.fx),A.fy!=null&&(A.y=A.fy),isNaN(A.x)||isNaN(A.y)){var b=Tm*Math.sqrt(.5+x),_=x*Nm;A.x=b*Math.cos(_),A.y=b*Math.sin(_)}(isNaN(A.vx)||isNaN(A.vy))&&(A.vx=A.vy=0)}}function w(x){return x.initialize&&x.initialize(n,d),x}return m(),e={tick:g,restart:function(){return u.restart(f),e},stop:function(){return u.stop(),e},nodes:function(x){return arguments.length?(n=x,m(),s.forEach(w),e):n},alpha:function(x){return arguments.length?(t=+x,e):t},alphaMin:function(x){return arguments.length?(r=+x,e):r},alphaDecay:function(x){return arguments.length?(i=+x,e):+i},alphaTarget:function(x){return arguments.length?(a=+x,e):a},velocityDecay:function(x){return arguments.length?(o=1-x,e):1-o},randomSource:function(x){return arguments.length?(d=x,s.forEach(w),e):d},force:function(x,S){return arguments.length>1?(S==null?s.delete(x):s.set(x,w(S)),e):s.get(x)},find:function(x,S,A){var b=0,_=n.length,y,D,R,v,C;for(A==null?A=1/0:A*=A,b=0;b<_;++b)v=n[b],y=x-v.x,D=S-v.y,R=y*y+D*D,R<A&&(C=v,A=R);return C},on:function(x,S){return arguments.length>1?(l.on(x,S),e):l.on(x)}}}function Gm(){var n,e,t,r,i=it(-30),a,o=1,s=1/0,u=.81;function l(m){var w,x=n.length,S=Xs(n,Lm,zm).visitAfter(f);for(r=m,w=0;w<x;++w)e=n[w],S.visit(g)}function d(){if(n){var m,w=n.length,x;for(a=new Array(w),m=0;m<w;++m)x=n[m],a[x.index]=+i(x,m,n)}}function f(m){var w=0,x,S,A=0,b,_,y;if(m.length){for(b=_=y=0;y<4;++y)(x=m[y])&&(S=Math.abs(x.value))&&(w+=x.value,A+=S,b+=S*x.x,_+=S*x.y);m.x=b/A,m.y=_/A}else{x=m,x.x=x.data.x,x.y=x.data.y;do w+=a[x.data.index];while(x=x.next)}m.value=w}function g(m,w,x,S){if(!m.value)return!0;var A=m.x-e.x,b=m.y-e.y,_=S-w,y=A*A+b*b;if(_*_/u<y)return y<s&&(A===0&&(A=sr(t),y+=A*A),b===0&&(b=sr(t),y+=b*b),y<o&&(y=Math.sqrt(o*y)),e.vx+=A*m.value*r/y,e.vy+=b*m.value*r/y),!0;if(m.length||y>=s)return;(m.data!==e||m.next)&&(A===0&&(A=sr(t),y+=A*A),b===0&&(b=sr(t),y+=b*b),y<o&&(y=Math.sqrt(o*y)));do m.data!==e&&(_=a[m.data.index]*r/y,e.vx+=A*_,e.vy+=b*_);while(m=m.next)}return l.initialize=function(m,w){n=m,t=w,d()},l.strength=function(m){return arguments.length?(i=typeof m=="function"?m:it(+m),d(),l):i},l.distanceMin=function(m){return arguments.length?(o=m*m,l):Math.sqrt(o)},l.distanceMax=function(m){return arguments.length?(s=m*m,l):Math.sqrt(s)},l.theta=function(m){return arguments.length?(u=m*m,l):Math.sqrt(u)},l}function Pm(n){var e=it(.1),t,r,i;typeof n!="function"&&(n=it(n==null?0:+n));function a(s){for(var u=0,l=t.length,d;u<l;++u)d=t[u],d.vx+=(i[u]-d.x)*r[u]*s}function o(){if(t){var s,u=t.length;for(r=new Array(u),i=new Array(u),s=0;s<u;++s)r[s]=isNaN(i[s]=+n(t[s],s,t))?0:+e(t[s],s,t)}}return a.initialize=function(s){t=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:it(+s),o(),a):e},a.x=function(s){return arguments.length?(n=typeof s=="function"?s:it(+s),o(),a):n},a}function $m(n){var e=it(.1),t,r,i;typeof n!="function"&&(n=it(n==null?0:+n));function a(s){for(var u=0,l=t.length,d;u<l;++u)d=t[u],d.vy+=(i[u]-d.y)*r[u]*s}function o(){if(t){var s,u=t.length;for(r=new Array(u),i=new Array(u),s=0;s<u;++s)r[s]=isNaN(i[s]=+n(t[s],s,t))?0:+e(t[s],s,t)}}return a.initialize=function(s){t=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:it(+s),o(),a):e},a.y=function(s){return arguments.length?(n=typeof s=="function"?s:it(+s),o(),a):n},a}function ln(n,e,t){this.k=n,this.x=e,this.y=t}ln.prototype={constructor:ln,scale:function(n){return n===1?this:new ln(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new ln(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ln.prototype;const Om={listeners:new Map,emit(n,e={}){document.dispatchEvent(new CustomEvent(n,{detail:e}))},on(n,e){if(typeof e!="function"){console.warn(`EventBus: Tried to register a non-function listener for event: ${n}`);return}this.listeners.has(n)||this.listeners.set(n,new Set);const t=this.listeners.get(n);if(t.has(e)){console.warn(`EventBus: Listener for event "${n}" is already registered.`);return}document.addEventListener(n,e),t.add(e)},off(n,e){if(!this.listeners.has(n)){console.warn(`EventBus: Attempted to remove a listener from a non-existent event: ${n}`);return}const t=this.listeners.get(n);if(!t.has(e)){console.warn(`EventBus: Attempted to remove a non-existent listener from event: ${n}`);return}document.removeEventListener(n,e),t.delete(e),t.size===0&&this.listeners.delete(n)},removeAll(n){if(!this.listeners.has(n)){console.warn(`EventBus: Attempted to remove all listeners from a non-existent event: ${n}`);return}this.listeners.get(n).forEach(e=>{document.removeEventListener(n,e)}),this.listeners.delete(n)}};function Hi(n){const e=new Set(n.map(Number));let t=0;for(;e.has(t);)t++;return t}function hn(n,e=3){const t="abcdefghijklmnopqrstuvwxyz",r=[];function i(o,s,u){if(u===0){r.push(o);return}for(let l=s;l<t.length;l++)if(i(o+t[l],l+1,u-1),r.length>n)return}let a=1;for(;r.length<=n&&a<=e;)i("",0,a),a++;return r[n]||null}function qm(n,e,t,r,i,a){let o=n-t,s=e-r,u=i-t,l=a-r,d=o*u+s*l,f=u*u+l*l,g=f!==0?d/f:-1,m,w;g<0?(m=t,w=r):g>1?(m=i,w=a):(m=t+g*u,w=r+g*l);let x=n-m,S=e-w;return Math.sqrt(x*x+S*S)}function Gn(n,e){return(n%e+e)%e}function ot(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var We={},Lt={},Ki,hl;function Fm(){return hl||(hl=1,Ki=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!n(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[i]))return!1;for(i=r;i--!==0;){var o=a[i];if(!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}),Ki}var Xi,dl;function be(){return dl||(dl=1,Xi=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),Xi}var Yi,fl;function Je(){return fl||(fl=1,Yi=function(e){return e!==null&&typeof e=="function"&&typeof e.prototype=="object"&&typeof e.prototype.addUndirectedEdgeWithKey=="function"&&typeof e.prototype.dropNode=="function"}),Yi}var pl;function Wm(){if(pl)return Lt;pl=1;var n=Fm(),e=Symbol("size");function t(d,f){var g=d.length,m=f.length;if(g!==m)return!1;var w,x,S,A,b=new Set;e:for(S=0;S<g;S++){for(w=d[S],A=0;A<m;A++)if(!b.has(A)&&(x=f[A],n(w,x))){b.add(A);continue e}return!1}return!0}function r(d,f){if(d[e]!==f[e])return!1;for(var g in d)if(!t(d[g],f[g]))return!1;return!0}function i(d,f){var g={},m;return d.forEachOutEdge(f,function(w,x,S,A){m=g[A]||0,m++,g[A]=m}),g}function a(d,f){var g={},m;return d.forEachUndirectedEdge(f,function(w,x,S,A){A=f===S?A:S,!(f>A)&&(m=g[A]||0,m++,g[A]=m)}),g}function o(d,f){var g={};g[e]=0;var m;return d.forEachOutEdge(f,function(w,x,S,A){m=g[A],m||(m=[],g[e]+=1,g[A]=m),m.push(x)}),g}function s(d,f){var g={};g[e]=0;var m;return d.forEachUndirectedEdge(f,function(w,x,S,A){A=f===S?A:S,!(f>A)&&(m=g[A],m||(m=[],g[e]+=1,g[A]=m),m.push(x))}),g}function u(d,f,g){return f===g?!0:f.order!==g.order?!1:f.everyNode(function(m,w){return g.hasNode(m)?d?n(w,g.getNodeAttributes(m)):!0:!1})}function l(d,f,g,m){if(g===m)return!0;if(f){if(g.type==="directed"&&m.type==="undirected"||g.type==="undirected"&&m.type==="directed")return!1}else if(g.type!==m.type||g.allowSelfLoops!==m.allowSelfLoops||g.multi!==m.multi)return!1;if(g.directedSize!==m.directedSize||g.undirectedSize!==m.undirectedSize||!u(d,g,m))return!1;var w=!1,x=!1;if(!g.multi&&!m.multi){if(w=g.everyDirectedEdge(function(b,_,y,D){return m.hasDirectedEdge(y,D)?d?n(g.getDirectedEdgeAttributes(y,D),m.getDirectedEdgeAttributes(y,D)):!0:!1}),!w||(x=g.everyUndirectedEdge(function(b,_,y,D){return m.hasUndirectedEdge(y,D)?d?n(g.getUndirectedEdgeAttributes(y,D),m.getUndirectedEdgeAttributes(y,D)):!0:!1}),!x))return!1}else{var S=d?o:i,A=d?r:n;if(w=g.everyNode(function(b){var _=S(g,b),y=S(m,b);return A(_,y)}),!w||(S=d?s:a,x=g.everyNode(function(b){var _=S(g,b),y=S(m,b);return A(_,y)}),!x))return!1}return!0}return Lt.isGraph=be(),Lt.isGraphConstructor=Je(),Lt.haveSameNodes=u.bind(null,!1),Lt.haveSameNodesDeep=u.bind(null,!0),Lt.areSameGraphs=l.bind(null,!1,!1),Lt.areSameGraphsDeep=l.bind(null,!0,!1),Lt.haveSameEdges=l.bind(null,!1,!0),Lt.haveSameEdgesDeep=l.bind(null,!0,!0),Lt}var Vi,gl;function Df(){return gl||(gl=1,Vi=Wm()),Vi}var Pn={},$n={},Qi={},Zi={},Ji,vl;function je(){if(vl)return Ji;vl=1;function n(t){return!t||typeof t!="object"||typeof t=="function"||Array.isArray(t)||t instanceof Set||t instanceof Map||t instanceof RegExp||t instanceof Date}function e(t,r){t=t||{};var i={};for(var a in r){var o=t[a],s=r[a];if(!n(s)){i[a]=e(o,s);continue}o===void 0?i[a]=s:i[a]=o}return i}return Ji=e,Ji}var nr={},yl;function Um(){return yl||(yl=1,nr.identity=function(){return Float64Array.of(1,0,0,0,1,0,0,0,1)},nr.scale=function(e,t,r){return e[0]=t,e[4]=typeof r=="number"?r:t,e},nr.rotate=function(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[3]=-r,e[4]=i,e},nr.translate=function(e,t,r){return e[6]=t,e[7]=r,e},nr.multiply=function(e,t){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],d=e[7],f=e[8],g=t[0],m=t[1],w=t[2],x=t[3],S=t[4],A=t[5],b=t[6],_=t[7],y=t[8];return e[0]=g*r+m*o+w*l,e[1]=g*i+m*s+w*d,e[2]=g*a+m*u+w*f,e[3]=x*r+S*o+A*l,e[4]=x*i+S*s+A*d,e[5]=x*a+S*u+A*f,e[6]=b*r+_*o+y*l,e[7]=b*i+_*s+y*d,e[8]=b*a+_*u+y*f,e},nr.multiplyVec2=function(e,t){var r=e[0],i=e[1],a=e[3],o=e[4],s=e[6],u=e[7],l=t.x,d=t.y;t.x=l*r+d*a+s,t.y=l*i+d*o+u}),nr}var ml;function jm(){if(ml)return Zi;ml=1;var n=je(),e=Um(),t=e.identity,r=e.multiply,i=e.translate,a=e.scale,o=e.rotate,s=e.multiplyVec2;function u(g,m,w,x){var S=x/w,A=m/g;return S<1&&A>1||S>1&&A<1?1:Math.min(Math.max(A,1/A),Math.max(1/S,S))}var l={x:.5,y:.5,angle:0,ratio:1},d={camera:l,padding:0};function f(g,m,w){w=n(w,d);var x=w.camera,S=g.x[1],A=g.y[1],b=g.x[0],_=g.y[0],y=S-b,D=A-_,R=m.width,v=m.height,C=Math.max(y,D)||1,M=(S+b)/2,L=(A+_)/2,G=Math.min(R,v);G-=2*w.padding;var $=u(y,D,R,v),N=t();r(N,a(t(),R/2,v/2)),r(N,i(t(),1,1)),r(N,a(t(),1,-1)),r(N,a(t(),2*(G/R)*$,2*(G/v)*$)),r(N,o(t(),-x.angle)),r(N,a(t(),1/x.ratio)),r(N,i(t(),-x.x,-x.y)),r(N,i(t(),.5,.5)),r(N,a(t(),1/C)),r(N,i(t(),-M,-L));var Y=function(F){return s(N,F),F},V=function(F){return Y({x:F.x,y:F.y})};return V.assign=Y,V}return Zi.createGraphToViewportConversionFunction=f,Zi}var _r={},bl;function Vs(){if(bl)return _r;bl=1;var n=je(),e={batchSize:500,padding:20,width:2048,height:2048,nodes:{reducer:null,defaultColor:"#999"},edges:{reducer:null,defaultColor:"#ccc"}};return _r.DEFAULTS=e,_r.refineSettings=function(r){r=r||{};var i={width:r.width,height:r.height};if(i.width&&!i.height&&(i.height=i.width),i.height&&!i.width&&(i.width=i.height),r=n(r,i),r=n(r,e),!r.width&&!r.height)throw new Error("graphology-canvas: need at least a valid width or height!");return r},_r.DEFAULT_NODE_REDUCER=function(t,r,i){var a={type:i.type||"circle",label:i.label||r,x:i.x,y:i.y,size:i.size||1,color:i.color||t.nodes.defaultColor};if(typeof a.x!="number"||typeof a.y!="number")throw new Error('graphology-canvas: the "'+r+'" node has no valid x or y position.');return a},_r.DEFAULT_EDGE_REDUCER=function(t,r,i){var a={type:i.type||"line",size:i.size||1,color:i.color||t.edges.defaultColor};return a},_r}var wl;function Bm(){if(wl)return Qi;wl=1;var n=jm(),e=Vs(),t=n.createGraphToViewportConversionFunction;function r(i,a){var o=a.width,s=a.height,u=1/0,l=-1/0,d=1/0,f=-1/0,g={};i.forEachNode(function(x,S){typeof a.nodes.reducer=="function"&&(S=a.nodes.reducer(a,x,S)),S=e.DEFAULT_NODE_REDUCER(a,x,S),g[x]=S;var A=S.x,b=S.y;A<u&&(u=A),A>l&&(l=A),b<d&&(d=b),b>f&&(f=b)});var m=t({x:[u,l],y:[d,f]},{width:o,height:s},{padding:a.padding});for(var w in g)m.assign(g[w]);return g}return Qi.reduceNodes=r,Qi}var ea,El;function Hm(){return El||(El=1,ea=function(e,t,r,i){e.fillStyle=t,e.fillRect(0,0,r,i)}),ea}var ta,xl;function Km(){if(xl)return ta;xl=1;var n=Math.PI*2;return ta=function(t,r,i){r.fillStyle=i.color,r.beginPath(),r.arc(i.x,i.y,i.size,0,n,!0),r.closePath(),r.fill()},ta}var ra,Sl;function Xm(){return Sl||(Sl=1,ra=function(e,t,r,i,a){t.strokeStyle=r.color,t.lineWidth=r.size,t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(a.x,a.y),t.stroke()}),ra}var Al;function Ym(){if(Al)return $n;Al=1;var n=Bm(),e=Vs(),t=Hm(),r={nodes:{circle:Km()},edges:{line:Xm()}};$n.renderSync=function(s,u,l){var d=n.reduceNodes(s,l);t(u,"white",l.width,l.height);var f,g;s.forEachEdge(function(x,S,A,b){typeof l.edges.reducer=="function"&&(S=l.edges.reducer(l,x,S)),S=e.DEFAULT_EDGE_REDUCER(l,x,S),f=d[A],g=d[b],r.edges[S.type](l,u,S,f,g)});var m,w;for(m in d)w=d[m],r.nodes[w.type](l,u,w)};var i=function(o){return setTimeout(o,16)};typeof requestAnimationFrame<"u"&&(i=requestAnimationFrame);function a(o,s,u){return o()?(s(),o()?i(function(){a(o,s,u)}):u()):u()}return $n.renderAsync=function(s,u,l,d){var f=n.reduceNodes(s,l);t(u,"white",l.width,l.height);var g=s.edges(),m=0;function w(){var R,v,C,M,L,G,$,N;for(R=Math.min(m+l.batchSize,g.length);m<R;m++)v=g[m],C=s.getEdgeAttributes(v),M=s.extremities(v),L=M[0],G=M[1],typeof l.edges.reducer=="function"&&(C=l.edges.reducer(l,v,C)),C=e.DEFAULT_EDGE_REDUCER(l,v,C),$=f[L],N=f[G],r.edges[C.type](l,u,C,$,N)}var x=new Array(s.order),S=0;for(var A in f)x[S++]=f[A];var b=0;function _(){var R,v;for(R=Math.min(b+l.batchSize,x.length);b<R;b++)v=x[b],r.nodes[v.type](l,u,v)}function y(){return m<g.length}function D(){return b<x.length}a(y,w,function(){a(D,_,function(){return d()})})},$n}var _l;function Vm(){if(_l)return Pn;_l=1;var n=be(),e=Ym(),t=Vs().refineSettings;return Pn.render=function(i,a,o){if(!n(i))throw new Error("graphology-canvas/render: expecting a valid graphology instance.");o=t(o),e.renderSync(i,a,o)},Pn.renderAsync=function(i,a,o,s){arguments.length===3&&(s=o,o={}),o=t(o),e.renderAsync(i,a,o,s)},Pn}var na,kl;function Qm(){return kl||(kl=1,na=Vm()),na}var ia,Dl;function Er(){if(Dl)return ia;Dl=1;var n=be();return ia=function(t){if(!n(t))throw new Error("graphology-utils/infer-type: expecting a valid graphology instance.");var r=t.type;return r!=="mixed"?r:t.directedSize===0&&t.undirectedSize===0||t.directedSize>0&&t.undirectedSize>0?"mixed":t.directedSize>0?"directed":"undirected"},ia}var aa,Cl;function Qt(){if(Cl)return aa;Cl=1;function n(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}return typeof Symbol<"u"&&(n.prototype[Symbol.iterator]=function(){return this}),n.of=function(){var e=arguments,t=e.length,r=0;return new n(function(){return r>=t?{done:!0}:{done:!1,value:e[r++]}})},n.empty=function(){var e=new n(function(){return{done:!0}});return e},n.fromSequence=function(e){var t=0,r=e.length;return new n(function(){return t>=r?{done:!0}:{done:!1,value:e[t++]}})},n.is=function(e){return e instanceof n?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"},aa=n,aa}var oa={},Il;function ur(){return Il||(Il=1,function(n){var e=Math.pow(2,8)-1,t=Math.pow(2,16)-1,r=Math.pow(2,32)-1,i=Math.pow(2,7)-1,a=Math.pow(2,15)-1,o=Math.pow(2,31)-1;n.getPointerArray=function(u){var l=u-1;if(l<=e)return Uint8Array;if(l<=t)return Uint16Array;if(l<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},n.getSignedPointerArray=function(u){var l=u-1;return l<=i?Int8Array:l<=a?Int16Array:l<=o?Int32Array:Float64Array},n.getNumberType=function(u){return u===(u|0)?Math.sign(u)===-1?u<=127&&u>=-128?Int8Array:u<=32767&&u>=-32768?Int16Array:Int32Array:u<=255?Uint8Array:u<=65535?Uint16Array:Uint32Array:Float64Array};var s={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};n.getMinimalRepresentation=function(u,l){var d=null,f=0,g,m,w,x,S;for(x=0,S=u.length;x<S;x++)w=l?l(u[x]):u[x],m=n.getNumberType(w),g=s[m.name],g>f&&(f=g,d=m);return d},n.isTypedArray=function(u){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(u)},n.concat=function(){var u=0,l,d,f;for(l=0,f=arguments.length;l<f;l++)u+=arguments[l].length;var g=new arguments[0].constructor(u);for(l=0,d=0;l<f;l++)g.set(arguments[l],d),d+=arguments[l].length;return g},n.indices=function(u){for(var l=n.getPointerArray(u),d=new l(u),f=0;f<u;f++)d[f]=f;return d}}(oa)),oa}var sa,Ml;function Zm(){if(Ml)return sa;Ml=1;var n=Qt(),e=ur().getPointerArray;function t(r,i){arguments.length<2&&(i=r,r=Array);var a=e(i);this.size=0,this.length=i,this.dense=new a(i),this.sparse=new a(i),this.vals=new r(i)}return t.prototype.clear=function(){this.size=0},t.prototype.has=function(r){var i=this.sparse[r];return i<this.size&&this.dense[i]===r},t.prototype.get=function(r){var i=this.sparse[r];if(i<this.size&&this.dense[i]===r)return this.vals[i]},t.prototype.set=function(r,i){var a=this.sparse[r];return a<this.size&&this.dense[a]===r?(this.vals[a]=i,this):(this.dense[this.size]=r,this.sparse[r]=this.size,this.vals[this.size]=i,this.size++,this)},t.prototype.delete=function(r){var i=this.sparse[r];return i>=this.size||this.dense[i]!==r?!1:(i=this.dense[this.size-1],this.dense[this.sparse[r]]=i,this.sparse[i]=this.sparse[r],this.size--,!0)},t.prototype.forEach=function(r,i){i=arguments.length>1?i:this;for(var a=0;a<this.size;a++)r.call(i,this.vals[a],this.dense[a])},t.prototype.keys=function(){var r=this.size,i=this.dense,a=0;return new n(function(){if(a<r){var o=i[a];return a++,{value:o}}return{done:!0}})},t.prototype.values=function(){var r=this.size,i=this.vals,a=0;return new n(function(){if(a<r){var o=i[a];return a++,{value:o}}return{done:!0}})},t.prototype.entries=function(){var r=this.size,i=this.dense,a=this.vals,o=0;return new n(function(){if(o<r){var s=[i[o],a[o]];return o++,{value:s}}return{done:!0}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.entries),t.prototype.inspect=function(){for(var r=new Map,i=0;i<this.size;i++)r.set(this.dense[i],this.vals[i]);return Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r.length=this.length,this.vals.constructor!==Array&&(r.type=this.vals.constructor.name),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),sa=t,sa}var ua,Ll;function Jm(){if(Ll)return ua;Ll=1;var n=Qt(),e=ur().getPointerArray;function t(r){var i=e(r);this.start=0,this.size=0,this.capacity=r,this.dense=new i(r),this.sparse=new i(r)}return t.prototype.clear=function(){this.start=0,this.size=0},t.prototype.has=function(r){if(this.size===0)return!1;var i=this.sparse[r],a=i<this.capacity&&i>=this.start&&i<this.start+this.size||i<(this.start+this.size)%this.capacity;return a&&this.dense[i]===r},t.prototype.enqueue=function(r){var i=this.sparse[r];if(this.size!==0){var a=i<this.capacity&&i>=this.start&&i<this.start+this.size||i<(this.start+this.size)%this.capacity;if(a&&this.dense[i]===r)return this}return i=(this.start+this.size)%this.capacity,this.dense[i]=r,this.sparse[r]=i,this.size++,this},t.prototype.dequeue=function(){if(this.size!==0){var r=this.start;this.size--,this.start++,this.start===this.capacity&&(this.start=0);var i=this.dense[r];return this.sparse[i]=this.capacity,i}},t.prototype.forEach=function(r,i){i=arguments.length>1?i:this;for(var a=this.capacity,o=this.size,s=this.start,u=0;u<o;)r.call(i,this.dense[s],u,this),s++,u++,s===a&&(s=0)},t.prototype.values=function(){var r=this.dense,i=this.capacity,a=this.size,o=this.start,s=0;return new n(function(){if(s>=a)return{done:!0};var u=r[o];return o++,s++,o===i&&(o=0),{value:u,done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.inspect=function(){var r=[];return this.forEach(function(i){r.push(i)}),Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r.capacity=this.capacity,r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),ua=t,ua}var la,zl;function eb(){if(zl)return la;zl=1;function n(t){return function(r){return typeof r!="number"&&(r=r.length),Math.floor(t()*r)}}var e=n(Math.random);return e.createRandomIndex=n,la=e,la}var On={},Qr={},Tl;function dt(){if(Tl)return Qr;Tl=1;function n(r){return typeof r!="number"||isNaN(r)?1:r}function e(r,i){var a={},o=function(l){return typeof l>"u"?i:l};typeof i=="function"&&(o=i);var s=function(l){return o(l[r])},u=function(){return o(void 0)};return typeof r=="string"?(a.fromAttributes=s,a.fromGraph=function(l,d){return s(l.getNodeAttributes(d))},a.fromEntry=function(l,d){return s(d)}):typeof r=="function"?(a.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},a.fromGraph=function(l,d){return o(r(d,l.getNodeAttributes(d)))},a.fromEntry=function(l,d){return o(r(l,d))}):(a.fromAttributes=u,a.fromGraph=u,a.fromEntry=u),a}function t(r,i){var a={},o=function(l){return typeof l>"u"?i:l};typeof i=="function"&&(o=i);var s=function(l){return o(l[r])},u=function(){return o(void 0)};return typeof r=="string"?(a.fromAttributes=s,a.fromGraph=function(l,d){return s(l.getEdgeAttributes(d))},a.fromEntry=function(l,d){return s(d)},a.fromPartialEntry=a.fromEntry,a.fromMinimalEntry=a.fromEntry):typeof r=="function"?(a.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},a.fromGraph=function(l,d){var f=l.extremities(d);return o(r(d,l.getEdgeAttributes(d),f[0],f[1],l.getNodeAttributes(f[0]),l.getNodeAttributes(f[1]),l.isUndirected(d)))},a.fromEntry=function(l,d,f,g,m,w,x){return o(r(l,d,f,g,m,w,x))},a.fromPartialEntry=function(l,d,f,g){return o(r(l,d,f,g))},a.fromMinimalEntry=function(l,d){return o(r(l,d))}):(a.fromAttributes=u,a.fromGraph=u,a.fromEntry=u,a.fromMinimalEntry=u),a}return Qr.createNodeValueGetter=e,Qr.createEdgeValueGetter=t,Qr.createEdgeWeightGetter=function(r){return t(r,n)},Qr}var Nl;function tb(){if(Nl)return On;Nl=1;var n=ur(),e=je(),t=dt().createEdgeWeightGetter,r=Symbol.for("nodejs.util.inspect.custom"),i={getEdgeWeight:"weight",keepDendrogram:!1,resolution:1};function a(s,u){u=e(u,i);var l=u.resolution,d=t(u.getEdgeWeight).fromEntry,f=(s.size-s.selfLoopCount)*2,g=n.getPointerArray(f),m=n.getPointerArray(s.order+1),w=u.getEdgeWeight?Float64Array:n.getPointerArray(s.size*2);this.C=s.order,this.M=0,this.E=f,this.U=0,this.resolution=l,this.level=0,this.graph=s,this.nodes=new Array(s.order),this.keepDendrogram=u.keepDendrogram,this.neighborhood=new m(f),this.weights=new w(f),this.loops=new w(s.order),this.starts=new g(s.order+1),this.belongings=new m(s.order),this.dendrogram=[],this.mapping=null,this.counts=new m(s.order),this.unused=new m(s.order),this.totalWeights=new w(s.order);var x={},S,A=0,b=0,_=this;s.forEachNode(function(y){_.nodes[A]=y,x[y]=A,b+=s.undirectedDegreeWithoutSelfLoops(y),_.starts[A]=b,_.belongings[A]=A,_.counts[A]=1,A++}),s.forEachEdge(function(y,D,R,v,C,M,L){if(S=d(y,D,R,v,C,M,L),R=x[R],v=x[v],_.M+=S,R===v)_.totalWeights[R]+=S*2,_.loops[R]=S*2;else{_.totalWeights[R]+=S,_.totalWeights[v]+=S;var G=--_.starts[R],$=--_.starts[v];_.neighborhood[G]=v,_.neighborhood[$]=R,_.weights[G]=S,_.weights[$]=S}}),this.starts[A]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}a.prototype.isolate=function(s,u){var l=this.belongings[s];if(this.counts[l]===1)return l;var d=this.unused[--this.U],f=this.loops[s];return this.totalWeights[l]-=u+f,this.totalWeights[d]+=u+f,this.belongings[s]=d,this.counts[l]--,this.counts[d]++,d},a.prototype.move=function(s,u,l){var d=this.belongings[s],f=this.loops[s];this.totalWeights[d]-=u+f,this.totalWeights[l]+=u+f,this.belongings[s]=l;var g=this.counts[d]--===1;this.counts[l]++,g&&(this.unused[this.U++]=d)},a.prototype.computeNodeDegree=function(s){var u,l,d,f=0;for(u=this.starts[s],l=this.starts[s+1];u<l;u++)d=this.weights[u],f+=d;return f},a.prototype.expensiveIsolate=function(s){var u=this.computeNodeDegree(s);return this.isolate(s,u)},a.prototype.expensiveMove=function(s,u){var l=this.computeNodeDegree(s);this.move(s,l,u)},a.prototype.zoomOut=function(){var s=new Array(this.C-this.U),u={},l=this.nodes.length,d=0,f=0,g,m,w,x,S,A,b,_,y;for(g=0,w=this.C;g<w;g++)A=this.belongings[g],A in u||(u[A]=d,s[d]={adj:{},totalWeights:this.totalWeights[A],internalWeights:0},d++),this.belongings[g]=u[A];var D,R;if(this.keepDendrogram){for(D=this.dendrogram[this.level],R=new(n.getPointerArray(d))(l),g=0;g<l;g++)R[g]=this.belongings[D[g]];this.dendrogram.push(R)}else for(g=0;g<l;g++)this.mapping[g]=this.belongings[this.mapping[g]];for(g=0,w=this.C;g<w;g++)for(A=this.belongings[g],_=s[A],y=_.adj,_.internalWeights+=this.loops[g],m=this.starts[g],x=this.starts[g+1];m<x;m++){if(S=this.neighborhood[m],b=this.belongings[S],A===b){_.internalWeights+=this.weights[m];continue}b in y||(y[b]=0),y[b]+=this.weights[m]}for(this.C=d,S=0,A=0;A<d;A++){_=s[A],y=_.adj,A=+A,this.totalWeights[A]=_.totalWeights,this.loops[A]=_.internalWeights,this.counts[A]=1,this.starts[A]=S,this.belongings[A]=A;for(b in y)this.neighborhood[S]=+b,this.weights[S]=y[b],f++,S++}return this.starts[d]=f,this.E=f,this.U=0,this.level++,u},a.prototype.modularity=function(){var s,u,l,d,f,g=0,m=this.M*2,w=new Float64Array(this.C);for(l=0;l<this.C;l++)for(s=this.belongings[l],w[s]+=this.loops[l],d=this.starts[l],f=this.starts[l+1];d<f;d++)u=this.belongings[this.neighborhood[d]],s===u&&(w[s]+=this.weights[d]);for(l=0;l<this.C;l++)g+=w[l]/m-Math.pow(this.totalWeights[l]/m,2)*this.resolution;return g},a.prototype.delta=function(s,u,l,d){var f=this.M,g=this.totalWeights[d];return u+=this.loops[s],l/f-g*u*this.resolution/(2*f*f)},a.prototype.deltaWithOwnCommunity=function(s,u,l,d){var f=this.M,g=this.totalWeights[d];return u+=this.loops[s],l/f-(g-u)*u*this.resolution/(2*f*f)},a.prototype.fastDelta=function(s,u,l,d){var f=this.M,g=this.totalWeights[d];return u+=this.loops[s],l-u*g*this.resolution/(2*f)},a.prototype.fastDeltaWithOwnCommunity=function(s,u,l,d){var f=this.M,g=this.totalWeights[d];return u+=this.loops[s],l-u*(g-u)*this.resolution/(2*f)},a.prototype.bounds=function(s){return[this.starts[s],this.starts[s+1]]},a.prototype.project=function(){var s=this,u={};return s.nodes.slice(0,this.C).forEach(function(l,d){u[l]=Array.from(s.neighborhood.slice(s.starts[d],s.starts[d+1])).map(function(f){return s.nodes[f]})}),u},a.prototype.collect=function(s){arguments.length<1&&(s=this.level);var u={},l=this.keepDendrogram?this.dendrogram[s]:this.mapping,d,f;for(d=0,f=l.length;d<f;d++)u[this.nodes[d]]=l[d];return u},a.prototype.assign=function(s,u){arguments.length<2&&(u=this.level);var l=this.keepDendrogram?this.dendrogram[u]:this.mapping,d,f;for(d=0,f=l.length;d<f;d++)this.graph.setNodeAttribute(this.nodes[d],s,l[d])},a.prototype[r]=function(){var s={};Object.defineProperty(s,"constructor",{value:a,enumerable:!1}),s.C=this.C,s.M=this.M,s.E=this.E,s.U=this.U,s.resolution=this.resolution,s.level=this.level,s.nodes=this.nodes,s.starts=this.starts.slice(0,s.C+1);var u=["neighborhood","weights"],l=["counts","loops","belongings","totalWeights"],d=this;return u.forEach(function(f){s[f]=d[f].slice(0,s.E)}),l.forEach(function(f){s[f]=d[f].slice(0,s.C)}),s.unused=this.unused.slice(0,this.U),this.keepDendrogram?s.dendrogram=this.dendrogram:s.mapping=this.mapping,s};function o(s,u){u=e(u,i);var l=u.resolution,d=t(u.getEdgeWeight).fromEntry,f=(s.size-s.selfLoopCount)*2,g=n.getPointerArray(f),m=n.getPointerArray(s.order+1),w=u.getEdgeWeight?Float64Array:n.getPointerArray(s.size*2);this.C=s.order,this.M=0,this.E=f,this.U=0,this.resolution=l,this.level=0,this.graph=s,this.nodes=new Array(s.order),this.keepDendrogram=u.keepDendrogram,this.neighborhood=new m(f),this.weights=new w(f),this.loops=new w(s.order),this.starts=new g(s.order+1),this.offsets=new g(s.order),this.belongings=new m(s.order),this.dendrogram=[],this.counts=new m(s.order),this.unused=new m(s.order),this.totalInWeights=new w(s.order),this.totalOutWeights=new w(s.order);var x={},S,A=0,b=0,_=this;s.forEachNode(function(y){_.nodes[A]=y,x[y]=A,b+=s.outDegreeWithoutSelfLoops(y),_.starts[A]=b,b+=s.inDegreeWithoutSelfLoops(y),_.offsets[A]=b,_.belongings[A]=A,_.counts[A]=1,A++}),s.forEachEdge(function(y,D,R,v,C,M,L){if(S=d(y,D,R,v,C,M,L),R=x[R],v=x[v],_.M+=S,R===v)_.loops[R]+=S,_.totalInWeights[R]+=S,_.totalOutWeights[R]+=S;else{_.totalOutWeights[R]+=S,_.totalInWeights[v]+=S;var G=--_.starts[R],$=--_.offsets[v];_.neighborhood[G]=v,_.neighborhood[$]=R,_.weights[G]=S,_.weights[$]=S}}),this.starts[A]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}return o.prototype.bounds=a.prototype.bounds,o.prototype.inBounds=function(s){return[this.offsets[s],this.starts[s+1]]},o.prototype.outBounds=function(s){return[this.starts[s],this.offsets[s]]},o.prototype.project=a.prototype.project,o.prototype.projectIn=function(){var s=this,u={};return s.nodes.slice(0,this.C).forEach(function(l,d){u[l]=Array.from(s.neighborhood.slice(s.offsets[d],s.starts[d+1])).map(function(f){return s.nodes[f]})}),u},o.prototype.projectOut=function(){var s=this,u={};return s.nodes.slice(0,this.C).forEach(function(l,d){u[l]=Array.from(s.neighborhood.slice(s.starts[d],s.offsets[d])).map(function(f){return s.nodes[f]})}),u},o.prototype.isolate=function(s,u,l){var d=this.belongings[s];if(this.counts[d]===1)return d;var f=this.unused[--this.U],g=this.loops[s];return this.totalInWeights[d]-=u+g,this.totalInWeights[f]+=u+g,this.totalOutWeights[d]-=l+g,this.totalOutWeights[f]+=l+g,this.belongings[s]=f,this.counts[d]--,this.counts[f]++,f},o.prototype.move=function(s,u,l,d){var f=this.belongings[s],g=this.loops[s];this.totalInWeights[f]-=u+g,this.totalInWeights[d]+=u+g,this.totalOutWeights[f]-=l+g,this.totalOutWeights[d]+=l+g,this.belongings[s]=d;var m=this.counts[f]--===1;this.counts[d]++,m&&(this.unused[this.U++]=f)},o.prototype.computeNodeInDegree=function(s){var u,l,d,f=0;for(u=this.offsets[s],l=this.starts[s+1];u<l;u++)d=this.weights[u],f+=d;return f},o.prototype.computeNodeOutDegree=function(s){var u,l,d,f=0;for(u=this.starts[s],l=this.offsets[s];u<l;u++)d=this.weights[u],f+=d;return f},o.prototype.expensiveMove=function(s,u){var l=this.computeNodeInDegree(s),d=this.computeNodeOutDegree(s);this.move(s,l,d,u)},o.prototype.zoomOut=function(){var s=new Array(this.C-this.U),u={},l=this.nodes.length,d=0,f=0,g,m,w,x,S,A,b,_,y,D,R,v,C;for(g=0,w=this.C;g<w;g++)A=this.belongings[g],A in u||(u[A]=d,s[d]={inAdj:{},outAdj:{},totalInWeights:this.totalInWeights[A],totalOutWeights:this.totalOutWeights[A],internalWeights:0},d++),this.belongings[g]=u[A];var M,L;if(this.keepDendrogram){for(M=this.dendrogram[this.level],L=new(n.getPointerArray(d))(l),g=0;g<l;g++)L[g]=this.belongings[M[g]];this.dendrogram.push(L)}else for(g=0;g<l;g++)this.mapping[g]=this.belongings[this.mapping[g]];for(g=0,w=this.C;g<w;g++)for(A=this.belongings[g],y=this.offsets[g],_=s[A],v=_.inAdj,C=_.outAdj,_.internalWeights+=this.loops[g],m=this.starts[g],x=this.starts[g+1];m<x;m++){if(S=this.neighborhood[m],b=this.belongings[S],D=m<y,R=D?C:v,A===b){D&&(_.internalWeights+=this.weights[m]);continue}b in R||(R[b]=0),R[b]+=this.weights[m]}for(this.C=d,S=0,A=0;A<d;A++){_=s[A],v=_.inAdj,C=_.outAdj,A=+A,this.totalInWeights[A]=_.totalInWeights,this.totalOutWeights[A]=_.totalOutWeights,this.loops[A]=_.internalWeights,this.counts[A]=1,this.starts[A]=S,this.belongings[A]=A;for(b in C)this.neighborhood[S]=+b,this.weights[S]=C[b],f++,S++;this.offsets[A]=S;for(b in v)this.neighborhood[S]=+b,this.weights[S]=v[b],f++,S++}return this.starts[d]=f,this.E=f,this.U=0,this.level++,u},o.prototype.modularity=function(){var s,u,l,d,f,g=0,m=this.M,w=new Float64Array(this.C);for(l=0;l<this.C;l++)for(s=this.belongings[l],w[s]+=this.loops[l],d=this.starts[l],f=this.offsets[l];d<f;d++)u=this.belongings[this.neighborhood[d]],s===u&&(w[s]+=this.weights[d]);for(l=0;l<this.C;l++)g+=w[l]/m-this.totalInWeights[l]*this.totalOutWeights[l]/Math.pow(m,2)*this.resolution;return g},o.prototype.delta=function(s,u,l,d,f){var g=this.M,m=this.totalInWeights[f],w=this.totalOutWeights[f],x=this.loops[s];return u+=x,l+=x,d/g-(l*m+u*w)*this.resolution/(g*g)},o.prototype.deltaWithOwnCommunity=function(s,u,l,d,f){var g=this.M,m=this.totalInWeights[f],w=this.totalOutWeights[f],x=this.loops[s];return u+=x,l+=x,d/g-(l*(m-u)+u*(w-l))*this.resolution/(g*g)},o.prototype.collect=a.prototype.collect,o.prototype.assign=a.prototype.assign,o.prototype[r]=function(){var s={};Object.defineProperty(s,"constructor",{value:o,enumerable:!1}),s.C=this.C,s.M=this.M,s.E=this.E,s.U=this.U,s.resolution=this.resolution,s.level=this.level,s.nodes=this.nodes,s.starts=this.starts.slice(0,s.C+1);var u=["neighborhood","weights"],l=["counts","offsets","loops","belongings","totalInWeights","totalOutWeights"],d=this;return u.forEach(function(f){s[f]=d[f].slice(0,s.E)}),l.forEach(function(f){s[f]=d[f].slice(0,s.C)}),s.unused=this.unused.slice(0,this.U),this.keepDendrogram?s.dendrogram=this.dendrogram:s.mapping=this.mapping,s},On.UndirectedLouvainIndex=a,On.DirectedLouvainIndex=o,On}var ca,Rl;function rb(){if(Rl)return ca;Rl=1;var n=je(),e=be(),t=Er(),r=Zm(),i=Jm(),a=eb().createRandomIndex,o=tb(),s=o.UndirectedLouvainIndex,u=o.DirectedLouvainIndex,l={nodeCommunityAttribute:"community",getEdgeWeight:"weight",fastLocalMoves:!0,randomWalk:!0,resolution:1,rng:Math.random};function d(A,b,_){var y=A.get(b);typeof y>"u"&&(y=0),y+=_,A.set(b,y)}var f=1e-10;function g(A,b,_,y,D){return Math.abs(y-D)<f?A===b?!1:_>A:y>D}function m(A,b,_){var y=new s(b,{getEdgeWeight:_.getEdgeWeight,keepDendrogram:A,resolution:_.resolution}),D=a(_.rng),R=!0,v=!0,C,M,L=new r(Float64Array,y.C),G,$,N,Y,V,F,I,T,j,X,W,q,H,J,ie,oe,ue=0,ne=0,te=[],ce,pe;for(_.fastLocalMoves&&(G=new i(y.C));R;){if(X=y.C,R=!1,v=!0,_.fastLocalMoves){for(pe=0,F=_.randomWalk?D(X):0,I=0;I<X;I++,F++)T=F%X,G.enqueue(T);for(;G.size!==0;){for(T=G.dequeue(),ne++,W=0,L.clear(),C=y.belongings[T],$=y.starts[T],N=y.starts[T+1];$<N;$++)j=y.neighborhood[$],Y=y.weights[$],M=y.belongings[j],W+=Y,d(L,M,Y);for(J=y.fastDeltaWithOwnCommunity(T,W,L.get(C)||0,C),H=C,V=0;V<L.size;V++)M=L.dense[V],M!==C&&(q=L.vals[V],ue++,oe=y.fastDelta(T,W,q,M),ie=g(H,C,M,oe,J),ie&&(J=oe,H=M));if(J<0){if(H=y.isolate(T,W),H===C)continue}else{if(H===C)continue;y.move(T,W,H)}for(R=!0,pe++,$=y.starts[T],N=y.starts[T+1];$<N;$++)j=y.neighborhood[$],M=y.belongings[j],M!==H&&G.enqueue(j)}te.push(pe)}else for(ce=[],te.push(ce);v;){for(v=!1,pe=0,F=_.randomWalk?D(X):0,I=0;I<X;I++,F++){for(T=F%X,ne++,W=0,L.clear(),C=y.belongings[T],$=y.starts[T],N=y.starts[T+1];$<N;$++)j=y.neighborhood[$],Y=y.weights[$],M=y.belongings[j],W+=Y,d(L,M,Y);for(J=y.fastDeltaWithOwnCommunity(T,W,L.get(C)||0,C),H=C,V=0;V<L.size;V++)M=L.dense[V],M!==C&&(q=L.vals[V],ue++,oe=y.fastDelta(T,W,q,M),ie=g(H,C,M,oe,J),ie&&(J=oe,H=M));if(J<0){if(H=y.isolate(T,W),H===C)continue}else{if(H===C)continue;y.move(T,W,H)}v=!0,pe++}ce.push(pe),R=v||R}R&&y.zoomOut()}var ye={index:y,deltaComputations:ue,nodesVisited:ne,moves:te};return ye}function w(A,b,_){var y=new u(b,{getEdgeWeight:_.getEdgeWeight,keepDendrogram:A,resolution:_.resolution}),D=a(_.rng),R=!0,v=!0,C,M,L=new r(Float64Array,y.C),G,$,N,Y,V,F,I,T,j,X,W,q,H,J,ie,oe,ue,ne,te,ce=0,pe=0,ye=[],Ce,fe;for(_.fastLocalMoves&&(G=new i(y.C));R;){if(q=y.C,R=!1,v=!0,_.fastLocalMoves){for(fe=0,T=_.randomWalk?D(q):0,j=0;j<q;j++,T++)X=T%q,G.enqueue(X);for(;G.size!==0;){for(X=G.dequeue(),pe++,H=0,J=0,L.clear(),C=y.belongings[X],$=y.starts[X],N=y.starts[X+1],Y=y.offsets[X];$<N;$++)V=$<Y,W=y.neighborhood[$],F=y.weights[$],M=y.belongings[W],V?J+=F:H+=F,d(L,M,F);for(ue=y.deltaWithOwnCommunity(X,H,J,L.get(C)||0,C),oe=C,I=0;I<L.size;I++)M=L.dense[I],M!==C&&(ie=L.vals[I],ce++,te=y.delta(X,H,J,ie,M),ne=g(oe,C,M,te,ue),ne&&(ue=te,oe=M));if(ue<0){if(oe=y.isolate(X,H,J),oe===C)continue}else{if(oe===C)continue;y.move(X,H,J,oe)}for(R=!0,fe++,$=y.starts[X],N=y.starts[X+1];$<N;$++)W=y.neighborhood[$],M=y.belongings[W],M!==oe&&G.enqueue(W)}ye.push(fe)}else for(Ce=[],ye.push(Ce);v;){for(v=!1,fe=0,T=_.randomWalk?D(q):0,j=0;j<q;j++,T++){for(X=T%q,pe++,H=0,J=0,L.clear(),C=y.belongings[X],$=y.starts[X],N=y.starts[X+1],Y=y.offsets[X];$<N;$++)V=$<Y,W=y.neighborhood[$],F=y.weights[$],M=y.belongings[W],V?J+=F:H+=F,d(L,M,F);for(ue=y.deltaWithOwnCommunity(X,H,J,L.get(C)||0,C),oe=C,I=0;I<L.size;I++)M=L.dense[I],M!==C&&(ie=L.vals[I],ce++,te=y.delta(X,H,J,ie,M),ne=g(oe,C,M,te,ue),ne&&(ue=te,oe=M));if(ue<0){if(oe=y.isolate(X,H,J),oe===C)continue}else{if(oe===C)continue;y.move(X,H,J,oe)}v=!0,fe++}Ce.push(fe),R=v||R}R&&y.zoomOut()}var ae={index:y,deltaComputations:ce,nodesVisited:pe,moves:ye};return ae}function x(A,b,_,y){if(!e(_))throw new Error("graphology-communities-louvain: the given graph is not a valid graphology instance.");var D=t(_);if(D==="mixed")throw new Error("graphology-communities-louvain: cannot run the algorithm on a true mixed graph.");y=n(y,l);var R=0;if(_.size===0){if(A){_.forEachNode(function($){_.setNodeAttribute($,y.nodeCommunityAttribute,R++)});return}var v={};return _.forEachNode(function($){v[$]=R++}),b?{communities:v,count:_.order,deltaComputations:0,dendrogram:null,level:0,modularity:NaN,moves:null,nodesVisited:0,resolution:y.resolution}:v}var C=D==="undirected"?m:w,M=C(b,_,y),L=M.index;if(!b){if(A){L.assign(y.nodeCommunityAttribute);return}return L.collect()}var G={count:L.C,deltaComputations:M.deltaComputations,dendrogram:L.dendrogram,level:L.level,modularity:L.modularity(),moves:M.moves,nodesVisited:M.nodesVisited,resolution:y.resolution};return A?(L.assign(y.nodeCommunityAttribute),G):(G.communities=L.collect(),G)}var S=x.bind(null,!1,!1);return S.assign=x.bind(null,!0,!1),S.detailed=x.bind(null,!1,!0),S.defaults=l,ca=S,ca}var ha,Gl;function nb(){return Gl||(Gl=1,ha=rb()),ha}var At={},da={},Pl;function Qs(){return Pl||(Pl=1,da.copyNode=function(n,e,t){return t=Object.assign({},t),n.addNode(e,t)}),da}var kr={},$l;function It(){return $l||($l=1,kr.addEdge=function(e,t,r,i,a,o){return t?r==null?e.addUndirectedEdge(i,a,o):e.addUndirectedEdgeWithKey(r,i,a,o):r==null?e.addDirectedEdge(i,a,o):e.addDirectedEdgeWithKey(r,i,a,o)},kr.copyEdge=function(e,t,r,i,a,o){return o=Object.assign({},o),t?r==null?e.addUndirectedEdge(i,a,o):e.addUndirectedEdgeWithKey(r,i,a,o):r==null?e.addDirectedEdge(i,a,o):e.addDirectedEdgeWithKey(r,i,a,o)},kr.mergeEdge=function(e,t,r,i,a,o){return t?r==null?e.mergeUndirectedEdge(i,a,o):e.mergeUndirectedEdgeWithKey(r,i,a,o):r==null?e.mergeDirectedEdge(i,a,o):e.mergeDirectedEdgeWithKey(r,i,a,o)},kr.updateEdge=function(e,t,r,i,a,o){return t?r==null?e.updateUndirectedEdge(i,a,o):e.updateUndirectedEdgeWithKey(r,i,a,o):r==null?e.updateDirectedEdge(i,a,o):e.updateDirectedEdgeWithKey(r,i,a,o)}),kr}var fa,Ol;function Cf(){if(Ol)return fa;Ol=1;function n(e){this.graph=e,this.stack=new Array(e.order),this.seen=new Set,this.size=0}return n.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},n.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},n.prototype.forEachNodeYetUnseen=function(e){var t=this.seen,r=this.graph;r.someNode(function(i,a){if(t.size===r.order)return!0;if(t.has(i))return!1;var o=e(i,a);return!!o})},n.prototype.has=function(e){return this.seen.has(e)},n.prototype.push=function(e){var t=this.seen.size;return this.seen.add(e),t===this.seen.size?!1:(this.stack[this.size++]=e,!0)},n.prototype.pushWith=function(e,t){var r=this.seen.size;return this.seen.add(e),r===this.seen.size?!1:(this.stack[this.size++]=t,!0)},n.prototype.pop=function(){if(this.size!==0)return this.stack[--this.size]},fa=n,fa}var ql;function If(){if(ql)return At;ql=1;var n=be(),e=Qs().copyNode,t=It().copyEdge,r=Cf();function i(m,w){if(!n(m))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(m.order){var x=new r(m),S=x.push.bind(x);x.forEachNodeYetUnseen(function(A){var b=[];x.push(A);for(var _;x.size!==0;)_=x.pop(),b.push(_),m.forEachNeighbor(_,S);w(b)})}}function a(m,w){if(!n(m))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(m.order){var x=new r(m),S=x.push.bind(x);x.forEachNodeYetUnseen(function(A){var b=0;x.push(A);for(var _;x.size!==0;)_=x.pop(),b++,m.forEachNeighbor(_,S);w(b)})}}function o(m,w,x){if(!n(m))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!m.order)return;var S=new r(m),A;function b(_,y,D,R,v,C,M){A===R&&(R=D),w(_,y,D,R,v,C,M)&&S.push(R)}S.forEachNodeYetUnseen(function(_){var y=0;for(S.push(_);S.size!==0;)A=S.pop(),y++,m.forEachEdge(A,b);x(y)})}function s(m){var w=0;return a(m,function(){w++}),w}function u(m){var w=[];return i(m,function(x){w.push(x)}),w}function l(m){if(!n(m))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!m.order)return[];var w=new r(m),x=w.push.bind(w),S=[],A;return w.forEachNodeYetUnseen(function(b){A=[],w.push(b);for(var _;w.size!==0;)_=w.pop(),A.push(_),m.forEachNeighbor(_,x);return A.length>S.length&&(S=A),S.length>w.countUnseenNodes()}),S}function d(m){var w=l(m),x=m.nullCopy();return w.forEach(function(S){e(x,S,m.getNodeAttributes(S))}),m.forEachEdge(function(S,A,b,_,y,D,R){x.hasNode(b)&&t(x,R,S,b,_,A)}),x}function f(m){var w=new Set(l(m));m.forEachNode(function(x){w.has(x)||m.dropNode(x)})}function g(m){if(!n(m))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!m.order)return[];if(m.type==="undirected")throw new Error("graphology-components: the given graph is undirected");var w=m.nodes(),x=[],S,A;if(!m.size){for(S=0,A=w.length;S<A;S++)x.push([w[S]]);return x}var b=1,_=[],y=[],D=new Map,R=new Set,v,C,M,L=function(G){var $,N=m.outboundNeighbors(G),Y;D.set(G,b++),_.push(G),y.push(G);for(var V=0,F=N.length;V<F;V++)if($=N[V],D.has($)){if(Y=D.get($),!R.has($))for(;D.get(_[_.length-1])>Y;)_.pop()}else L($);if(D.get(_[_.length-1])===D.get(G)){v=[];do C=y.pop(),v.push(C),R.add(C);while(C!==G);x.push(v),_.pop()}};for(S=0,A=w.length;S<A;S++)M=w[S],R.has(M)||L(M);return x}return At.forEachConnectedComponent=i,At.forEachConnectedComponentOrder=a,At.forEachConnectedComponentOrderWithEdgeFilter=o,At.countConnectedComponents=s,At.connectedComponents=u,At.largestConnectedComponent=l,At.largestConnectedComponentSubgraph=d,At.cropToLargestConnectedComponent=f,At.stronglyConnectedComponents=g,At}var pa,Fl;function ib(){return Fl||(Fl=1,pa=If()),pa}var fr={},Dr={},ga,Wl;function ab(){if(Wl)return ga;Wl=1;var n=Je();return ga=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/complete: invalid Graph constructor.");var i=new t,a,o;for(a=0;a<r;a++)i.addNode(a);for(a=0;a<r;a++)for(o=a+1;o<r;o++)i.type!=="directed"&&i.addUndirectedEdge(a,o),i.type!=="undirected"&&(i.addDirectedEdge(a,o),i.addDirectedEdge(o,a));return i},ga}var va,Ul;function Zs(){if(Ul)return va;Ul=1;var n=Je();return va=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/empty: invalid Graph constructor.");var i=new t,a;for(a=0;a<r;a++)i.addNode(a);return i},va}var ya,jl;function ob(){if(jl)return ya;jl=1;var n=Je();return ya=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/ladder: invalid Graph constructor.");var i=new t,a;for(a=0;a<r-1;a++)i.mergeEdge(a,a+1);for(a=r;a<r*2-1;a++)i.mergeEdge(a,a+1);for(a=0;a<r;a++)i.addEdge(a,a+r);return i},ya}var ma,Bl;function sb(){if(Bl)return ma;Bl=1;var n=Je();return ma=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/path: invalid Graph constructor.");for(var i=new t,a=0;a<r-1;a++)i.mergeEdge(a,a+1);return i},ma}var Hl;function Mf(){return Hl||(Hl=1,Dr.complete=ab(),Dr.empty=Zs(),Dr.ladder=ob(),Dr.path=sb()),Dr}var qn={},ba,Kl;function ub(){if(Kl)return ba;Kl=1;var n=Je(),e=Zs();return ba=function(r,i,a){if(!n(r))throw new Error("graphology-generators/community/caveman: invalid Graph constructor.");var o=i*a,s=e(r,o);if(a<2)return s;var u,l,d;for(u=0;u<o;u+=a)for(l=u;l<u+a;l++)for(d=l+1;d<u+a;d++)s.addEdge(l,d);return s},ba}var wa,Xl;function lb(){if(Xl)return wa;Xl=1;var n=Je(),e=Zs();return wa=function(r,i,a){if(!n(r))throw new Error("graphology-generators/community/connected-caveman: invalid Graph constructor.");var o=i*a,s=e(r,o);if(a<2)return s;var u,l,d;for(u=0;u<o;u+=a){for(l=u;l<u+a;l++)for(d=l+1;d<u+a;d++)(l!==u||l!==d-1)&&s.addEdge(l,d);u>0&&s.addEdge(u,(u-1)%o)}return s.addEdge(0,o-1),s},wa}var Yl;function Lf(){return Yl||(Yl=1,qn.caveman=ub(),qn.connectedCaveman=lb()),qn}var Zr={},Ea,Vl;function cb(){if(Vl)return Ea;Vl=1;var n=Je();return Ea=function(e,t){if(!n(e))throw new Error("graphology-generators/random/clusters: invalid Graph constructor.");t=t||{};var r="clusterDensity"in t?t.clusterDensity:.5,i=t.rng||Math.random,a=t.order,o=t.size,s=t.clusters;if(typeof r!="number"||r>1||r<0)throw new Error("graphology-generators/random/clusters: `clusterDensity` option should be a number between 0 and 1.");if(typeof i!="function")throw new Error("graphology-generators/random/clusters: `rng` option should be a function.");if(typeof a!="number"||a<=0)throw new Error("graphology-generators/random/clusters: `order` option should be a positive number.");if(typeof o!="number"||o<=0)throw new Error("graphology-generators/random/clusters: `size` option should be a positive number.");if(typeof s!="number"||s<=0)throw new Error("graphology-generators/random/clusters: `clusters` option should be a positive number.");var u=new e;if(!a)return u;var l=new Array(s),d,f,g;for(g=0;g<s;g++)l[g]=[];for(g=0;g<a;g++)d=i()*s|0,u.addNode(g,{cluster:d}),l[d].push(g);if(!o)return u;var m,w,x;for(g=0;g<o;g++){if(i()<1-r){m=i()*a|0;do w=i()*a|0;while(m===w)}else{if(d=i()*s|0,f=l[d],x=f.length,!x||x<2)continue;m=f[i()*x|0];do w=f[i()*x|0];while(m===w)}u.multi?u.addEdge(m,w):u.mergeEdge(m,w)}return u},Ea}var zt={},xa,Ql;function zf(){if(Ql)return xa;Ql=1;var n=be();return xa=function(t){if(!n(t))throw new Error("graphology-metrics/simple-size: the given graph is not a valid graphology instance.");if(!t.multi)return t.size;var r=0,i=0;function a(){r++}function o(){i++}return t.forEachNode(function(s){t.type!=="directed"&&t.forEachUndirectedNeighbor(s,a),t.type!=="undirected"&&t.forEachOutNeighbor(s,o)}),r/2+i},xa}var Zl;function Tf(){if(Zl)return zt;Zl=1;var n=be(),e=zf();function t(o,s){return 2*s/(o*(o-1))}function r(o,s){return s/(o*(o-1))}function i(o,s){var u=o*(o-1);return s/(u+u/2)}function a(o,s,u){var l,d;if(arguments.length>3){if(l=u,d=arguments[3],typeof l!="number"||l<0)throw new Error("graphology-metrics/density: given order is not a valid number.");if(typeof d!="number"||d<0)throw new Error("graphology-metrics/density: given size is not a valid number.")}else{if(!n(u))throw new Error("graphology-metrics/density: given graph is not a valid graphology instance.");l=u.order,d=u.size,u.multi&&s===!1&&(d=e(u))}if(l<2)return 0;o===null&&(o=u.type),s===null&&(s=u.multi);var f;return o==="undirected"?f=t:o==="directed"?f=r:f=i,f(l,d)}return zt.abstractDensity=a,zt.density=a.bind(null,null,null),zt.directedDensity=a.bind(null,"directed",!1),zt.undirectedDensity=a.bind(null,"undirected",!1),zt.mixedDensity=a.bind(null,"mixed",!1),zt.multiDirectedDensity=a.bind(null,"directed",!0),zt.multiUndirectedDensity=a.bind(null,"undirected",!0),zt.multiMixedDensity=a.bind(null,"mixed",!0),zt}var Sa,Jl;function hb(){if(Jl)return Sa;Jl=1;var n=Je(),e=Tf().abstractDensity;function t(i,a){if(!n(i))throw new Error("graphology-generators/random/erdos-renyi: invalid Graph constructor.");var o=a.order,s=a.probability,u=a.rng||Math.random,l=new i;if(typeof a.approximateSize=="number"&&(s=e(l.type,!1,o,a.approximateSize)),typeof o!="number"||o<=0)throw new Error("graphology-generators/random/erdos-renyi: invalid `order`. Should be a positive number.");if(typeof s!="number"||s<0||s>1)throw new Error("graphology-generators/random/erdos-renyi: invalid `probability`. Should be a number between 0 and 1. Or maybe you gave an `approximateSize` exceeding the graph's density.");if(typeof u!="function")throw new Error("graphology-generators/random/erdos-renyi: invalid `rng`. Should be a function.");var d,f;for(d=0;d<o;d++)l.addNode(d);if(s<=0)return l;for(d=0;d<o;d++)for(f=d+1;f<o;f++)l.type!=="directed"&&u()<s&&l.addUndirectedEdge(d,f),l.type!=="undirected"&&(u()<s&&l.addDirectedEdge(d,f),u()<s&&l.addDirectedEdge(f,d));return l}function r(i,a){if(!n(i))throw new Error("graphology-generators/random/erdos-renyi: invalid Graph constructor.");var o=a.order,s=a.probability,u=a.rng||Math.random,l=new i;if(typeof a.approximateSize=="number"&&(s=e(l.type,!1,o,a.approximateSize)),typeof o!="number"||o<=0)throw new Error("graphology-generators/random/erdos-renyi: invalid `order`. Should be a positive number.");if(typeof s!="number"||s<0||s>1)throw new Error("graphology-generators/random/erdos-renyi: invalid `probability`. Should be a number between 0 and 1. Or maybe you gave an `approximateSize` exceeding the graph's density.");if(typeof u!="function")throw new Error("graphology-generators/random/erdos-renyi: invalid `rng`. Should be a function.");for(var d=0;d<o;d++)l.addNode(d);if(s<=0)return l;var f=-1,g=Math.log(1-s),m,w;if(l.type!=="undirected")for(w=0;w<o;){for(m=Math.log(1-u()),f+=1+(m/g|0),w===f&&f++;w<o&&o<=f;)f-=o,w++,w===f&&f++;w<o&&l.addDirectedEdge(w,f)}if(f=-1,l.type!=="directed")for(w=1;w<o;){for(m=Math.log(1-u()),f+=1+(m/g|0);f>=w&&w<o;)f-=w,w++;w<o&&l.addUndirectedEdge(w,f)}return l}return t.sparse=r,Sa=t,Sa}var Aa,ec;function db(){if(ec)return Aa;ec=1;var n=Je();return Aa=function(t,r){if(!n(t))throw new Error("graphology-generators/random/girvan-newman: invalid Graph constructor.");var i=r.zOut,a=r.rng||Math.random;if(typeof i!="number")throw new Error("graphology-generators/random/girvan-newman: invalid `zOut`. Should be a number.");if(typeof a!="function")throw new Error("graphology-generators/random/girvan-newman: invalid `rng`. Should be a function.");var o=i/96,s=(16-o*96)/31,u=new t,l,d,f;for(d=0;d<128;d++)u.addNode(d);for(d=0;d<128;d++)for(f=d+1;f<128;f++)l=a(),d%4===f%4?l<s&&u.addEdge(d,f):l<o&&u.addEdge(d,f);return u},Aa}var tc;function Nf(){return tc||(tc=1,Zr.clusters=cb(),Zr.erdosRenyi=hb(),Zr.girvanNewman=db()),Zr}var _a={},ka,rc;function Rf(){return rc||(rc=1,ka=function(e,t){if(t.length!==0){var r,i,a,o=t[0];for(e.mergeNode(o),i=1,a=t.length;i<a;i++)r=t[i],e.mergeEdge(o,r)}}),ka}var Da,nc;function fb(){if(nc)return Da;nc=1;var n=Je(),e=Rf(),t=[["Andre","Beverley","Carol","Diane","Fernando"],["Beverley","Andre","Ed","Garth"],["Carol","Andre","Diane","Fernando"],["Diane","Andre","Beverley","Carol","Ed","Fernando","Garth"],["Ed","Beverley","Diane","Garth"],["Fernando","Andre","Carol","Diane","Garth","Heather"],["Garth","Beverley","Diane","Ed","Fernando","Heather"],["Heather","Fernando","Garth","Ike"],["Ike","Heather","Jane"],["Jane","Ike"]];return Da=function(i){if(!n(i))throw new Error("graphology-generators/social/krackhardt-kite: invalid Graph constructor.");var a=new i,o,s;for(o=0,s=t.length;o<s;o++)e(a,t[o]);return a},Da}var ic;function pb(){return ic||(ic=1,_a.krackhardtKite=fb()),_a}var Fn={},Ca,ac;function gb(){if(ac)return Ca;ac=1;var n=Je(),e=[["Acciaiuoli","Medici"],["Castellani","Peruzzi"],["Castellani","Strozzi"],["Castellani","Barbadori"],["Medici","Barbadori"],["Medici","Ridolfi"],["Medici","Tornabuoni"],["Medici","Albizzi"],["Medici","Salviati"],["Salviati","Pazzi"],["Peruzzi","Strozzi"],["Peruzzi","Bischeri"],["Strozzi","Ridolfi"],["Strozzi","Bischeri"],["Ridolfi","Tornabuoni"],["Tornabuoni","Guadagni"],["Albizzi","Ginori"],["Albizzi","Guadagni"],["Bischeri","Guadagni"],["Guadagni","Lamberteschi"]];return Ca=function(r){if(!n(r))throw new Error("graphology-generators/social/florentine-families: invalid Graph constructor.");var i=new r,a,o,s;for(o=0,s=e.length;o<s;o++)a=e[o],i.mergeEdge(a[0],a[1]);return i},Ca}var Ia,oc;function vb(){if(oc)return Ia;oc=1;var n=Je(),e=["0111111110111100010101000000000100","1011000100000100010101000000001000","1101000111000100000000000001100010","1110000100001100000000000000000000","1000001000100000000000000000000000","1000001000100000100000000000000000","1000110000000000100000000000000000","1111000000000000000000000000000000","1010000000000000000000000000001011","0010000000000000000000000000000001","1000110000000000000000000000000000","1000000000000000000000000000000000","1001000000000000000000000000000000","1111000000000000000000000000000001","0000000000000000000000000000000011","0000000000000000000000000000000011","0000011000000000000000000000000000","1100000000000000000000000000000000","0000000000000000000000000000000011","1100000000000000000000000000000001","0000000000000000000000000000000011","1100000000000000000000000000000000","0000000000000000000000000000000011","0000000000000000000000000101010011","0000000000000000000000000101000100","0000000000000000000000011000000100","0000000000000000000000000000010001","0010000000000000000000011000000001","0010000000000000000000000000000101","0000000000000000000000010010000011","0100000010000000000000000000000011","1000000000000000000000001100100011","0010000010000011001010110000011101","0000000011000111001110110011111110"],t=new Set([0,1,2,3,4,5,6,7,8,10,11,12,13,16,17,19,21]);return Ia=function(i){if(!n(i))throw new Error("graphology-generators/social/karate: invalid Graph constructor.");for(var a=new i,o,s=0;s<34;s++)o=t.has(s)?"Mr. Hi":"Officer",a.addNode(s,{club:o});var u,l,d,f,g,m;for(d=0,g=e.length;d<g;d++)for(u=e[d].split(""),f=d+1,m=u.length;f<m;f++)l=+u[f],l&&a.addEdgeWithKey(d+"->"+f,d,f);return a},Ia}var sc;function yb(){return sc||(sc=1,Fn.florentineFamilies=gb(),Fn.karateClub=vb()),Fn}var uc;function mb(){return uc||(uc=1,fr.classic=Mf(),fr.community=Lf(),fr.random=Nf(),fr.small=pb(),fr.social=yb()),fr}var Ma,lc;function bb(){return lc||(lc=1,Ma=mb()),Ma}var Cr={},La,cc;function wb(){if(cc)return La;cc=1;function n(t){return function(r,i){return r+Math.floor(t()*(i-r+1))}}var e=n(Math.random);return e.createRandom=n,La=e,La}var za,hc;function Eb(){if(hc)return za;hc=1;var n=wb().createRandom;function e(r){var i=n(r);return function(a){for(var o=a.length,s=o-1,u=-1;++u<o;){var l=i(u,s),d=a[l];a[l]=a[u],a[u]=d}}}var t=e(Math.random);return t.createShuffleInPlace=e,za=t,za}var Ta,dc;function xb(){if(dc)return Ta;dc=1;var n=je(),e=be(),t=Eb(),r={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function i(v,C,M,L,G){this.wrappedCircle=G||null,this.children={},this.countChildren=0,this.id=v||null,this.next=null,this.previous=null,this.x=C||null,this.y=M||null,G?this.r=1010101:this.r=L||999}i.prototype.hasChildren=function(){return this.countChildren>0},i.prototype.addChild=function(v,C){this.children[v]=C,++this.countChildren},i.prototype.getChild=function(v){if(!this.children.hasOwnProperty(v)){var C=new i;this.children[v]=C,++this.countChildren}return this.children[v]},i.prototype.applyPositionToChildren=function(){if(this.hasChildren()){var v=this;for(var C in v.children){var M=v.children[C];M.x+=v.x,M.y+=v.y,M.applyPositionToChildren()}}};function a(v,C,M){for(var L in C.children){var G=C.children[L];G.hasChildren()?a(v,G,M):M[G.id]={x:G.x,y:G.y}}}function o(v,C){var M=v.r-C.r,L=C.x-v.x,G=C.y-v.y;return M<0||M*M<L*L+G*G}function s(v,C){var M=v.r-C.r+1e-6,L=C.x-v.x,G=C.y-v.y;return M>0&&M*M>L*L+G*G}function u(v,C){for(var M=0;M<C.length;++M)if(!s(v,C[M]))return!1;return!0}function l(v){return new i(null,v.x,v.y,v.r)}function d(v,C){var M=v.x,L=v.y,G=v.r,$=C.x,N=C.y,Y=C.r,V=$-M,F=N-L,I=Y-G,T=Math.sqrt(V*V+F*F);return new i(null,(M+$+V/T*I)/2,(L+N+F/T*I)/2,(T+G+Y)/2)}function f(v,C,M){var L=v.x,G=v.y,$=v.r,N=C.x,Y=C.y,V=C.r,F=M.x,I=M.y,T=M.r,j=L-N,X=L-F,W=G-Y,q=G-I,H=V-$,J=T-$,ie=L*L+G*G-$*$,oe=ie-N*N-Y*Y+V*V,ue=ie-F*F-I*I+T*T,ne=X*W-j*q,te=(W*ue-q*oe)/(ne*2)-L,ce=(q*H-W*J)/ne,pe=(X*oe-j*ue)/(ne*2)-G,ye=(j*J-X*H)/ne,Ce=ce*ce+ye*ye-1,fe=2*($+te*ce+pe*ye),ae=te*te+pe*pe-$*$,Q=-(Ce?(fe+Math.sqrt(fe*fe-4*Ce*ae))/(2*Ce):ae/fe);return new i(null,L+te+ce*Q,G+pe+ye*Q,Q)}function g(v){switch(v.length){case 1:return l(v[0]);case 2:return d(v[0],v[1]);case 3:return f(v[0],v[1],v[2]);default:throw new Error("graphology-layout/circlepack: Invalid basis length "+v.length)}}function m(v,C){var M,L;if(u(C,v))return[C];for(M=0;M<v.length;++M)if(o(C,v[M])&&u(d(v[M],C),v))return[v[M],C];for(M=0;M<v.length-1;++M)for(L=M+1;L<v.length;++L)if(o(d(v[M],v[L]),C)&&o(d(v[M],C),v[L])&&o(d(v[L],C),v[M])&&u(f(v[M],v[L],C),v))return[v[M],v[L],C];throw new Error("graphology-layout/circlepack: extendBasis failure !")}function w(v){var C=v.wrappedCircle,M=v.next.wrappedCircle,L=C.r+M.r,G=(C.x*M.r+M.x*C.r)/L,$=(C.y*M.r+M.y*C.r)/L;return G*G+$*$}function x(v,C){var M=0,L=v.slice(),G=v.length,$=[],N,Y;for(C(L);M<G;)N=L[M],Y&&s(Y,N)?++M:($=m($,N),Y=g($),M=0);return Y}function S(v,C,M){var L=v.x-C.x,G,$,N=v.y-C.y,Y,V,F=L*L+N*N;F?($=C.r+M.r,$*=$,V=v.r+M.r,V*=V,$>V?(G=(F+V-$)/(2*F),Y=Math.sqrt(Math.max(0,V/F-G*G)),M.x=v.x-G*L-Y*N,M.y=v.y-G*N+Y*L):(G=(F+$-V)/(2*F),Y=Math.sqrt(Math.max(0,$/F-G*G)),M.x=C.x+G*L-Y*N,M.y=C.y+G*N+Y*L)):(M.x=C.x+M.r,M.y=C.y)}function A(v,C){var M=v.r+C.r-1e-6,L=C.x-v.x,G=C.y-v.y;return M>0&&M*M>L*L+G*G}function b(v,C){var M=v.length;if(M===0)return 0;var L,G,$,N,Y,V,F,I,T,j;if(L=v[0],L.x=0,L.y=0,M<=1)return L.r;if(G=v[1],L.x=-G.r,G.x=L.r,G.y=0,M<=2)return L.r+G.r;$=v[2],S(G,L,$),L=new i(null,null,null,null,L),G=new i(null,null,null,null,G),$=new i(null,null,null,null,$),L.next=$.previous=G,G.next=L.previous=$,$.next=G.previous=L;e:for(V=3;V<M;++V){$=v[V],S(L.wrappedCircle,G.wrappedCircle,$),$=new i(null,null,null,null,$),F=G.next,I=L.previous,T=G.wrappedCircle.r,j=L.wrappedCircle.r;do if(T<=j){if(A(F.wrappedCircle,$.wrappedCircle)){G=F,L.next=G,G.previous=L,--V;continue e}T+=F.wrappedCircle.r,F=F.next}else{if(A(I.wrappedCircle,$.wrappedCircle)){L=I,L.next=G,G.previous=L,--V;continue e}j+=I.wrappedCircle.r,I=I.previous}while(F!==I.next);for($.previous=L,$.next=G,L.next=G.previous=G=$,N=w(L);($=$.next)!==G;)(Y=w($))<N&&(L=$,N=Y);G=L.next}L=[G.wrappedCircle],$=G;for(var X=1e4;($=$.next)!==G&&--X!==0;)L.push($.wrappedCircle);for($=x(L,C),V=0;V<M;++V)L=v[V],L.x-=$.x,L.y-=$.y;return $.r}function _(v,C){var M=0;if(v.hasChildren()){for(var L in v.children){var G=v.children[L];G.hasChildren()&&(G.r=_(G,C))}M=b(Object.values(v.children),C)}return M}function y(v,C){_(v,C);for(var M in v.children){var L=v.children[M];L.applyPositionToChildren()}}function D(v,C,M){if(!e(C))throw new Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");M=n(M,r);var L={},G={},$=C.nodes(),N=M.center,Y=M.hierarchyAttributes,V=t.createShuffleInPlace(M.rng),F=M.scale,I=new i;C.forEachNode(function(H,J){var ie=J.size?J.size:1,oe=new i(H,null,null,ie),ue=I;Y.forEach(function(ne){var te=J[ne];ue=ue.getChild(te)}),ue.addChild(H,oe)}),y(I,V),a(C,I,L);var T=$.length,j,X,W;for(W=0;W<T;W++){var q=$[W];j=N+F*L[q].x,X=N+F*L[q].y,G[q]={x:j,y:X},v&&(C.setNodeAttribute(q,M.attributes.x,j),C.setNodeAttribute(q,M.attributes.y,X))}return G}var R=D.bind(null,!1);return R.assign=D.bind(null,!0),Ta=R,Ta}var Na,fc;function Sb(){if(fc)return Na;fc=1;var n=je(),e=be(),t={dimensions:["x","y"],center:.5,scale:1};function r(a,o,s){if(!e(o))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");s=n(s,t);var u=s.dimensions;if(!Array.isArray(u)||u.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var l=s.center,d=s.scale,f=Math.PI*2,g=(l-.5)*d,m=o.order,w=u[0],x=u[1];function S(_,y){return y[w]=d*Math.cos(_*f/m)+g,y[x]=d*Math.sin(_*f/m)+g,y}var A=0;if(!a){var b={};return o.forEachNode(function(_){b[_]=S(A++,{})}),b}o.updateEachNodeAttributes(function(_,y){return S(A++,y),y},{attributes:u})}var i=r.bind(null,!1);return i.assign=r.bind(null,!0),Na=i,Na}var Ra,pc;function Ab(){if(pc)return Ra;pc=1;var n=je(),e=be(),t={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function r(a,o,s){if(!e(o))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");s=n(s,t);var u=s.dimensions;if(!Array.isArray(u)||u.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var l=u.length,d=s.center,f=s.rng,g=s.scale,m=(d-.5)*g;function w(S){for(var A=0;A<l;A++)S[u[A]]=f()*g+m;return S}if(!a){var x={};return o.forEachNode(function(S){x[S]=w({})}),x}o.updateEachNodeAttributes(function(S,A){return w(A),A},{attributes:u})}var i=r.bind(null,!1);return i.assign=r.bind(null,!0),Ra=i,Ra}var Ga,gc;function _b(){if(gc)return Ga;gc=1;var n=je(),e=be(),t=Math.PI/180,r={dimensions:["x","y"],centeredOnZero:!1,degrees:!1};function i(o,s,u,l){if(!e(s))throw new Error("graphology-layout/rotation: the given graph is not a valid graphology instance.");l=n(l,r),l.degrees&&(u*=t);var d=l.dimensions;if(!Array.isArray(d)||d.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");if(s.order===0)return o?void 0:{};var f=d[0],g=d[1],m=0,w=0;if(!l.centeredOnZero){var x=1/0,S=-1/0,A=1/0,b=-1/0;s.forEachNode(function(v,C){var M=C[f],L=C[g];M<x&&(x=M),M>S&&(S=M),L<A&&(A=L),L>b&&(b=L)}),m=(x+S)/2,w=(A+b)/2}var _=Math.cos(u),y=Math.sin(u);function D(v){var C=v[f],M=v[g];return v[f]=m+(C-m)*_-(M-w)*y,v[g]=w+(C-m)*y+(M-w)*_,v}if(!o){var R={};return s.forEachNode(function(v,C){var M={};M[f]=C[f],M[g]=C[g],R[v]=D(M)}),R}s.updateEachNodeAttributes(function(v,C){return D(C),C},{attributes:d})}var a=i.bind(null,!1);return a.assign=i.bind(null,!0),Ga=a,Ga}var vc;function Gf(){return vc||(vc=1,Cr.circlepack=xb(),Cr.circular=Sb(),Cr.random=Ab(),Cr.rotation=_b()),Cr}var Pa,yc;function Pf(){return yc||(yc=1,Pa=Gf()),Pa}var $a,mc;function kb(){return mc||(mc=1,$a=Gf()),$a}var Oa,bc;function Db(){if(bc)return Oa;bc=1;var n=0,e=1,t=2,r=3,i=4,a=5,o=6,s=7,u=8,l=9,d=0,f=1,g=2,m=0,w=1,x=2,S=3,A=4,b=5,_=6,y=7,D=8,R=3,v=10,C=3,M=9,L=10;return Oa=function($,N,Y){var V,F,I,T,j,X,W,q,H,J,ie=N.length,oe=Y.length,ue=$.adjustSizes,ne=$.barnesHutTheta*$.barnesHutTheta,te,ce,pe,ye,Ce,fe,ae,Q=[];for(I=0;I<ie;I+=v)N[I+i]=N[I+t],N[I+a]=N[I+r],N[I+t]=0,N[I+r]=0;if($.outboundAttractionDistribution){for(te=0,I=0;I<ie;I+=v)te+=N[I+o];te/=ie/v}if($.barnesHutOptimize){var xe=1/0,ze=-1/0,Ee=1/0,ge=-1/0,ee,Ne,$e;for(I=0;I<ie;I+=v)xe=Math.min(xe,N[I+n]),ze=Math.max(ze,N[I+n]),Ee=Math.min(Ee,N[I+e]),ge=Math.max(ge,N[I+e]);var Ge=ze-xe,qe=ge-Ee;for(Ge>qe?(Ee-=(Ge-qe)/2,ge=Ee+Ge):(xe-=(qe-Ge)/2,ze=xe+qe),Q[0+m]=-1,Q[0+w]=(xe+ze)/2,Q[0+x]=(Ee+ge)/2,Q[0+S]=Math.max(ze-xe,ge-Ee),Q[0+A]=-1,Q[0+b]=-1,Q[0+_]=0,Q[0+y]=0,Q[0+D]=0,V=1,I=0;I<ie;I+=v)for(F=0,$e=R;;)if(Q[F+b]>=0){N[I+n]<Q[F+w]?N[I+e]<Q[F+x]?ee=Q[F+b]:ee=Q[F+b]+M:N[I+e]<Q[F+x]?ee=Q[F+b]+M*2:ee=Q[F+b]+M*3,Q[F+y]=(Q[F+y]*Q[F+_]+N[I+n]*N[I+o])/(Q[F+_]+N[I+o]),Q[F+D]=(Q[F+D]*Q[F+_]+N[I+e]*N[I+o])/(Q[F+_]+N[I+o]),Q[F+_]+=N[I+o],F=ee;continue}else if(Q[F+m]<0){Q[F+m]=I;break}else{if(Q[F+b]=V*M,q=Q[F+S]/2,H=Q[F+b],Q[H+m]=-1,Q[H+w]=Q[F+w]-q,Q[H+x]=Q[F+x]-q,Q[H+S]=q,Q[H+A]=H+M,Q[H+b]=-1,Q[H+_]=0,Q[H+y]=0,Q[H+D]=0,H+=M,Q[H+m]=-1,Q[H+w]=Q[F+w]-q,Q[H+x]=Q[F+x]+q,Q[H+S]=q,Q[H+A]=H+M,Q[H+b]=-1,Q[H+_]=0,Q[H+y]=0,Q[H+D]=0,H+=M,Q[H+m]=-1,Q[H+w]=Q[F+w]+q,Q[H+x]=Q[F+x]-q,Q[H+S]=q,Q[H+A]=H+M,Q[H+b]=-1,Q[H+_]=0,Q[H+y]=0,Q[H+D]=0,H+=M,Q[H+m]=-1,Q[H+w]=Q[F+w]+q,Q[H+x]=Q[F+x]+q,Q[H+S]=q,Q[H+A]=Q[F+A],Q[H+b]=-1,Q[H+_]=0,Q[H+y]=0,Q[H+D]=0,V+=4,N[Q[F+m]+n]<Q[F+w]?N[Q[F+m]+e]<Q[F+x]?ee=Q[F+b]:ee=Q[F+b]+M:N[Q[F+m]+e]<Q[F+x]?ee=Q[F+b]+M*2:ee=Q[F+b]+M*3,Q[F+_]=N[Q[F+m]+o],Q[F+y]=N[Q[F+m]+n],Q[F+D]=N[Q[F+m]+e],Q[ee+m]=Q[F+m],Q[F+m]=-1,N[I+n]<Q[F+w]?N[I+e]<Q[F+x]?Ne=Q[F+b]:Ne=Q[F+b]+M:N[I+e]<Q[F+x]?Ne=Q[F+b]+M*2:Ne=Q[F+b]+M*3,ee===Ne)if($e--){F=ee;continue}else{$e=R;break}Q[Ne+m]=I;break}}if($.barnesHutOptimize)for(ce=$.scalingRatio,I=0;I<ie;I+=v)for(F=0;;)if(Q[F+b]>=0)if(fe=Math.pow(N[I+n]-Q[F+y],2)+Math.pow(N[I+e]-Q[F+D],2),J=Q[F+S],4*J*J/fe<ne){if(pe=N[I+n]-Q[F+y],ye=N[I+e]-Q[F+D],ue===!0?fe>0?(ae=ce*N[I+o]*Q[F+_]/fe,N[I+t]+=pe*ae,N[I+r]+=ye*ae):fe<0&&(ae=-ce*N[I+o]*Q[F+_]/Math.sqrt(fe),N[I+t]+=pe*ae,N[I+r]+=ye*ae):fe>0&&(ae=ce*N[I+o]*Q[F+_]/fe,N[I+t]+=pe*ae,N[I+r]+=ye*ae),F=Q[F+A],F<0)break;continue}else{F=Q[F+b];continue}else{if(X=Q[F+m],X>=0&&X!==I&&(pe=N[I+n]-N[X+n],ye=N[I+e]-N[X+e],fe=pe*pe+ye*ye,ue===!0?fe>0?(ae=ce*N[I+o]*N[X+o]/fe,N[I+t]+=pe*ae,N[I+r]+=ye*ae):fe<0&&(ae=-ce*N[I+o]*N[X+o]/Math.sqrt(fe),N[I+t]+=pe*ae,N[I+r]+=ye*ae):fe>0&&(ae=ce*N[I+o]*N[X+o]/fe,N[I+t]+=pe*ae,N[I+r]+=ye*ae)),F=Q[F+A],F<0)break;continue}else for(ce=$.scalingRatio,T=0;T<ie;T+=v)for(j=0;j<T;j+=v)pe=N[T+n]-N[j+n],ye=N[T+e]-N[j+e],ue===!0?(fe=Math.sqrt(pe*pe+ye*ye)-N[T+u]-N[j+u],fe>0?(ae=ce*N[T+o]*N[j+o]/fe/fe,N[T+t]+=pe*ae,N[T+r]+=ye*ae,N[j+t]-=pe*ae,N[j+r]-=ye*ae):fe<0&&(ae=100*ce*N[T+o]*N[j+o],N[T+t]+=pe*ae,N[T+r]+=ye*ae,N[j+t]-=pe*ae,N[j+r]-=ye*ae)):(fe=Math.sqrt(pe*pe+ye*ye),fe>0&&(ae=ce*N[T+o]*N[j+o]/fe/fe,N[T+t]+=pe*ae,N[T+r]+=ye*ae,N[j+t]-=pe*ae,N[j+r]-=ye*ae));for(H=$.gravity/$.scalingRatio,ce=$.scalingRatio,I=0;I<ie;I+=v)ae=0,pe=N[I+n],ye=N[I+e],fe=Math.sqrt(Math.pow(pe,2)+Math.pow(ye,2)),$.strongGravityMode?fe>0&&(ae=ce*N[I+o]*H):fe>0&&(ae=ce*N[I+o]*H/fe),N[I+t]-=pe*ae,N[I+r]-=ye*ae;for(ce=1*($.outboundAttractionDistribution?te:1),W=0;W<oe;W+=C)T=Y[W+d],j=Y[W+f],q=Y[W+g],Ce=Math.pow(q,$.edgeWeightInfluence),pe=N[T+n]-N[j+n],ye=N[T+e]-N[j+e],ue===!0?(fe=Math.sqrt(pe*pe+ye*ye)-N[T+u]-N[j+u],$.linLogMode?$.outboundAttractionDistribution?fe>0&&(ae=-ce*Ce*Math.log(1+fe)/fe/N[T+o]):fe>0&&(ae=-ce*Ce*Math.log(1+fe)/fe):$.outboundAttractionDistribution?fe>0&&(ae=-ce*Ce/N[T+o]):fe>0&&(ae=-ce*Ce)):(fe=Math.sqrt(Math.pow(pe,2)+Math.pow(ye,2)),$.linLogMode?$.outboundAttractionDistribution?fe>0&&(ae=-ce*Ce*Math.log(1+fe)/fe/N[T+o]):fe>0&&(ae=-ce*Ce*Math.log(1+fe)/fe):$.outboundAttractionDistribution?(fe=1,ae=-ce*Ce/N[T+o]):(fe=1,ae=-ce*Ce)),fe>0&&(N[T+t]+=pe*ae,N[T+r]+=ye*ae,N[j+t]-=pe*ae,N[j+r]-=ye*ae);var Te,Pe,Fe,Be,Ke,Xe;if(ue===!0)for(I=0;I<ie;I+=v)N[I+l]!==1&&(Te=Math.sqrt(Math.pow(N[I+t],2)+Math.pow(N[I+r],2)),Te>L&&(N[I+t]=N[I+t]*L/Te,N[I+r]=N[I+r]*L/Te),Pe=N[I+o]*Math.sqrt((N[I+i]-N[I+t])*(N[I+i]-N[I+t])+(N[I+a]-N[I+r])*(N[I+a]-N[I+r])),Fe=Math.sqrt((N[I+i]+N[I+t])*(N[I+i]+N[I+t])+(N[I+a]+N[I+r])*(N[I+a]+N[I+r]))/2,Be=.1*Math.log(1+Fe)/(1+Math.sqrt(Pe)),Ke=N[I+n]+N[I+t]*(Be/$.slowDown),N[I+n]=Ke,Xe=N[I+e]+N[I+r]*(Be/$.slowDown),N[I+e]=Xe);else for(I=0;I<ie;I+=v)N[I+l]!==1&&(Pe=N[I+o]*Math.sqrt((N[I+i]-N[I+t])*(N[I+i]-N[I+t])+(N[I+a]-N[I+r])*(N[I+a]-N[I+r])),Fe=Math.sqrt((N[I+i]+N[I+t])*(N[I+i]+N[I+t])+(N[I+a]+N[I+r])*(N[I+a]+N[I+r]))/2,Be=N[I+s]*Math.log(1+Fe)/(1+Math.sqrt(Pe)),N[I+s]=Math.min(1,Math.sqrt(Be*(Math.pow(N[I+t],2)+Math.pow(N[I+r],2))/(1+Math.sqrt(Pe)))),Ke=N[I+n]+N[I+t]*(Be/$.slowDown),N[I+n]=Ke,Xe=N[I+e]+N[I+r]*(Be/$.slowDown),N[I+e]=Xe);return{}},Oa}var Ht={},wc;function $f(){if(wc)return Ht;wc=1;var n=10,e=3;return Ht.assign=function(t){t=t||{};var r=Array.prototype.slice.call(arguments).slice(1),i,a,o;for(i=0,o=r.length;i<o;i++)if(r[i])for(a in r[i])t[a]=r[i][a];return t},Ht.validateSettings=function(t){return"linLogMode"in t&&typeof t.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in t&&typeof t.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in t&&typeof t.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in t&&typeof t.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in t&&!(typeof t.scalingRatio=="number"&&t.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in t&&typeof t.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in t&&!(typeof t.gravity=="number"&&t.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in t&&!(typeof t.slowDown=="number"||t.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in t&&typeof t.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in t&&!(typeof t.barnesHutTheta=="number"&&t.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},Ht.graphToByteArrays=function(t,r){var i=t.order,a=t.size,o={},s,u=new Float32Array(i*n),l=new Float32Array(a*e);return s=0,t.forEachNode(function(d,f){o[d]=s,u[s]=f.x,u[s+1]=f.y,u[s+2]=0,u[s+3]=0,u[s+4]=0,u[s+5]=0,u[s+6]=1,u[s+7]=1,u[s+8]=f.size||1,u[s+9]=f.fixed?1:0,s+=n}),s=0,t.forEachEdge(function(d,f,g,m,w,x,S){var A=o[g],b=o[m],_=r(d,f,g,m,w,x,S);u[A+6]+=_,u[b+6]+=_,l[s]=A,l[s+1]=b,l[s+2]=_,s+=e}),{nodes:u,edges:l}},Ht.assignLayoutChanges=function(t,r,i){var a=0;t.updateEachNodeAttributes(function(o,s){return s.x=r[a],s.y=r[a+1],a+=n,i?i(o,s):s})},Ht.readGraphPositions=function(t,r){var i=0;t.forEachNode(function(a,o){r[i]=o.x,r[i+1]=o.y,i+=n})},Ht.collectLayoutChanges=function(t,r,i){for(var a=t.nodes(),o={},s=0,u=0,l=r.length;s<l;s+=n){if(i){var d=Object.assign({},t.getNodeAttributes(a[u]));d.x=r[s],d.y=r[s+1],d=i(a[u],d),o[a[u]]={x:d.x,y:d.y}}else o[a[u]]={x:r[s],y:r[s+1]};u++}return o},Ht.createWorker=function(r){var i=window.URL||window.webkitURL,a=r.toString(),o=i.createObjectURL(new Blob(["("+a+").call(this);"],{type:"text/javascript"})),s=new Worker(o);return i.revokeObjectURL(o),s},Ht}var qa,Ec;function Of(){return Ec||(Ec=1,qa={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),qa}var Fa,xc;function qf(){if(xc)return Fa;xc=1;var n=be(),e=dt().createEdgeWeightGetter,t=Db(),r=$f(),i=Of();function a(u,l,d){if(!n(l))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof d=="number"&&(d={iterations:d});var f=d.iterations;if(typeof f!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(f<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var g=e("getEdgeWeight"in d?d.getEdgeWeight:"weight").fromEntry,m=typeof d.outputReducer=="function"?d.outputReducer:null,w=r.assign({},i,d.settings),x=r.validateSettings(w);if(x)throw new Error("graphology-layout-forceatlas2: "+x.message);var S=r.graphToByteArrays(l,g),A;for(A=0;A<f;A++)t(w,S.nodes,S.edges);if(u){r.assignLayoutChanges(l,S.nodes,m);return}return r.collectLayoutChanges(l,S.nodes)}function o(u){var l=typeof u=="number"?u:u.order;return{barnesHutOptimize:l>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(l)}}var s=a.bind(null,!1);return s.assign=a.bind(null,!0),s.inferSettings=o,Fa=s,Fa}var Wa,Sc;function Cb(){return Sc||(Sc=1,Wa=qf()),Wa}var Ua,Ac;function Ib(){if(Ac)return Ua;Ac=1;var n=0,e=1,t=2,r=3;function i(o,s){return o+"§"+s}function a(){return .01*(.5-Math.random())}return Ua=function(s,u){var l=s.margin,d=s.ratio,f=s.expansion,g=s.gridSize,m=s.speed,w,x,S,A,b,_,y=!0,D=u.length,R=D/r|0,v=new Float32Array(R),C=new Float32Array(R),M=1/0,L=1/0,G=-1/0,$=-1/0;for(w=0;w<D;w+=r)S=u[w+n],A=u[w+e],_=u[w+t]*d+l,M=Math.min(M,S-_),G=Math.max(G,S+_),L=Math.min(L,A-_),$=Math.max($,A+_);var N=G-M,Y=$-L,V=(M+G)/2,F=(L+$)/2;M=V-f*N/2,G=V+f*N/2,L=F-f*Y/2,$=F+f*Y/2;var I=new Array(g*g),T=I.length,j;for(j=0;j<T;j++)I[j]=[];var X,W,q,H,J,ie,oe,ue,ne,te;for(w=0;w<D;w+=r)for(S=u[w+n],A=u[w+e],_=u[w+t]*d+l,X=S-_,W=S+_,q=A-_,H=A+_,J=Math.floor(g*(X-M)/(G-M)),ie=Math.floor(g*(W-M)/(G-M)),oe=Math.floor(g*(q-L)/($-L)),ue=Math.floor(g*(H-L)/($-L)),ne=J;ne<=ie;ne++)for(te=oe;te<=ue;te++)I[ne*g+te].push(w);var ce,pe=new Set,ye,Ce,fe,ae,Q,xe,ze,Ee,ge,ee,Ne,$e,Ge;for(j=0;j<T;j++)for(ce=I[j],w=0,b=ce.length;w<b;w++)for(ye=ce[w],fe=u[ye+n],Q=u[ye+e],ze=u[ye+t],x=w+1;x<b;x++)Ce=ce[x],ge=i(ye,Ce),!(T>1&&pe.has(ge))&&(T>1&&pe.add(ge),ae=u[Ce+n],xe=u[Ce+e],Ee=u[Ce+t],ee=ae-fe,Ne=xe-Q,$e=Math.sqrt(ee*ee+Ne*Ne),Ge=$e<ze*d+l+(Ee*d+l),Ge&&(y=!1,Ce=Ce/r|0,$e>0?(v[Ce]+=ee/$e*(1+ze),C[Ce]+=Ne/$e*(1+ze)):(v[Ce]+=N*a(),C[Ce]+=Y*a())));for(w=0,x=0;w<D;w+=r,x++)u[w+n]+=v[x]*.1*m,u[w+e]+=C[x]*.1*m;return{converged:y}},Ua}var pr={},_c;function Ff(){if(_c)return pr;_c=1;var n=3;return pr.validateSettings=function(e){return"gridSize"in e&&typeof e.gridSize!="number"||e.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in e&&typeof e.margin!="number"||e.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in e&&typeof e.expansion!="number"||e.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in e&&typeof e.ratio!="number"||e.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in e&&typeof e.speed!="number"||e.speed<=0?{message:"the `speed` setting should be a positive number."}:null},pr.graphToByteArray=function(e,t){var r=e.order,i=new Float32Array(r*n),a=0;return e.forEachNode(function(o,s){typeof t=="function"&&(s=t(o,s)),i[a]=s.x,i[a+1]=s.y,i[a+2]=s.size||1,a+=n}),i},pr.assignLayoutChanges=function(e,t,r){var i=0;e.forEachNode(function(a){var o={x:t[i],y:t[i+1]};typeof r=="function"&&(o=r(a,o)),e.mergeNodeAttributes(a,o),i+=n})},pr.collectLayoutChanges=function(e,t,r){var i={},a=0;return e.forEachNode(function(o){var s={x:t[a],y:t[a+1]};typeof r=="function"&&(s=r(o,s)),i[o]=s,a+=n}),i},pr.createWorker=function(t){var r=window.URL||window.webkitURL,i=t.toString(),a=r.createObjectURL(new Blob(["("+i+").call(this);"],{type:"text/javascript"})),o=new Worker(a);return r.revokeObjectURL(a),o},pr}var ja,kc;function Wf(){return kc||(kc=1,ja={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3}),ja}var Ba,Dc;function Uf(){if(Dc)return Ba;Dc=1;var n=be(),e=Ib(),t=Ff(),r=Wf(),i=500;function a(s,u,l){if(!n(u))throw new Error("graphology-layout-noverlap: the given graph is not a valid graphology instance.");typeof l=="number"?l={maxIterations:l}:l=l||{};var d=l.maxIterations||i;if(typeof d!="number"||d<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");var f=Object.assign({},r,l.settings),g=t.validateSettings(f);if(g)throw new Error("graphology-layout-noverlap: "+g.message);var m=t.graphToByteArray(u,l.inputReducer),w=!1,x;for(x=0;x<d&&!w;x++)w=e(f,m).converged;if(s){t.assignLayoutChanges(u,m,l.outputReducer);return}return t.collectLayoutChanges(u,m,l.outputReducer)}var o=a.bind(null,!1);return o.assign=a.bind(null,!0),Ba=o,Ba}var Ha,Cc;function Mb(){return Cc||(Cc=1,Ha=Uf()),Ha}var gr={},Tt={},Jr={},Ic;function Lb(){if(Ic)return Jr;Ic=1;var n=be();function e(a,o,s,u){var l=o+"Centrality";if(!n(s))throw new Error("graphology-centrality/"+l+": the given graph is not a valid graphology instance.");if(o!=="degree"&&s.type==="undirected")throw new Error("graphology-centrality/"+l+": cannot compute "+o+" centrality on an undirected graph.");u=u||{};var d=u.nodeCentralityAttribute||l,f=s.order-1,g=s[o].bind(s);if(a){s.updateEachNodeAttributes(function(w,x){return x[d]=g(w)/f,x},{attributes:[d]});return}var m={};return s.forEachNode(function(w){m[w]=g(w)/f}),m}var t=e.bind(null,!1,"degree"),r=e.bind(null,!1,"inDegree"),i=e.bind(null,!1,"outDegree");return t.assign=e.bind(null,!0,"degree"),r.assign=e.bind(null,!0,"inDegree"),i.assign=e.bind(null,!0,"outDegree"),Jr.degreeCentrality=t,Jr.inDegreeCentrality=r,Jr.outDegreeCentrality=i,Jr}var Wn={},Ir={},Un={},Mc;function jf(){return Mc||(Mc=1,Un.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",Un.SYMBOL_SUPPORT=typeof Symbol<"u"),Un}var Ka,Lc;function Js(){if(Lc)return Ka;Lc=1;var n=jf(),e=n.ARRAY_BUFFER_SUPPORT,t=n.SYMBOL_SUPPORT;return Ka=function(i,a){var o,s,u,l,d;if(!i)throw new Error("obliterator/forEach: invalid iterable.");if(typeof a!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(i)||e&&ArrayBuffer.isView(i)||typeof i=="string"||i.toString()==="[object Arguments]"){for(u=0,l=i.length;u<l;u++)a(i[u],u);return}if(typeof i.forEach=="function"){i.forEach(a);return}if(t&&Symbol.iterator in i&&typeof i.next!="function"&&(i=i[Symbol.iterator]()),typeof i.next=="function"){for(o=i,u=0;d=o.next(),d.done!==!0;)a(d.value,u),u++;return}for(s in i)i.hasOwnProperty(s)&&a(i[s],s)},Ka}var zc;function Si(){if(zc)return Ir;zc=1;var n=Js(),e=ur();function t(o){return Array.isArray(o)||e.isTypedArray(o)}function r(o){if(typeof o.length=="number")return o.length;if(typeof o.size=="number")return o.size}function i(o){var s=r(o),u=typeof s=="number"?new Array(s):[],l=0;return n(o,function(d){u[l++]=d}),u}function a(o){var s=r(o),u=typeof s=="number"?e.getPointerArray(s):Array,l=typeof s=="number"?new Array(s):[],d=typeof s=="number"?new u(s):[],f=0;return n(o,function(g){l[f]=g,d[f]=f++}),[l,d]}return Ir.isArrayLike=t,Ir.guessLength=r,Ir.toArray=i,Ir.toArrayWithIndices=a,Ir}var Xa,Tc;function Ai(){if(Tc)return Xa;Tc=1;var n=Si(),e=Qt();function t(r,i){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof i!="number"||i<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=r,this.capacity=i,this.items=new r(this.capacity),this.clear()}return t.prototype.clear=function(){this.start=0,this.size=0},t.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var i=this.start+this.size;return i>=this.capacity&&(i-=this.capacity),this.items[i]=r,++this.size},t.prototype.unshift=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var i=this.start-1;return this.start===0&&(i=this.capacity-1),this.items[i]=r,this.start=i,++this.size},t.prototype.pop=function(){if(this.size!==0){this.size--;var r=this.start+this.size;return r>=this.capacity&&(r-=this.capacity),this.items[r]}},t.prototype.shift=function(){if(this.size!==0){var r=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[r]}},t.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]},t.prototype.peekLast=function(){if(this.size!==0){var r=this.start+this.size-1;return r>=this.capacity&&(r-=this.capacity),this.items[r]}},t.prototype.get=function(r){if(!(this.size===0||r>=this.capacity))return r=this.start+r,r>=this.capacity&&(r-=this.capacity),this.items[r]},t.prototype.forEach=function(r,i){i=arguments.length>1?i:this;for(var a=this.capacity,o=this.size,s=this.start,u=0;u<o;)r.call(i,this.items[s],u,this),s++,u++,s===a&&(s=0)},t.prototype.toArray=function(){var r=this.start+this.size;if(r<this.capacity)return this.items.slice(this.start,r);for(var i=new this.ArrayClass(this.size),a=this.capacity,o=this.size,s=this.start,u=0;u<o;)i[u]=this.items[s],s++,u++,s===a&&(s=0);return i},t.prototype.values=function(){var r=this.items,i=this.capacity,a=this.size,o=this.start,s=0;return new e(function(){if(s>=a)return{done:!0};var u=r[o];return o++,s++,o===i&&(o=0),{value:u,done:!1}})},t.prototype.entries=function(){var r=this.items,i=this.capacity,a=this.size,o=this.start,s=0;return new e(function(){if(s>=a)return{done:!0};var u=r[o];return o++,o===i&&(o=0),{value:[s++,u],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(r,i,a){if(arguments.length<3&&(a=n.guessLength(r),typeof a!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var o=new t(i,a);if(n.isArrayLike(r)){var s,u;for(s=0,u=r.length;s<u;s++)o.items[s]=r[s];return o.size=u,o}return n.forEach(r,function(l){o.push(l)}),o},Xa=t,Xa}var Ya,Nc;function zb(){if(Nc)return Ya;Nc=1;var n=Qt(),e=Si();function t(r,i){if(arguments.length<2)throw new Error("mnemonist/fixed-stack: expecting an Array class and a capacity.");if(typeof i!="number"||i<=0)throw new Error("mnemonist/fixed-stack: `capacity` should be a positive number.");this.capacity=i,this.ArrayClass=r,this.items=new this.ArrayClass(this.capacity),this.clear()}return t.prototype.clear=function(){this.size=0},t.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-stack.push: stack capacity ("+this.capacity+") exceeded!");return this.items[this.size++]=r,this.size},t.prototype.pop=function(){if(this.size!==0)return this.items[--this.size]},t.prototype.peek=function(){return this.items[this.size-1]},t.prototype.forEach=function(r,i){i=arguments.length>1?i:this;for(var a=0,o=this.items.length;a<o;a++)r.call(i,this.items[o-a-1],a,this)},t.prototype.toArray=function(){for(var r=new this.ArrayClass(this.size),i=this.size-1,a=this.size;a--;)r[a]=this.items[i-a];return r},t.prototype.values=function(){var r=this.items,i=this.size,a=0;return new n(function(){if(a>=i)return{done:!0};var o=r[i-a-1];return a++,{value:o,done:!1}})},t.prototype.entries=function(){var r=this.items,i=this.size,a=0;return new n(function(){if(a>=i)return{done:!0};var o=r[i-a-1];return{value:[a++,o],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.toString=function(){return this.toArray().join(",")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(r,i,a){if(arguments.length<3&&(a=e.guessLength(r),typeof a!="number"))throw new Error("mnemonist/fixed-stack.from: could not guess iterable length. Please provide desired capacity as last argument.");var o=new t(i,a);if(e.isArrayLike(r)){var s,u;for(s=0,u=r.length;s<u;s++)o.items[s]=r[s];return o.size=u,o}return e.forEach(r,function(l){o.push(l)}),o},Ya=t,Ya}var Mr={},Rc;function eu(){if(Rc)return Mr;Rc=1;var n=function(i,a){return i<a?-1:i>a?1:0},e=function(i,a){return i<a?1:i>a?-1:0};function t(i){return function(a,o){return i(o,a)}}function r(i){return i===2?function(a,o){return a[0]<o[0]?-1:a[0]>o[0]?1:a[1]<o[1]?-1:a[1]>o[1]?1:0}:function(a,o){for(var s=0;s<i;){if(a[s]<o[s])return-1;if(a[s]>o[s])return 1;s++}return 0}}return Mr.DEFAULT_COMPARATOR=n,Mr.DEFAULT_REVERSE_COMPARATOR=e,Mr.reverseComparator=t,Mr.createTupleComparator=r,Mr}var Va,Gc;function tu(){if(Gc)return Va;Gc=1;var n=Js(),e=eu(),t=Si(),r=e.DEFAULT_COMPARATOR,i=e.reverseComparator;function a(A,b,_,y){for(var D=b[y],R,v;y>_;){if(R=y-1>>1,v=b[R],A(D,v)<0){b[y]=v,y=R;continue}break}b[y]=D}function o(A,b,_){for(var y=b.length,D=_,R=b[_],v=2*_+1,C;v<y;)C=v+1,C<y&&A(b[v],b[C])>=0&&(v=C),b[_]=b[v],_=v,v=2*_+1;b[_]=R,a(A,b,D,_)}function s(A,b,_){b.push(_),a(A,b,0,b.length-1)}function u(A,b){var _=b.pop();if(b.length!==0){var y=b[0];return b[0]=_,o(A,b,0),y}return _}function l(A,b,_){if(b.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var y=b[0];return b[0]=_,o(A,b,0),y}function d(A,b,_){var y;return b.length!==0&&A(b[0],_)<0&&(y=b[0],b[0]=_,_=y,o(A,b,0)),_}function f(A,b){for(var _=b.length,y=_>>1,D=y;--D>=0;)o(A,b,D)}function g(A,b){for(var _=b.length,y=0,D=new Array(_);y<_;)D[y++]=u(A,b);return D}function m(A,b,_){arguments.length===2&&(_=b,b=A,A=r);var y=i(A),D,R,v,C=1/0,M;if(b===1){if(t.isArrayLike(_)){for(D=0,R=_.length;D<R;D++)v=_[D],(C===1/0||A(v,C)<0)&&(C=v);return M=new _.constructor(1),M[0]=C,M}return n(_,function(G){(C===1/0||A(G,C)<0)&&(C=G)}),[C]}if(t.isArrayLike(_)){if(b>=_.length)return _.slice().sort(A);for(M=_.slice(0,b),f(y,M),D=b,R=_.length;D<R;D++)y(_[D],M[0])>0&&l(y,M,_[D]);return M.sort(A)}var L=t.guessLength(_);return L!==null&&L<b&&(b=L),M=new Array(b),D=0,n(_,function(G){D<b?M[D]=G:(D===b&&f(y,M),y(G,M[0])>0&&l(y,M,G)),D++}),M.length>D&&(M.length=D),M.sort(A)}function w(A,b,_){arguments.length===2&&(_=b,b=A,A=r);var y=i(A),D,R,v,C=-1/0,M;if(b===1){if(t.isArrayLike(_)){for(D=0,R=_.length;D<R;D++)v=_[D],(C===-1/0||A(v,C)>0)&&(C=v);return M=new _.constructor(1),M[0]=C,M}return n(_,function(G){(C===-1/0||A(G,C)>0)&&(C=G)}),[C]}if(t.isArrayLike(_)){if(b>=_.length)return _.slice().sort(y);for(M=_.slice(0,b),f(A,M),D=b,R=_.length;D<R;D++)A(_[D],M[0])>0&&l(A,M,_[D]);return M.sort(y)}var L=t.guessLength(_);return L!==null&&L<b&&(b=L),M=new Array(b),D=0,n(_,function(G){D<b?M[D]=G:(D===b&&f(A,M),A(G,M[0])>0&&l(A,M,G)),D++}),M.length>D&&(M.length=D),M.sort(y)}function x(A){if(this.clear(),this.comparator=A||r,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}x.prototype.clear=function(){this.items=[],this.size=0},x.prototype.push=function(A){return s(this.comparator,this.items,A),++this.size},x.prototype.peek=function(){return this.items[0]},x.prototype.pop=function(){return this.size!==0&&this.size--,u(this.comparator,this.items)},x.prototype.replace=function(A){return l(this.comparator,this.items,A)},x.prototype.pushpop=function(A){return d(this.comparator,this.items,A)},x.prototype.consume=function(){return this.size=0,g(this.comparator,this.items)},x.prototype.toArray=function(){return g(this.comparator,this.items.slice())},x.prototype.inspect=function(){var A=this.toArray();return Object.defineProperty(A,"constructor",{value:x,enumerable:!1}),A},typeof Symbol<"u"&&(x.prototype[Symbol.for("nodejs.util.inspect.custom")]=x.prototype.inspect);function S(A){if(this.clear(),this.comparator=A||r,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=i(this.comparator)}return S.prototype=x.prototype,x.from=function(A,b){var _=new x(b),y;return t.isArrayLike(A)?y=A.slice():y=t.toArray(A),f(_.comparator,y),_.items=y,_.size=y.length,_},S.from=function(A,b){var _=new S(b),y;return t.isArrayLike(A)?y=A.slice():y=t.toArray(A),f(_.comparator,y),_.items=y,_.size=y.length,_},x.siftUp=o,x.siftDown=a,x.push=s,x.pop=u,x.replace=l,x.pushpop=d,x.heapify=f,x.consume=g,x.nsmallest=m,x.nlargest=w,x.MinHeap=x,x.MaxHeap=S,Va=x,Va}var jn={},Pc;function xr(){if(Pc)return jn;Pc=1;var n=ur(),e=dt().createEdgeWeightGetter;function t(a,o){return a==="outbound"||a==="inbound"?o.directedSize+o.undirectedSize*2:a==="in"||a==="out"||a==="directed"?o.directedSize:o.undirectedSize*2}function r(a,o){o=o||"outbound";var s=a[o+"Neighbors"].bind(a),u=t(o,a),l=n.getPointerArray(u),d=n.getPointerArray(a.order);this.graph=a,this.neighborhood=new d(u),this.starts=new l(a.order+1),this.nodes=a.nodes();var f={},g,m,w,x,S,A,b=0;for(g=0,m=a.order;g<m;g++)f[this.nodes[g]]=g;for(g=0,m=a.order;g<m;g++)for(S=this.nodes[g],A=s(S),this.starts[g]=b,w=0,x=A.length;w<x;w++)this.neighborhood[b++]=f[A[w]];this.starts[g]=u}r.prototype.bounds=function(a){return[this.starts[a],this.starts[a+1]]},r.prototype.project=function(){var a=this,o={};return a.nodes.forEach(function(s,u){o[s]=Array.from(a.neighborhood.slice(a.starts[u],a.starts[u+1])).map(function(l){return a.nodes[l]})}),o},r.prototype.collect=function(a){var o,s,u={};for(o=0,s=a.length;o<s;o++)u[this.nodes[o]]=a[o];return u},r.prototype.assign=function(a,o){var s=0;this.graph.updateEachNodeAttributes(function(u,l){return l[a]=o[s++],l},{attributes:[a]})},jn.NeighborhoodIndex=r;function i(a,o,s){s=s||"outbound";var u=a[s+"Edges"].bind(a),l=t(s,a),d=n.getPointerArray(l),f=n.getPointerArray(a.order),g=e(o).fromMinimalEntry;this.graph=a,this.neighborhood=new f(l),this.weights=new Float64Array(l),this.outDegrees=new Float64Array(a.order),this.starts=new d(a.order+1),this.nodes=a.nodes();var m={},w,x,S,A,b,_,y,D,R,v=0;for(w=0,x=a.order;w<x;w++)m[this.nodes[w]]=w;for(w=0,x=a.order;w<x;w++)for(b=this.nodes[w],y=u(b),this.starts[w]=v,S=0,A=y.length;S<A;S++)D=y[S],_=a.opposite(b,D),R=g(D,a.getEdgeAttributes(D)),this.neighborhood[v]=m[_],this.weights[v++]=R,this.outDegrees[w]+=R;this.starts[w]=l}return i.prototype.bounds=r.prototype.bounds,i.prototype.project=r.prototype.project,i.prototype.collect=r.prototype.collect,i.prototype.assign=r.prototype.assign,jn.WeightedNeighborhoodIndex=i,jn}var $c;function Bf(){if($c)return Wn;$c=1;var n=Ai(),e=zb(),t=tu(),r=ur(),i=xr(),a=i.NeighborhoodIndex,o=i.WeightedNeighborhoodIndex;Wn.createUnweightedIndexedBrandes=function(l){var d=new a(l),f=d.neighborhood,g=d.starts,m=l.order,w=new e(r.getPointerArray(m),m),x=new Uint32Array(m),S=new Array(m),A=new Int32Array(m),b=new n(Uint32Array,m),_=function(y){var D,R,v,C,M,L,G;for(L=0;L<m;L++)S[L]=[],x[L]=0,A[L]=-1;for(x[y]=1,A[y]=0,b.push(y);b.size!==0;)for(L=b.shift(),w.push(L),D=A[L],R=x[L],v=g[L],C=g[L+1],M=v;M<C;M++)G=f[M],A[G]===-1&&(b.push(G),A[G]=D+1),A[G]===D+1&&(x[G]+=R,S[G].push(L));return[w,S,x]};return _.index=d,_};function s(u,l){return u[0]>l[0]?1:u[0]<l[0]?-1:u[1]>l[1]?1:u[1]<l[1]?-1:u[2]>l[2]?1:u[2]<l[2]?-1:u[3]>l[3]?1:u[3]<l[3]?-1:0}return Wn.createDijkstraIndexedBrandes=function(l,d){var f=new o(l,d||"weight"),g=f.neighborhood,m=f.weights,w=f.starts,x=l.order,S=new e(r.getPointerArray(x),x),A=new Uint32Array(x),b=new Array(x),_=new Float64Array(x),y=new Float64Array(x),D=new t(s),R=function(v){var C,M,L,G,$,N,Y,V,F,I=0;for(V=0;V<x;V++)b[V]=[],A[V]=0,_[V]=-1,y[V]=-1;for(A[v]=1,y[v]=0,D.push([0,I++,v,v]);D.size!==0;)if(L=D.pop(),G=L[0],$=L[2],V=L[3],_[V]===-1)for(S.push(V),_[V]=G,A[V]+=A[$],C=w[V],M=w[V+1],Y=C;Y<M;Y++)F=g[Y],N=G+m[Y],_[F]===-1&&(y[F]===-1||N<y[F])?(y[F]=N,D.push([N,I++,V,F]),A[F]=0,b[F]=[V]):N===y[F]&&(A[F]+=A[V],b[F].push(V));return[S,b,A]};return R.index=f,R},Wn}var Qa,Oc;function Tb(){if(Oc)return Qa;Oc=1;var n=be(),e=Bf(),t=je(),r=e.createUnweightedIndexedBrandes,i=e.createDijkstraIndexedBrandes,a={nodeCentralityAttribute:"betweennessCentrality",getEdgeWeight:"weight",normalized:!0};function o(u,l,d){if(!n(l))throw new Error("graphology-centrality/beetweenness-centrality: the given graph is not a valid graphology instance.");d=t(d,a);var f=d.nodeCentralityAttribute,g=d.normalized,m=d.getEdgeWeight?i(l,d.getEdgeWeight):r(l),w=l.order,x,S,A,b,_,y,D,R,v,C,M=new Float64Array(w),L=new Float64Array(w);for(y=0;y<w;y++){for(x=m(y),S=x[0],A=x[1],b=x[2],D=S.size;D--;)M[S.items[S.size-D]]=0;for(;S.size!==0;){for(C=S.pop(),_=(1+M[C])/b[C],D=0,R=A[C].length;D<R;D++)v=A[C][D],M[v]+=b[v]*_;C!==y&&(L[C]+=M[C])}}var G=null;if(g?G=w<=2?null:1/((w-1)*(w-2)):G=l.type==="undirected"?.5:null,G!==null)for(y=0;y<w;y++)L[y]*=G;return u?m.index.assign(f,L):m.index.collect(L)}var s=o.bind(null,!1);return s.assign=o.bind(null,!0),Qa=s,Qa}var Za,qc;function Hf(){if(qc)return Za;qc=1;var n=Qt(),e=ur().getPointerArray;function t(r){var i=e(r);this.size=0,this.length=r,this.dense=new i(r),this.sparse=new i(r)}return t.prototype.clear=function(){this.size=0},t.prototype.has=function(r){var i=this.sparse[r];return i<this.size&&this.dense[i]===r},t.prototype.add=function(r){var i=this.sparse[r];return i<this.size&&this.dense[i]===r?this:(this.dense[this.size]=r,this.sparse[r]=this.size,this.size++,this)},t.prototype.delete=function(r){var i=this.sparse[r];return i>=this.size||this.dense[i]!==r?!1:(i=this.dense[this.size-1],this.dense[this.sparse[r]]=i,this.sparse[i]=this.sparse[r],this.size--,!0)},t.prototype.forEach=function(r,i){i=arguments.length>1?i:this;for(var a,o=0;o<this.size;o++)a=this.dense[o],r.call(i,a,a)},t.prototype.values=function(){var r=this.size,i=this.dense,a=0;return new n(function(){if(a<r){var o=i[a];return a++,{value:o}}return{done:!0}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.inspect=function(){for(var r=new Set,i=0;i<this.size;i++)r.add(this.dense[i]);return Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r.length=this.length,r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),Za=t,Za}var Ja,Fc;function Nb(){if(Fc)return Ja;Fc=1;var n=be(),e=je(),t=Ai(),r=Hf(),i=xr().NeighborhoodIndex,a={nodeCentralityAttribute:"closenessCentrality",wassermanFaust:!1};function o(l){this.index=new i(l,"inbound"),this.queue=new t(Array,l.order),this.seen=new r(l.order)}o.prototype.fromNode=function(l){var d=this.index,f=this.queue,g=this.seen;g.clear(),f.clear(),g.add(l),f.push([l,0]);for(var m,w,x,S,A,b,_=0,y=0;f.size!==0;)for(m=f.shift(),w=m[0],x=m[1],x!==0&&(_+=x,y+=1),A=d.starts[w+1],S=d.starts[w];S<A;S++)b=d.neighborhood[S],!g.has(b)&&(g.add(b),f.push([b,x+1]));return[y,_]};function s(l,d,f){if(!n(d))throw new Error("graphology-metrics/centrality/closeness: the given graph is not a valid graphology instance.");f=e(f,a);var g=f.wassermanFaust,m=new o(d),w=d.order,x,S,A,b,_,y=new Float64Array(w);for(x=0;x<w;x++)S=m.fromNode(x),A=S[0],b=S[1],_=0,b>0&&w>1&&(_=A/b,g&&(_*=A/(w-1))),y[x]=_;return l?m.index.assign(f.nodeCentralityAttribute,y):m.index.collect(y)}var u=s.bind(null,!1);return u.assign=s.bind(null,!0),Ja=u,Ja}var eo,Wc;function Rb(){if(Wc)return eo;Wc=1;var n=be(),e=je(),t=xr().WeightedNeighborhoodIndex,r={nodeCentralityAttribute:"eigenvectorCentrality",getEdgeWeight:"weight",maxIterations:100,tolerance:1e-6};function i(s){for(var u=0,l=0,d=0,f=s.length;d<f;d++){var g=Math.abs(s[d]);g>u&&(l*=u/g*(u/g),u=g),l+=g===0&&u===0?0:g/u*(g/u)}return u===1/0?1:u*Math.sqrt(l)}function a(s,u,l){if(!n(u))throw new Error("graphology-metrics/centrality/eigenvector: the given graph is not a valid graphology instance.");l=e(l,r);var d=l.maxIterations,f=l.tolerance,g=u.order,m=new t(u,l.getEdgeWeight),w,x,S,A,b=new Float64Array(u.order);for(w=0;w<g;w++)b[w]=1/g;for(var _=0,y=0,D,R,v,C=!1;_<d;){for(R=b,b=new Float64Array(R),w=0;w<g;w++)for(S=m.starts[w+1],x=m.starts[w];x<S;x++)D=m.neighborhood[x],A=m.weights[x],b[D]+=R[w]*A;for(v=i(b),w=0;w<g;w++)b[w]/=v;for(y=0,w=0;w<g;w++)y+=Math.abs(b[w]-R[w]);if(y<g*f){C=!0;break}_++}if(!C)throw Error("graphology-metrics/centrality/eigenvector: failed to converge.");if(s){m.assign(l.nodeCentralityAttribute,b);return}return m.collect(b)}var o=a.bind(null,!1);return o.assign=a.bind(null,!0),eo=o,eo}var to,Uc;function Gb(){if(Uc)return to;Uc=1;var n=je(),e=be(),t=dt().createEdgeWeightGetter,r={nodeAuthorityAttribute:"authority",nodeHubAttribute:"hub",getEdgeWeight:"weight",maxIterations:100,normalize:!0,tolerance:1e-8};function i(u,l){var d=Object.create(null),f,g;for(f=0,g=u.length;f<g;f++)d[u[f]]=l;return d}function a(u){var l=0;for(var d in u)l+=u[d];return l}function o(u,l,d){if(!e(l))throw new Error("graphology-hits: the given graph is not a valid graphology instance.");if(l.multi)throw new Error("graphology-hits: the HITS algorithm does not work with MultiGraphs.");d=n(d,r);var f=t(d.getEdgeWeight).fromEntry,g=l.order,m=l.nodes(),w,x=i(m,1/g),S={},A=!1,b,_,y,D,R,v,C,M,L,G,$,N,Y;for(l.forEachEdge(function(V,F,I,T,j,X,W){S[V]=f(V,F,I,T,j,X,W)}),v=0;v<d.maxIterations;v++){for(b=x,x=i(m,0),_=i(m,0),M=0,C=0,$=0;$<g;$++)for(y=m[$],w=l.outboundEdges(y),N=0,Y=w.length;N<Y;N++)R=w[N],D=l.opposite(y,R),_[D]+=b[y]*S[R],_[D]>C&&(C=_[D]);for($=0;$<g;$++)for(y=m[$],w=l.outboundEdges(y),N=0,Y=w.length;N<Y;N++)R=w[N],D=l.opposite(y,R),x[y]+=_[D]*S[R],x[D]>M&&(M=x[D]);G=1/M;for(y in x)x[y]*=G;G=1/C;for(y in _)_[y]*=G;L=0;for(y in x)L+=Math.abs(x[y]-b[y]);if(L<d.tolerance){A=!0;break}}if(!A)throw Error("graphology-metrics/centrality/hits: failed to converge.");if(d.normalize){G=1/a(_);for(y in _)_[y]*=G;G=1/a(x);for(y in x)x[y]*=G}if(u){l.updateEachNodeAttributes(function(V,F){return F[d.nodeAuthorityAttribute]=_[V],F[d.nodeHubAttribute]=x[V],F},{attributes:[d.nodeAuthorityAttribute,d.nodeHubAttribute]});return}return{hubs:x,authorities:_}}var s=o.bind(null,!1);return s.assign=o.bind(null,!0),to=s,to}var ro,jc;function Pb(){if(jc)return ro;jc=1;var n=be(),e=je(),t=xr().WeightedNeighborhoodIndex,r={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function i(o,s,u){if(!n(s))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");u=e(u,r);var l=u.alpha,d=u.maxIterations,f=u.tolerance,g=u.nodePagerankAttribute,m=s.order,w=1/m,x=new t(s,u.getEdgeWeight),S,A,b,_,y=new Float64Array(s.order),D=new Float64Array(x.weights.length),R=[];for(S=0;S<m;S++)for(y[S]=w,b=x.starts[S+1],_=x.outDegrees[S],_===0&&R.push(S),A=x.starts[S];A<b;A++)D[A]=x.weights[A]/_;for(var v=0,C=0,M,L,G,$=!1;v<d;){for(G=y,y=new Float64Array(s.order),M=0,S=0,b=R.length;S<b;S++)M+=G[R[S]];for(M*=l,S=0;S<m;S++){for(b=x.starts[S+1],A=x.starts[S];A<b;A++)L=x.neighborhood[A],y[L]+=l*G[S]*D[A];y[S]+=M*w+(1-l)*w}for(C=0,S=0;S<m;S++)C+=Math.abs(y[S]-G[S]);if(C<m*f){$=!0;break}v++}if(!$)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(o){x.assign(g,y);return}return x.collect(y)}var a=i.bind(null,!1);return a.assign=i.bind(null,!0),ro=a,ro}var Bc;function $b(){if(Bc)return Tt;Bc=1;var n=Lb();return Tt.betweenness=Tb(),Tt.closeness=Nb(),Tt.eigenvector=Rb(),Tt.hits=Gb(),Tt.pagerank=Pb(),Tt.degree=n.degreeCentrality,Tt.inDegree=n.inDegreeCentrality,Tt.outDegree=n.outDegreeCentrality,Tt}var Bn={},no,Hc;function Ob(){if(Hc)return no;Hc=1;var n=be(),e=Er(),t=je(),r=dt().createEdgeWeightGetter,i={edgeDisparityAttribute:"disparity",getEdgeWeight:"weight"};function a(s,u,l){if(!n(u))throw new Error("graphology-metrics/edge/disparity: the given graph is not a valid graphology instance.");if(u.multi||e(u)==="mixed")throw new Error("graphology-metrics/edge/disparity: not defined for multi nor mixed graphs.");l=t(l,i);var d=r(l.getEdgeWeight).fromEntry,f={};u.forEachNode(function(S){f[S]=0}),u.forEachAssymetricAdjacencyEntry(function(S,A,b,_,y,D,R){var v=d(y,D,S,A,b,_,R);f[S]+=v,f[A]+=v});var g,m,w,x={};if(u.forEachAssymetricAdjacencyEntry(function(S,A,b,_,y,D,R){var v=d(y,D,S,A,b,_,R);g!==S&&(g=S,m=u.degree(S),w=f[S]);var C=u.degree(A),M=f[A],L=v/w,G=v/M,$=Math.pow(1-L,m-1),N=Math.pow(1-G,C-1);x[y]=Math.min($,N)}),s){u.updateEachEdgeAttributes(function(S,A){return A[l.edgeDisparityAttribute]=x[S],A},{attributes:[l.edgeDisparityAttribute]});return}return x}var o=a.bind(null,!1);return o.assign=a.bind(null,!0),no=o,no}var io={},Kc;function _i(){return Kc||(Kc=1,function(n){n.intersection=function(){if(arguments.length<2)throw new Error("mnemonist/Set.intersection: needs at least two arguments.");var e=new Set,t=1/0,r=null,i,a,o=arguments.length;for(a=0;a<o;a++){if(i=arguments[a],i.size===0)return e;i.size<t&&(t=i.size,r=i)}for(var s=r.values(),u,l,d,f;u=s.next(),!u.done;){for(l=u.value,d=!0,a=0;a<o;a++)if(f=arguments[a],f!==r&&!f.has(l)){d=!1;break}d&&e.add(l)}return e},n.union=function(){if(arguments.length<2)throw new Error("mnemonist/Set.union: needs at least two arguments.");var e=new Set,t,r=arguments.length,i,a;for(t=0;t<r;t++)for(i=arguments[t].values();a=i.next(),!a.done;)e.add(a.value);return e},n.difference=function(e,t){if(!e.size)return new Set;if(!t.size)return new Set(e);for(var r=new Set,i=e.values(),a;a=i.next(),!a.done;)t.has(a.value)||r.add(a.value);return r},n.symmetricDifference=function(e,t){for(var r=new Set,i=e.values(),a;a=i.next(),!a.done;)t.has(a.value)||r.add(a.value);for(i=t.values();a=i.next(),!a.done;)e.has(a.value)||r.add(a.value);return r},n.isSubset=function(e,t){var r=e.values(),i;if(e===t)return!0;if(e.size>t.size)return!1;for(;i=r.next(),!i.done;)if(!t.has(i.value))return!1;return!0},n.isSuperset=function(e,t){return n.isSubset(t,e)},n.add=function(e,t){for(var r=t.values(),i;i=r.next(),!i.done;)e.add(i.value)},n.subtract=function(e,t){for(var r=t.values(),i;i=r.next(),!i.done;)e.delete(i.value)},n.intersect=function(e,t){for(var r=e.values(),i;i=r.next(),!i.done;)t.has(i.value)||e.delete(i.value)},n.disjunct=function(e,t){for(var r=e.values(),i,a=[];i=r.next(),!i.done;)t.has(i.value)&&a.push(i.value);for(r=t.values();i=r.next(),!i.done;)e.has(i.value)||e.add(i.value);for(var o=0,s=a.length;o<s;o++)e.delete(a[o])},n.intersectionSize=function(e,t){var r;if(e.size>t.size&&(r=e,e=t,t=r),e.size===0)return 0;if(e===t)return e.size;for(var i=e.values(),a,o=0;a=i.next(),!a.done;)t.has(a.value)&&o++;return o},n.unionSize=function(e,t){var r=n.intersectionSize(e,t);return e.size+t.size-r},n.jaccard=function(e,t){var r=n.intersectionSize(e,t);if(r===0)return 0;var i=e.size+t.size-r;return r/i},n.overlap=function(e,t){var r=n.intersectionSize(e,t);return r===0?0:r/Math.min(e.size,t.size)}}(io)),io}var ao,Xc;function qb(){if(Xc)return ao;Xc=1;var n=be(),e=_i().intersectionSize;function t(i,a){if(!n(a))throw new Error("graphology-metrics/simmelian-strength: given graph is not a valid graphology instance.");var o={};if(a.forEachNode(function(u){o[u]=new Set(a.neighbors(u))}),!i){var s={};return a.forEachEdge(function(u,l,d,f){s[u]=e(o[d],o[f])}),s}a.updateEachEdgeAttributes(function(u,l,d,f){return l.simmelianStrength=e(o[d],o[f]),l},{attributes:["simmelianStrength"]})}var r=t.bind(null,!1);return r.assign=t.bind(null,!0),ao=r,ao}var Yc;function Fb(){return Yc||(Yc=1,Bn.disparity=Ob(),Bn.simmelianStrength=qb()),Bn}var Qe={},Nt={},oo,Vc;function Kf(){if(Vc)return oo;Vc=1;var n=be();return oo=function(t){if(!n(t))throw new Error("graphology-metrics/simple-size: the given graph is not a valid graphology instance.");if(!t.multi)return t.size;var r=0,i=0;function a(){r++}function o(){i++}return t.forEachNode(function(s){t.type!=="directed"&&t.forEachUndirectedNeighbor(s,a),t.type!=="undirected"&&t.forEachOutNeighbor(s,o)}),r/2+i},oo}var Qc;function Wb(){if(Qc)return Nt;Qc=1;var n=be(),e=Kf();function t(o,s){return 2*s/(o*(o-1))}function r(o,s){return s/(o*(o-1))}function i(o,s){var u=o*(o-1);return s/(u+u/2)}function a(o,s,u){var l,d;if(arguments.length>3){if(l=u,d=arguments[3],typeof l!="number"||l<0)throw new Error("graphology-metrics/density: given order is not a valid number.");if(typeof d!="number"||d<0)throw new Error("graphology-metrics/density: given size is not a valid number.")}else{if(!n(u))throw new Error("graphology-metrics/density: given graph is not a valid graphology instance.");l=u.order,d=u.size,u.multi&&s===!1&&(d=e(u))}if(l<2)return 0;o===null&&(o=u.type),s===null&&(s=u.multi);var f;return o==="undirected"?f=t:o==="directed"?f=r:f=i,f(l,d)}return Nt.abstractDensity=a,Nt.density=a.bind(null,null,null),Nt.directedDensity=a.bind(null,"directed",!1),Nt.undirectedDensity=a.bind(null,"undirected",!1),Nt.mixedDensity=a.bind(null,"mixed",!1),Nt.multiDirectedDensity=a.bind(null,"directed",!0),Nt.multiUndirectedDensity=a.bind(null,"undirected",!0),Nt.multiMixedDensity=a.bind(null,"mixed",!0),Nt}var Hn={},Zc;function Ub(){if(Zc)return Hn;Zc=1;var n=be();function e(r,i){if(!n(r))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var a=[].concat(i),o,s,u,l={};for(u=0;u<a.length;u++)s=a[u],l[s]=[1/0,-1/0];return r.forEachNode(function(d,f){for(u=0;u<a.length;u++)s=a[u],o=f[s],o<l[s][0]&&(l[s][0]=o),o>l[s][1]&&(l[s][1]=o)}),typeof i=="string"?l[i]:l}function t(r,i){if(!n(r))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var a=[].concat(i),o,s,u,l={};for(u=0;u<a.length;u++)s=a[u],l[s]=[1/0,-1/0];return r.forEachEdge(function(d,f){for(u=0;u<a.length;u++)s=a[u],o=f[s],o<l[s][0]&&(l[s][0]=o),o>l[s][1]&&(l[s][1]=o)}),typeof i=="string"?l[i]:l}return Hn.nodeExtent=e,Hn.edgeExtent=t,Hn}var vr={},so,Jc;function jb(){if(Jc)return so;Jc=1;var n=Qt(),e=Js();function t(){this.clear()}return t.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},t.prototype.enqueue=function(r){return this.items.push(r),++this.size},t.prototype.dequeue=function(){if(this.size){var r=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,r}},t.prototype.peek=function(){if(this.size)return this.items[this.offset]},t.prototype.forEach=function(r,i){i=arguments.length>1?i:this;for(var a=this.offset,o=0,s=this.items.length;a<s;a++,o++)r.call(i,this.items[a],o,this)},t.prototype.toArray=function(){return this.items.slice(this.offset)},t.prototype.values=function(){var r=this.items,i=this.offset;return new n(function(){if(i>=r.length)return{done:!0};var a=r[i];return i++,{value:a,done:!1}})},t.prototype.entries=function(){var r=this.items,i=this.offset,a=0;return new n(function(){if(i>=r.length)return{done:!0};var o=r[i];return i++,{value:[a++,o],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.toString=function(){return this.toArray().join(",")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(r){var i=new t;return e(r,function(a){i.enqueue(a)}),i},t.of=function(){return t.from(arguments)},so=t,so}var uo,eh;function Bb(){return eh||(eh=1,uo=function(e,t){var r=t.length;if(r!==0){var i=e.length;e.length+=r;for(var a=0;a<r;a++)e[i+a]=t[a]}}),uo}var th;function bn(){if(th)return vr;th=1;var n=be(),e=jb(),t=Bb();function r(l,d,f){if(!n(l))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!l.hasNode(d))throw new Error('graphology-shortest-path: the "'+d+'" source node does not exist in the given graph.');if(!l.hasNode(f))throw new Error('graphology-shortest-path: the "'+f+'" target node does not exist in the given graph.');if(d=""+d,f=""+f,d===f)return[d];var g=l.inboundNeighbors.bind(l),m=l.outboundNeighbors.bind(l),w={},x={};w[d]=null,x[f]=null;var S=[d],A=[f],b,_,y,D,R,v,C,M,L=!1;e:for(;S.length&&A.length;)if(S.length<=A.length){for(b=S,S=[],R=0,C=b.length;R<C;R++)for(_=b[R],y=m(_),v=0,M=y.length;v<M;v++)if(D=y[v],D in w||(S.push(D),w[D]=_),D in x){L=!0;break e}}else for(b=A,A=[],R=0,C=b.length;R<C;R++)for(_=b[R],y=g(_),v=0,M=y.length;v<M;v++)if(D=y[v],D in x||(A.push(D),x[D]=_),D in w){L=!0;break e}if(!L)return null;for(var G=[];D;)G.unshift(D),D=w[D];for(D=x[G[G.length-1]];D;)G.push(D),D=x[D];return G.length?G:null}function i(l,d){if(!n(l))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!l.hasNode(d))throw new Error('graphology-shortest-path: the "'+d+'" source node does not exist in the given graph.');d=""+d;var f={},g={},m,w,x,S,A,b;for(f[d]=!0,g[d]=[d];Object.keys(f).length;){m=f,f={};for(x in m)for(w=l.outboundNeighbors(x),A=0,b=w.length;A<b;A++)S=w[A],g[S]||(g[S]=g[x].concat(S),f[S]=!0)}return g}function a(l,d,f){if(!n(d))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!d.hasNode(f))throw new Error('graphology-shortest-path: the "'+f+'" source node does not exist in the given graph.');f=""+f;var g=new Set,m={},w=0;m[f]=0;for(var x=[f],S,A,b;x.length!==0;){var _=[];for(S=0,A=x.length;S<A;S++)b=x[S],!g.has(b)&&(g.add(b),t(_,d[l](b)),m[b]=w);w++,x=_}return m}var o=a.bind(null,"outboundNeighbors"),s=a.bind(null,"neighbors");function u(l,d){d=""+d;var f=[],g={},m={},w=l.nodes(),x,S,A,b,_,y,D,R,v;for(y=0,R=w.length;y<R;y++)b=w[y],g[b]=[],m[b]=0;var C={};m[d]=1,C[d]=0;for(var M=e.of(d);M.size;)for(b=M.dequeue(),f.push(b),x=C[b],S=m[b],A=l.outboundNeighbors(b),D=0,v=A.length;D<v;D++)_=A[D],_ in C||(M.enqueue(_),C[_]=x+1),C[_]===x+1&&(m[_]+=S,g[_].push(b));return[f,g,m]}return vr.bidirectional=r,vr.singleSource=i,vr.singleSourceLength=o,vr.undirectedSingleSourceLength=s,vr.brandes=u,vr}var lo,rh;function Xf(){if(rh)return lo;rh=1;var n=be(),e=bn().singleSourceLength;return lo=function(r,i){if(!n(r))throw new Error("graphology-metrics/eccentricity: given graph is not a valid graphology instance.");if(r.size===0)return 1/0;var a=-1/0,o=e(r,i),s,u,l=0;for(s in o)u=o[s],u>a&&(a=u),l++;return l<r.order?1/0:a},lo}var co,nh;function Hb(){if(nh)return co;nh=1;var n=be(),e=Xf();return co=function(r){if(!n(r))throw new Error("graphology-metrics/diameter: given graph is not a valid graphology instance.");if(r.size===0)return 1/0;var i=-1/0;return r.someNode(function(a){var o=e(r,a);return o>i&&(i=o),i===1/0}),i},co}var ho,ih;function Kb(){if(ih)return ho;ih=1;var n=je(),e=be(),t=Er(),r=dt(),i={getNodeCommunity:"community",getEdgeWeight:"weight",resolution:1};function a(b,_){var y=new Array(b.order),D=new Float64Array(b.order),R={},v=0,C=r.createEdgeWeightGetter(_.getEdgeWeight).fromEntry,M=r.createNodeValueGetter(_.getNodeCommunity).fromEntry,L=0,G={};return b.forEachNode(function($,N){G[$]=L,y[L++]=M($,N)}),b.forEachUndirectedEdge(function($,N,Y,V,F,I,T){var j=C($,N,Y,V,F,I,T);v+=j,R[$]=j,D[G[Y]]+=j,Y!==V&&(D[G[V]]+=j)}),{weights:R,communities:y,weightedDegrees:D,M:v}}function o(b,_){var y=new Array(b.order),D=new Float64Array(b.order),R=new Float64Array(b.order),v={},C=0,M=r.createEdgeWeightGetter(_.getEdgeWeight).fromEntry,L=r.createNodeValueGetter(_.getNodeCommunity).fromEntry,G=0,$={};return b.forEachNode(function(N,Y){$[N]=G,y[G++]=L(N,Y)}),b.forEachDirectedEdge(function(N,Y,V,F,I,T,j){var X=M(N,Y,V,F,I,T,j);C+=X,v[N]=X,R[$[V]]+=X,D[$[F]]+=X}),{weights:v,communities:y,weightedInDegrees:D,weightedOutDegrees:R,M:C}}function s(b,_){var y=_.resolution,D=a(b,_),R=D.communities,v=D.weightedDegrees,C=D.M,M=b.nodes(),L,G,$,N,Y,V,F=0,I=C*2;for(L=0,$=b.order;L<$;L++)for(G=0;G<$;G++)R[L]===R[G]&&(V=b.undirectedEdge(M[L],M[G]),N=D.weights[V]||0,Y=v[L]*v[G],L===G&&typeof V<"u"?F+=(N-Y/I*y)*2:F+=N-Y/I*y);return F/I}function u(b,_){var y=_.resolution,D=o(b,_),R=D.communities,v=D.weightedInDegrees,C=D.weightedOutDegrees,M=D.M,L=b.nodes(),G,$,N,Y,V,F,I=0;for(G=0,N=b.order;G<N;G++)for($=0;$<N;$++)R[G]===R[$]&&(F=b.directedEdge(L[G],L[$]),Y=D.weights[F]||0,V=v[G]*C[$],I+=Y-V/M*y);return I/M}function l(b,_){var y={},D={},R={},v=r.createNodeValueGetter(_.getNodeCommunity).fromEntry;return b.forEachNode(function(C,M){var L=v(C,M);if(y[C]=L,typeof L>"u")throw new Error('graphology-metrics/modularity: the "'+C+'" node is not in the partition.');D[L]=0,R[L]=0}),{communities:y,totalWeights:D,internalWeights:R}}function d(b,_){var y={},D={},R={},v={},C=r.createNodeValueGetter(_.getNodeCommunity).fromEntry;return b.forEachNode(function(M,L){var G=C(M,L);if(y[M]=G,typeof G>"u")throw new Error('graphology-metrics/modularity: the "'+M+'" node is not in the partition.');D[G]=0,R[G]=0,v[G]=0}),{communities:y,totalInWeights:D,totalOutWeights:R,internalWeights:v}}function f(b,_){var y=_.resolution,D=l(b,_),R=0,v=D.totalWeights,C=D.internalWeights,M=D.communities,L=r.createEdgeWeightGetter(_.getEdgeWeight).fromEntry;b.forEachUndirectedEdge(function(Y,V,F,I,T,j,X){var W=L(Y,V,F,I,T,j,X);R+=W;var q=M[F],H=M[I];v[q]+=W,v[H]+=W,q===H&&(C[q]+=W*2)});var G=0,$=R*2;for(var N in C)G+=C[N]/$-Math.pow(v[N]/$,2)*y;return G}function g(b,_){var y=_.resolution,D=d(b,_),R=0,v=D.totalInWeights,C=D.totalOutWeights,M=D.internalWeights,L=D.communities,G=r.createEdgeWeightGetter(_.getEdgeWeight).fromEntry;b.forEachDirectedEdge(function(Y,V,F,I,T,j,X){var W=G(Y,V,F,I,T,j,X);R+=W;var q=L[F],H=L[I];C[q]+=W,v[H]+=W,q===H&&(M[q]+=W)});var $=0;for(var N in M)$+=M[N]/R-v[N]*C[N]/Math.pow(R,2)*y;return $}function m(b,_,y,D){return D/(2*b)-_*y/(2*(b*b))}function w(b,_,y,D,R,v){return v/b-(R*_+D*y)/(b*b)}function x(b,_){if(!e(b))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(b.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(b.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var y=t(b);if(y==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return _=n(_,i),y==="directed"?u(b,_):s(b,_)}function S(b,_){if(!e(b))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(b.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(b.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var y=t(b);if(y==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return _=n(_,i),y==="directed"?g(b,_):f(b,_)}var A=S;return A.sparse=S,A.dense=x,A.undirectedDelta=m,A.directedDelta=w,ho=A,ho}var fo,ah;function Xb(){if(ah)return fo;ah=1;var n=be(),e=dt().createEdgeWeightGetter,t="weight";return fo=function(i,a){if(!n(i))throw new Error("graphology-metrics/weighted-size: the given graph is not a valid graphology instance.");a=e(a||t).fromEntry;var o=0;return i.forEachEdge(function(s,u,l,d,f,g,m){o+=a(s,u,l,d,f,g,m)}),o},fo}var oh;function Yb(){if(oh)return Qe;oh=1;var n=Wb(),e=Ub();return Qe.diameter=Hb(),Qe.modularity=Kb(),Qe.simpleSize=Kf(),Qe.weightedSize=Xb(),Qe.abstractDensity=n.abstractDensity,Qe.density=n.density,Qe.directedDensity=n.directedDensity,Qe.undirectedDensity=n.undirectedDensity,Qe.mixedDensity=n.mixedDensity,Qe.multiDirectedDensity=n.multiDirectedDensity,Qe.multiUndirectedDensity=n.multiUndirectedDensity,Qe.multiMixedDensity=n.multiMixedDensity,Qe.nodeExtent=e.nodeExtent,Qe.edgeExtent=e.edgeExtent,Qe}var en={},po,sh;function Vb(){if(sh)return po;sh=1;var n=be();function e(t,r){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}return po=function(r){if(!n(r))throw new Error("graphology-metrics/layout-quality/edge-uniformity: given graph is not a valid graphology instance.");if(r.size===0)return 0;var i=0,a=0,o,s=new Float64Array(r.size);r.forEachEdge(function(f,g,m,w,x,S){var A=e(x,S);s[a++]=A,i+=A});var u=i/r.size,l=0;for(a=0,o=r.size;a<o;a++)l+=Math.pow(u-s[a],2);var d=l/(r.size*Math.pow(u,2));return Math.sqrt(d)},po}var go,uh;function Qb(){if(uh)return go;uh=1;var n=eu(),e=tu(),t=n.DEFAULT_COMPARATOR,r=n.reverseComparator;function i(s,u,l,d){for(var f=l,g=d,m=u[d],w=2*d+1,x;w<f;)x=w+1,x<f&&s(u[w],u[x])>=0&&(w=x),u[d]=u[w],d=w,w=2*d+1;u[d]=m,e.siftDown(s,u,g,d)}function a(s,u,l,d){for(var f=d,g=f,m=new s(d),w,x;g>0;)w=l[--g],g!==0&&(x=l[0],l[0]=w,i(u,l,--d,0),w=x),m[g]=w;return m}function o(s,u,l){if(arguments.length===2&&(l=u,u=null),this.ArrayClass=s,this.capacity=l,this.items=new s(l),this.clear(),this.comparator=u||t,typeof l!="number"&&l<=0)throw new Error("mnemonist/FixedReverseHeap.constructor: capacity should be a number > 0.");if(typeof this.comparator!="function")throw new Error("mnemonist/FixedReverseHeap.constructor: given comparator should be a function.");this.comparator=r(this.comparator)}return o.prototype.clear=function(){this.size=0},o.prototype.push=function(s){return this.size<this.capacity?(this.items[this.size]=s,e.siftDown(this.comparator,this.items,0,this.size),this.size++):this.comparator(s,this.items[0])>0&&e.replace(this.comparator,this.items,s),this.size},o.prototype.peek=function(){return this.items[0]},o.prototype.consume=function(){var s=a(this.ArrayClass,this.comparator,this.items,this.size);return this.size=0,s},o.prototype.toArray=function(){return a(this.ArrayClass,this.comparator,this.items.slice(0,this.size),this.size)},o.prototype.inspect=function(){var s=this.toArray();return Object.defineProperty(s,"constructor",{value:o,enumerable:!1}),s},typeof Symbol<"u"&&(o.prototype[Symbol.for("nodejs.util.inspect.custom")]=o.prototype.inspect),go=o,go}var Kn={},lh;function Zb(){if(lh)return Kn;lh=1;var n=new Float64Array(64),e=new Float64Array(64);function t(i,a,o){var s,u,l,d,f;for(n[0]=a,e[0]=o,u=0;u>=0;)if(l=n[u],d=e[u]-1,l<d){for(s=i[l];l<d;){for(;i[d]>=s&&l<d;)d--;for(l<d&&(i[l++]=i[d]);i[l]<=s&&l<d;)l++;l<d&&(i[d--]=i[l])}i[l]=s,n[u+1]=l+1,e[u+1]=e[u],e[u++]=l,e[u]-n[u]>e[u-1]-n[u-1]&&(f=n[u],n[u]=n[u-1],n[u-1]=f,f=e[u],e[u]=e[u-1],e[u-1]=f)}else u--;return i}Kn.inplaceQuickSort=t;function r(i,a,o,s){var u,l,d,f,g,m;for(n[0]=o,e[0]=s,l=0;l>=0;)if(d=n[l],f=e[l]-1,d<f){for(g=a[d],u=i[g];d<f;){for(;i[a[f]]>=u&&d<f;)f--;for(d<f&&(a[d++]=a[f]);i[a[d]]<=u&&d<f;)d++;d<f&&(a[f--]=a[d])}a[d]=g,n[l+1]=d+1,e[l+1]=e[l],e[l++]=d,e[l]-n[l]>e[l-1]-n[l-1]&&(m=n[l],n[l]=n[l-1],n[l-1]=m,m=e[l],e[l]=e[l-1],e[l-1]=m)}else l--;return a}return Kn.inplaceQuickSortIndices=r,Kn}var vo,ch;function Yf(){if(ch)return vo;ch=1;var n=Si(),e=ur(),t=eu().createTupleComparator,r=Qb(),i=Zb().inplaceQuickSortIndices;function a(f,g,m,w){var x,S=0,A;for(x=0;x<f;x++)A=g[x][m]-w[x],S+=A*A;return S}function o(f,g){var m=g.length,w=new Array(f),x=new Array(m),S,A=e.getPointerArray(m),b=new A(m),_,y,D,R=!0;for(_=0;_<f;_++){for(S=new Float64Array(m),y=0;y<m;y++)D=g[y],S[y]=D[1][_],R&&(x[y]=D[0],b[y]=y);R=!1,w[_]=S}return{axes:w,ids:b,labels:x}}function s(f,g,m,w){for(var x=w.length,S=e.getPointerArray(x+1),A=new S(x),b=new S(x),_=new S(x),y=[[0,0,m.length,-1,0]],D,R,v,C,M,L,G,$,N=0;y.length!==0;)D=y.pop(),$=D[0],L=D[1],G=D[2],R=D[3],v=D[4],i(g[$],m,L,G),x=G-L,C=L+(x>>>1),M=m[C],A[N]=M,R>-1&&(v===0?b[R]=N+1:_[R]=N+1),$=($+1)%f,C!==L&&C!==G-1&&y.push([$,C+1,G,N,1]),C!==L&&y.push([$,L,C,N,0]),N++;return{axes:g,labels:w,pivots:A,lefts:b,rights:_}}function u(f,g){this.dimensions=f,this.visited=0,this.axes=g.axes,this.labels=g.labels,this.pivots=g.pivots,this.lefts=g.lefts,this.rights=g.rights,this.size=this.labels.length}u.prototype.nearestNeighbor=function(f){var g=1/0,m=null,w=this.dimensions,x=this.axes,S=this.pivots,A=this.lefts,b=this.rights,_=0;function y(D,R){_++;var v=A[R],C=b[R],M=S[R],L=a(w,x,M,f);if(!(L<g&&(m=M,g=L,L===0))){var G=x[D][M]-f[D];D=(D+1)%w,G>0?v!==0&&y(D,v-1):C!==0&&y(D,C-1),G*G<g&&(G>0?C!==0&&y(D,C-1):v!==0&&y(D,v-1))}}return y(0,0),this.visited=_,this.labels[m]};var l=t(3),d=t(2);return u.prototype.kNearestNeighbors=function(f,g){if(f<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");if(f=Math.min(f,this.size),f===1)return[this.nearestNeighbor(g)];var m=new r(Array,l,f),w=this.dimensions,x=this.axes,S=this.pivots,A=this.lefts,b=this.rights,_=0;function y(v,C){var M=A[C],L=b[C],G=S[C],$=a(w,x,G,g);m.push([$,_++,G]);var N=g[v],Y=x[v][G],V=N-Y;v=(v+1)%w,N<Y?M!==0&&y(v,M-1):L!==0&&y(v,L-1),(V*V<m.peek()[0]||m.size<f)&&(N<Y?L!==0&&y(v,L-1):M!==0&&y(v,M-1))}y(0,0),this.visited=_;for(var D=m.consume(),R=0;R<D.length;R++)D[R]=this.labels[D[R][2]];return D},u.prototype.linearKNearestNeighbors=function(f,g){if(f<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");f=Math.min(f,this.size);var m=new r(Array,d,f),w,x,S;for(w=0,x=this.size;w<x;w++)S=a(this.dimensions,this.axes,this.pivots[w],g),m.push([S,w]);var A=m.consume();for(w=0;w<A.length;w++)A[w]=this.labels[this.pivots[A[w][1]]];return A},u.prototype.inspect=function(){var f=new Map;f.dimensions=this.dimensions,Object.defineProperty(f,"constructor",{value:u,enumerable:!1});var g,m,w;for(g=0;g<this.size;g++){for(w=new Array(this.dimensions),m=0;m<this.dimensions;m++)w[m]=this.axes[m][g];f.set(this.labels[g],w)}return f},typeof Symbol<"u"&&(u.prototype[Symbol.for("nodejs.util.inspect.custom")]=u.prototype.inspect),u.from=function(f,g){var m=n.toArray(f),w=o(g,m),x=s(g,w.axes,w.ids,w.labels);return new u(g,x)},u.fromAxes=function(f,g){g||(g=e.indices(f[0].length));var m=f.length,w=s(f.length,f,e.indices(g.length),g);return new u(m,w)},vo=u,vo}var yo,hh;function Jb(){if(hh)return yo;hh=1;var n=be(),e=Yf(),t=_i().intersectionSize;return yo=function(i){if(!n(i))throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: given graph is not a valid graphology instance.");if(i.order===0)throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: cannot compute stress for a null graph.");if(i.size===0)return 0;var a=[new Float64Array(i.order),new Float64Array(i.order)],o=0;i.forEachNode(function(l,d){a[0][o]=d.x,a[1][o++]=d.y});var s=e.fromAxes(a,i.nodes()),u=0;return i.forEachNode(function(l,d){var f=new Set(i.neighbors(l));if(f.size===0||f.size===i.order-1){u+=1;return}var g=s.kNearestNeighbors(f.size+1,[d.x,d.y]);g=new Set(g.slice(1));var m=t(f,g);u+=m/g.size}),u/i.order},yo}var mo,dh;function ew(){if(dh)return mo;dh=1;var n=be(),e=bn().undirectedSingleSourceLength;function t(r,i){return Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2))}return mo=function(i){if(!n(i))throw new Error("graphology-metrics/layout-quality/stress: given graph is not a valid graphology instance.");if(i.order===0)throw new Error("graphology-metrics/layout-quality/stress: cannot compute stress for a null graph.");var a=new Array(i.order),o=new Array(i.order),s=0,u=i.order*4;i.forEachNode(function(b,_){a[s]=b,o[s++]=_});var l,d,f,g,m,w,x,S,A=0;for(s=0,d=i.order;s<d;s++)for(m=e(i,a[s]),f=o[s],l=s+1;l<d;l++)g=o[l],w=m[a[l]],typeof w>"u"&&(w=u),S=t(f,g),x=1/(w*w),A+=x*Math.pow(S-w,2);return A},mo}var fh;function tw(){return fh||(fh=1,en.edgeUniformity=Vb(),en.neighborhoodPreservation=Jb(),en.stress=ew()),en}var Rt={},Kt={},ph;function rw(){if(ph)return Kt;ph=1;var n=be(),e="weight";function t(r,i,a,o,s){if(!n(a))throw new Error("graphology-metrics/"+r+": the given graph is not a valid graphology instance.");s=s||e;var u=0;return a[i](o,function(l,d,f,g,m,w,x){var S=typeof s=="function"?s(l,d,f,g,m,w,x):d[s];(typeof S!="number"||isNaN(S))&&(S=1),u+=S}),u}return Kt.weightedDegree=t.bind(null,"weightedDegree","forEachEdge"),Kt.weightedInDegree=t.bind(null,"weightedInDegree","forEachInEdge"),Kt.weightedOutDegree=t.bind(null,"weightedOutDegree","forEachOutEdge"),Kt.weightedInboundDegree=t.bind(null,"weightedInboundDegree","forEachInboundEdge"),Kt.weightedOutboundDegree=t.bind(null,"weightedOutboundDegree","forEachOutboundEdge"),Kt.weightedUndirectedDegree=t.bind(null,"weightedUndirectedDegree","forEachUndirectedEdge"),Kt.weightedDirectedDegree=t.bind(null,"weightedDirectedDegree","forEachDirectedEdge"),Kt}var gh;function nw(){if(gh)return Rt;gh=1;var n=rw();return Rt.eccentricity=Xf(),Rt.weightedDegree=n.weightedDegree,Rt.weightedInDegree=n.weightedInDegree,Rt.weightedOutDegree=n.weightedOutDegree,Rt.weightedInboundDegree=n.weightedInboundDegree,Rt.weightedOutboundDegree=n.weightedOutboundDegree,Rt.weightedUndirectedDegree=n.weightedUndirectedDegree,Rt.weightedDirectedDegree=n.weightedDirectedDegree,Rt}var vh;function iw(){return vh||(vh=1,gr.centrality=$b(),gr.edge=Fb(),gr.graph=Yb(),gr.layoutQuality=tw(),gr.node=nw()),gr}var bo,yh;function aw(){return yh||(yh=1,bo=iw()),bo}var _t={},wo,mh;function ow(){if(mh)return wo;mh=1;var n=be(),e=Qs().copyNode,t=It().copyEdge;return wo=function(i,a){if(!n(i)||!n(a))throw new Error("graphology-operators/disjoint-union: invalid graph.");if(i.multi!==a.multi)throw new Error("graphology-operators/disjoint-union: both graph should be simple or multi.");var o=i.nullCopy();o.mergeAttributes(i.getAttributes());var s={},u={},l=0;return i.forEachNode(function(d,f){s[d]=l,e(o,l,f),l++}),a.forEachNode(function(d,f){u[d]=l,e(o,l,f),l++}),l=0,i.forEachEdge(function(d,f,g,m,w,x,S){t(o,S,l++,s[g],s[m],m,f)}),a.forEachEdge(function(d,f,g,m,w,x,S){t(o,S,l++,u[g],u[m],m,f)}),o},wo}var Eo,bh;function sw(){if(bh)return Eo;bh=1;var n=be(),e=It().copyEdge;return Eo=function(r){if(!n(r))throw new Error("graphology-operators/reverse: invalid graph.");var i=r.emptyCopy();return r.forEachEdge(function(a,o,s,u,l,d,f){f?e(i,!0,a,s,u,o):e(i,!1,a,u,s,o)}),i},Eo}var xo,wh;function uw(){if(wh)return xo;wh=1;var n=be(),e=Qs().copyNode,t=It().copyEdge;return xo=function(i,a){if(!n(i))throw new Error("graphology-operators/subgraph: invalid graph instance.");var o=i.nullCopy(),s=a;if(Array.isArray(a)){if(a.length===0)return o;a=new Set(a)}if(a instanceof Set){if(a.size===0)return o;s=function(l){return a.has(l)};var u=a;a=new Set,u.forEach(function(l){a.add(""+l)})}if(typeof s!="function")throw new Error("graphology-operators/subgraph: invalid nodes. Expecting an array or a set or a filtering function.");if(typeof a=="function"){if(i.forEachNode(function(l,d){s(l,d)&&e(o,l,d)}),o.order===0)return o}else a.forEach(function(l){if(!i.hasNode(l))throw new Error('graphology-operators/subgraph: the "'+l+'" node was not found in the graph.');e(o,l,i.getNodeAttributes(l))});return i.forEachEdge(function(l,d,f,g,m,w,x){s(f,m)&&(g!==f&&!s(g,w)||t(o,x,l,f,g,d))}),o},xo}var So,Eh;function lw(){if(Eh)return So;Eh=1;var n=be(),e=It().copyEdge;return So=function(r,i){if(!n(r))throw new Error("graphology-operators/to-directed: expecting a valid graphology instance.");typeof i=="function"&&(i={mergeEdge:i}),i=i||{};var a=typeof i.mergeEdge=="function"?i.mergeEdge:null;if(r.type==="directed")return r.copy();var o=r.emptyCopy({type:"directed"});return r.forEachDirectedEdge(function(s,u,l,d){e(o,!1,s,l,d,u)}),r.forEachUndirectedEdge(function(s,u,l,d){var f=!r.multi&&r.type==="mixed"&&o.edge(l,d),g=!r.multi&&r.type==="mixed"&&o.edge(d,l);f?o.replaceEdgeAttributes(f,a(o.getEdgeAttributes(f),u)):e(o,!1,null,l,d,u),l!==d&&(g?o.replaceEdgeAttributes(g,a(o.getEdgeAttributes(g),u)):e(o,!1,null,d,l,u))}),o},So}var Ao,xh;function ru(){if(xh)return Ao;xh=1;var n=be();return Ao=function(t){if(!n(t))throw new Error("graphology-operators/to-mixed: expecting a valid graphology instance.");return t.copy({type:"mixed"})},Ao}var _o,Sh;function nu(){if(Sh)return _o;Sh=1;var n=be();return _o=function(t){if(!n(t))throw new Error("graphology-operators/to-multi: expecting a valid graphology instance.");return t.copy({multi:!0})},_o}var ko,Ah;function cw(){if(Ah)return ko;Ah=1;var n=be(),e=It().copyEdge;return ko=function(r,i){if(!n(r))throw new Error("graphology-operators/to-simple: expecting a valid graphology instance.");typeof i=="function"&&(i={mergeEdge:i}),i=i||{};var a=typeof i.mergeEdge=="function"?i.mergeEdge:null;if(!r.multi)return r.copy();var o=r.emptyCopy({multi:!1});return r.forEachEdge(function(s,u,l,d,f,g,m){var w=m?o.undirectedEdge(l,d):o.directedEdge(l,d);if(w){a&&o.replaceEdgeAttributes(w,a(o.getEdgeAttributes(w),u));return}e(o,m,s,l,d,u)}),o},ko}var Do,_h;function hw(){if(_h)return Do;_h=1;var n=be(),e=It().copyEdge;return Do=function(r,i){if(!n(r))throw new Error("graphology-operators/to-undirected: expecting a valid graphology instance.");typeof i=="function"&&(i={mergeEdge:i}),i=i||{};var a=typeof i.mergeEdge=="function"?i.mergeEdge:null;if(r.type==="undirected")return r.copy();var o=r.emptyCopy({type:"undirected"});return r.forEachUndirectedEdge(function(s,u,l,d){e(o,!0,s,l,d,u)}),r.forEachDirectedEdge(function(s,u,l,d){if(!r.multi){var f=o.edge(l,d);if(f){a&&o.replaceEdgeAttributes(f,a(o.getEdgeAttributes(f),u));return}}e(o,!0,null,l,d,u)}),o},Do}var Co,kh;function dw(){if(kh)return Co;kh=1;var n=be();return Co=function(t,r){if(!n(t)||!n(r))throw new Error("graphology-operators/union: invalid graph.");if(t.multi!==r.multi)throw new Error("graphology-operators/union: both graph should be simple or multi.");var i=t.copy();return i.import(r,!0),i},Co}var Dh;function Vf(){return Dh||(Dh=1,_t.disjointUnion=ow(),_t.reverse=sw(),_t.subgraph=uw(),_t.toDirected=lw(),_t.toMixed=ru(),_t.toMulti=nu(),_t.toSimple=cw(),_t.toUndirected=hw(),_t.union=dw()),_t}var Io,Ch;function fw(){return Ch||(Ch=1,Io=Vf()),Io}var Gt={},Mo={},Ih;function pw(){if(Ih)return Mo;Ih=1;var n=function(){return!0};return Mo.edgePathFromNodePath=function(e,t){var r=t.length,i,a,o,s;if(r<2)return a=t[0],s=e.multi?e.findEdge(a,a,n):e.edge(a,a),s?[s]:[];r--;var u=new Array(r);for(i=0;i<r;i++){if(a=t[i],o=t[i+1],s=e.multi?e.findOutboundEdge(a,o,n):e.edge(a,o),s===void 0)throw new Error("graphology-shortest-path: given path is impossible in given graph.");u[i]=s}return u},Mo}var tn={},Mh;function gw(){if(Mh)return tn;Mh=1;var n=be(),e=dt().createEdgeWeightGetter,t=tu(),r="weight";function i(f,g){return f[0]>g[0]?1:f[0]<g[0]?-1:f[1]>g[1]?1:f[1]<g[1]?-1:f[2]>g[2]?1:f[2]<g[2]?-1:0}function a(f,g){return f[0]>g[0]?1:f[0]<g[0]?-1:f[1]>g[1]?1:f[1]<g[1]?-1:f[2]>g[2]?1:f[2]<g[2]?-1:f[3]>g[3]?1:f[3]<g[3]?-1:0}function o(f,g,m,w){if(g=""+g,m=""+m,!n(f))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(g&&!f.hasNode(g))throw new Error('graphology-shortest-path/dijkstra: the "'+g+'" source node does not exist in the given graph.');if(m&&!f.hasNode(m))throw new Error('graphology-shortest-path/dijkstra: the "'+m+'" target node does not exist in the given graph.');if(w=e(w||r).fromMinimalEntry,g===m)return[0,[g]];var x=[{},{}],S=[{},{}],A=[new t(i),new t(i)],b=[{},{}];S[0][g]=[g],S[1][m]=[m],b[0][g]=0,b[1][m]=0;var _=[],y=1/0,D=0,R=1,v,C,M,L,G,$,N,Y,V;for(A[0].push([0,D++,g]),A[1].push([0,D++,m]);A[0].size&&A[1].size;)if(R=1-R,v=A[R].pop(),L=v[0],G=v[2],!(G in x[R])){if(x[R][G]=L,G in x[1-R])return[y,_];for(C=R===1?f.inboundEdges(G):f.outboundEdges(G),Y=0,V=C.length;Y<V;Y++){if(N=C[Y],$=f.opposite(G,N),M=x[R][G]+w(N,f.getEdgeAttributes(N)),$ in x[R]&&M<x[R][$])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!($ in b[R])||M<b[R][$])&&(b[R][$]=M,A[R].push([M,D++,$]),S[R][$]=S[R][G].concat($),$ in b[0]&&$ in b[1]&&(L=b[0][$]+b[1][$],(_.length===0||y>L)&&(y=L,_=S[0][$].concat(S[1][$].slice(0,-1).reverse()))))}}return[1/0,null]}function s(f,g,m,w,x,S){if(!n(f))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");m=e(m||r).fromMinimalEntry;var A={},b={},_=new t(i),y=0,D,R,v,C,M,L,G,$,N,Y,V;for($=0,Y=g.length;$<Y;$++)C=g[$],b[C]=0,_.push([0,y++,C]),S[C]=[C];for(;_.size;)if(R=_.pop(),G=R[0],C=R[2],!(C in A)){if(A[C]=G,C===x)break;for(D=f.outboundEdges(C),N=0,V=D.length;N<V;N++){if(L=D[N],M=f.opposite(C,L),v=m(L,f.getEdgeAttributes(L))+A[C],M in A&&v<A[M])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(M in b)||v<b[M])&&(b[M]=v,_.push([v,y++,M]),S[M]=S[C].concat(M))}}return A}function u(f,g,m){var w={};return s(f,[g],m,0,null,w),w}function l(f,g,m,w){return o(f,g,m,w)[1]}function d(f,g,m){g=""+g,m=e(m||r).fromMinimalEntry;var w=[],x={},S={},A=f.nodes(),b,_,y,D,R,v,C,M,L,G;for(L=0,G=A.length;L<G;L++)v=A[L],x[v]=[],S[v]=0;var $={};S[g]=1;var N={};N[g]=0;var Y=0,V=new t(a);for(V.push([0,Y++,g,g]);V.size;)if(_=V.pop(),D=_[0],y=_[2],v=_[3],!(v in $))for(S[v]+=S[y],w.push(v),$[v]=D,b=f.outboundEdges(v),L=0,G=b.length;L<G;L++)M=b[L],C=f.opposite(v,M),R=D+m(M,f.getEdgeAttributes(M)),!(C in $)&&(!(C in N)||R<N[C])?(N[C]=R,V.push([R,Y++,v,C]),S[C]=0,x[C]=[v]):R===N[C]&&(S[C]+=S[v],x[C].push(v));return[w,x,S]}return tn.bidirectional=l,tn.singleSource=u,tn.brandes=d,tn}var Lh;function Qf(){if(Lh)return Gt;Lh=1;var n=bn(),e=pw();return Gt.unweighted=n,Gt.dijkstra=gw(),Gt.bidirectional=n.bidirectional,Gt.singleSource=n.singleSource,Gt.singleSourceLength=n.singleSourceLength,Gt.undirectedSingleSourceLength=n.undirectedSingleSourceLength,Gt.brandes=n.brandes,Gt.edgePathFromNodePath=e.edgePathFromNodePath,Gt}var Lo,zh;function vw(){return zh||(zh=1,Lo=Qf()),Lo}var rn={},zo,Th;function yw(){return Th||(Th=1,zo=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),zo}var Nh;function mw(){if(Nh)return rn;Nh=1;var n=yw();function e(){this.set=new Set,this.stack=[]}e.prototype.has=function(u){return this.set.has(u)},e.prototype.push=function(u){this.stack.push(u),this.set.add(u)},e.prototype.pop=function(){this.set.delete(this.stack.pop())},e.prototype.path=function(u){return this.stack.concat(u)},e.of=function(u,l){var d=new e;return l?d.stack.push(u):d.push(u),d};function t(){this.set=new Set,this.stack=[]}t.prototype.has=function(u){return this.set.has(u)},t.prototype.push=function(u){this.stack.push(u),this.set.add(u[1])},t.prototype.pop=function(){this.set.delete(this.stack.pop()[1])},t.prototype.path=function(u){return this.stack.slice(1).map(function(l){return l[0]}).concat([u[0]])},t.of=function(u,l){var d=new t,f=[null,u];return l?d.stack.push(f):d.push(f),d};function r(u,l,d,f){if(!n(u))throw new Error("graphology-simple-path.allSimplePaths: expecting a graphology instance.");if(!u.hasNode(l))throw new Error('graphology-simple-path.allSimplePaths: expecting: could not find source node "'+l+'" in the graph.');if(!u.hasNode(d))throw new Error('graphology-simple-path.allSimplePaths: expecting: could not find target node "'+d+'" in the graph.');f=f||{};var g=typeof f.maxDepth=="number"?f.maxDepth:1/0;l=""+l,d=""+d;for(var m=l===d,w=[u.outboundNeighbors(l)],x=e.of(l,m),S=[],A,b,_;w.length!==0;)if(b=w[w.length-1],_=b.pop(),!_)w.pop(),x.pop();else{if(x.has(_))continue;_===d&&(A=x.path(_),S.push(A)),x.push(_),!x.has(d)&&w.length<g?w.push(u.outboundNeighbors(_)):x.pop()}return S}function i(u,l){var d=[];return u.forEachOutboundEdge(l,function(f,g,m,w){d.push([f,l===m?w:m])}),d}function a(u,l){var d={},f;u.forEachOutboundEdge(l,function(m,w,x,S){f=l===x?S:x,f in d||(d[f]=[]),d[f].push(m)});var g=[];for(f in d)g.push([d[f],f]);return g}function o(u,l,d,f){if(!n(u))throw new Error("graphology-simple-path.allSimpleEdgePaths: expecting a graphology instance.");if(u.multi)throw new Error("graphology-simple-path.allSimpleEdgePaths: not implemented for multi graphs.");if(!u.hasNode(l))throw new Error('graphology-simple-path.allSimpleEdgePaths: expecting: could not find source node "'+l+'" in the graph.');if(!u.hasNode(d))throw new Error('graphology-simple-path.allSimpleEdgePaths: expecting: could not find target node "'+d+'" in the graph.');f=f||{};var g=typeof f.maxDepth=="number"?f.maxDepth:1/0;l=""+l,d=""+d;for(var m=l===d,w=[i(u,l)],x=t.of(l,m),S=[],A,b,_,y;w.length!==0;)if(_=w[w.length-1],b=_.pop(),!b)w.pop(),x.pop();else{if(y=b[1],x.has(y))continue;y===d&&(A=x.path(b),S.push(A)),x.push(b),!x.has(d)&&w.length<g?w.push(i(u,y)):x.pop()}return S}function s(u,l,d,f){if(!n(u))throw new Error("graphology-simple-path.allSimpleEdgeGroupPaths: expecting a graphology instance.");if(!u.hasNode(l))throw new Error('graphology-simple-path.allSimpleEdgeGroupPaths: expecting: could not find source node "'+l+'" in the graph.');if(!u.hasNode(d))throw new Error('graphology-simple-path.allSimpleEdgeGroupPaths: expecting: could not find target node "'+d+'" in the graph.');f=f||{};var g=typeof f.maxDepth=="number"?f.maxDepth:1/0;l=""+l,d=""+d;for(var m=l===d,w=[a(u,l)],x=t.of(l,m),S=[],A,b,_,y;w.length!==0;)if(_=w[w.length-1],b=_.pop(),!b)w.pop(),x.pop();else{if(y=b[1],x.has(y))continue;y===d&&(A=x.path(b),S.push(A)),x.push(b),!x.has(d)&&w.length<g?w.push(a(u,y)):x.pop()}return S}return rn.allSimplePaths=r,rn.allSimpleEdgePaths=o,rn.allSimpleEdgeGroupPaths=s,rn}var To,Rh;function bw(){return Rh||(Rh=1,To=mw()),To}var Lr={},Xn={},No,Gh;function ww(){if(Gh)return No;Gh=1;var n=Ai();function e(t){this.graph=t,this.queue=new n(Array,t.order),this.seen=new Set,this.size=0}return e.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},e.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},e.prototype.forEachNodeYetUnseen=function(t){var r=this.seen,i=this.graph;i.someNode(function(a,o){if(r.size===i.order)return!0;if(r.has(a))return!1;var s=t(a,o);return!!s})},e.prototype.has=function(t){return this.seen.has(t)},e.prototype.push=function(t){var r=this.seen.size;return this.seen.add(t),r===this.seen.size?!1:(this.queue.push(t),this.size++,!0)},e.prototype.pushWith=function(t,r){var i=this.seen.size;return this.seen.add(t),i===this.seen.size?!1:(this.queue.push(r),this.size++,!0)},e.prototype.shift=function(){var t=this.queue.shift();return this.size=this.queue.size,t},No=e,No}var Yn={},Ph;function Zf(){if(Ph)return Yn;Ph=1;function n(t,r,i){this.node=t,this.attributes=r,this.depth=i}function e(t){return t[0].toUpperCase()+t.slice(1)}return Yn.TraversalRecord=n,Yn.capitalize=e,Yn}var $h;function Ew(){if($h)return Xn;$h=1;var n=be(),e=ww(),t=Zf(),r=t.TraversalRecord,i=t.capitalize;function a(o,s,u,l){if(l=l||{},!n(o))throw new Error("graphology-traversal/bfs: expecting a graphology instance.");if(typeof u!="function")throw new Error("graphology-traversal/bfs: given callback is not a function.");if(o.order===0)return;var d=new e(o),f=o["forEach"+i(l.mode||"outbound")+"Neighbor"].bind(o),g;s===null?g=d.forEachNodeYetUnseen.bind(d):g=function(S){s=""+s,S(s,o.getNodeAttributes(s))};var m,w;function x(S,A){d.pushWith(S,new r(S,A,m.depth+1))}g(function(S,A){for(d.pushWith(S,new r(S,A,0));d.size!==0;)m=d.shift(),w=u(m.node,m.attributes,m.depth),w!==!0&&f(m.node,x)})}return Xn.bfs=function(o,s,u){return a(o,null,s,u)},Xn.bfsFromNode=a,Xn}var Vn={},Oh;function xw(){if(Oh)return Vn;Oh=1;var n=be(),e=Cf(),t=Zf(),r=t.TraversalRecord,i=t.capitalize;function a(o,s,u,l){if(l=l||{},!n(o))throw new Error("graphology-traversal/dfs: expecting a graphology instance.");if(typeof u!="function")throw new Error("graphology-traversal/dfs: given callback is not a function.");if(o.order===0)return;var d=new e(o),f=o["forEach"+i(l.mode||"outbound")+"Neighbor"].bind(o),g;s===null?g=d.forEachNodeYetUnseen.bind(d):g=function(S){s=""+s,S(s,o.getNodeAttributes(s))};var m,w;function x(S,A){d.pushWith(S,new r(S,A,m.depth+1))}g(function(S,A){for(d.pushWith(S,new r(S,A,0));d.size!==0;)m=d.pop(),w=u(m.node,m.attributes,m.depth),w!==!0&&f(m.node,x)})}return Vn.dfs=function(o,s,u){return a(o,null,s,u)},Vn.dfsFromNode=a,Vn}var qh;function Sw(){if(qh)return Lr;qh=1;var n=Ew(),e=xw();return Lr.bfs=n.bfs,Lr.bfsFromNode=n.bfsFromNode,Lr.dfs=e.dfs,Lr.dfsFromNode=e.dfsFromNode,Lr}var Ro,Fh;function Aw(){return Fh||(Fh=1,Ro=Sw()),Ro}var pt={},Go,Wh;function _w(){if(Wh)return Go;Wh=1;var n=be();return Go=function(t){if(!n(t))throw new Error("graphology-utils/infer-multi: expecting a valid graphology instance.");if(!t.multi||t.order===0||t.size<2)return!1;var r=!1,i,a,o,s;return t.forEachAssymetricAdjacencyEntry(function(u,l,d,f,g,m,w){if(!r){if(w&&u>l&&(s=l,l=u,u=s),u===i&&l===a&&w===o){r=!0;return}i=u,a=l,o=w}}),r},Go}var Po,Uh;function kw(){return Uh||(Uh=1,Po=function(e,t){if(t.length!==0){var r,i,a,o,s;for(a=0,s=t.length;a<s;a++)for(r=t[a],o=a+1;o<s;o++)i=t[o],e.mergeEdge(r,i)}}),Po}var $o,jh;function Dw(){return jh||(jh=1,$o=function(e,t){if(t.length!==0){var r,i,a,o;if(e.mergeNode(t[0]),t.length!==1){for(a=1,o=t.length;a<o;a++)r=t[a-1],i=t[a],e.mergeEdge(r,i);e.mergeEdge(i,t[0])}}}),$o}var Oo,Bh;function Cw(){return Bh||(Bh=1,Oo=function(e,t){if(t.length!==0){var r,i,a,o;for(e.mergeNode(t[0]),a=1,o=t.length;a<o;a++)r=t[a-1],i=t[a],e.mergeEdge(r,i)}}),Oo}var qo,Hh;function Iw(){if(Hh)return qo;Hh=1;var n=It().copyEdge;return qo=function(t,r,i){typeof r>"u"&&(r={}),typeof i>"u"&&(i={});var a=t.nullCopy();t.forEachNode(function(u,l){var d=r[u];typeof d>"u"&&(d=u),a.addNode(d,l)});var o,s;return t.forEachAssymetricAdjacencyEntry(function(u,l,d,f,g,m,w){u!==o&&(o=u,s=r[u],typeof s>"u"&&(s=u));var x=r[l];typeof x>"u"&&(x=l);var S=i[g];typeof S>"u"&&(S=g),n(a,w,S,s,x,m)}),a},qo}var Fo,Kh;function Mw(){if(Kh)return Fo;Kh=1;var n=It().copyEdge;return Fo=function(t,r,i){var a=t.nullCopy();t.forEachNode(function(u,l){var d=r?r(u,l):u;a.addNode(d,l)});var o,s;return t.forEachAssymetricAdjacencyEntry(function(u,l,d,f,g,m,w){u!==o&&(o=u,s=r?r(u,d):u);var x=r?r(l,f):l,S=i?i(g,m,u,l,d,f,w):g;n(a,w,S,s,x,m)}),a},Fo}var Xh;function Lw(){return Xh||(Xh=1,pt.inferMulti=_w(),pt.inferType=Er(),pt.isGraph=be(),pt.isGraphConstructor=Je(),pt.mergeClique=kw(),pt.mergeCycle=Dw(),pt.mergePath=Cw(),pt.mergeStar=Rf(),pt.renameGraphKeys=Iw(),pt.updateGraphKeys=Mw()),pt}var Wo,Yh;function Jf(){return Yh||(Yh=1,Wo=Lw()),Wo}var Uo,Vh;function zw(){if(Vh)return Uo;Vh=1;const{createNodeValueGetter:n,createEdgeValueGetter:e}=dt();return Uo=function(r,i,a){const{nodeXAttribute:o,nodeYAttribute:s}=a,{attraction:u,repulsion:l,gravity:d,inertia:f,maxMove:g}=a.settings;let{shouldSkipNode:m,shouldSkipEdge:w,isNodeFixed:x}=a;x=n(x),m=n(m,!1),w=e(w,!1);const S=r.filterNodes((_,y)=>!m.fromEntry(_,y)),A=S.length;for(let _=0;_<A;_++){const y=S[_],D=r.getNodeAttributes(y),R=i[y];R?i[y]={dx:R.dx*f,dy:R.dy*f,x:D[o]||0,y:D[s]||0}:i[y]={dx:0,dy:0,x:D[o]||0,y:D[s]||0}}if(l)for(let _=0;_<A;_++){const y=S[_],D=i[y];for(let R=_+1;R<A;R++){const v=S[R],C=i[v],M=C.x-D.x,L=C.y-D.y,G=Math.sqrt(M*M+L*L)||1,$=l/G*M,N=l/G*L;D.dx-=$,D.dy-=N,C.dx+=$,C.dy+=N}}if(u&&r.forEachEdge((_,y,D,R,v,C,M)=>{if(D===R||m.fromEntry(D,v)||m.fromEntry(R,C)||w.fromEntry(_,y,D,R,v,C,M))return;const L=i[D],G=i[R],$=G.x-L.x,N=G.y-L.y,Y=Math.sqrt($*$+N*N)||1,V=u*Y*$,F=u*Y*N;L.dx+=V,L.dy+=F,G.dx-=V,G.dy-=F}),d)for(let _=0;_<A;_++){const y=S[_],D=i[y],{x:R,y:v}=D,C=Math.sqrt(R*R+v*v)||1;i[y].dx-=R*d*C,i[y].dy-=v*d*C}const b=!1;for(let _=0;_<A;_++){const y=S[_],D=i[y],R=Math.sqrt(D.dx*D.dx+D.dy*D.dy);R>g&&(D.dx*=g/R,D.dy*=g/R),x.fromGraph(r,y)?D.fixed=!0:(D.x+=D.dx,D.y+=D.dy,D.fixed=!1)}return{converged:b}},Uo}var Qn={},Qh;function Tw(){return Qh||(Qh=1,Qn.assignLayoutChanges=function(n,e,t){const{nodeXAttribute:r,nodeYAttribute:i}=t;n.updateEachNodeAttributes((a,o)=>{const s=e[a];return!s||s.fixed||(o[r]=s.x,o[i]=s.y),o},{attributes:["x","y"]})},Qn.collectLayoutChanges=function(n){const e={};for(const t in n){const r=n[t];e[t]={x:r.x,y:r.y}}return e}),Qn}var jo,Zh;function Nw(){return Zh||(Zh=1,jo={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}}),jo}var Bo,Jh;function Rw(){if(Jh)return Bo;Jh=1;const n=be(),e=je(),t=zw(),r=Tw(),i=Nw();function a(o,s){if(!n(o))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");s=e(s,i),this.callbacks={},s.onConverged&&(this.callbacks.onConverged=s.onConverged),this.graph=o,this.params=s,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}return a.prototype.isRunning=function(){return this.running},a.prototype.runFrame=function(){let{converged:o}=t(this.graph,this.nodeStates,this.params);r.assignLayoutChanges(this.graph,this.nodeStates,this.params),o=!1,o?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())},a.prototype.stop=function(){return this.running=!1,this.frameID!==null&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this},a.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())},a.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0},Bo=a,Bo}var Ho,ed;function Gw(){return ed||(ed=1,Ho=function(){var e,t,r={};(function(){var a=0,o=1,s=2,u=3,l=4,d=5,f=6,g=7,m=8,w=9,x=0,S=1,A=2,b=0,_=1,y=2,D=3,R=4,v=5,C=6,M=7,L=8,G=3,$=10,N=3,Y=9,V=10;r.exports=function(I,T,j){var X,W,q,H,J,ie,oe,ue,ne,te,ce=T.length,pe=j.length,ye=I.adjustSizes,Ce=I.barnesHutTheta*I.barnesHutTheta,fe,ae,Q,xe,ze,Ee,ge,ee=[];for(q=0;q<ce;q+=$)T[q+l]=T[q+s],T[q+d]=T[q+u],T[q+s]=0,T[q+u]=0;if(I.outboundAttractionDistribution){for(fe=0,q=0;q<ce;q+=$)fe+=T[q+f];fe/=ce/$}if(I.barnesHutOptimize){var Ne=1/0,$e=-1/0,Ge=1/0,qe=-1/0,Te,Pe,Fe;for(q=0;q<ce;q+=$)Ne=Math.min(Ne,T[q+a]),$e=Math.max($e,T[q+a]),Ge=Math.min(Ge,T[q+o]),qe=Math.max(qe,T[q+o]);var Be=$e-Ne,Ke=qe-Ge;for(Be>Ke?(Ge-=(Be-Ke)/2,qe=Ge+Be):(Ne-=(Ke-Be)/2,$e=Ne+Ke),ee[0+b]=-1,ee[0+_]=(Ne+$e)/2,ee[0+y]=(Ge+qe)/2,ee[0+D]=Math.max($e-Ne,qe-Ge),ee[0+R]=-1,ee[0+v]=-1,ee[0+C]=0,ee[0+M]=0,ee[0+L]=0,X=1,q=0;q<ce;q+=$)for(W=0,Fe=G;;)if(ee[W+v]>=0){T[q+a]<ee[W+_]?T[q+o]<ee[W+y]?Te=ee[W+v]:Te=ee[W+v]+Y:T[q+o]<ee[W+y]?Te=ee[W+v]+Y*2:Te=ee[W+v]+Y*3,ee[W+M]=(ee[W+M]*ee[W+C]+T[q+a]*T[q+f])/(ee[W+C]+T[q+f]),ee[W+L]=(ee[W+L]*ee[W+C]+T[q+o]*T[q+f])/(ee[W+C]+T[q+f]),ee[W+C]+=T[q+f],W=Te;continue}else if(ee[W+b]<0){ee[W+b]=q;break}else{if(ee[W+v]=X*Y,ue=ee[W+D]/2,ne=ee[W+v],ee[ne+b]=-1,ee[ne+_]=ee[W+_]-ue,ee[ne+y]=ee[W+y]-ue,ee[ne+D]=ue,ee[ne+R]=ne+Y,ee[ne+v]=-1,ee[ne+C]=0,ee[ne+M]=0,ee[ne+L]=0,ne+=Y,ee[ne+b]=-1,ee[ne+_]=ee[W+_]-ue,ee[ne+y]=ee[W+y]+ue,ee[ne+D]=ue,ee[ne+R]=ne+Y,ee[ne+v]=-1,ee[ne+C]=0,ee[ne+M]=0,ee[ne+L]=0,ne+=Y,ee[ne+b]=-1,ee[ne+_]=ee[W+_]+ue,ee[ne+y]=ee[W+y]-ue,ee[ne+D]=ue,ee[ne+R]=ne+Y,ee[ne+v]=-1,ee[ne+C]=0,ee[ne+M]=0,ee[ne+L]=0,ne+=Y,ee[ne+b]=-1,ee[ne+_]=ee[W+_]+ue,ee[ne+y]=ee[W+y]+ue,ee[ne+D]=ue,ee[ne+R]=ee[W+R],ee[ne+v]=-1,ee[ne+C]=0,ee[ne+M]=0,ee[ne+L]=0,X+=4,T[ee[W+b]+a]<ee[W+_]?T[ee[W+b]+o]<ee[W+y]?Te=ee[W+v]:Te=ee[W+v]+Y:T[ee[W+b]+o]<ee[W+y]?Te=ee[W+v]+Y*2:Te=ee[W+v]+Y*3,ee[W+C]=T[ee[W+b]+f],ee[W+M]=T[ee[W+b]+a],ee[W+L]=T[ee[W+b]+o],ee[Te+b]=ee[W+b],ee[W+b]=-1,T[q+a]<ee[W+_]?T[q+o]<ee[W+y]?Pe=ee[W+v]:Pe=ee[W+v]+Y:T[q+o]<ee[W+y]?Pe=ee[W+v]+Y*2:Pe=ee[W+v]+Y*3,Te===Pe)if(Fe--){W=Te;continue}else{Fe=G;break}ee[Pe+b]=q;break}}if(I.barnesHutOptimize)for(ae=I.scalingRatio,q=0;q<ce;q+=$)for(W=0;;)if(ee[W+v]>=0)if(Ee=Math.pow(T[q+a]-ee[W+M],2)+Math.pow(T[q+o]-ee[W+L],2),te=ee[W+D],4*te*te/Ee<Ce){if(Q=T[q+a]-ee[W+M],xe=T[q+o]-ee[W+L],ye===!0?Ee>0?(ge=ae*T[q+f]*ee[W+C]/Ee,T[q+s]+=Q*ge,T[q+u]+=xe*ge):Ee<0&&(ge=-ae*T[q+f]*ee[W+C]/Math.sqrt(Ee),T[q+s]+=Q*ge,T[q+u]+=xe*ge):Ee>0&&(ge=ae*T[q+f]*ee[W+C]/Ee,T[q+s]+=Q*ge,T[q+u]+=xe*ge),W=ee[W+R],W<0)break;continue}else{W=ee[W+v];continue}else{if(ie=ee[W+b],ie>=0&&ie!==q&&(Q=T[q+a]-T[ie+a],xe=T[q+o]-T[ie+o],Ee=Q*Q+xe*xe,ye===!0?Ee>0?(ge=ae*T[q+f]*T[ie+f]/Ee,T[q+s]+=Q*ge,T[q+u]+=xe*ge):Ee<0&&(ge=-ae*T[q+f]*T[ie+f]/Math.sqrt(Ee),T[q+s]+=Q*ge,T[q+u]+=xe*ge):Ee>0&&(ge=ae*T[q+f]*T[ie+f]/Ee,T[q+s]+=Q*ge,T[q+u]+=xe*ge)),W=ee[W+R],W<0)break;continue}else for(ae=I.scalingRatio,H=0;H<ce;H+=$)for(J=0;J<H;J+=$)Q=T[H+a]-T[J+a],xe=T[H+o]-T[J+o],ye===!0?(Ee=Math.sqrt(Q*Q+xe*xe)-T[H+m]-T[J+m],Ee>0?(ge=ae*T[H+f]*T[J+f]/Ee/Ee,T[H+s]+=Q*ge,T[H+u]+=xe*ge,T[J+s]-=Q*ge,T[J+u]-=xe*ge):Ee<0&&(ge=100*ae*T[H+f]*T[J+f],T[H+s]+=Q*ge,T[H+u]+=xe*ge,T[J+s]-=Q*ge,T[J+u]-=xe*ge)):(Ee=Math.sqrt(Q*Q+xe*xe),Ee>0&&(ge=ae*T[H+f]*T[J+f]/Ee/Ee,T[H+s]+=Q*ge,T[H+u]+=xe*ge,T[J+s]-=Q*ge,T[J+u]-=xe*ge));for(ne=I.gravity/I.scalingRatio,ae=I.scalingRatio,q=0;q<ce;q+=$)ge=0,Q=T[q+a],xe=T[q+o],Ee=Math.sqrt(Math.pow(Q,2)+Math.pow(xe,2)),I.strongGravityMode?Ee>0&&(ge=ae*T[q+f]*ne):Ee>0&&(ge=ae*T[q+f]*ne/Ee),T[q+s]-=Q*ge,T[q+u]-=xe*ge;for(ae=1*(I.outboundAttractionDistribution?fe:1),oe=0;oe<pe;oe+=N)H=j[oe+x],J=j[oe+S],ue=j[oe+A],ze=Math.pow(ue,I.edgeWeightInfluence),Q=T[H+a]-T[J+a],xe=T[H+o]-T[J+o],ye===!0?(Ee=Math.sqrt(Q*Q+xe*xe)-T[H+m]-T[J+m],I.linLogMode?I.outboundAttractionDistribution?Ee>0&&(ge=-ae*ze*Math.log(1+Ee)/Ee/T[H+f]):Ee>0&&(ge=-ae*ze*Math.log(1+Ee)/Ee):I.outboundAttractionDistribution?Ee>0&&(ge=-ae*ze/T[H+f]):Ee>0&&(ge=-ae*ze)):(Ee=Math.sqrt(Math.pow(Q,2)+Math.pow(xe,2)),I.linLogMode?I.outboundAttractionDistribution?Ee>0&&(ge=-ae*ze*Math.log(1+Ee)/Ee/T[H+f]):Ee>0&&(ge=-ae*ze*Math.log(1+Ee)/Ee):I.outboundAttractionDistribution?(Ee=1,ge=-ae*ze/T[H+f]):(Ee=1,ge=-ae*ze)),Ee>0&&(T[H+s]+=Q*ge,T[H+u]+=xe*ge,T[J+s]-=Q*ge,T[J+u]-=xe*ge);var Xe,lt,wt,ft,Et,qt;if(ye===!0)for(q=0;q<ce;q+=$)T[q+w]!==1&&(Xe=Math.sqrt(Math.pow(T[q+s],2)+Math.pow(T[q+u],2)),Xe>V&&(T[q+s]=T[q+s]*V/Xe,T[q+u]=T[q+u]*V/Xe),lt=T[q+f]*Math.sqrt((T[q+l]-T[q+s])*(T[q+l]-T[q+s])+(T[q+d]-T[q+u])*(T[q+d]-T[q+u])),wt=Math.sqrt((T[q+l]+T[q+s])*(T[q+l]+T[q+s])+(T[q+d]+T[q+u])*(T[q+d]+T[q+u]))/2,ft=.1*Math.log(1+wt)/(1+Math.sqrt(lt)),Et=T[q+a]+T[q+s]*(ft/I.slowDown),T[q+a]=Et,qt=T[q+o]+T[q+u]*(ft/I.slowDown),T[q+o]=qt);else for(q=0;q<ce;q+=$)T[q+w]!==1&&(lt=T[q+f]*Math.sqrt((T[q+l]-T[q+s])*(T[q+l]-T[q+s])+(T[q+d]-T[q+u])*(T[q+d]-T[q+u])),wt=Math.sqrt((T[q+l]+T[q+s])*(T[q+l]+T[q+s])+(T[q+d]+T[q+u])*(T[q+d]+T[q+u]))/2,ft=T[q+g]*Math.log(1+wt)/(1+Math.sqrt(lt)),T[q+g]=Math.min(1,Math.sqrt(ft*(Math.pow(T[q+s],2)+Math.pow(T[q+u],2))/(1+Math.sqrt(lt)))),Et=T[q+a]+T[q+s]*(ft/I.slowDown),T[q+a]=Et,qt=T[q+o]+T[q+u]*(ft/I.slowDown),T[q+o]=qt);return{}}})();var i=r.exports;self.addEventListener("message",function(a){var o=a.data;e=new Float32Array(o.nodes),o.edges&&(t=new Float32Array(o.edges)),i(o.settings,e,t),self.postMessage({nodes:e.buffer},[e.buffer])})}),Ho}var Ko,td;function Pw(){if(td)return Ko;td=1;var n=Gw(),e=be(),t=dt().createEdgeWeightGetter,r=$f(),i=Of();function a(o,s){if(s=s||{},!e(o))throw new Error("graphology-layout-forceatlas2/worker: the given graph is not a valid graphology instance.");var u=t("getEdgeWeight"in s?s.getEdgeWeight:"weight").fromEntry,l=r.assign({},i,s.settings),d=r.validateSettings(l);if(d)throw new Error("graphology-layout-forceatlas2/worker: "+d.message);this.worker=null,this.graph=o,this.settings=l,this.getEdgeWeight=u,this.matrices=null,this.running=!1,this.killed=!1,this.outputReducer=typeof s.outputReducer=="function"?s.outputReducer:null,this.handleMessage=this.handleMessage.bind(this);var f=void 0,g=this;this.handleGraphUpdate=function(){g.worker&&g.worker.terminate(),f&&clearTimeout(f),f=setTimeout(function(){f=void 0,g.spawnWorker()},0)},o.on("nodeAdded",this.handleGraphUpdate),o.on("edgeAdded",this.handleGraphUpdate),o.on("nodeDropped",this.handleGraphUpdate),o.on("edgeDropped",this.handleGraphUpdate),this.spawnWorker()}return a.prototype.isRunning=function(){return this.running},a.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=r.createWorker(n),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())},a.prototype.handleMessage=function(o){if(this.running){var s=new Float32Array(o.data.nodes);r.assignLayoutChanges(this.graph,s,this.outputReducer),this.outputReducer&&r.readGraphPositions(this.graph,s),this.matrices.nodes=s,this.askForIterations()}},a.prototype.askForIterations=function(o){var s=this.matrices,u={settings:this.settings,nodes:s.nodes.buffer},l=[s.nodes.buffer];return o&&(u.edges=s.edges.buffer,l.push(s.edges.buffer)),this.worker.postMessage(u,l),this},a.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-forceatlas2/worker.start: layout was killed.");return this.running?this:(this.matrices=r.graphToByteArrays(this.graph,this.getEdgeWeight),this.running=!0,this.askForIterations(!0),this)},a.prototype.stop=function(){return this.running=!1,this},a.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleGraphUpdate),this.graph.removeListener("edgeAdded",this.handleGraphUpdate),this.graph.removeListener("nodeDropped",this.handleGraphUpdate),this.graph.removeListener("edgeDropped",this.handleGraphUpdate)},Ko=a,Ko}var Xo,rd;function $w(){return rd||(rd=1,Xo=function(){var e,t={};(function(){var i=0,a=1,o=2,s=3;function u(d,f){return d+"§"+f}function l(){return .01*(.5-Math.random())}t.exports=function(f,g){var m=f.margin,w=f.ratio,x=f.expansion,S=f.gridSize,A=f.speed,b,_,y,D,R,v,C=!0,M=g.length,L=M/s|0,G=new Float32Array(L),$=new Float32Array(L),N=1/0,Y=1/0,V=-1/0,F=-1/0;for(b=0;b<M;b+=s)y=g[b+i],D=g[b+a],v=g[b+o]*w+m,N=Math.min(N,y-v),V=Math.max(V,y+v),Y=Math.min(Y,D-v),F=Math.max(F,D+v);var I=V-N,T=F-Y,j=(N+V)/2,X=(Y+F)/2;N=j-x*I/2,V=j+x*I/2,Y=X-x*T/2,F=X+x*T/2;var W=new Array(S*S),q=W.length,H;for(H=0;H<q;H++)W[H]=[];var J,ie,oe,ue,ne,te,ce,pe,ye,Ce;for(b=0;b<M;b+=s)for(y=g[b+i],D=g[b+a],v=g[b+o]*w+m,J=y-v,ie=y+v,oe=D-v,ue=D+v,ne=Math.floor(S*(J-N)/(V-N)),te=Math.floor(S*(ie-N)/(V-N)),ce=Math.floor(S*(oe-Y)/(F-Y)),pe=Math.floor(S*(ue-Y)/(F-Y)),ye=ne;ye<=te;ye++)for(Ce=ce;Ce<=pe;Ce++)W[ye*S+Ce].push(b);var fe,ae=new Set,Q,xe,ze,Ee,ge,ee,Ne,$e,Ge,qe,Te,Pe,Fe;for(H=0;H<q;H++)for(fe=W[H],b=0,R=fe.length;b<R;b++)for(Q=fe[b],ze=g[Q+i],ge=g[Q+a],Ne=g[Q+o],_=b+1;_<R;_++)xe=fe[_],Ge=u(Q,xe),!(q>1&&ae.has(Ge))&&(q>1&&ae.add(Ge),Ee=g[xe+i],ee=g[xe+a],$e=g[xe+o],qe=Ee-ze,Te=ee-ge,Pe=Math.sqrt(qe*qe+Te*Te),Fe=Pe<Ne*w+m+($e*w+m),Fe&&(C=!1,xe=xe/s|0,Pe>0?(G[xe]+=qe/Pe*(1+Ne),$[xe]+=Te/Pe*(1+Ne)):(G[xe]+=I*l(),$[xe]+=T*l())));for(b=0,_=0;b<M;b+=s,_++)g[b+i]+=G[_]*.1*A,g[b+a]+=$[_]*.1*A;return{converged:C}}})();var r=t.exports;self.addEventListener("message",function(i){var a=i.data;e=new Float32Array(a.nodes);var o=r(a.settings,e);self.postMessage({result:o,nodes:e.buffer},[e.buffer])})}),Xo}var Yo,nd;function Ow(){if(nd)return Yo;nd=1;var n=$w(),e=be(),t=Ff(),r=Wf();function i(a,o){if(o=o||{},!e(a))throw new Error("graphology-layout-noverlap/worker: the given graph is not a valid graphology instance.");var s=Object.assign({},r,o.settings),u=t.validateSettings(s);if(u)throw new Error("graphology-layout-noverlap/worker: "+u.message);this.worker=null,this.graph=a,this.settings=s,this.matrices=null,this.running=!1,this.killed=!1,this.inputReducer=o.inputReducer,this.outputReducer=o.outputReducer,this.callbacks={onConverged:typeof o.onConverged=="function"?o.onConverged:null},this.handleMessage=this.handleMessage.bind(this);var l=!1,d=this;this.handleAddition=function(){l||(l=!0,d.spawnWorker(),setTimeout(function(){l=!1},0))},a.on("nodeAdded",this.handleAddition),a.on("edgeAdded",this.handleAddition),this.spawnWorker()}return i.prototype.isRunning=function(){return this.running},i.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=t.createWorker(n),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())},i.prototype.handleMessage=function(a){if(this.running){var o=new Float32Array(a.data.nodes);if(t.assignLayoutChanges(this.graph,o,this.outputReducer),this.matrices.nodes=o,a.data.result.converged){this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop();return}this.askForIterations()}},i.prototype.askForIterations=function(){var a=this.matrices,o={settings:this.settings,nodes:a.nodes.buffer},s=[a.nodes.buffer];return this.worker.postMessage(o,s),this},i.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-noverlap/worker.start: layout was killed.");return this.running?this:(this.matrices={nodes:t.graphToByteArray(this.graph,this.inputReducer)},this.running=!0,this.askForIterations(),this)},i.prototype.stop=function(){return this.running=!1,this},i.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleAddition),this.graph.removeListener("edgeAdded",this.handleAddition)},Yo=i,Yo}var Zn={},Jn={},id;function ep(){if(id)return Jn;id=1,Jn.cast=function(e,t){switch(e){case"boolean":t=t==="true";break;case"integer":case"long":case"float":case"double":t=+t;break;case"liststring":t=t?t.split("|"):[];break}return t};var n=/["'<>&\s]/g;return Jn.sanitizeTagName=function(t){return t.replace(n,"").trim()},Jn}var Vo,ad;function qw(){if(ad)return Vo;ad=1;var n=Je(),e=It().mergeEdge,t=ru(),r=nu(),i=ep(),a=i.cast;function o(g){return g!==g}function s(g){var m=g.getAttribute("a"),w=g.getAttribute("r"),x=g.getAttribute("g"),S=g.getAttribute("b");return m?"rgba("+w+","+x+","+S+","+m+")":"rgb("+w+","+x+","+S+")"}function u(g,m){var w=g.getElementsByTagName("viz:"+m)[0];return w||(w=g.getElementsByTagNameNS("viz",m)[0]),w||(w=g.getElementsByTagName(m)[0]),w}function l(g){for(var m={},w,x,S=0,A=g.length;S<A;S++)w=g[S],w.nodeName!=="#text"&&(x=w.textContent.trim(),x&&(m[w.tagName.toLowerCase()]=w.textContent));return m}function d(g){for(var m={},w={},x,S,A,b=0,_=g.length;b<_;b++)x=g[b],A=x.getAttribute("id")||x.getAttribute("for"),m[A]={id:A,type:x.getAttribute("type")||"string",title:o(+A)?A:x.getAttribute("title")||A},S=x.getElementsByTagName("default")[0],S&&(w[m[A].title]=a(m[A].type,S.textContent));return[m,w]}function f(g,m,w){var x={},S=w.getAttribute("label"),A=w.getAttribute("weight");S&&(x.label=S),A&&(x.weight=+A);for(var b=w.getElementsByTagName("attvalue"),_,y,D=0,R=b.length;D<R;D++)_=b[D],y=_.getAttribute("id")||_.getAttribute("for"),x[g[y].title]=a(g[y].type,_.getAttribute("value"));var v;for(v in m)v in x||(x[v]=m[v]);var C=u(w,"color");C&&(x.color=s(C)),C=u(w,"size"),C&&(x.size=+C.getAttribute("value"));var M,L,G;return C=u(w,"position"),C&&(M=C.getAttribute("x"),L=C.getAttribute("y"),G=C.getAttribute("z"),M&&(x.x=+M),L&&(x.y=+L),G&&(x.z=+G)),C=u(w,"shape"),C&&(x.shape=C.getAttribute("value")),C=u(w,"thickness"),C&&(x.thickness=+C.getAttribute("value")),x}return Vo=function(m,w){return function(S,A,b){b=b||{};var _=b.addMissingNodes===!0,y,D=A,R,v,C,M,L,G,$,N,Y;if(!n(S))throw new Error("graphology-gexf/parser: invalid Graph constructor.");if(typeof A=="string"&&(D=new m().parseFromString(A,"application/xml")),!(D instanceof w))throw new Error("graphology-gexf/parser: source should either be a XML document or a string.");var V=D.getElementsByTagName("graph")[0],F=D.getElementsByTagName("meta")[0],I=F&&F.childNodes||[],T=D.getElementsByTagName("node"),j=D.getElementsByTagName("edge"),X=D.getElementsByTagName("attributes"),W=[],q=[];for(N=0,Y=X.length;N<Y;N++)R=X[N],R.getAttribute("class")==="node"?W=R.getElementsByTagName("attribute"):R.getAttribute("class")==="edge"&&(q=R.getElementsByTagName("attribute"));var H=V.getAttribute("defaultedgetype")||"undirected";H==="mutual"&&(H="undirected"),v=d(W);var J=v[0],ie=v[1];v=d(q);var oe=v[0],ue=v[1],ne=j[0]?j[0].getAttribute("type")||H:"mixed",te=new S({type:ne}),ce=l(I),pe=F&&F.getAttribute("lastmodifieddate");for(te.replaceAttributes(ce),pe&&te.setAttribute("lastModifiedDate",pe),N=0,Y=T.length;N<Y;N++)R=T[N],te.addNode(R.getAttribute("id"),f(J,ie,R));for(N=0,Y=j.length;N<Y;N++)if(R=j[N],L=R.getAttribute("id"),C=R.getAttribute("type")||H,G=R.getAttribute("source"),$=R.getAttribute("target"),M=f(oe,ue,R),C!==te.type&&te.type!=="mixed"&&(te=t(te)),!te.multi&&(C==="directed"&&te.hasDirectedEdge(G,$)||te.hasUndirectedEdge(G,$))&&(te=r(te)),y=e(te,C!=="directed",L||null,G,$,M),!_&&(y[2]||y[3]))throw new Error("graphology-gexf/parser: one of your gexf file edges points to an inexisting node. Set the parser `addMissingNodes` option to `true` if you do not care.");return te}},Vo}var Qo,od;function Fw(){if(od)return Qo;od=1;var n=qw();return Qo=n(DOMParser,Document),Qo}var Zo,sd;function Ww(){if(sd)return Zo;sd=1;function n(r){return typeof r!="number"&&!r}function e(r){if(typeof r=="string")return r;if(typeof r=="number")return r+"";if(typeof r=="function")return r();if(r instanceof t)return r.toString();throw Error("Bad Parameter")}function t(r,i){if(!(this instanceof t))return new t;this.name_regex=/[_:A-Za-z][-._:A-Za-z0-9]*/,this.indent=!!r,this.indentString=this.indent&&typeof r=="string"?r:"    ",this.output="",this.stack=[],this.tags=0,this.attributes=0,this.attribute=0,this.texts=0,this.comment=0,this.dtd=0,this.root="",this.pi=0,this.cdata=0,this.started_write=!1,this.writer,this.writer_encoding="UTF-8",typeof i=="function"?this.writer=i:this.writer=function(a,o){this.output+=a}}return t.prototype={toString:function(){return this.flush(),this.output},indenter:function(){if(this.indent){this.write(`
`);for(var r=1;r<this.tags;r++)this.write(this.indentString)}},write:function(){for(var r=0;r<arguments.length;r++)this.writer(arguments[r],this.writer_encoding)},flush:function(){for(var r=this.tags;r>0;r--)this.endElement();this.tags=0},startDocument:function(r,i,a){return this.tags||this.attributes?this:(this.startPI("xml"),this.startAttribute("version"),this.text(typeof r=="string"?r:"1.0"),this.endAttribute(),typeof i=="string"&&(this.startAttribute("encoding"),this.text(i),this.endAttribute(),this.writer_encoding=i),a&&(this.startAttribute("standalone"),this.text("yes"),this.endAttribute()),this.endPI(),this.indent||this.write(`
`),this)},endDocument:function(){return this.attributes&&this.endAttributes(),this},writeElement:function(r,i){return this.startElement(r).text(i).endElement()},writeElementNS:function(r,i,a,o){return o||(o=a),this.startElementNS(r,i,a).text(o).endElement()},startElement:function(r){if(r=e(r),!r.match(this.name_regex)||this.tags===0&&this.root&&this.root!==r)throw Error("Invalid Parameter");return this.attributes&&this.endAttributes(),++this.tags,this.texts=0,this.stack.length>0&&(this.stack[this.stack.length-1].containsTag=!0),this.stack.push({name:r,tags:this.tags}),this.started_write&&this.indenter(),this.write("<",r),this.startAttributes(),this.started_write=!0,this},startElementNS:function(r,i,a){if(r=e(r),i=e(i),!r.match(this.name_regex)||!i.match(this.name_regex))throw Error("Invalid Parameter");return this.attributes&&this.endAttributes(),++this.tags,this.texts=0,this.stack.length>0&&(this.stack[this.stack.length-1].containsTag=!0),this.stack.push({name:r+":"+i,tags:this.tags}),this.started_write&&this.indenter(),this.write("<",r+":"+i),this.startAttributes(),this.started_write=!0,this},endElement:function(){if(!this.tags)return this;var r=this.stack.pop();return this.attributes>0?(this.attribute&&(this.texts&&this.endAttribute(),this.endAttribute()),this.write("/"),this.endAttributes()):(r.containsTag&&this.indenter(),this.write("</",r.name,">")),--this.tags,this.texts=0,this},writeAttribute:function(r,i){return typeof i=="function"&&(i=i()),n(i)?this:this.startAttribute(r).text(i).endAttribute()},writeAttributeNS:function(r,i,a,o){return o||(o=a),typeof o=="function"&&(o=o()),n(o)?this:this.startAttributeNS(r,i,a).text(o).endAttribute()},startAttributes:function(){return this.attributes=1,this},endAttributes:function(){return this.attributes?(this.attribute&&this.endAttribute(),this.attributes=0,this.attribute=0,this.texts=0,this.write(">"),this):this},startAttribute:function(r){if(r=e(r),!r.match(this.name_regex))throw Error("Invalid Parameter");return!this.attributes&&!this.pi?this:this.attribute?this:(this.attribute=1,this.write(" ",r,'="'),this)},startAttributeNS:function(r,i,a){if(r=e(r),i=e(i),!r.match(this.name_regex)||!i.match(this.name_regex))throw Error("Invalid Parameter");return!this.attributes&&!this.pi?this:this.attribute?this:(this.attribute=1,this.write(" ",r+":"+i,'="'),this)},endAttribute:function(){return this.attribute?(this.attribute=0,this.texts=0,this.write('"'),this):this},text:function(r){return r=e(r),!this.tags&&!this.comment&&!this.pi&&!this.cdata?this:this.attributes&&this.attribute?(++this.texts,this.write(r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")),this):(this.attributes&&!this.attribute&&this.endAttributes(),this.comment||this.cdata?this.write(r):this.write(r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),++this.texts,this.started_write=!0,this)},writeComment:function(r){return this.startComment().text(r).endComment()},startComment:function(){return this.comment?this:(this.attributes&&this.endAttributes(),this.indenter(),this.write("<!--"),this.comment=1,this.started_write=!0,this)},endComment:function(){return this.comment?(this.write("-->"),this.comment=0,this):this},writeDocType:function(r,i,a,o){return this.startDocType(r,i,a,o).endDocType()},startDocType:function(r,i,a,o){if(this.dtd||this.tags)return this;if(r=e(r),i=i&&e(i),a=a&&e(a),o=o&&e(o),!r.match(this.name_regex)||i&&!i.match(/^[\w\-][\w\s\-\/\+\:\.]*/)||a&&!a.match(/^[\w\.][\w\-\/\\\:\.]*/)||o&&!o.match(/[\w\s\<\>\+\.\!\#\-\?\*\,\(\)\|]*/))throw Error("Invalid Parameter");return i=i?' PUBLIC "'+i+'"':a?" SYSTEM":"",a=a?' "'+a+'"':"",o=o?" ["+o+"]":"",this.started_write&&this.indenter(),this.write("<!DOCTYPE ",r,i,a,o),this.root=r,this.dtd=1,this.started_write=!0,this},endDocType:function(){return this.dtd?(this.write(">"),this):this},writePI:function(r,i){return this.startPI(r).text(i).endPI()},startPI:function(r){if(r=e(r),!r.match(this.name_regex))throw Error("Invalid Parameter");return this.pi?this:(this.attributes&&this.endAttributes(),this.started_write&&this.indenter(),this.write("<?",r),this.pi=1,this.started_write=!0,this)},endPI:function(){return this.pi?(this.write("?>"),this.pi=0,this):this},writeCData:function(r){return this.startCData().text(r).endCData()},startCData:function(){return this.cdata?this:(this.attributes&&this.endAttributes(),this.indenter(),this.write("<![CDATA["),this.cdata=1,this.started_write=!0,this)},endCData:function(){return this.cdata?(this.write("]]>"),this.cdata=0,this):this},writeRaw:function(r){return r=e(r),!this.tags&&!this.comment&&!this.pi&&!this.cdata?this:this.attributes&&this.attribute?(++this.texts,this.write(r.replace("&","&amp;").replace('"',"&quot;")),this):(this.attributes&&!this.attribute&&this.endAttributes(),++this.texts,this.write(r),this.started_write=!0,this)}},Zo=t,Zo}var Jo,ud;function Uw(){return ud||(ud=1,Jo=Ww()),Jo}var es,ld;function jw(){if(ld)return es;ld=1;var n=be(),e=Er(),t=Uw(),r=ep().sanitizeTagName,i="http://www.gexf.net/1.2draft",a="http:///www.gexf.net/1.1draft/viz",o=new Set(["color","size","x","y","z","shape","thickness"]),s=/^\s*rgba?\s*\(/i,u=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)\s*(?:,\s*([.0-9]*))?\)\s*$/;function l(v){if(!v||typeof v!="string")return{};if(v[0]==="#")return v=v.slice(1),v.length===3?{r:parseInt(v[0]+v[0],16),g:parseInt(v[1]+v[1],16),b:parseInt(v[2]+v[2],16)}:{r:parseInt(v[0]+v[1],16),g:parseInt(v[2]+v[3],16),b:parseInt(v[4]+v[5],16)};if(s.test(v)){var C={};return v=v.match(u),C.r=+v[1],C.g=+v[2],C.b=+v[3],v[4]&&(C.a=+v[4]),C}return{}}function d(v,C,M){var L={},G;for(G in M)G==="label"?L.label=M.label:v==="edge"&&G==="weight"?L.weight=M.weight:o.has(G)?(L.viz=L.viz||{},L.viz[G]=M[G]):(L.attributes=L.attributes||{},L.attributes[G]=M[G]);return L}var f=d.bind(null,"node"),g=d.bind(null,"edge");function m(v){return v<=2147483647&&v>=-2147483647}function w(v){return typeof v>"u"||v===null||v===""||v!==v}function x(v){return w(v)?"empty":Array.isArray(v)?"liststring":typeof v=="boolean"?"boolean":typeof v=="object"?"string":typeof v=="number"?v===(v|0)?m(v)?"integer":"long":"double":"string"}function S(v,C){return v==="liststring"&&Array.isArray(C)?C.join("|"):""+C}function A(v,C){var M=new Array(v.order),L=0;return v.forEachNode(function(G,$){var N=C(G,$);N.key=G,M[L++]=N}),M}function b(v,C){var M=new Array(v.size),L=0;return v.forEachEdge(function(G,$,N,Y,V,F,I){var T=C(G,$);T.key=G,T.source=N,T.target=Y,T.undirected=I,M[L++]=T}),M}function _(v){for(var C={},M,L,G,$=0,N=v.length;$<N;$++)if(M=v[$].attributes,!!M)for(G in M)L=x(M[G]),L!=="empty"&&(C[G]?C[G]==="integer"&&L==="long"?C[G]=L:C[G]!==L&&(C[G]="string"):C[G]=L);return C}function y(v,C,M){var L;if(Object.keys(C).length){v.startElement("attributes"),v.writeAttribute("class",M);for(L in C)v.startElement("attribute"),v.writeAttribute("id",L),v.writeAttribute("title",L),v.writeAttribute("type",C[L]),v.endElement();v.endElement()}}function D(v,C,M,L){var G=!Object.keys(M).length,$,N,Y,V,F,I,T,j,X,W,q;for(v.startElement(C+"s"),W=0,q=L.length;W<q;W++){if($=L[W],I=$.attributes,j=$.viz,v.startElement(C),v.writeAttribute("id",$.key),C==="edge"&&(F=$.undirected?"undirected":"directed",F!==v.defaultEdgeType&&v.writeAttribute("type",F),v.writeAttribute("source",$.source),v.writeAttribute("target",$.target),T=$.weight,(typeof T=="number"&&!isNaN(T)||typeof T=="string")&&v.writeAttribute("weight",$.weight)),$.label&&v.writeAttribute("label",$.label),!G&&I){v.startElement("attvalues");for(N in M)if(N in I){if(V=I[N],w(V))continue;v.startElement("attvalue"),v.writeAttribute("for",N),v.writeAttribute("value",S(M[N],V)),v.endElement()}v.endElement()}if(j){if(j.color){Y=l(j.color),v.startElementNS("viz","color");for(X in Y)v.writeAttribute(X,Y[X]);v.endElement()}"size"in j&&(v.startElementNS("viz","size"),v.writeAttribute("value",j.size),v.endElement()),("x"in j||"y"in j||"z"in j)&&(v.startElementNS("viz","position"),"x"in j&&v.writeAttribute("x",j.x),"y"in j&&v.writeAttribute("y",j.y),"z"in j&&v.writeAttribute("z",j.z),v.endElement()),j.shape&&(v.startElementNS("viz","shape"),v.writeAttribute("value",j.shape),v.endElement()),"thickness"in j&&(v.startElementNS("viz","thickness"),v.writeAttribute("value",j.thickness),v.endElement())}v.endElement()}v.endElement()}var R={encoding:"UTF-8",pretty:!0,formatNode:f,formatEdge:g};return es=function(C,M){if(!n(C))throw new Error("graphology-gexf/writer: invalid graphology instance.");M=M||{};var L=M.pretty===!1?!1:"  ",G=M.formatNode||R.formatNode,$=M.formatEdge||R.formatEdge,N=new t(L);N.startDocument("1.0",M.encoding||R.encoding),N.startElement("gexf"),N.writeAttribute("version","1.2"),N.writeAttribute("xmlns",i),N.writeAttribute("xmlns:viz",a),N.startElement("meta");var Y=C.getAttributes();Y.lastModifiedDate&&N.writeAttribute("lastmodifieddate",Y.lastModifiedDate);var V,F;for(var I in Y)I!=="lastModifiedDate"&&(V=r(I),V&&(F=Y[I],(typeof F=="string"||typeof F=="number"||typeof F=="boolean")&&N.writeElement(V,""+F)));N.endElement(),N.startElement("graph");var T=e(C);N.defaultEdgeType=T==="mixed"?"directed":T,N.writeAttribute("defaultedgetype",N.defaultEdgeType);var j=A(C,G),X=b(C,$),W=_(j);y(N,W,"node");var q=_(X);return y(N,q,"edge"),D(N,"node",W,j),D(N,"edge",q,X),N.toString()},es}var cd;function Bw(){return cd||(cd=1,Zn.parse=Fw(),Zn.write=jw()),Zn}var ts={},rs={},hd;function Hw(){if(hd)return rs;hd=1;function n(i){return("0"+(i|0).toString(16)).slice(-2)}function e(i,a,o){return"#"+n(i)+n(a)+n(o)}function t(i){var a={};for(var o in i)o==="r"||o==="g"||o==="b"||(a[o]=i[o]);return a}function r(i){var a;return typeof i.r=="number"&&typeof i.g=="number"&&typeof i.b=="number"?(a=t(i),a.color=e(i.r,i.g,i.b),a):i}return rs.DEFAULT_FORMATTER=r,rs}var ns,dd;function Kw(){if(dd)return ns;dd=1;var n=Je(),e=It().mergeEdge,t=ru(),r=nu(),i=Hw(),a=i.DEFAULT_FORMATTER;function o(g){return+g}function s(g){return g}var u={boolean:function(g){return g.toLowerCase()==="true"},int:o,long:o,float:o,double:o,string:s};function l(g){for(var m=g.childNodes,w=[],x,S=0,A=m.length;S<A;S++)if(x=m[S],x.nodeType===1){if(x.tagName.toLowerCase()!=="data")break;w.push(x)}return w}function d(g){var m,w,x,S,A,b,_,y,D,R={graph:{},node:{},edge:{}},v={graph:{},node:{},edge:{}};for(m=0,w=g.length;m<w;m++)_=g[m],x=_.getAttribute("for")||"node",S=_.getAttribute("id"),A=_.getAttribute("attr.name"),b=_.getAttribute("attr.type")||"string",D=void 0,y=_.getElementsByTagName("default"),y.length!==0&&(D=y[0].textContent),R[x][S]={name:A,cast:u[b]},typeof D<"u"&&(v[x][A]=D);return{models:R,defaults:v}}function f(g,m,w){var x=w.getElementsByTagName("data"),S,A,b,_,y,D={};for(A=0,b=x.length;A<b;A++)S=x[A],_=S.getAttribute("key"),y=g[_],typeof y>"u"?D[_]=S.textContent:D[y.name]=y.cast(S.textContent);for(_ in m)_ in D||(D[_]=m[_]);return D}return ns=function(m,w){return function(S,A,b){b=b||{};var _=b.addMissingNodes===!0,y,D=A;if(!n(S))throw new Error("graphology-graphml/parser: invalid Graph constructor.");if(typeof A=="string"&&(D=new m().parseFromString(A,"application/xml")),!(D instanceof w))throw new Error("graphology-gexf/parser: source should either be a XML document or a string.");var R=D.getElementsByTagName("graph")[0],v=l(R),C=D.getElementsByTagName("key"),M=D.getElementsByTagName("node"),L=D.getElementsByTagName("edge"),G=R.getAttribute("edgedefault")||"undirected",$=d(C),N=new S({type:G}),Y=R.getAttribute("id");Y&&N.setAttribute("id",Y);var V=D.createElement("graph");v.forEach(function(oe){V.appendChild(oe)});var F=f($.models.graph,$.defaults.graph,V);N.mergeAttributes(F);var I,T,j,X,W;for(I=0,T=M.length;I<T;I++)j=M[I],X=j.getAttribute("id"),W=f($.models.node,$.defaults.node,j),W=a(W),N.addNode(X,W);var q,H,J,ie;for(I=0,T=L.length;I<T;I++)if(q=L[I],X=q.getAttribute("id"),H=q.getAttribute("source"),J=q.getAttribute("target"),ie=q.getAttribute("directed")==="true"?"directed":G,W=f($.models.edge,$.defaults.edge,q),W=a(W),!N.type!=="mixed"&&ie!==N.type&&(N=t(N)),N.multi||(ie==="undirected"?N.hasUndirectedEdge(H,J)&&(N=r(N)):N.hasDirectedEdge(H,J)&&(N=r(N))),y=e(N,ie==="undirected",X||null,H,J,W),!_&&(y[2]||y[3]))throw new Error("graphology-graphml/parser: one of your graphml file edges points to an inexisting node. Set the parser `addMissingNodes` option to `true` if you do not care.");return N}},ns}var is,fd;function Xw(){if(fd)return is;fd=1;var n=Kw();return is=n(DOMParser,Document),is}var pd;function Yw(){return pd||(pd=1,ts.parse=Xw()),ts}var gd;function Vw(){return gd||(gd=1,We.assertions=Df(),We.canvas=Qm(),We.communitiesLouvain=nb(),We.components=ib(),We.generators=bb(),We.layout=Pf(),We.layoutForce=kb(),We.layoutForceAtlas2=Cb(),We.layoutNoverlap=Mb(),We.metrics=aw(),We.operators=fw(),We.shortestPath=vw(),We.simplePath=bw(),We.traversal=Aw(),We.utils=Jf(),We.ForceLayout=Rw(),We.FA2Layout=Pw(),We.NoverlapLayout=Ow(),We.gexf=Bw(),We.graphml=Yw()),We}Vw();class Qw{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.appSettings.settings,this._canvas={main:{canvas:rt("#main-canvas").node(),ctx:rt("#main-canvas").node().getContext("2d")},node:{canvas:rt("#node-canvas").node(),ctx:rt("#node-canvas").node().getContext("2d")},edge:{canvas:rt("#edge-canvas").node(),ctx:rt("#edge-canvas").node().getContext("2d")},face:{canvas:rt("#face-canvas").node(),ctx:rt("#face-canvas").node().getContext("2d")}},this.canvas=rt("#main-canvas").node(),this.ctx=this.canvas.getContext("2d"),this.mouse={x:0,y:0,dragging:!1}}init(){this.updateCanvasSize(window.innerWidth,window.innerHeight),this.canvas.addEventListener("dblclick",this.handleDbclick.bind(this)),this.canvas.addEventListener("click",this.handleclick.bind(this));let e=0;this.canvas.addEventListener("touchend",t=>{const r=new Date().getTime(),i=r-e;i<300&&i>0&&this.handleDbclick(t),e=r}),rt("#main-canvas").on("mousedown",t=>{this.mouse.dragging=!1,[this.mouse.x,this.mouse.y]=yt(t)}).on("mousemove",t=>{const[r,i]=yt(t);(Math.abs(r-this.mouse.x)>2||Math.abs(i-this.mouse.y)>2)&&(this.mouse.dragging=!0)}).on("mouseup",t=>{this.mouse.dragging||([this.mouse.x,this.mouse.y]=yt(t))}),rt(this.canvas).call(_0().container(this.canvas).subject(this.dragsubject.bind(this)).filter(t=>!(this.settings.scale||this.settings.select)).on("start",this.dragstarted.bind(this)).on("drag",this.dragged.bind(this)).on("end",this.dragended.bind(this)))}updateCanvasSize(e,t){for(const r in this._canvas)this._canvas[r].canvas.width=e,this._canvas[r].canvas.height=t}addNodeAtEvent(e){e.preventDefault();const[t,r]=e.type=="touchend"?vd(e,this.canvas):yt(e,this.canvas),i=[...new Set(this.app.graphManager.graphs.all.flatMap(s=>s.nodes()))],a=Hi(i),o=hn(a);this.app.graphManager.addNode(a,{x:t,y:r,color:this.settings.node_color,label:o})}addNodeConnectedToNode(e){const t=[...new Set(this.app.graphManager.graphs.all.flatMap(o=>o.nodes()))],r=Hi(t),i=hn(r),a={x:e.x+30,y:e.y+30,color:this.settings.node_color,label:i};this.app.graphManager.addNode(r,a),this.app.graphManager.graph.addEdge(e.id,r),this.app.graphManager.saveGraphState()}dragsubject(e){let t={id:null},r=1/0;return this.app.nodes.forEach(i=>{const a=e.x-i.x,o=e.y-i.y,s=Math.sqrt(a*a+o*o);s<this.settings.node_radius*i.size&&s<r&&(r=s,t=i)}),t&&(this.settings.component?t.component=this.app.graphManager.metric.getComponent(t.id):t.component=this.app.graphManager.graph.getSelectedNodes()),this.settings.panning&&(t.component=this.app.graphManager.graph.nodes()),t}dragstarted(e){!e.active&&this.settings.forceSimulation&&this.app.simulation.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y,e.subject.__moved=!1,e.subject.id!==null&&(this.app.graphManager.update=!0,this.canvas.style.cursor="grab")}dragged(e){if(e.subject.fx=e.x,e.subject.fy=e.y,(e.dx!==0||e.dy!==0)&&(e.subject.__moved=!0),!this.settings.forceSimulation&&e.subject.component){for(let t of e.subject.component)this.app.graphManager.graph.updateNodeAttributes(t,r=>({...r,x:r.x+e.dx,y:r.y+e.dy})),this.app.graphManager.needsRedraw={node:!0,edge:!0,face:!0};e.subject.id!==null&&!this.settings.performance&&(this.canvas.style.cursor="grabbing",this.app.graphManager.graph.updateNodeAttributes(e.subject.id,t=>({...t,x:e.x,y:e.y})),this.app.graphManager.needsRedraw={node:!0,edge:!0,face:!0}),e.subject.id!==null&&this.settings.performance&&(this.canvas.style.cursor="grabbing",this.app.graphManager.graph.updateNodeAttributes(e.subject.id,t=>({...t,x:e.x,y:e.y})),this.app.graphManager.needsRedraw={node:!0})}}dragended(e){e.active||this.app.simulation.alphaTarget(0),e.subject.fx=null,e.subject.fy=null,e.subject.x=e.x,e.subject.y=e.y,this.canvas.style.cursor="default",this.settings.forceSimulation||this.app.updateSimulation(),e.subject.__moved&&e.subject.id&&!this.settings.forceSimulation&&e.subject.id!==null&&this.app.graphManager.graph.updateNodeAttributes(e.subject.id,t=>({...t,x:e.x,y:e.y})),(e.subject.component.length||e.subject.id)&&this.app.graphManager.saveGraphState()}findClickedNode(e,t){return this.app.nodes.find(r=>{let i=e-r.x,a=t-r.y;return Math.sqrt(i*i+a*a)<this.settings.node_radius*r.size})}findClickedEdge(e,t){let r=10;return this.app.links.find(i=>{let a=i.source,o=i.target;return qm(e,t,a.x,a.y,o.x,o.y)<r})}insertNodeInEdge(e){const t=[...new Set(this.app.graphManager.graphs.all.flatMap(s=>s.nodes()))],r=Hi(t),i=hn(r);let a=(e.source.x+e.target.x)/2,o=(e.source.y+e.target.y)/2;this.app.graphManager.graph.addNode(r,{x:a,y:o,color:this.settings.color,label:i}),this.app.graphManager.graph.dropEdge(e.source.id,e.target.id),this.app.graphManager.graph.addEdge(e.source.id,r),this.app.graphManager.graph.addEdge(r,e.target.id),this.app.graphManager.saveGraphState()}handleDbclick(e){const[t,r]=e.type=="touchend"?vd(e,this.canvas):yt(e,this.canvas);let i=this.findClickedNode(t,r),a=this.findClickedEdge(t,r);i?this.settings.tree?this.addNodeConnectedToNode(i):this.app.graphManager.graph.toggleNodeSelection(i.id):a?this.settings.tree?this.insertNodeInEdge(a):this.app.graphManager.graph.findEdge(a.source.id,a.target.id,o=>{this.app.graphManager.graph.toggleEdgeSelection(o)}):this.addNodeAtEvent(e)}handleclick(e){if(this.mouse.dragging)return;let[t,r]=yt(e,this.canvas),i=this.findClickedNode(t,r),a=this.findClickedEdge(t,r);i?this.settings.select?(this.app.graphManager.graph.toggleNodeSelection(i.id),this.settings.forceSimulation||this.eventBus.emit("graph:updated",{type:"selected"})):(this.app.graphManager.metric.addNEFGInfo(i),this.settings.colorPicker&&(this.app.colorPicker.setColor("node",i.color),this.app.colorPicker.setColor("stroke",i.stroke),this.app.colorPicker.setColor("label",i.labelColor))):a?this.settings.select?this.app.graphManager.graph.findEdge(a.source.id,a.target.id,o=>{this.app.graphManager.graph.toggleEdgeSelection(o)}):(this.app.graphManager.metric.addNEFGInfo(a),this.settings.colorPicker&&(this.app.colorPicker.setColor("edge",a.color),this.app.colorPicker.setColor("label",a.labelColor))):(this.app.graphManager.deselectAll(),this.app.rect.scale.active=!1)}}function vd(n,e){const t=n.changedTouches[0],r=e.getBoundingClientRect();return[t.clientX-r.left,t.clientY-r.top]}var ei={exports:{}},yd;function Zw(){if(yd)return ei.exports;yd=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(D,R,v){return Function.prototype.apply.call(D,R,v)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(D){return Object.getOwnPropertyNames(D).concat(Object.getOwnPropertySymbols(D))}:t=function(D){return Object.getOwnPropertyNames(D)};function r(y){console&&console.warn&&console.warn(y)}var i=Number.isNaN||function(D){return D!==D};function a(){a.init.call(this)}ei.exports=a,ei.exports.once=A,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function s(y){if(typeof y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof y)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(y){if(typeof y!="number"||y<0||i(y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+y+".");o=y}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(D){if(typeof D!="number"||D<0||i(D))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+D+".");return this._maxListeners=D,this};function u(y){return y._maxListeners===void 0?a.defaultMaxListeners:y._maxListeners}a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(D){for(var R=[],v=1;v<arguments.length;v++)R.push(arguments[v]);var C=D==="error",M=this._events;if(M!==void 0)C=C&&M.error===void 0;else if(!C)return!1;if(C){var L;if(R.length>0&&(L=R[0]),L instanceof Error)throw L;var G=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw G.context=L,G}var $=M[D];if($===void 0)return!1;if(typeof $=="function")e($,this,R);else for(var N=$.length,Y=w($,N),v=0;v<N;++v)e(Y[v],this,R);return!0};function l(y,D,R,v){var C,M,L;if(s(R),M=y._events,M===void 0?(M=y._events=Object.create(null),y._eventsCount=0):(M.newListener!==void 0&&(y.emit("newListener",D,R.listener?R.listener:R),M=y._events),L=M[D]),L===void 0)L=M[D]=R,++y._eventsCount;else if(typeof L=="function"?L=M[D]=v?[R,L]:[L,R]:v?L.unshift(R):L.push(R),C=u(y),C>0&&L.length>C&&!L.warned){L.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(D)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=y,G.type=D,G.count=L.length,r(G)}return y}a.prototype.addListener=function(D,R){return l(this,D,R,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(D,R){return l(this,D,R,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(y,D,R){var v={fired:!1,wrapFn:void 0,target:y,type:D,listener:R},C=d.bind(v);return C.listener=R,v.wrapFn=C,C}a.prototype.once=function(D,R){return s(R),this.on(D,f(this,D,R)),this},a.prototype.prependOnceListener=function(D,R){return s(R),this.prependListener(D,f(this,D,R)),this},a.prototype.removeListener=function(D,R){var v,C,M,L,G;if(s(R),C=this._events,C===void 0)return this;if(v=C[D],v===void 0)return this;if(v===R||v.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete C[D],C.removeListener&&this.emit("removeListener",D,v.listener||R));else if(typeof v!="function"){for(M=-1,L=v.length-1;L>=0;L--)if(v[L]===R||v[L].listener===R){G=v[L].listener,M=L;break}if(M<0)return this;M===0?v.shift():x(v,M),v.length===1&&(C[D]=v[0]),C.removeListener!==void 0&&this.emit("removeListener",D,G||R)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(D){var R,v,C;if(v=this._events,v===void 0)return this;if(v.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):v[D]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete v[D]),this;if(arguments.length===0){var M=Object.keys(v),L;for(C=0;C<M.length;++C)L=M[C],L!=="removeListener"&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=v[D],typeof R=="function")this.removeListener(D,R);else if(R!==void 0)for(C=R.length-1;C>=0;C--)this.removeListener(D,R[C]);return this};function g(y,D,R){var v=y._events;if(v===void 0)return[];var C=v[D];return C===void 0?[]:typeof C=="function"?R?[C.listener||C]:[C]:R?S(C):w(C,C.length)}a.prototype.listeners=function(D){return g(this,D,!0)},a.prototype.rawListeners=function(D){return g(this,D,!1)},a.listenerCount=function(y,D){return typeof y.listenerCount=="function"?y.listenerCount(D):m.call(y,D)},a.prototype.listenerCount=m;function m(y){var D=this._events;if(D!==void 0){var R=D[y];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function w(y,D){for(var R=new Array(D),v=0;v<D;++v)R[v]=y[v];return R}function x(y,D){for(;D+1<y.length;D++)y[D]=y[D+1];y.pop()}function S(y){for(var D=new Array(y.length),R=0;R<D.length;++R)D[R]=y[R].listener||y[R];return D}function A(y,D){return new Promise(function(R,v){function C(L){y.removeListener(D,M),v(L)}function M(){typeof y.removeListener=="function"&&y.removeListener("error",C),R([].slice.call(arguments))}_(y,D,M,{once:!0}),D!=="error"&&b(y,C,{once:!0})})}function b(y,D,R){typeof y.on=="function"&&_(y,"error",D,R)}function _(y,D,R,v){if(typeof y.on=="function")v.once?y.once(D,R):y.on(D,R);else if(typeof y.addEventListener=="function")y.addEventListener(D,function C(M){v.once&&y.removeEventListener(D,C),R(M)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof y)}return ei.exports}var Jw=Zw(),e1=Qt();const bt=ot(e1);var as,md;function tp(){if(md)return as;md=1;var n=Qt(),e=jf(),t=e.ARRAY_BUFFER_SUPPORT,r=e.SYMBOL_SUPPORT;function i(a){return typeof a=="string"||Array.isArray(a)||t&&ArrayBuffer.isView(a)?n.fromSequence(a):typeof a!="object"||a===null?null:r&&typeof a[Symbol.iterator]=="function"?a[Symbol.iterator]():typeof a.next=="function"?a:null}return as=function(o){var s=i(o);if(!s)throw new Error("obliterator: target is not iterable nor a valid iterator.");return s},as}var os,bd;function t1(){if(bd)return os;bd=1;var n=tp();return os=function(t,r){for(var i=arguments.length>1?r:1/0,a=i!==1/0?new Array(i):[],o,s=0,u=n(t);;){if(s===i)return a;if(o=u.next(),o.done)return s!==r&&(a.length=s),a;a[s++]=o.value}},os}var r1=t1();const rp=ot(r1);var ss,wd;function n1(){if(wd)return ss;wd=1;var n=Qt(),e=tp();return ss=function(){var r=arguments,i=null,a=-1;return new n(function(){var s=null;do{if(i===null){if(a++,a>=r.length)return{done:!0};i=e(r[a])}if(s=i.next(),s.done===!0){i=null;continue}break}while(!0);return s})},ss}var i1=n1();const Yt=ot(i1);function a1(){const n=arguments[0];for(let e=1,t=arguments.length;e<t;e++)if(arguments[e])for(const r in arguments[e])n[r]=arguments[e][r];return n}let He=a1;typeof Object.assign=="function"&&(He=Object.assign);function mt(n,e,t,r){const i=n._nodes.get(e);let a=null;return i&&(r==="mixed"?a=i.out&&i.out[t]||i.undirected&&i.undirected[t]:r==="directed"?a=i.out&&i.out[t]:a=i.undirected&&i.undirected[t]),a}function Ye(n){return typeof n=="object"&&n!==null}function np(n){let e;for(e in n)return!1;return!0}function gt(n,e,t){Object.defineProperty(n,e,{enumerable:!1,configurable:!1,writable:!0,value:t})}function kt(n,e,t){const r={enumerable:!0,configurable:!0};typeof t=="function"?r.get=t:(r.value=t,r.writable=!1),Object.defineProperty(n,e,r)}function Ed(n){return!(!Ye(n)||n.attributes&&!Array.isArray(n.attributes))}function o1(){let n=Math.floor(Math.random()*256)&255;return()=>n++}class iu extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}let me=class ip extends iu{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ip.prototype.constructor)}};class de extends iu{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,de.prototype.constructor)}}class _e extends iu{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,_e.prototype.constructor)}}function ap(n,e){this.key=n,this.attributes=e,this.clear()}ap.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function op(n,e){this.key=n,this.attributes=e,this.clear()}op.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function sp(n,e){this.key=n,this.attributes=e,this.clear()}sp.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Fr(n,e,t,r,i){this.key=e,this.attributes=i,this.undirected=n,this.source=t,this.target=r}Fr.prototype.attach=function(){let n="out",e="in";this.undirected&&(n=e="undirected");const t=this.source.key,r=this.target.key;this.source[n][r]=this,!(this.undirected&&t===r)&&(this.target[e][t]=this)};Fr.prototype.attachMulti=function(){let n="out",e="in";const t=this.source.key,r=this.target.key;this.undirected&&(n=e="undirected");const i=this.source[n],a=i[r];if(typeof a>"u"){i[r]=this,this.undirected&&t===r||(this.target[e][t]=this);return}a.previous=this,this.next=a,i[r]=this,this.target[e][t]=this};Fr.prototype.detach=function(){const n=this.source.key,e=this.target.key;let t="out",r="in";this.undirected&&(t=r="undirected"),delete this.source[t][e],delete this.target[r][n]};Fr.prototype.detachMulti=function(){const n=this.source.key,e=this.target.key;let t="out",r="in";this.undirected&&(t=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][e],delete this.target[r][n]):(this.next.previous=void 0,this.source[t][e]=this.next,this.target[r][n]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const up=0,lp=1,s1=2,cp=3;function Zt(n,e,t,r,i,a,o){let s,u,l,d;if(r=""+r,t===up){if(s=n._nodes.get(r),!s)throw new de(`Graph.${e}: could not find the "${r}" node in the graph.`);l=i,d=a}else if(t===cp){if(i=""+i,u=n._edges.get(i),!u)throw new de(`Graph.${e}: could not find the "${i}" edge in the graph.`);const f=u.source.key,g=u.target.key;if(r===f)s=u.target;else if(r===g)s=u.source;else throw new de(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${f}, ${g}).`);l=a,d=o}else{if(u=n._edges.get(r),!u)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`);t===lp?s=u.source:s=u.target,l=i,d=a}return[s,l,d]}function u1(n,e,t){n.prototype[e]=function(r,i,a){const[o,s]=Zt(this,e,t,r,i,a);return o.attributes[s]}}function l1(n,e,t){n.prototype[e]=function(r,i){const[a]=Zt(this,e,t,r,i);return a.attributes}}function c1(n,e,t){n.prototype[e]=function(r,i,a){const[o,s]=Zt(this,e,t,r,i,a);return o.attributes.hasOwnProperty(s)}}function h1(n,e,t){n.prototype[e]=function(r,i,a,o){const[s,u,l]=Zt(this,e,t,r,i,a,o);return s.attributes[u]=l,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:u}),this}}function d1(n,e,t){n.prototype[e]=function(r,i,a,o){const[s,u,l]=Zt(this,e,t,r,i,a,o);if(typeof l!="function")throw new me(`Graph.${e}: updater should be a function.`);const d=s.attributes,f=l(d[u]);return d[u]=f,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:u}),this}}function f1(n,e,t){n.prototype[e]=function(r,i,a){const[o,s]=Zt(this,e,t,r,i,a);return delete o.attributes[s],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:s}),this}}function p1(n,e,t){n.prototype[e]=function(r,i,a){const[o,s]=Zt(this,e,t,r,i,a);if(!Ye(s))throw new me(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=s,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function g1(n,e,t){n.prototype[e]=function(r,i,a){const[o,s]=Zt(this,e,t,r,i,a);if(!Ye(s))throw new me(`Graph.${e}: provided attributes are not a plain object.`);return He(o.attributes,s),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:s}),this}}function v1(n,e,t){n.prototype[e]=function(r,i,a){const[o,s]=Zt(this,e,t,r,i,a);if(typeof s!="function")throw new me(`Graph.${e}: provided updater is not a function.`);return o.attributes=s(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const y1=[{name:n=>`get${n}Attribute`,attacher:u1},{name:n=>`get${n}Attributes`,attacher:l1},{name:n=>`has${n}Attribute`,attacher:c1},{name:n=>`set${n}Attribute`,attacher:h1},{name:n=>`update${n}Attribute`,attacher:d1},{name:n=>`remove${n}Attribute`,attacher:f1},{name:n=>`replace${n}Attributes`,attacher:p1},{name:n=>`merge${n}Attributes`,attacher:g1},{name:n=>`update${n}Attributes`,attacher:v1}];function m1(n){y1.forEach(function({name:e,attacher:t}){t(n,e("Node"),up),t(n,e("Source"),lp),t(n,e("Target"),s1),t(n,e("Opposite"),cp)})}function b1(n,e,t){n.prototype[e]=function(r,i){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new _e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,s=""+i;if(i=arguments[2],a=mt(this,o,s,t),!a)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(t!=="mixed")throw new _e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return a.attributes[i]}}function w1(n,e,t){n.prototype[e]=function(r){let i;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new _e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,o=""+arguments[1];if(i=mt(this,a,o,t),!i)throw new de(`Graph.${e}: could not find an edge for the given path ("${a}" - "${o}").`)}else{if(t!=="mixed")throw new _e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function E1(n,e,t){n.prototype[e]=function(r,i){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new _e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,s=""+i;if(i=arguments[2],a=mt(this,o,s,t),!a)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(t!=="mixed")throw new _e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return a.attributes.hasOwnProperty(i)}}function x1(n,e,t){n.prototype[e]=function(r,i,a){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new _e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+i;if(i=arguments[2],a=arguments[3],o=mt(this,s,u,t),!o)throw new de(`Graph.${e}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(t!=="mixed")throw new _e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]=a,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function S1(n,e,t){n.prototype[e]=function(r,i,a){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new _e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+i;if(i=arguments[2],a=arguments[3],o=mt(this,s,u,t),!o)throw new de(`Graph.${e}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(t!=="mixed")throw new _e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof a!="function")throw new me(`Graph.${e}: updater should be a function.`);return o.attributes[i]=a(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function A1(n,e,t){n.prototype[e]=function(r,i){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new _e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,s=""+i;if(i=arguments[2],a=mt(this,o,s,t),!a)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(t!=="mixed")throw new _e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete a.attributes[i],this.emit("edgeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:i}),this}}function _1(n,e,t){n.prototype[e]=function(r,i){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new _e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,s=""+i;if(i=arguments[2],a=mt(this,o,s,t),!a)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(t!=="mixed")throw new _e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Ye(i))throw new me(`Graph.${e}: provided attributes are not a plain object.`);return a.attributes=i,this.emit("edgeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function k1(n,e,t){n.prototype[e]=function(r,i){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new _e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,s=""+i;if(i=arguments[2],a=mt(this,o,s,t),!a)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(t!=="mixed")throw new _e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Ye(i))throw new me(`Graph.${e}: provided attributes are not a plain object.`);return He(a.attributes,i),this.emit("edgeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:i}),this}}function D1(n,e,t){n.prototype[e]=function(r,i){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new _e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,s=""+i;if(i=arguments[2],a=mt(this,o,s,t),!a)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(t!=="mixed")throw new _e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new me(`Graph.${e}: provided updater is not a function.`);return a.attributes=i(a.attributes),this.emit("edgeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const C1=[{name:n=>`get${n}Attribute`,attacher:b1},{name:n=>`get${n}Attributes`,attacher:w1},{name:n=>`has${n}Attribute`,attacher:E1},{name:n=>`set${n}Attribute`,attacher:x1},{name:n=>`update${n}Attribute`,attacher:S1},{name:n=>`remove${n}Attribute`,attacher:A1},{name:n=>`replace${n}Attributes`,attacher:_1},{name:n=>`merge${n}Attributes`,attacher:k1},{name:n=>`update${n}Attributes`,attacher:D1}];function I1(n){C1.forEach(function({name:e,attacher:t}){t(n,e("Edge"),"mixed"),t(n,e("DirectedEdge"),"directed"),t(n,e("UndirectedEdge"),"undirected")})}const M1=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function L1(n,e,t,r){let i=!1;for(const a in e){if(a===r)continue;const o=e[a];if(i=t(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),n&&i)return o.key}}function z1(n,e,t,r){let i,a,o,s=!1;for(const u in e)if(u!==r){i=e[u];do{if(a=i.source,o=i.target,s=t(i.key,i.attributes,a.key,o.key,a.attributes,o.attributes,i.undirected),n&&s)return i.key;i=i.next}while(i!==void 0)}}function us(n,e){const t=Object.keys(n),r=t.length;let i,a=0;return new bt(function(){do if(i)i=i.next;else{if(a>=r)return{done:!0};const s=t[a++];if(s===e){i=void 0;continue}i=n[s]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function T1(n,e,t,r){const i=e[t];if(!i)return;const a=i.source,o=i.target;if(r(i.key,i.attributes,a.key,o.key,a.attributes,o.attributes,i.undirected)&&n)return i.key}function N1(n,e,t,r){let i=e[t];if(!i)return;let a=!1;do{if(a=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),n&&a)return i.key;i=i.next}while(i!==void 0)}function ls(n,e){let t=n[e];return t.next!==void 0?new bt(function(){if(!t)return{done:!0};const r={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:r}}):bt.of({edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected})}function R1(n,e){if(n.size===0)return[];if(e==="mixed"||e===n.type)return typeof Array.from=="function"?Array.from(n._edges.keys()):rp(n._edges.keys(),n._edges.size);const t=e==="undirected"?n.undirectedSize:n.directedSize,r=new Array(t),i=e==="undirected",a=n._edges.values();let o=0,s,u;for(;s=a.next(),s.done!==!0;)u=s.value,u.undirected===i&&(r[o++]=u.key);return r}function hp(n,e,t,r){if(e.size===0)return;const i=t!=="mixed"&&t!==e.type,a=t==="undirected";let o,s,u=!1;const l=e._edges.values();for(;o=l.next(),o.done!==!0;){if(s=o.value,i&&s.undirected!==a)continue;const{key:d,attributes:f,source:g,target:m}=s;if(u=r(d,f,g.key,m.key,g.attributes,m.attributes,s.undirected),n&&u)return d}}function G1(n,e){if(n.size===0)return bt.empty();const t=e!=="mixed"&&e!==n.type,r=e==="undirected",i=n._edges.values();return new bt(function(){let o,s;for(;;){if(o=i.next(),o.done)return o;if(s=o.value,!(t&&s.undirected!==r))break}return{value:{edge:s.key,attributes:s.attributes,source:s.source.key,target:s.target.key,sourceAttributes:s.source.attributes,targetAttributes:s.target.attributes,undirected:s.undirected},done:!1}})}function au(n,e,t,r,i,a){const o=e?z1:L1;let s;if(t!=="undirected"&&(r!=="out"&&(s=o(n,i.in,a),n&&s)||r!=="in"&&(s=o(n,i.out,a,r?void 0:i.key),n&&s))||t!=="directed"&&(s=o(n,i.undirected,a),n&&s))return s}function P1(n,e,t,r){const i=[];return au(!1,n,e,t,r,function(a){i.push(a)}),i}function $1(n,e,t){let r=bt.empty();return n!=="undirected"&&(e!=="out"&&typeof t.in<"u"&&(r=Yt(r,us(t.in))),e!=="in"&&typeof t.out<"u"&&(r=Yt(r,us(t.out,e?void 0:t.key)))),n!=="directed"&&typeof t.undirected<"u"&&(r=Yt(r,us(t.undirected))),r}function ou(n,e,t,r,i,a,o){const s=t?N1:T1;let u;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(u=s(n,i.in,a,o),n&&u)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==a)&&(u=s(n,i.out,a,o),n&&u))||e!=="directed"&&typeof i.undirected<"u"&&(u=s(n,i.undirected,a,o),n&&u))return u}function O1(n,e,t,r,i){const a=[];return ou(!1,n,e,t,r,i,function(o){a.push(o)}),a}function q1(n,e,t,r){let i=bt.empty();return n!=="undirected"&&(typeof t.in<"u"&&e!=="out"&&r in t.in&&(i=Yt(i,ls(t.in,r))),typeof t.out<"u"&&e!=="in"&&r in t.out&&(e||t.key!==r)&&(i=Yt(i,ls(t.out,r)))),n!=="directed"&&typeof t.undirected<"u"&&r in t.undirected&&(i=Yt(i,ls(t.undirected,r))),i}function F1(n,e){const{name:t,type:r,direction:i}=e;n.prototype[t]=function(a,o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return R1(this,r);if(arguments.length===1){a=""+a;const s=this._nodes.get(a);if(typeof s>"u")throw new de(`Graph.${t}: could not find the "${a}" node in the graph.`);return P1(this.multi,r==="mixed"?this.type:r,i,s)}if(arguments.length===2){a=""+a,o=""+o;const s=this._nodes.get(a);if(!s)throw new de(`Graph.${t}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(o))throw new de(`Graph.${t}:  could not find the "${o}" target node in the graph.`);return O1(r,this.multi,i,s,o)}throw new me(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function W1(n,e){const{name:t,type:r,direction:i}=e,a="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[a]=function(l,d,f){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return f=l,hp(!1,this,r,f);if(arguments.length===2){l=""+l,f=d;const g=this._nodes.get(l);if(typeof g>"u")throw new de(`Graph.${a}: could not find the "${l}" node in the graph.`);return au(!1,this.multi,r==="mixed"?this.type:r,i,g,f)}if(arguments.length===3){l=""+l,d=""+d;const g=this._nodes.get(l);if(!g)throw new de(`Graph.${a}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(d))throw new de(`Graph.${a}:  could not find the "${d}" target node in the graph.`);return ou(!1,r,this.multi,i,g,d,f)}throw new me(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+t[0].toUpperCase()+t.slice(1);n.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),d=l.pop();let f;if(l.length===0){let g=0;r!=="directed"&&(g+=this.undirectedSize),r!=="undirected"&&(g+=this.directedSize),f=new Array(g);let m=0;l.push((w,x,S,A,b,_,y)=>{f[m++]=d(w,x,S,A,b,_,y)})}else f=[],l.push((g,m,w,x,S,A,b)=>{f.push(d(g,m,w,x,S,A,b))});return this[a].apply(this,l),f};const s="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[s]=function(){const l=Array.prototype.slice.call(arguments),d=l.pop(),f=[];return l.push((g,m,w,x,S,A,b)=>{d(g,m,w,x,S,A,b)&&f.push(g)}),this[a].apply(this,l),f};const u="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[u]=function(){let l=Array.prototype.slice.call(arguments);if(l.length<2||l.length>4)throw new me(`Graph.${u}: invalid number of arguments (expecting 2, 3 or 4 and got ${l.length}).`);if(typeof l[l.length-1]=="function"&&typeof l[l.length-2]!="function")throw new me(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let d,f;l.length===2?(d=l[0],f=l[1],l=[]):l.length===3?(d=l[1],f=l[2],l=[l[0]]):l.length===4&&(d=l[2],f=l[3],l=[l[0],l[1]]);let g=f;return l.push((m,w,x,S,A,b,_)=>{g=d(g,m,w,x,S,A,b,_)}),this[a].apply(this,l),g}}function U1(n,e){const{name:t,type:r,direction:i}=e,a="find"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[a]=function(u,l,d){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return d=u,hp(!0,this,r,d);if(arguments.length===2){u=""+u,d=l;const f=this._nodes.get(u);if(typeof f>"u")throw new de(`Graph.${a}: could not find the "${u}" node in the graph.`);return au(!0,this.multi,r==="mixed"?this.type:r,i,f,d)}if(arguments.length===3){u=""+u,l=""+l;const f=this._nodes.get(u);if(!f)throw new de(`Graph.${a}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(l))throw new de(`Graph.${a}:  could not find the "${l}" target node in the graph.`);return ou(!0,r,this.multi,i,f,l,d)}throw new me(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),l=u.pop();return u.push((f,g,m,w,x,S,A)=>l(f,g,m,w,x,S,A)),!!this[a].apply(this,u)};const s="every"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(){const u=Array.prototype.slice.call(arguments),l=u.pop();return u.push((f,g,m,w,x,S,A)=>!l(f,g,m,w,x,S,A)),!this[a].apply(this,u)}}function j1(n,e){const{name:t,type:r,direction:i}=e,a=t.slice(0,-1)+"Entries";n.prototype[a]=function(o,s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return bt.empty();if(!arguments.length)return G1(this,r);if(arguments.length===1){o=""+o;const u=this._nodes.get(o);if(!u)throw new de(`Graph.${a}: could not find the "${o}" node in the graph.`);return $1(r,i,u)}if(arguments.length===2){o=""+o,s=""+s;const u=this._nodes.get(o);if(!u)throw new de(`Graph.${a}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(s))throw new de(`Graph.${a}:  could not find the "${s}" target node in the graph.`);return q1(r,i,u,s)}throw new me(`Graph.${a}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function B1(n){M1.forEach(e=>{F1(n,e),W1(n,e),U1(n,e),j1(n,e)})}const H1=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function ki(){this.A=null,this.B=null}ki.prototype.wrap=function(n){this.A===null?this.A=n:this.B===null&&(this.B=n)};ki.prototype.has=function(n){return this.A!==null&&n in this.A||this.B!==null&&n in this.B};function nn(n,e,t,r,i){for(const a in r){const o=r[a],s=o.source,u=o.target,l=s===t?u:s;if(e&&e.has(l.key))continue;const d=i(l.key,l.attributes);if(n&&d)return l.key}}function su(n,e,t,r,i){if(e!=="mixed"){if(e==="undirected")return nn(n,null,r,r.undirected,i);if(typeof t=="string")return nn(n,null,r,r[t],i)}const a=new ki;let o;if(e!=="undirected"){if(t!=="out"){if(o=nn(n,null,r,r.in,i),n&&o)return o;a.wrap(r.in)}if(t!=="in"){if(o=nn(n,a,r,r.out,i),n&&o)return o;a.wrap(r.out)}}if(e!=="directed"&&(o=nn(n,a,r,r.undirected,i),n&&o))return o}function K1(n,e,t){if(n!=="mixed"){if(n==="undirected")return Object.keys(t.undirected);if(typeof e=="string")return Object.keys(t[e])}const r=[];return su(!1,n,e,t,function(i){r.push(i)}),r}function an(n,e,t){const r=Object.keys(t),i=r.length;let a=0;return new bt(function(){let s=null;do{if(a>=i)return n&&n.wrap(t),{done:!0};const u=t[r[a++]],l=u.source,d=u.target;if(s=l===e?d:l,n&&n.has(s.key)){s=null;continue}}while(s===null);return{done:!1,value:{neighbor:s.key,attributes:s.attributes}}})}function X1(n,e,t){if(n!=="mixed"){if(n==="undirected")return an(null,t,t.undirected);if(typeof e=="string")return an(null,t,t[e])}let r=bt.empty();const i=new ki;return n!=="undirected"&&(e!=="out"&&(r=Yt(r,an(i,t,t.in))),e!=="in"&&(r=Yt(r,an(i,t,t.out)))),n!=="directed"&&(r=Yt(r,an(i,t,t.undirected))),r}function Y1(n,e){const{name:t,type:r,direction:i}=e;n.prototype[t]=function(a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];a=""+a;const o=this._nodes.get(a);if(typeof o>"u")throw new de(`Graph.${t}: could not find the "${a}" node in the graph.`);return K1(r==="mixed"?this.type:r,i,o)}}function V1(n,e){const{name:t,type:r,direction:i}=e,a="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[a]=function(l,d){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;l=""+l;const f=this._nodes.get(l);if(typeof f>"u")throw new de(`Graph.${a}: could not find the "${l}" node in the graph.`);su(!1,r==="mixed"?this.type:r,i,f,d)};const o="map"+t[0].toUpperCase()+t.slice(1);n.prototype[o]=function(l,d){const f=[];return this[a](l,(g,m)=>{f.push(d(g,m))}),f};const s="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[s]=function(l,d){const f=[];return this[a](l,(g,m)=>{d(g,m)&&f.push(g)}),f};const u="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[u]=function(l,d,f){if(arguments.length<3)throw new me(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let g=f;return this[a](l,(m,w)=>{g=d(g,m,w)}),g}}function Q1(n,e){const{name:t,type:r,direction:i}=e,a=t[0].toUpperCase()+t.slice(1,-1),o="find"+a;n.prototype[o]=function(l,d){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;l=""+l;const f=this._nodes.get(l);if(typeof f>"u")throw new de(`Graph.${o}: could not find the "${l}" node in the graph.`);return su(!0,r==="mixed"?this.type:r,i,f,d)};const s="some"+a;n.prototype[s]=function(l,d){return!!this[o](l,d)};const u="every"+a;n.prototype[u]=function(l,d){return!this[o](l,(g,m)=>!d(g,m))}}function Z1(n,e){const{name:t,type:r,direction:i}=e,a=t.slice(0,-1)+"Entries";n.prototype[a]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return bt.empty();o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new de(`Graph.${a}: could not find the "${o}" node in the graph.`);return X1(r==="mixed"?this.type:r,i,s)}}function J1(n){H1.forEach(e=>{Y1(n,e),V1(n,e),Q1(n,e),Z1(n,e)})}function ti(n,e,t,r,i){const a=r._nodes.values(),o=r.type;let s,u,l,d,f,g;for(;s=a.next(),s.done!==!0;){let m=!1;if(u=s.value,o!=="undirected"){d=u.out;for(l in d){f=d[l];do g=f.target,m=!0,i(u.key,g.key,u.attributes,g.attributes,f.key,f.attributes,f.undirected),f=f.next;while(f)}}if(o!=="directed"){d=u.undirected;for(l in d)if(!(e&&u.key>l)){f=d[l];do g=f.target,g.key!==l&&(g=f.source),m=!0,i(u.key,g.key,u.attributes,g.attributes,f.key,f.attributes,f.undirected),f=f.next;while(f)}}t&&!m&&i(u.key,null,u.attributes,null,null,null,null)}}function eE(n,e){const t={key:n};return np(e.attributes)||(t.attributes=He({},e.attributes)),t}function tE(n,e,t){const r={key:e,source:t.source.key,target:t.target.key};return np(t.attributes)||(r.attributes=He({},t.attributes)),n==="mixed"&&t.undirected&&(r.undirected=!0),r}function rE(n){if(!Ye(n))throw new me('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in n))throw new me("Graph.import: serialized node is missing its key.");if("attributes"in n&&(!Ye(n.attributes)||n.attributes===null))throw new me("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function nE(n){if(!Ye(n))throw new me('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in n))throw new me("Graph.import: serialized edge is missing its source.");if(!("target"in n))throw new me("Graph.import: serialized edge is missing its target.");if("attributes"in n&&(!Ye(n.attributes)||n.attributes===null))throw new me("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in n&&typeof n.undirected!="boolean")throw new me("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const iE=o1(),aE=new Set(["directed","undirected","mixed"]),xd=new Set(["domain","_events","_eventsCount","_maxListeners"]),oE=[{name:n=>`${n}Edge`,generateKey:!0},{name:n=>`${n}DirectedEdge`,generateKey:!0,type:"directed"},{name:n=>`${n}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:n=>`${n}EdgeWithKey`},{name:n=>`${n}DirectedEdgeWithKey`,type:"directed"},{name:n=>`${n}UndirectedEdgeWithKey`,type:"undirected"}],sE={allowSelfLoops:!0,multi:!1,type:"mixed"};function uE(n,e,t){if(t&&!Ye(t))throw new me(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(e=""+e,t=t||{},n._nodes.has(e))throw new _e(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new n.NodeDataClass(e,t);return n._nodes.set(e,r),n.emit("nodeAdded",{key:e,attributes:t}),r}function Sd(n,e,t){const r=new n.NodeDataClass(e,t);return n._nodes.set(e,r),n.emit("nodeAdded",{key:e,attributes:t}),r}function dp(n,e,t,r,i,a,o,s){if(!r&&n.type==="undirected")throw new _e(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&n.type==="directed")throw new _e(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(s&&!Ye(s))throw new me(`Graph.${e}: invalid attributes. Expecting an object but got "${s}"`);if(a=""+a,o=""+o,s=s||{},!n.allowSelfLoops&&a===o)throw new _e(`Graph.${e}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const u=n._nodes.get(a),l=n._nodes.get(o);if(!u)throw new de(`Graph.${e}: source node "${a}" not found.`);if(!l)throw new de(`Graph.${e}: target node "${o}" not found.`);const d={key:null,undirected:r,source:a,target:o,attributes:s};if(t)i=n._edgeKeyGenerator();else if(i=""+i,n._edges.has(i))throw new _e(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!n.multi&&(r?typeof u.undirected[o]<"u":typeof u.out[o]<"u"))throw new _e(`Graph.${e}: an edge linking "${a}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const f=new Fr(r,i,u,l,s);n._edges.set(i,f);const g=a===o;return r?(u.undirectedDegree++,l.undirectedDegree++,g&&(u.undirectedLoops++,n._undirectedSelfLoopCount++)):(u.outDegree++,l.inDegree++,g&&(u.directedLoops++,n._directedSelfLoopCount++)),n.multi?f.attachMulti():f.attach(),r?n._undirectedSize++:n._directedSize++,d.key=i,n.emit("edgeAdded",d),i}function lE(n,e,t,r,i,a,o,s,u){if(!r&&n.type==="undirected")throw new _e(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&n.type==="directed")throw new _e(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(s){if(u){if(typeof s!="function")throw new me(`Graph.${e}: invalid updater function. Expecting a function but got "${s}"`)}else if(!Ye(s))throw new me(`Graph.${e}: invalid attributes. Expecting an object but got "${s}"`)}a=""+a,o=""+o;let l;if(u&&(l=s,s=void 0),!n.allowSelfLoops&&a===o)throw new _e(`Graph.${e}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let d=n._nodes.get(a),f=n._nodes.get(o),g,m;if(!t&&(g=n._edges.get(i),g)){if((g.source.key!==a||g.target.key!==o)&&(!r||g.source.key!==o||g.target.key!==a))throw new _e(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${a}" source & "${o}" target vs. ("${g.source.key}", "${g.target.key}").`);m=g}if(!m&&!n.multi&&d&&(m=r?d.undirected[o]:d.out[o]),m){const b=[m.key,!1,!1,!1];if(u?!l:!s)return b;if(u){const _=m.attributes;m.attributes=l(_),n.emit("edgeAttributesUpdated",{type:"replace",key:m.key,attributes:m.attributes})}else He(m.attributes,s),n.emit("edgeAttributesUpdated",{type:"merge",key:m.key,attributes:m.attributes,data:s});return b}s=s||{},u&&l&&(s=l(s));const w={key:null,undirected:r,source:a,target:o,attributes:s};if(t)i=n._edgeKeyGenerator();else if(i=""+i,n._edges.has(i))throw new _e(`Graph.${e}: the "${i}" edge already exists in the graph.`);let x=!1,S=!1;d||(d=Sd(n,a,{}),x=!0,a===o&&(f=d,S=!0)),f||(f=Sd(n,o,{}),S=!0),g=new Fr(r,i,d,f,s),n._edges.set(i,g);const A=a===o;return r?(d.undirectedDegree++,f.undirectedDegree++,A&&(d.undirectedLoops++,n._undirectedSelfLoopCount++)):(d.outDegree++,f.inDegree++,A&&(d.directedLoops++,n._directedSelfLoopCount++)),n.multi?g.attachMulti():g.attach(),r?n._undirectedSize++:n._directedSize++,w.key=i,n.emit("edgeAdded",w),[i,!0,x,S]}function zr(n,e){n._edges.delete(e.key);const{source:t,target:r,attributes:i}=e,a=e.undirected,o=t===r;a?(t.undirectedDegree--,r.undirectedDegree--,o&&(t.undirectedLoops--,n._undirectedSelfLoopCount--)):(t.outDegree--,r.inDegree--,o&&(t.directedLoops--,n._directedSelfLoopCount--)),n.multi?e.detachMulti():e.detach(),a?n._undirectedSize--:n._directedSize--,n.emit("edgeDropped",{key:e.key,attributes:i,source:t.key,target:r.key,undirected:a})}class Re extends Jw.EventEmitter{constructor(e){if(super(),e=He({},sE,e),typeof e.multi!="boolean")throw new me(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!aE.has(e.type))throw new me(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new me(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const t=e.type==="mixed"?ap:e.type==="directed"?op:sp;gt(this,"NodeDataClass",t);const r="geid_"+iE()+"_";let i=0;const a=()=>{let o;do o=r+i++;while(this._edges.has(o));return o};gt(this,"_attributes",{}),gt(this,"_nodes",new Map),gt(this,"_edges",new Map),gt(this,"_directedSize",0),gt(this,"_undirectedSize",0),gt(this,"_directedSelfLoopCount",0),gt(this,"_undirectedSelfLoopCount",0),gt(this,"_edgeKeyGenerator",a),gt(this,"_options",e),xd.forEach(o=>gt(this,o,this[o])),kt(this,"order",()=>this._nodes.size),kt(this,"size",()=>this._edges.size),kt(this,"directedSize",()=>this._directedSize),kt(this,"undirectedSize",()=>this._undirectedSize),kt(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),kt(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),kt(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),kt(this,"multi",this._options.multi),kt(this,"type",this._options.type),kt(this,"allowSelfLoops",this._options.allowSelfLoops),kt(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(t):!1}throw new me(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(t):!1}throw new me(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(t)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(t):!1}throw new me(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if(this.type==="undirected")return;if(e=""+e,t=""+t,this.multi)throw new _e("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new de(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new de(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const i=r.out&&r.out[t]||void 0;if(i)return i.key}undirectedEdge(e,t){if(this.type==="directed")return;if(e=""+e,t=""+t,this.multi)throw new _e("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new de(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new de(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const i=r.undirected&&r.undirected[t]||void 0;if(i)return i.key}edge(e,t){if(this.multi)throw new _e("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new de(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new de(`Graph.edge: could not find the "${t}" target node in the graph.`);const i=r.out&&r.out[t]||r.undirected&&r.undirected[t]||void 0;if(i)return i.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new de(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.in||t in r.out}areOutNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new de(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.out}areInNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new de(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new de(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:t in r.undirected}areNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new de(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(t in r.in||t in r.out)||this.type!=="directed"&&t in r.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new de(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in r.in||this.type!=="directed"&&t in r.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new de(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in r.out||this.type!=="directed"&&t in r.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new de(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new de(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new de(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new de(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new de(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.inDegree),r}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new de(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.outDegree),r}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new de(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.inDegree+t.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new de(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new de(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new de(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new de(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new de(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=t.undirectedDegree,i+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.inDegree,i+=t.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new de(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=t.undirectedDegree,i+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.outDegree,i+=t.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new de(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=t.undirectedDegree,i+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.inDegree+t.outDegree,i+=t.directedLoops*2),r-i}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new de(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new de(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new de(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const r=this._edges.get(t);if(!r)throw new de(`Graph.opposite: could not find the "${t}" edge in the graph.`);const i=r.source.key,a=r.target.key;if(e===i)return a;if(e===a)return i;throw new de(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${i}, ${a}).`)}hasExtremity(e,t){e=""+e,t=""+t;const r=this._edges.get(e);if(!r)throw new de(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===t||r.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new de(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new de(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new de(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return uE(this,e,t).key}mergeNode(e,t){if(t&&!Ye(t))throw new me(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let r=this._nodes.get(e);return r?(t&&(He(r.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:t})),[e,!1]):(r=new this.NodeDataClass(e,t),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&typeof t!="function")throw new me(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let r=this._nodes.get(e);if(r){if(t){const a=r.attributes;r.attributes=t(a),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=t?t({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new de(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in t.out){r=t.out[i];do zr(this,r),r=r.next;while(r)}for(const i in t.in){r=t.in[i];do zr(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in t.undirected){r=t.undirected[i];do zr(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(t=mt(this,r,i,this.type),!t)throw new de(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new de(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return zr(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new _e("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new _e("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,t=""+t;const r=mt(this,e,t,"directed");if(!r)throw new de(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return zr(this,r),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new _e("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new _e("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=mt(this,e,t,"undirected");if(!r)throw new de(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return zr(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if(typeof t!="function")throw new me("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=t(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Ye(e))throw new me("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Ye(e))throw new me("Graph.mergeAttributes: provided attributes are not a plain object.");return He(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new me("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if(typeof e!="function")throw new me("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!Ed(t))throw new me("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,a;for(;i=r.next(),i.done!==!0;)a=i.value,a.attributes=e(a.key,a.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if(typeof e!="function")throw new me("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!Ed(t))throw new me("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,a,o,s;for(;i=r.next(),i.done!==!0;)a=i.value,o=a.source,s=a.target,a.attributes=e(a.key,a.attributes,o.key,s.key,o.attributes,s.attributes,a.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new me("Graph.forEachAdjacencyEntry: expecting a callback.");ti(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new me("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");ti(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new me("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");ti(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new me("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");ti(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):rp(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new me("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let r,i;for(;r=t.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new me("Graph.findNode: expecting a callback.");const t=this._nodes.values();let r,i;for(;r=t.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new me("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let r,i;const a=new Array(this.order);let o=0;for(;r=t.next(),r.done!==!0;)i=r.value,a[o++]=e(i.key,i.attributes);return a}someNode(e){if(typeof e!="function")throw new me("Graph.someNode: expecting a callback.");const t=this._nodes.values();let r,i;for(;r=t.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new me("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let r,i;for(;r=t.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new me("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let r,i;const a=[];for(;r=t.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&a.push(i.key);return a}reduceNodes(e,t){if(typeof e!="function")throw new me("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new me("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=t;const i=this._nodes.values();let a,o;for(;a=i.next(),a.done!==!0;)o=a.value,r=e(r,o.key,o.attributes);return r}nodeEntries(){const e=this._nodes.values();return new bt(()=>{const t=e.next();if(t.done)return t;const r=t.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach((i,a)=>{e[t++]=eE(a,i)});const r=new Array(this._edges.size);return t=0,this._edges.forEach((i,a)=>{r[t++]=tE(this.type,a,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,t=!1){if(e instanceof Re)return e.forEachNode((u,l)=>{t?this.mergeNode(u,l):this.addNode(u,l)}),e.forEachEdge((u,l,d,f,g,m,w)=>{t?w?this.mergeUndirectedEdgeWithKey(u,d,f,l):this.mergeDirectedEdgeWithKey(u,d,f,l):w?this.addUndirectedEdgeWithKey(u,d,f,l):this.addDirectedEdgeWithKey(u,d,f,l)}),this;if(!Ye(e))throw new me("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Ye(e.attributes))throw new me("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,a,o,s;if(e.nodes){if(a=e.nodes,!Array.isArray(a))throw new me("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=a.length;r<i;r++){o=a[r],rE(o);const{key:u,attributes:l}=o;t?this.mergeNode(u,l):this.addNode(u,l)}}if(e.edges){let u=!1;if(this.type==="undirected"&&(u=!0),a=e.edges,!Array.isArray(a))throw new me("Graph.import: invalid edges. Expecting an array.");for(r=0,i=a.length;r<i;r++){s=a[r],nE(s);const{source:l,target:d,attributes:f,undirected:g=u}=s;let m;"key"in s?(m=t?g?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:g?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,m.call(this,s.key,l,d,f)):(m=t?g?this.mergeUndirectedEdge:this.mergeDirectedEdge:g?this.addUndirectedEdge:this.addDirectedEdge,m.call(this,l,d,f))}}return this}nullCopy(e){const t=new Re(He({},this._options,e));return t.replaceAttributes(He({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const a=He({},r.attributes);r=new t.NodeDataClass(i,a),t._nodes.set(i,r)}),t}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new _e(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new _e("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new _e("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),r=this._edges.values();let i,a;for(;i=r.next(),i.done!==!0;)a=i.value,dp(t,"copy",!1,a.undirected,a.key,a.source.key,a.target.key,He({},a.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((a,o)=>{e[o]=a.attributes});const t={},r={};this._edges.forEach((a,o)=>{const s=a.undirected?"--":"->";let u="",l=a.source.key,d=a.target.key,f;a.undirected&&l>d&&(f=l,l=d,d=f);const g=`(${l})${s}(${d})`;o.startsWith("geid_")?this.multi&&(typeof r[g]>"u"?r[g]=0:r[g]++,u+=`${r[g]}. `):u+=`[${o}]: `,u+=g,t[u]=a.attributes});const i={};for(const a in this)this.hasOwnProperty(a)&&!xd.has(a)&&typeof this[a]!="function"&&typeof a!="symbol"&&(i[a]=this[a]);return i.attributes=this._attributes,i.nodes=e,i.edges=t,gt(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(Re.prototype[Symbol.for("nodejs.util.inspect.custom")]=Re.prototype.inspect);oE.forEach(n=>{["add","merge","update"].forEach(e=>{const t=n.name(e),r=e==="add"?dp:lE;n.generateKey?Re.prototype[t]=function(i,a,o){return r(this,t,!0,(n.type||this.type)==="undirected",null,i,a,o,e==="update")}:Re.prototype[t]=function(i,a,o,s){return r(this,t,!1,(n.type||this.type)==="undirected",i,a,o,s,e==="update")}})});m1(Re);I1(Re);B1(Re);J1(Re);let fp=class extends Re{constructor(e){const t=He({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new me("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new me('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}},pp=class extends Re{constructor(e){const t=He({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new me("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new me('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}};class gp extends Re{constructor(e){const t=He({multi:!0},e);if("multi"in t&&t.multi!==!0)throw new me("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class vp extends Re{constructor(e){const t=He({type:"directed",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new me("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new me('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class yp extends Re{constructor(e){const t=He({type:"undirected",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new me("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new me('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function Wr(n){n.from=function(e,t){const r=He({},e.options,t),i=new n(r);return i.import(e),i}}Wr(Re);Wr(fp);Wr(pp);Wr(gp);Wr(vp);Wr(yp);Re.Graph=Re;Re.DirectedGraph=fp;Re.UndirectedGraph=pp;Re.MultiGraph=gp;Re.MultiDirectedGraph=vp;Re.MultiUndirectedGraph=yp;Re.InvalidArgumentsGraphError=me;Re.NotFoundGraphError=de;Re.UsageGraphError=_e;var or=Vf();function cE(n){n.prototype.updateSelectedNodesName=function(e){this.updateSelectedNodesAttributes({label:e})},n.prototype.updateSelectedNodesInfo=function(e){this.updateSelectedNodesAttributes({desc:e})},n.prototype.setDefaultNodeWeight=function(e=1){this.updateEachNodeAttributes((t,r)=>({...r,weight:e}))},n.prototype.getNodesForD3=function(){return this.nodes().map(e=>({...this.getNodeAttributes(e),id:Number(e)}))},n.prototype.selectNode=function(e){this.setNodeAttribute(e,"selected",!0)},n.prototype.deselectNode=function(e){this.setNodeAttribute(e,"selected",!1)},n.prototype.toggleNodeSelection=function(e){if((this.getNodeAttribute(e,"selected")||0)>0)this.setNodeAttribute(e,"selected",0);else{let r=0;this.forEachNode((i,a)=>{a.selected>r&&(r=a.selected)}),this.setNodeAttribute(e,"selected",r+1)}},n.prototype.getSelectedNodes=function(){return this.filterNodes((e,t)=>t.selected>0).sort((e,t)=>this.getNodeAttribute(e,"selected")-this.getNodeAttribute(t,"selected"))},n.prototype.updateSelectedNodesColor=function(e,t,r){!e||!t||!r?e?this.updateSelectedNodesAttributes({color:e}):t?this.updateSelectedNodesAttributes({stroke:t}):r&&this.updateSelectedNodesAttributes({labelColor:r}):this.updateSelectedNodesAttributes({color:e,stroke:t,labelColor:r})},n.prototype.updateSelectedNodesAttributes=function(e){this.getSelectedNodes().forEach(t=>{this.mergeNodeAttributes(t,e)})},n.prototype.connectSelectedNodes=function(e,t="directed"){const r=this.getSelectedNodes();if(!(r.length<1)){if(r.length>1)for(let i=0;i<r.length;i++)for(let a=i+1;a<r.length;a++){const o=r[i],s=r[a],u={color:e,selected:!1};this.type==="mixed"?t==="undirected"?this.mergeUndirectedEdge(o,s,u):this.mergeDirectedEdge(o,s,u):this.mergeEdge(o,s,u)}else if(this.allowSelfLoops){const i=r[0],a={color:e,selected:!1};t==="undirected"?this.mergeUndirectedEdge(i,i,a):this.mergeDirectedEdge(i,i,a)}}},n.prototype.connectSelectedNodesInOrder=function(e,t="directed"){const r=this.getSelectedNodes();for(let i=0;i<r.length-1;i++){const a=r[i],o=r[i+1],s={color:e,selected:!1};t==="undirected"?this.mergeUndirectedEdge(a,o,s):this.mergeDirectedEdge(a,o,s)}}}function hE(n){n.prototype.setDefaultEdgeWeight=function(e=1){this.updateEachEdgeAttributes((t,r)=>({...r,weight:e}))},n.prototype.getEdgeSourceTarget=function(e){return[this.source(e),this.target(e)]},n.prototype.updateSelectedEdgesName=function(e){this.updateSelectedEdgesAttributes({label:e})},n.prototype.updateSelectedEdgesInfo=function(e){this.updateSelectedEdgesAttributes({desc:e})},n.prototype.getEdgesForD3=function(){return this.edges().map(e=>{const{source:t,target:r,...i}=this.getEdgeAttributes(e);return{source:Number(t),target:Number(r),...i}})},n.prototype.selectEdge=function(e){this.setEdgeAttribute(e,"selected",!0)},n.prototype.deselectEdge=function(e){this.setEdgeAttribute(e,"selected",!1)},n.prototype.toggleEdgeSelection=function(e){if((this.getEdgeAttribute(e,"selected")||0)>0)this.setEdgeAttribute(e,"selected",0);else{let r=0;this.forEachEdge((i,a)=>{a.selected>r&&(r=a.selected)}),this.setEdgeAttribute(e,"selected",r+1)}},n.prototype.getSelectedEdges=function(){return this.filterEdges((e,t)=>t.selected>0).sort((e,t)=>this.getEdgeAttribute(e,"selected")-this.getEdgeAttribute(t,"selected"))},n.prototype.updateSelectedEdgesAttributes=function(e){this.getSelectedEdges().forEach(t=>{this.mergeEdgeAttributes(t,e)})},n.prototype.updateSelectedEdgesColor=function(e,t){const r={...e&&{color:e},...t&&{labelColor:t}};this.updateSelectedEdgesAttributes(r)},n.prototype.updateSelectedEdgesName=function(e){this.updateSelectedEdgesAttributes({label:e})},n.prototype.updateSelectedEdgesInfo=function(e){this.updateSelectedEdgesAttributes({desc:e})}}function dE(n){n.prototype.addFace=function(e,t){const r=e.join("_");t={...t,key:r,id:this._faces.size,nodes:e,color:this.colors.face_color};var i=new fE(r,e,t);this._faces.set(r,i)},n.prototype.faces=function(){return Array.from(this._faces.keys())},n.prototype.findFace=function(e){return e.sort(),e.join("_")},n.prototype.dropFace=function(e){this._faces.has(e)&&this._faces.delete(e)},n.prototype.hasFace=function(e){return this._faces.has(e)},n.prototype.faceNodeNeighbors=function(e){const t=[];return this.forEachFace((r,i)=>{i.nodes.includes(e)&&t.push(r)}),t},n.prototype.faceEdgeNeighbors=function(e){const{source:t,target:r}=this.getEdgeAttributes(e),i=[];return this.forEachFace((a,o)=>{o.nodes.includes(""+t)&&o.nodes.includes(""+r)&&i.push(a)}),i},n.prototype.forEachFace=function(e){for(const t of this._faces.values())e(t.key,t.attributes)},n.prototype.setFaceAttribute=function(e,t,r){this._faces.get(e).attributes[t]=r},n.prototype.getFaceAttribute=function(e,t){return this._faces.get(e).attributes[t]},n.prototype.getFaceAttributes=function(e){return this._faces.get(e).attributes},n.prototype.selectFace=function(e){this.setFaceAttribute(e,"selected",!0)},n.prototype.deselectFace=function(e){this.setFaceAttribute(e,"selected",!1)},n.prototype.toggleFaceSelection=function(e){if((this.getFaceAttribute(e,"selected")||0)>0)this.setFaceAttribute(e,"selected",0);else{let r=0;this.forEachFace((i,a)=>{a.selected>r&&(r=a.selected)}),this.setFaceAttribute(e,"selected",r+1)}},n.prototype.getSelectedFaces=function(){return this.faces().filter(e=>this.getFaceAttributes(e).selected>0).sort((e,t)=>this.getFaceAttribute(e,"selected")-this.getFaceAttribute(t,"selected"))},n.prototype.updateSelectedFacesAttributes=function(e){this.getSelectedFaces().forEach(t=>{const r=this.getFaceAttributes(t);this._faces.get(t).attributes={...r,...e}})},n.prototype.updateSelectedFacesColor=function(e,t){const r={...e&&{color:e},...t&&{labelColor:t}};this.updateSelectedFacesAttributes(r)},n.prototype.updateSelectedFacesName=function(e){this.updateSelectedFacesAttributes({label:e})},n.prototype.updateSelectedFacesInfo=function(e){this.updateSelectedFacesAttributes({desc:e})},n.prototype.updateSelectedFacesWeight=function(e){this.updateSelectedFacesAttributes({weight:e})},n.prototype.deleteSelectedFaces=function(){this.getSelectedFaces().forEach(e=>this.dropFace(e))}}class fE{constructor(e,t,r){this.key=e,this.attributes=r,this.nodes=t}}class lr extends Re{constructor(e){super(e),this.isCustom=!0,this.defaultColors={edge_color:"#4682b4",label_color:"#000000",node_color:"#ffffff",face_color:"#4682b455",stroke_color:"#4682b4"},this.colors=this.loadFromLocalStorage(),this._faces=new Map,this.events()}events(){this.on("nodeAdded",({key:e})=>{const t=this.getNodeAttributes(e);t.id||this.setNodeAttribute(e,"id",+e),t.label===void 0&&this.setNodeAttribute(e,"label",hn(t.id)),t.weight===void 0&&this.setNodeAttribute(e,"weight",void 0),t.color===void 0&&this.setNodeAttribute(e,"color",this.colors.node_color),t.stroke===void 0&&this.setNodeAttribute(e,"stroke",this.colors.stroke_color),t.labelColor===void 0&&this.setNodeAttribute(e,"labelColor",this.colors.label_color),t.selected===void 0&&this.setNodeAttribute(e,"selected",!1),t.size===void 0&&this.setNodeAttribute(e,"size",.25),t.magnitude===void 0&&this.setNodeAttribute(e,"magnitude",1),t.desc===void 0&&this.setNodeAttribute(e,"desc",{})}),this.on("edgeAdded",({key:e,source:t,target:r})=>{const i=this.getEdgeAttributes(e);i.id||this.setEdgeAttribute(e,"id",this.size-1),i.label===void 0&&this.setEdgeAttribute(e,"label",hn(i.id)),i.weight===void 0&&this.setEdgeAttribute(e,"weight",void 0),i.color===void 0&&this.setEdgeAttribute(e,"color",this.colors.edge_color),i.labelColor===void 0&&this.setEdgeAttribute(e,"labelColor",void 0),i.source||this.setEdgeAttribute(e,"source",Number(t)),i.target||this.setEdgeAttribute(e,"target",Number(r)),i.selected===void 0&&this.setEdgeAttribute(e,"selected",!1),i.desc===void 0&&this.setEdgeAttribute(e,"desc",{})})}loadFromLocalStorage(){if(typeof localStorage<"u"){const e=localStorage.getItem("appSettings");if(e)try{const t=JSON.parse(e);return this.validateSettings(t)}catch{console.warn("Invalid settings in localStorage. Using defaults.")}}return{...this.defaultColors}}validateSettings(e={}){return Object.fromEntries(Object.keys(this.defaultColors).map(t=>[t,t in e?e[t]:this.defaultColors[t]]))}nullCopy(e){var t=new lr(mi({},this._options,e));return t.replaceAttributes(mi({},this.getAttributes())),t}deselectAll(){this.updateEachNodeAttributes((e,t)=>({...t,selected:0})),this.updateEachEdgeAttributes((e,t)=>({...t,selected:!1}))}deleteSelected(){this.getSelectedEdges().forEach(e=>this.dropEdge(e)),this.getSelectedNodes().forEach(e=>this.dropNode(e))}updateSelectedName(e){this.updateSelectedNodesAttributes({label:e}),this.updateSelectedEdgesAttributes({label:e}),this.updateSelectedFacesAttributes({label:e})}updateSelectedInfo(e){this.updateSelectedNodesAttributes({desc:e}),this.updateSelectedEdgesAttributes({desc:e}),this.updateSelectedFacesAttributes({desc:e})}updateSelectedWeight(e){this.updateSelectedNodesAttributes({weight:e}),this.updateSelectedEdgesAttributes({weight:e}),this.updateSelectedFacesAttributes({weight:e})}selectPath(e){this.deselectAll(),e.forEach(t=>{this.hasNode(t)&&this.selectNode(t)});for(let t=0;t<e.length-1;t++){const r=e[t],i=e[t+1];if(this.hasEdge(r,i)){const a=this.edge(r,i);this.selectEdge(a)}}}copySubgraph(){const e=this.getSelectedNodes();return e.length===0?null:this.subgraph(e)}cutSubgraph(){const e=this.copySubgraph();return e&&this.deleteSelected(),e}pasteSubgraph(e,t=!1,r={x:0,y:0}){if(!e)return;e.forEachNode((a,o)=>{const s={...o};"x"in s&&(s.x+=r.x),"y"in s&&(s.y+=r.y),e.replaceNodeAttributes(a,s)}),this.deselectAll();let i;return t?i=or.union(this,e):i=or.disjointUnion(this,e),this.clear(),this.import(i.export()),e}replace(e){this.clear(),this.import(e.export())}dropNode(e){const t=this.faceNodeNeighbors(e);t.length&&t.map(r=>{this.dropFace(r)}),super.dropNode(e)}dropEdge(e){var t;if(arguments.length>1){var r=""+arguments[0],i=""+arguments[1];this.findEdge(r,i,o=>{t=o})}else t=e;const a=this.faceEdgeNeighbors(t);a.length&&a.map(o=>{this.dropFace(o)}),super.dropEdge(t)}export(){const e=super.export();e.attributes.selected=!1;var t=new Array(this._faces.size),r=0;return this._faces.forEach(function(i,a){t[r++]=gE(a,i)}),e.faces=t,e}import(e){const t=super.import(e);for(const r of e.faces)this.addFace(r.nodes,r.attributes);return t}subgraph(e){const t=this.nullCopy();if(!e||Array.isArray(e)&&e.length===0||e instanceof Set&&e.size===0)return t;const r=new Set(e);for(const i of r)t.addNode(i,this.getNodeAttributes(i));return this.forEachEdge((i,a,o,s,u,l,d)=>{r.has(o)&&r.has(s)&&(d?t.addUndirectedEdgeWithKey(i,o,s,a):t.addDirectedEdgeWithKey(i,o,s,a))}),this.forEachFace((i,a)=>{(a.nodes||[]).every(s=>r.has(s))&&t.addFace(a.nodes,a)}),t}}function pE(){for(var n=arguments[0],e=1,t=arguments.length;e<t;e++)if(arguments[e])for(var r in arguments[e])n[r]=arguments[e][r];return n}var mi=pE;typeof Object.assign=="function"&&(mi=Object.assign);function gE(n,e){var t={key:n,nodes:e.nodes};return Object.keys(e.attributes).length&&(t.attributes=mi({},e.attributes)),t}cE(lr);hE(lr);dE(lr);class vE extends lr{constructor(e={}){const t=Object.assign({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new InvalidArgumentsGraphError("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new InvalidArgumentsGraphError(`DirectedGraph.from: inconsistent "${t.type}" type in given options!`);super(t)}}class yE extends lr{constructor(e={}){const t=Object.assign({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new InvalidArgumentsGraphError("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new InvalidArgumentsGraphError(`UndirectedGraph.from: inconsistent "${t.type}" type in given options!`);super(t)}}var Xt=Mf(),ri=If(),Ad=Qf(),Ze={},ni={},_d;function mE(){if(_d)return ni;_d=1;var n=be();function e(r,i){if(!n(r))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var a=[].concat(i),o,s,u,l={};for(u=0;u<a.length;u++)s=a[u],l[s]=[1/0,-1/0];return r.forEachNode(function(d,f){for(u=0;u<a.length;u++)s=a[u],o=f[s],o<l[s][0]&&(l[s][0]=o),o>l[s][1]&&(l[s][1]=o)}),typeof i=="string"?l[i]:l}function t(r,i){if(!n(r))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var a=[].concat(i),o,s,u,l={};for(u=0;u<a.length;u++)s=a[u],l[s]=[1/0,-1/0];return r.forEachEdge(function(d,f){for(u=0;u<a.length;u++)s=a[u],o=f[s],o<l[s][0]&&(l[s][0]=o),o>l[s][1]&&(l[s][1]=o)}),typeof i=="string"?l[i]:l}return ni.nodeExtent=e,ni.edgeExtent=t,ni}var cs,kd;function mp(){if(kd)return cs;kd=1;var n=be(),e=bn().singleSourceLength;return cs=function(r,i){if(!n(r))throw new Error("graphology-metrics/eccentricity: given graph is not a valid graphology instance.");if(r.size===0)return 1/0;var a=-1/0,o=e(r,i),s,u,l=0;for(s in o)u=o[s],u>a&&(a=u),l++;return l<r.order?1/0:a},cs}var hs,Dd;function bE(){if(Dd)return hs;Dd=1;var n=be(),e=mp();return hs=function(r){if(!n(r))throw new Error("graphology-metrics/diameter: given graph is not a valid graphology instance.");if(r.size===0)return 1/0;var i=-1/0;return r.someNode(function(a){var o=e(r,a);return o>i&&(i=o),i===1/0}),i},hs}var ds,Cd;function wE(){if(Cd)return ds;Cd=1;var n=je(),e=be(),t=Er(),r=dt(),i={getNodeCommunity:"community",getEdgeWeight:"weight",resolution:1};function a(b,_){var y=new Array(b.order),D=new Float64Array(b.order),R={},v=0,C=r.createEdgeWeightGetter(_.getEdgeWeight).fromEntry,M=r.createNodeValueGetter(_.getNodeCommunity).fromEntry,L=0,G={};return b.forEachNode(function($,N){G[$]=L,y[L++]=M($,N)}),b.forEachUndirectedEdge(function($,N,Y,V,F,I,T){var j=C($,N,Y,V,F,I,T);v+=j,R[$]=j,D[G[Y]]+=j,Y!==V&&(D[G[V]]+=j)}),{weights:R,communities:y,weightedDegrees:D,M:v}}function o(b,_){var y=new Array(b.order),D=new Float64Array(b.order),R=new Float64Array(b.order),v={},C=0,M=r.createEdgeWeightGetter(_.getEdgeWeight).fromEntry,L=r.createNodeValueGetter(_.getNodeCommunity).fromEntry,G=0,$={};return b.forEachNode(function(N,Y){$[N]=G,y[G++]=L(N,Y)}),b.forEachDirectedEdge(function(N,Y,V,F,I,T,j){var X=M(N,Y,V,F,I,T,j);C+=X,v[N]=X,R[$[V]]+=X,D[$[F]]+=X}),{weights:v,communities:y,weightedInDegrees:D,weightedOutDegrees:R,M:C}}function s(b,_){var y=_.resolution,D=a(b,_),R=D.communities,v=D.weightedDegrees,C=D.M,M=b.nodes(),L,G,$,N,Y,V,F=0,I=C*2;for(L=0,$=b.order;L<$;L++)for(G=0;G<$;G++)R[L]===R[G]&&(V=b.undirectedEdge(M[L],M[G]),N=D.weights[V]||0,Y=v[L]*v[G],L===G&&typeof V<"u"?F+=(N-Y/I*y)*2:F+=N-Y/I*y);return F/I}function u(b,_){var y=_.resolution,D=o(b,_),R=D.communities,v=D.weightedInDegrees,C=D.weightedOutDegrees,M=D.M,L=b.nodes(),G,$,N,Y,V,F,I=0;for(G=0,N=b.order;G<N;G++)for($=0;$<N;$++)R[G]===R[$]&&(F=b.directedEdge(L[G],L[$]),Y=D.weights[F]||0,V=v[G]*C[$],I+=Y-V/M*y);return I/M}function l(b,_){var y={},D={},R={},v=r.createNodeValueGetter(_.getNodeCommunity).fromEntry;return b.forEachNode(function(C,M){var L=v(C,M);if(y[C]=L,typeof L>"u")throw new Error('graphology-metrics/modularity: the "'+C+'" node is not in the partition.');D[L]=0,R[L]=0}),{communities:y,totalWeights:D,internalWeights:R}}function d(b,_){var y={},D={},R={},v={},C=r.createNodeValueGetter(_.getNodeCommunity).fromEntry;return b.forEachNode(function(M,L){var G=C(M,L);if(y[M]=G,typeof G>"u")throw new Error('graphology-metrics/modularity: the "'+M+'" node is not in the partition.');D[G]=0,R[G]=0,v[G]=0}),{communities:y,totalInWeights:D,totalOutWeights:R,internalWeights:v}}function f(b,_){var y=_.resolution,D=l(b,_),R=0,v=D.totalWeights,C=D.internalWeights,M=D.communities,L=r.createEdgeWeightGetter(_.getEdgeWeight).fromEntry;b.forEachUndirectedEdge(function(Y,V,F,I,T,j,X){var W=L(Y,V,F,I,T,j,X);R+=W;var q=M[F],H=M[I];v[q]+=W,v[H]+=W,q===H&&(C[q]+=W*2)});var G=0,$=R*2;for(var N in C)G+=C[N]/$-Math.pow(v[N]/$,2)*y;return G}function g(b,_){var y=_.resolution,D=d(b,_),R=0,v=D.totalInWeights,C=D.totalOutWeights,M=D.internalWeights,L=D.communities,G=r.createEdgeWeightGetter(_.getEdgeWeight).fromEntry;b.forEachDirectedEdge(function(Y,V,F,I,T,j,X){var W=G(Y,V,F,I,T,j,X);R+=W;var q=L[F],H=L[I];C[q]+=W,v[H]+=W,q===H&&(M[q]+=W)});var $=0;for(var N in M)$+=M[N]/R-v[N]*C[N]/Math.pow(R,2)*y;return $}function m(b,_,y,D){return D/(2*b)-_*y/(2*(b*b))}function w(b,_,y,D,R,v){return v/b-(R*_+D*y)/(b*b)}function x(b,_){if(!e(b))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(b.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(b.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var y=t(b);if(y==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return _=n(_,i),y==="directed"?u(b,_):s(b,_)}function S(b,_){if(!e(b))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(b.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(b.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var y=t(b);if(y==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return _=n(_,i),y==="directed"?g(b,_):f(b,_)}var A=S;return A.sparse=S,A.dense=x,A.undirectedDelta=m,A.directedDelta=w,ds=A,ds}var fs,Id;function EE(){if(Id)return fs;Id=1;var n=be(),e=dt().createEdgeWeightGetter,t="weight";return fs=function(i,a){if(!n(i))throw new Error("graphology-metrics/weighted-size: the given graph is not a valid graphology instance.");a=e(a||t).fromEntry;var o=0;return i.forEachEdge(function(s,u,l,d,f,g,m){o+=a(s,u,l,d,f,g,m)}),o},fs}var Md;function xE(){if(Md)return Ze;Md=1;var n=Tf(),e=mE();return Ze.diameter=bE(),Ze.modularity=wE(),Ze.simpleSize=zf(),Ze.weightedSize=EE(),Ze.abstractDensity=n.abstractDensity,Ze.density=n.density,Ze.directedDensity=n.directedDensity,Ze.undirectedDensity=n.undirectedDensity,Ze.mixedDensity=n.mixedDensity,Ze.multiDirectedDensity=n.multiDirectedDensity,Ze.multiUndirectedDensity=n.multiUndirectedDensity,Ze.multiMixedDensity=n.multiMixedDensity,Ze.nodeExtent=e.nodeExtent,Ze.edgeExtent=e.edgeExtent,Ze}var Ld=xE(),ii={},ps,zd;function bp(){if(zd)return ps;zd=1;var n=be(),e=Er(),t=je(),r=dt().createEdgeWeightGetter,i={edgeDisparityAttribute:"disparity",getEdgeWeight:"weight"};function a(s,u,l){if(!n(u))throw new Error("graphology-metrics/edge/disparity: the given graph is not a valid graphology instance.");if(u.multi||e(u)==="mixed")throw new Error("graphology-metrics/edge/disparity: not defined for multi nor mixed graphs.");l=t(l,i);var d=r(l.getEdgeWeight).fromEntry,f={};u.forEachNode(function(S){f[S]=0}),u.forEachEdge(function(S,A,b,_,y,D,R){var v=d(S,A,b,_,y,D,R);f[b]+=v,f[_]+=v});var g,m,w,x={};if(u.forEachAssymetricAdjacencyEntry(function(S,A,b,_,y,D,R){var v=d(y,D,S,A,b,_,R);g!==S&&(g=S,m=u.degree(S),w=f[S]);var C=u.degree(A),M=f[A],L=v/w,G=v/M,$=Math.pow(1-L,m-1),N=Math.pow(1-G,C-1);x[y]=Math.min($,N)}),s){u.updateEachEdgeAttributes(function(S,A){return A[l.edgeDisparityAttribute]=x[S],A},{attributes:[l.edgeDisparityAttribute]});return}return x}var o=a.bind(null,!1);return o.assign=a.bind(null,!0),ps=o,ps}var gs,Td;function SE(){if(Td)return gs;Td=1;var n=be(),e=_i().intersectionSize;function t(i,a){if(!n(a))throw new Error("graphology-metrics/simmelian-strength: given graph is not a valid graphology instance.");var o={};if(a.forEachNode(function(u){o[u]=new Set(a.neighbors(u))}),!i){var s={};return a.forEachEdge(function(u,l,d,f){s[u]=e(o[d],o[f])}),s}a.updateEachEdgeAttributes(function(u,l,d,f){return l.simmelianStrength=e(o[d],o[f]),l},{attributes:["simmelianStrength"]})}var r=t.bind(null,!1);return r.assign=t.bind(null,!0),gs=r,gs}var Nd;function AE(){return Nd||(Nd=1,ii.disparity=bp(),ii.simmelianStrength=SE()),ii}var _E=AE(),vs,Rd;function kE(){if(Rd)return vs;Rd=1;var n=be(),e=je(),t=Ai(),r=Hf(),i=xr().NeighborhoodIndex,a={nodeCentralityAttribute:"closenessCentrality",wassermanFaust:!1};function o(l){this.index=new i(l,"inbound"),this.queue=new t(Array,l.order),this.seen=new r(l.order)}o.prototype.fromNode=function(l){var d=this.index,f=this.queue,g=this.seen;g.clear(),f.clear(),g.add(l),f.push([l,0]);for(var m,w,x,S,A,b,_=0,y=0;f.size!==0;)for(m=f.shift(),w=m[0],x=m[1],x!==0&&(_+=x,y+=1),A=d.starts[w+1],S=d.starts[w];S<A;S++)b=d.neighborhood[S],!g.has(b)&&(g.add(b),f.push([b,x+1]));return[y,_]};function s(l,d,f){if(!n(d))throw new Error("graphology-metrics/centrality/closeness: the given graph is not a valid graphology instance.");f=e(f,a);var g=f.wassermanFaust,m=new o(d),w=d.order,x,S,A,b,_,y=new Float64Array(w);for(x=0;x<w;x++)S=m.fromNode(x),A=S[0],b=S[1],_=0,b>0&&w>1&&(_=A/b,g&&(_*=A/(w-1))),y[x]=_;return l?m.index.assign(f.nodeCentralityAttribute,y):m.index.collect(y)}var u=s.bind(null,!1);return u.assign=s.bind(null,!0),vs=u,vs}var DE=kE();const CE=ot(DE);var on={},Gd;function IE(){if(Gd)return on;Gd=1;var n=be();function e(a,o,s,u){var l=o+"Centrality";if(!n(s))throw new Error("graphology-centrality/"+l+": the given graph is not a valid graphology instance.");if(o!=="degree"&&s.type==="undirected")throw new Error("graphology-centrality/"+l+": cannot compute "+o+" centrality on an undirected graph.");u=u||{};var d=u.nodeCentralityAttribute||l,f=s.order-1,g=s[o].bind(s);if(a){s.updateEachNodeAttributes(function(w,x){return x[d]=g(w)/f,x},{attributes:[d]});return}var m={};return s.forEachNode(function(w){m[w]=g(w)/f}),m}var t=e.bind(null,!1,"degree"),r=e.bind(null,!1,"inDegree"),i=e.bind(null,!1,"outDegree");return t.assign=e.bind(null,!0,"degree"),r.assign=e.bind(null,!0,"inDegree"),i.assign=e.bind(null,!0,"outDegree"),on.degreeCentrality=t,on.inDegreeCentrality=r,on.outDegreeCentrality=i,on}var ME=IE(),ys,Pd;function LE(){if(Pd)return ys;Pd=1;var n=be(),e=Bf(),t=je(),r=e.createUnweightedIndexedBrandes,i=e.createDijkstraIndexedBrandes,a={nodeCentralityAttribute:"betweennessCentrality",getEdgeWeight:"weight",normalized:!0};function o(u,l,d){if(!n(l))throw new Error("graphology-centrality/beetweenness-centrality: the given graph is not a valid graphology instance.");d=t(d,a);var f=d.nodeCentralityAttribute,g=d.normalized,m=d.getEdgeWeight?i(l,d.getEdgeWeight):r(l),w=l.order,x,S,A,b,_,y,D,R,v,C,M=new Float64Array(w),L=new Float64Array(w);for(y=0;y<w;y++){for(x=m(y),S=x[0],A=x[1],b=x[2],D=S.size;D--;)M[S.items[S.size-D]]=0;for(;S.size!==0;){for(C=S.pop(),_=(1+M[C])/b[C],D=0,R=A[C].length;D<R;D++)v=A[C][D],M[v]+=b[v]*_;C!==y&&(L[C]+=M[C])}}var G=null;if(g?G=w<=2?null:1/((w-1)*(w-2)):G=l.type==="undirected"?.5:null,G!==null)for(y=0;y<w;y++)L[y]*=G;return u?m.index.assign(f,L):m.index.collect(L)}var s=o.bind(null,!1);return s.assign=o.bind(null,!0),ys=s,ys}var zE=LE();const TE=ot(zE);var ms,$d;function NE(){if($d)return ms;$d=1;var n=be(),e=je(),t=xr().WeightedNeighborhoodIndex,r={nodeCentralityAttribute:"eigenvectorCentrality",getEdgeWeight:"weight",maxIterations:100,tolerance:1e-6};function i(s){for(var u=0,l=0,d=0,f=s.length;d<f;d++){var g=Math.abs(s[d]);g>u&&(l*=u/g*(u/g),u=g),l+=g===0&&u===0?0:g/u*(g/u)}return u===1/0?1:u*Math.sqrt(l)}function a(s,u,l){if(!n(u))throw new Error("graphology-metrics/centrality/eigenvector: the given graph is not a valid graphology instance.");l=e(l,r);var d=l.maxIterations,f=l.tolerance,g=u.order,m=new t(u,l.getEdgeWeight),w,x,S,A,b=new Float64Array(u.order);for(w=0;w<g;w++)b[w]=1/g;for(var _=0,y=0,D,R,v,C=!1;_<d;){for(R=b,b=new Float64Array(R),w=0;w<g;w++)for(S=m.starts[w+1],x=m.starts[w];x<S;x++)D=m.neighborhood[x],A=m.weights[x],b[D]+=R[w]*A;for(v=i(b),w=0;w<g;w++)b[w]/=v;for(y=0,w=0;w<g;w++)y+=Math.abs(b[w]-R[w]);if(y<g*f){C=!0;break}_++}if(!C)throw Error("graphology-metrics/centrality/eigenvector: failed to converge.");if(s){m.assign(l.nodeCentralityAttribute,b);return}return m.collect(b)}var o=a.bind(null,!1);return o.assign=a.bind(null,!0),ms=o,ms}var RE=NE();const GE=ot(RE);var Tr={},bs,Od;function PE(){if(Od)return bs;Od=1;var n=be();function e(r,i){if(r.length<1)throw new Error("graphology-metrics/layout-quality/connected-closeness.max: not enough values!");for(var a=void 0,o,s=1,u=r.length;s<u;s++)o=r[s],i!==void 0&&(o=i(o)),(a===void 0||o>a)&&(a=o);return a}function t(r,i){if(r.length<1)throw new Error("graphology-metrics/layout-quality/connected-closeness.min: not enough values!");for(var a=void 0,o,s=1,u=r.length;s<u;s++)o=r[s],i!==void 0&&(o=i(o)),(a===void 0||o<a)&&(a=o);return a}return bs=function(i,a){if(!n(i))throw new Error("graphology-metrics/layout-quality/connected-closeness: given graph is not a valid graphology instance.");if(i.size<2)return{deltaMax:void 0,ePercentOfDeltaMax:void 0,pPercentOfDeltaMax:void 0,pEdgeOfDeltaMax:void 0,cMax:_.C};a=a||{},a.epsilon=a.epsilon||.03,a.gridSize=a.gridSize||10;var o=a.rng||Math.random,s=D(),u=i.edges().map(function(v){var C=i.getNodeAttributes(i.source(v)),M=i.getNodeAttributes(i.target(v)),L=Math.sqrt(Math.pow(C.x-M.x,2)+Math.pow(C.y-M.y,2));return L}),l=[0,Math.max(e(s),e(u)||0)],d=0,f={},g,m,w,x,S,A=-1;do{for(x=0;x<=a.gridSize;x++)g=l[0]+(l[1]-l[0])*x/a.gridSize,f[g]===void 0&&(f[g]=y(g,i,s,u));m=d,d=0,S=Object.values(f),S.forEach(function(v,C){w=v.C,w>d&&(d=w,A=C)}),l=[S[Math.max(0,A-1)].Delta,S[Math.min(S.length-1,A+1)].Delta]}while((d-m)/d>=a.epsilon/10);var b=R(S,a.epsilon),_=y(b,i,s,u);if(_.C<.1)return{deltaMax:void 0,ePercentOfDeltaMax:void 0,pPercentOfDeltaMax:void 0,pEdgeOfDeltaMax:void 0,cMax:_.C};return{deltaMax:b,ePercentOfDeltaMax:_.ePercent,pPercentOfDeltaMax:_.pPercent,pEdgeOfDeltaMax:_.pEdge,cMax:_.C};function y(v,C,M,L){var G=L.filter(function(X){return X<=v}),$=M.filter(function(X){return X<=v}),N=G.length,Y=N/L.length,V=$.length,F=V/M.length,I=Y-F,T=C.undirected?1:2,j=N/(T*V*(C.order*(C.order-1))/M.length);return{Delta:v,ePercent:Y,pPercent:F,pEdge:j,C:I}}function D(){if(i.order<2)return[];var v=[],C,M,L,G,$,N=i.size;if(N<1)return[];for(var Y=0;Y<N;Y++){C=i.nodes()[Math.floor(o()*i.order)];do M=i.nodes()[Math.floor(o()*i.order)];while(C===M);L=i.getNodeAttributes(C),G=i.getNodeAttributes(M),$=Math.sqrt(Math.pow(L.x-G.x,2)+Math.pow(L.y-G.y,2)),v.push($)}return v}function R(v,C){var M=e(v,function(G){return G.C}),L=t(v.filter(function(G){return G.C>=(1-C)*M}),function(G){return G.Delta});return L}},bs}var ws,qd;function $E(){if(qd)return ws;qd=1;var n=be();function e(t,r){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}return ws=function(r){if(!n(r))throw new Error("graphology-metrics/layout-quality/edge-uniformity: given graph is not a valid graphology instance.");if(r.size===0)return 0;var i=0,a=0,o,s=new Float64Array(r.size);r.forEachEdge(function(f,g,m,w,x,S){var A=e(x,S);s[a++]=A,i+=A});var u=i/r.size,l=0;for(a=0,o=r.size;a<o;a++)l+=Math.pow(u-s[a],2);var d=l/(r.size*Math.pow(u,2));return Math.sqrt(d)},ws}var Es,Fd;function wp(){if(Fd)return Es;Fd=1;var n=be(),e=Yf(),t=_i().intersectionSize;return Es=function(i){if(!n(i))throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: given graph is not a valid graphology instance.");if(i.order===0)throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: cannot compute stress for a null graph.");if(i.size===0)return 0;var a=[new Float64Array(i.order),new Float64Array(i.order)],o=0;i.forEachNode(function(l,d){a[0][o]=d.x,a[1][o++]=d.y});var s=e.fromAxes(a,i.nodes()),u=0;return i.forEachNode(function(l,d){var f=new Set(i.neighbors(l));if(f.size===0||f.size===i.order-1){u+=1;return}var g=s.kNearestNeighbors(f.size+1,[d.x,d.y]);g=new Set(g.slice(1));var m=t(f,g);u+=m/g.size}),u/i.order},Es}var xs,Wd;function Ep(){if(Wd)return xs;Wd=1;var n=be(),e=bn().undirectedSingleSourceLength;function t(r,i){return Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2))}return xs=function(i){if(!n(i))throw new Error("graphology-metrics/layout-quality/stress: given graph is not a valid graphology instance.");if(i.order===0)throw new Error("graphology-metrics/layout-quality/stress: cannot compute stress for a null graph.");var a=new Array(i.order),o=new Array(i.order),s=0,u=i.order*4;i.forEachNode(function(b,_){a[s]=b,o[s++]=_});var l,d,f,g,m,w,x,S,A=0;for(s=0,d=i.order;s<d;s++)for(m=e(i,a[s]),f=o[s],l=s+1;l<d;l++)g=o[l],w=m[a[l]],typeof w>"u"&&(w=u),S=t(f,g),x=1/(w*w),A+=x*Math.pow(S-w,2);return A},xs}var Ud;function OE(){return Ud||(Ud=1,Tr.connectedCloseness=PE(),Tr.edgeUniformity=$E(),Tr.neighborhoodPreservation=wp(),Tr.stress=Ep()),Tr}var qE=OE(),FE=Ep();const WE=ot(FE);var UE=mp();const jE=ot(UE);var Ss,jd;function BE(){if(jd)return Ss;jd=1;var n=be(),e=je(),t=xr().WeightedNeighborhoodIndex,r={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function i(o,s,u){if(!n(s))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");u=e(u,r);var l=u.alpha,d=u.maxIterations,f=u.tolerance,g=u.nodePagerankAttribute,m=s.order,w=1/m,x=new t(s,u.getEdgeWeight),S,A,b,_,y=new Float64Array(s.order),D=new Float64Array(x.weights.length),R=[];for(S=0;S<m;S++)for(y[S]=w,b=x.starts[S+1],_=x.outDegrees[S],_===0&&R.push(S),A=x.starts[S];A<b;A++)D[A]=x.weights[A]/_;for(var v=0,C=0,M,L,G,$=!1;v<d;){for(G=y,y=new Float64Array(s.order),M=0,S=0,b=R.length;S<b;S++)M+=G[R[S]];for(M*=l,S=0;S<m;S++){for(b=x.starts[S+1],A=x.starts[S];A<b;A++)L=x.neighborhood[A],y[L]+=l*G[S]*D[A];y[S]+=M*w+(1-l)*w}for(C=0,S=0;S<m;S++)C+=Math.abs(y[S]-G[S]);if(C<m*f){$=!0;break}v++}if(!$)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(o){x.assign(g,y);return}return x.collect(y)}var a=i.bind(null,!1);return a.assign=i.bind(null,!0),Ss=a,Ss}var HE=BE();const KE=ot(HE);var XE=wp();const YE=ot(XE);var VE=bp();const QE=ot(VE),ai=document;class xp{constructor(e){this.graphManager=e,this.pannel=ai.querySelector("#floating-panel .body-info")}addHeader(e){const t=ai.createElement("h4");t.textContent=e,this.pannel.appendChild(t),console.log(e)}addInfo(e){const t=ai.createElement("div");t.insertAdjacentHTML("beforeend",e),this.pannel.appendChild(t),console.log(e)}addLine(){const e=ai.createElement("hr");this.pannel.appendChild(e),this.pannel.scrollTop=this.pannel.scrollHeight}addNEFGInfo(e){if(e.desc&&Object.keys(e.desc).length!=0||e.weight){this.addHeader(`${e.label}:`);for(let t in e.desc)this.addInfo(`${t}: ${e.desc[t]}`);e.weight&&this.addInfo(`weight: ${e.weight}`),this.addLine()}}allNodeInfo(){for(let e of this.graphManager.graph.getSelectedNodes()){const t=this.graphManager.graph.getNodeAttributes(e);this.addNEFGInfo(t)}}allEdgeInfo(){for(let e of this.graphManager.graph.getSelectedEdges()){const t=this.graphManager.graph.getEdgeAttributes(e);this.addNEFGInfo(t)}}allFaceInfo(){for(let e of this.graphManager.graph.getSelectedFaces()){const t=this.graphManager.graph.getFaceAttributes(e);this.addNEFGInfo(t)}}allGraphInfo(){for(let e of this.graphManager.graphs.all.filter(t=>t.getAttribute("selected"))){const t=e.getAttributes();this.addNEFGInfo(t)}}getComponent(e){const t=this.graphManager.graph,r=ri.connectedComponents(t);for(let i of r)if(i.includes(String(e)))return i;return null}basicInfo(){const e=this.graphManager.graph;this.addHeader("Basic Informattion"),this.addInfo(`|V|: ${e.order}`),this.addInfo(`|E|: ${e.size}`);const t=e.someEdge((r,i)=>i.weight);this.addInfo(t?`Type: ${e.type}, weighted`:`Type: ${e.type}`),this.addLine()}degreeSequesnce(){this.addHeader("Degree Sequence");const e=this.graphManager.graph,r=`(${e.mapNodes((i,a)=>e.degree(i)).join(", ")})`;this.addInfo(r),this.addLine()}countComponents(){const e=this.graphManager.graph;this.addHeader("Connected Components");const t=ri.countConnectedComponents(e);this.addInfo(`Count: ${t}`),ri.forEachConnectedComponent(e,r=>{this.addInfo(r.map(i=>e.getNodeAttribute(i,"label")).join(", "))}),this.addLine()}neighbors(){const e=this.graphManager.graph;this.addHeader("Neighbors");const t=this.graphManager.graph.getSelectedNodes();if(t.length!==1){this.addInfo("Select one node"),this.addLine();return}const[r]=t,i=e.neighbors(r);this.addInfo(i.map(a=>e.getNodeAttribute(a,"label")).join(", ")),this.addLine()}shortestPath(){this.addHeader("Shortest Path");const e=this.graphManager.graph,t=this.graphManager.graph.getSelectedNodes();if(t.length!==2){this.addInfo("Select two nodes"),this.addLine();return}const[r,i]=t,a=Ad.bidirectional(e,r,i);a?(this.addInfo(a.map(o=>e.getNodeAttribute(o,"label")).join(" -> ")),this.addLine(),e.selectPath(a)):(this.addInfo("They are not connected"),this.addLine())}density(){this.addHeader("Density");const e=this.graphManager.graph,t=Ld.density(e);this.addInfo(t),this.addLine()}diameter(){this.addHeader("Diameter");const e=this.graphManager.graph,t=Ld.diameter(e);this.addInfo(t),this.addLine()}eccentricity(){this.addHeader("Eccentricity");const e=this.graphManager.graph,t=this.graphManager.graph.getSelectedNodes();if(t.length!==1){this.addInfo("Select one node"),this.addLine();return}const[r]=t,i=jE(e,r);this.addInfo(i),this.addLine()}simmelianStrength(){this.addHeader("Simmelian strength");const e=this.graphManager.graph,t=_E.simmelianStrength(e);for(const r in t){const{source:i,target:a}=e.getEdgeAttributes(r);this.addInfo(`${e.getNodeAttribute(i,"label")}, ${e.getNodeAttribute(a,"label")} : ${t[r]}`)}this.addLine()}betweennessCentrality(){this.addHeader("Betweenness centrality");const e=this.graphManager.graph,t=TE(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}closenessCentrality(){this.addHeader("Closeness centrality");const e=this.graphManager.graph,t=CE(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}degreeCentrality(){this.addHeader("Degree centrality");const e=this.graphManager.graph,t=ME.degreeCentrality(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}eigenvectorCentrality(){this.addHeader("Eigenvector centrality");const e=this.graphManager.graph,t=GE(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}pagerank(){this.addHeader("Pagerank");const e=this.graphManager.graph,t=KE(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}edgeUniformity(){this.addHeader("Edge Uniformity");const e=this.graphManager.graph,t=qE.edgeUniformity(e);this.addInfo(t),this.addLine()}neighborhoodPreservation(){this.addHeader("Neighborhood preservation");const e=this.graphManager.graph,t=YE(e);this.addInfo(t),this.addLine()}stress(){this.addHeader("Stress");const e=this.graphManager.graph,t=WE(e);this.addInfo(t),this.addLine()}disparity(){this.addHeader("Disparity");const e=this.graphManager.graph,t=QE(e);for(const r in t){const{source:i,target:a}=e.getEdgeAttributes(r);this.addInfo(`${e.getNodeAttribute(i,"label")}, ${e.getNodeAttribute(a,"label")} : ${t[r]}`)}this.addLine()}_isCycle(e){if(e.order==e.size&&ri.countConnectedComponents(e)==1){const t=e.edges()[0],{source:r,target:i}=e.getEdgeAttributes(t);return e.dropEdge(t),Ad.bidirectional(e,i,r)}return!1}liesOnCycle(){this.addHeader("Lies on cycle");const e=this.graphManager.graph,t=this.graphManager.graph.getSelectedNodes();if(t.length<3){this.addInfo("Select at least 3 nodes"),this.addLine();return}const r=or.subgraph(e,t);this.addInfo(!!this._isCycle(r)),this.addLine()}}var Bd=Lf(),As=Nf(),uu=Df(),Hd=["0111111110111100010101000000000100","1011000100000100010101000000001000","1101000111000100000000000001100010","1110000100001100000000000000000000","1000001000100000000000000000000000","1000001000100000100000000000000000","1000110000000000100000000000000000","1111000000000000000000000000000000","1010000000000000000000000000001011","0010000000000000000000000000000001","1000110000000000000000000000000000","1000000000000000000000000000000000","1001000000000000000000000000000000","1111000000000000000000000000000001","0000000000000000000000000000000011","0000000000000000000000000000000011","0000011000000000000000000000000000","1100000000000000000000000000000000","0000000000000000000000000000000011","1100000000000000000000000000000001","0000000000000000000000000000000011","1100000000000000000000000000000000","0000000000000000000000000000000011","0000000000000000000000000101010011","0000000000000000000000000101000100","0000000000000000000000011000000100","0000000000000000000000000000010001","0010000000000000000000011000000001","0010000000000000000000000000000101","0000000000000000000000010010000011","0100000010000000000000000000000011","1000000000000000000000001100100011","0010000010000011001010110000011101","0000000011000111001110110011111110"],ZE=new Set([0,1,2,3,4,5,6,7,8,10,11,12,13,16,17,19,21]);function JE(n,e={}){if(!uu.isGraphConstructor(n))throw new Error("graphology-generators/social/karate: invalid Graph constructor.");for(var t=new n(e),r,i=0;i<34;i++)r=ZE.has(i)?"Mr. Hi":"Officer",t.addNode(i,{club:r});var a,o,s,u,l,d;for(s=0,l=Hd.length;s<l;s++)for(a=Hd[s].split(""),u=s+1,d=a.length;u<d;u++)o=+a[u],o&&t.addEdgeWithKey(s+"->"+u,s,u);return t}var _s=[[0,1],[2,3],[2,4],[2,5],[1,5],[1,6],[1,7],[1,8],[1,9],[9,10],[3,4],[3,11],[4,6],[4,11],[6,7],[7,12],[8,13],[8,12],[11,12],[12,14]];function ex(n,e={}){if(!uu.isGraphConstructor(n))throw new Error("graphology-generators/social/florentine-families: invalid Graph constructor.");var t=new n(e),r,i;for(r=0,i=_s.length;r<i;r++)t.mergeEdge(_s[r][0],_s[r][1]);return t}var tx=Jf(),Kd=[[0,1,2,3,4],[1,0,5,6],[2,0,3,4],[3,0,1,2,5,4,6],[5,1,3,6],[4,0,2,3,6,7],[6,1,3,5,4,7],[7,4,6,8],[8,7,9],[9,8]];function rx(n,e={}){if(!uu.isGraphConstructor(n))throw new Error("invalid Graph constructor.");var t=new n(e),r,i;for(r=0,i=Kd.length;r<i;r++)tx.mergeStar(t,Kd[r]);return t}const nx={stars:[{id:0,label:"Hamal",ra:"02 08 34.7",dec:"23 34 50.5",magnitude:2.17},{id:1,label:"Sheratan",ra:"01 56 01.0",dec:"20 55 48.5",magnitude:2.7},{id:2,label:"Gamma",ra:"01 54 53.8",dec:"19 24 58.7",magnitude:3.84},{id:3,label:"41 Arietis",ra:"02 51 27.2",dec:"27 21 50.6",magnitude:3.58}],edges:[[0,1],[1,2],[0,3]]},ix={stars:[{id:0,label:"Aldebaran",ra:"04 37 21.6",dec:"16 33 34.5",magnitude:1},{id:1,label:"Elnath",ra:"05 26 17.5",dec:"28 36 27.0",magnitude:1.65},{id:2,label:"Zeta",ra:"05 37 38.7",dec:"21 08 33.0",magnitude:2.97},{id:3,label:"Theta2",ra:"04 30 05.6",dec:"15 55 34.7",magnitude:3.45},{id:4,label:"Lambda",ra:"04 02 04.1",dec:"12 33 38.8",magnitude:3.38},{id:5,label:"Omicron",ra:"03 26 09.5",dec:"09 06 59.4",magnitude:3.77},{id:6,label:"Gamma",ra:"04 21 13.2",dec:"15 41 16.8",magnitude:3.8},{id:7,label:"Delta",ra:"04 24 22.8",dec:"17 36 04.5",magnitude:3.92},{id:8,label:"Delta3",ra:"04 26 56.4",dec:"17 59 06.4",magnitude:4.31},{id:9,label:"Ain",ra:"04 30 04.9",dec:"19 14 09.9",magnitude:3.69},{id:10,label:"Tau",ra:"04 43 45.1",dec:"23 00 19.2",magnitude:4.22},{id:11,label:"Atlas",ra:"03 50 39.0",dec:"24 07 49.6",magnitude:4.22}],edges:[[0,3],[0,2],[6,4],[4,5],[3,6],[6,7],[8,7],[8,9],[9,0],[9,10],[1,10],[11,7]]},ax={stars:[{id:0,label:"Castor",ra:"07 36 12.8",dec:"31 50 01.2",magnitude:1.58},{id:1,label:"Pollux",ra:"07 46 52.0",dec:"27 57 57.2",magnitude:1.29},{id:2,label:"Kappa",ra:"07 45 58.6",dec:"24 20 15.9",magnitude:3.72},{id:3,label:"Upsilon",ra:"07 37 29.0",dec:"26 50 24.6",magnitude:4.16},{id:4,label:"Iota",ra:"07 27 17.9",dec:"27 44 54.9",magnitude:3.94},{id:5,label:"Tau",ra:"07 12 44.9",dec:"30 12 16.7",magnitude:4.53},{id:6,label:"Theta",ra:"06 54 27.2",dec:"33 55 55.1",magnitude:3.63},{id:7,label:"Wasat",ra:"07 21 38.1",dec:"21 56 09.7",magnitude:3.59},{id:8,label:"Mekbuda",ra:"07 05 36.5",dec:"20 32 00.0",magnitude:4.16},{id:9,label:"Alhena",ra:"06 39 10.1",dec:"16 22 38.5",magnitude:1.92},{id:10,label:"Lambda",ra:"07 19 32.8",dec:"16 29 40.3",magnitude:3.61},{id:11,label:"Xi",ra:"06 46 42.4",dec:"12 52 04.2",magnitude:3.44},{id:12,label:"Mebsuta",ra:"06 45 29.1",dec:"25 06 23.7",magnitude:3.19},{id:13,label:"Nu",ra:"06 30 27.6",dec:"20 11 46.3",magnitude:4.09},{id:14,label:"Tejat",ra:"06 24 29.2",dec:"22 30 03.1",magnitude:2.91},{id:15,label:"Propus",ra:"06 16 24.0",dec:"22 29 58.9",magnitude:3.28},{id:16,label:"1",ra:"06 05 39.1",dec:"23 15 43.8",magnitude:4.31}],edges:[[0,5],[1,3],[3,2],[3,4],[4,5],[5,6],[3,7],[7,8],[7,10],[8,9],[10,11],[5,12],[12,13],[12,14],[14,15],[15,16]]},ox={stars:[{id:0,label:"Acubens",ra:"08 59 52.7",dec:"11 45 32.4",magnitude:4.28},{id:1,label:"Beta",ra:"08 17 53.5",dec:"09 06 24.1",magnitude:3.66},{id:2,label:"Asellus Australis",ra:"08 46 07.7",dec:"18 03 39.9",magnitude:4.09},{id:3,label:"Asellus Borealis",ra:"08 44 45.4",dec:"21 22 39.2",magnitude:4.66},{id:4,label:"Chi",ra:"08 21 36.4",dec:"27 08 10.9",magnitude:5.22},{id:5,label:"Iota",ra:"08 48 14.1",dec:"28 40 04.4",magnitude:4.19}],edges:[[0,2],[1,2],[2,3],[3,4],[3,5]]},sx={stars:[{id:0,label:"Regulus",ra:"10 09 44.0",dec:"11 50 33.1",magnitude:1.32},{id:1,label:"Algieba",ra:"10 21 22.9",dec:"19 42 46.3",magnitude:2.16},{id:2,label:"Zosma",ra:"11 15 28.3",dec:"20 23 02.6",magnitude:2.58},{id:3,label:"Adhafera",ra:"10 18 06.7",dec:"23 17 27.1",magnitude:3.5},{id:4,label:"Denebola",ra:"11 50 22.2",dec:"14 25 44.7",magnitude:2.16},{id:5,label:"Chertan",ra:"11 15 35.1",dec:"15 17 24.1",magnitude:3.33},{id:6,label:"Eta",ra:"10 08 43.5",dec:"16 38 18.8",magnitude:3.5},{id:7,label:"Rasalas",ra:"09 54 12.9",dec:"25 53 16.1",magnitude:4.03},{id:8,label:"Epsilon",ra:"09 47 18.0",dec:"23 39 27.6",magnitude:3.11}],edges:[[1,3],[2,5],[5,4],[1,6],[2,1],[6,0],[0,5],[3,7],[7,8],[2,4]]},ux={stars:[{id:0,label:"Nu",ra:"11 47 10.7",dec:"06 23 09.0",magnitude:4.13},{id:1,label:"Zaniah",ra:"12 21 13.2",dec:"-00 48 34.3",magnitude:3.89},{id:2,label:"Porrima",ra:"12 42 57.7",dec:"-01 35 23.7",magnitude:2.81},{id:3,label:"Spica",ra:"13 26 32.8",dec:"-11 17 43.6",magnitude:.89},{id:4,label:"Kappa",ra:"14 14 15.9",dec:"-10 23 36.5",magnitude:4.31},{id:5,label:"Syrma",ra:"14 17 21.6",dec:"-06 07 24.0",magnitude:4.16},{id:6,label:"Mu",ra:"14 44 24.8",dec:"-05 46 13.4",magnitude:3.95},{id:7,label:"109",ra:"14 47 32.8",dec:"01 47 01.4",magnitude:3.73},{id:8,label:"Tau",ra:"14 02 57.3",dec:"01 25 10.9",magnitude:4.25},{id:9,label:"Heze",ra:"13 36 00.2",dec:"-00 43 38.6",magnitude:3.41},{id:10,label:"Delta",ra:"12 56 53.9",dec:"03 15 28.1",magnitude:3.44},{id:11,label:"Vindemiatrix",ra:"13 03 27.4",dec:"10 49 15.5",magnitude:2.98}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[7,8],[8,9],[9,10],[10,11],[2,10],[3,9]]},lx={stars:[{id:0,label:"Zubenelgenubi II",ra:"14 52 17.9",dec:"-16 08 54.7",magnitude:2.78},{id:1,label:"Sigma",ra:"15 05 34.3",dec:"-25 22 56.3",magnitude:3.3},{id:2,label:"Zubeneschamali",ra:"15 18 23.1",dec:"-09 28 41.6",magnitude:2.56},{id:3,label:"Gamma",ra:"15 36 57.5",dec:"-14 52 31.6",magnitude:4.06},{id:4,label:"Theta",ra:"15 55 16.9",dec:"-16 48 17.5",magnitude:4.28},{id:5,label:"Upsilon",ra:"15 38 34.7",dec:"-28 13 09.8",magnitude:3.73}],edges:[[0,1],[0,2],[2,3],[3,4],[2,1],[1,5]]},cx={stars:[{id:0,label:"Acrab",ra:"16 06 55.3",dec:"-19 52 32.6",magnitude:2.59},{id:1,label:"Dschubba",ra:"16 01 50.6",dec:"-22 41 40.4",magnitude:2.25},{id:2,label:"Pi",ra:"16 00 23.8",dec:"-26 11 14.7",magnitude:2.81},{id:3,label:"Antares",ra:"16 30 58.3",dec:"-26 29 18.3",magnitude:.97},{id:4,label:"Tau",ra:"16 37 28.1",dec:"-28 16 06.8",magnitude:2.73},{id:5,label:"Epsilon",ra:"16 51 48.9",dec:"-34 20 18.8",magnitude:2.45},{id:6,label:"Mu1",ra:"16 53 35.8",dec:"-38 05 23.0",magnitude:2.92},{id:7,label:"Zeta2",ra:"16 56 22.6",dec:"-42 24 11.1",magnitude:3.75},{id:8,label:"Eta",ra:"17 13 58.6",dec:"-43 16 14.8",magnitude:3.41},{id:9,label:"Sargas",ra:"17 39 08.6",dec:"-43 00 43.4",magnitude:1.92},{id:10,label:"Iota1",ra:"17 49 21.5",dec:"-40 08 06.6",magnitude:3.09},{id:11,label:"Kappa",ra:"17 44 14.6",dec:"-39 02 29.6",magnitude:2.31},{id:12,label:"Shaula",ra:"17 35 19.9",dec:"-37 07 15.9",magnitude:1.52},{id:13,label:"Lesath",ra:"17 32 29.4",dec:"-37 18 53.3",magnitude:2.59}],edges:[[0,3],[1,3],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[11,12]]},hx={stars:[{id:0,label:"51",ra:"17 22 58.0",dec:"-23 58 57.0",magnitude:4.78},{id:1,label:"Sabik",ra:"17 11 50.2",dec:"-15 45 26.7",magnitude:2.44},{id:2,label:"Zeta",ra:"16 38 33.8",dec:"-10 37 12.4",magnitude:2.56},{id:3,label:"Yed",ra:"16 19 40.3",dec:"-04 45 23.3",magnitude:3.38},{id:4,label:"Kappa",ra:"16 58 52.5",dec:"09 19 55.5",magnitude:3.36},{id:5,label:"Resalhague",ra:"17 36 06.9",dec:"12 32 15.6",magnitude:2.13},{id:6,label:"Cabalrai",ra:"17 44 43.7",dec:"04 33 12.4",magnitude:2.92},{id:7,label:"Gaia DR2",ra:"15 50 57.4",dec:"-03 30 35.9",magnitude:3.33},{id:8,label:"Epsilon",ra:"15 52 05.6",dec:"04 23 55.1",magnitude:3.75},{id:9,label:"Unukalhai",ra:"15 45 31.8",dec:"06 20 34.7",magnitude:2.8},{id:10,label:"Delta A",ra:"15 36 01.6",dec:"10 27 03.7",magnitude:3.86},{id:11,label:"Beta",ra:"15 47 22.3",dec:"15 20 20.6",magnitude:3.67},{id:12,label:"Gamma",ra:"15 57 38.2",dec:"15 34 31.3",magnitude:3.94},{id:13,label:"Kappa",ra:"15 49 53.7",dec:"18 03 34.6",magnitude:4.19},{id:14,label:"Nu",ra:"17 22 15.5",dec:"-12 52 26.5",magnitude:4.34},{id:15,label:"Xi",ra:"17 39 02.5",dec:"-15 24 56.5",magnitude:3.59},{id:16,label:"Omicron",ra:"17 42 50.5",dec:"-12 53 25.2",magnitude:4.25},{id:17,label:"Eta",ra:"18 22 37.2",dec:"-02 53 41.5",magnitude:3.39},{id:18,label:"Alya",ra:"18 57 28.5",dec:"04 13 59.3",magnitude:4.66}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,1],[14,15],[15,16],[16,17],[17,18],[7,8],[8,9],[9,10],[10,11],[11,12],[12,13],[13,11]]},dx={stars:[{id:0,label:"Beta2",ra:"19 25 02.3",dec:"-44 45 00.2",magnitude:4.34},{id:1,label:"Rukbat",ra:"19 25 37.9",dec:"-40 34 00.1",magnitude:3.92},{id:2,label:"Iota",ra:"19 56 59.7",dec:"-41 48 00.9",magnitude:4.25},{id:3,label:"Theta1",ra:"20 01 22.3",dec:"-35 12 25.3",magnitude:4.28},{id:4,label:"62",ra:"20 04 12.2",dec:"-27 38 22.1",magnitude:4.44},{id:5,label:"h2",ra:"19 38 14.3",dec:"-24 49 40.7",magnitude:4.56},{id:6,label:"Tau",ra:"19 08 30.9",dec:"-27 37 59.7",magnitude:3.47},{id:7,label:"Nunki",ra:"18 56 49.9",dec:"-26 15 54.9",magnitude:2},{id:8,label:"Xi2",ra:"18 59 14.2",dec:"-21 04 26.3",magnitude:3.69},{id:9,label:"Omicron",ra:"19 06 11.7",dec:"-21 42 17.7",magnitude:3.91},{id:10,label:"43",ra:"19 19 06.6",dec:"-18 54 31.3",magnitude:5.03},{id:11,label:"Rho1",ra:"19 23 08.0",dec:"-17 48 01.9",magnitude:3.98},{id:12,label:"Eta",ra:"18 19 20.5",dec:"-36 45 10.2",magnitude:3.14},{id:13,label:"Kaus Australis",ra:"18 25 51.1",dec:"-34 22 17.9",magnitude:1.8},{id:14,label:"Ascella",ra:"19 04 13.1",dec:"-29 50 36.0",magnitude:2.61},{id:15,label:"Phi",ra:"18 47 14.1",dec:"-26 57 52.7",magnitude:3.13},{id:16,label:"Kaus Media",ra:"18 22 36.8",dec:"-29 49 00.8",magnitude:2.86},{id:17,label:"Alnsal",ra:"18 07 26.2",dec:"-30 25 23.7",magnitude:3.13},{id:18,label:"3",ra:"17 49 09.4",dec:"-27 50 24.9",magnitude:4.66},{id:19,label:"Kaus Borealis",ra:"18 29 32.0",dec:"-25 24 28.0",magnitude:2.97},{id:20,label:"Mu",ra:"18 15 16.7",dec:"-21 03 09.9",magnitude:3.86},{id:21,label:"HD 180885",ra:"19 21 20.2",dec:"-35 22 27.8",magnitude:5.53},{id:22,label:"V4089",ra:"19 35 52.0",dec:"-39 58 43.5",magnitude:5.91}],edges:[[0,1],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[12,13],[16,17],[17,18],[19,20],[7,15],[6,14],[15,19],[16,19],[14,21],[5,21],[2,22],[1,21],[21,22],[13,16],[13,17],[15,14],[15,16]]},fx={stars:[{id:0,label:"Algedi",ra:"20 19 26.8",dec:"-12 28 05.0",magnitude:3.73},{id:1,label:"Dabih",ra:"20 22 25.3",dec:"-14 42 10.1",magnitude:3.2},{id:2,label:"Psi",ra:"20 47 34.8",dec:"-25 10 49.4",magnitude:4.22},{id:3,label:"Omega",ra:"20 53 18.9",dec:"-26 49 29.2",magnitude:4.22},{id:4,label:"Theta",ra:"21 07 21.2",dec:"-17 08 01.0",magnitude:4.06},{id:5,label:"Zeta",ra:"21 28 05.7",dec:"-22 18 09.6",magnitude:3.92},{id:6,label:"Iota",ra:"21 23 38.3",dec:"-16 43 41.4",magnitude:4.44},{id:7,label:"Nashira",ra:"21 41 28.5",dec:"-16 32 58.0",magnitude:3.77},{id:8,label:"Deneb",ra:"21 48 25.1",dec:"-16 00 50.3",magnitude:2.94},{id:9,label:"Nu",ra:"20 22 03.4",dec:"-12 40 51.8",magnitude:4.72},{id:10,label:"Sigma",ra:"20 20 50.5",dec:"-19 02 25.9",magnitude:5.41}],edges:[[0,1],[1,2],[3,4],[4,1],[4,5],[5,6],[4,6],[6,7],[7,8],[1,9],[1,10]]},px={stars:[{id:0,label:"c2",ra:"23 10 46.4",dec:"-21 02 11.8",magnitude:3.84},{id:1,label:"Skat",ra:"22 55 58.3",dec:"-15 41 17.0",magnitude:3.28},{id:2,label:"Tua",ra:"22 50 54.6",dec:"-13 27 39.6",magnitude:4.13},{id:3,label:"Sigma",ra:"22 31 57.9",dec:"-10 33 01.7",magnitude:4.81},{id:4,label:"Ancha",ra:"22 18 09.0",dec:"-07 39 34.2",magnitude:4.31},{id:5,label:"Sadalmelik",ra:"22 07 03.9",dec:"-00 11 58.6",magnitude:3.09},{id:6,label:"Sadachbia",ra:"22 22 56.6",dec:"-01 15 44.7",magnitude:3.83},{id:7,label:"Zeta",ra:"22 30 06.8",dec:"00 06 25.3",magnitude:3.73},{id:8,label:"Eta",ra:"22 36 38.2",dec:"00 00 37.0",magnitude:4},{id:9,label:"Lambda",ra:"22 53 54.9",dec:"-07 26 50.0",magnitude:3.8},{id:10,label:"Psi1",ra:"23 17 11.7",dec:"-08 57 07.4",magnitude:4.41},{id:11,label:"b1",ra:"23 24 16.6",dec:"-19 57 51.0",magnitude:4.09},{id:12,label:"Iota",ra:"22 07 47.0",dec:"-13 44 55.3",magnitude:4.25},{id:13,label:"Sadalsuud",ra:"21 32 52.4",dec:"-05 27 43.9",magnitude:3.03},{id:14,label:"Albali",ra:"20 49 01.9",dec:"-09 24 18.4",magnitude:3.78}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[4,12],[13,14],[5,13]]},gx={stars:[{id:0,label:"Upsilon",ra:"25 20 50.0",dec:"27 23 43.0",magnitude:4.75},{id:1,label:"Sigma",ra:"25 04 10.7",dec:"31 56 17.7",magnitude:5.47},{id:2,label:"Phi",ra:"25 15 06.0",dec:"24 42 57.1",magnitude:4.81},{id:3,label:"Eta",ra:"25 32 49.0",dec:"15 28 27.7",magnitude:3.78},{id:4,label:"Omicron",ra:"25 46 42.6",dec:"09 16 58.9",magnitude:4.41},{id:5,label:"Alrescha",ra:"26 03 20.2",dec:"02 53 02.2",magnitude:3.81},{id:6,label:"Xi",ra:"25 54 50.8",dec:"03 18 37.5",magnitude:4.75},{id:7,label:"Nu",ra:"25 42 43.7",dec:"05 36 49.0",magnitude:4.56},{id:8,label:"Mu",ra:"25 31 29.4",dec:"06 16 19.8",magnitude:4.97},{id:9,label:"Epsilon",ra:"25 04 14.1",dec:"08 01 26.9",magnitude:4.41},{id:10,label:"Delta",ra:"24 49 58.4",dec:"07 43 13.8",magnitude:4.53},{id:11,label:"41",ra:"24 21 52.7",dec:"08 19 42.0",magnitude:5.53},{id:12,label:"Omega",ra:"24 00 35.3",dec:"07 00 03.0",magnitude:4.09},{id:13,label:"Iota",ra:"23 41 13.8",dec:"05 45 38.8",magnitude:4.22},{id:14,label:"Theta",ra:"23 29 13.8",dec:"06 30 54.9",magnitude:4.44},{id:15,label:"Gamma",ra:"23 18 27.4",dec:"03 25 04.4",magnitude:3.84},{id:16,label:"Kappa",ra:"23 28 12.5",dec:"01 23 29.7",magnitude:4.94},{id:17,label:"Lambda",ra:"23 43 18.9",dec:"01 55 00.3",magnitude:4.53}],edges:[[0,1],[1,2],[0,2],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[11,12],[12,13],[13,14],[14,15],[15,16],[16,17],[17,13]]},vx={aries:nx,taurus:ix,gemini:ax,cancer:ox,leo:sx,virgo:ux,libra:lx,scorpius:cx,ophiuchus:hx,sagittarius:dx,capricornus:fx,aquarius:px,pisces:gx};class yx{constructor(e){this.graphManager=e,this.settings=e.settings,this.layout=e.layout}load(e){const t=vx[e.toLowerCase()];t?(this.graphManager.graph=Ex(e,t.stars,t.edges,this.graphManager.graphClass[this.settings.type]),this.layout.applyLayout("rotate180")):console.warn(`Constellation "${e}" not found.`)}aries(){this.load("aries")}taurus(){this.load("taurus")}gemini(){this.load("gemini")}cancer(){this.load("cancer")}leo(){this.load("leo")}virgo(){this.load("virgo")}libra(){this.load("libra")}scorpius(){this.load("scorpius")}ophiuchus(){this.load("ophiuchus")}sagittarius(){this.load("sagittarius")}capricornus(){this.load("capricornus")}aquarius(){this.load("aquarius")}pisces(){this.load("pisces")}orion(){this.load("orion")}}function mx(n=3){return Math.pow(.8,n)}function bx(n){const[e,t,r]=n.split(" ").map(parseFloat);return(e+t/60+r/3600)*15}function wx(n){const e=n.trim().startsWith("-")?-1:1,t=n.trim().replace("+","").replace("-","").split(" ").map(parseFloat),[r,i,a]=t;return e*(r+i/60+a/3600)}function Ex(n,e,t,r){const i=new r;return e.forEach(a=>{const o=bx(a.ra),s=wx(a.dec);i.addNode(a.id,{label:a.label,x:o,y:s,magnitude:a.magnitude,size:mx(a.magnitude),desc:{name:a.label,magnitude:a.magnitude,RA:xx(a.ra),DEC:a.dec}})}),t.forEach(([a,o])=>{i.mergeEdge(a,o)}),i}function xx(n){let[e=0,t=0,r=0]=n.split(" ").map(Number);r=r%60,t=t%60,e=e%24;const i=String(e).padStart(2,"0"),a=String(t).padStart(2,"0"),o=r.toFixed(1).padStart(4,"0");return[i,a,o].join(" ")}class Sx{constructor(e){this.graphManager=e,this.settings=e.settings,this.layout=e.layout,this.zodiac=new yx(e)}empty(e){this.graphManager.graph=Xt.empty(this.graphManager.graphClass[this.settings.type],+e),this.layout.applyLayout("circle")}complete(e){this.graphManager.graph=Xt.complete(this.graphManager.graphClass[this.settings.type],+e),this.layout.applyLayout("circle")}ladder(e){this.graphManager.graph=Xt.ladder(this.graphManager.graphClass[this.settings.type],+e),this.layout.applyLayout("twoLine",{line1Count:+e,Y:50})}completeBipartite(e,t){this.graphManager.graph=Xt.empty(this.graphManager.graphClass[this.settings.type],+e+ +t);for(let r=0;r<+e;r++)for(let i=+e;i<Number(e)+ +t;i++)this.graphManager.graph.addEdge(r,i);this.layout.applyLayout("twoLine",{line1Count:+e,Y:50})}cycle(e){this.graphManager.graph=Xt.path(this.graphManager.graphClass[this.settings.type],+e),this.graphManager.graph.addEdge(0,+e-1),this.layout.applyLayout("circle")}path(e){this.graphManager.graph=Xt.path(this.graphManager.graphClass[this.settings.type],+e),this.layout.applyLayout("oneLine")}caveman(e,t){this.graphManager.graph=Bd.caveman(this.graphManager.graphClass[this.settings.type],+e,+t),this.layout.applyLayout("circle")}connectedCaveman(e,t){this.graphManager.graph=Bd.connectedCaveman(this.graphManager.graphClass[this.settings.type],+e,+t),this.layout.applyLayout("circle")}clusters(e,t,r){this.graphManager.graph=As.clusters(this.graphManager.graphClass[this.settings.type],{order:+e<2?2:+e,size:+t<2?2:+t,clusters:+r<2?2:+r}),this.layout.applyLayout("random")}erdosRenyi(e,t){this.graphManager.graph=As.erdosRenyi(this.graphManager.graphClass[this.settings.type],{order:+e,probability:+t>1?1:+t}),this.layout.applyLayout("circle")}girvanNewman(e){this.graphManager.graph=As.girvanNewman(this.graphManager.graphClass[this.settings.type],{zOut:4}),this.layout.applyLayout("circle")}krackhardtkite(){this.graphManager.graph=rx(this.graphManager.graphClass[this.settings.type]),this.layout.applyLayout("oneLine")}florentineFamilies(){this.graphManager.graph=ex(this.graphManager.graphClass[this.settings.type]),this.layout.applyLayout("circle")}karateClub(){this.graphManager.graph=JE(this.graphManager.graphClass[this.settings.type]),this.layout.applyLayout("circle")}}const Xd=document;class Ax{constructor(e){this.app=e.app,this.eventBus=this.app.eventBus,this.graphManager=e,this.panel=Xd.querySelector("widgets #graphs-panel"),this.ul=this.panel.querySelector("ul"),this.index=0}init(){this.listeners()}lis(e="id"){const t=this.ul.querySelectorAll("li.select");return e=="id"?[...t].map(r=>r.id.split("-")[1]):t}selectLis(e){const t=this.graphManager.graph;this.index=e.split("-")[1];const r=t.getAttributes();if(this.selectLi(this.index),this.graphManager.metric.addNEFGInfo(r),this.graphManager.facePanel.updateFacePanel(),this.app.keyHandler.isCtrlHold()){let i=this.lis().map(a=>this.graphManager.graphs.all[a].nodes());i=new Set(i.flat()),this.graphManager.selectAllNode(i),this.graphManager.redraw({node:!0})}}selectLi(e){this.app.keyHandler.isCtrlHold()||(this.graphManager.graphs.index=this.index,this.deselectLis()),this.graphManager.graph.updateAttribute("selected",r=>!0);const t=this.ul.querySelector(`#graphs-${e}`);t&&t.classList.toggle("select")}updateGraphsPanel(){this.ul.innerHTML="",this.graphManager.graphs.all.forEach((e,t)=>{e.getAttribute("id")===void 0&&e.setAttribute("id",t),e.getAttribute("selected")||e.setAttribute("selected",!1),e.getAttribute("label")||e.setAttribute("label",`graph ${t}`);const r=Xd.createElement("li");r.id=`graphs-${e.getAttribute("id")}`,r.setAttribute("name","graphs"),r.textContent=e.getAttribute("label"),this.ul.appendChild(r)})}listeners(){this.panel.addEventListener("click",e=>{e.target.id=="graphs-panel"&&this.deselectLis()})}deselectLis(){this.lis("node").forEach(e=>e.classList.remove("select")),this.graphManager.deselectAll()}}const Yd=document;class _x{constructor(e){this.app=e.app,this.eventBus=this.app.eventBus,this.graphManager=e,this.settings=e.settings,this.panel=Yd.querySelector("widgets #face-panel"),this.ul=this.panel.querySelector("ul"),this.index=0}init(){this.listeners(),this.events()}lis(e="id"){const t=this.ul.querySelectorAll("li.select");return e=="id"?[...t].map(r=>r.id.split("-")[1]):t}selectLis(e){const t=this.graphManager.graph,r=e.split("-")[1],i=t.getFaceAttributes(r);this.selectLi(r),this.graphManager.metric.addNEFGInfo(i);let a=this.lis().map(o=>t.getFaceAttribute(o,"nodes"));a=new Set(a.flat()),this.app.keyHandler.isCtrlHold()&&(this.graphManager.selectAllNode(a),this.graphManager.redraw({face:!0,node:!0}))}selectLi(e){this.app.keyHandler.isCtrlHold()||this.deselectLis(),this.graphManager.graph.selectFace(e);const t=this.ul.querySelector(`#face-${e}`);if(t&&t.classList.toggle("select"),this.settings.colorPicker){const r=this.graphManager.graph.getFaceAttribute(e,"color"),i=this.graphManager.graph.getFaceAttribute(e,"labelColor");this.app.colorPicker.setColor("face",r),this.app.colorPicker.setColor("label",i)}}updateFacePanel(){this.ul.innerHTML="";const e=this.graphManager.graph;let t=0;e.forEachFace((r,i)=>{t++,e.getFaceAttribute(r,"id")===void 0&&e.setFaceAttribute(r,"id",index),e.getFaceAttribute(r,"label")||e.setFaceAttribute(r,"label",`face ${t}`);const a=Yd.createElement("li");a.id=`face-${r}`,a.setAttribute("name","faces"),a.setAttribute("key",r),a.textContent=e.getFaceAttribute(r,"label"),this.ul.appendChild(a)})}listeners(){this.panel.addEventListener("click",e=>{e.target.id=="face-panel"&&this.deselectLis()})}events(){this.eventBus.on("key:down",e=>{[...e.detail.key].join("")})}deselectLis(){this.lis("node").forEach(e=>e.classList.remove("select")),this.graphManager.deselectAll()}}class kx{constructor(e,t,r="mixed"){this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.layout=e.layout,this.generator=new Sx(this),this.metric=new xp(this),this.graphsPanel=new Ax(this),this.facePanel=new _x(this),this.needsRedraw={node:!0,edge:!0,face:!0,rect:!1},this.limit=t,this.index=0,this.cut=!1,this.graphClass={directed:vE,undirected:yE,mixed:lr},this._graph=Xt.empty(this.graphClass[r],0),this._graph.updateAttributes(i=>({...i,label:"Graph",id:0,selected:!1})),this.graphs={index:0,all:[this._graph]},this.history=[{index:0,all:this.graphs.all.map(i=>i.export())}],this.selectNodeIndex=0,this.selectEdgeIndex=0,this.subGraph=void 0,this.init()}init(){this.setupEventListeners(),this.graphsPanel.init(),this.facePanel.init()}get graph(){return this.graphs.all[this.graphs.index]}set graph(e){e.mergeAttributes(this.graphs.all[this.graphs.index].getAttributes()),this.graphs.all[this.graphs.index]=e}addNode(e,t){this.graph.addNode(e,t),this.saveGraphState()}getHistory(){return this.history}getIndex(e){return this.history[e]??void 0}updateIndex(e){if(e<0)return console.log("Nothing to Undo..."),!1;if(e>=this.history.length)return console.log("Nothing to Redo..."),!1;this.index=e,this.graphs={index:this.history[this.index].index,all:[]};for(const t of this.history[this.index].all){const r=Xt.empty(this.graphClass[t.options.type],0);this.graphs.all.push(r.import(t))}return this.eventBus.emit("updateSetting",{key:"type",value:this.history[this.index].all[0].options.type}),this.graphsPanel.updateGraphsPanel(),this.facePanel.updateFacePanel(),this.app.updateSimulation(),this.needsRedraw={node:!0,edge:!0,face:!0},setTimeout(()=>{this.needsRedraw={node:!1,edge:!1,face:!1,rect:!1}},120),!0}clearTo(e="mixed"){this.eventBus.emit("updateSetting",{key:"type",value:e}),this.graph=Xt.empty(this.graphClass[e],0),this.saveGraphState()}setupEventListeners(){this.eventBus.on("redo",e=>{this.updateIndex(this.index+1)&&this.eventBus.emit("graph:updated",{type:"redo"})}),this.eventBus.on("undo",e=>{this.updateIndex(this.index-1)&&this.eventBus.emit("graph:updated",{type:"undo"})})}push(e){this.history.push(e),this.index++,this.history.length>=this.limit&&(this.history=this.history.slice(-this.limit),this.index=this.history.length-1)}saveGraphState(e=!0){this.history.length!=this.index+1&&(this.history.length=this.index+1),this.push({index:this.graphs.index,all:this.graphs.all.map(t=>t.export())}),this.settings.saveHistory&&this.saveHistoryToLocalStorage(),this.graphsPanel.updateGraphsPanel(),this.facePanel.updateFacePanel(),e&&this.app.updateSimulation(),this.redraw()}redraw(e={node:!0,edge:!0,face:!0,rect:!0}){this.needsRedraw=e,setTimeout(()=>{this.needsRedraw={node:!1,edge:!1,face:!1,rect:!1}},120)}makeGraphComplete(e="directed"){for(let t=0;t<this.graph.order;t++)for(let r=t+1;r<this.graph.order;r++)this.graph.type=="mixed"?e=="undirected"?this.graph.mergeUndirectedEdge(t,r):this.graph.mergeDirectedEdge(t,r):this.graph.mergeEdge(t,r);this.saveGraphState()}dropSelectedNodesEdges(){const e=this.graph.getSelectedEdges(),t=this.graph.getSelectedNodes();this.graph.getSelectedFaces().forEach(i=>{this.graph.hasFace(i)&&this.graph.dropFace(i)}),e.forEach(i=>{this.graph.hasEdge(i)&&this.graph.dropEdge(i)}),t.forEach(i=>{this.graph.hasNode(i)&&this.graph.dropNode(i)}),this.saveGraphState()}connectSelectedNodes(e="directed"){this.graph.connectSelectedNodes(this.settings.edge_color,e),this.saveGraphState()}connectSelectedNodesInOrder(e="directed"){this.graph.connectSelectedNodesInOrder(this.settings.edge_color,e),this.saveGraphState()}updateSelectedNodesEdgesColor(e=!0,t=!0,r=!0,i=!0){this.graph.updateSelectedNodesColor(e?this.settings.node_color:!1,t?this.settings.stroke_color:!1,i?this.settings.label_color:!1),this.graph.updateSelectedEdgesColor(r?this.settings.edge_color:!1,i?this.settings.label_color:!1),this.saveGraphState(!1)}updateSelectedName(e){e?(this.graph.updateSelectedName(e),this.updateSelectedGarphsAttributes({label:e})):this.graph.updateSelectedName(""),this.saveGraphState(!1)}getSelectedGraphs(){return this.graphs.all.filter(e=>e.getAttribute("selected"))}updateSelectedGarphsAttributes(e){this.getSelectedGraphs().forEach(t=>{t.mergeAttributes(e)})}updateSelectedInfo(e){if(e){const t={"":e};this.graph.updateSelectedInfo(t),this.updateSelectedGarphsAttributes({desc:t})}else this.graph.updateSelectedInfo({});this.saveGraphState(!1)}updateSelectedWeight(e){const t=parseFloat(e);t?(this.graph.updateSelectedWeight(t),this.updateSelectedGarphsAttributes({weight:t})):this.graph.updateSelectedWeight(void 0),this.saveGraphState(!1)}deselectAll(){this.deselectAllNode(),this.deselectAllEdge(),this.deselectAllFace(),this.deselectAllGraph(),this.redraw()}deselectAllGraph(){for(const e of this.graphs.all)e.updateAttribute("selected",t=>!1);this.app.rect.scale.active=!1}deselectAllNode(){this.graph.updateEachNodeAttributes((e,t)=>({...t,selected:!1})),this.app.rect.scale.active=!1}deselectAllEdge(){this.graph.updateEachEdgeAttributes((e,t)=>({...t,selected:!1})),this.app.rect.scale.active=!1}deselectAllFace(){this.graph.forEachFace((e,t)=>this.graph.deselectFace(e)),this.app.rect.scale.active=!1}selectAll(e=null){this.selectAllNode(e),this.selectAllEdge(e),this.selectAllFace(e)}selectAllFace(e){this.deselectAllFace(),e?e.forEach(t=>{this.selectFace(t)}):this.graph.updateEachFaceAttributes((t,r)=>({...r,selected:r.id+1}))}selectAllEdge(e){this.deselectAllEdge(),e?e.forEach(t=>{this.selectEdge(t)}):this.graph.updateEachEdgeAttributes((t,r)=>({...r,selected:r.id+1}))}selectAllNode(e){e?(this.deselectAllNode(),e.forEach(t=>{this.graph.hasNode(t)&&this.graph.updateNodeAttributes(t,r=>({...r,selected:r.id+1}))})):this.graph.updateEachNodeAttributes((t,r)=>({...r,selected:r.id+1}))}selectNode(e){this.graph.selectNode(e)}selectFace(e){this.graph.selectFace(e)}selectEdge(e){this.graph.selectEdge(e)}selectNextNode(){this.app.keyHandler.isShiftHold()||this.deselectAllNode(),this.selectNodeIndex=Gn(this.selectNodeIndex+1,this.graph.order);const e=this.graph.nodes()[this.selectNodeIndex];this.graph.selectNode(e)}selectPerviousNode(){this.app.keyHandler.isShiftHold()||this.deselectAllNode(),this.selectNodeIndex=Gn(this.selectNodeIndex-1,this.graph.order);const e=this.graph.nodes()[this.selectNodeIndex];this.graph.selectNode(e)}selectNextEdge(){this.app.keyHandler.isShiftHold()||this.deselectAllEdge(),this.selectEdgeIndex=Gn(this.selectEdgeIndex+1,this.graph.size);const e=this.graph.edges()[this.selectEdgeIndex];this.graph.selectEdge(e)}selectPerviousEdge(){this.app.keyHandler.isShiftHold()||this.deselectAllEdge(),this.selectEdgeIndex=Gn(this.selectEdgeIndex+1,this.graph.size);const e=this.graph.edges()[this.selectEdgeIndex];this.graph.selectEdge(e)}copySubgraph(){this.subGraph=this.graph.copySubgraph(),this.cut=!1}cutSubgraph(){this.subGraph=this.graph.cutSubgraph(),this.cut=!0}pasteSubgraph(e=!1,t={x:150,y:100}){this.subGraph=this.graph.pasteSubgraph(this.subGraph,this.cut,t),e&&this.subgraph(),this.cut=!1,this.saveGraphState()}reverseGraph(){if(this.graph.type!=="undirected"){const e=or.reverse(this.graph);this.graph.replace(e),this.saveGraphState()}}toDirectedGraph(){if(this.graph.type!=="directed"){const e=or.toDirected(this.graph);this.clearTo("directed"),this.graph.replace(e),this.eventBus.emit("updateSetting",{key:"type",value:"directed"}),this.saveGraphState()}}toMixedGraph(){if(this.graph.type!=="mixed"){const e=or.toMixed(this.graph);this.clearTo("mixed"),this.graph.replace(e),this.eventBus.emit("updateSetting",{key:"type",value:"mixed"}),this.saveGraphState()}}toUndirectedGraph(){if(this.graph.type!=="undirected"){const e=or.toUndirected(this.graph);this.clearTo("undirected"),this.graph.replace(e),this.eventBus.emit("updateSetting",{key:"type",value:"undirected"}),this.saveGraphState()}}toWeighted(){this.graph.updateEachEdgeAttributes((e,t)=>({...t,weight:1})),this.saveGraphState()}toUnweighted(){this.graph.updateEachEdgeAttributes((e,t)=>({...t,weight:void 0})),this.saveGraphState()}saveHistoryToLocalStorage(){try{const e=JSON.stringify(this.history);return localStorage.setItem("graphStudio-history",e),!0}catch(e){return console.error("Failed to save history to local storage:",e),!1}}loadHitoryFromLocalStorage(){const e=localStorage.getItem("graphStudio-history");if(e)try{const t=JSON.parse(e);return this.history=t,this.updateIndex(this.history.length-1),!0}catch{console.warn("Invalid JSON format in localStorage.")}}cleanLocalStorage(){localStorage.removeItem("graphStudio-history")}subgraph(){if(!this.graph.getSelectedNodes().length){this.metric.addHeader("Graphs"),this.metric.addInfo("Select at least one node"),this.metric.addLine();return}const t=this.graph.copySubgraph();t.removeAttribute("id"),t.removeAttribute("label"),this.graphs.all.push(t),t.deselectAll(),this.deselectAll(),this.saveGraphState()}addFace(){const e=this.graph.getSelectedNodes(),t=or.subgraph(this.graph,e);this.metric._isCycle(t)&&(this.graph.addFace(e),this.saveGraphState())}}const Dx="Shortcuts",Cx={n:{desc:"New graph",action:"new-mixed-btn"},o:{desc:"Import graph",action:"import-graph"},s:{desc:"Scale",action:"toggle-scale-btn",value:!0},u:{desc:"Undo",action:"undo-btn"},d:{desc:"Delete",action:"remove-selection-btn"},c:{desc:"Update color",action:"color-selection-btn"},e:{desc:"Add edge",action:"add-edge-btn"},"alt+e":{desc:"Add edge",action:"add-edge-in-order-btn"},a:{desc:"All node info",action:"all-node-info-btn"},q:{desc:"Clear panel",action:"clear-info-panel-btn"},y:{desc:"Copy",action:"copy-subgraph"},x:{desc:"Cut",action:"cut-subgraph"},p:{desc:"Paste",action:"paste-subgraph"},"ctrl+p":{desc:"Paste",action:"paste-subgraph-seprate"},r:{desc:"Rename",action:"rename-btn"},i:{desc:"Info",action:"desc-btn"},w:{desc:"weight",action:"weight-btn"},f:{desc:"Force Simulation",action:"toggle-force-btn",value:!0},"ctrl+f":{desc:"Force Simulation",action:"add-face-btn"},t:{desc:"Tree",action:"toggle-tree-btn",value:!0},F5:{desc:"Reload",action:"reload"},ArrowUp:{desc:"Select all node",action:"select-all-node"},ArrowDown:{desc:"Deselect all node",action:"deselect-all-node"},ArrowRight:{desc:"Select next node",action:"select-next-node"},ArrowLeft:{desc:"Select previous node",action:"select-pervious-node"},"shift+ArrowRight":{desc:"Select next node",action:"select-next-node"},"shift+ArrowLeft":{desc:"Select previous node",action:"select-pervious-node"},shift:{desc:"Tree",action:"toggle-select-btn",value:!0},alt:{desc:"Component",action:"toggle-component-btn",value:!0},ctrl:{desc:"Panning",action:"toggle-panning-btn",value:!0},"alt+a":{desc:"All edge info",action:"all-edge-info-btn"},"alt+ArrowUp":{desc:"Select all edge",action:"select-all-edge"},"alt+ArrowDown":{desc:"Deselect all edge",action:"deselect-all-edge"},"alt+ArrowRight":{desc:"Select next edge",action:"select-next-edge"},"alt+ArrowLeft":{desc:"Select previous edge",action:"select-pervious-edge"},"shift+alt+ArrowRight":{desc:"Select next edge",action:"select-next-edge"},"shift+alt+ArrowLeft":{desc:"Select previous edge",action:"select-pervious-edge"},"ctrl+r":{desc:"Redo",action:"redo-btn"},"ctrl+s":{desc:"Export graph",action:"export-graph"},C:{desc:"Complete",action:"complete-btn"},"alt+C":{desc:"Complete",action:"complete-directed-btn"},O:{desc:"Organize circle",action:"organize-circle"},E:{desc:"Add directed edge",action:"add-directed-edge-btn"},"alt+E":{desc:"Add directed edge",action:"add-directed-edge-in-order-btn"},P:{desc:"Export PNG",action:"export-png"},"shift+C":{desc:"Complete",action:"complete-btn"},"shift+alt+C":{desc:"Complete",action:"complete-directed-btn"},"shift+O":{desc:"Organize circle",action:"organize-circle"},"shift+alt+E":{desc:"Add directed edge",action:"add-directed-edge-in-order-btn"},"shift+E":{desc:"Add directed edge",action:"add-directed-edge-btn"},"shift+P":{desc:"Export PNG",action:"export-png"},space:{desc:"Home",action:{c:{desc:"+ Color",action:{c:{desc:"Color Picker",action:"color-picker-btn"},n:{desc:"Update Node Color",action:"update-node-color"},s:{desc:"Update Stroke Color",action:"update-stroke-color"},e:{desc:"Update Edge Color",action:"update-edge-color"},l:{desc:"Update Label Color",action:"update-label-color"}}},n:{desc:"+ New Graph",action:{m:{desc:"Mixed Graph",action:"new-mixed-btn"},d:{desc:"Directed Graph",action:"new-digraph-btn"},u:{desc:"Undirected Graph",action:"new-undirected-graph-btn"}}},"⇒":{desc:"Next Node (Alt for Edge)",action:""},"⇐":{desc:"Pervious Node (Alt for Edge)",action:""},"⇑":{desc:"Select all Nodes (Alt for Edges)",action:""},"⇓":{desc:"Deselect all Nodes (Alt for Edges)",action:""}}}},oi={desc:Dx,action:Cx},st=document;class Ix{constructor(e){this.app=e,this.eventBus=e.eventBus,this.eventKeyMap={AltRight:"alt",ControlRight:"ctrl",ShiftRight:"shift",AltLeft:"alt",ControlLeft:"ctrl",ShiftLeft:"shift",Space:"space"},this.pressedKeys=new Set,this.lastChord=oi.action.space.action,this.modalChord=st.querySelector(".modal-chord"),this.inputModal=st.querySelector(".modal-input"),this._input=!1,this.header=st.querySelector(".modal-chord .shortcut-chord .header"),this.fakeHeader=st.querySelector(".modal-chord  .shortcut-chord-fake .header"),this._Chord=st.querySelector(".shortcut-chord"),this.fakeChord=st.querySelector(".shortcut-chord-fake"),this.exceptionKey=["ArrowUp","ArrowDown","arrowLeft","ArrowRight"]}init(){this.chordGenerator(this.lastChord),st.addEventListener("keydown",t=>{if(t.repeat&&!this.exceptionKey.includes(t.key))return;const r=this.updatePressedKeys(t,"add");if(this._input){if(r==="Escape"&&this.toggleInput("rename",!1),r==="Enter"){const i=st.querySelector(".input-chord input");this.app.menu.handleMenuAction(this._input,i.value),this.toggleInput("rename",!1)}this.pressedKeys.clear()}else{this.isChordVisible()&&this.eventBus.on("key:down",{key:this.pressedKeys});const i=this.findKey();i&&t.preventDefault(),this.action(i)}}),st.addEventListener("keyup",t=>{if(t.repeat&&!this.exceptionKey.includes(t.key))return;const r=this.updatePressedKeys(t,"delete");this._input||(t.preventDefault(),this.lastChord[r]&&typeof this.lastChord[r].value=="boolean"&&this.app.menu.handleMenuAction(this.lastChord[r].action,!this.lastChord[r].value)),this.eventBus.emit("key:up",{key:this.pressedKeys})});const e=st.querySelectorAll(".modal, .modal-chord, .modal-input");e.length>0&&e.forEach(t=>{t.addEventListener("click",r=>{r.target===t&&(t.style.display="none",this.lastChord=oi.action,this._input=!1)})})}chordGenerator(e){const t=st.createElement("ul");for(const a in e){const o=e[a].desc,s=st.createElement("li");s.innerHTML=`
      <span class="title">${a}</span>
      <span class="arrow">→</span>
      <span class="desc">${o}</span>
    `,t.appendChild(s)}const r=this._Chord.querySelector("ul");r&&this._Chord.removeChild(r);const i=this.fakeChord.querySelector("ul");i&&this.fakeChord.removeChild(i),this._Chord.appendChild(t),this.fakeChord.appendChild(t.cloneNode(!0))}action(e){const t=this.lastChord[e];t?typeof t.action=="string"?(this.app.menu.handleMenuAction(t.action,t.value),this.lastChord=oi.action,this.toggleChord(!1)):(this.lastChord=t.action,this.chordGenerator(this.lastChord),this.toggleChord(!0)):(this.toggleChord(!1),this.lastChord=oi.action)}toggleChord(e=!0){e?this.modalChord.style.display="flex":this.modalChord.style.display="none"}toggleInput(e="rename",t=!0){const r=st.querySelector(".input-chord .header"),i=st.querySelector(".input-chord input");switch(e){case"rename":r.textContent="Rename",i.name="rename",i.placeholder="Enter New Name ...";break;case"desc":r.textContent="Description",i.name="desc",i.placeholder="Enter New Description ...";break;case"weight":r.textContent="Weight",i.name="weight",i.placeholder="Enter New Weight ...";break}t?(this.inputModal.style.display="flex",i.focus(),this._input=e):(this.inputModal.style.display="none",this._input=!1),setTimeout(()=>{i.value=""},1)}findKey(){console.log(this.lastChord);const e=Object.keys(this.lastChord);console.log(e);const t=e.find(r=>{const i=r.split("+");return console.log(i),this.isCombo(...i)});return console.log(t),t}isCombo(...e){return console.log(this.pressedKeys),e.every(t=>this.pressedKeys.has(t))&&this.pressedKeys.size===e.length}updatePressedKeys(e,t="add"){const r=this.eventKeyMap[e.code]||e.key;return t==="add"&&r!=="meta"?this.pressedKeys.add(r):this.pressedKeys.delete(r),r}isShiftHold(){return this.pressedKeys.has("shift")}isCtrlHold(){return this.pressedKeys.has("ctrl")}isChordVisible(){return this.modalChord.style.display!=="none"}}const Ue=document;function Mx(n,e){Ue.querySelector(".container").classList.toggle("grid-hidden",n.grid<=2),Ue.getElementById("grid-size-1").value=n.node_radius,Ue.getElementById("vertex-size-1").value=n.node_radius,Ue.getElementById("edge-size-1").value=n.edge_size,Ue.getElementById("label-size-1").value=n.label_size,Ue.getElementById("history-limit-1").value=n.historyLimit,Ue.querySelector("#vertex-label .check").classList.toggle("hidden",!n.vertexLabel),Ue.querySelector("#edge-label .check").classList.toggle("hidden",!n.edgeLabel),Ue.querySelector("#face-label .check").classList.toggle("hidden",!n.faceLabel),Ue.querySelector("#weight-label .check").classList.toggle("hidden",!n.weightLabel),Ue.querySelector("#performance .check").classList.toggle("hidden",!n.performance),Ue.querySelector("#save-history .check").classList.toggle("hidden",!n.saveHistory),Ue.querySelector("#component").classList.toggle("gray-background",!n.component),Ue.querySelector("#scale").classList.toggle("gray-background",!n.scale),Ue.querySelector("#tree").classList.toggle("gray-background",!n.tree),Ue.querySelector("#force").classList.toggle("gray-background",!n.forceSimulation),Ue.querySelector("#colorPicker").classList.toggle("gray-background",!n.colorPicker),Ue.querySelector("#panning").classList.toggle("gray-background",!n.panning),Ue.querySelector("#select").classList.toggle("gray-background",!n.select),e.style.cursor=n.panning?"move":"default";const t=Ue.documentElement;Ue.querySelector(".container").classList.toggle("grid-hidden",n.grid<=2),t.style.setProperty("--grid-size",`${n.grid}px`),t.style.setProperty("--grid-color",n.grid_color),Ue.querySelector(".container").style.backgroundColor=n.background_color}var mr;const Gr=class Gr{constructor(e){ju(this,mr,!0);if(this.app=e,this.eventBus=e.eventBus,Gr.instance)return Gr.instance;Gr.instance=this,this.debounceTimer=null,this.defaultSettings={background_color:"#ffffff",colorPicker:!1,component:!1,console_panel:!0,directed:!0,directed_edge:!0,edgeLabel:!0,edge_color:"#4682b4",edge_size:2,forceSimulation:!0,grid:20,type:"mixed",grid_color:"#00000020",info_panel:!0,label_color:"#000000",label_pos:{x:0,y:0},label_size:15,node_color:"#ffffff",face_color:"#4682b455",node_radius:40,panning:!1,scale:!1,select:!1,stroke_color:"#4682b4",stroke_size:2,tools_panel:!0,tree:!0,vertexLabel:!0,faceLabel:!0,weightLabel:!0,saveHistory:!0,historyLimit:100,graphs_panel:!0,face_panel:!0,performance:!1},this.nightSkyTheme={background_color:"#0d1b2a",edge_color:"#60a5fa",edge_size:1,forceSimulation:!1,grid_color:"#ffffff10",label_color:"#d1d5db",label_pos:{x:-20,y:-20},node_color:"#ffffff",node_radius:10,stroke_color:"#ffffff",stroke_size:0},this.settings=this.loadFromLocalStorage(),this.registerEventListeners()}init(){Mx(this.settings,this.app.canvas)}registerEventListeners(){this.eventBus.on("updateSetting",e=>{const{key:t,value:r}=e.detail;if(this.setSetting(t,r),t=="grid"){const i=document.documentElement;document.querySelector(".container").classList.toggle("grid-hidden",this.settings.grid<=2),i.style.setProperty("--grid-size",`${this.settings.grid}px`)}else t&&r!==void 0&&this.eventBus.emit("graph:updated",{type:t})}),this.eventBus.on("updateAllSettings",e=>{const t=e.detail;t&&typeof t=="object"&&this.setAllSettings(t)}),this.eventBus.on("resetSettings",()=>{this.resetToDefault()}),this.eventBus.on("toggleSetting",e=>{const{key:t,value:r}=e.detail;t&&(this.toggleSetting(t,r),(t=="vertexLabel"||t=="directed_edge"||t=="edgeLabel"||t=="weightLabel")&&this.eventBus.emit("graph:updated",{type:"vertexLabel"}))})}loadFromLocalStorage(){const e=localStorage.getItem("appSettings");if(e)try{const t=JSON.parse(e);return this.validateSettings(t)}catch{console.warn("Invalid settings in localStorage. Using defaults.")}return{...this.defaultSettings}}saveToLocalStorage(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{localStorage.setItem("appSettings",JSON.stringify(this.settings)),console.log("Settings saved to localStorage"),this.eventBus.emit("settingsChanged",this.getAllSettings())},500)}resetToDefault(){this.setAllSettings(this.defaultSettings)}getSetting(e){return this.settings[e]}getAllSettings(){return{...this.settings}}setSetting(e,t){e in this.settings?this.settings[e]!==t&&(this.settings[e]=t,this.eventBus.emit("settingChanged",{key:e,value:t}),Ln(this,mr)&&this.saveToLocalStorage()):console.warn(`Setting "${e}" does not exist.`)}setAllSettings(e){Object.keys(e).forEach(t=>{t in this.settings&&(this.settings[t]=e[t])}),this.eventBus.emit("settingsChanged",this.getAllSettings()),Ln(this,mr)&&this.saveToLocalStorage(),this.init()}toggleSetting(e,t=null){const r=["scale","panning","select","component"];e in this.settings&&typeof this.settings[e]=="boolean"?(t===null?this.settings[e]=!this.settings[e]:this.settings[e]=t,r.includes(e)&&r.forEach(i=>{i!=e&&this.settings[e]&&(this.settings[i]=!1)}),(e==="component"&&this.settings.component||e==="scale"&&this.settings.scale||e==="panning"&&this.settings.panning)&&(this.settings.forceSimulation=!1,this.eventBus.emit("settingToggled",{key:"forceSimulation",value:this.settings.forceSimulation})),e==="forceSimulation"&&this.settings.forceSimulation&&(this.settings.component=!1,this.settings.scale=!1,this.settings.panning=!1),this.settings.performance&&(this.settings.forceSimulation=!1),this.eventBus.emit("settingToggled",{key:e,value:this.settings[e]}),Ln(this,mr)&&t===null&&this.saveToLocalStorage(),this.init(),this.app.widget.init()):console.warn(`Setting "${e}" does not exist or is not a boolean.`)}setAutoSave(e){Bu(this,mr,e)}validateSettings(e){return Object.keys(this.defaultSettings).reduce((t,r)=>(t[r]=e&&e.hasOwnProperty(r)?e[r]:this.defaultSettings[r],t),{})}loadNightSkyTheme(){this.setAllSettings(this.nightSkyTheme)}};mr=new WeakMap,Ve(Gr,"instance",null);let Ps=Gr;const Ae=document;class Lx{constructor(e,t,r="menu-bar"){if(this.app=e,this.eventBus=e.eventBus,this.graphManager=e.graphManager,this.appSettings=e.appSettings,this.layout=e.layout,this.menuData=t,this.container=Ae.getElementById(r),!this.container){console.error("Menu container not found!");return}this.spaceEvent=new KeyboardEvent("keydown",{key:" ",code:"Space",keyCode:32,which:32,bubbles:!0})}init(){this.renderMenu(),this.attachEventListeners()}renderMenu(){this.container.innerHTML="";const e=Ae.createElement("ul");this.menuData.forEach(t=>{const r=this.createMenu(t);e.appendChild(r)}),this.container.appendChild(e)}createMenu(e){const t=Ae.createElement("li");if(e.id&&(t.id=e.id),e.title&&(t.textContent=e.title),e.submenu){const r=this.createSubmenu(e.submenu);t.appendChild(r)}return t}createSubmenu(e){const t=Ae.createElement("ul");return e.forEach(r=>{if(r.type==="divider"){t.appendChild(Ae.createElement("hr"));return}const i=Ae.createElement("li");if(r.id&&(i.id=r.id),r.title){const a=Ae.createElement("label");if(a.textContent=r.title,r.link){const o=Ae.createElement("a");o.href=r.link,o.target="_blank",r.label?o.textContent=r.label:(o.textContent="?",o.classList.add("border")),a.insertBefore(o,a.firstChild)}i.appendChild(a)}if(r.shortcut){const a=Ae.createElement("span");a.textContent=r.shortcut,i.appendChild(a)}if("check"in r&&!r.shortcut){const a=Ae.createElement("span");a.innerHTML="&#10004;",a.classList.add("check"),r.check||a.classList.add("hidden"),i.appendChild(a)}if(r.input)if(r.id==="import-graph")i.appendChild(this.createInput(r.input[0]));else{const a=Ae.createElement("div");r.input.forEach(o=>{a.appendChild(this.createInput(o))}),i.appendChild(a)}r.name&&i.setAttribute("name",r.name),r.submenu&&i.appendChild(this.createSubmenu(r.submenu)),t.appendChild(i)}),t}createInput(e){const t=Ae.createElement("input");return t.type=e.type||"text",t.id=e.id,"hidden"in e&&(t.hidden=e.hidden),e.name&&(t.name=e.name),e.placeholder&&(t.placeholder=e.placeholder),e.required&&(t.required=!0),["number","range","date"].includes(t.type)&&(e.min!==void 0&&(t.min=e.min),e.max!==void 0&&(t.max=e.max),e.step!==void 0&&(t.step=e.step)),e.value!==void 0&&(e.type==="checkbox"||e.type==="radio"?t.checked=e.value:t.value=e.value),t}handleMenuAction(e,t){const r={"new-mixed-btn":()=>{this.graphManager.clearTo("mixed")},"new-digraph-btn":()=>{this.graphManager.clearTo("directed")},"new-undirected-graph-btn":()=>{this.graphManager.clearTo("undirected")},"import-graph":()=>this.eventBus.emit("import"),"export-graph":()=>this.eventBus.emit("export",{type:"json"}),"export-png":()=>this.eventBus.emit("export",{type:"png"}),"default-settings-btn":()=>this.appSettings.resetToDefault(),"sky-night-theme-btn":()=>this.appSettings.loadNightSkyTheme(),reload:()=>location.reload(),"add-edge-btn":()=>this.graphManager.connectSelectedNodes("undirected"),"add-face-btn":()=>this.graphManager.addFace(),"add-edge-in-order-btn":()=>this.graphManager.connectSelectedNodesInOrder("undirected"),"add-directed-edge-btn":()=>this.graphManager.connectSelectedNodes("directed"),"add-directed-edge-in-order-btn":()=>this.graphManager.connectSelectedNodesInOrder("directed"),"remove-selection-btn":()=>this.graphManager.dropSelectedNodesEdges(),"color-selection-btn":()=>this.graphManager.updateSelectedNodesEdgesColor(!0,!0,!0,!0),"complete-btn":()=>this.graphManager.makeGraphComplete("undirected"),"complete-directed-btn":()=>this.graphManager.makeGraphComplete("directed"),"node-color":()=>this.eventBus.emit("updateSetting",{key:"node_color",value:t}),"edge-color":()=>this.eventBus.emit("updateSetting",{key:"edge_color",value:t}),"label-color":()=>this.eventBus.emit("updateSetting",{key:"label_color",value:t}),"stroke-color":()=>this.eventBus.emit("updateSetting",{key:"stroke_color",value:t}),"background-color":()=>{Ae.querySelector(".container").style.backgroundColor=t,this.eventBus.emit("updateSetting",{key:"background_color",value:t})},"grid-color":()=>{Ae.documentElement.style.setProperty("--grid-color",t),this.eventBus.emit("updateSetting",{key:"grid_color",value:t})},rename:()=>this.graphManager.updateSelectedName(t),"rename-btn":()=>this.app.keyHandler.toggleInput("rename"),desc:()=>this.graphManager.updateSelectedInfo(t),"desc-btn":()=>this.app.keyHandler.toggleInput("desc"),weight:()=>this.graphManager.updateSelectedWeight(t),"weight-btn":()=>this.app.keyHandler.toggleInput("weight"),"redo-btn":()=>this.eventBus.emit("redo"),"undo-btn":()=>this.eventBus.emit("undo"),"panel-btn":()=>this.eventBus.emit("toggleSetting",{key:"info_panel"}),"tools-btn":()=>this.eventBus.emit("toggleSetting",{key:"tools_panel"}),"graphs-btn":()=>this.eventBus.emit("toggleSetting",{key:"graphs_panel"}),"faces-btn":()=>this.eventBus.emit("toggleSetting",{key:"face_panel"}),"shortcut-chord-btn":()=>Ae.dispatchEvent(this.spaceEvent),"component-btn":()=>this.eventBus.emit("toggleSetting",{key:"component"}),"scale-btn":()=>this.eventBus.emit("toggleSetting",{key:"scale"}),"tree-btn":()=>this.eventBus.emit("toggleSetting",{key:"tree"}),"force-btn":()=>this.eventBus.emit("toggleSetting",{key:"forceSimulation"}),"panning-btn":()=>this.eventBus.emit("toggleSetting",{key:"panning"}),"select-btn":()=>this.eventBus.emit("toggleSetting",{key:"select"}),"toggle-component-btn":()=>this.eventBus.emit("toggleSetting",{key:"component",value:t}),"toggle-scale-btn":()=>this.eventBus.emit("toggleSetting",{key:"scale",value:t}),"toggle-tree-btn":()=>this.eventBus.emit("toggleSetting",{key:"tree",value:t}),"toggle-force-btn":()=>this.eventBus.emit("toggleSetting",{key:"forceSimulation",value:t}),"toggle-panning-btn":()=>this.eventBus.emit("toggleSetting",{key:"panning",value:t}),"toggle-select-btn":()=>this.eventBus.emit("toggleSetting",{key:"select",value:t}),"color-picker-btn":()=>this.eventBus.emit("toggleSetting",{key:"colorPicker"}),"vertex-label":()=>this.eventBus.emit("toggleSetting",{key:"vertexLabel"}),"edge-label":()=>this.eventBus.emit("toggleSetting",{key:"edgeLabel"}),"face-label":()=>this.eventBus.emit("toggleSetting",{key:"faceLabel"}),"weight-label":()=>this.eventBus.emit("toggleSetting",{key:"weightLabel"}),"vertex-size-1":()=>this.eventBus.emit("updateSetting",{key:"node_radius",value:t}),"edge-size-1":()=>this.eventBus.emit("updateSetting",{key:"edge_size",value:t}),"label-size-1":()=>this.eventBus.emit("updateSetting",{key:"label_size",value:t}),"grid-size-1":()=>this.eventBus.emit("updateSetting",{key:"grid",value:t}),"stroke-size-1":()=>this.eventBus.emit("updateSetting",{key:"stroke_size",value:t}),performance:()=>this.eventBus.emit("toggleSetting",{key:"performance"}),"save-history":()=>this.eventBus.emit("toggleSetting",{key:"saveHistory"}),"clear-histoory-btn":()=>this.graphManager.cleanLocalStorage(),"history-limit-1":()=>{this.graphManager.limit=t,this.eventBus.emit("updateSetting",{key:"historyLimit",value:t})},"basic-info-btn":()=>this.graphManager.metric.basicInfo(),"lies-on-cycle-btn":()=>this.graphManager.metric.liesOnCycle(),"list-degrees-btn":()=>this.graphManager.metric.degreeSequesnce(),"components-btn":()=>this.graphManager.metric.countComponents(),"neighbors-btn":()=>this.graphManager.metric.neighbors(),"shortest-path-btn":()=>this.graphManager.metric.shortestPath(),"density-btn":()=>this.graphManager.metric.density(),"diameter-btn":()=>this.graphManager.metric.diameter(),"eccentricity-btn":()=>this.graphManager.metric.eccentricity(),"simmelian-strength-btn":()=>this.graphManager.metric.simmelianStrength(),"betweenness-centrality-btn":()=>this.graphManager.metric.betweennessCentrality(),"closeness-centrality-btn":()=>this.graphManager.metric.closenessCentrality(),"degree-centrality-btn":()=>this.graphManager.metric.degreeCentrality(),"eigenvector-centrality-btn":()=>this.graphManager.metric.eigenvectorCentrality(),"pagerank-btn":()=>this.graphManager.metric.pagerank(),"edge-uniformity-btn":()=>this.graphManager.metric.edgeUniformity(),"neighborhood-preservation-btn":()=>this.graphManager.metric.neighborhoodPreservation(),"stress-btn":()=>this.graphManager.metric.stress(),"disparity-btn":()=>this.graphManager.metric.disparity(),"clear-info-panel-btn":()=>Ae.querySelector("#floating-panel .body-info").innerHTML="","all-node-info-btn":()=>this.graphManager.metric.allNodeInfo(),"all-edge-info-btn":()=>this.graphManager.metric.allEdgeInfo(),"all-face-info-btn":()=>this.graphManager.metric.allFaceInfo(),"all-graph-info-btn":()=>this.graphManager.metric.allGraphInfo(),empty:()=>this.graphManager.generator.empty(Ae.getElementById("g-empty-1").value),"g-empty-1":()=>this.graphManager.generator.empty(t),cycle:()=>this.graphManager.generator.cycle(Ae.getElementById("g-cycle-1").value),"g-cycle-1":()=>this.graphManager.generator.cycle(t),path:()=>this.graphManager.generator.path(Ae.getElementById("g-path-1").value),"g-path-1":()=>this.graphManager.generator.path(t),ladder:()=>this.graphManager.generator.ladder(Ae.getElementById("g-ladder-1").value),"g-ladder-1":()=>this.graphManager.generator.ladder(t),complete:()=>this.graphManager.generator.complete(Ae.getElementById("g-complete-1").value),"g-complete-1":()=>this.graphManager.generator.complete(t),"complete-bipartite":()=>this.graphManager.generator.completeBipartite(Ae.getElementById("g-complete-bipartite-1").value,Ae.getElementById("g-complete-bipartite-2").value),"g-complete-bipartite-1":()=>this.graphManager.generator.completeBipartite(t,Ae.getElementById("g-complete-bipartite-2").value),"g-complete-bipartite-2":()=>this.graphManager.generator.completeBipartite(Ae.getElementById("g-complete-bipartite-1").value,t),caveman:()=>this.graphManager.generator.caveman(Ae.getElementById("g-caveman-1").value,Ae.getElementById("g-caveman-2").value),"g-caveman-1":()=>this.graphManager.generator.caveman(t,Ae.getElementById("g-caveman-2").value),"g-caveman-2":()=>this.graphManager.generator.caveman(Ae.getElementById("g-caveman-1").value,t),"connected-caveman":()=>this.graphManager.generator.connectedCaveman(Ae.getElementById("g-connected-caveman-1").value,Ae.getElementById("g-connected-caveman-2").value),"g-connected-caveman-1":()=>this.graphManager.generator.connectedCaveman(t,Ae.getElementById("g-connected-caveman-2").value),"g-connected-caveman-2":()=>this.graphManager.generator.connectedCaveman(Ae.getElementById("g-connected-caveman-1").value,t),clusters:()=>this.graphManager.generator.clusters(Ae.getElementById("g-clusters-1").value,Ae.getElementById("g-clusters-2").value,Ae.getElementById("g-clusters-3").value),"g-clusters-1":()=>this.graphManager.generator.clusters(t,Ae.getElementById("g-clusters-2").value,Ae.getElementById("g-clusters-3").value),"g-clusters-2":()=>this.graphManager.generator.clusters(Ae.getElementById("g-clusters-1").value,t,Ae.getElementById("g-clusters-3").value),"g-clusters-3":()=>this.graphManager.generator.clusters(Ae.getElementById("g-clusters-1").value,Ae.getElementById("g-clusters-2").value,t),"erdos-renyi":()=>this.graphManager.generator.erdosRenyi(Ae.getElementById("g-erdos-renyi-1").value,Ae.getElementById("g-erdos-renyi-2").value),"g-erdos-renyi-1":()=>this.graphManager.generator.erdosRenyi(t,Ae.getElementById("g-erdos-renyi-2").value),"g-erdos-renyi-2":()=>this.graphManager.generator.erdosRenyi(Ae.getElementById("g-erdos-renyi-1").value,t),"griven-newmn":()=>this.graphManager.generator.girvanNewman(Ae.getElementById("g-girvan-newman-1").value),"g-girvan-newman-1":()=>this.graphManager.generator.girvanNewman(t),"krackhardt-kite":()=>this.graphManager.generator.krackhardtkite(),"florentine-families":()=>this.graphManager.generator.florentineFamilies(),"karate-club":()=>this.graphManager.generator.karateClub(),aries:()=>this.graphManager.generator.zodiac.aries(),taurus:()=>this.graphManager.generator.zodiac.taurus(),gemini:()=>this.graphManager.generator.zodiac.gemini(),cancer:()=>this.graphManager.generator.zodiac.cancer(),leo:()=>this.graphManager.generator.zodiac.leo(),virgo:()=>this.graphManager.generator.zodiac.virgo(),libra:()=>this.graphManager.generator.zodiac.libra(),scorpius:()=>this.graphManager.generator.zodiac.scorpius(),ophiuchus:()=>this.graphManager.generator.zodiac.ophiuchus(),sagittarius:()=>this.graphManager.generator.zodiac.sagittarius(),capricornus:()=>this.graphManager.generator.zodiac.capricornus(),aquarius:()=>this.graphManager.generator.zodiac.aquarius(),pisces:()=>this.graphManager.generator.zodiac.pisces(),"organize-circle":()=>this.layout.applyLayout("circle"),"center-layout":()=>this.layout.applyLayout("center"),"random-layout":()=>this.layout.applyLayout("random"),"rotate-layout-1":()=>this.layout.applyLayout("rotate",t),"rotate-layout":()=>{const i=Ae.getElementById("rotate-layout-1").value;return this.layout.applyLayout("rotate",i)},"hflip-layout":()=>this.layout.applyLayout("h-flip"),"vflip-layout":()=>this.layout.applyLayout("v-flip"),"force-layout":()=>this.layout.applyLayout("force",{itteration:Ae.getElementById("force-itteration").value,gravity:Ae.getElementById("force-gravity").value}),"froce-itteration":()=>this.layout.applyLayout("force",{val:t,gravity:Ae.getElementById("force-gravity").value}),"force-gravity":()=>this.layout.applyLayout("force",{itteration:Ae.getElementById("force-itteration").value,gravity:t}),"noverlap-layout":()=>this.layout.applyLayout("noverlap"),"reverse-direction":()=>this.graphManager.reverseGraph(),"to-undirected":()=>this.graphManager.toUndirectedGraph(),"to-directed":()=>this.graphManager.toDirectedGraph(),"to-mixed":()=>this.graphManager.toMixedGraph(),"to-weighted":()=>this.graphManager.toWeighted(),"to-unweighted":()=>this.graphManager.toUnweighted(),"subgraph-btn":()=>this.graphManager.subgraph(),graphs:()=>this.graphManager.graphsPanel.selectLis(t),faces:()=>this.graphManager.facePanel.selectLis(t),"how-to-use":()=>window.open("https://www.youtube.com/playlist?list=PLaa8UNGS4QED9DUhAZt7O963qkScAWah3","_blank"),command:()=>{Ae.querySelector(".modal").style.display="flex",Ae.querySelector(".modal .help-panel").style.display="block"},about:()=>window.open("http://picinfiniti.net/","_blank"),"select-all-node":()=>this.graphManager.selectAllNode(),"deselect-all-node":()=>this.graphManager.deselectAllNode(),"select-next-node":()=>this.graphManager.selectNextNode(),"select-pervious-node":()=>this.graphManager.selectPerviousNode(),"select-all-edge":()=>this.graphManager.selectAllEdge(),"deselect-all-edge":()=>this.graphManager.deselectAllEdge(),"select-next-edge":()=>this.graphManager.selectNextEdge(),"select-pervious-edge":()=>this.graphManager.selectPerviousEdge(),"copy-subgraph":()=>this.graphManager.copySubgraph(),"cut-subgraph":()=>this.graphManager.cutSubgraph(),"paste-subgraph":()=>this.graphManager.pasteSubgraph(),"paste-subgraph-seprate":()=>this.graphManager.pasteSubgraph(!0),"update-node-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!0,!1,!1,!1),"update-stroke-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!1,!0,!1,!1),"update-edge-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!1,!1,!0,!1),"update-label-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!1,!1,!1,!0)};r[e]?r[e]():console.log(`No action defined for: ${e}`)}attachEventListeners(){Ae.addEventListener("click",e=>{if(e.target.tagName==="INPUT")return;const t=e.target.closest("li");if(!t)return;const r=t.getAttribute("name")||t.id;r&&this.handleMenuAction(r,t.id)}),Ae.addEventListener("input",e=>{const t=e.target;if(!t||t.name=="rename"||t.name=="desc"||t.name=="weight")return;const r=t.id||t.getAttribute("name");if(r){const i=t.value||1;this.handleMenuAction(r,i)}})}}const ir=document;class zx{constructor(e){this.app=e,this.eventBus=e.eventBus}init(){this.app.eventBus.on("settingToggled",e=>{const{key:t,value:r}=e.detail;t=="forceSimulation"&&(r?this.app.startSimulation():this.app.stopSimulation())}),this.app.eventBus.on("import",e=>{ir.getElementById("file-input").click()}),this.app.eventBus.on("export",e=>{if(e.detail.type==="json"){const t=this.app.graphManager.history,r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2)),i=ir.createElement("a");i.href=r,i.download="graph.json",ir.body.appendChild(i),i.click(),ir.body.removeChild(i)}e.detail.type==="png"&&this.app.canvas.toBlob(function(t){let r=ir.createElement("a");r.href=URL.createObjectURL(t),r.download="d3-canvas-export.png",ir.body.appendChild(r),r.click(),ir.body.removeChild(r)},"image/png")}),ir.getElementById("file-input").addEventListener("change",e=>{const t=e.target.files[0];if(t){const r=new FileReader;r.onload=i=>{const a=JSON.parse(i.target.result);this.app.graphManager.history.push(...a),this.app.graphManager.updateIndex(this.app.graphManager.history.length-1)},r.readAsText(t)}e.target.value=""})}}const Tx=[{title:"File",id:"file",submenu:[{title:"🆕 New Graph",id:"new-mixed-btn",shortcut:"(n)"},{title:"📂 Import",id:"import-graph",shortcut:"(o)",input:[{type:"file",id:"file-input",hidden:!0}]},{title:"💾 Export",id:"export-graph",shortcut:"(Ctrl+s)"},{title:"🖼️ Export to PNG",id:"export-png",shortcut:"(P)"},{type:"divider"},{title:"⚙️ Default Setting",id:"default-settings-btn"},{title:"🌙 Sky Night",id:"sky-night-theme-btn"},{type:"divider"},{title:"🔄 Reload",id:"reload",shortcut:"(F5)"}]},{title:"Edit",id:"edit",submenu:[{title:"Delete",name:"remove-selection-btn",shortcut:"(d)"},{title:"Assign Color",name:"color-selection-btn",shortcut:"(c)"},{title:"Add Edge",name:"add-edge-btn",shortcut:"(alt-e)"},{title:"Add Directed Edge",name:"add-directed-edge-btn",shortcut:"(alt-E)"},{title:"Add Face",name:"add-face-btn",shortcut:"(ctrl+f)"},{type:"divider"},{title:"Copy",name:"copy-subgraph",shortcut:"(y)"},{title:"Cut",name:"cut-subgraph",shortcut:"(x)"},{title:"Paste",name:"paste-subgraph",shortcut:"(p)"},{type:"divider"},{title:"Rename",name:"rename-btn",shortcut:"(r)"},{title:"Edit Info",name:"desc-btn",shortcut:"(i)"},{title:"Edit Weight",name:"weight-btn",shortcut:"(w)"},{type:"divider"},{title:"Undo",name:"undo-btn",shortcut:"(u)"},{title:"Redo",name:"redo-btn",shortcut:"(Ctrl+r)"}]},{title:"Settings",id:"settings",submenu:[{title:"Graph",id:"graph-settings",shortcut:">",submenu:[{title:"Vertex",id:"vertex-label",check:!0},{title:"Edge",id:"edge-label",check:!0},{title:"Face",id:"face-label",check:!0},{title:"Weight",id:"weight-label",check:!0},{type:"divider"},{title:"Grid",id:"gride-size",input:[{type:"range",id:"grid-size-1",min:0,max:100,value:20}]},{title:"Node",id:"vertex-size",input:[{type:"range",id:"vertex-size-1",min:0,max:200,value:10,step:.1}]},{title:"Edge",id:"edge-size",input:[{type:"range",id:"edge-size-1",min:1,max:100,value:2}]},{title:"Label",id:"label-size",input:[{type:"range",id:"label-size-1",min:0,max:100,value:15}]},{title:"Stroke",id:"stroke-size",input:[{type:"range",id:"stroke-size-1",min:0,max:50,value:5,step:.1}]}]},{title:"View",id:"view",shortcut:">",submenu:[{title:"Info Panel",id:"panel-btn",check:!0},{title:"Tools Panel",id:"tools-btn",check:!0},{title:"Graphs Panel",id:"graphs-btn",check:!0},{title:"Face Panel",id:"faces-btn",check:!0},{type:"divider"},{title:"Key Chord",id:"shortcut-chord-btn",shortcut:"⎵"}]},{type:"divider"},{title:"Performance",id:"performance",check:!0},{title:"History",id:"History",shortcut:">",submenu:[{title:"History Limit",id:"history-limit",input:[{type:"number",id:"history-limit-1",min:5,max:1e4,value:5}]},{title:"Save History",id:"save-history",check:!0},{title:"Clear History",id:"clear-histoory-btn"}]}]},{title:"Tools",id:"tools",submenu:[{title:"Scale",id:"scale-btn",check:!1,shortcut:"(s)"},{title:"Panning",id:"panning-btn",check:!1,shortcut:"Ctrl"},{title:"Selecting",id:"select-btn",check:!1,shortcut:"Shift"},{title:"Component",id:"component-btn",check:!1,shortcut:"Alt"},{type:"divider"},{title:"Tree",id:"tree-btn",check:!1,shortcut:"(t)"},{title:"Force Simulation",id:"force-btn",check:!1,shortcut:"(f)"},{type:"divider"},{title:"Color Picker",id:"color-picker-btn",check:!1,shortcut:"⎵ cc"}]},{title:"Generator",id:"generator",submenu:[{title:"Classic",id:"classic",shortcut:">",submenu:[{title:"Empty",id:"empty",input:[{type:"number",id:"g-empty-1",min:1,max:500,value:5}]},{title:"Kₙ",id:"complete",link:"https://en.wikipedia.org/wiki/Complete_graph",input:[{type:"number",id:"g-complete-1",min:1,max:500,value:5}]},{title:"Kₙ,ₙ",id:"complete-bipartite",link:"https://en.wikipedia.org/wiki/Complete_bipartite_graph",input:[{type:"number",id:"g-complete-bipartite-1",min:1,max:500,value:5},{type:"number",id:"g-complete-bipartite-2",min:1,max:500,value:5}]},{title:"Pₙ",id:"path",link:"https://en.wikipedia.org/wiki/Path_graph",input:[{type:"number",id:"g-path-1",min:2,max:500,value:5}]},{title:"Cₙ",id:"cycle",link:"https://en.wikipedia.org/wiki/Cycle_graph",input:[{type:"number",id:"g-cycle-1",min:3,max:500,value:5}]},{title:"Lₙ",id:"ladder",link:"https://en.wikipedia.org/wiki/Ladder_graph",input:[{type:"number",id:"g-ladder-1",min:2,max:500,value:5}]}]},{title:"Community",id:"community",shortcut:">",submenu:[{title:"Cₙ,ₙ",id:"caveman",link:"https://mathworld.wolfram.com/CavemanGraph.html",input:[{type:"number",id:"g-caveman-1",min:1,max:500,value:5},{type:"number",id:"g-caveman-2",min:1,max:500,value:5}]},{title:"Qₙ,ₙ",id:"connected-caveman",link:"https://mathworld.wolfram.com/CavemanGraph.html",input:[{type:"number",id:"g-connected-caveman-1",min:1,max:500,value:5},{type:"number",id:"g-connected-caveman-2",min:1,max:500,value:5}]}]},{title:"Random",id:"random",shortcut:">",submenu:[{title:"Clusters",id:"clusters",input:[{type:"number",id:"g-clusters-1",min:2,max:500,value:20},{type:"number",id:"g-clusters-2",min:2,max:500,value:20},{type:"number",id:"g-clusters-3",min:2,max:500,value:10}]},{title:"erdos Renyi",id:"erdos-renyi",link:"https://en.wikipedia.org/wiki/Erd%C5%91s%E2%80%93R%C3%A9nyi_model",input:[{type:"number",id:"g-erdos-renyi-1",min:1,max:500,value:10},{type:"number",id:"g-erdos-renyi-2",min:0,max:1,step:.1,value:.5}]},{title:"Girvan Newman",id:"griven-newmn",link:"https://www.pnas.org/doi/pdf/10.1073/pnas.122653799",input:[{type:"number",id:"g-girvan-newman-1",min:1,max:500,value:5}]}]},{title:"Small",id:"small",shortcut:">",submenu:[{title:"Krackhardt kite",id:"krackhardt-kite",link:"https://en.wikipedia.org/wiki/Krackhardt_kite_graph"}]},{title:"Social",id:"social",shortcut:">",submenu:[{title:"Florentine families",id:"florentine-families"},{title:"Zachary’s karate club",id:"karate-club",link:"https://en.wikipedia.org/wiki/Zachary%27s_karate_club"}]},{type:"divider"},{title:"Zodiac",id:"zodiac",shortcut:">",submenu:[{title:"Aries",id:"aries",label:"♈",link:"https://en.wikipedia.org/wiki/Aries_(astrology)"},{title:"Taurus",id:"taurus",label:"♉",link:"https://en.wikipedia.org/wiki/Taurus_(astrology)"},{title:"Gemini",id:"gemini",label:"♊",link:"https://en.wikipedia.org/wiki/Gemini_(astrology)"},{title:"Cancer",id:"cancer",label:"♋",link:"https://en.wikipedia.org/wiki/Cancer_(astrology)"},{title:"Leo",id:"leo",label:"♌",link:"https://en.wikipedia.org/wiki/Leo_(astrology)"},{title:"Virgo",id:"virgo",label:"♍",link:"https://en.wikipedia.org/wiki/Virgo_(astrology)"},{title:"Libra",id:"libra",label:"♎",link:"https://en.wikipedia.org/wiki/Libra_(astrology)"},{title:"Scorpius",id:"scorpius",label:"♏",link:"https://en.wikipedia.org/wiki/Scorpio_(astrology)"},{title:"Ophiuchus",id:"ophiuchus",label:"⛎",link:"https://en.wikipedia.org/wiki/Ophiuchus_(astrology)"},{title:"Sagittarius",id:"sagittarius",label:"♐",link:"https://en.wikipedia.org/wiki/Sagittarius_(astrology)"},{title:"Capricornus",id:"capricornus",label:"♑",link:"https://en.wikipedia.org/wiki/Capricorn_(astrology)"},{title:"Aquarius",id:"aquarius",label:"♒",link:"https://en.wikipedia.org/wiki/Aquarius_(astrology)"},{title:"Pisces",id:"pisces",label:"♓",link:"https://en.wikipedia.org/wiki/Pisces_(astrology)"}]}]},{title:"Metrics",id:"metrics",submenu:[{title:"Basic",id:"basic",shortcut:">",submenu:[{title:"Basic Information",id:"basic-info-btn"},{title:"Components",id:"components-btn"},{title:"Lies On Cycle",id:"lies-on-cycle-btn"},{title:"Degree Sequence",id:"list-degrees-btn"},{title:"Density",id:"density-btn"},{title:"Diameter",id:"diameter-btn"}]},{title:"Centrality",id:"centrality",shortcut:">",submenu:[{title:"Betweenness Centrality",id:"betweenness-centrality-btn"},{title:"Closeness Centrality",id:"closeness-centrality-btn"},{title:"Degree Centrality",id:"degree-centrality-btn"},{title:"Eccentricity",id:"eccentricity-btn"},{title:"Eigenvector Centrality",id:"eigenvector-centrality-btn"},{title:"PageRank",id:"pagerank-btn"}]},{title:"Layout Quality",id:"layout-quality",shortcut:">",submenu:[{title:"Edge Uniformity",id:"edge-uniformity-btn"},{title:"Neighborhood Preservation",id:"neighborhood-preservation-btn"},{title:"Stress",id:"stress-btn"}]},{title:"Other",shortcut:">",id:"other",submenu:[{title:"Simmelian Strength",id:"simmelian-strength-btn"},{title:"Disparity",id:"disparity-btn"}]},{type:"divider"},{title:"Neighbors",id:"neighbors-btn"},{title:"Shortest Path",id:"shortest-path-btn"},{title:"Selected Nodes Info",id:"all-node-info-btn",shortcut:"(a)"},{title:"Selected Edges Info",id:"all-edge-info-btn",shortcut:"(Alt+a)"},{title:"Selected Faces Info",id:"all-face-info-btn"},{title:"Selected Graphs Info",id:"all-graph-info-btn"},{type:"divider"},{title:"Clear Panel",id:"clear-info-panel-btn",shortcut:"(q)"}]},{title:"Operators",id:"help",submenu:[{title:"Layout",id:"layout",shortcut:">",submenu:[{title:"Center Nodes",name:"center-layout"},{title:"Organize Nodes",name:"organize-circle",shortcut:"(O)"},{title:"Random",name:"random-layout"},{title:"Vertical Flip",name:"vflip-layout"},{title:"Horizontal Flip",name:"hflip-layout"},{title:"Rotate",name:"rotate-layout",input:[{type:"number",id:"rotate-layout-1",min:-180,max:180,value:45}]},{type:"divider"},{title:"Force Atlas",name:"force-layout",input:[{type:"number",id:"force-itteration",min:0,max:500,value:50},{type:"number",id:"force-gravity",min:0,max:1,value:25}],link:"https://graphology.github.io/standard-library/layout-forceatlas2.html"}]},{title:"Converter",id:"converter",shortcut:">",submenu:[{title:"To Mixed",id:"to-mixed"},{title:"To Undirected",id:"to-undirected"},{title:"To Directed",id:"to-directed"},{title:"To Weighted",id:"to-weighted"},{title:"To Unweighted",id:"to-unweighted"}]},{title:"Reverse Direction",id:"reverse-direction"},{title:"Subgraph",id:"subgraph-btn"},{title:"Complete Graph",name:"complete-btn",shortcut:"(alt-C)"}]},{title:"Help",id:"help",submenu:[{title:"Mouse Commnads",id:"command",name:"command-btn"},{title:"How to use",id:"how-to-use"},{title:"About",id:"about",shortcut:"version: 1.9.1"}]}];var Nr={},Vd;function Nx(){if(Vd)return Nr;Vd=1;var n=be();function e(s){return typeof s=="number"&&!isNaN(s)}var t=["x","y"];function r(s,u){if(!n(s))throw new Error("graphology-layout/utils.collectLayout: the given graph is not a valid graphology instance.");u=u||{};var l=u.dimensions,d=u.exhaustive!==!1;l||(l=t);var f={},g=l.length;return s.forEachNode(function(m,w){var x=0,S={},A;for(A=0;A<g;A++){var b=l[A],_=w[b];e(_)&&(S[b]=_,x++)}d?x===g&&(f[m]=S):x&&(f[m]=S)}),f}function i(s,u,l){if(!n(s))throw new Error("graphology-layout/utils.assignLayout: the given graph is not a valid graphology instance.");l=l||{};var d=l.dimensions||t,f=d.length,g;s.updateEachNodeAttributes(function(m,w){var x=u[m];if(!x)return w;for(var S=0;S<f;S++)g=d[S],w[g]=x[g];return w},{attributes:d})}function a(s,u){if(!n(s))throw new Error("graphology-layout/utils.collectLayout: the given graph is not a valid graphology instance.");u=u||{};var l=u.dimensions,d=u.type||Float64Array;l||(l=t);var f=l.length,g=new d(s.order*f),m=0;return s.forEachNode(function(w,x){var S;for(S=0;S<f;S++){var A=l[S],b=x[A];e(b)||(b=0),g[m++]=b}}),g}function o(s,u,l){if(!n(s))throw new Error("graphology-layout/utils.assignLayoutAsFlatArray: the given graph is not a valid graphology instance.");l=l||{};var d=l.dimensions;d||(d=t);var f=d.length;if(u.length!==s.order*f)throw new Error("graphology-layout/utils.assignLayoutAsFlatArray: given layout has an incorrect length wrt number of nodes & dimenions.");var g=0;s.updateEachNodeAttributes(function(m,w){for(var x=0;x<f;x++)w[d[x]]=u[g++];return w},{attributes:d})}return Nr.collectLayout=r,Nr.assignLayout=i,Nr.collectLayoutAsFlatArray=a,Nr.assignLayoutAsFlatArray=o,Nr}var Pt=Nx();let Rr=null;const $s=[];let si=!1;const Os=new Map,Rx=5e3;function Gx(n,e,t,r={}){const i=e.export(),a=JSON.stringify({type:n,graph:i,payload:r});if(Os.has(a)){t(Os.get(a));return}$s.push({type:n,graph:i,payload:r,callback:t,key:a}),qs()}function qs(){if(si||$s.length===0)return;const n=$s.shift(),{type:e,graph:t,payload:r,callback:i,key:a}=n;si=!0,Rr||(Rr=new Worker(new URL("/assets/graph-algorithms.worker-D1RQfU80.js",import.meta.url),{type:"module"}));const o=setTimeout(()=>{console.warn(`[${e}] timed out. Restarting worker...`),Rr.terminate(),Rr=null,si=!1,qs()},Rx);Rr.onmessage=({data:s})=>{clearTimeout(o),si=!1,s.error?console.error(`[Worker Error] ${e}:`,s.error):(Os.set(a,s.result),i(s.result)),qs()},Rr.postMessage({type:e,graph:t,payload:r})}var ks=Pf(),Px=qf();const $x=ot(Px);var Ox=Uf();const qx=ot(Ox);class Fx{constructor(e){this.app=e,this.eventBus=e.eventBus,this.canvas=e.canvas}init(){}applyLayout(e,t){let r=!0;switch(e){case"force":this.force(t.itteration,t.gravity);break;case"noverlap":this.noverlap();break;case"rotate180":this.rotate180();break;case"rotate":this.rotate(t);break;case"h-flip":this.hFlip();break;case"v-flip":this.vFlip();break;case"center":this.center();break;case"random":this.random();break;case"circle":this.organizeNodesInCircle();break;case"oneLine":this.organizeNodesInLine();break;case"twoLine":this.organizeNodesInTwoLines(t.line1Count,t.Y);break;default:r=!1;break}r&&this.app.graphManager.saveGraphState()}noverlap(){const e=this.app.graphManager.graph,t=qx(e,{maxIterations:50,settings:{ratio:100,expansion:1.5,gridSize:5}});this.center(t)}force(e=50,t=25){const r=this.app.graphManager.graph;if(r.order<250){const i=$x(r,{iterations:parseInt(e),settings:{gravity:parseInt(t),scalingRatio:100}});this.center(i)}else Gx("force",r,i=>{this.center(i)},{iterations:parseInt(e),settings:{gravity:parseInt(t),scalingRatio:100}})}hFlip(){const e=this.canvas.width/2,t=this.app.graphManager.graph,r=Pt.collectLayout(t);Object.values(r).forEach(i=>{const a=e-i.x;i.x+=2*a}),Pt.assignLayout(t,r)}vFlip(){const e=this.canvas.height/2,t=this.app.graphManager.graph,r=Pt.collectLayout(t);Object.values(r).forEach(i=>{const a=e-i.y;i.y+=2*a}),Pt.assignLayout(t,r)}rotate(e=90){const t=this.app.graphManager.graph,r=e*Math.PI/-180,i=ks.rotation(t,r);this.center(i)}center(e=void 0){const t=this.canvas.width/2,r=this.canvas.height/2,i=this.app.graphManager.graph;e||(e=Pt.collectLayout(i));const a={x:hi(Object.values(e),u=>u.x),y:hi(Object.values(e),u=>u.y)},o=t-a.x,s=r-a.y;Object.values(e).forEach(u=>{u.x+=o,u.y+=s}),Pt.assignLayout(i,e)}random(){const e=this.canvas.width/2,t=this.canvas.height/2,r=this.app.graphManager.graph,i=ks.random(r,{scale:Math.max(e,t)-200});this.center(i)}organizeNodesInCircle(){const e=this.canvas.width/2,t=this.canvas.height/2,r=this.app.graphManager.graph,i=Math.min(e*.5,t*.5),a=ks.circular(r,{scale:i,dimensions:["x","y"]});Object.values(a).forEach(o=>{o.x+=e,o.y+=t}),Pt.assignLayout(r,a)}organizeNodesInLine(){const e=this.canvas.width/2,t=this.canvas.height/2,r=e*.1,i=this.app.graphManager.graph,a=this.app.graphManager.graph.nodes(),o={};if(i.order===0)return;const s=(this.canvas.width-2*r)/Math.max(1,i.order-1);a.forEach((u,l)=>{o[u]={x:r+l*s,y:t}}),Pt.assignLayout(i,o)}organizeNodesInTwoLines(e,t=50){const r=this.canvas.width/2,i=this.canvas.height/2,a=r*.1,o=t,s=this.app.graphManager.graph,u=this.app.graphManager.graph.nodes(),l={};if(s.order===0)return;if(e>s.order){console.error("Line1 count exceeds total nodes.");return}const d=u.slice(0,e),f=u.slice(e),g=d.length,m=f.length,w=g>1?(this.canvas.width-2*a)/(g-1):0,x=m>1?(this.canvas.width-2*a)/(m-1):0,S=i-o,A=i+o;d.forEach((b,_)=>{l[b]={x:a+_*w,y:S}}),f.forEach((b,_)=>{l[b]={x:a+_*x,y:A}}),Pt.assignLayout(s,l)}rotate180(){const e=this.canvas.width,t=this.canvas.height,r=e*.15,i=this.app.graphManager.graph,a=i.nodes(),o={};if(i.order===0)return;let s=1/0,u=1/0,l=-1/0,d=-1/0;a.forEach(b=>{const{x:_,y}=i.getNodeAttributes(b);_<s&&(s=_),y<u&&(u=y),_>l&&(l=_),y>d&&(d=y)});const f=l-s,g=d-u,m=(e-2*r)/f,w=(t-2*r)/g,x=Math.min(m,w),S=(e-f*x)/2,A=(t-g*x)/2;i.forEachNode((b,_)=>{const y=e-((_.x-s)*x+S),D=t-((_.y-u)*x+A);o[b]={x:y,y:D}}),Pt.assignLayout(i,o)}}var cn={exports:{}},Wx=cn.exports,Qd;function Ux(){return Qd||(Qd=1,function(n,e){(function(t,r){n.exports=r()})(Wx,function(){function t(h,c){var p=Object.keys(h);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(h);c&&(E=E.filter(function(k){return Object.getOwnPropertyDescriptor(h,k).enumerable})),p.push.apply(p,E)}return p}function r(h){for(var c=1;c<arguments.length;c++){var p=arguments[c]!=null?arguments[c]:{};c%2?t(Object(p),!0).forEach(function(E){u(h,E,p[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(p)):t(Object(p)).forEach(function(E){Object.defineProperty(h,E,Object.getOwnPropertyDescriptor(p,E))})}return h}function i(h){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},i(h)}function a(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function o(h,c){for(var p=0;p<c.length;p++){var E=c[p];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(h,x(E.key),E)}}function s(h,c,p){return c&&o(h.prototype,c),Object.defineProperty(h,"prototype",{writable:!1}),h}function u(h,c,p){return(c=x(c))in h?Object.defineProperty(h,c,{value:p,enumerable:!0,configurable:!0,writable:!0}):h[c]=p,h}function l(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),c&&f(h,c)}function d(h){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)},d(h)}function f(h,c){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,E){return p.__proto__=E,p},f(h,c)}function g(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function m(h){var c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var p,E=d(h);if(c){var k=d(this).constructor;p=Reflect.construct(E,arguments,k)}else p=E.apply(this,arguments);return function(z,P){if(P&&(typeof P=="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g(z)}(this,p)}}function w(){return w=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(h,c,p){var E=function(z,P){for(;!Object.prototype.hasOwnProperty.call(z,P)&&(z=d(z))!==null;);return z}(h,c);if(E){var k=Object.getOwnPropertyDescriptor(E,c);return k.get?k.get.call(arguments.length<3?h:p):k.value}},w.apply(this,arguments)}function x(h){var c=function(p,E){if(typeof p!="object"||p===null)return p;var k=p[Symbol.toPrimitive];if(k!==void 0){var z=k.call(p,E);if(typeof z!="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(p)}(h,"string");return typeof c=="symbol"?c:c+""}var S=function(h){return!(!h||!h.Window)&&h instanceof h.Window},A=void 0,b=void 0;function _(h){A=h;var c=h.document.createTextNode("");c.ownerDocument!==h.document&&typeof h.wrap=="function"&&h.wrap(c)===c&&(h=h.wrap(h)),b=h}function y(h){return S(h)?h:(h.ownerDocument||h).defaultView||b.window}typeof window<"u"&&window&&_(window);var D=function(h){return!!h&&i(h)==="object"},R=function(h){return typeof h=="function"},v={window:function(h){return h===b||S(h)},docFrag:function(h){return D(h)&&h.nodeType===11},object:D,func:R,number:function(h){return typeof h=="number"},bool:function(h){return typeof h=="boolean"},string:function(h){return typeof h=="string"},element:function(h){if(!h||i(h)!=="object")return!1;var c=y(h)||b;return/object|function/.test(typeof Element>"u"?"undefined":i(Element))?h instanceof Element||h instanceof c.Element:h.nodeType===1&&typeof h.nodeName=="string"},plainObject:function(h){return D(h)&&!!h.constructor&&/function Object\b/.test(h.constructor.toString())},array:function(h){return D(h)&&h.length!==void 0&&R(h.splice)}};function C(h){var c=h.interaction;if(c.prepared.name==="drag"){var p=c.prepared.axis;p==="x"?(c.coords.cur.page.y=c.coords.start.page.y,c.coords.cur.client.y=c.coords.start.client.y,c.coords.velocity.client.y=0,c.coords.velocity.page.y=0):p==="y"&&(c.coords.cur.page.x=c.coords.start.page.x,c.coords.cur.client.x=c.coords.start.client.x,c.coords.velocity.client.x=0,c.coords.velocity.page.x=0)}}function M(h){var c=h.iEvent,p=h.interaction;if(p.prepared.name==="drag"){var E=p.prepared.axis;if(E==="x"||E==="y"){var k=E==="x"?"y":"x";c.page[k]=p.coords.start.page[k],c.client[k]=p.coords.start.client[k],c.delta[k]=0}}}var L={id:"actions/drag",install:function(h){var c=h.actions,p=h.Interactable,E=h.defaults;p.prototype.draggable=L.draggable,c.map.drag=L,c.methodDict.drag="draggable",E.actions.drag=L.defaults},listeners:{"interactions:before-action-move":C,"interactions:action-resume":C,"interactions:action-move":M,"auto-start:check":function(h){var c=h.interaction,p=h.interactable,E=h.buttons,k=p.options.drag;if(k&&k.enabled&&(!c.pointerIsDown||!/mouse|pointer/.test(c.pointerType)||E&p.options.drag.mouseButtons))return h.action={name:"drag",axis:k.lockAxis==="start"?k.startAxis:k.lockAxis},!1}},draggable:function(h){return v.object(h)?(this.options.drag.enabled=h.enabled!==!1,this.setPerAction("drag",h),this.setOnEvents("drag",h),/^(xy|x|y|start)$/.test(h.lockAxis)&&(this.options.drag.lockAxis=h.lockAxis),/^(xy|x|y)$/.test(h.startAxis)&&(this.options.drag.startAxis=h.startAxis),this):v.bool(h)?(this.options.drag.enabled=h,this):this.options.drag},beforeMove:C,move:M,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(h){return h.search("drag")===0}},G=L,$={init:function(h){var c=h;$.document=c.document,$.DocumentFragment=c.DocumentFragment||N,$.SVGElement=c.SVGElement||N,$.SVGSVGElement=c.SVGSVGElement||N,$.SVGElementInstance=c.SVGElementInstance||N,$.Element=c.Element||N,$.HTMLElement=c.HTMLElement||$.Element,$.Event=c.Event,$.Touch=c.Touch||N,$.PointerEvent=c.PointerEvent||c.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function N(){}var Y=$,V={init:function(h){var c=Y.Element,p=h.navigator||{};V.supportsTouch="ontouchstart"in h||v.func(h.DocumentTouch)&&Y.document instanceof h.DocumentTouch,V.supportsPointerEvent=p.pointerEnabled!==!1&&!!Y.PointerEvent,V.isIOS=/iP(hone|od|ad)/.test(p.platform),V.isIOS7=/iP(hone|od|ad)/.test(p.platform)&&/OS 7[^\d]/.test(p.appVersion),V.isIe9=/MSIE 9/.test(p.userAgent),V.isOperaMobile=p.appName==="Opera"&&V.supportsTouch&&/Presto/.test(p.userAgent),V.prefixedMatchesSelector="matches"in c.prototype?"matches":"webkitMatchesSelector"in c.prototype?"webkitMatchesSelector":"mozMatchesSelector"in c.prototype?"mozMatchesSelector":"oMatchesSelector"in c.prototype?"oMatchesSelector":"msMatchesSelector",V.pEventTypes=V.supportsPointerEvent?Y.PointerEvent===h.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,V.wheelEvent=Y.document&&"onmousewheel"in Y.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},F=V;function I(h,c){if(h.contains)return h.contains(c);for(;c;){if(c===h)return!0;c=c.parentNode}return!1}function T(h,c){for(;v.element(h);){if(X(h,c))return h;h=j(h)}return null}function j(h){var c=h.parentNode;if(v.docFrag(c)){for(;(c=c.host)&&v.docFrag(c););return c}return c}function X(h,c){return b!==A&&(c=c.replace(/\/deep\//g," ")),h[F.prefixedMatchesSelector](c)}var W=function(h){return h.parentNode||h.host};function q(h,c){for(var p,E=[],k=h;(p=W(k))&&k!==c&&p!==k.ownerDocument;)E.unshift(k),k=p;return E}function H(h,c,p){for(;v.element(h);){if(X(h,c))return!0;if((h=j(h))===p)return X(h,c)}return!1}function J(h){return h.correspondingUseElement||h}function ie(h){var c=h instanceof Y.SVGElement?h.getBoundingClientRect():h.getClientRects()[0];return c&&{left:c.left,right:c.right,top:c.top,bottom:c.bottom,width:c.width||c.right-c.left,height:c.height||c.bottom-c.top}}function oe(h){var c,p=ie(h);if(!F.isIOS7&&p){var E={x:(c=(c=y(h))||b).scrollX||c.document.documentElement.scrollLeft,y:c.scrollY||c.document.documentElement.scrollTop};p.left+=E.x,p.right+=E.x,p.top+=E.y,p.bottom+=E.y}return p}function ue(h){for(var c=[];h;)c.push(h),h=j(h);return c}function ne(h){return!!v.string(h)&&(Y.document.querySelector(h),!0)}function te(h,c){for(var p in c)h[p]=c[p];return h}function ce(h,c,p){return h==="parent"?j(p):h==="self"?c.getRect(p):T(p,h)}function pe(h,c,p,E){var k=h;return v.string(k)?k=ce(k,c,p):v.func(k)&&(k=k.apply(void 0,E)),v.element(k)&&(k=oe(k)),k}function ye(h){return h&&{x:"x"in h?h.x:h.left,y:"y"in h?h.y:h.top}}function Ce(h){return!h||"x"in h&&"y"in h||((h=te({},h)).x=h.left||0,h.y=h.top||0,h.width=h.width||(h.right||0)-h.x,h.height=h.height||(h.bottom||0)-h.y),h}function fe(h,c,p){h.left&&(c.left+=p.x),h.right&&(c.right+=p.x),h.top&&(c.top+=p.y),h.bottom&&(c.bottom+=p.y),c.width=c.right-c.left,c.height=c.bottom-c.top}function ae(h,c,p){var E=p&&h.options[p];return ye(pe(E&&E.origin||h.options.origin,h,c,[h&&c]))||{x:0,y:0}}function Q(h,c){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(U){return!0},E=arguments.length>3?arguments[3]:void 0;if(E=E||{},v.string(h)&&h.search(" ")!==-1&&(h=xe(h)),v.array(h))return h.forEach(function(U){return Q(U,c,p,E)}),E;if(v.object(h)&&(c=h,h=""),v.func(c)&&p(h))E[h]=E[h]||[],E[h].push(c);else if(v.array(c))for(var k=0,z=c;k<z.length;k++){var P=z[k];Q(h,P,p,E)}else if(v.object(c))for(var O in c)Q(xe(O).map(function(U){return"".concat(h).concat(U)}),c[O],p,E);return E}function xe(h){return h.trim().split(/ +/)}var ze=function(h,c){return Math.sqrt(h*h+c*c)},Ee=["webkit","moz"];function ge(h,c){h.__set||(h.__set={});var p=function(k){if(Ee.some(function(z){return k.indexOf(z)===0}))return 1;typeof h[k]!="function"&&k!=="__set"&&Object.defineProperty(h,k,{get:function(){return k in h.__set?h.__set[k]:h.__set[k]=c[k]},set:function(z){h.__set[k]=z},configurable:!0})};for(var E in c)p(E);return h}function ee(h,c){h.page=h.page||{},h.page.x=c.page.x,h.page.y=c.page.y,h.client=h.client||{},h.client.x=c.client.x,h.client.y=c.client.y,h.timeStamp=c.timeStamp}function Ne(h){h.page.x=0,h.page.y=0,h.client.x=0,h.client.y=0}function $e(h){return h instanceof Y.Event||h instanceof Y.Touch}function Ge(h,c,p){return h=h||"page",(p=p||{}).x=c[h+"X"],p.y=c[h+"Y"],p}function qe(h,c){return c=c||{x:0,y:0},F.isOperaMobile&&$e(h)?(Ge("screen",h,c),c.x+=window.scrollX,c.y+=window.scrollY):Ge("page",h,c),c}function Te(h){return v.number(h.pointerId)?h.pointerId:h.identifier}function Pe(h,c,p){var E=c.length>1?Be(c):c[0];qe(E,h.page),function(k,z){z=z||{},F.isOperaMobile&&$e(k)?Ge("screen",k,z):Ge("client",k,z)}(E,h.client),h.timeStamp=p}function Fe(h){var c=[];return v.array(h)?(c[0]=h[0],c[1]=h[1]):h.type==="touchend"?h.touches.length===1?(c[0]=h.touches[0],c[1]=h.changedTouches[0]):h.touches.length===0&&(c[0]=h.changedTouches[0],c[1]=h.changedTouches[1]):(c[0]=h.touches[0],c[1]=h.touches[1]),c}function Be(h){for(var c={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},p=0;p<h.length;p++){var E=h[p];for(var k in c)c[k]+=E[k]}for(var z in c)c[z]/=h.length;return c}function Ke(h){if(!h.length)return null;var c=Fe(h),p=Math.min(c[0].pageX,c[1].pageX),E=Math.min(c[0].pageY,c[1].pageY),k=Math.max(c[0].pageX,c[1].pageX),z=Math.max(c[0].pageY,c[1].pageY);return{x:p,y:E,left:p,top:E,right:k,bottom:z,width:k-p,height:z-E}}function Xe(h,c){var p=c+"X",E=c+"Y",k=Fe(h),z=k[0][p]-k[1][p],P=k[0][E]-k[1][E];return ze(z,P)}function lt(h,c){var p=c+"X",E=c+"Y",k=Fe(h),z=k[1][p]-k[0][p],P=k[1][E]-k[0][E];return 180*Math.atan2(P,z)/Math.PI}function wt(h){return v.string(h.pointerType)?h.pointerType:v.number(h.pointerType)?[void 0,void 0,"touch","pen","mouse"][h.pointerType]:/touch/.test(h.type||"")||h instanceof Y.Touch?"touch":"mouse"}function ft(h){var c=v.func(h.composedPath)?h.composedPath():h.path;return[J(c?c[0]:h.target),J(h.currentTarget)]}var Et=function(){function h(c){a(this,h),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=c}return s(h,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),h}();Object.defineProperty(Et.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var qt=function(h,c){for(var p=0;p<c.length;p++){var E=c[p];h.push(E)}return h},wn=function(h){return qt([],h)},Ft=function(h,c){for(var p=0;p<h.length;p++)if(c(h[p],p,h))return p;return-1},xt=function(h,c){return h[Ft(h,c)]},Mt=function(h){l(p,h);var c=m(p);function p(E,k,z){var P;a(this,p),(P=c.call(this,k._interaction)).dropzone=void 0,P.dragEvent=void 0,P.relatedTarget=void 0,P.draggable=void 0,P.propagationStopped=!1,P.immediatePropagationStopped=!1;var O=z==="dragleave"?E.prev:E.cur,U=O.element,K=O.dropzone;return P.type=z,P.target=U,P.currentTarget=U,P.dropzone=K,P.dragEvent=k,P.relatedTarget=k.target,P.draggable=k.interactable,P.timeStamp=k.timeStamp,P}return s(p,[{key:"reject",value:function(){var E=this,k=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&k.cur.dropzone===this.dropzone&&k.cur.element===this.target)if(k.prev.dropzone=this.dropzone,k.prev.element=this.target,k.rejected=!0,k.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var z=k.activeDrops,P=Ft(z,function(U){var K=U.dropzone,B=U.element;return K===E.dropzone&&B===E.target});k.activeDrops.splice(P,1);var O=new p(k,this.dragEvent,"dropdeactivate");O.dropzone=this.dropzone,O.target=this.target,this.dropzone.fire(O)}else this.dropzone.fire(new p(k,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),p}(Et);function cr(h,c){for(var p=0,E=h.slice();p<E.length;p++){var k=E[p],z=k.dropzone,P=k.element;c.dropzone=z,c.target=P,z.fire(c),c.propagationStopped=c.immediatePropagationStopped=!1}}function Sr(h,c){for(var p=function(z,P){for(var O=[],U=0,K=z.interactables.list;U<K.length;U++){var B=K[U];if(B.options.drop.enabled){var Z=B.options.drop.accept;if(!(v.element(Z)&&Z!==P||v.string(Z)&&!X(P,Z)||v.func(Z)&&!Z({dropzone:B,draggableElement:P})))for(var re=0,le=B.getAllElements();re<le.length;re++){var se=le[re];se!==P&&O.push({dropzone:B,element:se,rect:B.getRect(se)})}}}return O}(h,c),E=0;E<p.length;E++){var k=p[E];k.rect=k.dropzone.getRect(k.element)}return p}function En(h,c,p){for(var E=h.dropState,k=h.interactable,z=h.element,P=[],O=0,U=E.activeDrops;O<U.length;O++){var K=U[O],B=K.dropzone,Z=K.element,re=K.rect,le=B.dropCheck(c,p,k,z,Z,re);P.push(le?Z:null)}var se=function(he){for(var we,ve,Se,Ie=[],Le=0;Le<he.length;Le++){var ke=he[Le],Me=he[we];if(ke&&Le!==we)if(Me){var tt=W(ke),Oe=W(Me);if(tt!==ke.ownerDocument)if(Oe!==ke.ownerDocument)if(tt!==Oe){Ie=Ie.length?Ie:q(Me);var ct=void 0;if(Me instanceof Y.HTMLElement&&ke instanceof Y.SVGElement&&!(ke instanceof Y.SVGSVGElement)){if(ke===Oe)continue;ct=ke.ownerSVGElement}else ct=ke;for(var St=q(ct,Me.ownerDocument),jt=0;St[jt]&&St[jt]===Ie[jt];)jt++;var Mn=[St[jt-1],St[jt],Ie[jt]];if(Mn[0])for(var Yr=Mn[0].lastChild;Yr;){if(Yr===Mn[1]){we=Le,Ie=St;break}if(Yr===Mn[2])break;Yr=Yr.previousSibling}}else Se=Me,(parseInt(y(ve=ke).getComputedStyle(ve).zIndex,10)||0)>=(parseInt(y(Se).getComputedStyle(Se).zIndex,10)||0)&&(we=Le);else we=Le}else we=Le}return we}(P);return E.activeDrops[se]||null}function Ur(h,c,p){var E=h.dropState,k={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return p.type==="dragstart"&&(k.activate=new Mt(E,p,"dropactivate"),k.activate.target=null,k.activate.dropzone=null),p.type==="dragend"&&(k.deactivate=new Mt(E,p,"dropdeactivate"),k.deactivate.target=null,k.deactivate.dropzone=null),E.rejected||(E.cur.element!==E.prev.element&&(E.prev.dropzone&&(k.leave=new Mt(E,p,"dragleave"),p.dragLeave=k.leave.target=E.prev.element,p.prevDropzone=k.leave.dropzone=E.prev.dropzone),E.cur.dropzone&&(k.enter=new Mt(E,p,"dragenter"),p.dragEnter=E.cur.element,p.dropzone=E.cur.dropzone)),p.type==="dragend"&&E.cur.dropzone&&(k.drop=new Mt(E,p,"drop"),p.dropzone=E.cur.dropzone,p.relatedTarget=E.cur.element),p.type==="dragmove"&&E.cur.dropzone&&(k.move=new Mt(E,p,"dropmove"),p.dropzone=E.cur.dropzone)),k}function Di(h,c){var p=h.dropState,E=p.activeDrops,k=p.cur,z=p.prev;c.leave&&z.dropzone.fire(c.leave),c.enter&&k.dropzone.fire(c.enter),c.move&&k.dropzone.fire(c.move),c.drop&&k.dropzone.fire(c.drop),c.deactivate&&cr(E,c.deactivate),p.prev.dropzone=k.dropzone,p.prev.element=k.element}function lu(h,c){var p=h.interaction,E=h.iEvent,k=h.event;if(E.type==="dragmove"||E.type==="dragend"){var z=p.dropState;c.dynamicDrop&&(z.activeDrops=Sr(c,p.element));var P=E,O=En(p,P,k);z.rejected=z.rejected&&!!O&&O.dropzone===z.cur.dropzone&&O.element===z.cur.element,z.cur.dropzone=O&&O.dropzone,z.cur.element=O&&O.element,z.events=Ur(p,0,P)}}var cu={id:"actions/drop",install:function(h){var c=h.actions,p=h.interactStatic,E=h.Interactable,k=h.defaults;h.usePlugin(G),E.prototype.dropzone=function(z){return function(P,O){if(v.object(O)){if(P.options.drop.enabled=O.enabled!==!1,O.listeners){var U=Q(O.listeners),K=Object.keys(U).reduce(function(Z,re){return Z[/^(enter|leave)/.test(re)?"drag".concat(re):/^(activate|deactivate|move)/.test(re)?"drop".concat(re):re]=U[re],Z},{}),B=P.options.drop.listeners;B&&P.off(B),P.on(K),P.options.drop.listeners=K}return v.func(O.ondrop)&&P.on("drop",O.ondrop),v.func(O.ondropactivate)&&P.on("dropactivate",O.ondropactivate),v.func(O.ondropdeactivate)&&P.on("dropdeactivate",O.ondropdeactivate),v.func(O.ondragenter)&&P.on("dragenter",O.ondragenter),v.func(O.ondragleave)&&P.on("dragleave",O.ondragleave),v.func(O.ondropmove)&&P.on("dropmove",O.ondropmove),/^(pointer|center)$/.test(O.overlap)?P.options.drop.overlap=O.overlap:v.number(O.overlap)&&(P.options.drop.overlap=Math.max(Math.min(1,O.overlap),0)),"accept"in O&&(P.options.drop.accept=O.accept),"checker"in O&&(P.options.drop.checker=O.checker),P}return v.bool(O)?(P.options.drop.enabled=O,P):P.options.drop}(this,z)},E.prototype.dropCheck=function(z,P,O,U,K,B){return function(Z,re,le,se,he,we,ve){var Se=!1;if(!(ve=ve||Z.getRect(we)))return!!Z.options.drop.checker&&Z.options.drop.checker(re,le,Se,Z,we,se,he);var Ie=Z.options.drop.overlap;if(Ie==="pointer"){var Le=ae(se,he,"drag"),ke=qe(re);ke.x+=Le.x,ke.y+=Le.y;var Me=ke.x>ve.left&&ke.x<ve.right,tt=ke.y>ve.top&&ke.y<ve.bottom;Se=Me&&tt}var Oe=se.getRect(he);if(Oe&&Ie==="center"){var ct=Oe.left+Oe.width/2,St=Oe.top+Oe.height/2;Se=ct>=ve.left&&ct<=ve.right&&St>=ve.top&&St<=ve.bottom}return Oe&&v.number(Ie)&&(Se=Math.max(0,Math.min(ve.right,Oe.right)-Math.max(ve.left,Oe.left))*Math.max(0,Math.min(ve.bottom,Oe.bottom)-Math.max(ve.top,Oe.top))/(Oe.width*Oe.height)>=Ie),Z.options.drop.checker&&(Se=Z.options.drop.checker(re,le,Se,Z,we,se,he)),Se}(this,z,P,O,U,K,B)},p.dynamicDrop=function(z){return v.bool(z)?(h.dynamicDrop=z,p):h.dynamicDrop},te(c.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),c.methodDict.drop="dropzone",h.dynamicDrop=!1,k.actions.drop=cu.defaults},listeners:{"interactions:before-action-start":function(h){var c=h.interaction;c.prepared.name==="drag"&&(c.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(h,c){var p=h.interaction,E=(h.event,h.iEvent);if(p.prepared.name==="drag"){var k=p.dropState;k.activeDrops=[],k.events={},k.activeDrops=Sr(c,p.element),k.events=Ur(p,0,E),k.events.activate&&(cr(k.activeDrops,k.events.activate),c.fire("actions/drop:start",{interaction:p,dragEvent:E}))}},"interactions:action-move":lu,"interactions:after-action-move":function(h,c){var p=h.interaction,E=h.iEvent;if(p.prepared.name==="drag"){var k=p.dropState;Di(p,k.events),c.fire("actions/drop:move",{interaction:p,dragEvent:E}),k.events={}}},"interactions:action-end":function(h,c){if(h.interaction.prepared.name==="drag"){var p=h.interaction,E=h.iEvent;lu(h,c),Di(p,p.dropState.events),c.fire("actions/drop:end",{interaction:p,dragEvent:E})}},"interactions:stop":function(h){var c=h.interaction;if(c.prepared.name==="drag"){var p=c.dropState;p&&(p.activeDrops=null,p.events=null,p.cur.dropzone=null,p.cur.element=null,p.prev.dropzone=null,p.prev.element=null,p.rejected=!1)}}},getActiveDrops:Sr,getDrop:En,getDropEvents:Ur,fireDropEvents:Di,filterEventType:function(h){return h.search("drag")===0||h.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},Sp=cu;function Ci(h){var c=h.interaction,p=h.iEvent,E=h.phase;if(c.prepared.name==="gesture"){var k=c.pointers.map(function(K){return K.pointer}),z=E==="start",P=E==="end",O=c.interactable.options.deltaSource;if(p.touches=[k[0],k[1]],z)p.distance=Xe(k,O),p.box=Ke(k),p.scale=1,p.ds=0,p.angle=lt(k,O),p.da=0,c.gesture.startDistance=p.distance,c.gesture.startAngle=p.angle;else if(P||c.pointers.length<2){var U=c.prevEvent;p.distance=U.distance,p.box=U.box,p.scale=U.scale,p.ds=0,p.angle=U.angle,p.da=0}else p.distance=Xe(k,O),p.box=Ke(k),p.scale=p.distance/c.gesture.startDistance,p.angle=lt(k,O),p.ds=p.scale-c.gesture.scale,p.da=p.angle-c.gesture.angle;c.gesture.distance=p.distance,c.gesture.angle=p.angle,v.number(p.scale)&&p.scale!==1/0&&!isNaN(p.scale)&&(c.gesture.scale=p.scale)}}var Ii={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(h){var c=h.actions,p=h.Interactable,E=h.defaults;p.prototype.gesturable=function(k){return v.object(k)?(this.options.gesture.enabled=k.enabled!==!1,this.setPerAction("gesture",k),this.setOnEvents("gesture",k),this):v.bool(k)?(this.options.gesture.enabled=k,this):this.options.gesture},c.map.gesture=Ii,c.methodDict.gesture="gesturable",E.actions.gesture=Ii.defaults},listeners:{"interactions:action-start":Ci,"interactions:action-move":Ci,"interactions:action-end":Ci,"interactions:new":function(h){h.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(h){if(!(h.interaction.pointers.length<2)){var c=h.interactable.options.gesture;if(c&&c.enabled)return h.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(h){return h.search("gesture")===0}},Ap=Ii;function _p(h,c,p,E,k,z,P){if(!c)return!1;if(c===!0){var O=v.number(z.width)?z.width:z.right-z.left,U=v.number(z.height)?z.height:z.bottom-z.top;if(P=Math.min(P,Math.abs((h==="left"||h==="right"?O:U)/2)),O<0&&(h==="left"?h="right":h==="right"&&(h="left")),U<0&&(h==="top"?h="bottom":h==="bottom"&&(h="top")),h==="left"){var K=O>=0?z.left:z.right;return p.x<K+P}if(h==="top"){var B=U>=0?z.top:z.bottom;return p.y<B+P}if(h==="right")return p.x>(O>=0?z.right:z.left)-P;if(h==="bottom")return p.y>(U>=0?z.bottom:z.top)-P}return!!v.element(E)&&(v.element(c)?c===E:H(E,c,k))}function hu(h){var c=h.iEvent,p=h.interaction;if(p.prepared.name==="resize"&&p.resizeAxes){var E=c;p.interactable.options.resize.square?(p.resizeAxes==="y"?E.delta.x=E.delta.y:E.delta.y=E.delta.x,E.axes="xy"):(E.axes=p.resizeAxes,p.resizeAxes==="x"?E.delta.y=0:p.resizeAxes==="y"&&(E.delta.x=0))}}var Wt,hr,Ut={id:"actions/resize",before:["actions/drag"],install:function(h){var c=h.actions,p=h.browser,E=h.Interactable,k=h.defaults;Ut.cursors=function(z){return z.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(p),Ut.defaultMargin=p.supportsTouch||p.supportsPointerEvent?20:10,E.prototype.resizable=function(z){return function(P,O,U){return v.object(O)?(P.options.resize.enabled=O.enabled!==!1,P.setPerAction("resize",O),P.setOnEvents("resize",O),v.string(O.axis)&&/^x$|^y$|^xy$/.test(O.axis)?P.options.resize.axis=O.axis:O.axis===null&&(P.options.resize.axis=U.defaults.actions.resize.axis),v.bool(O.preserveAspectRatio)?P.options.resize.preserveAspectRatio=O.preserveAspectRatio:v.bool(O.square)&&(P.options.resize.square=O.square),P):v.bool(O)?(P.options.resize.enabled=O,P):P.options.resize}(this,z,h)},c.map.resize=Ut,c.methodDict.resize="resizable",k.actions.resize=Ut.defaults},listeners:{"interactions:new":function(h){h.interaction.resizeAxes="xy"},"interactions:action-start":function(h){(function(c){var p=c.iEvent,E=c.interaction;if(E.prepared.name==="resize"&&E.prepared.edges){var k=p,z=E.rect;E._rects={start:te({},z),corrected:te({},z),previous:te({},z),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},k.edges=E.prepared.edges,k.rect=E._rects.corrected,k.deltaRect=E._rects.delta}})(h),hu(h)},"interactions:action-move":function(h){(function(c){var p=c.iEvent,E=c.interaction;if(E.prepared.name==="resize"&&E.prepared.edges){var k=p,z=E.interactable.options.resize.invert,P=z==="reposition"||z==="negate",O=E.rect,U=E._rects,K=U.start,B=U.corrected,Z=U.delta,re=U.previous;if(te(re,B),P){if(te(B,O),z==="reposition"){if(B.top>B.bottom){var le=B.top;B.top=B.bottom,B.bottom=le}if(B.left>B.right){var se=B.left;B.left=B.right,B.right=se}}}else B.top=Math.min(O.top,K.bottom),B.bottom=Math.max(O.bottom,K.top),B.left=Math.min(O.left,K.right),B.right=Math.max(O.right,K.left);for(var he in B.width=B.right-B.left,B.height=B.bottom-B.top,B)Z[he]=B[he]-re[he];k.edges=E.prepared.edges,k.rect=B,k.deltaRect=Z}})(h),hu(h)},"interactions:action-end":function(h){var c=h.iEvent,p=h.interaction;if(p.prepared.name==="resize"&&p.prepared.edges){var E=c;E.edges=p.prepared.edges,E.rect=p._rects.corrected,E.deltaRect=p._rects.delta}},"auto-start:check":function(h){var c=h.interaction,p=h.interactable,E=h.element,k=h.rect,z=h.buttons;if(k){var P=te({},c.coords.cur.page),O=p.options.resize;if(O&&O.enabled&&(!c.pointerIsDown||!/mouse|pointer/.test(c.pointerType)||z&O.mouseButtons)){if(v.object(O.edges)){var U={left:!1,right:!1,top:!1,bottom:!1};for(var K in U)U[K]=_p(K,O.edges[K],P,c._latestPointer.eventTarget,E,k,O.margin||Ut.defaultMargin);U.left=U.left&&!U.right,U.top=U.top&&!U.bottom,(U.left||U.right||U.top||U.bottom)&&(h.action={name:"resize",edges:U})}else{var B=O.axis!=="y"&&P.x>k.right-Ut.defaultMargin,Z=O.axis!=="x"&&P.y>k.bottom-Ut.defaultMargin;(B||Z)&&(h.action={name:"resize",axes:(B?"x":"")+(Z?"y":"")})}return!h.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(h){var c=h.edges,p=h.axis,E=h.name,k=Ut.cursors,z=null;if(p)z=k[E+p];else if(c){for(var P="",O=0,U=["top","bottom","left","right"];O<U.length;O++){var K=U[O];c[K]&&(P+=K)}z=k[P]}return z},filterEventType:function(h){return h.search("resize")===0},defaultMargin:null},kp=Ut,Dp={id:"actions",install:function(h){h.usePlugin(Ap),h.usePlugin(kp),h.usePlugin(G),h.usePlugin(Sp)}},du=0,Jt={request:function(h){return Wt(h)},cancel:function(h){return hr(h)},init:function(h){if(Wt=h.requestAnimationFrame,hr=h.cancelAnimationFrame,!Wt)for(var c=["ms","moz","webkit","o"],p=0;p<c.length;p++){var E=c[p];Wt=h["".concat(E,"RequestAnimationFrame")],hr=h["".concat(E,"CancelAnimationFrame")]||h["".concat(E,"CancelRequestAnimationFrame")]}Wt=Wt&&Wt.bind(h),hr=hr&&hr.bind(h),Wt||(Wt=function(k){var z=Date.now(),P=Math.max(0,16-(z-du)),O=h.setTimeout(function(){k(z+P)},P);return du=z+P,O},hr=function(k){return clearTimeout(k)})}},De={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(h){De.isScrolling=!0,Jt.cancel(De.i),h.autoScroll=De,De.interaction=h,De.prevTime=De.now(),De.i=Jt.request(De.scroll)},stop:function(){De.isScrolling=!1,De.interaction&&(De.interaction.autoScroll=null),Jt.cancel(De.i)},scroll:function(){var h=De.interaction,c=h.interactable,p=h.element,E=h.prepared.name,k=c.options[E].autoScroll,z=fu(k.container,c,p),P=De.now(),O=(P-De.prevTime)/1e3,U=k.speed*O;if(U>=1){var K={x:De.x*U,y:De.y*U};if(K.x||K.y){var B=pu(z);v.window(z)?z.scrollBy(K.x,K.y):z&&(z.scrollLeft+=K.x,z.scrollTop+=K.y);var Z=pu(z),re={x:Z.x-B.x,y:Z.y-B.y};(re.x||re.y)&&c.fire({type:"autoscroll",target:p,interactable:c,delta:re,interaction:h,container:z})}De.prevTime=P}De.isScrolling&&(Jt.cancel(De.i),De.i=Jt.request(De.scroll))},check:function(h,c){var p;return(p=h.options[c].autoScroll)==null?void 0:p.enabled},onInteractionMove:function(h){var c=h.interaction,p=h.pointer;if(c.interacting()&&De.check(c.interactable,c.prepared.name))if(c.simulation)De.x=De.y=0;else{var E,k,z,P,O=c.interactable,U=c.element,K=c.prepared.name,B=O.options[K].autoScroll,Z=fu(B.container,O,U);if(v.window(Z))P=p.clientX<De.margin,E=p.clientY<De.margin,k=p.clientX>Z.innerWidth-De.margin,z=p.clientY>Z.innerHeight-De.margin;else{var re=ie(Z);P=p.clientX<re.left+De.margin,E=p.clientY<re.top+De.margin,k=p.clientX>re.right-De.margin,z=p.clientY>re.bottom-De.margin}De.x=k?1:P?-1:0,De.y=z?1:E?-1:0,De.isScrolling||(De.margin=B.margin,De.speed=B.speed,De.start(c))}}};function fu(h,c,p){return(v.string(h)?ce(h,c,p):h)||y(p)}function pu(h){return v.window(h)&&(h=window.document.body),{x:h.scrollLeft,y:h.scrollTop}}var Cp={id:"auto-scroll",install:function(h){var c=h.defaults,p=h.actions;h.autoScroll=De,De.now=function(){return h.now()},p.phaselessTypes.autoscroll=!0,c.perAction.autoScroll=De.defaults},listeners:{"interactions:new":function(h){h.interaction.autoScroll=null},"interactions:destroy":function(h){h.interaction.autoScroll=null,De.stop(),De.interaction&&(De.interaction=null)},"interactions:stop":De.stop,"interactions:action-move":function(h){return De.onInteractionMove(h)}}},Ip=Cp;function jr(h,c){var p=!1;return function(){return p||(b.console.warn(c),p=!0),h.apply(this,arguments)}}function Mi(h,c){return h.name=c.name,h.axis=c.axis,h.edges=c.edges,h}function Mp(h){return v.bool(h)?(this.options.styleCursor=h,this):h===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Lp(h){return v.func(h)?(this.options.actionChecker=h,this):h===null?(delete this.options.actionChecker,this):this.options.actionChecker}var zp={id:"auto-start/interactableMethods",install:function(h){var c=h.Interactable;c.prototype.getAction=function(p,E,k,z){var P=function(O,U,K,B,Z){var re=O.getRect(B),le=U.buttons||{0:1,1:4,3:8,4:16}[U.button],se={action:null,interactable:O,interaction:K,element:B,rect:re,buttons:le};return Z.fire("auto-start:check",se),se.action}(this,E,k,z,h);return this.options.actionChecker?this.options.actionChecker(p,E,P,this,z,k):P},c.prototype.ignoreFrom=jr(function(p){return this._backCompatOption("ignoreFrom",p)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),c.prototype.allowFrom=jr(function(p){return this._backCompatOption("allowFrom",p)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),c.prototype.actionChecker=Lp,c.prototype.styleCursor=Mp}};function gu(h,c,p,E,k){return c.testIgnoreAllow(c.options[h.name],p,E)&&c.options[h.name].enabled&&xn(c,p,h,k)?h:null}function Tp(h,c,p,E,k,z,P){for(var O=0,U=E.length;O<U;O++){var K=E[O],B=k[O],Z=K.getAction(c,p,h,B);if(Z){var re=gu(Z,K,B,z,P);if(re)return{action:re,interactable:K,element:B}}}return{action:null,interactable:null,element:null}}function vu(h,c,p,E,k){var z=[],P=[],O=E;function U(B){z.push(B),P.push(O)}for(;v.element(O);){z=[],P=[],k.interactables.forEachMatch(O,U);var K=Tp(h,c,p,z,P,E,k);if(K.action&&!K.interactable.options[K.action.name].manualStart)return K;O=j(O)}return{action:null,interactable:null,element:null}}function yu(h,c,p){var E=c.action,k=c.interactable,z=c.element;E=E||{name:null},h.interactable=k,h.element=z,Mi(h.prepared,E),h.rect=k&&E.name?k.getRect(z):null,bu(h,p),p.fire("autoStart:prepared",{interaction:h})}function xn(h,c,p,E){var k=h.options,z=k[p.name].max,P=k[p.name].maxPerElement,O=E.autoStart.maxInteractions,U=0,K=0,B=0;if(!(z&&P&&O))return!1;for(var Z=0,re=E.interactions.list;Z<re.length;Z++){var le=re[Z],se=le.prepared.name;if(le.interacting()&&(++U>=O||le.interactable===h&&((K+=se===p.name?1:0)>=z||le.element===c&&(B++,se===p.name&&B>=P))))return!1}return O>0}function mu(h,c){return v.number(h)?(c.autoStart.maxInteractions=h,this):c.autoStart.maxInteractions}function Li(h,c,p){var E=p.autoStart.cursorElement;E&&E!==h&&(E.style.cursor=""),h.ownerDocument.documentElement.style.cursor=c,h.style.cursor=c,p.autoStart.cursorElement=c?h:null}function bu(h,c){var p=h.interactable,E=h.element,k=h.prepared;if(h.pointerType==="mouse"&&p&&p.options.styleCursor){var z="";if(k.name){var P=p.options[k.name].cursorChecker;z=v.func(P)?P(k,p,E,h._interacting):c.actions.map[k.name].getCursor(k)}Li(h.element,z||"",c)}else c.autoStart.cursorElement&&Li(c.autoStart.cursorElement,"",c)}var Np={id:"auto-start/base",before:["actions"],install:function(h){var c=h.interactStatic,p=h.defaults;h.usePlugin(zp),p.base.actionChecker=null,p.base.styleCursor=!0,te(p.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),c.maxInteractions=function(E){return mu(E,h)},h.autoStart={maxInteractions:1/0,withinInteractionLimit:xn,cursorElement:null}},listeners:{"interactions:down":function(h,c){var p=h.interaction,E=h.pointer,k=h.event,z=h.eventTarget;p.interacting()||yu(p,vu(p,E,k,z,c),c)},"interactions:move":function(h,c){(function(p,E){var k=p.interaction,z=p.pointer,P=p.event,O=p.eventTarget;k.pointerType!=="mouse"||k.pointerIsDown||k.interacting()||yu(k,vu(k,z,P,O,E),E)})(h,c),function(p,E){var k=p.interaction;if(k.pointerIsDown&&!k.interacting()&&k.pointerWasMoved&&k.prepared.name){E.fire("autoStart:before-start",p);var z=k.interactable,P=k.prepared.name;P&&z&&(z.options[P].manualStart||!xn(z,k.element,k.prepared,E)?k.stop():(k.start(k.prepared,z,k.element),bu(k,E)))}}(h,c)},"interactions:stop":function(h,c){var p=h.interaction,E=p.interactable;E&&E.options.styleCursor&&Li(p.element,"",c)}},maxInteractions:mu,withinInteractionLimit:xn,validateAction:gu},zi=Np,Rp={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(h,c){var p=h.interaction,E=h.eventTarget,k=h.dx,z=h.dy;if(p.prepared.name==="drag"){var P=Math.abs(k),O=Math.abs(z),U=p.interactable.options.drag,K=U.startAxis,B=P>O?"x":P<O?"y":"xy";if(p.prepared.axis=U.lockAxis==="start"?B[0]:U.lockAxis,B!=="xy"&&K!=="xy"&&K!==B){p.prepared.name=null;for(var Z=E,re=function(se){if(se!==p.interactable){var he=p.interactable.options.drag;if(!he.manualStart&&se.testIgnoreAllow(he,Z,E)){var we=se.getAction(p.downPointer,p.downEvent,p,Z);if(we&&we.name==="drag"&&function(ve,Se){if(!Se)return!1;var Ie=Se.options.drag.startAxis;return ve==="xy"||Ie==="xy"||Ie===ve}(B,se)&&zi.validateAction(we,se,Z,E,c))return se}}};v.element(Z);){var le=c.interactables.forEachMatch(Z,re);if(le){p.prepared.name="drag",p.interactable=le,p.element=Z;break}Z=j(Z)}}}}}};function Ti(h){var c=h.prepared&&h.prepared.name;if(!c)return null;var p=h.interactable.options;return p[c].hold||p[c].delay}var Gp={id:"auto-start/hold",install:function(h){var c=h.defaults;h.usePlugin(zi),c.perAction.hold=0,c.perAction.delay=0},listeners:{"interactions:new":function(h){h.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(h){var c=h.interaction,p=Ti(c);p>0&&(c.autoStartHoldTimer=setTimeout(function(){c.start(c.prepared,c.interactable,c.element)},p))},"interactions:move":function(h){var c=h.interaction,p=h.duplicate;c.autoStartHoldTimer&&c.pointerWasMoved&&!p&&(clearTimeout(c.autoStartHoldTimer),c.autoStartHoldTimer=null)},"autoStart:before-start":function(h){var c=h.interaction;Ti(c)>0&&(c.prepared.name=null)}},getHoldDuration:Ti},Pp=Gp,$p={id:"auto-start",install:function(h){h.usePlugin(zi),h.usePlugin(Pp),h.usePlugin(Rp)}},Op=function(h){return/^(always|never|auto)$/.test(h)?(this.options.preventDefault=h,this):v.bool(h)?(this.options.preventDefault=h?"always":"never",this):this.options.preventDefault};function qp(h){var c=h.interaction,p=h.event;c.interactable&&c.interactable.checkAndPreventDefault(p)}var wu={id:"core/interactablePreventDefault",install:function(h){var c=h.Interactable;c.prototype.preventDefault=Op,c.prototype.checkAndPreventDefault=function(p){return function(E,k,z){var P=E.options.preventDefault;if(P!=="never")if(P!=="always"){if(k.events.supportsPassive&&/^touch(start|move)$/.test(z.type)){var O=y(z.target).document,U=k.getDocOptions(O);if(!U||!U.events||U.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(z.type)||v.element(z.target)&&X(z.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||z.preventDefault()}else z.preventDefault()}(this,h,p)},h.interactions.docEvents.push({type:"dragstart",listener:function(p){for(var E=0,k=h.interactions.list;E<k.length;E++){var z=k[E];if(z.element&&(z.element===p.target||I(z.element,p.target)))return void z.interactable.checkAndPreventDefault(p)}}})},listeners:["down","move","up","cancel"].reduce(function(h,c){return h["interactions:".concat(c)]=qp,h},{})};function Sn(h,c){if(c.phaselessTypes[h])return!0;for(var p in c.map)if(h.indexOf(p)===0&&h.substr(p.length)in c.phases)return!0;return!1}function Ar(h){var c={};for(var p in h){var E=h[p];v.plainObject(E)?c[p]=Ar(E):v.array(E)?c[p]=wn(E):c[p]=E}return c}var Ni=function(){function h(c){a(this,h),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=c,this.result=An(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return s(h,[{key:"start",value:function(c,p){var E,k,z=c.phase,P=this.interaction,O=function(K){var B=K.interactable.options[K.prepared.name],Z=B.modifiers;return Z&&Z.length?Z:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(re){var le=B[re];return le&&le.enabled&&{options:le,methods:le._methods}}).filter(function(re){return!!re})}(P);this.prepareStates(O),this.startEdges=te({},P.edges),this.edges=te({},this.startEdges),this.startOffset=(E=P.rect,k=p,E?{left:k.x-E.left,top:k.y-E.top,right:E.right-k.x,bottom:E.bottom-k.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var U=this.fillArg({phase:z,pageCoords:p,preEnd:!1});return this.result=An(),this.startAll(U),this.result=this.setAll(U)}},{key:"fillArg",value:function(c){var p=this.interaction;return c.interaction=p,c.interactable=p.interactable,c.element=p.element,c.rect||(c.rect=p.rect),c.edges||(c.edges=this.startEdges),c.startOffset=this.startOffset,c}},{key:"startAll",value:function(c){for(var p=0,E=this.states;p<E.length;p++){var k=E[p];k.methods.start&&(c.state=k,k.methods.start(c))}}},{key:"setAll",value:function(c){var p=c.phase,E=c.preEnd,k=c.skipModifiers,z=c.rect,P=c.edges;c.coords=te({},c.pageCoords),c.rect=te({},z),c.edges=te({},P);for(var O=k?this.states.slice(k):this.states,U=An(c.coords,c.rect),K=0;K<O.length;K++){var B,Z=O[K],re=Z.options,le=te({},c.coords),se=null;(B=Z.methods)!=null&&B.set&&this.shouldDo(re,E,p)&&(c.state=Z,se=Z.methods.set(c),fe(c.edges,c.rect,{x:c.coords.x-le.x,y:c.coords.y-le.y})),U.eventProps.push(se)}te(this.edges,c.edges),U.delta.x=c.coords.x-c.pageCoords.x,U.delta.y=c.coords.y-c.pageCoords.y,U.rectDelta.left=c.rect.left-z.left,U.rectDelta.right=c.rect.right-z.right,U.rectDelta.top=c.rect.top-z.top,U.rectDelta.bottom=c.rect.bottom-z.bottom;var he=this.result.coords,we=this.result.rect;if(he&&we){var ve=U.rect.left!==we.left||U.rect.right!==we.right||U.rect.top!==we.top||U.rect.bottom!==we.bottom;U.changed=ve||he.x!==U.coords.x||he.y!==U.coords.y}return U}},{key:"applyToInteraction",value:function(c){var p=this.interaction,E=c.phase,k=p.coords.cur,z=p.coords.start,P=this.result,O=this.startDelta,U=P.delta;E==="start"&&te(this.startDelta,P.delta);for(var K=0,B=[[z,O],[k,U]];K<B.length;K++){var Z=B[K],re=Z[0],le=Z[1];re.page.x+=le.x,re.page.y+=le.y,re.client.x+=le.x,re.client.y+=le.y}var se=this.result.rectDelta,he=c.rect||p.rect;he.left+=se.left,he.right+=se.right,he.top+=se.top,he.bottom+=se.bottom,he.width=he.right-he.left,he.height=he.bottom-he.top}},{key:"setAndApply",value:function(c){var p=this.interaction,E=c.phase,k=c.preEnd,z=c.skipModifiers,P=this.setAll(this.fillArg({preEnd:k,phase:E,pageCoords:c.modifiedCoords||p.coords.cur.page}));if(this.result=P,!P.changed&&(!z||z<this.states.length)&&p.interacting())return!1;if(c.modifiedCoords){var O=p.coords.cur.page,U={x:c.modifiedCoords.x-O.x,y:c.modifiedCoords.y-O.y};P.coords.x+=U.x,P.coords.y+=U.y,P.delta.x+=U.x,P.delta.y+=U.y}this.applyToInteraction(c)}},{key:"beforeEnd",value:function(c){var p=c.interaction,E=c.event,k=this.states;if(k&&k.length){for(var z=!1,P=0;P<k.length;P++){var O=k[P];c.state=O;var U=O.options,K=O.methods,B=K.beforeEnd&&K.beforeEnd(c);if(B)return this.endResult=B,!1;z=z||!z&&this.shouldDo(U,!0,c.phase,!0)}z&&p.move({event:E,preEnd:!0})}}},{key:"stop",value:function(c){var p=c.interaction;if(this.states&&this.states.length){var E=te({states:this.states,interactable:p.interactable,element:p.element,rect:null},c);this.fillArg(E);for(var k=0,z=this.states;k<z.length;k++){var P=z[k];E.state=P,P.methods.stop&&P.methods.stop(E)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(c){this.states=[];for(var p=0;p<c.length;p++){var E=c[p],k=E.options,z=E.methods,P=E.name;this.states.push({options:k,methods:z,index:p,name:P})}return this.states}},{key:"restoreInteractionCoords",value:function(c){var p=c.interaction,E=p.coords,k=p.rect,z=p.modification;if(z.result){for(var P=z.startDelta,O=z.result,U=O.delta,K=O.rectDelta,B=0,Z=[[E.start,P],[E.cur,U]];B<Z.length;B++){var re=Z[B],le=re[0],se=re[1];le.page.x-=se.x,le.page.y-=se.y,le.client.x-=se.x,le.client.y-=se.y}k.left-=K.left,k.right-=K.right,k.top-=K.top,k.bottom-=K.bottom}}},{key:"shouldDo",value:function(c,p,E,k){return!(!c||c.enabled===!1||k&&!c.endOnly||c.endOnly&&!p||E==="start"&&!c.setStart)}},{key:"copyFrom",value:function(c){this.startOffset=c.startOffset,this.startDelta=c.startDelta,this.startEdges=c.startEdges,this.edges=c.edges,this.states=c.states.map(function(p){return Ar(p)}),this.result=An(te({},c.result.coords),te({},c.result.rect))}},{key:"destroy",value:function(){for(var c in this)this[c]=null}}]),h}();function An(h,c){return{rect:c,coords:h,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function er(h,c){var p=h.defaults,E={start:h.start,set:h.set,beforeEnd:h.beforeEnd,stop:h.stop},k=function(z){var P=z||{};for(var O in P.enabled=P.enabled!==!1,p)O in P||(P[O]=p[O]);var U={options:P,methods:E,name:c,enable:function(){return P.enabled=!0,U},disable:function(){return P.enabled=!1,U}};return U};return c&&typeof c=="string"&&(k._defaults=p,k._methods=E),k}function Br(h){var c=h.iEvent,p=h.interaction.modification.result;p&&(c.modifiers=p.eventProps)}var Fp={id:"modifiers/base",before:["actions"],install:function(h){h.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(h){var c=h.interaction;c.modification=new Ni(c)},"interactions:before-action-start":function(h){var c=h.interaction,p=h.interaction.modification;p.start(h,c.coords.start.page),c.edges=p.edges,p.applyToInteraction(h)},"interactions:before-action-move":function(h){var c=h.interaction,p=c.modification,E=p.setAndApply(h);return c.edges=p.edges,E},"interactions:before-action-end":function(h){var c=h.interaction,p=c.modification,E=p.beforeEnd(h);return c.edges=p.startEdges,E},"interactions:action-start":Br,"interactions:action-move":Br,"interactions:action-end":Br,"interactions:after-action-start":function(h){return h.interaction.modification.restoreInteractionCoords(h)},"interactions:after-action-move":function(h){return h.interaction.modification.restoreInteractionCoords(h)},"interactions:stop":function(h){return h.interaction.modification.stop(h)}}},Eu=Fp,xu={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},Ri=function(h){l(p,h);var c=m(p);function p(E,k,z,P,O,U,K){var B;a(this,p),(B=c.call(this,E)).relatedTarget=null,B.screenX=void 0,B.screenY=void 0,B.button=void 0,B.buttons=void 0,B.ctrlKey=void 0,B.shiftKey=void 0,B.altKey=void 0,B.metaKey=void 0,B.page=void 0,B.client=void 0,B.delta=void 0,B.rect=void 0,B.x0=void 0,B.y0=void 0,B.t0=void 0,B.dt=void 0,B.duration=void 0,B.clientX0=void 0,B.clientY0=void 0,B.velocity=void 0,B.speed=void 0,B.swipe=void 0,B.axes=void 0,B.preEnd=void 0,O=O||E.element;var Z=E.interactable,re=(Z&&Z.options||xu).deltaSource,le=ae(Z,O,z),se=P==="start",he=P==="end",we=se?g(B):E.prevEvent,ve=se?E.coords.start:he?{page:we.page,client:we.client,timeStamp:E.coords.cur.timeStamp}:E.coords.cur;return B.page=te({},ve.page),B.client=te({},ve.client),B.rect=te({},E.rect),B.timeStamp=ve.timeStamp,he||(B.page.x-=le.x,B.page.y-=le.y,B.client.x-=le.x,B.client.y-=le.y),B.ctrlKey=k.ctrlKey,B.altKey=k.altKey,B.shiftKey=k.shiftKey,B.metaKey=k.metaKey,B.button=k.button,B.buttons=k.buttons,B.target=O,B.currentTarget=O,B.preEnd=U,B.type=K||z+(P||""),B.interactable=Z,B.t0=se?E.pointers[E.pointers.length-1].downTime:we.t0,B.x0=E.coords.start.page.x-le.x,B.y0=E.coords.start.page.y-le.y,B.clientX0=E.coords.start.client.x-le.x,B.clientY0=E.coords.start.client.y-le.y,B.delta=se||he?{x:0,y:0}:{x:B[re].x-we[re].x,y:B[re].y-we[re].y},B.dt=E.coords.delta.timeStamp,B.duration=B.timeStamp-B.t0,B.velocity=te({},E.coords.velocity[re]),B.speed=ze(B.velocity.x,B.velocity.y),B.swipe=he||P==="inertiastart"?B.getSwipe():null,B}return s(p,[{key:"getSwipe",value:function(){var E=this._interaction;if(E.prevEvent.speed<600||this.timeStamp-E.prevEvent.timeStamp>150)return null;var k=180*Math.atan2(E.prevEvent.velocityY,E.prevEvent.velocityX)/Math.PI;k<0&&(k+=360);var z=112.5<=k&&k<247.5,P=202.5<=k&&k<337.5;return{up:P,down:!P&&22.5<=k&&k<157.5,left:z,right:!z&&(292.5<=k||k<67.5),angle:k,speed:E.prevEvent.speed,velocity:{x:E.prevEvent.velocityX,y:E.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),p}(Et);Object.defineProperties(Ri.prototype,{pageX:{get:function(){return this.page.x},set:function(h){this.page.x=h}},pageY:{get:function(){return this.page.y},set:function(h){this.page.y=h}},clientX:{get:function(){return this.client.x},set:function(h){this.client.x=h}},clientY:{get:function(){return this.client.y},set:function(h){this.client.y=h}},dx:{get:function(){return this.delta.x},set:function(h){this.delta.x=h}},dy:{get:function(){return this.delta.y},set:function(h){this.delta.y=h}},velocityX:{get:function(){return this.velocity.x},set:function(h){this.velocity.x=h}},velocityY:{get:function(){return this.velocity.y},set:function(h){this.velocity.y=h}}});var Wp=s(function h(c,p,E,k,z){a(this,h),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=c,this.pointer=p,this.event=E,this.downTime=k,this.downTarget=z}),Up=function(h){return h.interactable="",h.element="",h.prepared="",h.pointerIsDown="",h.pointerWasMoved="",h._proxy="",h}({}),Su=function(h){return h.start="",h.move="",h.end="",h.stop="",h.interacting="",h}({}),jp=0,Bp=function(){function h(c){var p=this,E=c.pointerType,k=c.scopeFire;a(this,h),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=jr(function(B){this.move(B)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=jp++,this._scopeFire=k,this.pointerType=E;var z=this;this._proxy={};var P=function(B){Object.defineProperty(p._proxy,B,{get:function(){return z[B]}})};for(var O in Up)P(O);var U=function(B){Object.defineProperty(p._proxy,B,{value:function(){return z[B].apply(z,arguments)}})};for(var K in Su)U(K);this._scopeFire("interactions:new",{interaction:this})}return s(h,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(c,p,E){var k=this.updatePointer(c,p,E,!0),z=this.pointers[k];this._scopeFire("interactions:down",{pointer:c,event:p,eventTarget:E,pointerIndex:k,pointerInfo:z,type:"down",interaction:this})}},{key:"start",value:function(c,p,E){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(c.name==="gesture"?2:1)||!p.options[c.name].enabled)&&(Mi(this.prepared,c),this.interactable=p,this.element=E,this.rect=p.getRect(E),this.edges=this.prepared.edges?te({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(c,p,E){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(c,p,E,!1);var k,z,P=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(k=this.coords.cur.client.x-this.coords.start.client.x,z=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=ze(k,z)>this.pointerMoveTolerance);var O,U,K,B=this.getPointerIndex(c),Z={pointer:c,pointerIndex:B,pointerInfo:this.pointers[B],event:p,type:"move",eventTarget:E,dx:k,dy:z,duplicate:P,interaction:this};P||(O=this.coords.velocity,U=this.coords.delta,K=Math.max(U.timeStamp/1e3,.001),O.page.x=U.page.x/K,O.page.y=U.page.y/K,O.client.x=U.client.x/K,O.client.y=U.client.y/K,O.timeStamp=K),this._scopeFire("interactions:move",Z),P||this.simulation||(this.interacting()&&(Z.type=null,this.move(Z)),this.pointerWasMoved&&ee(this.coords.prev,this.coords.cur))}},{key:"move",value:function(c){c&&c.event||Ne(this.coords.delta),(c=te({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},c||{})).phase="move",this._doPhase(c)}},{key:"pointerUp",value:function(c,p,E,k){var z=this.getPointerIndex(c);z===-1&&(z=this.updatePointer(c,p,E,!1));var P=/cancel$/i.test(p.type)?"cancel":"up";this._scopeFire("interactions:".concat(P),{pointer:c,pointerIndex:z,pointerInfo:this.pointers[z],event:p,eventTarget:E,type:P,curEventTarget:k,interaction:this}),this.simulation||this.end(p),this.removePointer(c,p)}},{key:"documentBlur",value:function(c){this.end(c),this._scopeFire("interactions:blur",{event:c,type:"blur",interaction:this})}},{key:"end",value:function(c){var p;this._ending=!0,c=c||this._latestPointer.event,this.interacting()&&(p=this._doPhase({event:c,interaction:this,phase:"end"})),this._ending=!1,p===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(c){var p=Te(c);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Ft(this.pointers,function(E){return E.id===p})}},{key:"getPointerInfo",value:function(c){return this.pointers[this.getPointerIndex(c)]}},{key:"updatePointer",value:function(c,p,E,k){var z,P,O,U=Te(c),K=this.getPointerIndex(c),B=this.pointers[K];return k=k!==!1&&(k||/(down|start)$/i.test(p.type)),B?B.pointer=c:(B=new Wp(U,c,p,null,null),K=this.pointers.length,this.pointers.push(B)),Pe(this.coords.cur,this.pointers.map(function(Z){return Z.pointer}),this._now()),z=this.coords.delta,P=this.coords.prev,O=this.coords.cur,z.page.x=O.page.x-P.page.x,z.page.y=O.page.y-P.page.y,z.client.x=O.client.x-P.client.x,z.client.y=O.client.y-P.client.y,z.timeStamp=O.timeStamp-P.timeStamp,k&&(this.pointerIsDown=!0,B.downTime=this.coords.cur.timeStamp,B.downTarget=E,ge(this.downPointer,c),this.interacting()||(ee(this.coords.start,this.coords.cur),ee(this.coords.prev,this.coords.cur),this.downEvent=p,this.pointerWasMoved=!1)),this._updateLatestPointer(c,p,E),this._scopeFire("interactions:update-pointer",{pointer:c,event:p,eventTarget:E,down:k,pointerInfo:B,pointerIndex:K,interaction:this}),K}},{key:"removePointer",value:function(c,p){var E=this.getPointerIndex(c);if(E!==-1){var k=this.pointers[E];this._scopeFire("interactions:remove-pointer",{pointer:c,event:p,eventTarget:null,pointerIndex:E,pointerInfo:k,interaction:this}),this.pointers.splice(E,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(c,p,E){this._latestPointer.pointer=c,this._latestPointer.event=p,this._latestPointer.eventTarget=E}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(c,p,E,k){return new Ri(this,c,this.prepared.name,p,this.element,E,k)}},{key:"_fireEvent",value:function(c){var p;(p=this.interactable)==null||p.fire(c),(!this.prevEvent||c.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=c)}},{key:"_doPhase",value:function(c){var p=c.event,E=c.phase,k=c.preEnd,z=c.type,P=this.rect;if(P&&E==="move"&&(fe(this.edges,P,this.coords.delta[this.interactable.options.deltaSource]),P.width=P.right-P.left,P.height=P.bottom-P.top),this._scopeFire("interactions:before-action-".concat(E),c)===!1)return!1;var O=c.iEvent=this._createPreparedEvent(p,E,k,z);return this._scopeFire("interactions:action-".concat(E),c),E==="start"&&(this.prevEvent=O),this._fireEvent(O),this._scopeFire("interactions:after-action-".concat(E),c),!0}},{key:"_now",value:function(){return Date.now()}}]),h}();function Au(h){_u(h.interaction)}function _u(h){if(!function(p){return!(!p.offset.pending.x&&!p.offset.pending.y)}(h))return!1;var c=h.offset.pending;return Gi(h.coords.cur,c),Gi(h.coords.delta,c),fe(h.edges,h.rect,c),c.x=0,c.y=0,!0}function Hp(h){var c=h.x,p=h.y;this.offset.pending.x+=c,this.offset.pending.y+=p,this.offset.total.x+=c,this.offset.total.y+=p}function Gi(h,c){var p=h.page,E=h.client,k=c.x,z=c.y;p.x+=k,p.y+=z,E.x+=k,E.y+=z}Su.offsetBy="";var Kp={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(h){h.Interaction.prototype.offsetBy=Hp},listeners:{"interactions:new":function(h){h.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(h){return function(c){c.pointerIsDown&&(Gi(c.coords.cur,c.offset.total),c.offset.pending.x=0,c.offset.pending.y=0)}(h.interaction)},"interactions:before-action-start":Au,"interactions:before-action-move":Au,"interactions:before-action-end":function(h){var c=h.interaction;if(_u(c))return c.move({offset:!0}),c.end(),!1},"interactions:stop":function(h){var c=h.interaction;c.offset.total.x=0,c.offset.total.y=0,c.offset.pending.x=0,c.offset.pending.y=0}}},ku=Kp,Xp=function(){function h(c){a(this,h),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=c}return s(h,[{key:"start",value:function(c){var p=this.interaction,E=_n(p);if(!E||!E.enabled)return!1;var k=p.coords.velocity.client,z=ze(k.x,k.y),P=this.modification||(this.modification=new Ni(p));if(P.copyFrom(p.modification),this.t0=p._now(),this.allowResume=E.allowResume,this.v0=z,this.currentOffset={x:0,y:0},this.startCoords=p.coords.cur.page,this.modifierArg=P.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-p.coords.cur.timeStamp<50&&z>E.minSpeed&&z>E.endSpeed)this.startInertia();else{if(P.result=P.setAll(this.modifierArg),!P.result.changed)return!1;this.startSmoothEnd()}return p.modification.result.rect=null,p.offsetBy(this.targetOffset),p._doPhase({interaction:p,event:c,phase:"inertiastart"}),p.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),p.modification.result.rect=null,this.active=!0,p.simulation=this,!0}},{key:"startInertia",value:function(){var c=this,p=this.interaction.coords.velocity.client,E=_n(this.interaction),k=E.resistance,z=-Math.log(E.endSpeed/this.v0)/k;this.targetOffset={x:(p.x-z)/k,y:(p.y-z)/k},this.te=z,this.lambda_v0=k/this.v0,this.one_ve_v0=1-E.endSpeed/this.v0;var P=this.modification,O=this.modifierArg;O.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},P.result=P.setAll(O),P.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+P.result.delta.x,y:this.targetOffset.y+P.result.delta.y}),this.onNextFrame(function(){return c.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var c=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return c.smoothEndTick()})}},{key:"onNextFrame",value:function(c){var p=this;this.timeout=Jt.request(function(){p.active&&c()})}},{key:"inertiaTick",value:function(){var c,p,E,k,z,P,O,U=this,K=this.interaction,B=_n(K).resistance,Z=(K._now()-this.t0)/1e3;if(Z<this.te){var re,le=1-(Math.exp(-B*Z)-this.lambda_v0)/this.one_ve_v0;this.isModified?(c=0,p=0,E=this.targetOffset.x,k=this.targetOffset.y,z=this.modifiedOffset.x,P=this.modifiedOffset.y,re={x:Du(O=le,c,E,z),y:Du(O,p,k,P)}):re={x:this.targetOffset.x*le,y:this.targetOffset.y*le};var se={x:re.x-this.currentOffset.x,y:re.y-this.currentOffset.y};this.currentOffset.x+=se.x,this.currentOffset.y+=se.y,K.offsetBy(se),K.move(),this.onNextFrame(function(){return U.inertiaTick()})}else K.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var c=this,p=this.interaction,E=p._now()-this.t0,k=_n(p).smoothEndDuration;if(E<k){var z={x:Cu(E,0,this.targetOffset.x,k),y:Cu(E,0,this.targetOffset.y,k)},P={x:z.x-this.currentOffset.x,y:z.y-this.currentOffset.y};this.currentOffset.x+=P.x,this.currentOffset.y+=P.y,p.offsetBy(P),p.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return c.smoothEndTick()})}else p.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(c){var p=c.pointer,E=c.event,k=c.eventTarget,z=this.interaction;z.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),z.updatePointer(p,E,k,!0),z._doPhase({interaction:z,event:E,phase:"resume"}),ee(z.coords.prev,z.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Jt.cancel(this.timeout)}}]),h}();function _n(h){var c=h.interactable,p=h.prepared;return c&&c.options&&p.name&&c.options[p.name].inertia}var Yp={id:"inertia",before:["modifiers","actions"],install:function(h){var c=h.defaults;h.usePlugin(ku),h.usePlugin(Eu),h.actions.phases.inertiastart=!0,h.actions.phases.resume=!0,c.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(h){var c=h.interaction;c.inertia=new Xp(c)},"interactions:before-action-end":function(h){var c=h.interaction,p=h.event;return(!c._interacting||c.simulation||!c.inertia.start(p))&&null},"interactions:down":function(h){var c=h.interaction,p=h.eventTarget,E=c.inertia;if(E.active)for(var k=p;v.element(k);){if(k===c.element){E.resume(h);break}k=j(k)}},"interactions:stop":function(h){var c=h.interaction.inertia;c.active&&c.stop()},"interactions:before-action-resume":function(h){var c=h.interaction.modification;c.stop(h),c.start(h,h.interaction.coords.cur.page),c.applyToInteraction(h)},"interactions:before-action-inertiastart":function(h){return h.interaction.modification.setAndApply(h)},"interactions:action-resume":Br,"interactions:action-inertiastart":Br,"interactions:after-action-inertiastart":function(h){return h.interaction.modification.restoreInteractionCoords(h)},"interactions:after-action-resume":function(h){return h.interaction.modification.restoreInteractionCoords(h)}}};function Du(h,c,p,E){var k=1-h;return k*k*c+2*k*h*p+h*h*E}function Cu(h,c,p,E){return-p*(h/=E)*(h-2)+c}var Vp=Yp;function Iu(h,c){for(var p=0;p<c.length;p++){var E=c[p];if(h.immediatePropagationStopped)break;E(h)}}var Mu=function(){function h(c){a(this,h),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=te({},c||{})}return s(h,[{key:"fire",value:function(c){var p,E=this.global;(p=this.types[c.type])&&Iu(c,p),!c.propagationStopped&&E&&(p=E[c.type])&&Iu(c,p)}},{key:"on",value:function(c,p){var E=Q(c,p);for(c in E)this.types[c]=qt(this.types[c]||[],E[c])}},{key:"off",value:function(c,p){var E=Q(c,p);for(c in E){var k=this.types[c];if(k&&k.length)for(var z=0,P=E[c];z<P.length;z++){var O=P[z],U=k.indexOf(O);U!==-1&&k.splice(U,1)}}}},{key:"getRect",value:function(c){return null}}]),h}(),Qp=function(){function h(c){a(this,h),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=c,ge(this,c)}return s(h,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),h}();function Hr(h){return v.object(h)?{capture:!!h.capture,passive:!!h.passive}:{capture:!!h,passive:!1}}function kn(h,c){return h===c||(typeof h=="boolean"?!!c.capture===h&&!c.passive:!!h.capture==!!c.capture&&!!h.passive==!!c.passive)}var Zp={id:"events",install:function(h){var c,p=[],E={},k=[],z={add:P,remove:O,addDelegate:function(B,Z,re,le,se){var he=Hr(se);if(!E[re]){E[re]=[];for(var we=0;we<k.length;we++){var ve=k[we];P(ve,re,U),P(ve,re,K,!0)}}var Se=E[re],Ie=xt(Se,function(Le){return Le.selector===B&&Le.context===Z});Ie||(Ie={selector:B,context:Z,listeners:[]},Se.push(Ie)),Ie.listeners.push({func:le,options:he})},removeDelegate:function(B,Z,re,le,se){var he,we=Hr(se),ve=E[re],Se=!1;if(ve)for(he=ve.length-1;he>=0;he--){var Ie=ve[he];if(Ie.selector===B&&Ie.context===Z){for(var Le=Ie.listeners,ke=Le.length-1;ke>=0;ke--){var Me=Le[ke];if(Me.func===le&&kn(Me.options,we)){Le.splice(ke,1),Le.length||(ve.splice(he,1),O(Z,re,U),O(Z,re,K,!0)),Se=!0;break}}if(Se)break}}},delegateListener:U,delegateUseCapture:K,delegatedEvents:E,documents:k,targets:p,supportsOptions:!1,supportsPassive:!1};function P(B,Z,re,le){if(B.addEventListener){var se=Hr(le),he=xt(p,function(we){return we.eventTarget===B});he||(he={eventTarget:B,events:{}},p.push(he)),he.events[Z]||(he.events[Z]=[]),xt(he.events[Z],function(we){return we.func===re&&kn(we.options,se)})||(B.addEventListener(Z,re,z.supportsOptions?se:se.capture),he.events[Z].push({func:re,options:se}))}}function O(B,Z,re,le){if(B.addEventListener&&B.removeEventListener){var se=Ft(p,function(tt){return tt.eventTarget===B}),he=p[se];if(he&&he.events)if(Z!=="all"){var we=!1,ve=he.events[Z];if(ve){if(re==="all"){for(var Se=ve.length-1;Se>=0;Se--){var Ie=ve[Se];O(B,Z,Ie.func,Ie.options)}return}for(var Le=Hr(le),ke=0;ke<ve.length;ke++){var Me=ve[ke];if(Me.func===re&&kn(Me.options,Le)){B.removeEventListener(Z,re,z.supportsOptions?Le:Le.capture),ve.splice(ke,1),ve.length===0&&(delete he.events[Z],we=!0);break}}}we&&!Object.keys(he.events).length&&p.splice(se,1)}else for(Z in he.events)he.events.hasOwnProperty(Z)&&O(B,Z,"all")}}function U(B,Z){for(var re=Hr(Z),le=new Qp(B),se=E[B.type],he=ft(B)[0],we=he;v.element(we);){for(var ve=0;ve<se.length;ve++){var Se=se[ve],Ie=Se.selector,Le=Se.context;if(X(we,Ie)&&I(Le,he)&&I(Le,we)){var ke=Se.listeners;le.currentTarget=we;for(var Me=0;Me<ke.length;Me++){var tt=ke[Me];kn(tt.options,re)&&tt.func(le)}}}we=j(we)}}function K(B){return U(B,!0)}return(c=h.document)==null||c.createElement("div").addEventListener("test",null,{get capture(){return z.supportsOptions=!0},get passive(){return z.supportsPassive=!0}}),h.events=z,z}},Pi={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(h){for(var c=0,p=Pi.methodOrder;c<p.length;c++){var E=p[c],k=Pi[E](h);if(k)return k}return null},simulationResume:function(h){var c=h.pointerType,p=h.eventType,E=h.eventTarget,k=h.scope;if(!/down|start/i.test(p))return null;for(var z=0,P=k.interactions.list;z<P.length;z++){var O=P[z],U=E;if(O.simulation&&O.simulation.allowResume&&O.pointerType===c)for(;U;){if(U===O.element)return O;U=j(U)}}return null},mouseOrPen:function(h){var c,p=h.pointerId,E=h.pointerType,k=h.eventType,z=h.scope;if(E!=="mouse"&&E!=="pen")return null;for(var P=0,O=z.interactions.list;P<O.length;P++){var U=O[P];if(U.pointerType===E){if(U.simulation&&!Lu(U,p))continue;if(U.interacting())return U;c||(c=U)}}if(c)return c;for(var K=0,B=z.interactions.list;K<B.length;K++){var Z=B[K];if(!(Z.pointerType!==E||/down/i.test(k)&&Z.simulation))return Z}return null},hasPointer:function(h){for(var c=h.pointerId,p=0,E=h.scope.interactions.list;p<E.length;p++){var k=E[p];if(Lu(k,c))return k}return null},idle:function(h){for(var c=h.pointerType,p=0,E=h.scope.interactions.list;p<E.length;p++){var k=E[p];if(k.pointers.length===1){var z=k.interactable;if(z&&(!z.options.gesture||!z.options.gesture.enabled))continue}else if(k.pointers.length>=2)continue;if(!k.interacting()&&c===k.pointerType)return k}return null}};function Lu(h,c){return h.pointers.some(function(p){return p.id===c})}var Jp=Pi,$i=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function zu(h,c){return function(p){var E=c.interactions.list,k=wt(p),z=ft(p),P=z[0],O=z[1],U=[];if(/^touch/.test(p.type)){c.prevTouchTime=c.now();for(var K=0,B=p.changedTouches;K<B.length;K++){var Z=B[K],re={pointer:Z,pointerId:Te(Z),pointerType:k,eventType:p.type,eventTarget:P,curEventTarget:O,scope:c},le=Tu(re);U.push([re.pointer,re.eventTarget,re.curEventTarget,le])}}else{var se=!1;if(!F.supportsPointerEvent&&/mouse/.test(p.type)){for(var he=0;he<E.length&&!se;he++)se=E[he].pointerType!=="mouse"&&E[he].pointerIsDown;se=se||c.now()-c.prevTouchTime<500||p.timeStamp===0}if(!se){var we={pointer:p,pointerId:Te(p),pointerType:k,eventType:p.type,curEventTarget:O,eventTarget:P,scope:c},ve=Tu(we);U.push([we.pointer,we.eventTarget,we.curEventTarget,ve])}}for(var Se=0;Se<U.length;Se++){var Ie=U[Se],Le=Ie[0],ke=Ie[1],Me=Ie[2];Ie[3][h](Le,p,ke,Me)}}}function Tu(h){var c=h.pointerType,p=h.scope,E={interaction:Jp.search(h),searchDetails:h};return p.fire("interactions:find",E),E.interaction||p.interactions.new({pointerType:c})}function Oi(h,c){var p=h.doc,E=h.scope,k=h.options,z=E.interactions.docEvents,P=E.events,O=P[c];for(var U in E.browser.isIOS&&!k.events&&(k.events={passive:!1}),P.delegatedEvents)O(p,U,P.delegateListener),O(p,U,P.delegateUseCapture,!0);for(var K=k&&k.events,B=0;B<z.length;B++){var Z=z[B];O(p,Z.type,Z.listener,K)}}var eg={id:"core/interactions",install:function(h){for(var c={},p=0;p<$i.length;p++){var E=$i[p];c[E]=zu(E,h)}var k,z=F.pEventTypes;function P(){for(var O=0,U=h.interactions.list;O<U.length;O++){var K=U[O];if(K.pointerIsDown&&K.pointerType==="touch"&&!K._interacting)for(var B=function(){var le=re[Z];h.documents.some(function(se){return I(se.doc,le.downTarget)})||K.removePointer(le.pointer,le.event)},Z=0,re=K.pointers;Z<re.length;Z++)B()}}(k=Y.PointerEvent?[{type:z.down,listener:P},{type:z.down,listener:c.pointerDown},{type:z.move,listener:c.pointerMove},{type:z.up,listener:c.pointerUp},{type:z.cancel,listener:c.pointerUp}]:[{type:"mousedown",listener:c.pointerDown},{type:"mousemove",listener:c.pointerMove},{type:"mouseup",listener:c.pointerUp},{type:"touchstart",listener:P},{type:"touchstart",listener:c.pointerDown},{type:"touchmove",listener:c.pointerMove},{type:"touchend",listener:c.pointerUp},{type:"touchcancel",listener:c.pointerUp}]).push({type:"blur",listener:function(O){for(var U=0,K=h.interactions.list;U<K.length;U++)K[U].documentBlur(O)}}),h.prevTouchTime=0,h.Interaction=function(O){l(K,O);var U=m(K);function K(){return a(this,K),U.apply(this,arguments)}return s(K,[{key:"pointerMoveTolerance",get:function(){return h.interactions.pointerMoveTolerance},set:function(B){h.interactions.pointerMoveTolerance=B}},{key:"_now",value:function(){return h.now()}}]),K}(Bp),h.interactions={list:[],new:function(O){O.scopeFire=function(K,B){return h.fire(K,B)};var U=new h.Interaction(O);return h.interactions.list.push(U),U},listeners:c,docEvents:k,pointerMoveTolerance:1},h.usePlugin(wu)},listeners:{"scope:add-document":function(h){return Oi(h,"add")},"scope:remove-document":function(h){return Oi(h,"remove")},"interactable:unset":function(h,c){for(var p=h.interactable,E=c.interactions.list.length-1;E>=0;E--){var k=c.interactions.list[E];k.interactable===p&&(k.stop(),c.fire("interactions:destroy",{interaction:k}),k.destroy(),c.interactions.list.length>2&&c.interactions.list.splice(E,1))}}},onDocSignal:Oi,doOnInteractions:zu,methodNames:$i},tg=eg,tr=function(h){return h[h.On=0]="On",h[h.Off=1]="Off",h}(tr||{}),rg=function(){function h(c,p,E,k){a(this,h),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new Mu,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=p.actions,this.target=c,this._context=p.context||E,this._win=y(ne(c)?this._context:c),this._doc=this._win.document,this._scopeEvents=k,this.set(p)}return s(h,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(c,p){return v.func(p.onstart)&&this.on("".concat(c,"start"),p.onstart),v.func(p.onmove)&&this.on("".concat(c,"move"),p.onmove),v.func(p.onend)&&this.on("".concat(c,"end"),p.onend),v.func(p.oninertiastart)&&this.on("".concat(c,"inertiastart"),p.oninertiastart),this}},{key:"updatePerActionListeners",value:function(c,p,E){var k,z=this,P=(k=this._actions.map[c])==null?void 0:k.filterEventType,O=function(U){return(P==null||P(U))&&Sn(U,z._actions)};(v.array(p)||v.object(p))&&this._onOff(tr.Off,c,p,void 0,O),(v.array(E)||v.object(E))&&this._onOff(tr.On,c,E,void 0,O)}},{key:"setPerAction",value:function(c,p){var E=this._defaults;for(var k in p){var z=k,P=this.options[c],O=p[z];z==="listeners"&&this.updatePerActionListeners(c,P.listeners,O),v.array(O)?P[z]=wn(O):v.plainObject(O)?(P[z]=te(P[z]||{},Ar(O)),v.object(E.perAction[z])&&"enabled"in E.perAction[z]&&(P[z].enabled=O.enabled!==!1)):v.bool(O)&&v.object(E.perAction[z])?P[z].enabled=O:P[z]=O}}},{key:"getRect",value:function(c){return c=c||(v.element(this.target)?this.target:null),v.string(this.target)&&(c=c||this._context.querySelector(this.target)),oe(c)}},{key:"rectChecker",value:function(c){var p=this;return v.func(c)?(this.getRect=function(E){var k=te({},c.apply(p,E));return"width"in k||(k.width=k.right-k.left,k.height=k.bottom-k.top),k},this):c===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(c,p){if(ne(p)||v.object(p)){for(var E in this.options[c]=p,this._actions.map)this.options[E][c]=p;return this}return this.options[c]}},{key:"origin",value:function(c){return this._backCompatOption("origin",c)}},{key:"deltaSource",value:function(c){return c==="page"||c==="client"?(this.options.deltaSource=c,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var c=this.target;return v.string(c)?Array.from(this._context.querySelectorAll(c)):v.func(c)&&c.getAllElements?c.getAllElements():v.element(c)?[c]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(c){return this._context===c.ownerDocument||I(this._context,c)}},{key:"testIgnoreAllow",value:function(c,p,E){return!this.testIgnore(c.ignoreFrom,p,E)&&this.testAllow(c.allowFrom,p,E)}},{key:"testAllow",value:function(c,p,E){return!c||!!v.element(E)&&(v.string(c)?H(E,c,p):!!v.element(c)&&I(c,E))}},{key:"testIgnore",value:function(c,p,E){return!(!c||!v.element(E))&&(v.string(c)?H(E,c,p):!!v.element(c)&&I(c,E))}},{key:"fire",value:function(c){return this.events.fire(c),this}},{key:"_onOff",value:function(c,p,E,k,z){v.object(p)&&!v.array(p)&&(k=E,E=null);var P=Q(p,E,z);for(var O in P){O==="wheel"&&(O=F.wheelEvent);for(var U=0,K=P[O];U<K.length;U++){var B=K[U];Sn(O,this._actions)?this.events[c===tr.On?"on":"off"](O,B):v.string(this.target)?this._scopeEvents[c===tr.On?"addDelegate":"removeDelegate"](this.target,this._context,O,B,k):this._scopeEvents[c===tr.On?"add":"remove"](this.target,O,B,k)}}return this}},{key:"on",value:function(c,p,E){return this._onOff(tr.On,c,p,E)}},{key:"off",value:function(c,p,E){return this._onOff(tr.Off,c,p,E)}},{key:"set",value:function(c){var p=this._defaults;for(var E in v.object(c)||(c={}),this.options=Ar(p.base),this._actions.methodDict){var k=E,z=this._actions.methodDict[k];this.options[k]={},this.setPerAction(k,te(te({},p.perAction),p.actions[k])),this[z](c[k])}for(var P in c)P!=="getRect"?v.func(this[P])&&this[P](c[P]):this.rectChecker(c.getRect);return this}},{key:"unset",value:function(){if(v.string(this.target))for(var c in this._scopeEvents.delegatedEvents)for(var p=this._scopeEvents.delegatedEvents[c],E=p.length-1;E>=0;E--){var k=p[E],z=k.selector,P=k.context,O=k.listeners;z===this.target&&P===this._context&&p.splice(E,1);for(var U=O.length-1;U>=0;U--)this._scopeEvents.removeDelegate(this.target,this._context,c,O[U][0],O[U][1])}else this._scopeEvents.remove(this.target,"all")}}]),h}(),ng=function(){function h(c){var p=this;a(this,h),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=c,c.addListeners({"interactable:unset":function(E){var k=E.interactable,z=k.target,P=v.string(z)?p.selectorMap[z]:z[p.scope.id],O=Ft(P,function(U){return U===k});P.splice(O,1)}})}return s(h,[{key:"new",value:function(c,p){p=te(p||{},{actions:this.scope.actions});var E=new this.scope.Interactable(c,p,this.scope.document,this.scope.events);return this.scope.addDocument(E._doc),this.list.push(E),v.string(c)?(this.selectorMap[c]||(this.selectorMap[c]=[]),this.selectorMap[c].push(E)):(E.target[this.scope.id]||Object.defineProperty(c,this.scope.id,{value:[],configurable:!0}),c[this.scope.id].push(E)),this.scope.fire("interactable:new",{target:c,options:p,interactable:E,win:this.scope._win}),E}},{key:"getExisting",value:function(c,p){var E=p&&p.context||this.scope.document,k=v.string(c),z=k?this.selectorMap[c]:c[this.scope.id];if(z)return xt(z,function(P){return P._context===E&&(k||P.inContext(c))})}},{key:"forEachMatch",value:function(c,p){for(var E=0,k=this.list;E<k.length;E++){var z=k[E],P=void 0;if((v.string(z.target)?v.element(c)&&X(c,z.target):c===z.target)&&z.inContext(c)&&(P=p(z)),P!==void 0)return P}}}]),h}(),ig=function(){function h(){var c=this;a(this,h),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=F,this.defaults=Ar(xu),this.Eventable=Mu,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(E){var k=function z(P,O){var U=E.interactables.getExisting(P,O);return U||((U=E.interactables.new(P,O)).events.global=z.globalEvents),U};return k.getPointerAverage=Be,k.getTouchBBox=Ke,k.getTouchDistance=Xe,k.getTouchAngle=lt,k.getElementRect=oe,k.getElementClientRect=ie,k.matchesSelector=X,k.closest=T,k.globalEvents={},k.version="1.10.27",k.scope=E,k.use=function(z,P){return this.scope.usePlugin(z,P),this},k.isSet=function(z,P){return!!this.scope.interactables.get(z,P&&P.context)},k.on=jr(function(z,P,O){if(v.string(z)&&z.search(" ")!==-1&&(z=z.trim().split(/ +/)),v.array(z)){for(var U=0,K=z;U<K.length;U++){var B=K[U];this.on(B,P,O)}return this}if(v.object(z)){for(var Z in z)this.on(Z,z[Z],P);return this}return Sn(z,this.scope.actions)?this.globalEvents[z]?this.globalEvents[z].push(P):this.globalEvents[z]=[P]:this.scope.events.add(this.scope.document,z,P,{options:O}),this},"The interact.on() method is being deprecated"),k.off=jr(function(z,P,O){if(v.string(z)&&z.search(" ")!==-1&&(z=z.trim().split(/ +/)),v.array(z)){for(var U=0,K=z;U<K.length;U++){var B=K[U];this.off(B,P,O)}return this}if(v.object(z)){for(var Z in z)this.off(Z,z[Z],P);return this}var re;return Sn(z,this.scope.actions)?z in this.globalEvents&&(re=this.globalEvents[z].indexOf(P))!==-1&&this.globalEvents[z].splice(re,1):this.scope.events.remove(this.scope.document,z,P,O),this},"The interact.off() method is being deprecated"),k.debug=function(){return this.scope},k.supportsTouch=function(){return F.supportsTouch},k.supportsPointerEvent=function(){return F.supportsPointerEvent},k.stop=function(){for(var z=0,P=this.scope.interactions.list;z<P.length;z++)P[z].stop();return this},k.pointerMoveTolerance=function(z){return v.number(z)?(this.scope.interactions.pointerMoveTolerance=z,this):this.scope.interactions.pointerMoveTolerance},k.addDocument=function(z,P){this.scope.addDocument(z,P)},k.removeDocument=function(z){this.scope.removeDocument(z)},k}(this),this.InteractEvent=Ri,this.Interactable=void 0,this.interactables=new ng(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(E){return c.removeDocument(E.target)};var p=this;this.Interactable=function(E){l(z,E);var k=m(z);function z(){return a(this,z),k.apply(this,arguments)}return s(z,[{key:"_defaults",get:function(){return p.defaults}},{key:"set",value:function(P){return w(d(z.prototype),"set",this).call(this,P),p.fire("interactable:set",{options:P,interactable:this}),this}},{key:"unset",value:function(){w(d(z.prototype),"unset",this).call(this);var P=p.interactables.list.indexOf(this);P<0||(p.interactables.list.splice(P,1),p.fire("interactable:unset",{interactable:this}))}}]),z}(rg)}return s(h,[{key:"addListeners",value:function(c,p){this.listenerMaps.push({id:p,map:c})}},{key:"fire",value:function(c,p){for(var E=0,k=this.listenerMaps;E<k.length;E++){var z=k[E].map[c];if(z&&z(p,this,c)===!1)return!1}}},{key:"init",value:function(c){return this.isInitialized?this:function(p,E){return p.isInitialized=!0,v.window(E)&&_(E),Y.init(E),F.init(E),Jt.init(E),p.window=E,p.document=E.document,p.usePlugin(tg),p.usePlugin(Zp),p}(this,c)}},{key:"pluginIsInstalled",value:function(c){var p=c.id;return p?!!this._plugins.map[p]:this._plugins.list.indexOf(c)!==-1}},{key:"usePlugin",value:function(c,p){if(!this.isInitialized)return this;if(this.pluginIsInstalled(c))return this;if(c.id&&(this._plugins.map[c.id]=c),this._plugins.list.push(c),c.install&&c.install(this,p),c.listeners&&c.before){for(var E=0,k=this.listenerMaps.length,z=c.before.reduce(function(O,U){return O[U]=!0,O[Nu(U)]=!0,O},{});E<k;E++){var P=this.listenerMaps[E].id;if(P&&(z[P]||z[Nu(P)]))break}this.listenerMaps.splice(E,0,{id:c.id,map:c.listeners})}else c.listeners&&this.listenerMaps.push({id:c.id,map:c.listeners});return this}},{key:"addDocument",value:function(c,p){if(this.getDocIndex(c)!==-1)return!1;var E=y(c);p=p?te({},p):{},this.documents.push({doc:c,options:p}),this.events.documents.push(c),c!==this.document&&this.events.add(E,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:c,window:E,scope:this,options:p})}},{key:"removeDocument",value:function(c){var p=this.getDocIndex(c),E=y(c),k=this.documents[p].options;this.events.remove(E,"unload",this.onWindowUnload),this.documents.splice(p,1),this.events.documents.splice(p,1),this.fire("scope:remove-document",{doc:c,window:E,scope:this,options:k})}},{key:"getDocIndex",value:function(c){for(var p=0;p<this.documents.length;p++)if(this.documents[p].doc===c)return p;return-1}},{key:"getDocOptions",value:function(c){var p=this.getDocIndex(c);return p===-1?null:this.documents[p].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),h}();function Nu(h){return h&&h.replace(/\/.*$/,"")}var Ru=new ig,et=Ru.interactStatic,ag=typeof globalThis<"u"?globalThis:window;Ru.init(ag);var og=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(h){var c=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(E){var k=E[0],z=E[1];return k in h||z in h}),p=function(E,k){for(var z=h.range,P=h.limits,O=P===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:P,U=h.offset,K=U===void 0?{x:0,y:0}:U,B={range:z,grid:h,x:null,y:null},Z=0;Z<c.length;Z++){var re=c[Z],le=re[0],se=re[1],he=Math.round((E-K.x)/h[le]),we=Math.round((k-K.y)/h[se]);B[le]=Math.max(O.left,Math.min(O.right,he*h[le]+K.x)),B[se]=Math.max(O.top,Math.min(O.bottom,we*h[se]+K.y))}return B};return p.grid=h,p.coordFields=c,p}}),sg={id:"snappers",install:function(h){var c=h.interactStatic;c.snappers=te(c.snappers||{},og),c.createSnapGrid=c.snappers.grid}},ug=sg,lg={start:function(h){var c=h.state,p=h.rect,E=h.edges,k=h.pageCoords,z=c.options,P=z.ratio,O=z.enabled,U=c.options,K=U.equalDelta,B=U.modifiers;P==="preserve"&&(P=p.width/p.height),c.startCoords=te({},k),c.startRect=te({},p),c.ratio=P,c.equalDelta=K;var Z=c.linkedEdges={top:E.top||E.left&&!E.bottom,left:E.left||E.top&&!E.right,bottom:E.bottom||E.right&&!E.top,right:E.right||E.bottom&&!E.left};if(c.xIsPrimaryAxis=!(!E.left&&!E.right),c.equalDelta){var re=(Z.left?1:-1)*(Z.top?1:-1);c.edgeSign={x:re,y:re}}else c.edgeSign={x:Z.left?-1:1,y:Z.top?-1:1};if(O!==!1&&te(E,Z),B!=null&&B.length){var le=new Ni(h.interaction);le.copyFrom(h.interaction.modification),le.prepareStates(B),c.subModification=le,le.startAll(r({},h))}},set:function(h){var c=h.state,p=h.rect,E=h.coords,k=c.linkedEdges,z=te({},E),P=c.equalDelta?cg:hg;if(te(h.edges,k),P(c,c.xIsPrimaryAxis,E,p),!c.subModification)return null;var O=te({},p);fe(k,O,{x:E.x-z.x,y:E.y-z.y});var U=c.subModification.setAll(r(r({},h),{},{rect:O,edges:k,pageCoords:E,prevCoords:E,prevRect:O})),K=U.delta;return U.changed&&(P(c,Math.abs(K.x)>Math.abs(K.y),U.coords,U.rect),te(E,U.coords)),U.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function cg(h,c,p){var E=h.startCoords,k=h.edgeSign;c?p.y=E.y+(p.x-E.x)*k.y:p.x=E.x+(p.y-E.y)*k.x}function hg(h,c,p,E){var k=h.startRect,z=h.startCoords,P=h.ratio,O=h.edgeSign;if(c){var U=E.width/P;p.y=z.y+(U-k.height)*O.y}else{var K=E.height*P;p.x=z.x+(K-k.width)*O.x}}var dg=er(lg,"aspectRatio"),Gu=function(){};Gu._defaults={};var Dn=Gu;function dr(h,c,p){return v.func(h)?pe(h,c.interactable,c.element,[p.x,p.y,c]):pe(h,c.interactable,c.element)}var Cn={start:function(h){var c=h.rect,p=h.startOffset,E=h.state,k=h.interaction,z=h.pageCoords,P=E.options,O=P.elementRect,U=te({left:0,top:0,right:0,bottom:0},P.offset||{});if(c&&O){var K=dr(P.restriction,k,z);if(K){var B=K.right-K.left-c.width,Z=K.bottom-K.top-c.height;B<0&&(U.left+=B,U.right+=B),Z<0&&(U.top+=Z,U.bottom+=Z)}U.left+=p.left-c.width*O.left,U.top+=p.top-c.height*O.top,U.right+=p.right-c.width*(1-O.right),U.bottom+=p.bottom-c.height*(1-O.bottom)}E.offset=U},set:function(h){var c=h.coords,p=h.interaction,E=h.state,k=E.options,z=E.offset,P=dr(k.restriction,p,c);if(P){var O=function(U){return!U||"left"in U&&"top"in U||((U=te({},U)).left=U.x||0,U.top=U.y||0,U.right=U.right||U.left+U.width,U.bottom=U.bottom||U.top+U.height),U}(P);c.x=Math.max(Math.min(O.right-z.right,c.x),O.left+z.left),c.y=Math.max(Math.min(O.bottom-z.bottom,c.y),O.top+z.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},fg=er(Cn,"restrict"),Pu={top:1/0,left:1/0,bottom:-1/0,right:-1/0},$u={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Ou(h,c){for(var p=0,E=["top","left","bottom","right"];p<E.length;p++){var k=E[p];k in h||(h[k]=c[k])}return h}var Kr={noInner:Pu,noOuter:$u,start:function(h){var c,p=h.interaction,E=h.startOffset,k=h.state,z=k.options;z&&(c=ye(dr(z.offset,p,p.coords.start.page))),c=c||{x:0,y:0},k.offset={top:c.y+E.top,left:c.x+E.left,bottom:c.y-E.bottom,right:c.x-E.right}},set:function(h){var c=h.coords,p=h.edges,E=h.interaction,k=h.state,z=k.offset,P=k.options;if(p){var O=te({},c),U=dr(P.inner,E,O)||{},K=dr(P.outer,E,O)||{};Ou(U,Pu),Ou(K,$u),p.top?c.y=Math.min(Math.max(K.top+z.top,O.y),U.top+z.top):p.bottom&&(c.y=Math.max(Math.min(K.bottom+z.bottom,O.y),U.bottom+z.bottom)),p.left?c.x=Math.min(Math.max(K.left+z.left,O.x),U.left+z.left):p.right&&(c.x=Math.max(Math.min(K.right+z.right,O.x),U.right+z.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},pg=er(Kr,"restrictEdges"),gg=te({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(h){}},Cn.defaults),vg=er({start:Cn.start,set:Cn.set,defaults:gg},"restrictRect"),yg={width:-1/0,height:-1/0},mg={width:1/0,height:1/0},bg=er({start:function(h){return Kr.start(h)},set:function(h){var c=h.interaction,p=h.state,E=h.rect,k=h.edges,z=p.options;if(k){var P=Ce(dr(z.min,c,h.coords))||yg,O=Ce(dr(z.max,c,h.coords))||mg;p.options={endOnly:z.endOnly,inner:te({},Kr.noInner),outer:te({},Kr.noOuter)},k.top?(p.options.inner.top=E.bottom-P.height,p.options.outer.top=E.bottom-O.height):k.bottom&&(p.options.inner.bottom=E.top+P.height,p.options.outer.bottom=E.top+O.height),k.left?(p.options.inner.left=E.right-P.width,p.options.outer.left=E.right-O.width):k.right&&(p.options.inner.right=E.left+P.width,p.options.outer.right=E.left+O.width),Kr.set(h),p.options=z}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),qi={start:function(h){var c,p=h.interaction,E=h.interactable,k=h.element,z=h.rect,P=h.state,O=h.startOffset,U=P.options,K=U.offsetWithOrigin?function(re){var le=re.interaction.element,se=ye(pe(re.state.options.origin,null,null,[le])),he=se||ae(re.interactable,le,re.interaction.prepared.name);return he}(h):{x:0,y:0};if(U.offset==="startCoords")c={x:p.coords.start.page.x,y:p.coords.start.page.y};else{var B=pe(U.offset,E,k,[p]);(c=ye(B)||{x:0,y:0}).x+=K.x,c.y+=K.y}var Z=U.relativePoints;P.offsets=z&&Z&&Z.length?Z.map(function(re,le){return{index:le,relativePoint:re,x:O.left-z.width*re.x+c.x,y:O.top-z.height*re.y+c.y}}):[{index:0,relativePoint:null,x:c.x,y:c.y}]},set:function(h){var c=h.interaction,p=h.coords,E=h.state,k=E.options,z=E.offsets,P=ae(c.interactable,c.element,c.prepared.name),O=te({},p),U=[];k.offsetWithOrigin||(O.x-=P.x,O.y-=P.y);for(var K=0,B=z;K<B.length;K++)for(var Z=B[K],re=O.x-Z.x,le=O.y-Z.y,se=0,he=k.targets.length;se<he;se++){var we=k.targets[se],ve=void 0;(ve=v.func(we)?we(re,le,c._proxy,Z,se):we)&&U.push({x:(v.number(ve.x)?ve.x:re)+Z.x,y:(v.number(ve.y)?ve.y:le)+Z.y,range:v.number(ve.range)?ve.range:k.range,source:we,index:se,offset:Z})}for(var Se={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},Ie=0;Ie<U.length;Ie++){var Le=U[Ie],ke=Le.range,Me=Le.x-O.x,tt=Le.y-O.y,Oe=ze(Me,tt),ct=Oe<=ke;ke===1/0&&Se.inRange&&Se.range!==1/0&&(ct=!1),Se.target&&!(ct?Se.inRange&&ke!==1/0?Oe/ke<Se.distance/Se.range:ke===1/0&&Se.range!==1/0||Oe<Se.distance:!Se.inRange&&Oe<Se.distance)||(Se.target=Le,Se.distance=Oe,Se.range=ke,Se.inRange=ct,Se.delta.x=Me,Se.delta.y=tt)}return Se.inRange&&(p.x=Se.target.x,p.y=Se.target.y),E.closest=Se,Se},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},wg=er(qi,"snap"),In={start:function(h){var c=h.state,p=h.edges,E=c.options;if(!p)return null;h.state={options:{targets:null,relativePoints:[{x:p.left?0:1,y:p.top?0:1}],offset:E.offset||"self",origin:{x:0,y:0},range:E.range}},c.targetFields=c.targetFields||[["width","height"],["x","y"]],qi.start(h),c.offsets=h.state.offsets,h.state=c},set:function(h){var c=h.interaction,p=h.state,E=h.coords,k=p.options,z=p.offsets,P={x:E.x-z[0].x,y:E.y-z[0].y};p.options=te({},k),p.options.targets=[];for(var O=0,U=k.targets||[];O<U.length;O++){var K=U[O],B=void 0;if(B=v.func(K)?K(P.x,P.y,c):K){for(var Z=0,re=p.targetFields;Z<re.length;Z++){var le=re[Z],se=le[0],he=le[1];if(se in B||he in B){B.x=B[se],B.y=B[he];break}}p.options.targets.push(B)}}var we=qi.set(h);return p.options=k,we},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},Eg=er(In,"snapSize"),Fi={aspectRatio:dg,restrictEdges:pg,restrict:fg,restrictRect:vg,restrictSize:bg,snapEdges:er({start:function(h){var c=h.edges;return c?(h.state.targetFields=h.state.targetFields||[[c.left?"left":"right",c.top?"top":"bottom"]],In.start(h)):null},set:In.set,defaults:te(Ar(In.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:wg,snapSize:Eg,spring:Dn,avoid:Dn,transform:Dn,rubberband:Dn},xg={id:"modifiers",install:function(h){var c=h.interactStatic;for(var p in h.usePlugin(Eu),h.usePlugin(ug),c.modifiers=Fi,Fi){var E=Fi[p],k=E._defaults,z=E._methods;k._methods=z,h.defaults.perAction[p]=k}}},Sg=xg,qu=function(h){l(p,h);var c=m(p);function p(E,k,z,P,O,U){var K;if(a(this,p),ge(g(K=c.call(this,O)),z),z!==k&&ge(g(K),k),K.timeStamp=U,K.originalEvent=z,K.type=E,K.pointerId=Te(k),K.pointerType=wt(k),K.target=P,K.currentTarget=null,E==="tap"){var B=O.getPointerIndex(k);K.dt=K.timeStamp-O.pointers[B].downTime;var Z=K.timeStamp-O.tapTime;K.double=!!O.prevTap&&O.prevTap.type!=="doubletap"&&O.prevTap.target===K.target&&Z<500}else E==="doubletap"&&(K.dt=k.timeStamp-O.tapTime,K.double=!0);return K}return s(p,[{key:"_subtractOrigin",value:function(E){var k=E.x,z=E.y;return this.pageX-=k,this.pageY-=z,this.clientX-=k,this.clientY-=z,this}},{key:"_addOrigin",value:function(E){var k=E.x,z=E.y;return this.pageX+=k,this.pageY+=z,this.clientX+=k,this.clientY+=z,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),p}(Et),Xr={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(h){h.pointerEvents=Xr,h.defaults.actions.pointerEvents=Xr.defaults,te(h.actions.phaselessTypes,Xr.types)},listeners:{"interactions:new":function(h){var c=h.interaction;c.prevTap=null,c.tapTime=0},"interactions:update-pointer":function(h){var c=h.down,p=h.pointerInfo;!c&&p.hold||(p.hold={duration:1/0,timeout:null})},"interactions:move":function(h,c){var p=h.interaction,E=h.pointer,k=h.event,z=h.eventTarget;h.duplicate||p.pointerIsDown&&!p.pointerWasMoved||(p.pointerIsDown&&Wi(h),rr({interaction:p,pointer:E,event:k,eventTarget:z,type:"move"},c))},"interactions:down":function(h,c){(function(p,E){for(var k=p.interaction,z=p.pointer,P=p.event,O=p.eventTarget,U=p.pointerIndex,K=k.pointers[U].hold,B=ue(O),Z={interaction:k,pointer:z,event:P,eventTarget:O,type:"hold",targets:[],path:B,node:null},re=0;re<B.length;re++){var le=B[re];Z.node=le,E.fire("pointerEvents:collect-targets",Z)}if(Z.targets.length){for(var se=1/0,he=0,we=Z.targets;he<we.length;he++){var ve=we[he].eventable.options.holdDuration;ve<se&&(se=ve)}K.duration=se,K.timeout=setTimeout(function(){rr({interaction:k,eventTarget:O,pointer:z,event:P,type:"hold"},E)},se)}})(h,c),rr(h,c)},"interactions:up":function(h,c){Wi(h),rr(h,c),function(p,E){var k=p.interaction,z=p.pointer,P=p.event,O=p.eventTarget;k.pointerWasMoved||rr({interaction:k,eventTarget:O,pointer:z,event:P,type:"tap"},E)}(h,c)},"interactions:cancel":function(h,c){Wi(h),rr(h,c)}},PointerEvent:qu,fire:rr,collectEventTargets:Fu,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function rr(h,c){var p=h.interaction,E=h.pointer,k=h.event,z=h.eventTarget,P=h.type,O=h.targets,U=O===void 0?Fu(h,c):O,K=new qu(P,E,k,z,p,c.now());c.fire("pointerEvents:new",{pointerEvent:K});for(var B={interaction:p,pointer:E,event:k,eventTarget:z,targets:U,type:P,pointerEvent:K},Z=0;Z<U.length;Z++){var re=U[Z];for(var le in re.props||{})K[le]=re.props[le];var se=ae(re.eventable,re.node);if(K._subtractOrigin(se),K.eventable=re.eventable,K.currentTarget=re.node,re.eventable.fire(K),K._addOrigin(se),K.immediatePropagationStopped||K.propagationStopped&&Z+1<U.length&&U[Z+1].node!==K.currentTarget)break}if(c.fire("pointerEvents:fired",B),P==="tap"){var he=K.double?rr({interaction:p,pointer:E,event:k,eventTarget:z,type:"doubletap"},c):K;p.prevTap=he,p.tapTime=he.timeStamp}return K}function Fu(h,c){var p=h.interaction,E=h.pointer,k=h.event,z=h.eventTarget,P=h.type,O=p.getPointerIndex(E),U=p.pointers[O];if(P==="tap"&&(p.pointerWasMoved||!U||U.downTarget!==z))return[];for(var K=ue(z),B={interaction:p,pointer:E,event:k,eventTarget:z,type:P,path:K,targets:[],node:null},Z=0;Z<K.length;Z++){var re=K[Z];B.node=re,c.fire("pointerEvents:collect-targets",B)}return P==="hold"&&(B.targets=B.targets.filter(function(le){var se,he;return le.eventable.options.holdDuration===((se=p.pointers[O])==null||(he=se.hold)==null?void 0:he.duration)})),B.targets}function Wi(h){var c=h.interaction,p=h.pointerIndex,E=c.pointers[p].hold;E&&E.timeout&&(clearTimeout(E.timeout),E.timeout=null)}var Ag=Object.freeze({__proto__:null,default:Xr});function _g(h){var c=h.interaction;c.holdIntervalHandle&&(clearInterval(c.holdIntervalHandle),c.holdIntervalHandle=null)}var kg={id:"pointer-events/holdRepeat",install:function(h){h.usePlugin(Xr);var c=h.pointerEvents;c.defaults.holdRepeatInterval=0,c.types.holdrepeat=h.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(h,c){return h["pointerEvents:".concat(c)]=_g,h},{"pointerEvents:new":function(h){var c=h.pointerEvent;c.type==="hold"&&(c.count=(c.count||0)+1)},"pointerEvents:fired":function(h,c){var p=h.interaction,E=h.pointerEvent,k=h.eventTarget,z=h.targets;if(E.type==="hold"&&z.length){var P=z[0].eventable.options.holdRepeatInterval;P<=0||(p.holdIntervalHandle=setTimeout(function(){c.pointerEvents.fire({interaction:p,eventTarget:k,type:"hold",pointer:E,event:E},c)},P))}}})},Dg=kg,Cg={id:"pointer-events/interactableTargets",install:function(h){var c=h.Interactable;c.prototype.pointerEvents=function(E){return te(this.events.options,E),this};var p=c.prototype._backCompatOption;c.prototype._backCompatOption=function(E,k){var z=p.call(this,E,k);return z===this&&(this.events.options[E]=k),z}},listeners:{"pointerEvents:collect-targets":function(h,c){var p=h.targets,E=h.node,k=h.type,z=h.eventTarget;c.interactables.forEachMatch(E,function(P){var O=P.events,U=O.options;O.types[k]&&O.types[k].length&&P.testIgnoreAllow(U,E,z)&&p.push({node:E,eventable:O,props:{interactable:P}})})},"interactable:new":function(h){var c=h.interactable;c.events.getRect=function(p){return c.getRect(p)}},"interactable:set":function(h,c){var p=h.interactable,E=h.options;te(p.events.options,c.pointerEvents.defaults),te(p.events.options,E.pointerEvents||{})}}},Ig=Cg,Mg={id:"pointer-events",install:function(h){h.usePlugin(Ag),h.usePlugin(Dg),h.usePlugin(Ig)}},Lg=Mg,zg={id:"reflow",install:function(h){var c=h.Interactable;h.actions.phases.reflow=!0,c.prototype.reflow=function(p){return function(E,k,z){for(var P=E.getAllElements(),O=z.window.Promise,U=O?[]:null,K=function(){var Z=P[B],re=E.getRect(Z);if(!re)return 1;var le,se=xt(z.interactions.list,function(ve){return ve.interacting()&&ve.interactable===E&&ve.element===Z&&ve.prepared.name===k.name});if(se)se.move(),U&&(le=se._reflowPromise||new O(function(ve){se._reflowResolve=ve}));else{var he=Ce(re),we=function(ve){return{coords:ve,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:he.x,y:he.y},client:{x:he.x,y:he.y},timeStamp:z.now()});le=function(ve,Se,Ie,Le,ke){var Me=ve.interactions.new({pointerType:"reflow"}),tt={interaction:Me,event:ke,pointer:ke,eventTarget:Ie,phase:"reflow"};Me.interactable=Se,Me.element=Ie,Me.prevEvent=ke,Me.updatePointer(ke,ke,Ie,!0),Ne(Me.coords.delta),Mi(Me.prepared,Le),Me._doPhase(tt);var Oe=ve.window,ct=Oe.Promise,St=ct?new ct(function(jt){Me._reflowResolve=jt}):void 0;return Me._reflowPromise=St,Me.start(Le,Se,Ie),Me._interacting?(Me.move(tt),Me.end(ke)):(Me.stop(),Me._reflowResolve()),Me.removePointer(ke,ke),St}(z,E,Z,k,we)}U&&U.push(le)},B=0;B<P.length&&!K();B++);return U&&O.all(U).then(function(){return E})}(this,p,h)}},listeners:{"interactions:stop":function(h,c){var p=h.interaction;p.pointerType==="reflow"&&(p._reflowResolve&&p._reflowResolve(),function(E,k){E.splice(E.indexOf(k),1)}(c.interactions.list,p))}}},Tg=zg;if(et.use(wu),et.use(ku),et.use(Lg),et.use(Vp),et.use(Sg),et.use($p),et.use(Dp),et.use(Ip),et.use(Tg),et.default=et,i(n)==="object"&&n)try{n.exports=et}catch{}return et.default=et,et})}(cn,cn.exports)),cn.exports}var jx=Ux();const Bx=ot(jx),vt=document;class Hx{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.metric=new xp(e),this.panels={info:vt.getElementById("floating-panel"),tools:vt.getElementById("tools-panel"),graphs:vt.getElementById("graphs-panel"),faces:vt.getElementById("face-panel")},this.handles={info:"#info",tools:"#tools",graphs:"#graphs",faces:"#faces"},this.addEventListeners(),this.makePanelsDraggable(),this.registerToolListeners(),this.setupContextMenu()}init(){this.togglePanel("info","#panel-btn .check",this.settings.info_panel),this.togglePanel("tools","#tools-btn .check",this.settings.tools_panel),this.togglePanel("graphs","#graphs-btn .check",this.settings.graphs_panel),this.togglePanel("faces","#faces-btn .check",this.settings.face_panel)}setupContextMenu(){const e=vt.getElementById("custom-context-menu");vt.addEventListener("contextmenu",t=>{t.preventDefault();const{offsetWidth:r,offsetHeight:i}=e,{innerWidth:a,innerHeight:o}=window;let{pageX:s,pageY:u}=t;s+r>a&&(s-=r),u+i>o&&(u-=i),Object.assign(e.style,{left:`${s}px`,top:`${u}px`,display:"block"})}),vt.addEventListener("click",()=>{e.style.display="none"})}togglePanel(e,t,r){const i=this.panels[e],a=vt.querySelector(t);a==null||a.classList.toggle("hidden",!r),i&&(i.style.display=r?"flex":"none",r||this.resetPanel(i))}resetPanel(e){e.style.transform="translate(0px, 0px)",e.setAttribute("data-x",0),e.setAttribute("data-y",0)}addEventListeners(){const e=(r,i)=>{var a;(a=vt.querySelector(r))==null||a.addEventListener("click",()=>{this.eventBus.emit("toggleSetting",{key:i})})};e("#floating-panel .close","info_panel"),e("#tools-panel .close","tools_panel"),e("#graphs-panel .close","graphs_panel"),e("#face-panel .close","face_panel");const t=vt.querySelector("#floating-panel .max");t==null||t.addEventListener("click",()=>{var r;this.resetPanel(this.panels.info),(r=vt.getElementById("floating-panel"))==null||r.classList.toggle("MAX")})}makePanelsDraggable(){Object.entries(this.panels).forEach(([e,t])=>{const r=this.handles[e];t&&r&&this.makeDraggable(t,r)})}makeDraggable(e,t){Bx(e).draggable({allowFrom:t,listeners:{move(r){const i=r.target,a=(parseFloat(i.getAttribute("data-x"))||0)+r.dx,o=(parseFloat(i.getAttribute("data-y"))||0)+r.dy;i.style.transform=`translate(${a}px, ${o}px)`,i.setAttribute("data-x",a),i.setAttribute("data-y",o)}}})}registerToolListeners(){Object.entries({scale:"scale",tree:"tree",force:"forceSimulation",panning:"panning",select:"select",component:"component","color-picker":"colorPicker"}).forEach(([t,r])=>{var i;(i=vt.querySelector(`widgets #tools-panel .${t}`))==null||i.addEventListener("click",()=>{this.eventBus.emit("toggleSetting",{key:r})})})}}class Kx{constructor(e,t){this.app=e,this.settings=e.settings,this.canvas=e.canvas,this.ctx=e._canvas.ctx,this.selection={x:0,y:0,width:0,height:0,active:!1},this.mouseDown=!1,this.scale={isDragging:!1,active:!1,activeHandle:null,scaleData:{},rect:{x:100,y:100,width:200,height:150},prevMouse:{x:0,y:0},offsetX:0,offsetY:0,handleSize:10,handles:["nw","n","ne","e","se","s","sw","w"],cursorMap:{nw:"nwse-resize",n:"ns-resize",ne:"nesw-resize",e:"ew-resize",se:"nwse-resize",s:"ns-resize",sw:"nesw-resize",w:"ew-resize"}}}init(){this.canvas.addEventListener("mousedown",this.startSelection.bind(this)),this.canvas.addEventListener("mousemove",this.updateSelection.bind(this)),this.canvas.addEventListener("mouseup",this.endSelection.bind(this))}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),(this.settings.select||this.settings.scale)&&(this.selection.active&&this.drawSelect(this.selection),this.settings.scale&&this.drawScale())}drawSelect(e){if(!e)return;const t=this.ctx;t.fillStyle="rgba(0, 0, 0, 0.1)",t.fillRect(e.x,e.y,e.width,e.height),t.strokeStyle="rgba(0, 0, 255, 0.7)",t.lineWidth=2,t.setLineDash([5,5]),t.strokeRect(e.x,e.y,e.width,e.height),t.setLineDash([])}drawScale(){this.scale.active&&this.drawScaleBox(this.scale.rect,this.ctx)}redraw(){this.mouseDown&&(this.settings.performance?this.app.graphManager.needsRedraw={rect:!0}:this.app.graphManager.needsRedraw={node:!0,edge:!0,face:!0,rect:!0})}startSelection(e){if(this.mouseDown=!0,this.redraw(),this.settings.select||this.settings.scale){const[t,r]=yt(e,this.canvas);if(this.selection.x=t,this.selection.y=r,this.selection.width=0,this.selection.height=0,this.selection.active=!this.scale.active,this.settings.scale&&this.scale.active){const[i,a]=yt(e);if(this.scale.prevMouse={x:i,y:a},this.scale.activeHandle=this.hitTestHandle(i,a),this.scale.activeHandle)return;i>=this.scale.rect.x&&i<=this.scale.rect.x+this.scale.rect.width&&a>=this.scale.rect.y&&a<=this.scale.rect.y+this.scale.rect.height&&(this.scale.isDragging=!0,this.scale.offsetX=i-this.scale.rect.x,this.scale.offsetY=a-this.scale.rect.y)}}else this.selection.active=!1,this.scale.active=!1}updateSelection(e){if(this.selection.active&&!this.scale.active){const[t,r]=yt(e,this.canvas);this.selection.width=t-this.selection.x,this.selection.height=r-this.selection.y;return}if(this.scale.active){const t=this.scale.rect,r=this.app.graphManager.graph.getSelectedNodes(),[i,a]=yt(e);if(this.scale.activeHandle){this.resizeRect(this.scale.activeHandle,i,a);for(let s of r)this.app.graphManager.graph.updateNodeAttributes(s,u=>({...u,x:t.x+t.width*this.scale.scaleData[s].x,y:t.y+t.height*this.scale.scaleData[s].y}));return}if(this.scale.isDragging){this.scale.rect.x=i-this.scale.offsetX,this.scale.rect.y=a-this.scale.offsetY;const s=i-this.scale.prevMouse.x,u=a-this.scale.prevMouse.y;for(let l of r)this.app.graphManager.graph.updateNodeAttributes(l,d=>({...d,x:d.x+s,y:d.y+u}));this.scale.prevMouse={x:i,y:a};return}const o=this.hitTestHandle(i,a);o?this.canvas.style.cursor=this.scale.cursorMap[o]:i>=this.scale.rect.x&&i<=this.scale.rect.x+this.scale.rect.width&&a>=this.scale.rect.y&&a<=this.scale.rect.y+this.scale.rect.height?this.canvas.style.cursor="move":this.canvas.style.cursor="default",this.redraw()}}endSelection(e){this.mouseDown=!1,this.selection.active=!1,this.scale.isDragging=!1,this.scale.activeHandle=null,this.pointsInRect(this.selection).forEach(a=>{this.app.graphManager.graph.toggleNodeSelection(a)}),this.linesInRect(this.selection).forEach(a=>{this.app.graphManager.graph.toggleEdgeSelection(a)});const i=this.app.graphManager.graph.getSelectedNodes();this.settings.scale&&i.length>0&&!this.scale.active&&(this.scale.active=!0,this.scale.rect=Xx(this.app.graphManager.graph,i,this.settings.node_radius),this.scaleData={},i.forEach(a=>{const o=this.app.graphManager.graph.getNodeAttributes(a);this.scale.scaleData[a]={id:a,x:(o.x-this.scale.rect.x)/this.scale.rect.width,y:(o.y-this.scale.rect.y)/this.scale.rect.height}}))}pointsInRect(e){const[t,r,i,a]=Zd(e);return this.app.graphManager.graph.filterNodes((o,s)=>Ds(s.x,s.y,t,r,i,a))}linesInRect(e){const t=Zd(e);return this.app.graphManager.graph.filterEdges((r,i,a,o,s,u)=>this.lineIntersectsRect([s.x,s.y,u.x,u.y],t))}lineIntersectsRect(e,t){let[r,i,a,o]=e,[s,u,l,d]=t;const f=this.settings.node_radius/2+20;return!!(Jd([r,i,a,o],[s,u,l,d])||Jd([r,i,a,o],[s,d,l,u])||Ds(r,i,s+f,u+f,l-f,d-f)||Ds(a,o,s+f,u+f,l-f,d-f))}drawScaleBox(e,t){e&&(t.fillStyle="#cce5ff20",t.strokeStyle="#3399ff",t.lineWidth=2,t.fillRect(e.x,e.y,e.width,e.height),t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="#fff",t.strokeStyle="#000",this.scale.handles.forEach(r=>{const[i,a]=this.getHandlePosition(r);t.fillRect(i,a,this.scale.handleSize,this.scale.handleSize),t.strokeRect(i,a,this.scale.handleSize,this.scale.handleSize)}))}getHandlePosition(e){const{x:t,y:r,width:i,height:a}=this.scale.rect,o=this.scale.handleSize/2;switch(e){case"nw":return[t-o,r-o];case"n":return[t+i/2-o,r-o];case"ne":return[t+i-o,r-o];case"e":return[t+i-o,r+a/2-o];case"se":return[t+i-o,r+a-o];case"s":return[t+i/2-o,r+a-o];case"sw":return[t-o,r+a-o];case"w":return[t-o,r+a/2-o]}}hitTestHandle(e,t){return this.scale.handles.find(r=>{const[i,a]=this.getHandlePosition(r);return e>=i&&e<=i+this.scale.handleSize&&t>=a&&t<=a+this.scale.handleSize})}resizeRect(e,t,r){const a=t-this.scale.prevMouse.x,o=r-this.scale.prevMouse.y;let{x:s,y:u,width:l,height:d}=this.scale.rect;switch(e){case"nw":s+=a,u+=o,l-=a,d-=o;break;case"n":u+=o,d-=o;break;case"ne":u+=o,l+=a,d-=o;break;case"e":l+=a;break;case"se":l+=a,d+=o;break;case"s":d+=o;break;case"sw":s+=a,l-=a,d+=o;break;case"w":s+=a,l-=a;break}if(l<20){const f=20-l;e.includes("w")&&(s-=f),l=20}if(d<20){const f=20-d;e.includes("n")&&(u-=f),d=20}this.scale.rect.x=s,this.scale.rect.y=u,this.scale.rect.width=l,this.scale.rect.height=d,this.scale.prevMouse={x:t,y:r}}}function Ds(n,e,t,r,i,a){return n>=t&&n<=i&&e>=r&&e<=a}function Zd(n){const e=Math.min(n.x,n.x+n.width),t=Math.min(n.y,n.y+n.height),r=Math.max(n.x,n.x+n.width),i=Math.max(n.y,n.y+n.height);return[e,t,r,i]}function Jd(n,e){var t,r,i;const[a,o,s,u]=n,[l,d,f,g]=e;return t=(s-a)*(g-d)-(f-l)*(u-o),t===0?!1:(i=((g-d)*(f-a)+(l-f)*(g-o))/t,r=((o-u)*(f-a)+(s-a)*(g-o))/t,0<i&&i<1&&0<r&&r<1)}function Xx(n,e,t){if(!e.length)return null;let r=1/0,i=1/0,a=-1/0,o=-1/0;e.forEach(u=>{const l=n.getNodeAttributes(u);l.x<r&&(r=l.x),l.y<i&&(i=l.y),l.x>a&&(a=l.x),l.y>o&&(o=l.y)});const s=t*1.5;return{x:r-s,y:i-s,width:a-r+2*s,height:o-i+2*s}}var Cs={exports:{}};/*! Pickr 1.9.1 MIT | https://github.com/Simonwep/pickr */var ef;function Yx(){return ef||(ef=1,function(n,e){(function(t,r){n.exports=r()})(self,()=>(()=>{var t={d:(F,I)=>{for(var T in I)t.o(I,T)&&!t.o(F,T)&&Object.defineProperty(F,T,{enumerable:!0,get:I[T]})},o:(F,I)=>Object.prototype.hasOwnProperty.call(F,I),r:F=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})}},r={};t.d(r,{default:()=>Y});var i={};function a(F,I,T,j,X={}){I instanceof HTMLCollection||I instanceof NodeList?I=Array.from(I):Array.isArray(I)||(I=[I]),Array.isArray(T)||(T=[T]);for(const W of I)for(const q of T)W[F](q,j,{capture:!1,...X});return Array.prototype.slice.call(arguments,1)}t.r(i),t.d(i,{adjustableInputNumbers:()=>g,createElementFromString:()=>u,createFromTemplate:()=>l,eventPath:()=>d,off:()=>s,on:()=>o,resolveElement:()=>f});const o=a.bind(null,"addEventListener"),s=a.bind(null,"removeEventListener");function u(F){const I=document.createElement("div");return I.innerHTML=F.trim(),I.firstElementChild}function l(F){const I=(j,X)=>{const W=j.getAttribute(X);return j.removeAttribute(X),W},T=(j,X={})=>{const W=I(j,":obj"),q=I(j,":ref"),H=W?X[W]={}:X;q&&(X[q]=j);for(const J of Array.from(j.children)){const ie=I(J,":arr"),oe=T(J,ie?{}:H);ie&&(H[ie]||(H[ie]=[])).push(Object.keys(oe).length?oe:J)}return X};return T(u(F))}function d(F){let I=F.path||F.composedPath&&F.composedPath();if(I)return I;let T=F.target.parentElement;for(I=[F.target,T];T=T.parentElement;)I.push(T);return I.push(document,window),I}function f(F){return F instanceof Element?F:typeof F=="string"?F.split(/>>/g).reduce((I,T,j,X)=>(I=I.querySelector(T),j<X.length-1?I.shadowRoot:I),document):null}function g(F,I=T=>T){function T(j){const X=[.001,.01,.1][Number(j.shiftKey||2*j.ctrlKey)]*(j.deltaY<0?1:-1);let W=0,q=F.selectionStart;F.value=F.value.replace(/[\d.]+/g,(H,J)=>J<=q&&J+H.length>=q?(q=J,I(Number(H),X,W)):(W++,H)),F.focus(),F.setSelectionRange(q,q),j.preventDefault(),F.dispatchEvent(new Event("input"))}o(F,"focus",()=>o(window,"wheel",T,{passive:!1})),o(F,"blur",()=>s(window,"wheel",T))}const{min:m,max:w,floor:x,round:S}=Math;function A(F,I,T){I/=100,T/=100;const j=x(F=F/360*6),X=F-j,W=T*(1-I),q=T*(1-X*I),H=T*(1-(1-X)*I),J=j%6;return[255*[T,q,W,W,H,T][J],255*[H,T,T,q,W,W][J],255*[W,W,H,T,T,q][J]]}function b(F,I,T){const j=(2-(I/=100))*(T/=100)/2;return j!==0&&(I=j===1?0:j<.5?I*T/(2*j):I*T/(2-2*j)),[F,100*I,100*j]}function _(F,I,T){const j=m(F/=255,I/=255,T/=255),X=w(F,I,T),W=X-j;let q,H;if(W===0)q=H=0;else{H=W/X;const J=((X-F)/6+W/2)/W,ie=((X-I)/6+W/2)/W,oe=((X-T)/6+W/2)/W;F===X?q=oe-ie:I===X?q=1/3+J-oe:T===X&&(q=2/3+ie-J),q<0?q+=1:q>1&&(q-=1)}return[360*q,100*H,100*X]}function y(F,I,T,j){return I/=100,T/=100,[..._(255*(1-m(1,(F/=100)*(1-(j/=100))+j)),255*(1-m(1,I*(1-j)+j)),255*(1-m(1,T*(1-j)+j)))]}function D(F,I,T){I/=100;const j=2*(I*=(T/=100)<.5?T:1-T)/(T+I)*100,X=100*(T+I);return[F,isNaN(j)?0:j,X]}function R(F){return _(...F.match(/.{2}/g).map(I=>parseInt(I,16)))}function v(F){F=F.match(/^[a-zA-Z]+$/)?function(X){if(X.toLowerCase()==="black")return"#000";const W=document.createElement("canvas").getContext("2d");return W.fillStyle=X,W.fillStyle==="#000"?null:W.fillStyle}(F):F;const I={cmyk:/^cmyk\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)/i,rgba:/^rgba?\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D*?(([\d.]+)(%?)|$)/i,hsla:/^hsla?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hsva:/^hsva?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},T=X=>X.map(W=>/^(|\d+)\.\d+|\d+$/.test(W)?Number(W):void 0);let j;e:for(const X in I)if(j=I[X].exec(F))switch(X){case"cmyk":{const[,W,q,H,J]=T(j);if(W>100||q>100||H>100||J>100)break e;return{values:y(W,q,H,J),type:X}}case"rgba":{let[,W,,q,,H,,,J]=T(j);if(W=j[2]==="%"?W/100*255:W,q=j[4]==="%"?q/100*255:q,H=j[6]==="%"?H/100*255:H,J=j[9]==="%"?J/100:J,W>255||q>255||H>255||J<0||J>1)break e;return{values:[..._(W,q,H),J],a:J,type:X}}case"hexa":{let[,W]=j;W.length!==4&&W.length!==3||(W=W.split("").map(J=>J+J).join(""));const q=W.substring(0,6);let H=W.substring(6);return H=H?parseInt(H,16)/255:void 0,{values:[...R(q),H],a:H,type:X}}case"hsla":{let[,W,q,H,,J]=T(j);if(J=j[6]==="%"?J/100:J,W>360||q>100||H>100||J<0||J>1)break e;return{values:[...D(W,q,H),J],a:J,type:X}}case"hsva":{let[,W,q,H,,J]=T(j);if(J=j[6]==="%"?J/100:J,W>360||q>100||H>100||J<0||J>1)break e;return{values:[W,q,H,J],a:J,type:X}}}return{values:null,type:null}}function C(F=0,I=0,T=0,j=1){const X=(q,H)=>(J=-1)=>H(~J?q.map(ie=>Number(ie.toFixed(J))):q),W={h:F,s:I,v:T,a:j,toHSVA(){const q=[W.h,W.s,W.v,W.a];return q.toString=X(q,H=>`hsva(${H[0]}, ${H[1]}%, ${H[2]}%, ${W.a})`),q},toHSLA(){const q=[...b(W.h,W.s,W.v),W.a];return q.toString=X(q,H=>`hsla(${H[0]}, ${H[1]}%, ${H[2]}%, ${W.a})`),q},toRGBA(){const q=[...A(W.h,W.s,W.v),W.a];return q.toString=X(q,H=>`rgba(${H[0]}, ${H[1]}, ${H[2]}, ${W.a})`),q},toCMYK(){const q=function(H,J,ie){const oe=A(H,J,ie),ue=oe[0]/255,ne=oe[1]/255,te=oe[2]/255,ce=m(1-ue,1-ne,1-te);return[100*(ce===1?0:(1-ue-ce)/(1-ce)),100*(ce===1?0:(1-ne-ce)/(1-ce)),100*(ce===1?0:(1-te-ce)/(1-ce)),100*ce]}(W.h,W.s,W.v);return q.toString=X(q,H=>`cmyk(${H[0]}%, ${H[1]}%, ${H[2]}%, ${H[3]}%)`),q},toHEXA(){const q=function(J,ie,oe){return A(J,ie,oe).map(ue=>S(ue).toString(16).padStart(2,"0"))}(W.h,W.s,W.v),H=W.a>=1?"":Number((255*W.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return H&&q.push(H),q.toString=()=>`#${q.join("").toUpperCase()}`,q},clone:()=>C(W.h,W.s,W.v,W.a)};return W}const M=F=>Math.max(Math.min(F,1),0);function L(F){const I={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},F),_keyboard(W){const{options:q}=I,{type:H,key:J}=W;if(document.activeElement===q.wrapper){const{lock:ie}=I.options,oe=J==="ArrowUp",ue=J==="ArrowRight",ne=J==="ArrowDown",te=J==="ArrowLeft";if(H==="keydown"&&(oe||ue||ne||te)){let ce=0,pe=0;ie==="v"?ce=oe||ue?1:-1:ie==="h"?ce=oe||ue?-1:1:(pe=oe?-1:ne?1:0,ce=te?-1:ue?1:0),I.update(M(I.cache.x+.01*ce),M(I.cache.y+.01*pe)),W.preventDefault()}else J.startsWith("Arrow")&&(I.options.onstop(),W.preventDefault())}},_tapstart(W){o(document,["mouseup","touchend","touchcancel"],I._tapstop),o(document,["mousemove","touchmove"],I._tapmove),W.cancelable&&W.preventDefault(),I._tapmove(W)},_tapmove(W){const{options:q,cache:H}=I,{lock:J,element:ie,wrapper:oe}=q,ue=oe.getBoundingClientRect();let ne=0,te=0;if(W){const ye=W&&W.touches&&W.touches[0];ne=W?(ye||W).clientX:0,te=W?(ye||W).clientY:0,ne<ue.left?ne=ue.left:ne>ue.left+ue.width&&(ne=ue.left+ue.width),te<ue.top?te=ue.top:te>ue.top+ue.height&&(te=ue.top+ue.height),ne-=ue.left,te-=ue.top}else H&&(ne=H.x*ue.width,te=H.y*ue.height);J!=="h"&&(ie.style.left=`calc(${ne/ue.width*100}% - ${ie.offsetWidth/2}px)`),J!=="v"&&(ie.style.top=`calc(${te/ue.height*100}% - ${ie.offsetHeight/2}px)`),I.cache={x:ne/ue.width,y:te/ue.height};const ce=M(ne/ue.width),pe=M(te/ue.height);switch(J){case"v":return q.onchange(ce);case"h":return q.onchange(pe);default:return q.onchange(ce,pe)}},_tapstop(){I.options.onstop(),s(document,["mouseup","touchend","touchcancel"],I._tapstop),s(document,["mousemove","touchmove"],I._tapmove)},trigger(){I._tapmove()},update(W=0,q=0){const{left:H,top:J,width:ie,height:oe}=I.options.wrapper.getBoundingClientRect();I.options.lock==="h"&&(q=W),I._tapmove({clientX:H+ie*W,clientY:J+oe*q})},destroy(){const{options:W,_tapstart:q,_keyboard:H}=I;s(document,["keydown","keyup"],H),s([W.wrapper,W.element],"mousedown",q),s([W.wrapper,W.element],"touchstart",q,{passive:!1})}},{options:T,_tapstart:j,_keyboard:X}=I;return o([T.wrapper,T.element],"mousedown",j),o([T.wrapper,T.element],"touchstart",j,{passive:!1}),o(document,["keydown","keyup"],X),I}function G(F={}){F=Object.assign({onchange:()=>0,className:"",elements:[]},F);const I=o(F.elements,"click",T=>{F.elements.forEach(j=>j.classList[T.target===j?"add":"remove"](F.className)),F.onchange(T),T.stopPropagation()});return{destroy:()=>s(...I)}}const $={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},N=(F,I,T)=>{const j=typeof F!="object"||F instanceof HTMLElement?{reference:F,popper:I,...T}:F;return{update(X=j){const{reference:W,popper:q}=Object.assign(j,X);if(!q||!W)throw new Error("Popper- or reference-element missing.");return((H,J,ie)=>{const{container:oe,arrow:ue,margin:ne,padding:te,position:ce,variantFlipOrder:pe,positionFlipOrder:ye}={container:document.documentElement.getBoundingClientRect(),...$,...ie},{left:Ce,top:fe}=J.style;J.style.left="0",J.style.top="0";const ae=H.getBoundingClientRect(),Q=J.getBoundingClientRect(),xe={t:ae.top-Q.height-ne,b:ae.bottom+ne,r:ae.right+ne,l:ae.left-Q.width-ne},ze={vs:ae.left,vm:ae.left+ae.width/2-Q.width/2,ve:ae.left+ae.width-Q.width,hs:ae.top,hm:ae.bottom-ae.height/2-Q.height/2,he:ae.bottom-Q.height},[Ee,ge="middle"]=ce.split("-"),ee=ye[Ee],Ne=pe[ge],{top:$e,left:Ge,bottom:qe,right:Te}=oe;for(const Pe of ee){const Fe=Pe==="t"||Pe==="b";let Be=xe[Pe];const[Ke,Xe]=Fe?["top","left"]:["left","top"],[lt,wt]=Fe?[Q.height,Q.width]:[Q.width,Q.height],[ft,Et]=Fe?[qe,Te]:[Te,qe],[qt,wn]=Fe?[$e,Ge]:[Ge,$e];if(!(Be<qt||Be+lt+te>ft))for(const Ft of Ne){let xt=ze[(Fe?"v":"h")+Ft];if(!(xt<wn||xt+wt+te>Et)){if(xt-=Q[Xe],Be-=Q[Ke],J.style[Xe]=`${xt}px`,J.style[Ke]=`${Be}px`,ue){const Mt=Fe?ae.width/2:ae.height/2,cr=wt/2,Sr=Mt>cr,En=xt+{s:Sr?cr:Mt,m:cr,e:Sr?cr:wt-Mt}[Ft],Ur=Be+{t:lt,b:0,r:0,l:lt}[Pe];ue.style[Xe]=`${En}px`,ue.style[Ke]=`${Ur}px`}return Pe+Ft}}}return J.style.left=Ce,J.style.top=fe,null})(W,q,j)}}},V=class V{constructor(I){Ve(this,"_initializingActive",!0);Ve(this,"_recalc",!0);Ve(this,"_nanopop",null);Ve(this,"_root",null);Ve(this,"_color",C());Ve(this,"_lastColor",C());Ve(this,"_swatchColors",[]);Ve(this,"_setupAnimationFrame",null);Ve(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]});this.options=I=Object.assign({...V.DEFAULT_OPTIONS},I);const{swatches:T,components:j,theme:X,sliders:W,lockOpacity:q,padding:H}=I;["nano","monolith"].includes(X)&&!W&&(I.sliders="h"),j.interaction||(j.interaction={});const{preview:J,opacity:ie,hue:oe,palette:ue}=j;j.opacity=!q&&ie,j.palette=ue||J||ie||oe,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),T&&T.length&&T.forEach(pe=>this.addSwatch(pe));const{button:ne,app:te}=this._root;this._nanopop=N(ne,te,{margin:H}),ne.setAttribute("role","button"),ne.setAttribute("aria-label",this._t("btn:toggle"));const ce=this;this._setupAnimationFrame=requestAnimationFrame(function pe(){if(!te.offsetWidth)return requestAnimationFrame(pe);ce.setColor(I.default),ce._rePositioningPicker(),I.defaultRepresentation&&(ce._representation=I.defaultRepresentation,ce.setColorRepresentation(ce._representation)),I.showAlways&&ce.show(),ce._initializingActive=!1,ce._emit("init")})}_preBuild(){const{options:I}=this;for(const T of["el","container"])I[T]=f(I[T]);this._root=(T=>{const{components:j,useAsButton:X,inline:W,appClass:q,theme:H,lockOpacity:J}=T.options,ie=te=>te?"":'style="display:none" hidden',oe=te=>T._t(te),ue=l(`
      <div :ref="root" class="pickr">

        ${X?"":'<button type="button" :ref="button" class="pcr-button"></button>'}

        <div :ref="app" class="pcr-app ${q||""}" data-theme="${H}" ${W?'style="position: unset"':""} aria-label="${oe("ui:dialog")}" role="window">
          <div class="pcr-selection" ${ie(j.palette)}>
            <div :obj="preview" class="pcr-color-preview" ${ie(j.preview)}>
              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${oe("btn:last-color")}"></button>
              <div :ref="currentColor" class="pcr-current-color"></div>
            </div>

            <div :obj="palette" class="pcr-color-palette">
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${oe("aria:palette")}" role="listbox"></div>
            </div>

            <div :obj="hue" class="pcr-color-chooser" ${ie(j.hue)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${oe("aria:hue")}" role="slider"></div>
            </div>

            <div :obj="opacity" class="pcr-color-opacity" ${ie(j.opacity)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${oe("aria:opacity")}" role="slider"></div>
            </div>
          </div>

          <div class="pcr-swatches ${j.palette?"":"pcr-last"}" :ref="swatches"></div>

          <div :obj="interaction" class="pcr-interaction" ${ie(Object.keys(j.interaction).length)}>
            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${ie(j.interaction.input)} aria-label="${oe("aria:input")}">

            <input :arr="options" class="pcr-type" data-type="HEXA" value="${J?"HEX":"HEXA"}" type="button" ${ie(j.interaction.hex)}>
            <input :arr="options" class="pcr-type" data-type="RGBA" value="${J?"RGB":"RGBA"}" type="button" ${ie(j.interaction.rgba)}>
            <input :arr="options" class="pcr-type" data-type="HSLA" value="${J?"HSL":"HSLA"}" type="button" ${ie(j.interaction.hsla)}>
            <input :arr="options" class="pcr-type" data-type="HSVA" value="${J?"HSV":"HSVA"}" type="button" ${ie(j.interaction.hsva)}>
            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${ie(j.interaction.cmyk)}>

            <input :ref="save" class="pcr-save" value="${oe("btn:save")}" type="button" ${ie(j.interaction.save)} aria-label="${oe("aria:btn:save")}">
            <input :ref="cancel" class="pcr-cancel" value="${oe("btn:cancel")}" type="button" ${ie(j.interaction.cancel)} aria-label="${oe("aria:btn:cancel")}">
            <input :ref="clear" class="pcr-clear" value="${oe("btn:clear")}" type="button" ${ie(j.interaction.clear)} aria-label="${oe("aria:btn:clear")}">
          </div>
        </div>
      </div>
    `),ne=ue.interaction;return ne.options.find(te=>!te.hidden&&!te.classList.add("active")),ne.type=()=>ne.options.find(te=>te.classList.contains("active")),ue})(this),I.useAsButton&&(this._root.button=I.el),I.container.appendChild(this._root.root)}_finalBuild(){const I=this.options,T=this._root;if(I.container.removeChild(T.root),I.inline){const j=I.el.parentElement;I.el.nextSibling?j.insertBefore(T.app,I.el.nextSibling):j.appendChild(T.app)}else I.container.appendChild(T.app);I.useAsButton?I.inline&&I.el.remove():I.el.parentNode.replaceChild(T.root,I.el),I.disabled&&this.disable(),I.comparison||(T.button.style.transition="none",I.useAsButton||(T.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const I=this,T=this.options.components,j=(I.options.sliders||"v").repeat(2),[X,W]=j.match(/^[vh]+$/g)?j:[],q=()=>this._color||(this._color=this._lastColor.clone()),H={palette:L({element:I._root.palette.picker,wrapper:I._root.palette.palette,onstop:()=>I._emit("changestop","slider",I),onchange(J,ie){if(!T.palette)return;const oe=q(),{_root:ue,options:ne}=I,{lastColor:te,currentColor:ce}=ue.preview;I._recalc&&(oe.s=100*J,oe.v=100-100*ie,oe.v<0&&(oe.v=0),I._updateOutput("slider"));const pe=oe.toRGBA().toString(0);this.element.style.background=pe,this.wrapper.style.background=`
                        linear-gradient(to top, rgba(0, 0, 0, ${oe.a}), transparent),
                        linear-gradient(to left, hsla(${oe.h}, 100%, 50%, ${oe.a}), rgba(255, 255, 255, ${oe.a}))
                    `,ne.comparison?ne.useAsButton||I._lastColor||te.style.setProperty("--pcr-color",pe):(ue.button.style.setProperty("--pcr-color",pe),ue.button.classList.remove("clear"));const ye=oe.toHEXA().toString();for(const{el:Ce,color:fe}of I._swatchColors)Ce.classList[ye===fe.toHEXA().toString()?"add":"remove"]("pcr-active");ce.style.setProperty("--pcr-color",pe)}}),hue:L({lock:W==="v"?"h":"v",element:I._root.hue.picker,wrapper:I._root.hue.slider,onstop:()=>I._emit("changestop","slider",I),onchange(J){if(!T.hue||!T.palette)return;const ie=q();I._recalc&&(ie.h=360*J),this.element.style.backgroundColor=`hsl(${ie.h}, 100%, 50%)`,H.palette.trigger()}}),opacity:L({lock:X==="v"?"h":"v",element:I._root.opacity.picker,wrapper:I._root.opacity.slider,onstop:()=>I._emit("changestop","slider",I),onchange(J){if(!T.opacity||!T.palette)return;const ie=q();I._recalc&&(ie.a=Math.round(100*J)/100),this.element.style.background=`rgba(0, 0, 0, ${ie.a})`,H.palette.trigger()}}),selectable:G({elements:I._root.interaction.options,className:"active",onchange(J){I._representation=J.target.getAttribute("data-type").toUpperCase(),I._recalc&&I._updateOutput("swatch")}})};this._components=H}_bindEvents(){const{_root:I,options:T}=this,j=[o(I.interaction.clear,"click",()=>this._clearColor()),o([I.interaction.cancel,I.preview.lastColor],"click",()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")}),o(I.interaction.save,"click",()=>{!this.applyColor()&&!T.showAlways&&this.hide()}),o(I.interaction.result,["keyup","input"],X=>{this.setColor(X.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),X.stopImmediatePropagation()}),o(I.interaction.result,["focus","blur"],X=>{this._recalc=X.type==="blur",this._recalc&&this._updateOutput(null)}),o([I.palette.palette,I.palette.picker,I.hue.slider,I.hue.picker,I.opacity.slider,I.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0,{passive:!0})];if(!T.showAlways){const X=T.closeWithKey;j.push(o(I.button,"click",()=>this.isOpen()?this.hide():this.show()),o(document,"keyup",W=>this.isOpen()&&(W.key===X||W.code===X)&&this.hide()),o(document,["touchstart","mousedown"],W=>{this.isOpen()&&!d(W).some(q=>q===I.app||q===I.button)&&this.hide()},{capture:!0}))}if(T.adjustableNumbers){const X={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};g(I.interaction.result,(W,q,H)=>{const J=X[this.getColorRepresentation().toLowerCase()];if(J){const ie=J[H],oe=W+(ie>=100?1e3*q:q);return oe<=0?0:Number((oe<ie?oe:ie).toPrecision(3))}return W})}if(T.autoReposition&&!T.inline){let X=null;const W=this;j.push(o(window,["scroll","resize"],()=>{W.isOpen()&&(T.closeOnScroll&&W.hide(),X===null?(X=setTimeout(()=>X=null,100),requestAnimationFrame(function q(){W._rePositioningPicker(),X!==null&&requestAnimationFrame(q)})):(clearTimeout(X),X=setTimeout(()=>X=null,100)))},{capture:!0}))}this._eventBindings=j}_rePositioningPicker(){const{options:I}=this;if(!I.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:I.position})){const T=this._root.app,j=T.getBoundingClientRect();T.style.top=(window.innerHeight-j.height)/2+"px",T.style.left=(window.innerWidth-j.width)/2+"px"}}_updateOutput(I){const{_root:T,_color:j,options:X}=this;if(T.interaction.type()){const W=`to${T.interaction.type().getAttribute("data-type")}`;T.interaction.result.value=typeof j[W]=="function"?j[W]().toString(X.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",j,I,this)}_clearColor(I=!1){const{_root:T,options:j}=this;j.useAsButton||T.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),T.button.classList.add("clear"),j.showAlways||this.hide(),this._lastColor=null,this._initializingActive||I||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(I){const{values:T,type:j,a:X}=v(I),{lockOpacity:W}=this.options,q=X!==void 0&&X!==1;return T&&T.length===3&&(T[3]=void 0),{values:!T||W&&q?null:T,type:j}}_t(I){return this.options.i18n[I]||V.I18N_DEFAULTS[I]}_emit(I,...T){this._eventListener[I].forEach(j=>j(...T,this))}on(I,T){return this._eventListener[I].push(T),this}off(I,T){const j=this._eventListener[I]||[],X=j.indexOf(T);return~X&&j.splice(X,1),this}addSwatch(I){const{values:T}=this._parseLocalColor(I);if(T){const{_swatchColors:j,_root:X}=this,W=C(...T),q=u(`<button type="button" style="--pcr-color: ${W.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return X.swatches.appendChild(q),j.push({el:q,color:W}),this._eventBindings.push(o(q,"click",()=>{this.setHSVA(...W.toHSVA(),!0),this._emit("swatchselect",W),this._emit("change",W,"swatch",this)})),!0}return!1}removeSwatch(I){const T=this._swatchColors[I];if(T){const{el:j}=T;return this._root.swatches.removeChild(j),this._swatchColors.splice(I,1),!0}return!1}applyColor(I=!1){const{preview:T,button:j}=this._root,X=this._color.toRGBA().toString(0);return T.lastColor.style.setProperty("--pcr-color",X),this.options.useAsButton||j.style.setProperty("--pcr-color",X),j.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||I||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach(I=>s(...I)),Object.keys(this._components).forEach(I=>this._components[I].destroy())}destroyAndRemove(){this.destroy();const{root:I,app:T}=this._root;I.parentElement&&I.parentElement.removeChild(I),T.parentElement.removeChild(T),Object.keys(this).forEach(j=>this[j]=null)}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(I=360,T=0,j=0,X=1,W=!1){const q=this._recalc;if(this._recalc=!1,I<0||I>360||T<0||T>100||j<0||j>100||X<0||X>1)return!1;this._color=C(I,T,j,X);const{hue:H,opacity:J,palette:ie}=this._components;return H.update(I/360),J.update(X),ie.update(T/100,1-j/100),W||this.applyColor(),q&&this._updateOutput(),this._recalc=q,!0}setColor(I,T=!1){if(I===null)return this._clearColor(T),!0;const{values:j,type:X}=this._parseLocalColor(I);if(j){const W=X.toUpperCase(),{options:q}=this._root.interaction,H=q.find(J=>J.getAttribute("data-type")===W);if(H&&!H.hidden)for(const J of q)J.classList[J===H?"add":"remove"]("active");return!!this.setHSVA(...j,T)&&this.setColorRepresentation(W)}return!1}setColorRepresentation(I){return I=I.toUpperCase(),!!this._root.interaction.options.find(T=>T.getAttribute("data-type").startsWith(I)&&!T.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}};Ve(V,"utils",i),Ve(V,"version","1.9.1"),Ve(V,"I18N_DEFAULTS",{"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"}),Ve(V,"DEFAULT_OPTIONS",{appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"}),Ve(V,"create",I=>new V(I));let Y=V;return r=r.default})())}(Cs)),Cs.exports}var Vx=Yx();const Qx=ot(Vx);class Zx{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.pickrs={},["node","stroke","edge","face","label","background","grid"].forEach(r=>{const i=`#${r}-color`;this.pickrs[r]=Qx.create({el:i,theme:"nano",default:this.settings[`${r}_color`],components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!0,rgba:!0,input:!0,save:!0}}})})}init(){for(const e in this.pickrs){const t=this.pickrs[e];t.on("change",r=>{const i=r.toRGBA().toString();t.setColor(i),this.eventBus.emit("updateSetting",{key:`${e}_color`,value:i})})}}setColor(e,t){const r=this.pickrs[e];r&&(r.setColor(t),this.eventBus.emit("updateSetting",{key:`${e}_color`,value:t}))}getColor(e){const t=this.pickrs[e];return t?t.getColor().toRGBA().toString():null}resetColors(){for(const e in this.pickrs)this.setColor(e,this.settings[`${e}_color`])}}class Jx{constructor(e){this.app=e,this.graphManager=e.graphManager,this.mainCanvas=e._canvas._canvas.main,this.nodeCanvas=e._canvas._canvas.node,this.edgeCanvas=e._canvas._canvas.edge,this.faceCanvas=e._canvas._canvas.face,this.settings=e.settings,this.rect=e.rect}drawGraph(e={node:!0,edge:!0,face:!0,rect:!0}){if(!e.node&&!e.edge&&!e.face&&!e.rect)return;const t=this.graphManager.graph,r=this.settings,i=+r.edge_size,o=`${r.label_size}px sans-serif`,s=r.label_pos.x,u=r.label_pos.y,l=r.node_radius,d=r.stroke_size;e.face&&this.drawFaces(this.faceCanvas,t,r,o,s,u),e.edge&&this.drawEdges(this.edgeCanvas,t,r,i,l,o,s,u),e.node&&this.drawNodes(this.nodeCanvas,t,r,l,d,o,s,u),e.rect&&this.rect.draw()}drawArrowhead(e,t,r,i,a,o){o.beginPath(),o.moveTo(e,t),o.lineTo(e-i*Math.cos(r-Math.PI/6),t-i*Math.sin(r-Math.PI/6)),o.lineTo(e-i*Math.cos(r+Math.PI/6),t-i*Math.sin(r+Math.PI/6)),o.closePath(),o.fillStyle=a,o.fill()}drawLabel(e,t,r,i,a,o){t!=null&&t.trim()&&(e.fillStyle=a||"#000",e.font=o,e.textAlign="center",e.textBaseline="middle",e.fillText(t,r,i))}drawFaces(e,t,r,i,a,o){const s=e.ctx;s.clearRect(0,0,e.canvas.width,e.canvas.height),t.forEachFace((u,l)=>{const d=l.nodes.map(g=>{const m=t.getNodeAttributes(g);return[m.x,m.y]}),f={x:hi(d,g=>g[0]),y:hi(d,g=>g[1])};if(d){s.fillStyle=l.selected?"#FFA50055":l.color,s.beginPath(),s.moveTo(d[0][0],d[0][1]);for(let g=1;g<d.length;g++)s.lineTo(d[g][0],d[g][1]);s.closePath(),s.fill()}r.faceLabel&&this.drawLabel(s,l.label,f.x,f.y,l.labelColor,i)})}drawEdges(e,t,r,i,a,o,s,u){const l=e.ctx;l.clearRect(0,0,e.canvas.width,e.canvas.height),t.forEachEdge((d,f,g,m,w,x)=>{const S=x.x-w.x,A=x.y-w.y,b=Math.hypot(S,A),_=S/b*(12+i),y=A/b*(12+i),D=t.hasEdge(m,g),R=D?w.x+_:w.x,v=D?w.y+y:w.y,C=x.x-_,M=x.y-y;if(l.beginPath(),l.moveTo(R,v),l.lineTo(C,M),l.strokeStyle=f.selected?"orange":f.color,l.lineWidth=i,l.stroke(),l.closePath(),t.isDirected(d)){const L=Math.atan2(A,S),G=x.x-Math.cos(L)*a/4,$=x.y-Math.sin(L)*a/4;this.drawArrowhead(G,$,L,14+i,f.selected?"orange":f.color,l)}if((r.edgeLabel||r.weightLabel)&&(f.label||f.weight!=null)){const L=(w.x+x.x)/2,G=(w.y+x.y)/2,$=-A/b,N=S/b,Y=L+$*10+s,V=G+N*10+u,F=[];r.edgeLabel&&f.label&&F.push(f.label),r.weightLabel&&f.weight!=null&&F.push(f.weight),F.length&&this.drawLabel(l,F.join(", "),Y,V,f.labelColor,o)}})}drawNodes(e,t,r,i,a,o,s,u){const l=e.ctx;l.clearRect(0,0,e.canvas.width,e.canvas.height),t.forEachNode((d,f)=>{l.beginPath(),l.arc(f.x,f.y,i*f.size,0,2*Math.PI),l.fillStyle=f.selected?"orange":f.color,l.fill(),a!==0&&(l.lineWidth=a,l.strokeStyle=f.selected?"orange":f.stroke,l.stroke()),l.closePath(),r.vertexLabel&&this.drawLabel(l,f.label,f.x+s,f.y+u,f.labelColor,o)})}}class eS{constructor(){this.eventBus=Om,this.appSettings=new Ps(this),this.settings=this.appSettings.settings,this._canvas=new Qw(this),this.canvas=this._canvas.canvas,this.layout=new Fx(this),this.graphManager=new kx(this,this.settings.historyLimit,this.settings.type),this.rect=new Kx(this),this.graphRenderer=new Jx(this),this.menu=new Lx(this,Tx),this.widget=new Hx(this),this.keyHandler=new Ix(this),this.eventHanders=new zx(this),this.colorPicker=new Zx(this),this.simulation=null,this.nodes=[],this.links=[],this.init()}init(){this.menu.init(),this.appSettings.init(),this.widget.init(),this._canvas.init(),this.rect.init(),this.keyHandler.init(),this.eventHanders.init(),this.initSimulation(),this.loadInitialGraph(),this.colorPicker.init(),this.startAnimationLoop()}initSimulation(){this.nodes=this.graphManager.graph.getNodesForD3(),this.links=this.graphManager.graph.getEdgesForD3(),this.simulation=Rm(this.nodes).force("link",Dm(this.links).id(e=>e.id).distance(10).strength(.5)).force("charge",Gm().strength(-300)).force("collide",_m(20)).force("center",om(this.canvas.width/2,this.canvas.height/2)).force("x",Pm(this.canvas.width/2).strength(.05)).force("y",$m(this.canvas.height/1).strength(.05)).velocityDecay(.3).alphaDecay(.02),this.appSettings.settings.forceSimulation||this.simulation.stop()}loadInitialGraph(){this.graphManager.loadHitoryFromLocalStorage()||this.graphManager.generator.clusters(20,20,10)}ticked(){this.nodes.forEach(e=>{this.graphManager.graph.updateNodeAttributes(e.id,t=>({...t,x:e.x,y:e.y}))}),this.eventBus.emit("graph:updated",{type:"tick"})}startSimulation(){this.simulation.alpha(.3).restart()}stopSimulation(){this.simulation.stop()}updateSimulation(){this.nodes.length=0,this.nodes=this.graphManager.graph.getNodesForD3(),this.links.length=0,this.links=this.graphManager.graph.getEdgesForD3(),this.simulation.nodes(this.nodes),this.simulation.force("link").links(this.links),this.appSettings.settings.forceSimulation?this.startSimulation():this.stopSimulation()}updateForce(){const e=this.graphManager.graph;this.nodes.length=0,e.forEachNode((t,r)=>{this.nodes.push({id:Number(t),x:r.x,y:r.y})}),this.links.length=0,e.forEachEdge(function(t,r,i,a,o,s){this.links.push({source:Number(i),target:Number(a)})})}startAnimationLoop(){const e=()=>{this.appSettings.settings.forceSimulation?(this.simulation.tick(),this.ticked(),this.graphRenderer.drawGraph({node:!0,edge:!0,face:!0})):this.graphRenderer.drawGraph(this.graphManager.needsRedraw),requestAnimationFrame(e)};requestAnimationFrame(e)}}document.addEventListener("DOMContentLoaded",()=>{const n=new eS;window.graphStudio=n,window.addEventListener("resize",()=>{n._canvas.updateCanvasSize(window.innerWidth,window.innerHeight)}),document.querySelectorAll("img").forEach(e=>{e.setAttribute("draggable","false")})});
