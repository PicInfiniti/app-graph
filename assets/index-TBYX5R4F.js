var Rg=Object.defineProperty;var Uu=n=>{throw TypeError(n)};var $g=(n,e,t)=>e in n?Rg(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Qe=(n,e,t)=>$g(n,typeof e!="symbol"?e+"":e,t),ju=(n,e,t)=>e.has(n)||Uu("Cannot "+t);var Tn=(n,e,t)=>(ju(n,e,"read from private field"),t?t.call(n):e.get(n)),Bu=(n,e,t)=>e.has(n)?Uu("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Hu=(n,e,t,r)=>(ju(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();function di(n,e){let t=0,r=0;if(e===void 0)for(let a of n)a!=null&&(a=+a)>=a&&(++t,r+=a);else{let a=-1;for(let o of n)(o=e(o,++a,n))!=null&&(o=+o)>=o&&(++t,r+=o)}if(t)return r/t}var Pg={value:()=>{}};function wi(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new li(t)}function li(n){this._=n}function Gg(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",a=t.indexOf(".");if(a>=0&&(r=t.slice(a+1),t=t.slice(0,a)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}li.prototype=wi.prototype={constructor:li,on:function(n,e){var t=this._,r=Gg(n+"",t),a,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((a=(n=r[o]).type)&&(a=Og(t[a],n.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(a=(n=r[o]).type)t[a]=Ku(t[a],n.name,e);else if(e==null)for(a in t)t[a]=Ku(t[a],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new li(n)},call:function(n,e){if((a=arguments.length-2)>0)for(var t=new Array(a),r=0,a,o;r<a;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],r=0,a=o.length;r<a;++r)o[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],a=0,o=r.length;a<o;++a)r[a].value.apply(e,t)}};function Og(n,e){for(var t=0,r=n.length,a;t<r;++t)if((a=n[t]).name===e)return a.value}function Ku(n,e,t){for(var r=0,a=n.length;r<a;++r)if(n[r].name===e){n[r]=Pg,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var Ls="http://www.w3.org/1999/xhtml";const Xu={svg:"http://www.w3.org/2000/svg",xhtml:Ls,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ei(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),Xu.hasOwnProperty(e)?{space:Xu[e],local:n}:n}function qg(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Ls&&e.documentElement.namespaceURI===Ls?e.createElement(n):e.createElementNS(t,n)}}function Fg(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function rf(n){var e=Ei(n);return(e.local?Fg:qg)(e)}function Wg(){}function Ws(n){return n==null?Wg:function(){return this.querySelector(n)}}function Ug(n){typeof n!="function"&&(n=Ws(n));for(var e=this._groups,t=e.length,r=new Array(t),a=0;a<t;++a)for(var o=e[a],s=o.length,u=r[a]=new Array(s),l,c,f=0;f<s;++f)(l=o[f])&&(c=n.call(l,l.__data__,f,o))&&("__data__"in l&&(c.__data__=l.__data__),u[f]=c);return new dt(r,this._parents)}function jg(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function Bg(){return[]}function nf(n){return n==null?Bg:function(){return this.querySelectorAll(n)}}function Hg(n){return function(){return jg(n.apply(this,arguments))}}function Kg(n){typeof n=="function"?n=Hg(n):n=nf(n);for(var e=this._groups,t=e.length,r=[],a=[],o=0;o<t;++o)for(var s=e[o],u=s.length,l,c=0;c<u;++c)(l=s[c])&&(r.push(n.call(l,l.__data__,c,s)),a.push(l));return new dt(r,a)}function af(n){return function(){return this.matches(n)}}function of(n){return function(e){return e.matches(n)}}var Xg=Array.prototype.find;function Yg(n){return function(){return Xg.call(this.children,n)}}function Vg(){return this.firstElementChild}function Qg(n){return this.select(n==null?Vg:Yg(typeof n=="function"?n:of(n)))}var Zg=Array.prototype.filter;function Jg(){return Array.from(this.children)}function ev(n){return function(){return Zg.call(this.children,n)}}function tv(n){return this.selectAll(n==null?Jg:ev(typeof n=="function"?n:of(n)))}function rv(n){typeof n!="function"&&(n=af(n));for(var e=this._groups,t=e.length,r=new Array(t),a=0;a<t;++a)for(var o=e[a],s=o.length,u=r[a]=[],l,c=0;c<s;++c)(l=o[c])&&n.call(l,l.__data__,c,o)&&u.push(l);return new dt(r,this._parents)}function sf(n){return new Array(n.length)}function nv(){return new dt(this._enter||this._groups.map(sf),this._parents)}function fi(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}fi.prototype={constructor:fi,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function iv(n){return function(){return n}}function av(n,e,t,r,a,o){for(var s=0,u,l=e.length,c=o.length;s<c;++s)(u=e[s])?(u.__data__=o[s],r[s]=u):t[s]=new fi(n,o[s]);for(;s<l;++s)(u=e[s])&&(a[s]=u)}function ov(n,e,t,r,a,o,s){var u,l,c=new Map,f=e.length,p=o.length,v=new Array(f),b;for(u=0;u<f;++u)(l=e[u])&&(v[u]=b=s.call(l,l.__data__,u,e)+"",c.has(b)?a[u]=l:c.set(b,l));for(u=0;u<p;++u)b=s.call(n,o[u],u,o)+"",(l=c.get(b))?(r[u]=l,l.__data__=o[u],c.delete(b)):t[u]=new fi(n,o[u]);for(u=0;u<f;++u)(l=e[u])&&c.get(v[u])===l&&(a[u]=l)}function sv(n){return n.__data__}function uv(n,e){if(!arguments.length)return Array.from(this,sv);var t=e?ov:av,r=this._parents,a=this._groups;typeof n!="function"&&(n=iv(n));for(var o=a.length,s=new Array(o),u=new Array(o),l=new Array(o),c=0;c<o;++c){var f=r[c],p=a[c],v=p.length,b=lv(n.call(f,f&&f.__data__,c,r)),E=b.length,S=u[c]=new Array(E),A=s[c]=new Array(E),_=l[c]=new Array(v);t(f,p,S,A,_,b,e);for(var w=0,k=0,m,C;w<E;++w)if(m=S[w]){for(w>=k&&(k=w+1);!(C=A[k])&&++k<E;);m._next=C||null}}return s=new dt(s,r),s._enter=u,s._exit=l,s}function lv(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function cv(){return new dt(this._exit||this._groups.map(sf),this._parents)}function hv(n,e,t){var r=this.enter(),a=this,o=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(a=e(a),a&&(a=a.selection())),t==null?o.remove():t(o),r&&a?r.merge(a).order():a}function dv(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,a=t.length,o=r.length,s=Math.min(a,o),u=new Array(a),l=0;l<s;++l)for(var c=t[l],f=r[l],p=c.length,v=u[l]=new Array(p),b,E=0;E<p;++E)(b=c[E]||f[E])&&(v[E]=b);for(;l<a;++l)u[l]=t[l];return new dt(u,this._parents)}function fv(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],a=r.length-1,o=r[a],s;--a>=0;)(s=r[a])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function pv(n){n||(n=gv);function e(p,v){return p&&v?n(p.__data__,v.__data__):!p-!v}for(var t=this._groups,r=t.length,a=new Array(r),o=0;o<r;++o){for(var s=t[o],u=s.length,l=a[o]=new Array(u),c,f=0;f<u;++f)(c=s[f])&&(l[f]=c);l.sort(e)}return new dt(a,this._parents).order()}function gv(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function vv(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function yv(){return Array.from(this)}function mv(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],a=0,o=r.length;a<o;++a){var s=r[a];if(s)return s}return null}function bv(){let n=0;for(const e of this)++n;return n}function wv(){return!this.node()}function Ev(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var a=e[t],o=0,s=a.length,u;o<s;++o)(u=a[o])&&n.call(u,u.__data__,o,a);return this}function xv(n){return function(){this.removeAttribute(n)}}function Sv(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Av(n,e){return function(){this.setAttribute(n,e)}}function _v(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function kv(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function Dv(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function Cv(n,e){var t=Ei(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?Sv:xv:typeof e=="function"?t.local?Dv:kv:t.local?_v:Av)(t,e))}function uf(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function Iv(n){return function(){this.style.removeProperty(n)}}function Lv(n,e,t){return function(){this.style.setProperty(n,e,t)}}function zv(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function Tv(n,e,t){return arguments.length>1?this.each((e==null?Iv:typeof e=="function"?zv:Lv)(n,e,t??"")):qr(this.node(),n)}function qr(n,e){return n.style.getPropertyValue(e)||uf(n).getComputedStyle(n,null).getPropertyValue(e)}function Mv(n){return function(){delete this[n]}}function Nv(n,e){return function(){this[n]=e}}function Rv(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function $v(n,e){return arguments.length>1?this.each((e==null?Mv:typeof e=="function"?Rv:Nv)(n,e)):this.node()[n]}function lf(n){return n.trim().split(/^|\s+/)}function Us(n){return n.classList||new cf(n)}function cf(n){this._node=n,this._names=lf(n.getAttribute("class")||"")}cf.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function hf(n,e){for(var t=Us(n),r=-1,a=e.length;++r<a;)t.add(e[r])}function df(n,e){for(var t=Us(n),r=-1,a=e.length;++r<a;)t.remove(e[r])}function Pv(n){return function(){hf(this,n)}}function Gv(n){return function(){df(this,n)}}function Ov(n,e){return function(){(e.apply(this,arguments)?hf:df)(this,n)}}function qv(n,e){var t=lf(n+"");if(arguments.length<2){for(var r=Us(this.node()),a=-1,o=t.length;++a<o;)if(!r.contains(t[a]))return!1;return!0}return this.each((typeof e=="function"?Ov:e?Pv:Gv)(t,e))}function Fv(){this.textContent=""}function Wv(n){return function(){this.textContent=n}}function Uv(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function jv(n){return arguments.length?this.each(n==null?Fv:(typeof n=="function"?Uv:Wv)(n)):this.node().textContent}function Bv(){this.innerHTML=""}function Hv(n){return function(){this.innerHTML=n}}function Kv(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function Xv(n){return arguments.length?this.each(n==null?Bv:(typeof n=="function"?Kv:Hv)(n)):this.node().innerHTML}function Yv(){this.nextSibling&&this.parentNode.appendChild(this)}function Vv(){return this.each(Yv)}function Qv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zv(){return this.each(Qv)}function Jv(n){var e=typeof n=="function"?n:rf(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function e0(){return null}function t0(n,e){var t=typeof n=="function"?n:rf(n),r=e==null?e0:typeof e=="function"?e:Ws(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function r0(){var n=this.parentNode;n&&n.removeChild(this)}function n0(){return this.each(r0)}function i0(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function a0(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function o0(n){return this.select(n?a0:i0)}function s0(n){return arguments.length?this.property("__data__",n):this.node().__data__}function u0(n){return function(e){n.call(this,e,this.__data__)}}function l0(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function c0(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,a=e.length,o;t<a;++t)o=e[t],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function h0(n,e,t){return function(){var r=this.__on,a,o=u0(e);if(r){for(var s=0,u=r.length;s<u;++s)if((a=r[s]).type===n.type&&a.name===n.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=t),a.value=e;return}}this.addEventListener(n.type,o,t),a={type:n.type,name:n.name,value:e,listener:o,options:t},r?r.push(a):this.__on=[a]}}function d0(n,e,t){var r=l0(n+""),a,o=r.length,s;if(arguments.length<2){var u=this.node().__on;if(u){for(var l=0,c=u.length,f;l<c;++l)for(a=0,f=u[l];a<o;++a)if((s=r[a]).type===f.type&&s.name===f.name)return f.value}return}for(u=e?h0:c0,a=0;a<o;++a)this.each(u(r[a],e,t));return this}function ff(n,e,t){var r=uf(n),a=r.CustomEvent;typeof a=="function"?a=new a(e,t):(a=r.document.createEvent("Event"),t?(a.initEvent(e,t.bubbles,t.cancelable),a.detail=t.detail):a.initEvent(e,!1,!1)),n.dispatchEvent(a)}function f0(n,e){return function(){return ff(this,n,e)}}function p0(n,e){return function(){return ff(this,n,e.apply(this,arguments))}}function g0(n,e){return this.each((typeof e=="function"?p0:f0)(n,e))}function*v0(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],a=0,o=r.length,s;a<o;++a)(s=r[a])&&(yield s)}var pf=[null];function dt(n,e){this._groups=n,this._parents=e}function mn(){return new dt([[document.documentElement]],pf)}function y0(){return this}dt.prototype=mn.prototype={constructor:dt,select:Ug,selectAll:Kg,selectChild:Qg,selectChildren:tv,filter:rv,data:uv,enter:nv,exit:cv,join:hv,merge:dv,selection:y0,order:fv,sort:pv,call:vv,nodes:yv,node:mv,size:bv,empty:wv,each:Ev,attr:Cv,style:Tv,property:$v,classed:qv,text:jv,html:Xv,raise:Vv,lower:Zv,append:Jv,insert:t0,remove:n0,clone:o0,datum:s0,on:d0,dispatch:g0,[Symbol.iterator]:v0};function nt(n){return typeof n=="string"?new dt([[document.querySelector(n)]],[document.documentElement]):new dt([[n]],pf)}function m0(n){let e;for(;e=n.sourceEvent;)n=e;return n}function mt(n,e){if(n=m0(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[n.clientX-a.left-e.clientLeft,n.clientY-a.top-e.clientTop]}}return[n.pageX,n.pageY]}const b0={passive:!1},fn={capture:!0,passive:!1};function ji(n){n.stopImmediatePropagation()}function Gr(n){n.preventDefault(),n.stopImmediatePropagation()}function w0(n){var e=n.document.documentElement,t=nt(n).on("dragstart.drag",Gr,fn);"onselectstart"in e?t.on("selectstart.drag",Gr,fn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function E0(n,e){var t=n.document.documentElement,r=nt(n).on("dragstart.drag",null);e&&(r.on("click.drag",Gr,fn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const Mn=n=>()=>n;function zs(n,{sourceEvent:e,subject:t,target:r,identifier:a,active:o,x:s,y:u,dx:l,dy:c,dispatch:f}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:f}})}zs.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function x0(n){return!n.ctrlKey&&!n.button}function S0(){return this.parentNode}function A0(n,e){return e??{x:n.x,y:n.y}}function _0(){return navigator.maxTouchPoints||"ontouchstart"in this}function k0(){var n=x0,e=S0,t=A0,r=_0,a={},o=wi("start","drag","end"),s=0,u,l,c,f,p=0;function v(m){m.on("mousedown.drag",b).filter(r).on("touchstart.drag",A).on("touchmove.drag",_,b0).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(m,C){if(!(f||!n.call(this,m,C))){var $=k(this,e.call(this,m,C),m,C,"mouse");$&&(nt(m.view).on("mousemove.drag",E,fn).on("mouseup.drag",S,fn),w0(m.view),ji(m),c=!1,u=m.clientX,l=m.clientY,$("start",m))}}function E(m){if(Gr(m),!c){var C=m.clientX-u,$=m.clientY-l;c=C*C+$*$>p}a.mouse("drag",m)}function S(m){nt(m.view).on("mousemove.drag mouseup.drag",null),E0(m.view,c),Gr(m),a.mouse("end",m)}function A(m,C){if(n.call(this,m,C)){var $=m.changedTouches,y=e.call(this,m,C),I=$.length,z,T;for(z=0;z<I;++z)(T=k(this,y,m,C,$[z].identifier,$[z]))&&(ji(m),T("start",m,$[z]))}}function _(m){var C=m.changedTouches,$=C.length,y,I;for(y=0;y<$;++y)(I=a[C[y].identifier])&&(Gr(m),I("drag",m,C[y]))}function w(m){var C=m.changedTouches,$=C.length,y,I;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),y=0;y<$;++y)(I=a[C[y].identifier])&&(ji(m),I("end",m,C[y]))}function k(m,C,$,y,I,z){var T=o.copy(),P=mt(z||$,C),O,R,V;if((V=t.call(m,new zs("beforestart",{sourceEvent:$,target:v,identifier:I,active:s,x:P[0],y:P[1],dx:0,dy:0,dispatch:T}),y))!=null)return O=V.x-P[0]||0,R=V.y-P[1]||0,function Q(W,L,N){var B=P,Y;switch(W){case"start":a[I]=Q,Y=s++;break;case"end":delete a[I],--s;case"drag":P=mt(N||L,C),Y=s;break}T.call(W,m,new zs(W,{sourceEvent:L,subject:V,target:v,identifier:I,active:Y,x:P[0]+O,y:P[1]+R,dx:P[0]-B[0],dy:P[1]-B[1],dispatch:T}),y)}}return v.filter=function(m){return arguments.length?(n=typeof m=="function"?m:Mn(!!m),v):n},v.container=function(m){return arguments.length?(e=typeof m=="function"?m:Mn(m),v):e},v.subject=function(m){return arguments.length?(t=typeof m=="function"?m:Mn(m),v):t},v.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:Mn(!!m),v):r},v.on=function(){var m=o.on.apply(o,arguments);return m===o?v:m},v.clickDistance=function(m){return arguments.length?(p=(m=+m)*m,v):Math.sqrt(p)},v}function js(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function gf(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function bn(){}var pn=.7,pi=1/pn,Or="\\s*([+-]?\\d+)\\s*",gn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",D0=/^#([0-9a-f]{3,8})$/,C0=new RegExp(`^rgb\\(${Or},${Or},${Or}\\)$`),I0=new RegExp(`^rgb\\(${Ot},${Ot},${Ot}\\)$`),L0=new RegExp(`^rgba\\(${Or},${Or},${Or},${gn}\\)$`),z0=new RegExp(`^rgba\\(${Ot},${Ot},${Ot},${gn}\\)$`),T0=new RegExp(`^hsl\\(${gn},${Ot},${Ot}\\)$`),M0=new RegExp(`^hsla\\(${gn},${Ot},${Ot},${gn}\\)$`),Yu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};js(bn,vn,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Vu,formatHex:Vu,formatHex8:N0,formatHsl:R0,formatRgb:Qu,toString:Qu});function Vu(){return this.rgb().formatHex()}function N0(){return this.rgb().formatHex8()}function R0(){return vf(this).formatHsl()}function Qu(){return this.rgb().formatRgb()}function vn(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=D0.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?Zu(e):t===3?new lt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Nn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Nn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=C0.exec(n))?new lt(e[1],e[2],e[3],1):(e=I0.exec(n))?new lt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=L0.exec(n))?Nn(e[1],e[2],e[3],e[4]):(e=z0.exec(n))?Nn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=T0.exec(n))?tl(e[1],e[2]/100,e[3]/100,1):(e=M0.exec(n))?tl(e[1],e[2]/100,e[3]/100,e[4]):Yu.hasOwnProperty(n)?Zu(Yu[n]):n==="transparent"?new lt(NaN,NaN,NaN,0):null}function Zu(n){return new lt(n>>16&255,n>>8&255,n&255,1)}function Nn(n,e,t,r){return r<=0&&(n=e=t=NaN),new lt(n,e,t,r)}function $0(n){return n instanceof bn||(n=vn(n)),n?(n=n.rgb(),new lt(n.r,n.g,n.b,n.opacity)):new lt}function Ts(n,e,t,r){return arguments.length===1?$0(n):new lt(n,e,t,r??1)}function lt(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}js(lt,Ts,gf(bn,{brighter(n){return n=n==null?pi:Math.pow(pi,n),new lt(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?pn:Math.pow(pn,n),new lt(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new lt(wr(this.r),wr(this.g),wr(this.b),gi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ju,formatHex:Ju,formatHex8:P0,formatRgb:el,toString:el}));function Ju(){return`#${mr(this.r)}${mr(this.g)}${mr(this.b)}`}function P0(){return`#${mr(this.r)}${mr(this.g)}${mr(this.b)}${mr((isNaN(this.opacity)?1:this.opacity)*255)}`}function el(){const n=gi(this.opacity);return`${n===1?"rgb(":"rgba("}${wr(this.r)}, ${wr(this.g)}, ${wr(this.b)}${n===1?")":`, ${n})`}`}function gi(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function wr(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function mr(n){return n=wr(n),(n<16?"0":"")+n.toString(16)}function tl(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Ct(n,e,t,r)}function vf(n){if(n instanceof Ct)return new Ct(n.h,n.s,n.l,n.opacity);if(n instanceof bn||(n=vn(n)),!n)return new Ct;if(n instanceof Ct)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,a=Math.min(e,t,r),o=Math.max(e,t,r),s=NaN,u=o-a,l=(o+a)/2;return u?(e===o?s=(t-r)/u+(t<r)*6:t===o?s=(r-e)/u+2:s=(e-t)/u+4,u/=l<.5?o+a:2-o-a,s*=60):u=l>0&&l<1?0:s,new Ct(s,u,l,n.opacity)}function G0(n,e,t,r){return arguments.length===1?vf(n):new Ct(n,e,t,r??1)}function Ct(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}js(Ct,G0,gf(bn,{brighter(n){return n=n==null?pi:Math.pow(pi,n),new Ct(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?pn:Math.pow(pn,n),new Ct(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,a=2*t-r;return new lt(Bi(n>=240?n-240:n+120,a,r),Bi(n,a,r),Bi(n<120?n+240:n-120,a,r),this.opacity)},clamp(){return new Ct(rl(this.h),Rn(this.s),Rn(this.l),gi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=gi(this.opacity);return`${n===1?"hsl(":"hsla("}${rl(this.h)}, ${Rn(this.s)*100}%, ${Rn(this.l)*100}%${n===1?")":`, ${n})`}`}}));function rl(n){return n=(n||0)%360,n<0?n+360:n}function Rn(n){return Math.max(0,Math.min(1,n||0))}function Bi(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const yf=n=>()=>n;function O0(n,e){return function(t){return n+t*e}}function q0(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function F0(n){return(n=+n)==1?mf:function(e,t){return t-e?q0(e,t,n):yf(isNaN(e)?t:e)}}function mf(n,e){var t=e-n;return t?O0(n,t):yf(isNaN(n)?e:n)}const nl=function n(e){var t=F0(e);function r(a,o){var s=t((a=Ts(a)).r,(o=Ts(o)).r),u=t(a.g,o.g),l=t(a.b,o.b),c=mf(a.opacity,o.opacity);return function(f){return a.r=s(f),a.g=u(f),a.b=l(f),a.opacity=c(f),a+""}}return r.gamma=n,r}(1);function sr(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var Ms=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hi=new RegExp(Ms.source,"g");function W0(n){return function(){return n}}function U0(n){return function(e){return n(e)+""}}function j0(n,e){var t=Ms.lastIndex=Hi.lastIndex=0,r,a,o,s=-1,u=[],l=[];for(n=n+"",e=e+"";(r=Ms.exec(n))&&(a=Hi.exec(e));)(o=a.index)>t&&(o=e.slice(t,o),u[s]?u[s]+=o:u[++s]=o),(r=r[0])===(a=a[0])?u[s]?u[s]+=a:u[++s]=a:(u[++s]=null,l.push({i:s,x:sr(r,a)})),t=Hi.lastIndex;return t<e.length&&(o=e.slice(t),u[s]?u[s]+=o:u[++s]=o),u.length<2?l[0]?U0(l[0].x):W0(e):(e=l.length,function(c){for(var f=0,p;f<e;++f)u[(p=l[f]).i]=p.x(c);return u.join("")})}var il=180/Math.PI,Ns={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bf(n,e,t,r,a,o){var s,u,l;return(s=Math.sqrt(n*n+e*e))&&(n/=s,e/=s),(l=n*t+e*r)&&(t-=n*l,r-=e*l),(u=Math.sqrt(t*t+r*r))&&(t/=u,r/=u,l/=u),n*r<e*t&&(n=-n,e=-e,l=-l,s=-s),{translateX:a,translateY:o,rotate:Math.atan2(e,n)*il,skewX:Math.atan(l)*il,scaleX:s,scaleY:u}}var $n;function B0(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Ns:bf(e.a,e.b,e.c,e.d,e.e,e.f)}function H0(n){return n==null||($n||($n=document.createElementNS("http://www.w3.org/2000/svg","g")),$n.setAttribute("transform",n),!(n=$n.transform.baseVal.consolidate()))?Ns:(n=n.matrix,bf(n.a,n.b,n.c,n.d,n.e,n.f))}function wf(n,e,t,r){function a(c){return c.length?c.pop()+" ":""}function o(c,f,p,v,b,E){if(c!==p||f!==v){var S=b.push("translate(",null,e,null,t);E.push({i:S-4,x:sr(c,p)},{i:S-2,x:sr(f,v)})}else(p||v)&&b.push("translate("+p+e+v+t)}function s(c,f,p,v){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),v.push({i:p.push(a(p)+"rotate(",null,r)-2,x:sr(c,f)})):f&&p.push(a(p)+"rotate("+f+r)}function u(c,f,p,v){c!==f?v.push({i:p.push(a(p)+"skewX(",null,r)-2,x:sr(c,f)}):f&&p.push(a(p)+"skewX("+f+r)}function l(c,f,p,v,b,E){if(c!==p||f!==v){var S=b.push(a(b)+"scale(",null,",",null,")");E.push({i:S-4,x:sr(c,p)},{i:S-2,x:sr(f,v)})}else(p!==1||v!==1)&&b.push(a(b)+"scale("+p+","+v+")")}return function(c,f){var p=[],v=[];return c=n(c),f=n(f),o(c.translateX,c.translateY,f.translateX,f.translateY,p,v),s(c.rotate,f.rotate,p,v),u(c.skewX,f.skewX,p,v),l(c.scaleX,c.scaleY,f.scaleX,f.scaleY,p,v),c=f=null,function(b){for(var E=-1,S=v.length,A;++E<S;)p[(A=v[E]).i]=A.x(b);return p.join("")}}}var K0=wf(B0,"px, ","px)","deg)"),X0=wf(H0,", ",")",")"),Fr=0,un=0,Qr=0,Ef=1e3,vi,ln,yi=0,Er=0,xi=0,yn=typeof performance=="object"&&performance.now?performance:Date,xf=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Bs(){return Er||(xf(Y0),Er=yn.now()+xi)}function Y0(){Er=0}function mi(){this._call=this._time=this._next=null}mi.prototype=Hs.prototype={constructor:mi,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?Bs():+t)+(e==null?0:+e),!this._next&&ln!==this&&(ln?ln._next=this:vi=this,ln=this),this._call=n,this._time=t,Rs()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rs())}};function Hs(n,e,t){var r=new mi;return r.restart(n,e,t),r}function V0(){Bs(),++Fr;for(var n=vi,e;n;)(e=Er-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Fr}function al(){Er=(yi=yn.now())+xi,Fr=un=0;try{V0()}finally{Fr=0,Z0(),Er=0}}function Q0(){var n=yn.now(),e=n-yi;e>Ef&&(xi-=e,yi=n)}function Z0(){for(var n,e=vi,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:vi=t);ln=n,Rs(r)}function Rs(n){if(!Fr){un&&(un=clearTimeout(un));var e=n-Er;e>24?(n<1/0&&(un=setTimeout(al,n-yn.now()-xi)),Qr&&(Qr=clearInterval(Qr))):(Qr||(yi=yn.now(),Qr=setInterval(Q0,Ef)),Fr=1,xf(al))}}function ol(n,e,t){var r=new mi;return e=e==null?0:+e,r.restart(a=>{r.stop(),n(a+e)},e,t),r}var J0=wi("start","end","cancel","interrupt"),ey=[],Sf=0,sl=1,$s=2,ci=3,ul=4,Ps=5,hi=6;function Si(n,e,t,r,a,o){var s=n.__transition;if(!s)n.__transition={};else if(t in s)return;ty(n,t,{name:e,index:r,group:a,on:J0,tween:ey,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Sf})}function Ks(n,e){var t=It(n,e);if(t.state>Sf)throw new Error("too late; already scheduled");return t}function qt(n,e){var t=It(n,e);if(t.state>ci)throw new Error("too late; already running");return t}function It(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function ty(n,e,t){var r=n.__transition,a;r[e]=t,t.timer=Hs(o,0,t.time);function o(c){t.state=sl,t.timer.restart(s,t.delay,t.time),t.delay<=c&&s(c-t.delay)}function s(c){var f,p,v,b;if(t.state!==sl)return l();for(f in r)if(b=r[f],b.name===t.name){if(b.state===ci)return ol(s);b.state===ul?(b.state=hi,b.timer.stop(),b.on.call("interrupt",n,n.__data__,b.index,b.group),delete r[f]):+f<e&&(b.state=hi,b.timer.stop(),b.on.call("cancel",n,n.__data__,b.index,b.group),delete r[f])}if(ol(function(){t.state===ci&&(t.state=ul,t.timer.restart(u,t.delay,t.time),u(c))}),t.state=$s,t.on.call("start",n,n.__data__,t.index,t.group),t.state===$s){for(t.state=ci,a=new Array(v=t.tween.length),f=0,p=-1;f<v;++f)(b=t.tween[f].value.call(n,n.__data__,t.index,t.group))&&(a[++p]=b);a.length=p+1}}function u(c){for(var f=c<t.duration?t.ease.call(null,c/t.duration):(t.timer.restart(l),t.state=Ps,1),p=-1,v=a.length;++p<v;)a[p].call(n,f);t.state===Ps&&(t.on.call("end",n,n.__data__,t.index,t.group),l())}function l(){t.state=hi,t.timer.stop(),delete r[e];for(var c in r)return;delete n.__transition}}function ry(n,e){var t=n.__transition,r,a,o=!0,s;if(t){e=e==null?null:e+"";for(s in t){if((r=t[s]).name!==e){o=!1;continue}a=r.state>$s&&r.state<Ps,r.state=hi,r.timer.stop(),r.on.call(a?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[s]}o&&delete n.__transition}}function ny(n){return this.each(function(){ry(this,n)})}function iy(n,e){var t,r;return function(){var a=qt(this,n),o=a.tween;if(o!==t){r=t=o;for(var s=0,u=r.length;s<u;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}a.tween=r}}function ay(n,e,t){var r,a;if(typeof t!="function")throw new Error;return function(){var o=qt(this,n),s=o.tween;if(s!==r){a=(r=s).slice();for(var u={name:e,value:t},l=0,c=a.length;l<c;++l)if(a[l].name===e){a[l]=u;break}l===c&&a.push(u)}o.tween=a}}function oy(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=It(this.node(),t).tween,a=0,o=r.length,s;a<o;++a)if((s=r[a]).name===n)return s.value;return null}return this.each((e==null?iy:ay)(t,n,e))}function Xs(n,e,t){var r=n._id;return n.each(function(){var a=qt(this,r);(a.value||(a.value={}))[e]=t.apply(this,arguments)}),function(a){return It(a,r).value[e]}}function Af(n,e){var t;return(typeof e=="number"?sr:e instanceof vn?nl:(t=vn(e))?(e=t,nl):j0)(n,e)}function sy(n){return function(){this.removeAttribute(n)}}function uy(n){return function(){this.removeAttributeNS(n.space,n.local)}}function ly(n,e,t){var r,a=t+"",o;return function(){var s=this.getAttribute(n);return s===a?null:s===r?o:o=e(r=s,t)}}function cy(n,e,t){var r,a=t+"",o;return function(){var s=this.getAttributeNS(n.space,n.local);return s===a?null:s===r?o:o=e(r=s,t)}}function hy(n,e,t){var r,a,o;return function(){var s,u=t(this),l;return u==null?void this.removeAttribute(n):(s=this.getAttribute(n),l=u+"",s===l?null:s===r&&l===a?o:(a=l,o=e(r=s,u)))}}function dy(n,e,t){var r,a,o;return function(){var s,u=t(this),l;return u==null?void this.removeAttributeNS(n.space,n.local):(s=this.getAttributeNS(n.space,n.local),l=u+"",s===l?null:s===r&&l===a?o:(a=l,o=e(r=s,u)))}}function fy(n,e){var t=Ei(n),r=t==="transform"?X0:Af;return this.attrTween(n,typeof e=="function"?(t.local?dy:hy)(t,r,Xs(this,"attr."+n,e)):e==null?(t.local?uy:sy)(t):(t.local?cy:ly)(t,r,e))}function py(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function gy(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function vy(n,e){var t,r;function a(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&gy(n,o)),t}return a._value=e,a}function yy(n,e){var t,r;function a(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&py(n,o)),t}return a._value=e,a}function my(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=Ei(n);return this.tween(t,(r.local?vy:yy)(r,e))}function by(n,e){return function(){Ks(this,n).delay=+e.apply(this,arguments)}}function wy(n,e){return e=+e,function(){Ks(this,n).delay=e}}function Ey(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?by:wy)(e,n)):It(this.node(),e).delay}function xy(n,e){return function(){qt(this,n).duration=+e.apply(this,arguments)}}function Sy(n,e){return e=+e,function(){qt(this,n).duration=e}}function Ay(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?xy:Sy)(e,n)):It(this.node(),e).duration}function _y(n,e){if(typeof e!="function")throw new Error;return function(){qt(this,n).ease=e}}function ky(n){var e=this._id;return arguments.length?this.each(_y(e,n)):It(this.node(),e).ease}function Dy(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;qt(this,n).ease=t}}function Cy(n){if(typeof n!="function")throw new Error;return this.each(Dy(this._id,n))}function Iy(n){typeof n!="function"&&(n=af(n));for(var e=this._groups,t=e.length,r=new Array(t),a=0;a<t;++a)for(var o=e[a],s=o.length,u=r[a]=[],l,c=0;c<s;++c)(l=o[c])&&n.call(l,l.__data__,c,o)&&u.push(l);return new Zt(r,this._parents,this._name,this._id)}function Ly(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,a=t.length,o=Math.min(r,a),s=new Array(r),u=0;u<o;++u)for(var l=e[u],c=t[u],f=l.length,p=s[u]=new Array(f),v,b=0;b<f;++b)(v=l[b]||c[b])&&(p[b]=v);for(;u<r;++u)s[u]=e[u];return new Zt(s,this._parents,this._name,this._id)}function zy(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function Ty(n,e,t){var r,a,o=zy(e)?Ks:qt;return function(){var s=o(this,n),u=s.on;u!==r&&(a=(r=u).copy()).on(e,t),s.on=a}}function My(n,e){var t=this._id;return arguments.length<2?It(this.node(),t).on.on(n):this.each(Ty(t,n,e))}function Ny(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function Ry(){return this.on("end.remove",Ny(this._id))}function $y(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Ws(n));for(var r=this._groups,a=r.length,o=new Array(a),s=0;s<a;++s)for(var u=r[s],l=u.length,c=o[s]=new Array(l),f,p,v=0;v<l;++v)(f=u[v])&&(p=n.call(f,f.__data__,v,u))&&("__data__"in f&&(p.__data__=f.__data__),c[v]=p,Si(c[v],e,t,v,c,It(f,t)));return new Zt(o,this._parents,e,t)}function Py(n){var e=this._name,t=this._id;typeof n!="function"&&(n=nf(n));for(var r=this._groups,a=r.length,o=[],s=[],u=0;u<a;++u)for(var l=r[u],c=l.length,f,p=0;p<c;++p)if(f=l[p]){for(var v=n.call(f,f.__data__,p,l),b,E=It(f,t),S=0,A=v.length;S<A;++S)(b=v[S])&&Si(b,e,t,S,v,E);o.push(v),s.push(f)}return new Zt(o,s,e,t)}var Gy=mn.prototype.constructor;function Oy(){return new Gy(this._groups,this._parents)}function qy(n,e){var t,r,a;return function(){var o=qr(this,n),s=(this.style.removeProperty(n),qr(this,n));return o===s?null:o===t&&s===r?a:a=e(t=o,r=s)}}function _f(n){return function(){this.style.removeProperty(n)}}function Fy(n,e,t){var r,a=t+"",o;return function(){var s=qr(this,n);return s===a?null:s===r?o:o=e(r=s,t)}}function Wy(n,e,t){var r,a,o;return function(){var s=qr(this,n),u=t(this),l=u+"";return u==null&&(l=u=(this.style.removeProperty(n),qr(this,n))),s===l?null:s===r&&l===a?o:(a=l,o=e(r=s,u))}}function Uy(n,e){var t,r,a,o="style."+e,s="end."+o,u;return function(){var l=qt(this,n),c=l.on,f=l.value[o]==null?u||(u=_f(e)):void 0;(c!==t||a!==f)&&(r=(t=c).copy()).on(s,a=f),l.on=r}}function jy(n,e,t){var r=(n+="")=="transform"?K0:Af;return e==null?this.styleTween(n,qy(n,r)).on("end.style."+n,_f(n)):typeof e=="function"?this.styleTween(n,Wy(n,r,Xs(this,"style."+n,e))).each(Uy(this._id,n)):this.styleTween(n,Fy(n,r,e),t).on("end.style."+n,null)}function By(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function Hy(n,e,t){var r,a;function o(){var s=e.apply(this,arguments);return s!==a&&(r=(a=s)&&By(n,s,t)),r}return o._value=e,o}function Ky(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Hy(n,e,t??""))}function Xy(n){return function(){this.textContent=n}}function Yy(n){return function(){var e=n(this);this.textContent=e??""}}function Vy(n){return this.tween("text",typeof n=="function"?Yy(Xs(this,"text",n)):Xy(n==null?"":n+""))}function Qy(n){return function(e){this.textContent=n.call(this,e)}}function Zy(n){var e,t;function r(){var a=n.apply(this,arguments);return a!==t&&(e=(t=a)&&Qy(a)),e}return r._value=n,r}function Jy(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,Zy(n))}function em(){for(var n=this._name,e=this._id,t=kf(),r=this._groups,a=r.length,o=0;o<a;++o)for(var s=r[o],u=s.length,l,c=0;c<u;++c)if(l=s[c]){var f=It(l,e);Si(l,n,t,c,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Zt(r,this._parents,n,t)}function tm(){var n,e,t=this,r=t._id,a=t.size();return new Promise(function(o,s){var u={value:s},l={value:function(){--a===0&&o()}};t.each(function(){var c=qt(this,r),f=c.on;f!==n&&(e=(n=f).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(l)),c.on=e}),a===0&&o()})}var rm=0;function Zt(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function kf(){return++rm}var Ht=mn.prototype;Zt.prototype={constructor:Zt,select:$y,selectAll:Py,selectChild:Ht.selectChild,selectChildren:Ht.selectChildren,filter:Iy,merge:Ly,selection:Oy,transition:em,call:Ht.call,nodes:Ht.nodes,node:Ht.node,size:Ht.size,empty:Ht.empty,each:Ht.each,on:My,attr:fy,attrTween:my,style:jy,styleTween:Ky,text:Vy,textTween:Jy,remove:Ry,tween:oy,delay:Ey,duration:Ay,ease:ky,easeVarying:Cy,end:tm,[Symbol.iterator]:Ht[Symbol.iterator]};function nm(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var im={time:null,delay:0,duration:250,ease:nm};function am(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function om(n){var e,t;n instanceof Zt?(e=n._id,n=n._name):(e=kf(),(t=im).time=Bs(),n=n==null?null:n+"");for(var r=this._groups,a=r.length,o=0;o<a;++o)for(var s=r[o],u=s.length,l,c=0;c<u;++c)(l=s[c])&&Si(l,n,e,c,s,t||am(l,e));return new Zt(r,this._parents,n,e)}mn.prototype.interrupt=ny;mn.prototype.transition=om;function sm(n,e){var t,r=1;n==null&&(n=0),e==null&&(e=0);function a(){var o,s=t.length,u,l=0,c=0;for(o=0;o<s;++o)u=t[o],l+=u.x,c+=u.y;for(l=(l/s-n)*r,c=(c/s-e)*r,o=0;o<s;++o)u=t[o],u.x-=l,u.y-=c}return a.initialize=function(o){t=o},a.x=function(o){return arguments.length?(n=+o,a):n},a.y=function(o){return arguments.length?(e=+o,a):e},a.strength=function(o){return arguments.length?(r=+o,a):r},a}function um(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return Df(this.cover(e,t),e,t,n)}function Df(n,e,t,r){if(isNaN(e)||isNaN(t))return n;var a,o=n._root,s={data:r},u=n._x0,l=n._y0,c=n._x1,f=n._y1,p,v,b,E,S,A,_,w;if(!o)return n._root=s,n;for(;o.length;)if((S=e>=(p=(u+c)/2))?u=p:c=p,(A=t>=(v=(l+f)/2))?l=v:f=v,a=o,!(o=o[_=A<<1|S]))return a[_]=s,n;if(b=+n._x.call(null,o.data),E=+n._y.call(null,o.data),e===b&&t===E)return s.next=o,a?a[_]=s:n._root=s,n;do a=a?a[_]=new Array(4):n._root=new Array(4),(S=e>=(p=(u+c)/2))?u=p:c=p,(A=t>=(v=(l+f)/2))?l=v:f=v;while((_=A<<1|S)===(w=(E>=v)<<1|b>=p));return a[w]=o,a[_]=s,n}function lm(n){var e,t,r=n.length,a,o,s=new Array(r),u=new Array(r),l=1/0,c=1/0,f=-1/0,p=-1/0;for(t=0;t<r;++t)isNaN(a=+this._x.call(null,e=n[t]))||isNaN(o=+this._y.call(null,e))||(s[t]=a,u[t]=o,a<l&&(l=a),a>f&&(f=a),o<c&&(c=o),o>p&&(p=o));if(l>f||c>p)return this;for(this.cover(l,c).cover(f,p),t=0;t<r;++t)Df(this,s[t],u[t],n[t]);return this}function cm(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,a=this._x1,o=this._y1;if(isNaN(t))a=(t=Math.floor(n))+1,o=(r=Math.floor(e))+1;else{for(var s=a-t||1,u=this._root,l,c;t>n||n>=a||r>e||e>=o;)switch(c=(e<r)<<1|n<t,l=new Array(4),l[c]=u,u=l,s*=2,c){case 0:a=t+s,o=r+s;break;case 1:t=a-s,o=r+s;break;case 2:a=t+s,r=o-s;break;case 3:t=a-s,r=o-s;break}this._root&&this._root.length&&(this._root=u)}return this._x0=t,this._y0=r,this._x1=a,this._y1=o,this}function hm(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function dm(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function it(n,e,t,r,a){this.node=n,this.x0=e,this.y0=t,this.x1=r,this.y1=a}function fm(n,e,t){var r,a=this._x0,o=this._y0,s,u,l,c,f=this._x1,p=this._y1,v=[],b=this._root,E,S;for(b&&v.push(new it(b,a,o,f,p)),t==null?t=1/0:(a=n-t,o=e-t,f=n+t,p=e+t,t*=t);E=v.pop();)if(!(!(b=E.node)||(s=E.x0)>f||(u=E.y0)>p||(l=E.x1)<a||(c=E.y1)<o))if(b.length){var A=(s+l)/2,_=(u+c)/2;v.push(new it(b[3],A,_,l,c),new it(b[2],s,_,A,c),new it(b[1],A,u,l,_),new it(b[0],s,u,A,_)),(S=(e>=_)<<1|n>=A)&&(E=v[v.length-1],v[v.length-1]=v[v.length-1-S],v[v.length-1-S]=E)}else{var w=n-+this._x.call(null,b.data),k=e-+this._y.call(null,b.data),m=w*w+k*k;if(m<t){var C=Math.sqrt(t=m);a=n-C,o=e-C,f=n+C,p=e+C,r=b.data}}return r}function pm(n){if(isNaN(f=+this._x.call(null,n))||isNaN(p=+this._y.call(null,n)))return this;var e,t=this._root,r,a,o,s=this._x0,u=this._y0,l=this._x1,c=this._y1,f,p,v,b,E,S,A,_;if(!t)return this;if(t.length)for(;;){if((E=f>=(v=(s+l)/2))?s=v:l=v,(S=p>=(b=(u+c)/2))?u=b:c=b,e=t,!(t=t[A=S<<1|E]))return this;if(!t.length)break;(e[A+1&3]||e[A+2&3]||e[A+3&3])&&(r=e,_=A)}for(;t.data!==n;)if(a=t,!(t=t.next))return this;return(o=t.next)&&delete t.next,a?(o?a.next=o:delete a.next,this):e?(o?e[A]=o:delete e[A],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[_]=t:this._root=t),this):(this._root=o,this)}function gm(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function vm(){return this._root}function ym(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function mm(n){var e=[],t,r=this._root,a,o,s,u,l;for(r&&e.push(new it(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(r=t.node,o=t.x0,s=t.y0,u=t.x1,l=t.y1)&&r.length){var c=(o+u)/2,f=(s+l)/2;(a=r[3])&&e.push(new it(a,c,f,u,l)),(a=r[2])&&e.push(new it(a,o,f,c,l)),(a=r[1])&&e.push(new it(a,c,s,u,f)),(a=r[0])&&e.push(new it(a,o,s,c,f))}return this}function bm(n){var e=[],t=[],r;for(this._root&&e.push(new it(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var a=r.node;if(a.length){var o,s=r.x0,u=r.y0,l=r.x1,c=r.y1,f=(s+l)/2,p=(u+c)/2;(o=a[0])&&e.push(new it(o,s,u,f,p)),(o=a[1])&&e.push(new it(o,f,u,l,p)),(o=a[2])&&e.push(new it(o,s,p,f,c)),(o=a[3])&&e.push(new it(o,f,p,l,c))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this}function wm(n){return n[0]}function Em(n){return arguments.length?(this._x=n,this):this._x}function xm(n){return n[1]}function Sm(n){return arguments.length?(this._y=n,this):this._y}function Ys(n,e,t){var r=new Vs(e??wm,t??xm,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function Vs(n,e,t,r,a,o){this._x=n,this._y=e,this._x0=t,this._y0=r,this._x1=a,this._y1=o,this._root=void 0}function ll(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var ot=Ys.prototype=Vs.prototype;ot.copy=function(){var n=new Vs(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=ll(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var a=0;a<4;++a)(r=e.source[a])&&(r.length?t.push({source:r,target:e.target[a]=new Array(4)}):e.target[a]=ll(r));return n};ot.add=um;ot.addAll=lm;ot.cover=cm;ot.data=hm;ot.extent=dm;ot.find=fm;ot.remove=pm;ot.removeAll=gm;ot.root=vm;ot.size=ym;ot.visit=mm;ot.visitAfter=bm;ot.x=Em;ot.y=Sm;function at(n){return function(){return n}}function ur(n){return(n()-.5)*1e-6}function Am(n){return n.x+n.vx}function _m(n){return n.y+n.vy}function km(n){var e,t,r,a=1,o=1;typeof n!="function"&&(n=at(n==null?1:+n));function s(){for(var c,f=e.length,p,v,b,E,S,A,_=0;_<o;++_)for(p=Ys(e,Am,_m).visitAfter(u),c=0;c<f;++c)v=e[c],S=t[v.index],A=S*S,b=v.x+v.vx,E=v.y+v.vy,p.visit(w);function w(k,m,C,$,y){var I=k.data,z=k.r,T=S+z;if(I){if(I.index>v.index){var P=b-I.x-I.vx,O=E-I.y-I.vy,R=P*P+O*O;R<T*T&&(P===0&&(P=ur(r),R+=P*P),O===0&&(O=ur(r),R+=O*O),R=(T-(R=Math.sqrt(R)))/R*a,v.vx+=(P*=R)*(T=(z*=z)/(A+z)),v.vy+=(O*=R)*T,I.vx-=P*(T=1-T),I.vy-=O*T)}return}return m>b+T||$<b-T||C>E+T||y<E-T}}function u(c){if(c.data)return c.r=t[c.data.index];for(var f=c.r=0;f<4;++f)c[f]&&c[f].r>c.r&&(c.r=c[f].r)}function l(){if(e){var c,f=e.length,p;for(t=new Array(f),c=0;c<f;++c)p=e[c],t[p.index]=+n(p,c,e)}}return s.initialize=function(c,f){e=c,r=f,l()},s.iterations=function(c){return arguments.length?(o=+c,s):o},s.strength=function(c){return arguments.length?(a=+c,s):a},s.radius=function(c){return arguments.length?(n=typeof c=="function"?c:at(+c),l(),s):n},s}function Dm(n){return n.index}function cl(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function Cm(n){var e=Dm,t=p,r,a=at(30),o,s,u,l,c,f=1;n==null&&(n=[]);function p(A){return 1/Math.min(u[A.source.index],u[A.target.index])}function v(A){for(var _=0,w=n.length;_<f;++_)for(var k=0,m,C,$,y,I,z,T;k<w;++k)m=n[k],C=m.source,$=m.target,y=$.x+$.vx-C.x-C.vx||ur(c),I=$.y+$.vy-C.y-C.vy||ur(c),z=Math.sqrt(y*y+I*I),z=(z-o[k])/z*A*r[k],y*=z,I*=z,$.vx-=y*(T=l[k]),$.vy-=I*T,C.vx+=y*(T=1-T),C.vy+=I*T}function b(){if(s){var A,_=s.length,w=n.length,k=new Map(s.map((C,$)=>[e(C,$,s),C])),m;for(A=0,u=new Array(_);A<w;++A)m=n[A],m.index=A,typeof m.source!="object"&&(m.source=cl(k,m.source)),typeof m.target!="object"&&(m.target=cl(k,m.target)),u[m.source.index]=(u[m.source.index]||0)+1,u[m.target.index]=(u[m.target.index]||0)+1;for(A=0,l=new Array(w);A<w;++A)m=n[A],l[A]=u[m.source.index]/(u[m.source.index]+u[m.target.index]);r=new Array(w),E(),o=new Array(w),S()}}function E(){if(s)for(var A=0,_=n.length;A<_;++A)r[A]=+t(n[A],A,n)}function S(){if(s)for(var A=0,_=n.length;A<_;++A)o[A]=+a(n[A],A,n)}return v.initialize=function(A,_){s=A,c=_,b()},v.links=function(A){return arguments.length?(n=A,b(),v):n},v.id=function(A){return arguments.length?(e=A,v):e},v.iterations=function(A){return arguments.length?(f=+A,v):f},v.strength=function(A){return arguments.length?(t=typeof A=="function"?A:at(+A),E(),v):t},v.distance=function(A){return arguments.length?(a=typeof A=="function"?A:at(+A),S(),v):a},v}const Im=1664525,Lm=1013904223,hl=4294967296;function zm(){let n=1;return()=>(n=(Im*n+Lm)%hl)/hl}function Tm(n){return n.x}function Mm(n){return n.y}var Nm=10,Rm=Math.PI*(3-Math.sqrt(5));function $m(n){var e,t=1,r=.001,a=1-Math.pow(r,1/300),o=0,s=.6,u=new Map,l=Hs(p),c=wi("tick","end"),f=zm();n==null&&(n=[]);function p(){v(),c.call("tick",e),t<r&&(l.stop(),c.call("end",e))}function v(S){var A,_=n.length,w;S===void 0&&(S=1);for(var k=0;k<S;++k)for(t+=(o-t)*a,u.forEach(function(m){m(t)}),A=0;A<_;++A)w=n[A],w.fx==null?w.x+=w.vx*=s:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=s:(w.y=w.fy,w.vy=0);return e}function b(){for(var S=0,A=n.length,_;S<A;++S){if(_=n[S],_.index=S,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var w=Nm*Math.sqrt(.5+S),k=S*Rm;_.x=w*Math.cos(k),_.y=w*Math.sin(k)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function E(S){return S.initialize&&S.initialize(n,f),S}return b(),e={tick:v,restart:function(){return l.restart(p),e},stop:function(){return l.stop(),e},nodes:function(S){return arguments.length?(n=S,b(),u.forEach(E),e):n},alpha:function(S){return arguments.length?(t=+S,e):t},alphaMin:function(S){return arguments.length?(r=+S,e):r},alphaDecay:function(S){return arguments.length?(a=+S,e):+a},alphaTarget:function(S){return arguments.length?(o=+S,e):o},velocityDecay:function(S){return arguments.length?(s=1-S,e):1-s},randomSource:function(S){return arguments.length?(f=S,u.forEach(E),e):f},force:function(S,A){return arguments.length>1?(A==null?u.delete(S):u.set(S,E(A)),e):u.get(S)},find:function(S,A,_){var w=0,k=n.length,m,C,$,y,I;for(_==null?_=1/0:_*=_,w=0;w<k;++w)y=n[w],m=S-y.x,C=A-y.y,$=m*m+C*C,$<_&&(I=y,_=$);return I},on:function(S,A){return arguments.length>1?(c.on(S,A),e):c.on(S)}}}function Pm(){var n,e,t,r,a=at(-30),o,s=1,u=1/0,l=.81;function c(b){var E,S=n.length,A=Ys(n,Tm,Mm).visitAfter(p);for(r=b,E=0;E<S;++E)e=n[E],A.visit(v)}function f(){if(n){var b,E=n.length,S;for(o=new Array(E),b=0;b<E;++b)S=n[b],o[S.index]=+a(S,b,n)}}function p(b){var E=0,S,A,_=0,w,k,m;if(b.length){for(w=k=m=0;m<4;++m)(S=b[m])&&(A=Math.abs(S.value))&&(E+=S.value,_+=A,w+=A*S.x,k+=A*S.y);b.x=w/_,b.y=k/_}else{S=b,S.x=S.data.x,S.y=S.data.y;do E+=o[S.data.index];while(S=S.next)}b.value=E}function v(b,E,S,A){if(!b.value)return!0;var _=b.x-e.x,w=b.y-e.y,k=A-E,m=_*_+w*w;if(k*k/l<m)return m<u&&(_===0&&(_=ur(t),m+=_*_),w===0&&(w=ur(t),m+=w*w),m<s&&(m=Math.sqrt(s*m)),e.vx+=_*b.value*r/m,e.vy+=w*b.value*r/m),!0;if(b.length||m>=u)return;(b.data!==e||b.next)&&(_===0&&(_=ur(t),m+=_*_),w===0&&(w=ur(t),m+=w*w),m<s&&(m=Math.sqrt(s*m)));do b.data!==e&&(k=o[b.data.index]*r/m,e.vx+=_*k,e.vy+=w*k);while(b=b.next)}return c.initialize=function(b,E){n=b,t=E,f()},c.strength=function(b){return arguments.length?(a=typeof b=="function"?b:at(+b),f(),c):a},c.distanceMin=function(b){return arguments.length?(s=b*b,c):Math.sqrt(s)},c.distanceMax=function(b){return arguments.length?(u=b*b,c):Math.sqrt(u)},c.theta=function(b){return arguments.length?(l=b*b,c):Math.sqrt(l)},c}function Gm(n){var e=at(.1),t,r,a;typeof n!="function"&&(n=at(n==null?0:+n));function o(u){for(var l=0,c=t.length,f;l<c;++l)f=t[l],f.vx+=(a[l]-f.x)*r[l]*u}function s(){if(t){var u,l=t.length;for(r=new Array(l),a=new Array(l),u=0;u<l;++u)r[u]=isNaN(a[u]=+n(t[u],u,t))?0:+e(t[u],u,t)}}return o.initialize=function(u){t=u,s()},o.strength=function(u){return arguments.length?(e=typeof u=="function"?u:at(+u),s(),o):e},o.x=function(u){return arguments.length?(n=typeof u=="function"?u:at(+u),s(),o):n},o}function Om(n){var e=at(.1),t,r,a;typeof n!="function"&&(n=at(n==null?0:+n));function o(u){for(var l=0,c=t.length,f;l<c;++l)f=t[l],f.vy+=(a[l]-f.y)*r[l]*u}function s(){if(t){var u,l=t.length;for(r=new Array(l),a=new Array(l),u=0;u<l;++u)r[u]=isNaN(a[u]=+n(t[u],u,t))?0:+e(t[u],u,t)}}return o.initialize=function(u){t=u,s()},o.strength=function(u){return arguments.length?(e=typeof u=="function"?u:at(+u),s(),o):e},o.y=function(u){return arguments.length?(n=typeof u=="function"?u:at(+u),s(),o):n},o}function cn(n,e,t){this.k=n,this.x=e,this.y=t}cn.prototype={constructor:cn,scale:function(n){return n===1?this:new cn(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new cn(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};cn.prototype;const qm={listeners:new Map,emit(n,e={}){document.dispatchEvent(new CustomEvent(n,{detail:e}))},on(n,e){if(typeof e!="function"){console.warn(`EventBus: Tried to register a non-function listener for event: ${n}`);return}this.listeners.has(n)||this.listeners.set(n,new Set);const t=this.listeners.get(n);if(t.has(e)){console.warn(`EventBus: Listener for event "${n}" is already registered.`);return}document.addEventListener(n,e),t.add(e)},off(n,e){if(!this.listeners.has(n)){console.warn(`EventBus: Attempted to remove a listener from a non-existent event: ${n}`);return}const t=this.listeners.get(n);if(!t.has(e)){console.warn(`EventBus: Attempted to remove a non-existent listener from event: ${n}`);return}document.removeEventListener(n,e),t.delete(e),t.size===0&&this.listeners.delete(n)},removeAll(n){if(!this.listeners.has(n)){console.warn(`EventBus: Attempted to remove all listeners from a non-existent event: ${n}`);return}this.listeners.get(n).forEach(e=>{document.removeEventListener(n,e)}),this.listeners.delete(n)}};function Ki(n){const e=new Set(n.map(Number));let t=0;for(;e.has(t);)t++;return t}function dn(n,e=3){const t="abcdefghijklmnopqrstuvwxyz",r=[];function a(s,u,l){if(l===0){r.push(s);return}for(let c=u;c<t.length;c++)if(a(s+t[c],c+1,l-1),r.length>n)return}let o=1;for(;r.length<=n&&o<=e;)a("",0,o),o++;return r[n]||null}function Fm(n,e,t,r,a,o){let s=n-t,u=e-r,l=a-t,c=o-r,f=s*l+u*c,p=l*l+c*c,v=p!==0?f/p:-1,b,E;v<0?(b=t,E=r):v>1?(b=a,E=o):(b=t+v*l,E=r+v*c);let S=n-b,A=e-E;return Math.sqrt(S*S+A*A)}function Pn(n,e){return(n%e+e)%e}function st(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ue={},Tt={},Xi,dl;function Wm(){return dl||(dl=1,Xi=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,a,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(a=r;a--!==0;)if(!n(e[a],t[a]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a of e.entries())if(!t.has(a[0]))return!1;for(a of e.entries())if(!n(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(a=r;a--!==0;)if(e[a]!==t[a])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[a]))return!1;for(a=r;a--!==0;){var s=o[a];if(!n(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}),Xi}var Yi,fl;function we(){return fl||(fl=1,Yi=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),Yi}var Vi,pl;function et(){return pl||(pl=1,Vi=function(e){return e!==null&&typeof e=="function"&&typeof e.prototype=="object"&&typeof e.prototype.addUndirectedEdgeWithKey=="function"&&typeof e.prototype.dropNode=="function"}),Vi}var gl;function Um(){if(gl)return Tt;gl=1;var n=Wm(),e=Symbol("size");function t(f,p){var v=f.length,b=p.length;if(v!==b)return!1;var E,S,A,_,w=new Set;e:for(A=0;A<v;A++){for(E=f[A],_=0;_<b;_++)if(!w.has(_)&&(S=p[_],n(E,S))){w.add(_);continue e}return!1}return!0}function r(f,p){if(f[e]!==p[e])return!1;for(var v in f)if(!t(f[v],p[v]))return!1;return!0}function a(f,p){var v={},b;return f.forEachOutEdge(p,function(E,S,A,_){b=v[_]||0,b++,v[_]=b}),v}function o(f,p){var v={},b;return f.forEachUndirectedEdge(p,function(E,S,A,_){_=p===A?_:A,!(p>_)&&(b=v[_]||0,b++,v[_]=b)}),v}function s(f,p){var v={};v[e]=0;var b;return f.forEachOutEdge(p,function(E,S,A,_){b=v[_],b||(b=[],v[e]+=1,v[_]=b),b.push(S)}),v}function u(f,p){var v={};v[e]=0;var b;return f.forEachUndirectedEdge(p,function(E,S,A,_){_=p===A?_:A,!(p>_)&&(b=v[_],b||(b=[],v[e]+=1,v[_]=b),b.push(S))}),v}function l(f,p,v){return p===v?!0:p.order!==v.order?!1:p.everyNode(function(b,E){return v.hasNode(b)?f?n(E,v.getNodeAttributes(b)):!0:!1})}function c(f,p,v,b){if(v===b)return!0;if(p){if(v.type==="directed"&&b.type==="undirected"||v.type==="undirected"&&b.type==="directed")return!1}else if(v.type!==b.type||v.allowSelfLoops!==b.allowSelfLoops||v.multi!==b.multi)return!1;if(v.directedSize!==b.directedSize||v.undirectedSize!==b.undirectedSize||!l(f,v,b))return!1;var E=!1,S=!1;if(!v.multi&&!b.multi){if(E=v.everyDirectedEdge(function(w,k,m,C){return b.hasDirectedEdge(m,C)?f?n(v.getDirectedEdgeAttributes(m,C),b.getDirectedEdgeAttributes(m,C)):!0:!1}),!E||(S=v.everyUndirectedEdge(function(w,k,m,C){return b.hasUndirectedEdge(m,C)?f?n(v.getUndirectedEdgeAttributes(m,C),b.getUndirectedEdgeAttributes(m,C)):!0:!1}),!S))return!1}else{var A=f?s:a,_=f?r:n;if(E=v.everyNode(function(w){var k=A(v,w),m=A(b,w);return _(k,m)}),!E||(A=f?u:o,S=v.everyNode(function(w){var k=A(v,w),m=A(b,w);return _(k,m)}),!S))return!1}return!0}return Tt.isGraph=we(),Tt.isGraphConstructor=et(),Tt.haveSameNodes=l.bind(null,!1),Tt.haveSameNodesDeep=l.bind(null,!0),Tt.areSameGraphs=c.bind(null,!1,!1),Tt.areSameGraphsDeep=c.bind(null,!0,!1),Tt.haveSameEdges=c.bind(null,!1,!0),Tt.haveSameEdgesDeep=c.bind(null,!0,!0),Tt}var Qi,vl;function Cf(){return vl||(vl=1,Qi=Um()),Qi}var Gn={},On={},Zi={},Ji={},ea,yl;function Be(){if(yl)return ea;yl=1;function n(t){return!t||typeof t!="object"||typeof t=="function"||Array.isArray(t)||t instanceof Set||t instanceof Map||t instanceof RegExp||t instanceof Date}function e(t,r){t=t||{};var a={};for(var o in r){var s=t[o],u=r[o];if(!n(u)){a[o]=e(s,u);continue}s===void 0?a[o]=u:a[o]=s}return a}return ea=e,ea}var ar={},ml;function jm(){return ml||(ml=1,ar.identity=function(){return Float64Array.of(1,0,0,0,1,0,0,0,1)},ar.scale=function(e,t,r){return e[0]=t,e[4]=typeof r=="number"?r:t,e},ar.rotate=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=r,e[3]=-r,e[4]=a,e},ar.translate=function(e,t,r){return e[6]=t,e[7]=r,e},ar.multiply=function(e,t){var r=e[0],a=e[1],o=e[2],s=e[3],u=e[4],l=e[5],c=e[6],f=e[7],p=e[8],v=t[0],b=t[1],E=t[2],S=t[3],A=t[4],_=t[5],w=t[6],k=t[7],m=t[8];return e[0]=v*r+b*s+E*c,e[1]=v*a+b*u+E*f,e[2]=v*o+b*l+E*p,e[3]=S*r+A*s+_*c,e[4]=S*a+A*u+_*f,e[5]=S*o+A*l+_*p,e[6]=w*r+k*s+m*c,e[7]=w*a+k*u+m*f,e[8]=w*o+k*l+m*p,e},ar.multiplyVec2=function(e,t){var r=e[0],a=e[1],o=e[3],s=e[4],u=e[6],l=e[7],c=t.x,f=t.y;t.x=c*r+f*o+u,t.y=c*a+f*s+l}),ar}var bl;function Bm(){if(bl)return Ji;bl=1;var n=Be(),e=jm(),t=e.identity,r=e.multiply,a=e.translate,o=e.scale,s=e.rotate,u=e.multiplyVec2;function l(v,b,E,S){var A=S/E,_=b/v;return A<1&&_>1||A>1&&_<1?1:Math.min(Math.max(_,1/_),Math.max(1/A,A))}var c={x:.5,y:.5,angle:0,ratio:1},f={camera:c,padding:0};function p(v,b,E){E=n(E,f);var S=E.camera,A=v.x[1],_=v.y[1],w=v.x[0],k=v.y[0],m=A-w,C=_-k,$=b.width,y=b.height,I=Math.max(m,C)||1,z=(A+w)/2,T=(_+k)/2,P=Math.min($,y);P-=2*E.padding;var O=l(m,C,$,y),R=t();r(R,o(t(),$/2,y/2)),r(R,a(t(),1,1)),r(R,o(t(),1,-1)),r(R,o(t(),2*(P/$)*O,2*(P/y)*O)),r(R,s(t(),-S.angle)),r(R,o(t(),1/S.ratio)),r(R,a(t(),-S.x,-S.y)),r(R,a(t(),.5,.5)),r(R,o(t(),1/I)),r(R,a(t(),-z,-T));var V=function(W){return u(R,W),W},Q=function(W){return V({x:W.x,y:W.y})};return Q.assign=V,Q}return Ji.createGraphToViewportConversionFunction=p,Ji}var kr={},wl;function Qs(){if(wl)return kr;wl=1;var n=Be(),e={batchSize:500,padding:20,width:2048,height:2048,nodes:{reducer:null,defaultColor:"#999"},edges:{reducer:null,defaultColor:"#ccc"}};return kr.DEFAULTS=e,kr.refineSettings=function(r){r=r||{};var a={width:r.width,height:r.height};if(a.width&&!a.height&&(a.height=a.width),a.height&&!a.width&&(a.width=a.height),r=n(r,a),r=n(r,e),!r.width&&!r.height)throw new Error("graphology-canvas: need at least a valid width or height!");return r},kr.DEFAULT_NODE_REDUCER=function(t,r,a){var o={type:a.type||"circle",label:a.label||r,x:a.x,y:a.y,size:a.size||1,color:a.color||t.nodes.defaultColor};if(typeof o.x!="number"||typeof o.y!="number")throw new Error('graphology-canvas: the "'+r+'" node has no valid x or y position.');return o},kr.DEFAULT_EDGE_REDUCER=function(t,r,a){var o={type:a.type||"line",size:a.size||1,color:a.color||t.edges.defaultColor};return o},kr}var El;function Hm(){if(El)return Zi;El=1;var n=Bm(),e=Qs(),t=n.createGraphToViewportConversionFunction;function r(a,o){var s=o.width,u=o.height,l=1/0,c=-1/0,f=1/0,p=-1/0,v={};a.forEachNode(function(S,A){typeof o.nodes.reducer=="function"&&(A=o.nodes.reducer(o,S,A)),A=e.DEFAULT_NODE_REDUCER(o,S,A),v[S]=A;var _=A.x,w=A.y;_<l&&(l=_),_>c&&(c=_),w<f&&(f=w),w>p&&(p=w)});var b=t({x:[l,c],y:[f,p]},{width:s,height:u},{padding:o.padding});for(var E in v)b.assign(v[E]);return v}return Zi.reduceNodes=r,Zi}var ta,xl;function Km(){return xl||(xl=1,ta=function(e,t,r,a){e.fillStyle=t,e.fillRect(0,0,r,a)}),ta}var ra,Sl;function Xm(){if(Sl)return ra;Sl=1;var n=Math.PI*2;return ra=function(t,r,a){r.fillStyle=a.color,r.beginPath(),r.arc(a.x,a.y,a.size,0,n,!0),r.closePath(),r.fill()},ra}var na,Al;function Ym(){return Al||(Al=1,na=function(e,t,r,a,o){t.strokeStyle=r.color,t.lineWidth=r.size,t.beginPath(),t.moveTo(a.x,a.y),t.lineTo(o.x,o.y),t.stroke()}),na}var _l;function Vm(){if(_l)return On;_l=1;var n=Hm(),e=Qs(),t=Km(),r={nodes:{circle:Xm()},edges:{line:Ym()}};On.renderSync=function(u,l,c){var f=n.reduceNodes(u,c);t(l,"white",c.width,c.height);var p,v;u.forEachEdge(function(S,A,_,w){typeof c.edges.reducer=="function"&&(A=c.edges.reducer(c,S,A)),A=e.DEFAULT_EDGE_REDUCER(c,S,A),p=f[_],v=f[w],r.edges[A.type](c,l,A,p,v)});var b,E;for(b in f)E=f[b],r.nodes[E.type](c,l,E)};var a=function(s){return setTimeout(s,16)};typeof requestAnimationFrame<"u"&&(a=requestAnimationFrame);function o(s,u,l){return s()?(u(),s()?a(function(){o(s,u,l)}):l()):l()}return On.renderAsync=function(u,l,c,f){var p=n.reduceNodes(u,c);t(l,"white",c.width,c.height);var v=u.edges(),b=0;function E(){var $,y,I,z,T,P,O,R;for($=Math.min(b+c.batchSize,v.length);b<$;b++)y=v[b],I=u.getEdgeAttributes(y),z=u.extremities(y),T=z[0],P=z[1],typeof c.edges.reducer=="function"&&(I=c.edges.reducer(c,y,I)),I=e.DEFAULT_EDGE_REDUCER(c,y,I),O=p[T],R=p[P],r.edges[I.type](c,l,I,O,R)}var S=new Array(u.order),A=0;for(var _ in p)S[A++]=p[_];var w=0;function k(){var $,y;for($=Math.min(w+c.batchSize,S.length);w<$;w++)y=S[w],r.nodes[y.type](c,l,y)}function m(){return b<v.length}function C(){return w<S.length}o(m,E,function(){o(C,k,function(){return f()})})},On}var kl;function Qm(){if(kl)return Gn;kl=1;var n=we(),e=Vm(),t=Qs().refineSettings;return Gn.render=function(a,o,s){if(!n(a))throw new Error("graphology-canvas/render: expecting a valid graphology instance.");s=t(s),e.renderSync(a,o,s)},Gn.renderAsync=function(a,o,s,u){arguments.length===3&&(u=s,s={}),s=t(s),e.renderAsync(a,o,s,u)},Gn}var ia,Dl;function Zm(){return Dl||(Dl=1,ia=Qm()),ia}var aa,Cl;function xr(){if(Cl)return aa;Cl=1;var n=we();return aa=function(t){if(!n(t))throw new Error("graphology-utils/infer-type: expecting a valid graphology instance.");var r=t.type;return r!=="mixed"?r:t.directedSize===0&&t.undirectedSize===0||t.directedSize>0&&t.undirectedSize>0?"mixed":t.directedSize>0?"directed":"undirected"},aa}var oa,Il;function Jt(){if(Il)return oa;Il=1;function n(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}return typeof Symbol<"u"&&(n.prototype[Symbol.iterator]=function(){return this}),n.of=function(){var e=arguments,t=e.length,r=0;return new n(function(){return r>=t?{done:!0}:{done:!1,value:e[r++]}})},n.empty=function(){var e=new n(function(){return{done:!0}});return e},n.fromSequence=function(e){var t=0,r=e.length;return new n(function(){return t>=r?{done:!0}:{done:!1,value:e[t++]}})},n.is=function(e){return e instanceof n?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"},oa=n,oa}var sa={},Ll;function lr(){return Ll||(Ll=1,function(n){var e=Math.pow(2,8)-1,t=Math.pow(2,16)-1,r=Math.pow(2,32)-1,a=Math.pow(2,7)-1,o=Math.pow(2,15)-1,s=Math.pow(2,31)-1;n.getPointerArray=function(l){var c=l-1;if(c<=e)return Uint8Array;if(c<=t)return Uint16Array;if(c<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},n.getSignedPointerArray=function(l){var c=l-1;return c<=a?Int8Array:c<=o?Int16Array:c<=s?Int32Array:Float64Array},n.getNumberType=function(l){return l===(l|0)?Math.sign(l)===-1?l<=127&&l>=-128?Int8Array:l<=32767&&l>=-32768?Int16Array:Int32Array:l<=255?Uint8Array:l<=65535?Uint16Array:Uint32Array:Float64Array};var u={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};n.getMinimalRepresentation=function(l,c){var f=null,p=0,v,b,E,S,A;for(S=0,A=l.length;S<A;S++)E=c?c(l[S]):l[S],b=n.getNumberType(E),v=u[b.name],v>p&&(p=v,f=b);return f},n.isTypedArray=function(l){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(l)},n.concat=function(){var l=0,c,f,p;for(c=0,p=arguments.length;c<p;c++)l+=arguments[c].length;var v=new arguments[0].constructor(l);for(c=0,f=0;c<p;c++)v.set(arguments[c],f),f+=arguments[c].length;return v},n.indices=function(l){for(var c=n.getPointerArray(l),f=new c(l),p=0;p<l;p++)f[p]=p;return f}}(sa)),sa}var ua,zl;function Jm(){if(zl)return ua;zl=1;var n=Jt(),e=lr().getPointerArray;function t(r,a){arguments.length<2&&(a=r,r=Array);var o=e(a);this.size=0,this.length=a,this.dense=new o(a),this.sparse=new o(a),this.vals=new r(a)}return t.prototype.clear=function(){this.size=0},t.prototype.has=function(r){var a=this.sparse[r];return a<this.size&&this.dense[a]===r},t.prototype.get=function(r){var a=this.sparse[r];if(a<this.size&&this.dense[a]===r)return this.vals[a]},t.prototype.set=function(r,a){var o=this.sparse[r];return o<this.size&&this.dense[o]===r?(this.vals[o]=a,this):(this.dense[this.size]=r,this.sparse[r]=this.size,this.vals[this.size]=a,this.size++,this)},t.prototype.delete=function(r){var a=this.sparse[r];return a>=this.size||this.dense[a]!==r?!1:(a=this.dense[this.size-1],this.dense[this.sparse[r]]=a,this.sparse[a]=this.sparse[r],this.size--,!0)},t.prototype.forEach=function(r,a){a=arguments.length>1?a:this;for(var o=0;o<this.size;o++)r.call(a,this.vals[o],this.dense[o])},t.prototype.keys=function(){var r=this.size,a=this.dense,o=0;return new n(function(){if(o<r){var s=a[o];return o++,{value:s}}return{done:!0}})},t.prototype.values=function(){var r=this.size,a=this.vals,o=0;return new n(function(){if(o<r){var s=a[o];return o++,{value:s}}return{done:!0}})},t.prototype.entries=function(){var r=this.size,a=this.dense,o=this.vals,s=0;return new n(function(){if(s<r){var u=[a[s],o[s]];return s++,{value:u}}return{done:!0}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.entries),t.prototype.inspect=function(){for(var r=new Map,a=0;a<this.size;a++)r.set(this.dense[a],this.vals[a]);return Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r.length=this.length,this.vals.constructor!==Array&&(r.type=this.vals.constructor.name),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),ua=t,ua}var la,Tl;function eb(){if(Tl)return la;Tl=1;var n=Jt(),e=lr().getPointerArray;function t(r){var a=e(r);this.start=0,this.size=0,this.capacity=r,this.dense=new a(r),this.sparse=new a(r)}return t.prototype.clear=function(){this.start=0,this.size=0},t.prototype.has=function(r){if(this.size===0)return!1;var a=this.sparse[r],o=a<this.capacity&&a>=this.start&&a<this.start+this.size||a<(this.start+this.size)%this.capacity;return o&&this.dense[a]===r},t.prototype.enqueue=function(r){var a=this.sparse[r];if(this.size!==0){var o=a<this.capacity&&a>=this.start&&a<this.start+this.size||a<(this.start+this.size)%this.capacity;if(o&&this.dense[a]===r)return this}return a=(this.start+this.size)%this.capacity,this.dense[a]=r,this.sparse[r]=a,this.size++,this},t.prototype.dequeue=function(){if(this.size!==0){var r=this.start;this.size--,this.start++,this.start===this.capacity&&(this.start=0);var a=this.dense[r];return this.sparse[a]=this.capacity,a}},t.prototype.forEach=function(r,a){a=arguments.length>1?a:this;for(var o=this.capacity,s=this.size,u=this.start,l=0;l<s;)r.call(a,this.dense[u],l,this),u++,l++,u===o&&(u=0)},t.prototype.values=function(){var r=this.dense,a=this.capacity,o=this.size,s=this.start,u=0;return new n(function(){if(u>=o)return{done:!0};var l=r[s];return s++,u++,s===a&&(s=0),{value:l,done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.inspect=function(){var r=[];return this.forEach(function(a){r.push(a)}),Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r.capacity=this.capacity,r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),la=t,la}var ca,Ml;function tb(){if(Ml)return ca;Ml=1;function n(t){return function(r){return typeof r!="number"&&(r=r.length),Math.floor(t()*r)}}var e=n(Math.random);return e.createRandomIndex=n,ca=e,ca}var qn={},Zr={},Nl;function ft(){if(Nl)return Zr;Nl=1;function n(r){return typeof r!="number"||isNaN(r)?1:r}function e(r,a){var o={},s=function(c){return typeof c>"u"?a:c};typeof a=="function"&&(s=a);var u=function(c){return s(c[r])},l=function(){return s(void 0)};return typeof r=="string"?(o.fromAttributes=u,o.fromGraph=function(c,f){return u(c.getNodeAttributes(f))},o.fromEntry=function(c,f){return u(f)}):typeof r=="function"?(o.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},o.fromGraph=function(c,f){return s(r(f,c.getNodeAttributes(f)))},o.fromEntry=function(c,f){return s(r(c,f))}):(o.fromAttributes=l,o.fromGraph=l,o.fromEntry=l),o}function t(r,a){var o={},s=function(c){return typeof c>"u"?a:c};typeof a=="function"&&(s=a);var u=function(c){return s(c[r])},l=function(){return s(void 0)};return typeof r=="string"?(o.fromAttributes=u,o.fromGraph=function(c,f){return u(c.getEdgeAttributes(f))},o.fromEntry=function(c,f){return u(f)},o.fromPartialEntry=o.fromEntry,o.fromMinimalEntry=o.fromEntry):typeof r=="function"?(o.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},o.fromGraph=function(c,f){var p=c.extremities(f);return s(r(f,c.getEdgeAttributes(f),p[0],p[1],c.getNodeAttributes(p[0]),c.getNodeAttributes(p[1]),c.isUndirected(f)))},o.fromEntry=function(c,f,p,v,b,E,S){return s(r(c,f,p,v,b,E,S))},o.fromPartialEntry=function(c,f,p,v){return s(r(c,f,p,v))},o.fromMinimalEntry=function(c,f){return s(r(c,f))}):(o.fromAttributes=l,o.fromGraph=l,o.fromEntry=l,o.fromMinimalEntry=l),o}return Zr.createNodeValueGetter=e,Zr.createEdgeValueGetter=t,Zr.createEdgeWeightGetter=function(r){return t(r,n)},Zr}var Rl;function rb(){if(Rl)return qn;Rl=1;var n=lr(),e=Be(),t=ft().createEdgeWeightGetter,r=Symbol.for("nodejs.util.inspect.custom"),a={getEdgeWeight:"weight",keepDendrogram:!1,resolution:1};function o(u,l){l=e(l,a);var c=l.resolution,f=t(l.getEdgeWeight).fromEntry,p=(u.size-u.selfLoopCount)*2,v=n.getPointerArray(p),b=n.getPointerArray(u.order+1),E=l.getEdgeWeight?Float64Array:n.getPointerArray(u.size*2);this.C=u.order,this.M=0,this.E=p,this.U=0,this.resolution=c,this.level=0,this.graph=u,this.nodes=new Array(u.order),this.keepDendrogram=l.keepDendrogram,this.neighborhood=new b(p),this.weights=new E(p),this.loops=new E(u.order),this.starts=new v(u.order+1),this.belongings=new b(u.order),this.dendrogram=[],this.mapping=null,this.counts=new b(u.order),this.unused=new b(u.order),this.totalWeights=new E(u.order);var S={},A,_=0,w=0,k=this;u.forEachNode(function(m){k.nodes[_]=m,S[m]=_,w+=u.undirectedDegreeWithoutSelfLoops(m),k.starts[_]=w,k.belongings[_]=_,k.counts[_]=1,_++}),u.forEachEdge(function(m,C,$,y,I,z,T){if(A=f(m,C,$,y,I,z,T),$=S[$],y=S[y],k.M+=A,$===y)k.totalWeights[$]+=A*2,k.loops[$]=A*2;else{k.totalWeights[$]+=A,k.totalWeights[y]+=A;var P=--k.starts[$],O=--k.starts[y];k.neighborhood[P]=y,k.neighborhood[O]=$,k.weights[P]=A,k.weights[O]=A}}),this.starts[_]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}o.prototype.isolate=function(u,l){var c=this.belongings[u];if(this.counts[c]===1)return c;var f=this.unused[--this.U],p=this.loops[u];return this.totalWeights[c]-=l+p,this.totalWeights[f]+=l+p,this.belongings[u]=f,this.counts[c]--,this.counts[f]++,f},o.prototype.move=function(u,l,c){var f=this.belongings[u],p=this.loops[u];this.totalWeights[f]-=l+p,this.totalWeights[c]+=l+p,this.belongings[u]=c;var v=this.counts[f]--===1;this.counts[c]++,v&&(this.unused[this.U++]=f)},o.prototype.computeNodeDegree=function(u){var l,c,f,p=0;for(l=this.starts[u],c=this.starts[u+1];l<c;l++)f=this.weights[l],p+=f;return p},o.prototype.expensiveIsolate=function(u){var l=this.computeNodeDegree(u);return this.isolate(u,l)},o.prototype.expensiveMove=function(u,l){var c=this.computeNodeDegree(u);this.move(u,c,l)},o.prototype.zoomOut=function(){var u=new Array(this.C-this.U),l={},c=this.nodes.length,f=0,p=0,v,b,E,S,A,_,w,k,m;for(v=0,E=this.C;v<E;v++)_=this.belongings[v],_ in l||(l[_]=f,u[f]={adj:{},totalWeights:this.totalWeights[_],internalWeights:0},f++),this.belongings[v]=l[_];var C,$;if(this.keepDendrogram){for(C=this.dendrogram[this.level],$=new(n.getPointerArray(f))(c),v=0;v<c;v++)$[v]=this.belongings[C[v]];this.dendrogram.push($)}else for(v=0;v<c;v++)this.mapping[v]=this.belongings[this.mapping[v]];for(v=0,E=this.C;v<E;v++)for(_=this.belongings[v],k=u[_],m=k.adj,k.internalWeights+=this.loops[v],b=this.starts[v],S=this.starts[v+1];b<S;b++){if(A=this.neighborhood[b],w=this.belongings[A],_===w){k.internalWeights+=this.weights[b];continue}w in m||(m[w]=0),m[w]+=this.weights[b]}for(this.C=f,A=0,_=0;_<f;_++){k=u[_],m=k.adj,_=+_,this.totalWeights[_]=k.totalWeights,this.loops[_]=k.internalWeights,this.counts[_]=1,this.starts[_]=A,this.belongings[_]=_;for(w in m)this.neighborhood[A]=+w,this.weights[A]=m[w],p++,A++}return this.starts[f]=p,this.E=p,this.U=0,this.level++,l},o.prototype.modularity=function(){var u,l,c,f,p,v=0,b=this.M*2,E=new Float64Array(this.C);for(c=0;c<this.C;c++)for(u=this.belongings[c],E[u]+=this.loops[c],f=this.starts[c],p=this.starts[c+1];f<p;f++)l=this.belongings[this.neighborhood[f]],u===l&&(E[u]+=this.weights[f]);for(c=0;c<this.C;c++)v+=E[c]/b-Math.pow(this.totalWeights[c]/b,2)*this.resolution;return v},o.prototype.delta=function(u,l,c,f){var p=this.M,v=this.totalWeights[f];return l+=this.loops[u],c/p-v*l*this.resolution/(2*p*p)},o.prototype.deltaWithOwnCommunity=function(u,l,c,f){var p=this.M,v=this.totalWeights[f];return l+=this.loops[u],c/p-(v-l)*l*this.resolution/(2*p*p)},o.prototype.fastDelta=function(u,l,c,f){var p=this.M,v=this.totalWeights[f];return l+=this.loops[u],c-l*v*this.resolution/(2*p)},o.prototype.fastDeltaWithOwnCommunity=function(u,l,c,f){var p=this.M,v=this.totalWeights[f];return l+=this.loops[u],c-l*(v-l)*this.resolution/(2*p)},o.prototype.bounds=function(u){return[this.starts[u],this.starts[u+1]]},o.prototype.project=function(){var u=this,l={};return u.nodes.slice(0,this.C).forEach(function(c,f){l[c]=Array.from(u.neighborhood.slice(u.starts[f],u.starts[f+1])).map(function(p){return u.nodes[p]})}),l},o.prototype.collect=function(u){arguments.length<1&&(u=this.level);var l={},c=this.keepDendrogram?this.dendrogram[u]:this.mapping,f,p;for(f=0,p=c.length;f<p;f++)l[this.nodes[f]]=c[f];return l},o.prototype.assign=function(u,l){arguments.length<2&&(l=this.level);var c=this.keepDendrogram?this.dendrogram[l]:this.mapping,f,p;for(f=0,p=c.length;f<p;f++)this.graph.setNodeAttribute(this.nodes[f],u,c[f])},o.prototype[r]=function(){var u={};Object.defineProperty(u,"constructor",{value:o,enumerable:!1}),u.C=this.C,u.M=this.M,u.E=this.E,u.U=this.U,u.resolution=this.resolution,u.level=this.level,u.nodes=this.nodes,u.starts=this.starts.slice(0,u.C+1);var l=["neighborhood","weights"],c=["counts","loops","belongings","totalWeights"],f=this;return l.forEach(function(p){u[p]=f[p].slice(0,u.E)}),c.forEach(function(p){u[p]=f[p].slice(0,u.C)}),u.unused=this.unused.slice(0,this.U),this.keepDendrogram?u.dendrogram=this.dendrogram:u.mapping=this.mapping,u};function s(u,l){l=e(l,a);var c=l.resolution,f=t(l.getEdgeWeight).fromEntry,p=(u.size-u.selfLoopCount)*2,v=n.getPointerArray(p),b=n.getPointerArray(u.order+1),E=l.getEdgeWeight?Float64Array:n.getPointerArray(u.size*2);this.C=u.order,this.M=0,this.E=p,this.U=0,this.resolution=c,this.level=0,this.graph=u,this.nodes=new Array(u.order),this.keepDendrogram=l.keepDendrogram,this.neighborhood=new b(p),this.weights=new E(p),this.loops=new E(u.order),this.starts=new v(u.order+1),this.offsets=new v(u.order),this.belongings=new b(u.order),this.dendrogram=[],this.counts=new b(u.order),this.unused=new b(u.order),this.totalInWeights=new E(u.order),this.totalOutWeights=new E(u.order);var S={},A,_=0,w=0,k=this;u.forEachNode(function(m){k.nodes[_]=m,S[m]=_,w+=u.outDegreeWithoutSelfLoops(m),k.starts[_]=w,w+=u.inDegreeWithoutSelfLoops(m),k.offsets[_]=w,k.belongings[_]=_,k.counts[_]=1,_++}),u.forEachEdge(function(m,C,$,y,I,z,T){if(A=f(m,C,$,y,I,z,T),$=S[$],y=S[y],k.M+=A,$===y)k.loops[$]+=A,k.totalInWeights[$]+=A,k.totalOutWeights[$]+=A;else{k.totalOutWeights[$]+=A,k.totalInWeights[y]+=A;var P=--k.starts[$],O=--k.offsets[y];k.neighborhood[P]=y,k.neighborhood[O]=$,k.weights[P]=A,k.weights[O]=A}}),this.starts[_]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}return s.prototype.bounds=o.prototype.bounds,s.prototype.inBounds=function(u){return[this.offsets[u],this.starts[u+1]]},s.prototype.outBounds=function(u){return[this.starts[u],this.offsets[u]]},s.prototype.project=o.prototype.project,s.prototype.projectIn=function(){var u=this,l={};return u.nodes.slice(0,this.C).forEach(function(c,f){l[c]=Array.from(u.neighborhood.slice(u.offsets[f],u.starts[f+1])).map(function(p){return u.nodes[p]})}),l},s.prototype.projectOut=function(){var u=this,l={};return u.nodes.slice(0,this.C).forEach(function(c,f){l[c]=Array.from(u.neighborhood.slice(u.starts[f],u.offsets[f])).map(function(p){return u.nodes[p]})}),l},s.prototype.isolate=function(u,l,c){var f=this.belongings[u];if(this.counts[f]===1)return f;var p=this.unused[--this.U],v=this.loops[u];return this.totalInWeights[f]-=l+v,this.totalInWeights[p]+=l+v,this.totalOutWeights[f]-=c+v,this.totalOutWeights[p]+=c+v,this.belongings[u]=p,this.counts[f]--,this.counts[p]++,p},s.prototype.move=function(u,l,c,f){var p=this.belongings[u],v=this.loops[u];this.totalInWeights[p]-=l+v,this.totalInWeights[f]+=l+v,this.totalOutWeights[p]-=c+v,this.totalOutWeights[f]+=c+v,this.belongings[u]=f;var b=this.counts[p]--===1;this.counts[f]++,b&&(this.unused[this.U++]=p)},s.prototype.computeNodeInDegree=function(u){var l,c,f,p=0;for(l=this.offsets[u],c=this.starts[u+1];l<c;l++)f=this.weights[l],p+=f;return p},s.prototype.computeNodeOutDegree=function(u){var l,c,f,p=0;for(l=this.starts[u],c=this.offsets[u];l<c;l++)f=this.weights[l],p+=f;return p},s.prototype.expensiveMove=function(u,l){var c=this.computeNodeInDegree(u),f=this.computeNodeOutDegree(u);this.move(u,c,f,l)},s.prototype.zoomOut=function(){var u=new Array(this.C-this.U),l={},c=this.nodes.length,f=0,p=0,v,b,E,S,A,_,w,k,m,C,$,y,I;for(v=0,E=this.C;v<E;v++)_=this.belongings[v],_ in l||(l[_]=f,u[f]={inAdj:{},outAdj:{},totalInWeights:this.totalInWeights[_],totalOutWeights:this.totalOutWeights[_],internalWeights:0},f++),this.belongings[v]=l[_];var z,T;if(this.keepDendrogram){for(z=this.dendrogram[this.level],T=new(n.getPointerArray(f))(c),v=0;v<c;v++)T[v]=this.belongings[z[v]];this.dendrogram.push(T)}else for(v=0;v<c;v++)this.mapping[v]=this.belongings[this.mapping[v]];for(v=0,E=this.C;v<E;v++)for(_=this.belongings[v],m=this.offsets[v],k=u[_],y=k.inAdj,I=k.outAdj,k.internalWeights+=this.loops[v],b=this.starts[v],S=this.starts[v+1];b<S;b++){if(A=this.neighborhood[b],w=this.belongings[A],C=b<m,$=C?I:y,_===w){C&&(k.internalWeights+=this.weights[b]);continue}w in $||($[w]=0),$[w]+=this.weights[b]}for(this.C=f,A=0,_=0;_<f;_++){k=u[_],y=k.inAdj,I=k.outAdj,_=+_,this.totalInWeights[_]=k.totalInWeights,this.totalOutWeights[_]=k.totalOutWeights,this.loops[_]=k.internalWeights,this.counts[_]=1,this.starts[_]=A,this.belongings[_]=_;for(w in I)this.neighborhood[A]=+w,this.weights[A]=I[w],p++,A++;this.offsets[_]=A;for(w in y)this.neighborhood[A]=+w,this.weights[A]=y[w],p++,A++}return this.starts[f]=p,this.E=p,this.U=0,this.level++,l},s.prototype.modularity=function(){var u,l,c,f,p,v=0,b=this.M,E=new Float64Array(this.C);for(c=0;c<this.C;c++)for(u=this.belongings[c],E[u]+=this.loops[c],f=this.starts[c],p=this.offsets[c];f<p;f++)l=this.belongings[this.neighborhood[f]],u===l&&(E[u]+=this.weights[f]);for(c=0;c<this.C;c++)v+=E[c]/b-this.totalInWeights[c]*this.totalOutWeights[c]/Math.pow(b,2)*this.resolution;return v},s.prototype.delta=function(u,l,c,f,p){var v=this.M,b=this.totalInWeights[p],E=this.totalOutWeights[p],S=this.loops[u];return l+=S,c+=S,f/v-(c*b+l*E)*this.resolution/(v*v)},s.prototype.deltaWithOwnCommunity=function(u,l,c,f,p){var v=this.M,b=this.totalInWeights[p],E=this.totalOutWeights[p],S=this.loops[u];return l+=S,c+=S,f/v-(c*(b-l)+l*(E-c))*this.resolution/(v*v)},s.prototype.collect=o.prototype.collect,s.prototype.assign=o.prototype.assign,s.prototype[r]=function(){var u={};Object.defineProperty(u,"constructor",{value:s,enumerable:!1}),u.C=this.C,u.M=this.M,u.E=this.E,u.U=this.U,u.resolution=this.resolution,u.level=this.level,u.nodes=this.nodes,u.starts=this.starts.slice(0,u.C+1);var l=["neighborhood","weights"],c=["counts","offsets","loops","belongings","totalInWeights","totalOutWeights"],f=this;return l.forEach(function(p){u[p]=f[p].slice(0,u.E)}),c.forEach(function(p){u[p]=f[p].slice(0,u.C)}),u.unused=this.unused.slice(0,this.U),this.keepDendrogram?u.dendrogram=this.dendrogram:u.mapping=this.mapping,u},qn.UndirectedLouvainIndex=o,qn.DirectedLouvainIndex=s,qn}var ha,$l;function nb(){if($l)return ha;$l=1;var n=Be(),e=we(),t=xr(),r=Jm(),a=eb(),o=tb().createRandomIndex,s=rb(),u=s.UndirectedLouvainIndex,l=s.DirectedLouvainIndex,c={nodeCommunityAttribute:"community",getEdgeWeight:"weight",fastLocalMoves:!0,randomWalk:!0,resolution:1,rng:Math.random};function f(_,w,k){var m=_.get(w);typeof m>"u"&&(m=0),m+=k,_.set(w,m)}var p=1e-10;function v(_,w,k,m,C){return Math.abs(m-C)<p?_===w?!1:k>_:m>C}function b(_,w,k){var m=new u(w,{getEdgeWeight:k.getEdgeWeight,keepDendrogram:_,resolution:k.resolution}),C=o(k.rng),$=!0,y=!0,I,z,T=new r(Float64Array,m.C),P,O,R,V,Q,W,L,N,B,Y,U,F,K,ee,ae,se,le=0,ie=0,re=[],he,ge;for(k.fastLocalMoves&&(P=new a(m.C));$;){if(Y=m.C,$=!1,y=!0,k.fastLocalMoves){for(ge=0,W=k.randomWalk?C(Y):0,L=0;L<Y;L++,W++)N=W%Y,P.enqueue(N);for(;P.size!==0;){for(N=P.dequeue(),ie++,U=0,T.clear(),I=m.belongings[N],O=m.starts[N],R=m.starts[N+1];O<R;O++)B=m.neighborhood[O],V=m.weights[O],z=m.belongings[B],U+=V,f(T,z,V);for(ee=m.fastDeltaWithOwnCommunity(N,U,T.get(I)||0,I),K=I,Q=0;Q<T.size;Q++)z=T.dense[Q],z!==I&&(F=T.vals[Q],le++,se=m.fastDelta(N,U,F,z),ae=v(K,I,z,se,ee),ae&&(ee=se,K=z));if(ee<0){if(K=m.isolate(N,U),K===I)continue}else{if(K===I)continue;m.move(N,U,K)}for($=!0,ge++,O=m.starts[N],R=m.starts[N+1];O<R;O++)B=m.neighborhood[O],z=m.belongings[B],z!==K&&P.enqueue(B)}re.push(ge)}else for(he=[],re.push(he);y;){for(y=!1,ge=0,W=k.randomWalk?C(Y):0,L=0;L<Y;L++,W++){for(N=W%Y,ie++,U=0,T.clear(),I=m.belongings[N],O=m.starts[N],R=m.starts[N+1];O<R;O++)B=m.neighborhood[O],V=m.weights[O],z=m.belongings[B],U+=V,f(T,z,V);for(ee=m.fastDeltaWithOwnCommunity(N,U,T.get(I)||0,I),K=I,Q=0;Q<T.size;Q++)z=T.dense[Q],z!==I&&(F=T.vals[Q],le++,se=m.fastDelta(N,U,F,z),ae=v(K,I,z,se,ee),ae&&(ee=se,K=z));if(ee<0){if(K=m.isolate(N,U),K===I)continue}else{if(K===I)continue;m.move(N,U,K)}y=!0,ge++}he.push(ge),$=y||$}$&&m.zoomOut()}var me={index:m,deltaComputations:le,nodesVisited:ie,moves:re};return me}function E(_,w,k){var m=new l(w,{getEdgeWeight:k.getEdgeWeight,keepDendrogram:_,resolution:k.resolution}),C=o(k.rng),$=!0,y=!0,I,z,T=new r(Float64Array,m.C),P,O,R,V,Q,W,L,N,B,Y,U,F,K,ee,ae,se,le,ie,re,he=0,ge=0,me=[],Ie,pe;for(k.fastLocalMoves&&(P=new a(m.C));$;){if(F=m.C,$=!1,y=!0,k.fastLocalMoves){for(pe=0,N=k.randomWalk?C(F):0,B=0;B<F;B++,N++)Y=N%F,P.enqueue(Y);for(;P.size!==0;){for(Y=P.dequeue(),ge++,K=0,ee=0,T.clear(),I=m.belongings[Y],O=m.starts[Y],R=m.starts[Y+1],V=m.offsets[Y];O<R;O++)Q=O<V,U=m.neighborhood[O],W=m.weights[O],z=m.belongings[U],Q?ee+=W:K+=W,f(T,z,W);for(le=m.deltaWithOwnCommunity(Y,K,ee,T.get(I)||0,I),se=I,L=0;L<T.size;L++)z=T.dense[L],z!==I&&(ae=T.vals[L],he++,re=m.delta(Y,K,ee,ae,z),ie=v(se,I,z,re,le),ie&&(le=re,se=z));if(le<0){if(se=m.isolate(Y,K,ee),se===I)continue}else{if(se===I)continue;m.move(Y,K,ee,se)}for($=!0,pe++,O=m.starts[Y],R=m.starts[Y+1];O<R;O++)U=m.neighborhood[O],z=m.belongings[U],z!==se&&P.enqueue(U)}me.push(pe)}else for(Ie=[],me.push(Ie);y;){for(y=!1,pe=0,N=k.randomWalk?C(F):0,B=0;B<F;B++,N++){for(Y=N%F,ge++,K=0,ee=0,T.clear(),I=m.belongings[Y],O=m.starts[Y],R=m.starts[Y+1],V=m.offsets[Y];O<R;O++)Q=O<V,U=m.neighborhood[O],W=m.weights[O],z=m.belongings[U],Q?ee+=W:K+=W,f(T,z,W);for(le=m.deltaWithOwnCommunity(Y,K,ee,T.get(I)||0,I),se=I,L=0;L<T.size;L++)z=T.dense[L],z!==I&&(ae=T.vals[L],he++,re=m.delta(Y,K,ee,ae,z),ie=v(se,I,z,re,le),ie&&(le=re,se=z));if(le<0){if(se=m.isolate(Y,K,ee),se===I)continue}else{if(se===I)continue;m.move(Y,K,ee,se)}y=!0,pe++}Ie.push(pe),$=y||$}$&&m.zoomOut()}var oe={index:m,deltaComputations:he,nodesVisited:ge,moves:me};return oe}function S(_,w,k,m){if(!e(k))throw new Error("graphology-communities-louvain: the given graph is not a valid graphology instance.");var C=t(k);if(C==="mixed")throw new Error("graphology-communities-louvain: cannot run the algorithm on a true mixed graph.");m=n(m,c);var $=0;if(k.size===0){if(_){k.forEachNode(function(O){k.setNodeAttribute(O,m.nodeCommunityAttribute,$++)});return}var y={};return k.forEachNode(function(O){y[O]=$++}),w?{communities:y,count:k.order,deltaComputations:0,dendrogram:null,level:0,modularity:NaN,moves:null,nodesVisited:0,resolution:m.resolution}:y}var I=C==="undirected"?b:E,z=I(w,k,m),T=z.index;if(!w){if(_){T.assign(m.nodeCommunityAttribute);return}return T.collect()}var P={count:T.C,deltaComputations:z.deltaComputations,dendrogram:T.dendrogram,level:T.level,modularity:T.modularity(),moves:z.moves,nodesVisited:z.nodesVisited,resolution:m.resolution};return _?(T.assign(m.nodeCommunityAttribute),P):(P.communities=T.collect(),P)}var A=S.bind(null,!1,!1);return A.assign=S.bind(null,!0,!1),A.detailed=S.bind(null,!1,!0),A.defaults=c,ha=A,ha}var da,Pl;function ib(){return Pl||(Pl=1,da=nb()),da}var _t={},fa={},Gl;function Zs(){return Gl||(Gl=1,fa.copyNode=function(n,e,t){return t=Object.assign({},t),n.addNode(e,t)}),fa}var Dr={},Ol;function Lt(){return Ol||(Ol=1,Dr.addEdge=function(e,t,r,a,o,s){return t?r==null?e.addUndirectedEdge(a,o,s):e.addUndirectedEdgeWithKey(r,a,o,s):r==null?e.addDirectedEdge(a,o,s):e.addDirectedEdgeWithKey(r,a,o,s)},Dr.copyEdge=function(e,t,r,a,o,s){return s=Object.assign({},s),t?r==null?e.addUndirectedEdge(a,o,s):e.addUndirectedEdgeWithKey(r,a,o,s):r==null?e.addDirectedEdge(a,o,s):e.addDirectedEdgeWithKey(r,a,o,s)},Dr.mergeEdge=function(e,t,r,a,o,s){return t?r==null?e.mergeUndirectedEdge(a,o,s):e.mergeUndirectedEdgeWithKey(r,a,o,s):r==null?e.mergeDirectedEdge(a,o,s):e.mergeDirectedEdgeWithKey(r,a,o,s)},Dr.updateEdge=function(e,t,r,a,o,s){return t?r==null?e.updateUndirectedEdge(a,o,s):e.updateUndirectedEdgeWithKey(r,a,o,s):r==null?e.updateDirectedEdge(a,o,s):e.updateDirectedEdgeWithKey(r,a,o,s)}),Dr}var pa,ql;function If(){if(ql)return pa;ql=1;function n(e){this.graph=e,this.stack=new Array(e.order),this.seen=new Set,this.size=0}return n.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},n.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},n.prototype.forEachNodeYetUnseen=function(e){var t=this.seen,r=this.graph;r.someNode(function(a,o){if(t.size===r.order)return!0;if(t.has(a))return!1;var s=e(a,o);return!!s})},n.prototype.has=function(e){return this.seen.has(e)},n.prototype.push=function(e){var t=this.seen.size;return this.seen.add(e),t===this.seen.size?!1:(this.stack[this.size++]=e,!0)},n.prototype.pushWith=function(e,t){var r=this.seen.size;return this.seen.add(e),r===this.seen.size?!1:(this.stack[this.size++]=t,!0)},n.prototype.pop=function(){if(this.size!==0)return this.stack[--this.size]},pa=n,pa}var Fl;function Lf(){if(Fl)return _t;Fl=1;var n=we(),e=Zs().copyNode,t=Lt().copyEdge,r=If();function a(b,E){if(!n(b))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(b.order){var S=new r(b),A=S.push.bind(S);S.forEachNodeYetUnseen(function(_){var w=[];S.push(_);for(var k;S.size!==0;)k=S.pop(),w.push(k),b.forEachNeighbor(k,A);E(w)})}}function o(b,E){if(!n(b))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(b.order){var S=new r(b),A=S.push.bind(S);S.forEachNodeYetUnseen(function(_){var w=0;S.push(_);for(var k;S.size!==0;)k=S.pop(),w++,b.forEachNeighbor(k,A);E(w)})}}function s(b,E,S){if(!n(b))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!b.order)return;var A=new r(b),_;function w(k,m,C,$,y,I,z){_===$&&($=C),E(k,m,C,$,y,I,z)&&A.push($)}A.forEachNodeYetUnseen(function(k){var m=0;for(A.push(k);A.size!==0;)_=A.pop(),m++,b.forEachEdge(_,w);S(m)})}function u(b){var E=0;return o(b,function(){E++}),E}function l(b){var E=[];return a(b,function(S){E.push(S)}),E}function c(b){if(!n(b))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!b.order)return[];var E=new r(b),S=E.push.bind(E),A=[],_;return E.forEachNodeYetUnseen(function(w){_=[],E.push(w);for(var k;E.size!==0;)k=E.pop(),_.push(k),b.forEachNeighbor(k,S);return _.length>A.length&&(A=_),A.length>E.countUnseenNodes()}),A}function f(b){var E=c(b),S=b.nullCopy();return E.forEach(function(A){e(S,A,b.getNodeAttributes(A))}),b.forEachEdge(function(A,_,w,k,m,C,$){S.hasNode(w)&&t(S,$,A,w,k,_)}),S}function p(b){var E=new Set(c(b));b.forEachNode(function(S){E.has(S)||b.dropNode(S)})}function v(b){if(!n(b))throw new Error("graphology-components: the given graph is not a valid graphology instance.");if(!b.order)return[];if(b.type==="undirected")throw new Error("graphology-components: the given graph is undirected");var E=b.nodes(),S=[],A,_;if(!b.size){for(A=0,_=E.length;A<_;A++)S.push([E[A]]);return S}var w=1,k=[],m=[],C=new Map,$=new Set,y,I,z,T=function(P){var O,R=b.outboundNeighbors(P),V;C.set(P,w++),k.push(P),m.push(P);for(var Q=0,W=R.length;Q<W;Q++)if(O=R[Q],C.has(O)){if(V=C.get(O),!$.has(O))for(;C.get(k[k.length-1])>V;)k.pop()}else T(O);if(C.get(k[k.length-1])===C.get(P)){y=[];do I=m.pop(),y.push(I),$.add(I);while(I!==P);S.push(y),k.pop()}};for(A=0,_=E.length;A<_;A++)z=E[A],$.has(z)||T(z);return S}return _t.forEachConnectedComponent=a,_t.forEachConnectedComponentOrder=o,_t.forEachConnectedComponentOrderWithEdgeFilter=s,_t.countConnectedComponents=u,_t.connectedComponents=l,_t.largestConnectedComponent=c,_t.largestConnectedComponentSubgraph=f,_t.cropToLargestConnectedComponent=p,_t.stronglyConnectedComponents=v,_t}var ga,Wl;function ab(){return Wl||(Wl=1,ga=Lf()),ga}var pr={},Cr={},va,Ul;function ob(){if(Ul)return va;Ul=1;var n=et();return va=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/complete: invalid Graph constructor.");var a=new t,o,s;for(o=0;o<r;o++)a.addNode(o);for(o=0;o<r;o++)for(s=o+1;s<r;s++)a.type!=="directed"&&a.addUndirectedEdge(o,s),a.type!=="undirected"&&(a.addDirectedEdge(o,s),a.addDirectedEdge(s,o));return a},va}var ya,jl;function Js(){if(jl)return ya;jl=1;var n=et();return ya=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/empty: invalid Graph constructor.");var a=new t,o;for(o=0;o<r;o++)a.addNode(o);return a},ya}var ma,Bl;function sb(){if(Bl)return ma;Bl=1;var n=et();return ma=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/ladder: invalid Graph constructor.");var a=new t,o;for(o=0;o<r-1;o++)a.mergeEdge(o,o+1);for(o=r;o<r*2-1;o++)a.mergeEdge(o,o+1);for(o=0;o<r;o++)a.addEdge(o,o+r);return a},ma}var ba,Hl;function ub(){if(Hl)return ba;Hl=1;var n=et();return ba=function(t,r){if(!n(t))throw new Error("graphology-generators/classic/path: invalid Graph constructor.");for(var a=new t,o=0;o<r-1;o++)a.mergeEdge(o,o+1);return a},ba}var Kl;function zf(){return Kl||(Kl=1,Cr.complete=ob(),Cr.empty=Js(),Cr.ladder=sb(),Cr.path=ub()),Cr}var Fn={},wa,Xl;function lb(){if(Xl)return wa;Xl=1;var n=et(),e=Js();return wa=function(r,a,o){if(!n(r))throw new Error("graphology-generators/community/caveman: invalid Graph constructor.");var s=a*o,u=e(r,s);if(o<2)return u;var l,c,f;for(l=0;l<s;l+=o)for(c=l;c<l+o;c++)for(f=c+1;f<l+o;f++)u.addEdge(c,f);return u},wa}var Ea,Yl;function cb(){if(Yl)return Ea;Yl=1;var n=et(),e=Js();return Ea=function(r,a,o){if(!n(r))throw new Error("graphology-generators/community/connected-caveman: invalid Graph constructor.");var s=a*o,u=e(r,s);if(o<2)return u;var l,c,f;for(l=0;l<s;l+=o){for(c=l;c<l+o;c++)for(f=c+1;f<l+o;f++)(c!==l||c!==f-1)&&u.addEdge(c,f);l>0&&u.addEdge(l,(l-1)%s)}return u.addEdge(0,s-1),u},Ea}var Vl;function Tf(){return Vl||(Vl=1,Fn.caveman=lb(),Fn.connectedCaveman=cb()),Fn}var Jr={},xa,Ql;function hb(){if(Ql)return xa;Ql=1;var n=et();return xa=function(e,t){if(!n(e))throw new Error("graphology-generators/random/clusters: invalid Graph constructor.");t=t||{};var r="clusterDensity"in t?t.clusterDensity:.5,a=t.rng||Math.random,o=t.order,s=t.size,u=t.clusters;if(typeof r!="number"||r>1||r<0)throw new Error("graphology-generators/random/clusters: `clusterDensity` option should be a number between 0 and 1.");if(typeof a!="function")throw new Error("graphology-generators/random/clusters: `rng` option should be a function.");if(typeof o!="number"||o<=0)throw new Error("graphology-generators/random/clusters: `order` option should be a positive number.");if(typeof s!="number"||s<=0)throw new Error("graphology-generators/random/clusters: `size` option should be a positive number.");if(typeof u!="number"||u<=0)throw new Error("graphology-generators/random/clusters: `clusters` option should be a positive number.");var l=new e;if(!o)return l;var c=new Array(u),f,p,v;for(v=0;v<u;v++)c[v]=[];for(v=0;v<o;v++)f=a()*u|0,l.addNode(v,{cluster:f}),c[f].push(v);if(!s)return l;var b,E,S;for(v=0;v<s;v++){if(a()<1-r){b=a()*o|0;do E=a()*o|0;while(b===E)}else{if(f=a()*u|0,p=c[f],S=p.length,!S||S<2)continue;b=p[a()*S|0];do E=p[a()*S|0];while(b===E)}l.multi?l.addEdge(b,E):l.mergeEdge(b,E)}return l},xa}var Mt={},Sa,Zl;function Mf(){if(Zl)return Sa;Zl=1;var n=we();return Sa=function(t){if(!n(t))throw new Error("graphology-metrics/simple-size: the given graph is not a valid graphology instance.");if(!t.multi)return t.size;var r=0,a=0;function o(){r++}function s(){a++}return t.forEachNode(function(u){t.type!=="directed"&&t.forEachUndirectedNeighbor(u,o),t.type!=="undirected"&&t.forEachOutNeighbor(u,s)}),r/2+a},Sa}var Jl;function Nf(){if(Jl)return Mt;Jl=1;var n=we(),e=Mf();function t(s,u){return 2*u/(s*(s-1))}function r(s,u){return u/(s*(s-1))}function a(s,u){var l=s*(s-1);return u/(l+l/2)}function o(s,u,l){var c,f;if(arguments.length>3){if(c=l,f=arguments[3],typeof c!="number"||c<0)throw new Error("graphology-metrics/density: given order is not a valid number.");if(typeof f!="number"||f<0)throw new Error("graphology-metrics/density: given size is not a valid number.")}else{if(!n(l))throw new Error("graphology-metrics/density: given graph is not a valid graphology instance.");c=l.order,f=l.size,l.multi&&u===!1&&(f=e(l))}if(c<2)return 0;s===null&&(s=l.type),u===null&&(u=l.multi);var p;return s==="undirected"?p=t:s==="directed"?p=r:p=a,p(c,f)}return Mt.abstractDensity=o,Mt.density=o.bind(null,null,null),Mt.directedDensity=o.bind(null,"directed",!1),Mt.undirectedDensity=o.bind(null,"undirected",!1),Mt.mixedDensity=o.bind(null,"mixed",!1),Mt.multiDirectedDensity=o.bind(null,"directed",!0),Mt.multiUndirectedDensity=o.bind(null,"undirected",!0),Mt.multiMixedDensity=o.bind(null,"mixed",!0),Mt}var Aa,ec;function db(){if(ec)return Aa;ec=1;var n=et(),e=Nf().abstractDensity;function t(a,o){if(!n(a))throw new Error("graphology-generators/random/erdos-renyi: invalid Graph constructor.");var s=o.order,u=o.probability,l=o.rng||Math.random,c=new a;if(typeof o.approximateSize=="number"&&(u=e(c.type,!1,s,o.approximateSize)),typeof s!="number"||s<=0)throw new Error("graphology-generators/random/erdos-renyi: invalid `order`. Should be a positive number.");if(typeof u!="number"||u<0||u>1)throw new Error("graphology-generators/random/erdos-renyi: invalid `probability`. Should be a number between 0 and 1. Or maybe you gave an `approximateSize` exceeding the graph's density.");if(typeof l!="function")throw new Error("graphology-generators/random/erdos-renyi: invalid `rng`. Should be a function.");var f,p;for(f=0;f<s;f++)c.addNode(f);if(u<=0)return c;for(f=0;f<s;f++)for(p=f+1;p<s;p++)c.type!=="directed"&&l()<u&&c.addUndirectedEdge(f,p),c.type!=="undirected"&&(l()<u&&c.addDirectedEdge(f,p),l()<u&&c.addDirectedEdge(p,f));return c}function r(a,o){if(!n(a))throw new Error("graphology-generators/random/erdos-renyi: invalid Graph constructor.");var s=o.order,u=o.probability,l=o.rng||Math.random,c=new a;if(typeof o.approximateSize=="number"&&(u=e(c.type,!1,s,o.approximateSize)),typeof s!="number"||s<=0)throw new Error("graphology-generators/random/erdos-renyi: invalid `order`. Should be a positive number.");if(typeof u!="number"||u<0||u>1)throw new Error("graphology-generators/random/erdos-renyi: invalid `probability`. Should be a number between 0 and 1. Or maybe you gave an `approximateSize` exceeding the graph's density.");if(typeof l!="function")throw new Error("graphology-generators/random/erdos-renyi: invalid `rng`. Should be a function.");for(var f=0;f<s;f++)c.addNode(f);if(u<=0)return c;var p=-1,v=Math.log(1-u),b,E;if(c.type!=="undirected")for(E=0;E<s;){for(b=Math.log(1-l()),p+=1+(b/v|0),E===p&&p++;E<s&&s<=p;)p-=s,E++,E===p&&p++;E<s&&c.addDirectedEdge(E,p)}if(p=-1,c.type!=="directed")for(E=1;E<s;){for(b=Math.log(1-l()),p+=1+(b/v|0);p>=E&&E<s;)p-=E,E++;E<s&&c.addUndirectedEdge(E,p)}return c}return t.sparse=r,Aa=t,Aa}var _a,tc;function fb(){if(tc)return _a;tc=1;var n=et();return _a=function(t,r){if(!n(t))throw new Error("graphology-generators/random/girvan-newman: invalid Graph constructor.");var a=r.zOut,o=r.rng||Math.random;if(typeof a!="number")throw new Error("graphology-generators/random/girvan-newman: invalid `zOut`. Should be a number.");if(typeof o!="function")throw new Error("graphology-generators/random/girvan-newman: invalid `rng`. Should be a function.");var s=a/96,u=(16-s*96)/31,l=new t,c,f,p;for(f=0;f<128;f++)l.addNode(f);for(f=0;f<128;f++)for(p=f+1;p<128;p++)c=o(),f%4===p%4?c<u&&l.addEdge(f,p):c<s&&l.addEdge(f,p);return l},_a}var rc;function Rf(){return rc||(rc=1,Jr.clusters=hb(),Jr.erdosRenyi=db(),Jr.girvanNewman=fb()),Jr}var ka={},Da,nc;function $f(){return nc||(nc=1,Da=function(e,t){if(t.length!==0){var r,a,o,s=t[0];for(e.mergeNode(s),a=1,o=t.length;a<o;a++)r=t[a],e.mergeEdge(s,r)}}),Da}var Ca,ic;function pb(){if(ic)return Ca;ic=1;var n=et(),e=$f(),t=[["Andre","Beverley","Carol","Diane","Fernando"],["Beverley","Andre","Ed","Garth"],["Carol","Andre","Diane","Fernando"],["Diane","Andre","Beverley","Carol","Ed","Fernando","Garth"],["Ed","Beverley","Diane","Garth"],["Fernando","Andre","Carol","Diane","Garth","Heather"],["Garth","Beverley","Diane","Ed","Fernando","Heather"],["Heather","Fernando","Garth","Ike"],["Ike","Heather","Jane"],["Jane","Ike"]];return Ca=function(a){if(!n(a))throw new Error("graphology-generators/social/krackhardt-kite: invalid Graph constructor.");var o=new a,s,u;for(s=0,u=t.length;s<u;s++)e(o,t[s]);return o},Ca}var ac;function gb(){return ac||(ac=1,ka.krackhardtKite=pb()),ka}var Wn={},Ia,oc;function vb(){if(oc)return Ia;oc=1;var n=et(),e=[["Acciaiuoli","Medici"],["Castellani","Peruzzi"],["Castellani","Strozzi"],["Castellani","Barbadori"],["Medici","Barbadori"],["Medici","Ridolfi"],["Medici","Tornabuoni"],["Medici","Albizzi"],["Medici","Salviati"],["Salviati","Pazzi"],["Peruzzi","Strozzi"],["Peruzzi","Bischeri"],["Strozzi","Ridolfi"],["Strozzi","Bischeri"],["Ridolfi","Tornabuoni"],["Tornabuoni","Guadagni"],["Albizzi","Ginori"],["Albizzi","Guadagni"],["Bischeri","Guadagni"],["Guadagni","Lamberteschi"]];return Ia=function(r){if(!n(r))throw new Error("graphology-generators/social/florentine-families: invalid Graph constructor.");var a=new r,o,s,u;for(s=0,u=e.length;s<u;s++)o=e[s],a.mergeEdge(o[0],o[1]);return a},Ia}var La,sc;function yb(){if(sc)return La;sc=1;var n=et(),e=["0111111110111100010101000000000100","1011000100000100010101000000001000","1101000111000100000000000001100010","1110000100001100000000000000000000","1000001000100000000000000000000000","1000001000100000100000000000000000","1000110000000000100000000000000000","1111000000000000000000000000000000","1010000000000000000000000000001011","0010000000000000000000000000000001","1000110000000000000000000000000000","1000000000000000000000000000000000","1001000000000000000000000000000000","1111000000000000000000000000000001","0000000000000000000000000000000011","0000000000000000000000000000000011","0000011000000000000000000000000000","1100000000000000000000000000000000","0000000000000000000000000000000011","1100000000000000000000000000000001","0000000000000000000000000000000011","1100000000000000000000000000000000","0000000000000000000000000000000011","0000000000000000000000000101010011","0000000000000000000000000101000100","0000000000000000000000011000000100","0000000000000000000000000000010001","0010000000000000000000011000000001","0010000000000000000000000000000101","0000000000000000000000010010000011","0100000010000000000000000000000011","1000000000000000000000001100100011","0010000010000011001010110000011101","0000000011000111001110110011111110"],t=new Set([0,1,2,3,4,5,6,7,8,10,11,12,13,16,17,19,21]);return La=function(a){if(!n(a))throw new Error("graphology-generators/social/karate: invalid Graph constructor.");for(var o=new a,s,u=0;u<34;u++)s=t.has(u)?"Mr. Hi":"Officer",o.addNode(u,{club:s});var l,c,f,p,v,b;for(f=0,v=e.length;f<v;f++)for(l=e[f].split(""),p=f+1,b=l.length;p<b;p++)c=+l[p],c&&o.addEdgeWithKey(f+"->"+p,f,p);return o},La}var uc;function mb(){return uc||(uc=1,Wn.florentineFamilies=vb(),Wn.karateClub=yb()),Wn}var lc;function bb(){return lc||(lc=1,pr.classic=zf(),pr.community=Tf(),pr.random=Rf(),pr.small=gb(),pr.social=mb()),pr}var za,cc;function wb(){return cc||(cc=1,za=bb()),za}var Ir={},Ta,hc;function Eb(){if(hc)return Ta;hc=1;function n(t){return function(r,a){return r+Math.floor(t()*(a-r+1))}}var e=n(Math.random);return e.createRandom=n,Ta=e,Ta}var Ma,dc;function xb(){if(dc)return Ma;dc=1;var n=Eb().createRandom;function e(r){var a=n(r);return function(o){for(var s=o.length,u=s-1,l=-1;++l<s;){var c=a(l,u),f=o[c];o[c]=o[l],o[l]=f}}}var t=e(Math.random);return t.createShuffleInPlace=e,Ma=t,Ma}var Na,fc;function Sb(){if(fc)return Na;fc=1;var n=Be(),e=we(),t=xb(),r={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function a(y,I,z,T,P){this.wrappedCircle=P||null,this.children={},this.countChildren=0,this.id=y||null,this.next=null,this.previous=null,this.x=I||null,this.y=z||null,P?this.r=1010101:this.r=T||999}a.prototype.hasChildren=function(){return this.countChildren>0},a.prototype.addChild=function(y,I){this.children[y]=I,++this.countChildren},a.prototype.getChild=function(y){if(!this.children.hasOwnProperty(y)){var I=new a;this.children[y]=I,++this.countChildren}return this.children[y]},a.prototype.applyPositionToChildren=function(){if(this.hasChildren()){var y=this;for(var I in y.children){var z=y.children[I];z.x+=y.x,z.y+=y.y,z.applyPositionToChildren()}}};function o(y,I,z){for(var T in I.children){var P=I.children[T];P.hasChildren()?o(y,P,z):z[P.id]={x:P.x,y:P.y}}}function s(y,I){var z=y.r-I.r,T=I.x-y.x,P=I.y-y.y;return z<0||z*z<T*T+P*P}function u(y,I){var z=y.r-I.r+1e-6,T=I.x-y.x,P=I.y-y.y;return z>0&&z*z>T*T+P*P}function l(y,I){for(var z=0;z<I.length;++z)if(!u(y,I[z]))return!1;return!0}function c(y){return new a(null,y.x,y.y,y.r)}function f(y,I){var z=y.x,T=y.y,P=y.r,O=I.x,R=I.y,V=I.r,Q=O-z,W=R-T,L=V-P,N=Math.sqrt(Q*Q+W*W);return new a(null,(z+O+Q/N*L)/2,(T+R+W/N*L)/2,(N+P+V)/2)}function p(y,I,z){var T=y.x,P=y.y,O=y.r,R=I.x,V=I.y,Q=I.r,W=z.x,L=z.y,N=z.r,B=T-R,Y=T-W,U=P-V,F=P-L,K=Q-O,ee=N-O,ae=T*T+P*P-O*O,se=ae-R*R-V*V+Q*Q,le=ae-W*W-L*L+N*N,ie=Y*U-B*F,re=(U*le-F*se)/(ie*2)-T,he=(F*K-U*ee)/ie,ge=(Y*se-B*le)/(ie*2)-P,me=(B*ee-Y*K)/ie,Ie=he*he+me*me-1,pe=2*(O+re*he+ge*me),oe=re*re+ge*ge-O*O,Z=-(Ie?(pe+Math.sqrt(pe*pe-4*Ie*oe))/(2*Ie):oe/pe);return new a(null,T+re+he*Z,P+ge+me*Z,Z)}function v(y){switch(y.length){case 1:return c(y[0]);case 2:return f(y[0],y[1]);case 3:return p(y[0],y[1],y[2]);default:throw new Error("graphology-layout/circlepack: Invalid basis length "+y.length)}}function b(y,I){var z,T;if(l(I,y))return[I];for(z=0;z<y.length;++z)if(s(I,y[z])&&l(f(y[z],I),y))return[y[z],I];for(z=0;z<y.length-1;++z)for(T=z+1;T<y.length;++T)if(s(f(y[z],y[T]),I)&&s(f(y[z],I),y[T])&&s(f(y[T],I),y[z])&&l(p(y[z],y[T],I),y))return[y[z],y[T],I];throw new Error("graphology-layout/circlepack: extendBasis failure !")}function E(y){var I=y.wrappedCircle,z=y.next.wrappedCircle,T=I.r+z.r,P=(I.x*z.r+z.x*I.r)/T,O=(I.y*z.r+z.y*I.r)/T;return P*P+O*O}function S(y,I){var z=0,T=y.slice(),P=y.length,O=[],R,V;for(I(T);z<P;)R=T[z],V&&u(V,R)?++z:(O=b(O,R),V=v(O),z=0);return V}function A(y,I,z){var T=y.x-I.x,P,O,R=y.y-I.y,V,Q,W=T*T+R*R;W?(O=I.r+z.r,O*=O,Q=y.r+z.r,Q*=Q,O>Q?(P=(W+Q-O)/(2*W),V=Math.sqrt(Math.max(0,Q/W-P*P)),z.x=y.x-P*T-V*R,z.y=y.y-P*R+V*T):(P=(W+O-Q)/(2*W),V=Math.sqrt(Math.max(0,O/W-P*P)),z.x=I.x+P*T-V*R,z.y=I.y+P*R+V*T)):(z.x=I.x+z.r,z.y=I.y)}function _(y,I){var z=y.r+I.r-1e-6,T=I.x-y.x,P=I.y-y.y;return z>0&&z*z>T*T+P*P}function w(y,I){var z=y.length;if(z===0)return 0;var T,P,O,R,V,Q,W,L,N,B;if(T=y[0],T.x=0,T.y=0,z<=1)return T.r;if(P=y[1],T.x=-P.r,P.x=T.r,P.y=0,z<=2)return T.r+P.r;O=y[2],A(P,T,O),T=new a(null,null,null,null,T),P=new a(null,null,null,null,P),O=new a(null,null,null,null,O),T.next=O.previous=P,P.next=T.previous=O,O.next=P.previous=T;e:for(Q=3;Q<z;++Q){O=y[Q],A(T.wrappedCircle,P.wrappedCircle,O),O=new a(null,null,null,null,O),W=P.next,L=T.previous,N=P.wrappedCircle.r,B=T.wrappedCircle.r;do if(N<=B){if(_(W.wrappedCircle,O.wrappedCircle)){P=W,T.next=P,P.previous=T,--Q;continue e}N+=W.wrappedCircle.r,W=W.next}else{if(_(L.wrappedCircle,O.wrappedCircle)){T=L,T.next=P,P.previous=T,--Q;continue e}B+=L.wrappedCircle.r,L=L.previous}while(W!==L.next);for(O.previous=T,O.next=P,T.next=P.previous=P=O,R=E(T);(O=O.next)!==P;)(V=E(O))<R&&(T=O,R=V);P=T.next}T=[P.wrappedCircle],O=P;for(var Y=1e4;(O=O.next)!==P&&--Y!==0;)T.push(O.wrappedCircle);for(O=S(T,I),Q=0;Q<z;++Q)T=y[Q],T.x-=O.x,T.y-=O.y;return O.r}function k(y,I){var z=0;if(y.hasChildren()){for(var T in y.children){var P=y.children[T];P.hasChildren()&&(P.r=k(P,I))}z=w(Object.values(y.children),I)}return z}function m(y,I){k(y,I);for(var z in y.children){var T=y.children[z];T.applyPositionToChildren()}}function C(y,I,z){if(!e(I))throw new Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");z=n(z,r);var T={},P={},O=I.nodes(),R=z.center,V=z.hierarchyAttributes,Q=t.createShuffleInPlace(z.rng),W=z.scale,L=new a;I.forEachNode(function(K,ee){var ae=ee.size?ee.size:1,se=new a(K,null,null,ae),le=L;V.forEach(function(ie){var re=ee[ie];le=le.getChild(re)}),le.addChild(K,se)}),m(L,Q),o(I,L,T);var N=O.length,B,Y,U;for(U=0;U<N;U++){var F=O[U];B=R+W*T[F].x,Y=R+W*T[F].y,P[F]={x:B,y:Y},y&&(I.setNodeAttribute(F,z.attributes.x,B),I.setNodeAttribute(F,z.attributes.y,Y))}return P}var $=C.bind(null,!1);return $.assign=C.bind(null,!0),Na=$,Na}var Ra,pc;function Ab(){if(pc)return Ra;pc=1;var n=Be(),e=we(),t={dimensions:["x","y"],center:.5,scale:1};function r(o,s,u){if(!e(s))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");u=n(u,t);var l=u.dimensions;if(!Array.isArray(l)||l.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var c=u.center,f=u.scale,p=Math.PI*2,v=(c-.5)*f,b=s.order,E=l[0],S=l[1];function A(k,m){return m[E]=f*Math.cos(k*p/b)+v,m[S]=f*Math.sin(k*p/b)+v,m}var _=0;if(!o){var w={};return s.forEachNode(function(k){w[k]=A(_++,{})}),w}s.updateEachNodeAttributes(function(k,m){return A(_++,m),m},{attributes:l})}var a=r.bind(null,!1);return a.assign=r.bind(null,!0),Ra=a,Ra}var $a,gc;function _b(){if(gc)return $a;gc=1;var n=Be(),e=we(),t={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function r(o,s,u){if(!e(s))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");u=n(u,t);var l=u.dimensions;if(!Array.isArray(l)||l.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var c=l.length,f=u.center,p=u.rng,v=u.scale,b=(f-.5)*v;function E(A){for(var _=0;_<c;_++)A[l[_]]=p()*v+b;return A}if(!o){var S={};return s.forEachNode(function(A){S[A]=E({})}),S}s.updateEachNodeAttributes(function(A,_){return E(_),_},{attributes:l})}var a=r.bind(null,!1);return a.assign=r.bind(null,!0),$a=a,$a}var Pa,vc;function kb(){if(vc)return Pa;vc=1;var n=Be(),e=we(),t=Math.PI/180,r={dimensions:["x","y"],centeredOnZero:!1,degrees:!1};function a(s,u,l,c){if(!e(u))throw new Error("graphology-layout/rotation: the given graph is not a valid graphology instance.");c=n(c,r),c.degrees&&(l*=t);var f=c.dimensions;if(!Array.isArray(f)||f.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");if(u.order===0)return s?void 0:{};var p=f[0],v=f[1],b=0,E=0;if(!c.centeredOnZero){var S=1/0,A=-1/0,_=1/0,w=-1/0;u.forEachNode(function(y,I){var z=I[p],T=I[v];z<S&&(S=z),z>A&&(A=z),T<_&&(_=T),T>w&&(w=T)}),b=(S+A)/2,E=(_+w)/2}var k=Math.cos(l),m=Math.sin(l);function C(y){var I=y[p],z=y[v];return y[p]=b+(I-b)*k-(z-E)*m,y[v]=E+(I-b)*m+(z-E)*k,y}if(!s){var $={};return u.forEachNode(function(y,I){var z={};z[p]=I[p],z[v]=I[v],$[y]=C(z)}),$}u.updateEachNodeAttributes(function(y,I){return C(I),I},{attributes:f})}var o=a.bind(null,!1);return o.assign=a.bind(null,!0),Pa=o,Pa}var yc;function Pf(){return yc||(yc=1,Ir.circlepack=Sb(),Ir.circular=Ab(),Ir.random=_b(),Ir.rotation=kb()),Ir}var Ga,mc;function Gf(){return mc||(mc=1,Ga=Pf()),Ga}var Oa,bc;function Db(){return bc||(bc=1,Oa=Pf()),Oa}var qa,wc;function Cb(){if(wc)return qa;wc=1;var n=0,e=1,t=2,r=3,a=4,o=5,s=6,u=7,l=8,c=9,f=0,p=1,v=2,b=0,E=1,S=2,A=3,_=4,w=5,k=6,m=7,C=8,$=3,y=10,I=3,z=9,T=10;return qa=function(O,R,V){var Q,W,L,N,B,Y,U,F,K,ee,ae=R.length,se=V.length,le=O.adjustSizes,ie=O.barnesHutTheta*O.barnesHutTheta,re,he,ge,me,Ie,pe,oe,Z=[];for(L=0;L<ae;L+=y)R[L+a]=R[L+t],R[L+o]=R[L+r],R[L+t]=0,R[L+r]=0;if(O.outboundAttractionDistribution){for(re=0,L=0;L<ae;L+=y)re+=R[L+s];re/=ae/y}if(O.barnesHutOptimize){var Se=1/0,Me=-1/0,xe=1/0,ve=-1/0,te,Re,Oe;for(L=0;L<ae;L+=y)Se=Math.min(Se,R[L+n]),Me=Math.max(Me,R[L+n]),xe=Math.min(xe,R[L+e]),ve=Math.max(ve,R[L+e]);var Pe=Me-Se,Fe=ve-xe;for(Pe>Fe?(xe-=(Pe-Fe)/2,ve=xe+Pe):(Se-=(Fe-Pe)/2,Me=Se+Fe),Z[0+b]=-1,Z[0+E]=(Se+Me)/2,Z[0+S]=(xe+ve)/2,Z[0+A]=Math.max(Me-Se,ve-xe),Z[0+_]=-1,Z[0+w]=-1,Z[0+k]=0,Z[0+m]=0,Z[0+C]=0,Q=1,L=0;L<ae;L+=y)for(W=0,Oe=$;;)if(Z[W+w]>=0){R[L+n]<Z[W+E]?R[L+e]<Z[W+S]?te=Z[W+w]:te=Z[W+w]+z:R[L+e]<Z[W+S]?te=Z[W+w]+z*2:te=Z[W+w]+z*3,Z[W+m]=(Z[W+m]*Z[W+k]+R[L+n]*R[L+s])/(Z[W+k]+R[L+s]),Z[W+C]=(Z[W+C]*Z[W+k]+R[L+e]*R[L+s])/(Z[W+k]+R[L+s]),Z[W+k]+=R[L+s],W=te;continue}else if(Z[W+b]<0){Z[W+b]=L;break}else{if(Z[W+w]=Q*z,F=Z[W+A]/2,K=Z[W+w],Z[K+b]=-1,Z[K+E]=Z[W+E]-F,Z[K+S]=Z[W+S]-F,Z[K+A]=F,Z[K+_]=K+z,Z[K+w]=-1,Z[K+k]=0,Z[K+m]=0,Z[K+C]=0,K+=z,Z[K+b]=-1,Z[K+E]=Z[W+E]-F,Z[K+S]=Z[W+S]+F,Z[K+A]=F,Z[K+_]=K+z,Z[K+w]=-1,Z[K+k]=0,Z[K+m]=0,Z[K+C]=0,K+=z,Z[K+b]=-1,Z[K+E]=Z[W+E]+F,Z[K+S]=Z[W+S]-F,Z[K+A]=F,Z[K+_]=K+z,Z[K+w]=-1,Z[K+k]=0,Z[K+m]=0,Z[K+C]=0,K+=z,Z[K+b]=-1,Z[K+E]=Z[W+E]+F,Z[K+S]=Z[W+S]+F,Z[K+A]=F,Z[K+_]=Z[W+_],Z[K+w]=-1,Z[K+k]=0,Z[K+m]=0,Z[K+C]=0,Q+=4,R[Z[W+b]+n]<Z[W+E]?R[Z[W+b]+e]<Z[W+S]?te=Z[W+w]:te=Z[W+w]+z:R[Z[W+b]+e]<Z[W+S]?te=Z[W+w]+z*2:te=Z[W+w]+z*3,Z[W+k]=R[Z[W+b]+s],Z[W+m]=R[Z[W+b]+n],Z[W+C]=R[Z[W+b]+e],Z[te+b]=Z[W+b],Z[W+b]=-1,R[L+n]<Z[W+E]?R[L+e]<Z[W+S]?Re=Z[W+w]:Re=Z[W+w]+z:R[L+e]<Z[W+S]?Re=Z[W+w]+z*2:Re=Z[W+w]+z*3,te===Re)if(Oe--){W=te;continue}else{Oe=$;break}Z[Re+b]=L;break}}if(O.barnesHutOptimize)for(he=O.scalingRatio,L=0;L<ae;L+=y)for(W=0;;)if(Z[W+w]>=0)if(pe=Math.pow(R[L+n]-Z[W+m],2)+Math.pow(R[L+e]-Z[W+C],2),ee=Z[W+A],4*ee*ee/pe<ie){if(ge=R[L+n]-Z[W+m],me=R[L+e]-Z[W+C],le===!0?pe>0?(oe=he*R[L+s]*Z[W+k]/pe,R[L+t]+=ge*oe,R[L+r]+=me*oe):pe<0&&(oe=-he*R[L+s]*Z[W+k]/Math.sqrt(pe),R[L+t]+=ge*oe,R[L+r]+=me*oe):pe>0&&(oe=he*R[L+s]*Z[W+k]/pe,R[L+t]+=ge*oe,R[L+r]+=me*oe),W=Z[W+_],W<0)break;continue}else{W=Z[W+w];continue}else{if(Y=Z[W+b],Y>=0&&Y!==L&&(ge=R[L+n]-R[Y+n],me=R[L+e]-R[Y+e],pe=ge*ge+me*me,le===!0?pe>0?(oe=he*R[L+s]*R[Y+s]/pe,R[L+t]+=ge*oe,R[L+r]+=me*oe):pe<0&&(oe=-he*R[L+s]*R[Y+s]/Math.sqrt(pe),R[L+t]+=ge*oe,R[L+r]+=me*oe):pe>0&&(oe=he*R[L+s]*R[Y+s]/pe,R[L+t]+=ge*oe,R[L+r]+=me*oe)),W=Z[W+_],W<0)break;continue}else for(he=O.scalingRatio,N=0;N<ae;N+=y)for(B=0;B<N;B+=y)ge=R[N+n]-R[B+n],me=R[N+e]-R[B+e],le===!0?(pe=Math.sqrt(ge*ge+me*me)-R[N+l]-R[B+l],pe>0?(oe=he*R[N+s]*R[B+s]/pe/pe,R[N+t]+=ge*oe,R[N+r]+=me*oe,R[B+t]-=ge*oe,R[B+r]-=me*oe):pe<0&&(oe=100*he*R[N+s]*R[B+s],R[N+t]+=ge*oe,R[N+r]+=me*oe,R[B+t]-=ge*oe,R[B+r]-=me*oe)):(pe=Math.sqrt(ge*ge+me*me),pe>0&&(oe=he*R[N+s]*R[B+s]/pe/pe,R[N+t]+=ge*oe,R[N+r]+=me*oe,R[B+t]-=ge*oe,R[B+r]-=me*oe));for(K=O.gravity/O.scalingRatio,he=O.scalingRatio,L=0;L<ae;L+=y)oe=0,ge=R[L+n],me=R[L+e],pe=Math.sqrt(Math.pow(ge,2)+Math.pow(me,2)),O.strongGravityMode?pe>0&&(oe=he*R[L+s]*K):pe>0&&(oe=he*R[L+s]*K/pe),R[L+t]-=ge*oe,R[L+r]-=me*oe;for(he=1*(O.outboundAttractionDistribution?re:1),U=0;U<se;U+=I)N=V[U+f],B=V[U+p],F=V[U+v],Ie=Math.pow(F,O.edgeWeightInfluence),ge=R[N+n]-R[B+n],me=R[N+e]-R[B+e],le===!0?(pe=Math.sqrt(ge*ge+me*me)-R[N+l]-R[B+l],O.linLogMode?O.outboundAttractionDistribution?pe>0&&(oe=-he*Ie*Math.log(1+pe)/pe/R[N+s]):pe>0&&(oe=-he*Ie*Math.log(1+pe)/pe):O.outboundAttractionDistribution?pe>0&&(oe=-he*Ie/R[N+s]):pe>0&&(oe=-he*Ie)):(pe=Math.sqrt(Math.pow(ge,2)+Math.pow(me,2)),O.linLogMode?O.outboundAttractionDistribution?pe>0&&(oe=-he*Ie*Math.log(1+pe)/pe/R[N+s]):pe>0&&(oe=-he*Ie*Math.log(1+pe)/pe):O.outboundAttractionDistribution?(pe=1,oe=-he*Ie/R[N+s]):(pe=1,oe=-he*Ie)),pe>0&&(R[N+t]+=ge*oe,R[N+r]+=me*oe,R[B+t]-=ge*oe,R[B+r]-=me*oe);var Ne,Ge,We,He,Xe,Ye;if(le===!0)for(L=0;L<ae;L+=y)R[L+c]!==1&&(Ne=Math.sqrt(Math.pow(R[L+t],2)+Math.pow(R[L+r],2)),Ne>T&&(R[L+t]=R[L+t]*T/Ne,R[L+r]=R[L+r]*T/Ne),Ge=R[L+s]*Math.sqrt((R[L+a]-R[L+t])*(R[L+a]-R[L+t])+(R[L+o]-R[L+r])*(R[L+o]-R[L+r])),We=Math.sqrt((R[L+a]+R[L+t])*(R[L+a]+R[L+t])+(R[L+o]+R[L+r])*(R[L+o]+R[L+r]))/2,He=.1*Math.log(1+We)/(1+Math.sqrt(Ge)),Xe=R[L+n]+R[L+t]*(He/O.slowDown),R[L+n]=Xe,Ye=R[L+e]+R[L+r]*(He/O.slowDown),R[L+e]=Ye);else for(L=0;L<ae;L+=y)R[L+c]!==1&&(Ge=R[L+s]*Math.sqrt((R[L+a]-R[L+t])*(R[L+a]-R[L+t])+(R[L+o]-R[L+r])*(R[L+o]-R[L+r])),We=Math.sqrt((R[L+a]+R[L+t])*(R[L+a]+R[L+t])+(R[L+o]+R[L+r])*(R[L+o]+R[L+r]))/2,He=R[L+u]*Math.log(1+We)/(1+Math.sqrt(Ge)),R[L+u]=Math.min(1,Math.sqrt(He*(Math.pow(R[L+t],2)+Math.pow(R[L+r],2))/(1+Math.sqrt(Ge)))),Xe=R[L+n]+R[L+t]*(He/O.slowDown),R[L+n]=Xe,Ye=R[L+e]+R[L+r]*(He/O.slowDown),R[L+e]=Ye);return{}},qa}var Kt={},Ec;function Of(){if(Ec)return Kt;Ec=1;var n=10,e=3;return Kt.assign=function(t){t=t||{};var r=Array.prototype.slice.call(arguments).slice(1),a,o,s;for(a=0,s=r.length;a<s;a++)if(r[a])for(o in r[a])t[o]=r[a][o];return t},Kt.validateSettings=function(t){return"linLogMode"in t&&typeof t.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in t&&typeof t.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in t&&typeof t.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in t&&typeof t.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in t&&!(typeof t.scalingRatio=="number"&&t.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in t&&typeof t.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in t&&!(typeof t.gravity=="number"&&t.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in t&&!(typeof t.slowDown=="number"||t.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in t&&typeof t.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in t&&!(typeof t.barnesHutTheta=="number"&&t.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},Kt.graphToByteArrays=function(t,r){var a=t.order,o=t.size,s={},u,l=new Float32Array(a*n),c=new Float32Array(o*e);return u=0,t.forEachNode(function(f,p){s[f]=u,l[u]=p.x,l[u+1]=p.y,l[u+2]=0,l[u+3]=0,l[u+4]=0,l[u+5]=0,l[u+6]=1,l[u+7]=1,l[u+8]=p.size||1,l[u+9]=p.fixed?1:0,u+=n}),u=0,t.forEachEdge(function(f,p,v,b,E,S,A){var _=s[v],w=s[b],k=r(f,p,v,b,E,S,A);l[_+6]+=k,l[w+6]+=k,c[u]=_,c[u+1]=w,c[u+2]=k,u+=e}),{nodes:l,edges:c}},Kt.assignLayoutChanges=function(t,r,a){var o=0;t.updateEachNodeAttributes(function(s,u){return u.x=r[o],u.y=r[o+1],o+=n,a?a(s,u):u})},Kt.readGraphPositions=function(t,r){var a=0;t.forEachNode(function(o,s){r[a]=s.x,r[a+1]=s.y,a+=n})},Kt.collectLayoutChanges=function(t,r,a){for(var o=t.nodes(),s={},u=0,l=0,c=r.length;u<c;u+=n){if(a){var f=Object.assign({},t.getNodeAttributes(o[l]));f.x=r[u],f.y=r[u+1],f=a(o[l],f),s[o[l]]={x:f.x,y:f.y}}else s[o[l]]={x:r[u],y:r[u+1]};l++}return s},Kt.createWorker=function(r){var a=window.URL||window.webkitURL,o=r.toString(),s=a.createObjectURL(new Blob(["("+o+").call(this);"],{type:"text/javascript"})),u=new Worker(s);return a.revokeObjectURL(s),u},Kt}var Fa,xc;function qf(){return xc||(xc=1,Fa={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),Fa}var Wa,Sc;function Ff(){if(Sc)return Wa;Sc=1;var n=we(),e=ft().createEdgeWeightGetter,t=Cb(),r=Of(),a=qf();function o(l,c,f){if(!n(c))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof f=="number"&&(f={iterations:f});var p=f.iterations;if(typeof p!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(p<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var v=e("getEdgeWeight"in f?f.getEdgeWeight:"weight").fromEntry,b=typeof f.outputReducer=="function"?f.outputReducer:null,E=r.assign({},a,f.settings),S=r.validateSettings(E);if(S)throw new Error("graphology-layout-forceatlas2: "+S.message);var A=r.graphToByteArrays(c,v),_;for(_=0;_<p;_++)t(E,A.nodes,A.edges);if(l){r.assignLayoutChanges(c,A.nodes,b);return}return r.collectLayoutChanges(c,A.nodes)}function s(l){var c=typeof l=="number"?l:l.order;return{barnesHutOptimize:c>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(c)}}var u=o.bind(null,!1);return u.assign=o.bind(null,!0),u.inferSettings=s,Wa=u,Wa}var Ua,Ac;function Ib(){return Ac||(Ac=1,Ua=Ff()),Ua}var ja,_c;function Lb(){if(_c)return ja;_c=1;var n=0,e=1,t=2,r=3;function a(s,u){return s+"§"+u}function o(){return .01*(.5-Math.random())}return ja=function(u,l){var c=u.margin,f=u.ratio,p=u.expansion,v=u.gridSize,b=u.speed,E,S,A,_,w,k,m=!0,C=l.length,$=C/r|0,y=new Float32Array($),I=new Float32Array($),z=1/0,T=1/0,P=-1/0,O=-1/0;for(E=0;E<C;E+=r)A=l[E+n],_=l[E+e],k=l[E+t]*f+c,z=Math.min(z,A-k),P=Math.max(P,A+k),T=Math.min(T,_-k),O=Math.max(O,_+k);var R=P-z,V=O-T,Q=(z+P)/2,W=(T+O)/2;z=Q-p*R/2,P=Q+p*R/2,T=W-p*V/2,O=W+p*V/2;var L=new Array(v*v),N=L.length,B;for(B=0;B<N;B++)L[B]=[];var Y,U,F,K,ee,ae,se,le,ie,re;for(E=0;E<C;E+=r)for(A=l[E+n],_=l[E+e],k=l[E+t]*f+c,Y=A-k,U=A+k,F=_-k,K=_+k,ee=Math.floor(v*(Y-z)/(P-z)),ae=Math.floor(v*(U-z)/(P-z)),se=Math.floor(v*(F-T)/(O-T)),le=Math.floor(v*(K-T)/(O-T)),ie=ee;ie<=ae;ie++)for(re=se;re<=le;re++)L[ie*v+re].push(E);var he,ge=new Set,me,Ie,pe,oe,Z,Se,Me,xe,ve,te,Re,Oe,Pe;for(B=0;B<N;B++)for(he=L[B],E=0,w=he.length;E<w;E++)for(me=he[E],pe=l[me+n],Z=l[me+e],Me=l[me+t],S=E+1;S<w;S++)Ie=he[S],ve=a(me,Ie),!(N>1&&ge.has(ve))&&(N>1&&ge.add(ve),oe=l[Ie+n],Se=l[Ie+e],xe=l[Ie+t],te=oe-pe,Re=Se-Z,Oe=Math.sqrt(te*te+Re*Re),Pe=Oe<Me*f+c+(xe*f+c),Pe&&(m=!1,Ie=Ie/r|0,Oe>0?(y[Ie]+=te/Oe*(1+Me),I[Ie]+=Re/Oe*(1+Me)):(y[Ie]+=R*o(),I[Ie]+=V*o())));for(E=0,S=0;E<C;E+=r,S++)l[E+n]+=y[S]*.1*b,l[E+e]+=I[S]*.1*b;return{converged:m}},ja}var gr={},kc;function Wf(){if(kc)return gr;kc=1;var n=3;return gr.validateSettings=function(e){return"gridSize"in e&&typeof e.gridSize!="number"||e.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in e&&typeof e.margin!="number"||e.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in e&&typeof e.expansion!="number"||e.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in e&&typeof e.ratio!="number"||e.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in e&&typeof e.speed!="number"||e.speed<=0?{message:"the `speed` setting should be a positive number."}:null},gr.graphToByteArray=function(e,t){var r=e.order,a=new Float32Array(r*n),o=0;return e.forEachNode(function(s,u){typeof t=="function"&&(u=t(s,u)),a[o]=u.x,a[o+1]=u.y,a[o+2]=u.size||1,o+=n}),a},gr.assignLayoutChanges=function(e,t,r){var a=0;e.forEachNode(function(o){var s={x:t[a],y:t[a+1]};typeof r=="function"&&(s=r(o,s)),e.mergeNodeAttributes(o,s),a+=n})},gr.collectLayoutChanges=function(e,t,r){var a={},o=0;return e.forEachNode(function(s){var u={x:t[o],y:t[o+1]};typeof r=="function"&&(u=r(s,u)),a[s]=u,o+=n}),a},gr.createWorker=function(t){var r=window.URL||window.webkitURL,a=t.toString(),o=r.createObjectURL(new Blob(["("+a+").call(this);"],{type:"text/javascript"})),s=new Worker(o);return r.revokeObjectURL(o),s},gr}var Ba,Dc;function Uf(){return Dc||(Dc=1,Ba={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3}),Ba}var Ha,Cc;function jf(){if(Cc)return Ha;Cc=1;var n=we(),e=Lb(),t=Wf(),r=Uf(),a=500;function o(u,l,c){if(!n(l))throw new Error("graphology-layout-noverlap: the given graph is not a valid graphology instance.");typeof c=="number"?c={maxIterations:c}:c=c||{};var f=c.maxIterations||a;if(typeof f!="number"||f<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");var p=Object.assign({},r,c.settings),v=t.validateSettings(p);if(v)throw new Error("graphology-layout-noverlap: "+v.message);var b=t.graphToByteArray(l,c.inputReducer),E=!1,S;for(S=0;S<f&&!E;S++)E=e(p,b).converged;if(u){t.assignLayoutChanges(l,b,c.outputReducer);return}return t.collectLayoutChanges(l,b,c.outputReducer)}var s=o.bind(null,!1);return s.assign=o.bind(null,!0),Ha=s,Ha}var Ka,Ic;function zb(){return Ic||(Ic=1,Ka=jf()),Ka}var vr={},Nt={},en={},Lc;function Tb(){if(Lc)return en;Lc=1;var n=we();function e(o,s,u,l){var c=s+"Centrality";if(!n(u))throw new Error("graphology-centrality/"+c+": the given graph is not a valid graphology instance.");if(s!=="degree"&&u.type==="undirected")throw new Error("graphology-centrality/"+c+": cannot compute "+s+" centrality on an undirected graph.");l=l||{};var f=l.nodeCentralityAttribute||c,p=u.order-1,v=u[s].bind(u);if(o){u.updateEachNodeAttributes(function(E,S){return S[f]=v(E)/p,S},{attributes:[f]});return}var b={};return u.forEachNode(function(E){b[E]=v(E)/p}),b}var t=e.bind(null,!1,"degree"),r=e.bind(null,!1,"inDegree"),a=e.bind(null,!1,"outDegree");return t.assign=e.bind(null,!0,"degree"),r.assign=e.bind(null,!0,"inDegree"),a.assign=e.bind(null,!0,"outDegree"),en.degreeCentrality=t,en.inDegreeCentrality=r,en.outDegreeCentrality=a,en}var Un={},Lr={},jn={},zc;function Bf(){return zc||(zc=1,jn.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",jn.SYMBOL_SUPPORT=typeof Symbol<"u"),jn}var Xa,Tc;function eu(){if(Tc)return Xa;Tc=1;var n=Bf(),e=n.ARRAY_BUFFER_SUPPORT,t=n.SYMBOL_SUPPORT;return Xa=function(a,o){var s,u,l,c,f;if(!a)throw new Error("obliterator/forEach: invalid iterable.");if(typeof o!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(a)||e&&ArrayBuffer.isView(a)||typeof a=="string"||a.toString()==="[object Arguments]"){for(l=0,c=a.length;l<c;l++)o(a[l],l);return}if(typeof a.forEach=="function"){a.forEach(o);return}if(t&&Symbol.iterator in a&&typeof a.next!="function"&&(a=a[Symbol.iterator]()),typeof a.next=="function"){for(s=a,l=0;f=s.next(),f.done!==!0;)o(f.value,l),l++;return}for(u in a)a.hasOwnProperty(u)&&o(a[u],u)},Xa}var Mc;function Ai(){if(Mc)return Lr;Mc=1;var n=eu(),e=lr();function t(s){return Array.isArray(s)||e.isTypedArray(s)}function r(s){if(typeof s.length=="number")return s.length;if(typeof s.size=="number")return s.size}function a(s){var u=r(s),l=typeof u=="number"?new Array(u):[],c=0;return n(s,function(f){l[c++]=f}),l}function o(s){var u=r(s),l=typeof u=="number"?e.getPointerArray(u):Array,c=typeof u=="number"?new Array(u):[],f=typeof u=="number"?new l(u):[],p=0;return n(s,function(v){c[p]=v,f[p]=p++}),[c,f]}return Lr.isArrayLike=t,Lr.guessLength=r,Lr.toArray=a,Lr.toArrayWithIndices=o,Lr}var Ya,Nc;function _i(){if(Nc)return Ya;Nc=1;var n=Ai(),e=Jt();function t(r,a){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof a!="number"||a<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=r,this.capacity=a,this.items=new r(this.capacity),this.clear()}return t.prototype.clear=function(){this.start=0,this.size=0},t.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var a=this.start+this.size;return a>=this.capacity&&(a-=this.capacity),this.items[a]=r,++this.size},t.prototype.unshift=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var a=this.start-1;return this.start===0&&(a=this.capacity-1),this.items[a]=r,this.start=a,++this.size},t.prototype.pop=function(){if(this.size!==0){this.size--;var r=this.start+this.size;return r>=this.capacity&&(r-=this.capacity),this.items[r]}},t.prototype.shift=function(){if(this.size!==0){var r=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[r]}},t.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]},t.prototype.peekLast=function(){if(this.size!==0){var r=this.start+this.size-1;return r>=this.capacity&&(r-=this.capacity),this.items[r]}},t.prototype.get=function(r){if(!(this.size===0||r>=this.capacity))return r=this.start+r,r>=this.capacity&&(r-=this.capacity),this.items[r]},t.prototype.forEach=function(r,a){a=arguments.length>1?a:this;for(var o=this.capacity,s=this.size,u=this.start,l=0;l<s;)r.call(a,this.items[u],l,this),u++,l++,u===o&&(u=0)},t.prototype.toArray=function(){var r=this.start+this.size;if(r<this.capacity)return this.items.slice(this.start,r);for(var a=new this.ArrayClass(this.size),o=this.capacity,s=this.size,u=this.start,l=0;l<s;)a[l]=this.items[u],u++,l++,u===o&&(u=0);return a},t.prototype.values=function(){var r=this.items,a=this.capacity,o=this.size,s=this.start,u=0;return new e(function(){if(u>=o)return{done:!0};var l=r[s];return s++,u++,s===a&&(s=0),{value:l,done:!1}})},t.prototype.entries=function(){var r=this.items,a=this.capacity,o=this.size,s=this.start,u=0;return new e(function(){if(u>=o)return{done:!0};var l=r[s];return s++,s===a&&(s=0),{value:[u++,l],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(r,a,o){if(arguments.length<3&&(o=n.guessLength(r),typeof o!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var s=new t(a,o);if(n.isArrayLike(r)){var u,l;for(u=0,l=r.length;u<l;u++)s.items[u]=r[u];return s.size=l,s}return n.forEach(r,function(c){s.push(c)}),s},Ya=t,Ya}var Va,Rc;function Mb(){if(Rc)return Va;Rc=1;var n=Jt(),e=Ai();function t(r,a){if(arguments.length<2)throw new Error("mnemonist/fixed-stack: expecting an Array class and a capacity.");if(typeof a!="number"||a<=0)throw new Error("mnemonist/fixed-stack: `capacity` should be a positive number.");this.capacity=a,this.ArrayClass=r,this.items=new this.ArrayClass(this.capacity),this.clear()}return t.prototype.clear=function(){this.size=0},t.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-stack.push: stack capacity ("+this.capacity+") exceeded!");return this.items[this.size++]=r,this.size},t.prototype.pop=function(){if(this.size!==0)return this.items[--this.size]},t.prototype.peek=function(){return this.items[this.size-1]},t.prototype.forEach=function(r,a){a=arguments.length>1?a:this;for(var o=0,s=this.items.length;o<s;o++)r.call(a,this.items[s-o-1],o,this)},t.prototype.toArray=function(){for(var r=new this.ArrayClass(this.size),a=this.size-1,o=this.size;o--;)r[o]=this.items[a-o];return r},t.prototype.values=function(){var r=this.items,a=this.size,o=0;return new n(function(){if(o>=a)return{done:!0};var s=r[a-o-1];return o++,{value:s,done:!1}})},t.prototype.entries=function(){var r=this.items,a=this.size,o=0;return new n(function(){if(o>=a)return{done:!0};var s=r[a-o-1];return{value:[o++,s],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.toString=function(){return this.toArray().join(",")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(r,a,o){if(arguments.length<3&&(o=e.guessLength(r),typeof o!="number"))throw new Error("mnemonist/fixed-stack.from: could not guess iterable length. Please provide desired capacity as last argument.");var s=new t(a,o);if(e.isArrayLike(r)){var u,l;for(u=0,l=r.length;u<l;u++)s.items[u]=r[u];return s.size=l,s}return e.forEach(r,function(c){s.push(c)}),s},Va=t,Va}var zr={},$c;function tu(){if($c)return zr;$c=1;var n=function(a,o){return a<o?-1:a>o?1:0},e=function(a,o){return a<o?1:a>o?-1:0};function t(a){return function(o,s){return a(s,o)}}function r(a){return a===2?function(o,s){return o[0]<s[0]?-1:o[0]>s[0]?1:o[1]<s[1]?-1:o[1]>s[1]?1:0}:function(o,s){for(var u=0;u<a;){if(o[u]<s[u])return-1;if(o[u]>s[u])return 1;u++}return 0}}return zr.DEFAULT_COMPARATOR=n,zr.DEFAULT_REVERSE_COMPARATOR=e,zr.reverseComparator=t,zr.createTupleComparator=r,zr}var Qa,Pc;function ru(){if(Pc)return Qa;Pc=1;var n=eu(),e=tu(),t=Ai(),r=e.DEFAULT_COMPARATOR,a=e.reverseComparator;function o(_,w,k,m){for(var C=w[m],$,y;m>k;){if($=m-1>>1,y=w[$],_(C,y)<0){w[m]=y,m=$;continue}break}w[m]=C}function s(_,w,k){for(var m=w.length,C=k,$=w[k],y=2*k+1,I;y<m;)I=y+1,I<m&&_(w[y],w[I])>=0&&(y=I),w[k]=w[y],k=y,y=2*k+1;w[k]=$,o(_,w,C,k)}function u(_,w,k){w.push(k),o(_,w,0,w.length-1)}function l(_,w){var k=w.pop();if(w.length!==0){var m=w[0];return w[0]=k,s(_,w,0),m}return k}function c(_,w,k){if(w.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var m=w[0];return w[0]=k,s(_,w,0),m}function f(_,w,k){var m;return w.length!==0&&_(w[0],k)<0&&(m=w[0],w[0]=k,k=m,s(_,w,0)),k}function p(_,w){for(var k=w.length,m=k>>1,C=m;--C>=0;)s(_,w,C)}function v(_,w){for(var k=w.length,m=0,C=new Array(k);m<k;)C[m++]=l(_,w);return C}function b(_,w,k){arguments.length===2&&(k=w,w=_,_=r);var m=a(_),C,$,y,I=1/0,z;if(w===1){if(t.isArrayLike(k)){for(C=0,$=k.length;C<$;C++)y=k[C],(I===1/0||_(y,I)<0)&&(I=y);return z=new k.constructor(1),z[0]=I,z}return n(k,function(P){(I===1/0||_(P,I)<0)&&(I=P)}),[I]}if(t.isArrayLike(k)){if(w>=k.length)return k.slice().sort(_);for(z=k.slice(0,w),p(m,z),C=w,$=k.length;C<$;C++)m(k[C],z[0])>0&&c(m,z,k[C]);return z.sort(_)}var T=t.guessLength(k);return T!==null&&T<w&&(w=T),z=new Array(w),C=0,n(k,function(P){C<w?z[C]=P:(C===w&&p(m,z),m(P,z[0])>0&&c(m,z,P)),C++}),z.length>C&&(z.length=C),z.sort(_)}function E(_,w,k){arguments.length===2&&(k=w,w=_,_=r);var m=a(_),C,$,y,I=-1/0,z;if(w===1){if(t.isArrayLike(k)){for(C=0,$=k.length;C<$;C++)y=k[C],(I===-1/0||_(y,I)>0)&&(I=y);return z=new k.constructor(1),z[0]=I,z}return n(k,function(P){(I===-1/0||_(P,I)>0)&&(I=P)}),[I]}if(t.isArrayLike(k)){if(w>=k.length)return k.slice().sort(m);for(z=k.slice(0,w),p(_,z),C=w,$=k.length;C<$;C++)_(k[C],z[0])>0&&c(_,z,k[C]);return z.sort(m)}var T=t.guessLength(k);return T!==null&&T<w&&(w=T),z=new Array(w),C=0,n(k,function(P){C<w?z[C]=P:(C===w&&p(_,z),_(P,z[0])>0&&c(_,z,P)),C++}),z.length>C&&(z.length=C),z.sort(m)}function S(_){if(this.clear(),this.comparator=_||r,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}S.prototype.clear=function(){this.items=[],this.size=0},S.prototype.push=function(_){return u(this.comparator,this.items,_),++this.size},S.prototype.peek=function(){return this.items[0]},S.prototype.pop=function(){return this.size!==0&&this.size--,l(this.comparator,this.items)},S.prototype.replace=function(_){return c(this.comparator,this.items,_)},S.prototype.pushpop=function(_){return f(this.comparator,this.items,_)},S.prototype.consume=function(){return this.size=0,v(this.comparator,this.items)},S.prototype.toArray=function(){return v(this.comparator,this.items.slice())},S.prototype.inspect=function(){var _=this.toArray();return Object.defineProperty(_,"constructor",{value:S,enumerable:!1}),_},typeof Symbol<"u"&&(S.prototype[Symbol.for("nodejs.util.inspect.custom")]=S.prototype.inspect);function A(_){if(this.clear(),this.comparator=_||r,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=a(this.comparator)}return A.prototype=S.prototype,S.from=function(_,w){var k=new S(w),m;return t.isArrayLike(_)?m=_.slice():m=t.toArray(_),p(k.comparator,m),k.items=m,k.size=m.length,k},A.from=function(_,w){var k=new A(w),m;return t.isArrayLike(_)?m=_.slice():m=t.toArray(_),p(k.comparator,m),k.items=m,k.size=m.length,k},S.siftUp=s,S.siftDown=o,S.push=u,S.pop=l,S.replace=c,S.pushpop=f,S.heapify=p,S.consume=v,S.nsmallest=b,S.nlargest=E,S.MinHeap=S,S.MaxHeap=A,Qa=S,Qa}var Bn={},Gc;function Sr(){if(Gc)return Bn;Gc=1;var n=lr(),e=ft().createEdgeWeightGetter;function t(o,s){return o==="outbound"||o==="inbound"?s.directedSize+s.undirectedSize*2:o==="in"||o==="out"||o==="directed"?s.directedSize:s.undirectedSize*2}function r(o,s){s=s||"outbound";var u=o[s+"Neighbors"].bind(o),l=t(s,o),c=n.getPointerArray(l),f=n.getPointerArray(o.order);this.graph=o,this.neighborhood=new f(l),this.starts=new c(o.order+1),this.nodes=o.nodes();var p={},v,b,E,S,A,_,w=0;for(v=0,b=o.order;v<b;v++)p[this.nodes[v]]=v;for(v=0,b=o.order;v<b;v++)for(A=this.nodes[v],_=u(A),this.starts[v]=w,E=0,S=_.length;E<S;E++)this.neighborhood[w++]=p[_[E]];this.starts[v]=l}r.prototype.bounds=function(o){return[this.starts[o],this.starts[o+1]]},r.prototype.project=function(){var o=this,s={};return o.nodes.forEach(function(u,l){s[u]=Array.from(o.neighborhood.slice(o.starts[l],o.starts[l+1])).map(function(c){return o.nodes[c]})}),s},r.prototype.collect=function(o){var s,u,l={};for(s=0,u=o.length;s<u;s++)l[this.nodes[s]]=o[s];return l},r.prototype.assign=function(o,s){var u=0;this.graph.updateEachNodeAttributes(function(l,c){return c[o]=s[u++],c},{attributes:[o]})},Bn.NeighborhoodIndex=r;function a(o,s,u){u=u||"outbound";var l=o[u+"Edges"].bind(o),c=t(u,o),f=n.getPointerArray(c),p=n.getPointerArray(o.order),v=e(s).fromMinimalEntry;this.graph=o,this.neighborhood=new p(c),this.weights=new Float64Array(c),this.outDegrees=new Float64Array(o.order),this.starts=new f(o.order+1),this.nodes=o.nodes();var b={},E,S,A,_,w,k,m,C,$,y=0;for(E=0,S=o.order;E<S;E++)b[this.nodes[E]]=E;for(E=0,S=o.order;E<S;E++)for(w=this.nodes[E],m=l(w),this.starts[E]=y,A=0,_=m.length;A<_;A++)C=m[A],k=o.opposite(w,C),$=v(C,o.getEdgeAttributes(C)),this.neighborhood[y]=b[k],this.weights[y++]=$,this.outDegrees[E]+=$;this.starts[E]=c}return a.prototype.bounds=r.prototype.bounds,a.prototype.project=r.prototype.project,a.prototype.collect=r.prototype.collect,a.prototype.assign=r.prototype.assign,Bn.WeightedNeighborhoodIndex=a,Bn}var Oc;function Hf(){if(Oc)return Un;Oc=1;var n=_i(),e=Mb(),t=ru(),r=lr(),a=Sr(),o=a.NeighborhoodIndex,s=a.WeightedNeighborhoodIndex;Un.createUnweightedIndexedBrandes=function(c){var f=new o(c),p=f.neighborhood,v=f.starts,b=c.order,E=new e(r.getPointerArray(b),b),S=new Uint32Array(b),A=new Array(b),_=new Int32Array(b),w=new n(Uint32Array,b),k=function(m){var C,$,y,I,z,T,P;for(T=0;T<b;T++)A[T]=[],S[T]=0,_[T]=-1;for(S[m]=1,_[m]=0,w.push(m);w.size!==0;)for(T=w.shift(),E.push(T),C=_[T],$=S[T],y=v[T],I=v[T+1],z=y;z<I;z++)P=p[z],_[P]===-1&&(w.push(P),_[P]=C+1),_[P]===C+1&&(S[P]+=$,A[P].push(T));return[E,A,S]};return k.index=f,k};function u(l,c){return l[0]>c[0]?1:l[0]<c[0]?-1:l[1]>c[1]?1:l[1]<c[1]?-1:l[2]>c[2]?1:l[2]<c[2]?-1:l[3]>c[3]?1:l[3]<c[3]?-1:0}return Un.createDijkstraIndexedBrandes=function(c,f){var p=new s(c,f||"weight"),v=p.neighborhood,b=p.weights,E=p.starts,S=c.order,A=new e(r.getPointerArray(S),S),_=new Uint32Array(S),w=new Array(S),k=new Float64Array(S),m=new Float64Array(S),C=new t(u),$=function(y){var I,z,T,P,O,R,V,Q,W,L=0;for(Q=0;Q<S;Q++)w[Q]=[],_[Q]=0,k[Q]=-1,m[Q]=-1;for(_[y]=1,m[y]=0,C.push([0,L++,y,y]);C.size!==0;)if(T=C.pop(),P=T[0],O=T[2],Q=T[3],k[Q]===-1)for(A.push(Q),k[Q]=P,_[Q]+=_[O],I=E[Q],z=E[Q+1],V=I;V<z;V++)W=v[V],R=P+b[V],k[W]===-1&&(m[W]===-1||R<m[W])?(m[W]=R,C.push([R,L++,Q,W]),_[W]=0,w[W]=[Q]):R===m[W]&&(_[W]+=_[Q],w[W].push(Q));return[A,w,_]};return $.index=p,$},Un}var Za,qc;function Nb(){if(qc)return Za;qc=1;var n=we(),e=Hf(),t=Be(),r=e.createUnweightedIndexedBrandes,a=e.createDijkstraIndexedBrandes,o={nodeCentralityAttribute:"betweennessCentrality",getEdgeWeight:"weight",normalized:!0};function s(l,c,f){if(!n(c))throw new Error("graphology-centrality/beetweenness-centrality: the given graph is not a valid graphology instance.");f=t(f,o);var p=f.nodeCentralityAttribute,v=f.normalized,b=f.getEdgeWeight?a(c,f.getEdgeWeight):r(c),E=c.order,S,A,_,w,k,m,C,$,y,I,z=new Float64Array(E),T=new Float64Array(E);for(m=0;m<E;m++){for(S=b(m),A=S[0],_=S[1],w=S[2],C=A.size;C--;)z[A.items[A.size-C]]=0;for(;A.size!==0;){for(I=A.pop(),k=(1+z[I])/w[I],C=0,$=_[I].length;C<$;C++)y=_[I][C],z[y]+=w[y]*k;I!==m&&(T[I]+=z[I])}}var P=null;if(v?P=E<=2?null:1/((E-1)*(E-2)):P=c.type==="undirected"?.5:null,P!==null)for(m=0;m<E;m++)T[m]*=P;return l?b.index.assign(p,T):b.index.collect(T)}var u=s.bind(null,!1);return u.assign=s.bind(null,!0),Za=u,Za}var Ja,Fc;function Kf(){if(Fc)return Ja;Fc=1;var n=Jt(),e=lr().getPointerArray;function t(r){var a=e(r);this.size=0,this.length=r,this.dense=new a(r),this.sparse=new a(r)}return t.prototype.clear=function(){this.size=0},t.prototype.has=function(r){var a=this.sparse[r];return a<this.size&&this.dense[a]===r},t.prototype.add=function(r){var a=this.sparse[r];return a<this.size&&this.dense[a]===r?this:(this.dense[this.size]=r,this.sparse[r]=this.size,this.size++,this)},t.prototype.delete=function(r){var a=this.sparse[r];return a>=this.size||this.dense[a]!==r?!1:(a=this.dense[this.size-1],this.dense[this.sparse[r]]=a,this.sparse[a]=this.sparse[r],this.size--,!0)},t.prototype.forEach=function(r,a){a=arguments.length>1?a:this;for(var o,s=0;s<this.size;s++)o=this.dense[s],r.call(a,o,o)},t.prototype.values=function(){var r=this.size,a=this.dense,o=0;return new n(function(){if(o<r){var s=a[o];return o++,{value:s}}return{done:!0}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.inspect=function(){for(var r=new Set,a=0;a<this.size;a++)r.add(this.dense[a]);return Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r.length=this.length,r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),Ja=t,Ja}var eo,Wc;function Rb(){if(Wc)return eo;Wc=1;var n=we(),e=Be(),t=_i(),r=Kf(),a=Sr().NeighborhoodIndex,o={nodeCentralityAttribute:"closenessCentrality",wassermanFaust:!1};function s(c){this.index=new a(c,"inbound"),this.queue=new t(Array,c.order),this.seen=new r(c.order)}s.prototype.fromNode=function(c){var f=this.index,p=this.queue,v=this.seen;v.clear(),p.clear(),v.add(c),p.push([c,0]);for(var b,E,S,A,_,w,k=0,m=0;p.size!==0;)for(b=p.shift(),E=b[0],S=b[1],S!==0&&(k+=S,m+=1),_=f.starts[E+1],A=f.starts[E];A<_;A++)w=f.neighborhood[A],!v.has(w)&&(v.add(w),p.push([w,S+1]));return[m,k]};function u(c,f,p){if(!n(f))throw new Error("graphology-metrics/centrality/closeness: the given graph is not a valid graphology instance.");p=e(p,o);var v=p.wassermanFaust,b=new s(f),E=f.order,S,A,_,w,k,m=new Float64Array(E);for(S=0;S<E;S++)A=b.fromNode(S),_=A[0],w=A[1],k=0,w>0&&E>1&&(k=_/w,v&&(k*=_/(E-1))),m[S]=k;return c?b.index.assign(p.nodeCentralityAttribute,m):b.index.collect(m)}var l=u.bind(null,!1);return l.assign=u.bind(null,!0),eo=l,eo}var to,Uc;function $b(){if(Uc)return to;Uc=1;var n=we(),e=Be(),t=Sr().WeightedNeighborhoodIndex,r={nodeCentralityAttribute:"eigenvectorCentrality",getEdgeWeight:"weight",maxIterations:100,tolerance:1e-6};function a(u){for(var l=0,c=0,f=0,p=u.length;f<p;f++){var v=Math.abs(u[f]);v>l&&(c*=l/v*(l/v),l=v),c+=v===0&&l===0?0:v/l*(v/l)}return l===1/0?1:l*Math.sqrt(c)}function o(u,l,c){if(!n(l))throw new Error("graphology-metrics/centrality/eigenvector: the given graph is not a valid graphology instance.");c=e(c,r);var f=c.maxIterations,p=c.tolerance,v=l.order,b=new t(l,c.getEdgeWeight),E,S,A,_,w=new Float64Array(l.order);for(E=0;E<v;E++)w[E]=1/v;for(var k=0,m=0,C,$,y,I=!1;k<f;){for($=w,w=new Float64Array($),E=0;E<v;E++)for(A=b.starts[E+1],S=b.starts[E];S<A;S++)C=b.neighborhood[S],_=b.weights[S],w[C]+=$[E]*_;for(y=a(w),E=0;E<v;E++)w[E]/=y;for(m=0,E=0;E<v;E++)m+=Math.abs(w[E]-$[E]);if(m<v*p){I=!0;break}k++}if(!I)throw Error("graphology-metrics/centrality/eigenvector: failed to converge.");if(u){b.assign(c.nodeCentralityAttribute,w);return}return b.collect(w)}var s=o.bind(null,!1);return s.assign=o.bind(null,!0),to=s,to}var ro,jc;function Pb(){if(jc)return ro;jc=1;var n=Be(),e=we(),t=ft().createEdgeWeightGetter,r={nodeAuthorityAttribute:"authority",nodeHubAttribute:"hub",getEdgeWeight:"weight",maxIterations:100,normalize:!0,tolerance:1e-8};function a(l,c){var f=Object.create(null),p,v;for(p=0,v=l.length;p<v;p++)f[l[p]]=c;return f}function o(l){var c=0;for(var f in l)c+=l[f];return c}function s(l,c,f){if(!e(c))throw new Error("graphology-hits: the given graph is not a valid graphology instance.");if(c.multi)throw new Error("graphology-hits: the HITS algorithm does not work with MultiGraphs.");f=n(f,r);var p=t(f.getEdgeWeight).fromEntry,v=c.order,b=c.nodes(),E,S=a(b,1/v),A={},_=!1,w,k,m,C,$,y,I,z,T,P,O,R,V;for(c.forEachEdge(function(Q,W,L,N,B,Y,U){A[Q]=p(Q,W,L,N,B,Y,U)}),y=0;y<f.maxIterations;y++){for(w=S,S=a(b,0),k=a(b,0),z=0,I=0,O=0;O<v;O++)for(m=b[O],E=c.outboundEdges(m),R=0,V=E.length;R<V;R++)$=E[R],C=c.opposite(m,$),k[C]+=w[m]*A[$],k[C]>I&&(I=k[C]);for(O=0;O<v;O++)for(m=b[O],E=c.outboundEdges(m),R=0,V=E.length;R<V;R++)$=E[R],C=c.opposite(m,$),S[m]+=k[C]*A[$],S[C]>z&&(z=S[C]);P=1/z;for(m in S)S[m]*=P;P=1/I;for(m in k)k[m]*=P;T=0;for(m in S)T+=Math.abs(S[m]-w[m]);if(T<f.tolerance){_=!0;break}}if(!_)throw Error("graphology-metrics/centrality/hits: failed to converge.");if(f.normalize){P=1/o(k);for(m in k)k[m]*=P;P=1/o(S);for(m in S)S[m]*=P}if(l){c.updateEachNodeAttributes(function(Q,W){return W[f.nodeAuthorityAttribute]=k[Q],W[f.nodeHubAttribute]=S[Q],W},{attributes:[f.nodeAuthorityAttribute,f.nodeHubAttribute]});return}return{hubs:S,authorities:k}}var u=s.bind(null,!1);return u.assign=s.bind(null,!0),ro=u,ro}var no,Bc;function Gb(){if(Bc)return no;Bc=1;var n=we(),e=Be(),t=Sr().WeightedNeighborhoodIndex,r={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function a(s,u,l){if(!n(u))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");l=e(l,r);var c=l.alpha,f=l.maxIterations,p=l.tolerance,v=l.nodePagerankAttribute,b=u.order,E=1/b,S=new t(u,l.getEdgeWeight),A,_,w,k,m=new Float64Array(u.order),C=new Float64Array(S.weights.length),$=[];for(A=0;A<b;A++)for(m[A]=E,w=S.starts[A+1],k=S.outDegrees[A],k===0&&$.push(A),_=S.starts[A];_<w;_++)C[_]=S.weights[_]/k;for(var y=0,I=0,z,T,P,O=!1;y<f;){for(P=m,m=new Float64Array(u.order),z=0,A=0,w=$.length;A<w;A++)z+=P[$[A]];for(z*=c,A=0;A<b;A++){for(w=S.starts[A+1],_=S.starts[A];_<w;_++)T=S.neighborhood[_],m[T]+=c*P[A]*C[_];m[A]+=z*E+(1-c)*E}for(I=0,A=0;A<b;A++)I+=Math.abs(m[A]-P[A]);if(I<b*p){O=!0;break}y++}if(!O)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(s){S.assign(v,m);return}return S.collect(m)}var o=a.bind(null,!1);return o.assign=a.bind(null,!0),no=o,no}var Hc;function Ob(){if(Hc)return Nt;Hc=1;var n=Tb();return Nt.betweenness=Nb(),Nt.closeness=Rb(),Nt.eigenvector=$b(),Nt.hits=Pb(),Nt.pagerank=Gb(),Nt.degree=n.degreeCentrality,Nt.inDegree=n.inDegreeCentrality,Nt.outDegree=n.outDegreeCentrality,Nt}var Hn={},io,Kc;function qb(){if(Kc)return io;Kc=1;var n=we(),e=xr(),t=Be(),r=ft().createEdgeWeightGetter,a={edgeDisparityAttribute:"disparity",getEdgeWeight:"weight"};function o(u,l,c){if(!n(l))throw new Error("graphology-metrics/edge/disparity: the given graph is not a valid graphology instance.");if(l.multi||e(l)==="mixed")throw new Error("graphology-metrics/edge/disparity: not defined for multi nor mixed graphs.");c=t(c,a);var f=r(c.getEdgeWeight).fromEntry,p={};l.forEachNode(function(A){p[A]=0}),l.forEachAssymetricAdjacencyEntry(function(A,_,w,k,m,C,$){var y=f(m,C,A,_,w,k,$);p[A]+=y,p[_]+=y});var v,b,E,S={};if(l.forEachAssymetricAdjacencyEntry(function(A,_,w,k,m,C,$){var y=f(m,C,A,_,w,k,$);v!==A&&(v=A,b=l.degree(A),E=p[A]);var I=l.degree(_),z=p[_],T=y/E,P=y/z,O=Math.pow(1-T,b-1),R=Math.pow(1-P,I-1);S[m]=Math.min(O,R)}),u){l.updateEachEdgeAttributes(function(A,_){return _[c.edgeDisparityAttribute]=S[A],_},{attributes:[c.edgeDisparityAttribute]});return}return S}var s=o.bind(null,!1);return s.assign=o.bind(null,!0),io=s,io}var ao={},Xc;function ki(){return Xc||(Xc=1,function(n){n.intersection=function(){if(arguments.length<2)throw new Error("mnemonist/Set.intersection: needs at least two arguments.");var e=new Set,t=1/0,r=null,a,o,s=arguments.length;for(o=0;o<s;o++){if(a=arguments[o],a.size===0)return e;a.size<t&&(t=a.size,r=a)}for(var u=r.values(),l,c,f,p;l=u.next(),!l.done;){for(c=l.value,f=!0,o=0;o<s;o++)if(p=arguments[o],p!==r&&!p.has(c)){f=!1;break}f&&e.add(c)}return e},n.union=function(){if(arguments.length<2)throw new Error("mnemonist/Set.union: needs at least two arguments.");var e=new Set,t,r=arguments.length,a,o;for(t=0;t<r;t++)for(a=arguments[t].values();o=a.next(),!o.done;)e.add(o.value);return e},n.difference=function(e,t){if(!e.size)return new Set;if(!t.size)return new Set(e);for(var r=new Set,a=e.values(),o;o=a.next(),!o.done;)t.has(o.value)||r.add(o.value);return r},n.symmetricDifference=function(e,t){for(var r=new Set,a=e.values(),o;o=a.next(),!o.done;)t.has(o.value)||r.add(o.value);for(a=t.values();o=a.next(),!o.done;)e.has(o.value)||r.add(o.value);return r},n.isSubset=function(e,t){var r=e.values(),a;if(e===t)return!0;if(e.size>t.size)return!1;for(;a=r.next(),!a.done;)if(!t.has(a.value))return!1;return!0},n.isSuperset=function(e,t){return n.isSubset(t,e)},n.add=function(e,t){for(var r=t.values(),a;a=r.next(),!a.done;)e.add(a.value)},n.subtract=function(e,t){for(var r=t.values(),a;a=r.next(),!a.done;)e.delete(a.value)},n.intersect=function(e,t){for(var r=e.values(),a;a=r.next(),!a.done;)t.has(a.value)||e.delete(a.value)},n.disjunct=function(e,t){for(var r=e.values(),a,o=[];a=r.next(),!a.done;)t.has(a.value)&&o.push(a.value);for(r=t.values();a=r.next(),!a.done;)e.has(a.value)||e.add(a.value);for(var s=0,u=o.length;s<u;s++)e.delete(o[s])},n.intersectionSize=function(e,t){var r;if(e.size>t.size&&(r=e,e=t,t=r),e.size===0)return 0;if(e===t)return e.size;for(var a=e.values(),o,s=0;o=a.next(),!o.done;)t.has(o.value)&&s++;return s},n.unionSize=function(e,t){var r=n.intersectionSize(e,t);return e.size+t.size-r},n.jaccard=function(e,t){var r=n.intersectionSize(e,t);if(r===0)return 0;var a=e.size+t.size-r;return r/a},n.overlap=function(e,t){var r=n.intersectionSize(e,t);return r===0?0:r/Math.min(e.size,t.size)}}(ao)),ao}var oo,Yc;function Fb(){if(Yc)return oo;Yc=1;var n=we(),e=ki().intersectionSize;function t(a,o){if(!n(o))throw new Error("graphology-metrics/simmelian-strength: given graph is not a valid graphology instance.");var s={};if(o.forEachNode(function(l){s[l]=new Set(o.neighbors(l))}),!a){var u={};return o.forEachEdge(function(l,c,f,p){u[l]=e(s[f],s[p])}),u}o.updateEachEdgeAttributes(function(l,c,f,p){return c.simmelianStrength=e(s[f],s[p]),c},{attributes:["simmelianStrength"]})}var r=t.bind(null,!1);return r.assign=t.bind(null,!0),oo=r,oo}var Vc;function Wb(){return Vc||(Vc=1,Hn.disparity=qb(),Hn.simmelianStrength=Fb()),Hn}var Ze={},Rt={},so,Qc;function Xf(){if(Qc)return so;Qc=1;var n=we();return so=function(t){if(!n(t))throw new Error("graphology-metrics/simple-size: the given graph is not a valid graphology instance.");if(!t.multi)return t.size;var r=0,a=0;function o(){r++}function s(){a++}return t.forEachNode(function(u){t.type!=="directed"&&t.forEachUndirectedNeighbor(u,o),t.type!=="undirected"&&t.forEachOutNeighbor(u,s)}),r/2+a},so}var Zc;function Ub(){if(Zc)return Rt;Zc=1;var n=we(),e=Xf();function t(s,u){return 2*u/(s*(s-1))}function r(s,u){return u/(s*(s-1))}function a(s,u){var l=s*(s-1);return u/(l+l/2)}function o(s,u,l){var c,f;if(arguments.length>3){if(c=l,f=arguments[3],typeof c!="number"||c<0)throw new Error("graphology-metrics/density: given order is not a valid number.");if(typeof f!="number"||f<0)throw new Error("graphology-metrics/density: given size is not a valid number.")}else{if(!n(l))throw new Error("graphology-metrics/density: given graph is not a valid graphology instance.");c=l.order,f=l.size,l.multi&&u===!1&&(f=e(l))}if(c<2)return 0;s===null&&(s=l.type),u===null&&(u=l.multi);var p;return s==="undirected"?p=t:s==="directed"?p=r:p=a,p(c,f)}return Rt.abstractDensity=o,Rt.density=o.bind(null,null,null),Rt.directedDensity=o.bind(null,"directed",!1),Rt.undirectedDensity=o.bind(null,"undirected",!1),Rt.mixedDensity=o.bind(null,"mixed",!1),Rt.multiDirectedDensity=o.bind(null,"directed",!0),Rt.multiUndirectedDensity=o.bind(null,"undirected",!0),Rt.multiMixedDensity=o.bind(null,"mixed",!0),Rt}var Kn={},Jc;function jb(){if(Jc)return Kn;Jc=1;var n=we();function e(r,a){if(!n(r))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var o=[].concat(a),s,u,l,c={};for(l=0;l<o.length;l++)u=o[l],c[u]=[1/0,-1/0];return r.forEachNode(function(f,p){for(l=0;l<o.length;l++)u=o[l],s=p[u],s<c[u][0]&&(c[u][0]=s),s>c[u][1]&&(c[u][1]=s)}),typeof a=="string"?c[a]:c}function t(r,a){if(!n(r))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var o=[].concat(a),s,u,l,c={};for(l=0;l<o.length;l++)u=o[l],c[u]=[1/0,-1/0];return r.forEachEdge(function(f,p){for(l=0;l<o.length;l++)u=o[l],s=p[u],s<c[u][0]&&(c[u][0]=s),s>c[u][1]&&(c[u][1]=s)}),typeof a=="string"?c[a]:c}return Kn.nodeExtent=e,Kn.edgeExtent=t,Kn}var yr={},uo,eh;function Bb(){if(eh)return uo;eh=1;var n=Jt(),e=eu();function t(){this.clear()}return t.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},t.prototype.enqueue=function(r){return this.items.push(r),++this.size},t.prototype.dequeue=function(){if(this.size){var r=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,r}},t.prototype.peek=function(){if(this.size)return this.items[this.offset]},t.prototype.forEach=function(r,a){a=arguments.length>1?a:this;for(var o=this.offset,s=0,u=this.items.length;o<u;o++,s++)r.call(a,this.items[o],s,this)},t.prototype.toArray=function(){return this.items.slice(this.offset)},t.prototype.values=function(){var r=this.items,a=this.offset;return new n(function(){if(a>=r.length)return{done:!0};var o=r[a];return a++,{value:o,done:!1}})},t.prototype.entries=function(){var r=this.items,a=this.offset,o=0;return new n(function(){if(a>=r.length)return{done:!0};var s=r[a];return a++,{value:[o++,s],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.toString=function(){return this.toArray().join(",")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(r){var a=new t;return e(r,function(o){a.enqueue(o)}),a},t.of=function(){return t.from(arguments)},uo=t,uo}var lo,th;function Hb(){return th||(th=1,lo=function(e,t){var r=t.length;if(r!==0){var a=e.length;e.length+=r;for(var o=0;o<r;o++)e[a+o]=t[o]}}),lo}var rh;function wn(){if(rh)return yr;rh=1;var n=we(),e=Bb(),t=Hb();function r(c,f,p){if(!n(c))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!c.hasNode(f))throw new Error('graphology-shortest-path: the "'+f+'" source node does not exist in the given graph.');if(!c.hasNode(p))throw new Error('graphology-shortest-path: the "'+p+'" target node does not exist in the given graph.');if(f=""+f,p=""+p,f===p)return[f];var v=c.inboundNeighbors.bind(c),b=c.outboundNeighbors.bind(c),E={},S={};E[f]=null,S[p]=null;var A=[f],_=[p],w,k,m,C,$,y,I,z,T=!1;e:for(;A.length&&_.length;)if(A.length<=_.length){for(w=A,A=[],$=0,I=w.length;$<I;$++)for(k=w[$],m=b(k),y=0,z=m.length;y<z;y++)if(C=m[y],C in E||(A.push(C),E[C]=k),C in S){T=!0;break e}}else for(w=_,_=[],$=0,I=w.length;$<I;$++)for(k=w[$],m=v(k),y=0,z=m.length;y<z;y++)if(C=m[y],C in S||(_.push(C),S[C]=k),C in E){T=!0;break e}if(!T)return null;for(var P=[];C;)P.unshift(C),C=E[C];for(C=S[P[P.length-1]];C;)P.push(C),C=S[C];return P.length?P:null}function a(c,f){if(!n(c))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!c.hasNode(f))throw new Error('graphology-shortest-path: the "'+f+'" source node does not exist in the given graph.');f=""+f;var p={},v={},b,E,S,A,_,w;for(p[f]=!0,v[f]=[f];Object.keys(p).length;){b=p,p={};for(S in b)for(E=c.outboundNeighbors(S),_=0,w=E.length;_<w;_++)A=E[_],v[A]||(v[A]=v[S].concat(A),p[A]=!0)}return v}function o(c,f,p){if(!n(f))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!f.hasNode(p))throw new Error('graphology-shortest-path: the "'+p+'" source node does not exist in the given graph.');p=""+p;var v=new Set,b={},E=0;b[p]=0;for(var S=[p],A,_,w;S.length!==0;){var k=[];for(A=0,_=S.length;A<_;A++)w=S[A],!v.has(w)&&(v.add(w),t(k,f[c](w)),b[w]=E);E++,S=k}return b}var s=o.bind(null,"outboundNeighbors"),u=o.bind(null,"neighbors");function l(c,f){f=""+f;var p=[],v={},b={},E=c.nodes(),S,A,_,w,k,m,C,$,y;for(m=0,$=E.length;m<$;m++)w=E[m],v[w]=[],b[w]=0;var I={};b[f]=1,I[f]=0;for(var z=e.of(f);z.size;)for(w=z.dequeue(),p.push(w),S=I[w],A=b[w],_=c.outboundNeighbors(w),C=0,y=_.length;C<y;C++)k=_[C],k in I||(z.enqueue(k),I[k]=S+1),I[k]===S+1&&(b[k]+=A,v[k].push(w));return[p,v,b]}return yr.bidirectional=r,yr.singleSource=a,yr.singleSourceLength=s,yr.undirectedSingleSourceLength=u,yr.brandes=l,yr}var co,nh;function Yf(){if(nh)return co;nh=1;var n=we(),e=wn().singleSourceLength;return co=function(r,a){if(!n(r))throw new Error("graphology-metrics/eccentricity: given graph is not a valid graphology instance.");if(r.size===0)return 1/0;var o=-1/0,s=e(r,a),u,l,c=0;for(u in s)l=s[u],l>o&&(o=l),c++;return c<r.order?1/0:o},co}var ho,ih;function Kb(){if(ih)return ho;ih=1;var n=we(),e=Yf();return ho=function(r){if(!n(r))throw new Error("graphology-metrics/diameter: given graph is not a valid graphology instance.");if(r.size===0)return 1/0;var a=-1/0;return r.someNode(function(o){var s=e(r,o);return s>a&&(a=s),a===1/0}),a},ho}var fo,ah;function Xb(){if(ah)return fo;ah=1;var n=Be(),e=we(),t=xr(),r=ft(),a={getNodeCommunity:"community",getEdgeWeight:"weight",resolution:1};function o(w,k){var m=new Array(w.order),C=new Float64Array(w.order),$={},y=0,I=r.createEdgeWeightGetter(k.getEdgeWeight).fromEntry,z=r.createNodeValueGetter(k.getNodeCommunity).fromEntry,T=0,P={};return w.forEachNode(function(O,R){P[O]=T,m[T++]=z(O,R)}),w.forEachUndirectedEdge(function(O,R,V,Q,W,L,N){var B=I(O,R,V,Q,W,L,N);y+=B,$[O]=B,C[P[V]]+=B,V!==Q&&(C[P[Q]]+=B)}),{weights:$,communities:m,weightedDegrees:C,M:y}}function s(w,k){var m=new Array(w.order),C=new Float64Array(w.order),$=new Float64Array(w.order),y={},I=0,z=r.createEdgeWeightGetter(k.getEdgeWeight).fromEntry,T=r.createNodeValueGetter(k.getNodeCommunity).fromEntry,P=0,O={};return w.forEachNode(function(R,V){O[R]=P,m[P++]=T(R,V)}),w.forEachDirectedEdge(function(R,V,Q,W,L,N,B){var Y=z(R,V,Q,W,L,N,B);I+=Y,y[R]=Y,$[O[Q]]+=Y,C[O[W]]+=Y}),{weights:y,communities:m,weightedInDegrees:C,weightedOutDegrees:$,M:I}}function u(w,k){var m=k.resolution,C=o(w,k),$=C.communities,y=C.weightedDegrees,I=C.M,z=w.nodes(),T,P,O,R,V,Q,W=0,L=I*2;for(T=0,O=w.order;T<O;T++)for(P=0;P<O;P++)$[T]===$[P]&&(Q=w.undirectedEdge(z[T],z[P]),R=C.weights[Q]||0,V=y[T]*y[P],T===P&&typeof Q<"u"?W+=(R-V/L*m)*2:W+=R-V/L*m);return W/L}function l(w,k){var m=k.resolution,C=s(w,k),$=C.communities,y=C.weightedInDegrees,I=C.weightedOutDegrees,z=C.M,T=w.nodes(),P,O,R,V,Q,W,L=0;for(P=0,R=w.order;P<R;P++)for(O=0;O<R;O++)$[P]===$[O]&&(W=w.directedEdge(T[P],T[O]),V=C.weights[W]||0,Q=y[P]*I[O],L+=V-Q/z*m);return L/z}function c(w,k){var m={},C={},$={},y=r.createNodeValueGetter(k.getNodeCommunity).fromEntry;return w.forEachNode(function(I,z){var T=y(I,z);if(m[I]=T,typeof T>"u")throw new Error('graphology-metrics/modularity: the "'+I+'" node is not in the partition.');C[T]=0,$[T]=0}),{communities:m,totalWeights:C,internalWeights:$}}function f(w,k){var m={},C={},$={},y={},I=r.createNodeValueGetter(k.getNodeCommunity).fromEntry;return w.forEachNode(function(z,T){var P=I(z,T);if(m[z]=P,typeof P>"u")throw new Error('graphology-metrics/modularity: the "'+z+'" node is not in the partition.');C[P]=0,$[P]=0,y[P]=0}),{communities:m,totalInWeights:C,totalOutWeights:$,internalWeights:y}}function p(w,k){var m=k.resolution,C=c(w,k),$=0,y=C.totalWeights,I=C.internalWeights,z=C.communities,T=r.createEdgeWeightGetter(k.getEdgeWeight).fromEntry;w.forEachUndirectedEdge(function(V,Q,W,L,N,B,Y){var U=T(V,Q,W,L,N,B,Y);$+=U;var F=z[W],K=z[L];y[F]+=U,y[K]+=U,F===K&&(I[F]+=U*2)});var P=0,O=$*2;for(var R in I)P+=I[R]/O-Math.pow(y[R]/O,2)*m;return P}function v(w,k){var m=k.resolution,C=f(w,k),$=0,y=C.totalInWeights,I=C.totalOutWeights,z=C.internalWeights,T=C.communities,P=r.createEdgeWeightGetter(k.getEdgeWeight).fromEntry;w.forEachDirectedEdge(function(V,Q,W,L,N,B,Y){var U=P(V,Q,W,L,N,B,Y);$+=U;var F=T[W],K=T[L];I[F]+=U,y[K]+=U,F===K&&(z[F]+=U)});var O=0;for(var R in z)O+=z[R]/$-y[R]*I[R]/Math.pow($,2)*m;return O}function b(w,k,m,C){return C/(2*w)-k*m/(2*(w*w))}function E(w,k,m,C,$,y){return y/w-($*k+C*m)/(w*w)}function S(w,k){if(!e(w))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(w.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(w.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var m=t(w);if(m==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return k=n(k,a),m==="directed"?l(w,k):u(w,k)}function A(w,k){if(!e(w))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(w.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(w.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var m=t(w);if(m==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return k=n(k,a),m==="directed"?v(w,k):p(w,k)}var _=A;return _.sparse=A,_.dense=S,_.undirectedDelta=b,_.directedDelta=E,fo=_,fo}var po,oh;function Yb(){if(oh)return po;oh=1;var n=we(),e=ft().createEdgeWeightGetter,t="weight";return po=function(a,o){if(!n(a))throw new Error("graphology-metrics/weighted-size: the given graph is not a valid graphology instance.");o=e(o||t).fromEntry;var s=0;return a.forEachEdge(function(u,l,c,f,p,v,b){s+=o(u,l,c,f,p,v,b)}),s},po}var sh;function Vb(){if(sh)return Ze;sh=1;var n=Ub(),e=jb();return Ze.diameter=Kb(),Ze.modularity=Xb(),Ze.simpleSize=Xf(),Ze.weightedSize=Yb(),Ze.abstractDensity=n.abstractDensity,Ze.density=n.density,Ze.directedDensity=n.directedDensity,Ze.undirectedDensity=n.undirectedDensity,Ze.mixedDensity=n.mixedDensity,Ze.multiDirectedDensity=n.multiDirectedDensity,Ze.multiUndirectedDensity=n.multiUndirectedDensity,Ze.multiMixedDensity=n.multiMixedDensity,Ze.nodeExtent=e.nodeExtent,Ze.edgeExtent=e.edgeExtent,Ze}var tn={},go,uh;function Qb(){if(uh)return go;uh=1;var n=we();function e(t,r){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}return go=function(r){if(!n(r))throw new Error("graphology-metrics/layout-quality/edge-uniformity: given graph is not a valid graphology instance.");if(r.size===0)return 0;var a=0,o=0,s,u=new Float64Array(r.size);r.forEachEdge(function(p,v,b,E,S,A){var _=e(S,A);u[o++]=_,a+=_});var l=a/r.size,c=0;for(o=0,s=r.size;o<s;o++)c+=Math.pow(l-u[o],2);var f=c/(r.size*Math.pow(l,2));return Math.sqrt(f)},go}var vo,lh;function Zb(){if(lh)return vo;lh=1;var n=tu(),e=ru(),t=n.DEFAULT_COMPARATOR,r=n.reverseComparator;function a(u,l,c,f){for(var p=c,v=f,b=l[f],E=2*f+1,S;E<p;)S=E+1,S<p&&u(l[E],l[S])>=0&&(E=S),l[f]=l[E],f=E,E=2*f+1;l[f]=b,e.siftDown(u,l,v,f)}function o(u,l,c,f){for(var p=f,v=p,b=new u(f),E,S;v>0;)E=c[--v],v!==0&&(S=c[0],c[0]=E,a(l,c,--f,0),E=S),b[v]=E;return b}function s(u,l,c){if(arguments.length===2&&(c=l,l=null),this.ArrayClass=u,this.capacity=c,this.items=new u(c),this.clear(),this.comparator=l||t,typeof c!="number"&&c<=0)throw new Error("mnemonist/FixedReverseHeap.constructor: capacity should be a number > 0.");if(typeof this.comparator!="function")throw new Error("mnemonist/FixedReverseHeap.constructor: given comparator should be a function.");this.comparator=r(this.comparator)}return s.prototype.clear=function(){this.size=0},s.prototype.push=function(u){return this.size<this.capacity?(this.items[this.size]=u,e.siftDown(this.comparator,this.items,0,this.size),this.size++):this.comparator(u,this.items[0])>0&&e.replace(this.comparator,this.items,u),this.size},s.prototype.peek=function(){return this.items[0]},s.prototype.consume=function(){var u=o(this.ArrayClass,this.comparator,this.items,this.size);return this.size=0,u},s.prototype.toArray=function(){return o(this.ArrayClass,this.comparator,this.items.slice(0,this.size),this.size)},s.prototype.inspect=function(){var u=this.toArray();return Object.defineProperty(u,"constructor",{value:s,enumerable:!1}),u},typeof Symbol<"u"&&(s.prototype[Symbol.for("nodejs.util.inspect.custom")]=s.prototype.inspect),vo=s,vo}var Xn={},ch;function Jb(){if(ch)return Xn;ch=1;var n=new Float64Array(64),e=new Float64Array(64);function t(a,o,s){var u,l,c,f,p;for(n[0]=o,e[0]=s,l=0;l>=0;)if(c=n[l],f=e[l]-1,c<f){for(u=a[c];c<f;){for(;a[f]>=u&&c<f;)f--;for(c<f&&(a[c++]=a[f]);a[c]<=u&&c<f;)c++;c<f&&(a[f--]=a[c])}a[c]=u,n[l+1]=c+1,e[l+1]=e[l],e[l++]=c,e[l]-n[l]>e[l-1]-n[l-1]&&(p=n[l],n[l]=n[l-1],n[l-1]=p,p=e[l],e[l]=e[l-1],e[l-1]=p)}else l--;return a}Xn.inplaceQuickSort=t;function r(a,o,s,u){var l,c,f,p,v,b;for(n[0]=s,e[0]=u,c=0;c>=0;)if(f=n[c],p=e[c]-1,f<p){for(v=o[f],l=a[v];f<p;){for(;a[o[p]]>=l&&f<p;)p--;for(f<p&&(o[f++]=o[p]);a[o[f]]<=l&&f<p;)f++;f<p&&(o[p--]=o[f])}o[f]=v,n[c+1]=f+1,e[c+1]=e[c],e[c++]=f,e[c]-n[c]>e[c-1]-n[c-1]&&(b=n[c],n[c]=n[c-1],n[c-1]=b,b=e[c],e[c]=e[c-1],e[c-1]=b)}else c--;return o}return Xn.inplaceQuickSortIndices=r,Xn}var yo,hh;function Vf(){if(hh)return yo;hh=1;var n=Ai(),e=lr(),t=tu().createTupleComparator,r=Zb(),a=Jb().inplaceQuickSortIndices;function o(p,v,b,E){var S,A=0,_;for(S=0;S<p;S++)_=v[S][b]-E[S],A+=_*_;return A}function s(p,v){var b=v.length,E=new Array(p),S=new Array(b),A,_=e.getPointerArray(b),w=new _(b),k,m,C,$=!0;for(k=0;k<p;k++){for(A=new Float64Array(b),m=0;m<b;m++)C=v[m],A[m]=C[1][k],$&&(S[m]=C[0],w[m]=m);$=!1,E[k]=A}return{axes:E,ids:w,labels:S}}function u(p,v,b,E){for(var S=E.length,A=e.getPointerArray(S+1),_=new A(S),w=new A(S),k=new A(S),m=[[0,0,b.length,-1,0]],C,$,y,I,z,T,P,O,R=0;m.length!==0;)C=m.pop(),O=C[0],T=C[1],P=C[2],$=C[3],y=C[4],a(v[O],b,T,P),S=P-T,I=T+(S>>>1),z=b[I],_[R]=z,$>-1&&(y===0?w[$]=R+1:k[$]=R+1),O=(O+1)%p,I!==T&&I!==P-1&&m.push([O,I+1,P,R,1]),I!==T&&m.push([O,T,I,R,0]),R++;return{axes:v,labels:E,pivots:_,lefts:w,rights:k}}function l(p,v){this.dimensions=p,this.visited=0,this.axes=v.axes,this.labels=v.labels,this.pivots=v.pivots,this.lefts=v.lefts,this.rights=v.rights,this.size=this.labels.length}l.prototype.nearestNeighbor=function(p){var v=1/0,b=null,E=this.dimensions,S=this.axes,A=this.pivots,_=this.lefts,w=this.rights,k=0;function m(C,$){k++;var y=_[$],I=w[$],z=A[$],T=o(E,S,z,p);if(!(T<v&&(b=z,v=T,T===0))){var P=S[C][z]-p[C];C=(C+1)%E,P>0?y!==0&&m(C,y-1):I!==0&&m(C,I-1),P*P<v&&(P>0?I!==0&&m(C,I-1):y!==0&&m(C,y-1))}}return m(0,0),this.visited=k,this.labels[b]};var c=t(3),f=t(2);return l.prototype.kNearestNeighbors=function(p,v){if(p<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");if(p=Math.min(p,this.size),p===1)return[this.nearestNeighbor(v)];var b=new r(Array,c,p),E=this.dimensions,S=this.axes,A=this.pivots,_=this.lefts,w=this.rights,k=0;function m(y,I){var z=_[I],T=w[I],P=A[I],O=o(E,S,P,v);b.push([O,k++,P]);var R=v[y],V=S[y][P],Q=R-V;y=(y+1)%E,R<V?z!==0&&m(y,z-1):T!==0&&m(y,T-1),(Q*Q<b.peek()[0]||b.size<p)&&(R<V?T!==0&&m(y,T-1):z!==0&&m(y,z-1))}m(0,0),this.visited=k;for(var C=b.consume(),$=0;$<C.length;$++)C[$]=this.labels[C[$][2]];return C},l.prototype.linearKNearestNeighbors=function(p,v){if(p<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");p=Math.min(p,this.size);var b=new r(Array,f,p),E,S,A;for(E=0,S=this.size;E<S;E++)A=o(this.dimensions,this.axes,this.pivots[E],v),b.push([A,E]);var _=b.consume();for(E=0;E<_.length;E++)_[E]=this.labels[this.pivots[_[E][1]]];return _},l.prototype.inspect=function(){var p=new Map;p.dimensions=this.dimensions,Object.defineProperty(p,"constructor",{value:l,enumerable:!1});var v,b,E;for(v=0;v<this.size;v++){for(E=new Array(this.dimensions),b=0;b<this.dimensions;b++)E[b]=this.axes[b][v];p.set(this.labels[v],E)}return p},typeof Symbol<"u"&&(l.prototype[Symbol.for("nodejs.util.inspect.custom")]=l.prototype.inspect),l.from=function(p,v){var b=n.toArray(p),E=s(v,b),S=u(v,E.axes,E.ids,E.labels);return new l(v,S)},l.fromAxes=function(p,v){v||(v=e.indices(p[0].length));var b=p.length,E=u(p.length,p,e.indices(v.length),v);return new l(b,E)},yo=l,yo}var mo,dh;function ew(){if(dh)return mo;dh=1;var n=we(),e=Vf(),t=ki().intersectionSize;return mo=function(a){if(!n(a))throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: given graph is not a valid graphology instance.");if(a.order===0)throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: cannot compute stress for a null graph.");if(a.size===0)return 0;var o=[new Float64Array(a.order),new Float64Array(a.order)],s=0;a.forEachNode(function(c,f){o[0][s]=f.x,o[1][s++]=f.y});var u=e.fromAxes(o,a.nodes()),l=0;return a.forEachNode(function(c,f){var p=new Set(a.neighbors(c));if(p.size===0||p.size===a.order-1){l+=1;return}var v=u.kNearestNeighbors(p.size+1,[f.x,f.y]);v=new Set(v.slice(1));var b=t(p,v);l+=b/v.size}),l/a.order},mo}var bo,fh;function tw(){if(fh)return bo;fh=1;var n=we(),e=wn().undirectedSingleSourceLength;function t(r,a){return Math.sqrt(Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2))}return bo=function(a){if(!n(a))throw new Error("graphology-metrics/layout-quality/stress: given graph is not a valid graphology instance.");if(a.order===0)throw new Error("graphology-metrics/layout-quality/stress: cannot compute stress for a null graph.");var o=new Array(a.order),s=new Array(a.order),u=0,l=a.order*4;a.forEachNode(function(w,k){o[u]=w,s[u++]=k});var c,f,p,v,b,E,S,A,_=0;for(u=0,f=a.order;u<f;u++)for(b=e(a,o[u]),p=s[u],c=u+1;c<f;c++)v=s[c],E=b[o[c]],typeof E>"u"&&(E=l),A=t(p,v),S=1/(E*E),_+=S*Math.pow(A-E,2);return _},bo}var ph;function rw(){return ph||(ph=1,tn.edgeUniformity=Qb(),tn.neighborhoodPreservation=ew(),tn.stress=tw()),tn}var $t={},Xt={},gh;function nw(){if(gh)return Xt;gh=1;var n=we(),e="weight";function t(r,a,o,s,u){if(!n(o))throw new Error("graphology-metrics/"+r+": the given graph is not a valid graphology instance.");u=u||e;var l=0;return o[a](s,function(c,f,p,v,b,E,S){var A=typeof u=="function"?u(c,f,p,v,b,E,S):f[u];(typeof A!="number"||isNaN(A))&&(A=1),l+=A}),l}return Xt.weightedDegree=t.bind(null,"weightedDegree","forEachEdge"),Xt.weightedInDegree=t.bind(null,"weightedInDegree","forEachInEdge"),Xt.weightedOutDegree=t.bind(null,"weightedOutDegree","forEachOutEdge"),Xt.weightedInboundDegree=t.bind(null,"weightedInboundDegree","forEachInboundEdge"),Xt.weightedOutboundDegree=t.bind(null,"weightedOutboundDegree","forEachOutboundEdge"),Xt.weightedUndirectedDegree=t.bind(null,"weightedUndirectedDegree","forEachUndirectedEdge"),Xt.weightedDirectedDegree=t.bind(null,"weightedDirectedDegree","forEachDirectedEdge"),Xt}var vh;function iw(){if(vh)return $t;vh=1;var n=nw();return $t.eccentricity=Yf(),$t.weightedDegree=n.weightedDegree,$t.weightedInDegree=n.weightedInDegree,$t.weightedOutDegree=n.weightedOutDegree,$t.weightedInboundDegree=n.weightedInboundDegree,$t.weightedOutboundDegree=n.weightedOutboundDegree,$t.weightedUndirectedDegree=n.weightedUndirectedDegree,$t.weightedDirectedDegree=n.weightedDirectedDegree,$t}var yh;function aw(){return yh||(yh=1,vr.centrality=Ob(),vr.edge=Wb(),vr.graph=Vb(),vr.layoutQuality=rw(),vr.node=iw()),vr}var wo,mh;function ow(){return mh||(mh=1,wo=aw()),wo}var kt={},Eo,bh;function sw(){if(bh)return Eo;bh=1;var n=we(),e=Zs().copyNode,t=Lt().copyEdge;return Eo=function(a,o){if(!n(a)||!n(o))throw new Error("graphology-operators/disjoint-union: invalid graph.");if(a.multi!==o.multi)throw new Error("graphology-operators/disjoint-union: both graph should be simple or multi.");var s=a.nullCopy();s.mergeAttributes(a.getAttributes());var u={},l={},c=0;return a.forEachNode(function(f,p){u[f]=c,e(s,c,p),c++}),o.forEachNode(function(f,p){l[f]=c,e(s,c,p),c++}),c=0,a.forEachEdge(function(f,p,v,b,E,S,A){t(s,A,c++,u[v],u[b],b,p)}),o.forEachEdge(function(f,p,v,b,E,S,A){t(s,A,c++,l[v],l[b],b,p)}),s},Eo}var xo,wh;function uw(){if(wh)return xo;wh=1;var n=we(),e=Lt().copyEdge;return xo=function(r){if(!n(r))throw new Error("graphology-operators/reverse: invalid graph.");var a=r.emptyCopy();return r.forEachEdge(function(o,s,u,l,c,f,p){p?e(a,!0,o,u,l,s):e(a,!1,o,l,u,s)}),a},xo}var So,Eh;function lw(){if(Eh)return So;Eh=1;var n=we(),e=Zs().copyNode,t=Lt().copyEdge;return So=function(a,o){if(!n(a))throw new Error("graphology-operators/subgraph: invalid graph instance.");var s=a.nullCopy(),u=o;if(Array.isArray(o)){if(o.length===0)return s;o=new Set(o)}if(o instanceof Set){if(o.size===0)return s;u=function(c){return o.has(c)};var l=o;o=new Set,l.forEach(function(c){o.add(""+c)})}if(typeof u!="function")throw new Error("graphology-operators/subgraph: invalid nodes. Expecting an array or a set or a filtering function.");if(typeof o=="function"){if(a.forEachNode(function(c,f){u(c,f)&&e(s,c,f)}),s.order===0)return s}else o.forEach(function(c){if(!a.hasNode(c))throw new Error('graphology-operators/subgraph: the "'+c+'" node was not found in the graph.');e(s,c,a.getNodeAttributes(c))});return a.forEachEdge(function(c,f,p,v,b,E,S){u(p,b)&&(v!==p&&!u(v,E)||t(s,S,c,p,v,f))}),s},So}var Ao,xh;function cw(){if(xh)return Ao;xh=1;var n=we(),e=Lt().copyEdge;return Ao=function(r,a){if(!n(r))throw new Error("graphology-operators/to-directed: expecting a valid graphology instance.");typeof a=="function"&&(a={mergeEdge:a}),a=a||{};var o=typeof a.mergeEdge=="function"?a.mergeEdge:null;if(r.type==="directed")return r.copy();var s=r.emptyCopy({type:"directed"});return r.forEachDirectedEdge(function(u,l,c,f){e(s,!1,u,c,f,l)}),r.forEachUndirectedEdge(function(u,l,c,f){var p=!r.multi&&r.type==="mixed"&&s.edge(c,f),v=!r.multi&&r.type==="mixed"&&s.edge(f,c);p?s.replaceEdgeAttributes(p,o(s.getEdgeAttributes(p),l)):e(s,!1,null,c,f,l),c!==f&&(v?s.replaceEdgeAttributes(v,o(s.getEdgeAttributes(v),l)):e(s,!1,null,f,c,l))}),s},Ao}var _o,Sh;function nu(){if(Sh)return _o;Sh=1;var n=we();return _o=function(t){if(!n(t))throw new Error("graphology-operators/to-mixed: expecting a valid graphology instance.");return t.copy({type:"mixed"})},_o}var ko,Ah;function iu(){if(Ah)return ko;Ah=1;var n=we();return ko=function(t){if(!n(t))throw new Error("graphology-operators/to-multi: expecting a valid graphology instance.");return t.copy({multi:!0})},ko}var Do,_h;function hw(){if(_h)return Do;_h=1;var n=we(),e=Lt().copyEdge;return Do=function(r,a){if(!n(r))throw new Error("graphology-operators/to-simple: expecting a valid graphology instance.");typeof a=="function"&&(a={mergeEdge:a}),a=a||{};var o=typeof a.mergeEdge=="function"?a.mergeEdge:null;if(!r.multi)return r.copy();var s=r.emptyCopy({multi:!1});return r.forEachEdge(function(u,l,c,f,p,v,b){var E=b?s.undirectedEdge(c,f):s.directedEdge(c,f);if(E){o&&s.replaceEdgeAttributes(E,o(s.getEdgeAttributes(E),l));return}e(s,b,u,c,f,l)}),s},Do}var Co,kh;function dw(){if(kh)return Co;kh=1;var n=we(),e=Lt().copyEdge;return Co=function(r,a){if(!n(r))throw new Error("graphology-operators/to-undirected: expecting a valid graphology instance.");typeof a=="function"&&(a={mergeEdge:a}),a=a||{};var o=typeof a.mergeEdge=="function"?a.mergeEdge:null;if(r.type==="undirected")return r.copy();var s=r.emptyCopy({type:"undirected"});return r.forEachUndirectedEdge(function(u,l,c,f){e(s,!0,u,c,f,l)}),r.forEachDirectedEdge(function(u,l,c,f){if(!r.multi){var p=s.edge(c,f);if(p){o&&s.replaceEdgeAttributes(p,o(s.getEdgeAttributes(p),l));return}}e(s,!0,null,c,f,l)}),s},Co}var Io,Dh;function fw(){if(Dh)return Io;Dh=1;var n=we();return Io=function(t,r){if(!n(t)||!n(r))throw new Error("graphology-operators/union: invalid graph.");if(t.multi!==r.multi)throw new Error("graphology-operators/union: both graph should be simple or multi.");var a=t.copy();return a.import(r,!0),a},Io}var Ch;function Qf(){return Ch||(Ch=1,kt.disjointUnion=sw(),kt.reverse=uw(),kt.subgraph=lw(),kt.toDirected=cw(),kt.toMixed=nu(),kt.toMulti=iu(),kt.toSimple=hw(),kt.toUndirected=dw(),kt.union=fw()),kt}var Lo,Ih;function pw(){return Ih||(Ih=1,Lo=Qf()),Lo}var Pt={},zo={},Lh;function gw(){if(Lh)return zo;Lh=1;var n=function(){return!0};return zo.edgePathFromNodePath=function(e,t){var r=t.length,a,o,s,u;if(r<2)return o=t[0],u=e.multi?e.findEdge(o,o,n):e.edge(o,o),u?[u]:[];r--;var l=new Array(r);for(a=0;a<r;a++){if(o=t[a],s=t[a+1],u=e.multi?e.findOutboundEdge(o,s,n):e.edge(o,s),u===void 0)throw new Error("graphology-shortest-path: given path is impossible in given graph.");l[a]=u}return l},zo}var rn={},zh;function vw(){if(zh)return rn;zh=1;var n=we(),e=ft().createEdgeWeightGetter,t=ru(),r="weight";function a(p,v){return p[0]>v[0]?1:p[0]<v[0]?-1:p[1]>v[1]?1:p[1]<v[1]?-1:p[2]>v[2]?1:p[2]<v[2]?-1:0}function o(p,v){return p[0]>v[0]?1:p[0]<v[0]?-1:p[1]>v[1]?1:p[1]<v[1]?-1:p[2]>v[2]?1:p[2]<v[2]?-1:p[3]>v[3]?1:p[3]<v[3]?-1:0}function s(p,v,b,E){if(v=""+v,b=""+b,!n(p))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(v&&!p.hasNode(v))throw new Error('graphology-shortest-path/dijkstra: the "'+v+'" source node does not exist in the given graph.');if(b&&!p.hasNode(b))throw new Error('graphology-shortest-path/dijkstra: the "'+b+'" target node does not exist in the given graph.');if(E=e(E||r).fromMinimalEntry,v===b)return[0,[v]];var S=[{},{}],A=[{},{}],_=[new t(a),new t(a)],w=[{},{}];A[0][v]=[v],A[1][b]=[b],w[0][v]=0,w[1][b]=0;var k=[],m=1/0,C=0,$=1,y,I,z,T,P,O,R,V,Q;for(_[0].push([0,C++,v]),_[1].push([0,C++,b]);_[0].size&&_[1].size;)if($=1-$,y=_[$].pop(),T=y[0],P=y[2],!(P in S[$])){if(S[$][P]=T,P in S[1-$])return[m,k];for(I=$===1?p.inboundEdges(P):p.outboundEdges(P),V=0,Q=I.length;V<Q;V++){if(R=I[V],O=p.opposite(P,R),z=S[$][P]+E(R,p.getEdgeAttributes(R)),O in S[$]&&z<S[$][O])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(O in w[$])||z<w[$][O])&&(w[$][O]=z,_[$].push([z,C++,O]),A[$][O]=A[$][P].concat(O),O in w[0]&&O in w[1]&&(T=w[0][O]+w[1][O],(k.length===0||m>T)&&(m=T,k=A[0][O].concat(A[1][O].slice(0,-1).reverse()))))}}return[1/0,null]}function u(p,v,b,E,S,A){if(!n(p))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");b=e(b||r).fromMinimalEntry;var _={},w={},k=new t(a),m=0,C,$,y,I,z,T,P,O,R,V,Q;for(O=0,V=v.length;O<V;O++)I=v[O],w[I]=0,k.push([0,m++,I]),A[I]=[I];for(;k.size;)if($=k.pop(),P=$[0],I=$[2],!(I in _)){if(_[I]=P,I===S)break;for(C=p.outboundEdges(I),R=0,Q=C.length;R<Q;R++){if(T=C[R],z=p.opposite(I,T),y=b(T,p.getEdgeAttributes(T))+_[I],z in _&&y<_[z])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(z in w)||y<w[z])&&(w[z]=y,k.push([y,m++,z]),A[z]=A[I].concat(z))}}return _}function l(p,v,b){var E={};return u(p,[v],b,0,null,E),E}function c(p,v,b,E){return s(p,v,b,E)[1]}function f(p,v,b){v=""+v,b=e(b||r).fromMinimalEntry;var E=[],S={},A={},_=p.nodes(),w,k,m,C,$,y,I,z,T,P;for(T=0,P=_.length;T<P;T++)y=_[T],S[y]=[],A[y]=0;var O={};A[v]=1;var R={};R[v]=0;var V=0,Q=new t(o);for(Q.push([0,V++,v,v]);Q.size;)if(k=Q.pop(),C=k[0],m=k[2],y=k[3],!(y in O))for(A[y]+=A[m],E.push(y),O[y]=C,w=p.outboundEdges(y),T=0,P=w.length;T<P;T++)z=w[T],I=p.opposite(y,z),$=C+b(z,p.getEdgeAttributes(z)),!(I in O)&&(!(I in R)||$<R[I])?(R[I]=$,Q.push([$,V++,y,I]),A[I]=0,S[I]=[y]):$===R[I]&&(A[I]+=A[y],S[I].push(y));return[E,S,A]}return rn.bidirectional=c,rn.singleSource=l,rn.brandes=f,rn}var Th;function Zf(){if(Th)return Pt;Th=1;var n=wn(),e=gw();return Pt.unweighted=n,Pt.dijkstra=vw(),Pt.bidirectional=n.bidirectional,Pt.singleSource=n.singleSource,Pt.singleSourceLength=n.singleSourceLength,Pt.undirectedSingleSourceLength=n.undirectedSingleSourceLength,Pt.brandes=n.brandes,Pt.edgePathFromNodePath=e.edgePathFromNodePath,Pt}var To,Mh;function yw(){return Mh||(Mh=1,To=Zf()),To}var nn={},Mo,Nh;function mw(){return Nh||(Nh=1,Mo=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),Mo}var Rh;function bw(){if(Rh)return nn;Rh=1;var n=mw();function e(){this.set=new Set,this.stack=[]}e.prototype.has=function(l){return this.set.has(l)},e.prototype.push=function(l){this.stack.push(l),this.set.add(l)},e.prototype.pop=function(){this.set.delete(this.stack.pop())},e.prototype.path=function(l){return this.stack.concat(l)},e.of=function(l,c){var f=new e;return c?f.stack.push(l):f.push(l),f};function t(){this.set=new Set,this.stack=[]}t.prototype.has=function(l){return this.set.has(l)},t.prototype.push=function(l){this.stack.push(l),this.set.add(l[1])},t.prototype.pop=function(){this.set.delete(this.stack.pop()[1])},t.prototype.path=function(l){return this.stack.slice(1).map(function(c){return c[0]}).concat([l[0]])},t.of=function(l,c){var f=new t,p=[null,l];return c?f.stack.push(p):f.push(p),f};function r(l,c,f,p){if(!n(l))throw new Error("graphology-simple-path.allSimplePaths: expecting a graphology instance.");if(!l.hasNode(c))throw new Error('graphology-simple-path.allSimplePaths: expecting: could not find source node "'+c+'" in the graph.');if(!l.hasNode(f))throw new Error('graphology-simple-path.allSimplePaths: expecting: could not find target node "'+f+'" in the graph.');p=p||{};var v=typeof p.maxDepth=="number"?p.maxDepth:1/0;c=""+c,f=""+f;for(var b=c===f,E=[l.outboundNeighbors(c)],S=e.of(c,b),A=[],_,w,k;E.length!==0;)if(w=E[E.length-1],k=w.pop(),!k)E.pop(),S.pop();else{if(S.has(k))continue;k===f&&(_=S.path(k),A.push(_)),S.push(k),!S.has(f)&&E.length<v?E.push(l.outboundNeighbors(k)):S.pop()}return A}function a(l,c){var f=[];return l.forEachOutboundEdge(c,function(p,v,b,E){f.push([p,c===b?E:b])}),f}function o(l,c){var f={},p;l.forEachOutboundEdge(c,function(b,E,S,A){p=c===S?A:S,p in f||(f[p]=[]),f[p].push(b)});var v=[];for(p in f)v.push([f[p],p]);return v}function s(l,c,f,p){if(!n(l))throw new Error("graphology-simple-path.allSimpleEdgePaths: expecting a graphology instance.");if(l.multi)throw new Error("graphology-simple-path.allSimpleEdgePaths: not implemented for multi graphs.");if(!l.hasNode(c))throw new Error('graphology-simple-path.allSimpleEdgePaths: expecting: could not find source node "'+c+'" in the graph.');if(!l.hasNode(f))throw new Error('graphology-simple-path.allSimpleEdgePaths: expecting: could not find target node "'+f+'" in the graph.');p=p||{};var v=typeof p.maxDepth=="number"?p.maxDepth:1/0;c=""+c,f=""+f;for(var b=c===f,E=[a(l,c)],S=t.of(c,b),A=[],_,w,k,m;E.length!==0;)if(k=E[E.length-1],w=k.pop(),!w)E.pop(),S.pop();else{if(m=w[1],S.has(m))continue;m===f&&(_=S.path(w),A.push(_)),S.push(w),!S.has(f)&&E.length<v?E.push(a(l,m)):S.pop()}return A}function u(l,c,f,p){if(!n(l))throw new Error("graphology-simple-path.allSimpleEdgeGroupPaths: expecting a graphology instance.");if(!l.hasNode(c))throw new Error('graphology-simple-path.allSimpleEdgeGroupPaths: expecting: could not find source node "'+c+'" in the graph.');if(!l.hasNode(f))throw new Error('graphology-simple-path.allSimpleEdgeGroupPaths: expecting: could not find target node "'+f+'" in the graph.');p=p||{};var v=typeof p.maxDepth=="number"?p.maxDepth:1/0;c=""+c,f=""+f;for(var b=c===f,E=[o(l,c)],S=t.of(c,b),A=[],_,w,k,m;E.length!==0;)if(k=E[E.length-1],w=k.pop(),!w)E.pop(),S.pop();else{if(m=w[1],S.has(m))continue;m===f&&(_=S.path(w),A.push(_)),S.push(w),!S.has(f)&&E.length<v?E.push(o(l,m)):S.pop()}return A}return nn.allSimplePaths=r,nn.allSimpleEdgePaths=s,nn.allSimpleEdgeGroupPaths=u,nn}var No,$h;function ww(){return $h||($h=1,No=bw()),No}var Tr={},Yn={},Ro,Ph;function Ew(){if(Ph)return Ro;Ph=1;var n=_i();function e(t){this.graph=t,this.queue=new n(Array,t.order),this.seen=new Set,this.size=0}return e.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},e.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},e.prototype.forEachNodeYetUnseen=function(t){var r=this.seen,a=this.graph;a.someNode(function(o,s){if(r.size===a.order)return!0;if(r.has(o))return!1;var u=t(o,s);return!!u})},e.prototype.has=function(t){return this.seen.has(t)},e.prototype.push=function(t){var r=this.seen.size;return this.seen.add(t),r===this.seen.size?!1:(this.queue.push(t),this.size++,!0)},e.prototype.pushWith=function(t,r){var a=this.seen.size;return this.seen.add(t),a===this.seen.size?!1:(this.queue.push(r),this.size++,!0)},e.prototype.shift=function(){var t=this.queue.shift();return this.size=this.queue.size,t},Ro=e,Ro}var Vn={},Gh;function Jf(){if(Gh)return Vn;Gh=1;function n(t,r,a){this.node=t,this.attributes=r,this.depth=a}function e(t){return t[0].toUpperCase()+t.slice(1)}return Vn.TraversalRecord=n,Vn.capitalize=e,Vn}var Oh;function xw(){if(Oh)return Yn;Oh=1;var n=we(),e=Ew(),t=Jf(),r=t.TraversalRecord,a=t.capitalize;function o(s,u,l,c){if(c=c||{},!n(s))throw new Error("graphology-traversal/bfs: expecting a graphology instance.");if(typeof l!="function")throw new Error("graphology-traversal/bfs: given callback is not a function.");if(s.order===0)return;var f=new e(s),p=s["forEach"+a(c.mode||"outbound")+"Neighbor"].bind(s),v;u===null?v=f.forEachNodeYetUnseen.bind(f):v=function(A){u=""+u,A(u,s.getNodeAttributes(u))};var b,E;function S(A,_){f.pushWith(A,new r(A,_,b.depth+1))}v(function(A,_){for(f.pushWith(A,new r(A,_,0));f.size!==0;)b=f.shift(),E=l(b.node,b.attributes,b.depth),E!==!0&&p(b.node,S)})}return Yn.bfs=function(s,u,l){return o(s,null,u,l)},Yn.bfsFromNode=o,Yn}var Qn={},qh;function Sw(){if(qh)return Qn;qh=1;var n=we(),e=If(),t=Jf(),r=t.TraversalRecord,a=t.capitalize;function o(s,u,l,c){if(c=c||{},!n(s))throw new Error("graphology-traversal/dfs: expecting a graphology instance.");if(typeof l!="function")throw new Error("graphology-traversal/dfs: given callback is not a function.");if(s.order===0)return;var f=new e(s),p=s["forEach"+a(c.mode||"outbound")+"Neighbor"].bind(s),v;u===null?v=f.forEachNodeYetUnseen.bind(f):v=function(A){u=""+u,A(u,s.getNodeAttributes(u))};var b,E;function S(A,_){f.pushWith(A,new r(A,_,b.depth+1))}v(function(A,_){for(f.pushWith(A,new r(A,_,0));f.size!==0;)b=f.pop(),E=l(b.node,b.attributes,b.depth),E!==!0&&p(b.node,S)})}return Qn.dfs=function(s,u,l){return o(s,null,u,l)},Qn.dfsFromNode=o,Qn}var Fh;function Aw(){if(Fh)return Tr;Fh=1;var n=xw(),e=Sw();return Tr.bfs=n.bfs,Tr.bfsFromNode=n.bfsFromNode,Tr.dfs=e.dfs,Tr.dfsFromNode=e.dfsFromNode,Tr}var $o,Wh;function _w(){return Wh||(Wh=1,$o=Aw()),$o}var gt={},Po,Uh;function kw(){if(Uh)return Po;Uh=1;var n=we();return Po=function(t){if(!n(t))throw new Error("graphology-utils/infer-multi: expecting a valid graphology instance.");if(!t.multi||t.order===0||t.size<2)return!1;var r=!1,a,o,s,u;return t.forEachAssymetricAdjacencyEntry(function(l,c,f,p,v,b,E){if(!r){if(E&&l>c&&(u=c,c=l,l=u),l===a&&c===o&&E===s){r=!0;return}a=l,o=c,s=E}}),r},Po}var Go,jh;function Dw(){return jh||(jh=1,Go=function(e,t){if(t.length!==0){var r,a,o,s,u;for(o=0,u=t.length;o<u;o++)for(r=t[o],s=o+1;s<u;s++)a=t[s],e.mergeEdge(r,a)}}),Go}var Oo,Bh;function Cw(){return Bh||(Bh=1,Oo=function(e,t){if(t.length!==0){var r,a,o,s;if(e.mergeNode(t[0]),t.length!==1){for(o=1,s=t.length;o<s;o++)r=t[o-1],a=t[o],e.mergeEdge(r,a);e.mergeEdge(a,t[0])}}}),Oo}var qo,Hh;function Iw(){return Hh||(Hh=1,qo=function(e,t){if(t.length!==0){var r,a,o,s;for(e.mergeNode(t[0]),o=1,s=t.length;o<s;o++)r=t[o-1],a=t[o],e.mergeEdge(r,a)}}),qo}var Fo,Kh;function Lw(){if(Kh)return Fo;Kh=1;var n=Lt().copyEdge;return Fo=function(t,r,a){typeof r>"u"&&(r={}),typeof a>"u"&&(a={});var o=t.nullCopy();t.forEachNode(function(l,c){var f=r[l];typeof f>"u"&&(f=l),o.addNode(f,c)});var s,u;return t.forEachAssymetricAdjacencyEntry(function(l,c,f,p,v,b,E){l!==s&&(s=l,u=r[l],typeof u>"u"&&(u=l));var S=r[c];typeof S>"u"&&(S=c);var A=a[v];typeof A>"u"&&(A=v),n(o,E,A,u,S,b)}),o},Fo}var Wo,Xh;function zw(){if(Xh)return Wo;Xh=1;var n=Lt().copyEdge;return Wo=function(t,r,a){var o=t.nullCopy();t.forEachNode(function(l,c){var f=r?r(l,c):l;o.addNode(f,c)});var s,u;return t.forEachAssymetricAdjacencyEntry(function(l,c,f,p,v,b,E){l!==s&&(s=l,u=r?r(l,f):l);var S=r?r(c,p):c,A=a?a(v,b,l,c,f,p,E):v;n(o,E,A,u,S,b)}),o},Wo}var Yh;function Tw(){return Yh||(Yh=1,gt.inferMulti=kw(),gt.inferType=xr(),gt.isGraph=we(),gt.isGraphConstructor=et(),gt.mergeClique=Dw(),gt.mergeCycle=Cw(),gt.mergePath=Iw(),gt.mergeStar=$f(),gt.renameGraphKeys=Lw(),gt.updateGraphKeys=zw()),gt}var Uo,Vh;function ep(){return Vh||(Vh=1,Uo=Tw()),Uo}var jo,Qh;function Mw(){if(Qh)return jo;Qh=1;const{createNodeValueGetter:n,createEdgeValueGetter:e}=ft();return jo=function(r,a,o){const{nodeXAttribute:s,nodeYAttribute:u}=o,{attraction:l,repulsion:c,gravity:f,inertia:p,maxMove:v}=o.settings;let{shouldSkipNode:b,shouldSkipEdge:E,isNodeFixed:S}=o;S=n(S),b=n(b,!1),E=e(E,!1);const A=r.filterNodes((k,m)=>!b.fromEntry(k,m)),_=A.length;for(let k=0;k<_;k++){const m=A[k],C=r.getNodeAttributes(m),$=a[m];$?a[m]={dx:$.dx*p,dy:$.dy*p,x:C[s]||0,y:C[u]||0}:a[m]={dx:0,dy:0,x:C[s]||0,y:C[u]||0}}if(c)for(let k=0;k<_;k++){const m=A[k],C=a[m];for(let $=k+1;$<_;$++){const y=A[$],I=a[y],z=I.x-C.x,T=I.y-C.y,P=Math.sqrt(z*z+T*T)||1,O=c/P*z,R=c/P*T;C.dx-=O,C.dy-=R,I.dx+=O,I.dy+=R}}if(l&&r.forEachEdge((k,m,C,$,y,I,z)=>{if(C===$||b.fromEntry(C,y)||b.fromEntry($,I)||E.fromEntry(k,m,C,$,y,I,z))return;const T=a[C],P=a[$],O=P.x-T.x,R=P.y-T.y,V=Math.sqrt(O*O+R*R)||1,Q=l*V*O,W=l*V*R;T.dx+=Q,T.dy+=W,P.dx-=Q,P.dy-=W}),f)for(let k=0;k<_;k++){const m=A[k],C=a[m],{x:$,y}=C,I=Math.sqrt($*$+y*y)||1;a[m].dx-=$*f*I,a[m].dy-=y*f*I}const w=!1;for(let k=0;k<_;k++){const m=A[k],C=a[m],$=Math.sqrt(C.dx*C.dx+C.dy*C.dy);$>v&&(C.dx*=v/$,C.dy*=v/$),S.fromGraph(r,m)?C.fixed=!0:(C.x+=C.dx,C.y+=C.dy,C.fixed=!1)}return{converged:w}},jo}var Zn={},Zh;function Nw(){return Zh||(Zh=1,Zn.assignLayoutChanges=function(n,e,t){const{nodeXAttribute:r,nodeYAttribute:a}=t;n.updateEachNodeAttributes((o,s)=>{const u=e[o];return!u||u.fixed||(s[r]=u.x,s[a]=u.y),s},{attributes:["x","y"]})},Zn.collectLayoutChanges=function(n){const e={};for(const t in n){const r=n[t];e[t]={x:r.x,y:r.y}}return e}),Zn}var Bo,Jh;function Rw(){return Jh||(Jh=1,Bo={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}}),Bo}var Ho,ed;function $w(){if(ed)return Ho;ed=1;const n=we(),e=Be(),t=Mw(),r=Nw(),a=Rw();function o(s,u){if(!n(s))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");u=e(u,a),this.callbacks={},u.onConverged&&(this.callbacks.onConverged=u.onConverged),this.graph=s,this.params=u,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}return o.prototype.isRunning=function(){return this.running},o.prototype.runFrame=function(){let{converged:s}=t(this.graph,this.nodeStates,this.params);r.assignLayoutChanges(this.graph,this.nodeStates,this.params),s=!1,s?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())},o.prototype.stop=function(){return this.running=!1,this.frameID!==null&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this},o.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())},o.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0},Ho=o,Ho}var Ko,td;function Pw(){return td||(td=1,Ko=function(){var e,t,r={};(function(){var o=0,s=1,u=2,l=3,c=4,f=5,p=6,v=7,b=8,E=9,S=0,A=1,_=2,w=0,k=1,m=2,C=3,$=4,y=5,I=6,z=7,T=8,P=3,O=10,R=3,V=9,Q=10;r.exports=function(L,N,B){var Y,U,F,K,ee,ae,se,le,ie,re,he=N.length,ge=B.length,me=L.adjustSizes,Ie=L.barnesHutTheta*L.barnesHutTheta,pe,oe,Z,Se,Me,xe,ve,te=[];for(F=0;F<he;F+=O)N[F+c]=N[F+u],N[F+f]=N[F+l],N[F+u]=0,N[F+l]=0;if(L.outboundAttractionDistribution){for(pe=0,F=0;F<he;F+=O)pe+=N[F+p];pe/=he/O}if(L.barnesHutOptimize){var Re=1/0,Oe=-1/0,Pe=1/0,Fe=-1/0,Ne,Ge,We;for(F=0;F<he;F+=O)Re=Math.min(Re,N[F+o]),Oe=Math.max(Oe,N[F+o]),Pe=Math.min(Pe,N[F+s]),Fe=Math.max(Fe,N[F+s]);var He=Oe-Re,Xe=Fe-Pe;for(He>Xe?(Pe-=(He-Xe)/2,Fe=Pe+He):(Re-=(Xe-He)/2,Oe=Re+Xe),te[0+w]=-1,te[0+k]=(Re+Oe)/2,te[0+m]=(Pe+Fe)/2,te[0+C]=Math.max(Oe-Re,Fe-Pe),te[0+$]=-1,te[0+y]=-1,te[0+I]=0,te[0+z]=0,te[0+T]=0,Y=1,F=0;F<he;F+=O)for(U=0,We=P;;)if(te[U+y]>=0){N[F+o]<te[U+k]?N[F+s]<te[U+m]?Ne=te[U+y]:Ne=te[U+y]+V:N[F+s]<te[U+m]?Ne=te[U+y]+V*2:Ne=te[U+y]+V*3,te[U+z]=(te[U+z]*te[U+I]+N[F+o]*N[F+p])/(te[U+I]+N[F+p]),te[U+T]=(te[U+T]*te[U+I]+N[F+s]*N[F+p])/(te[U+I]+N[F+p]),te[U+I]+=N[F+p],U=Ne;continue}else if(te[U+w]<0){te[U+w]=F;break}else{if(te[U+y]=Y*V,le=te[U+C]/2,ie=te[U+y],te[ie+w]=-1,te[ie+k]=te[U+k]-le,te[ie+m]=te[U+m]-le,te[ie+C]=le,te[ie+$]=ie+V,te[ie+y]=-1,te[ie+I]=0,te[ie+z]=0,te[ie+T]=0,ie+=V,te[ie+w]=-1,te[ie+k]=te[U+k]-le,te[ie+m]=te[U+m]+le,te[ie+C]=le,te[ie+$]=ie+V,te[ie+y]=-1,te[ie+I]=0,te[ie+z]=0,te[ie+T]=0,ie+=V,te[ie+w]=-1,te[ie+k]=te[U+k]+le,te[ie+m]=te[U+m]-le,te[ie+C]=le,te[ie+$]=ie+V,te[ie+y]=-1,te[ie+I]=0,te[ie+z]=0,te[ie+T]=0,ie+=V,te[ie+w]=-1,te[ie+k]=te[U+k]+le,te[ie+m]=te[U+m]+le,te[ie+C]=le,te[ie+$]=te[U+$],te[ie+y]=-1,te[ie+I]=0,te[ie+z]=0,te[ie+T]=0,Y+=4,N[te[U+w]+o]<te[U+k]?N[te[U+w]+s]<te[U+m]?Ne=te[U+y]:Ne=te[U+y]+V:N[te[U+w]+s]<te[U+m]?Ne=te[U+y]+V*2:Ne=te[U+y]+V*3,te[U+I]=N[te[U+w]+p],te[U+z]=N[te[U+w]+o],te[U+T]=N[te[U+w]+s],te[Ne+w]=te[U+w],te[U+w]=-1,N[F+o]<te[U+k]?N[F+s]<te[U+m]?Ge=te[U+y]:Ge=te[U+y]+V:N[F+s]<te[U+m]?Ge=te[U+y]+V*2:Ge=te[U+y]+V*3,Ne===Ge)if(We--){U=Ne;continue}else{We=P;break}te[Ge+w]=F;break}}if(L.barnesHutOptimize)for(oe=L.scalingRatio,F=0;F<he;F+=O)for(U=0;;)if(te[U+y]>=0)if(xe=Math.pow(N[F+o]-te[U+z],2)+Math.pow(N[F+s]-te[U+T],2),re=te[U+C],4*re*re/xe<Ie){if(Z=N[F+o]-te[U+z],Se=N[F+s]-te[U+T],me===!0?xe>0?(ve=oe*N[F+p]*te[U+I]/xe,N[F+u]+=Z*ve,N[F+l]+=Se*ve):xe<0&&(ve=-oe*N[F+p]*te[U+I]/Math.sqrt(xe),N[F+u]+=Z*ve,N[F+l]+=Se*ve):xe>0&&(ve=oe*N[F+p]*te[U+I]/xe,N[F+u]+=Z*ve,N[F+l]+=Se*ve),U=te[U+$],U<0)break;continue}else{U=te[U+y];continue}else{if(ae=te[U+w],ae>=0&&ae!==F&&(Z=N[F+o]-N[ae+o],Se=N[F+s]-N[ae+s],xe=Z*Z+Se*Se,me===!0?xe>0?(ve=oe*N[F+p]*N[ae+p]/xe,N[F+u]+=Z*ve,N[F+l]+=Se*ve):xe<0&&(ve=-oe*N[F+p]*N[ae+p]/Math.sqrt(xe),N[F+u]+=Z*ve,N[F+l]+=Se*ve):xe>0&&(ve=oe*N[F+p]*N[ae+p]/xe,N[F+u]+=Z*ve,N[F+l]+=Se*ve)),U=te[U+$],U<0)break;continue}else for(oe=L.scalingRatio,K=0;K<he;K+=O)for(ee=0;ee<K;ee+=O)Z=N[K+o]-N[ee+o],Se=N[K+s]-N[ee+s],me===!0?(xe=Math.sqrt(Z*Z+Se*Se)-N[K+b]-N[ee+b],xe>0?(ve=oe*N[K+p]*N[ee+p]/xe/xe,N[K+u]+=Z*ve,N[K+l]+=Se*ve,N[ee+u]-=Z*ve,N[ee+l]-=Se*ve):xe<0&&(ve=100*oe*N[K+p]*N[ee+p],N[K+u]+=Z*ve,N[K+l]+=Se*ve,N[ee+u]-=Z*ve,N[ee+l]-=Se*ve)):(xe=Math.sqrt(Z*Z+Se*Se),xe>0&&(ve=oe*N[K+p]*N[ee+p]/xe/xe,N[K+u]+=Z*ve,N[K+l]+=Se*ve,N[ee+u]-=Z*ve,N[ee+l]-=Se*ve));for(ie=L.gravity/L.scalingRatio,oe=L.scalingRatio,F=0;F<he;F+=O)ve=0,Z=N[F+o],Se=N[F+s],xe=Math.sqrt(Math.pow(Z,2)+Math.pow(Se,2)),L.strongGravityMode?xe>0&&(ve=oe*N[F+p]*ie):xe>0&&(ve=oe*N[F+p]*ie/xe),N[F+u]-=Z*ve,N[F+l]-=Se*ve;for(oe=1*(L.outboundAttractionDistribution?pe:1),se=0;se<ge;se+=R)K=B[se+S],ee=B[se+A],le=B[se+_],Me=Math.pow(le,L.edgeWeightInfluence),Z=N[K+o]-N[ee+o],Se=N[K+s]-N[ee+s],me===!0?(xe=Math.sqrt(Z*Z+Se*Se)-N[K+b]-N[ee+b],L.linLogMode?L.outboundAttractionDistribution?xe>0&&(ve=-oe*Me*Math.log(1+xe)/xe/N[K+p]):xe>0&&(ve=-oe*Me*Math.log(1+xe)/xe):L.outboundAttractionDistribution?xe>0&&(ve=-oe*Me/N[K+p]):xe>0&&(ve=-oe*Me)):(xe=Math.sqrt(Math.pow(Z,2)+Math.pow(Se,2)),L.linLogMode?L.outboundAttractionDistribution?xe>0&&(ve=-oe*Me*Math.log(1+xe)/xe/N[K+p]):xe>0&&(ve=-oe*Me*Math.log(1+xe)/xe):L.outboundAttractionDistribution?(xe=1,ve=-oe*Me/N[K+p]):(xe=1,ve=-oe*Me)),xe>0&&(N[K+u]+=Z*ve,N[K+l]+=Se*ve,N[ee+u]-=Z*ve,N[ee+l]-=Se*ve);var Ye,ct,Et,pt,xt,Ft;if(me===!0)for(F=0;F<he;F+=O)N[F+E]!==1&&(Ye=Math.sqrt(Math.pow(N[F+u],2)+Math.pow(N[F+l],2)),Ye>Q&&(N[F+u]=N[F+u]*Q/Ye,N[F+l]=N[F+l]*Q/Ye),ct=N[F+p]*Math.sqrt((N[F+c]-N[F+u])*(N[F+c]-N[F+u])+(N[F+f]-N[F+l])*(N[F+f]-N[F+l])),Et=Math.sqrt((N[F+c]+N[F+u])*(N[F+c]+N[F+u])+(N[F+f]+N[F+l])*(N[F+f]+N[F+l]))/2,pt=.1*Math.log(1+Et)/(1+Math.sqrt(ct)),xt=N[F+o]+N[F+u]*(pt/L.slowDown),N[F+o]=xt,Ft=N[F+s]+N[F+l]*(pt/L.slowDown),N[F+s]=Ft);else for(F=0;F<he;F+=O)N[F+E]!==1&&(ct=N[F+p]*Math.sqrt((N[F+c]-N[F+u])*(N[F+c]-N[F+u])+(N[F+f]-N[F+l])*(N[F+f]-N[F+l])),Et=Math.sqrt((N[F+c]+N[F+u])*(N[F+c]+N[F+u])+(N[F+f]+N[F+l])*(N[F+f]+N[F+l]))/2,pt=N[F+v]*Math.log(1+Et)/(1+Math.sqrt(ct)),N[F+v]=Math.min(1,Math.sqrt(pt*(Math.pow(N[F+u],2)+Math.pow(N[F+l],2))/(1+Math.sqrt(ct)))),xt=N[F+o]+N[F+u]*(pt/L.slowDown),N[F+o]=xt,Ft=N[F+s]+N[F+l]*(pt/L.slowDown),N[F+s]=Ft);return{}}})();var a=r.exports;self.addEventListener("message",function(o){var s=o.data;e=new Float32Array(s.nodes),s.edges&&(t=new Float32Array(s.edges)),a(s.settings,e,t),self.postMessage({nodes:e.buffer},[e.buffer])})}),Ko}var Xo,rd;function Gw(){if(rd)return Xo;rd=1;var n=Pw(),e=we(),t=ft().createEdgeWeightGetter,r=Of(),a=qf();function o(s,u){if(u=u||{},!e(s))throw new Error("graphology-layout-forceatlas2/worker: the given graph is not a valid graphology instance.");var l=t("getEdgeWeight"in u?u.getEdgeWeight:"weight").fromEntry,c=r.assign({},a,u.settings),f=r.validateSettings(c);if(f)throw new Error("graphology-layout-forceatlas2/worker: "+f.message);this.worker=null,this.graph=s,this.settings=c,this.getEdgeWeight=l,this.matrices=null,this.running=!1,this.killed=!1,this.outputReducer=typeof u.outputReducer=="function"?u.outputReducer:null,this.handleMessage=this.handleMessage.bind(this);var p=void 0,v=this;this.handleGraphUpdate=function(){v.worker&&v.worker.terminate(),p&&clearTimeout(p),p=setTimeout(function(){p=void 0,v.spawnWorker()},0)},s.on("nodeAdded",this.handleGraphUpdate),s.on("edgeAdded",this.handleGraphUpdate),s.on("nodeDropped",this.handleGraphUpdate),s.on("edgeDropped",this.handleGraphUpdate),this.spawnWorker()}return o.prototype.isRunning=function(){return this.running},o.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=r.createWorker(n),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())},o.prototype.handleMessage=function(s){if(this.running){var u=new Float32Array(s.data.nodes);r.assignLayoutChanges(this.graph,u,this.outputReducer),this.outputReducer&&r.readGraphPositions(this.graph,u),this.matrices.nodes=u,this.askForIterations()}},o.prototype.askForIterations=function(s){var u=this.matrices,l={settings:this.settings,nodes:u.nodes.buffer},c=[u.nodes.buffer];return s&&(l.edges=u.edges.buffer,c.push(u.edges.buffer)),this.worker.postMessage(l,c),this},o.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-forceatlas2/worker.start: layout was killed.");return this.running?this:(this.matrices=r.graphToByteArrays(this.graph,this.getEdgeWeight),this.running=!0,this.askForIterations(!0),this)},o.prototype.stop=function(){return this.running=!1,this},o.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleGraphUpdate),this.graph.removeListener("edgeAdded",this.handleGraphUpdate),this.graph.removeListener("nodeDropped",this.handleGraphUpdate),this.graph.removeListener("edgeDropped",this.handleGraphUpdate)},Xo=o,Xo}var Yo,nd;function Ow(){return nd||(nd=1,Yo=function(){var e,t={};(function(){var a=0,o=1,s=2,u=3;function l(f,p){return f+"§"+p}function c(){return .01*(.5-Math.random())}t.exports=function(p,v){var b=p.margin,E=p.ratio,S=p.expansion,A=p.gridSize,_=p.speed,w,k,m,C,$,y,I=!0,z=v.length,T=z/u|0,P=new Float32Array(T),O=new Float32Array(T),R=1/0,V=1/0,Q=-1/0,W=-1/0;for(w=0;w<z;w+=u)m=v[w+a],C=v[w+o],y=v[w+s]*E+b,R=Math.min(R,m-y),Q=Math.max(Q,m+y),V=Math.min(V,C-y),W=Math.max(W,C+y);var L=Q-R,N=W-V,B=(R+Q)/2,Y=(V+W)/2;R=B-S*L/2,Q=B+S*L/2,V=Y-S*N/2,W=Y+S*N/2;var U=new Array(A*A),F=U.length,K;for(K=0;K<F;K++)U[K]=[];var ee,ae,se,le,ie,re,he,ge,me,Ie;for(w=0;w<z;w+=u)for(m=v[w+a],C=v[w+o],y=v[w+s]*E+b,ee=m-y,ae=m+y,se=C-y,le=C+y,ie=Math.floor(A*(ee-R)/(Q-R)),re=Math.floor(A*(ae-R)/(Q-R)),he=Math.floor(A*(se-V)/(W-V)),ge=Math.floor(A*(le-V)/(W-V)),me=ie;me<=re;me++)for(Ie=he;Ie<=ge;Ie++)U[me*A+Ie].push(w);var pe,oe=new Set,Z,Se,Me,xe,ve,te,Re,Oe,Pe,Fe,Ne,Ge,We;for(K=0;K<F;K++)for(pe=U[K],w=0,$=pe.length;w<$;w++)for(Z=pe[w],Me=v[Z+a],ve=v[Z+o],Re=v[Z+s],k=w+1;k<$;k++)Se=pe[k],Pe=l(Z,Se),!(F>1&&oe.has(Pe))&&(F>1&&oe.add(Pe),xe=v[Se+a],te=v[Se+o],Oe=v[Se+s],Fe=xe-Me,Ne=te-ve,Ge=Math.sqrt(Fe*Fe+Ne*Ne),We=Ge<Re*E+b+(Oe*E+b),We&&(I=!1,Se=Se/u|0,Ge>0?(P[Se]+=Fe/Ge*(1+Re),O[Se]+=Ne/Ge*(1+Re)):(P[Se]+=L*c(),O[Se]+=N*c())));for(w=0,k=0;w<z;w+=u,k++)v[w+a]+=P[k]*.1*_,v[w+o]+=O[k]*.1*_;return{converged:I}}})();var r=t.exports;self.addEventListener("message",function(a){var o=a.data;e=new Float32Array(o.nodes);var s=r(o.settings,e);self.postMessage({result:s,nodes:e.buffer},[e.buffer])})}),Yo}var Vo,id;function qw(){if(id)return Vo;id=1;var n=Ow(),e=we(),t=Wf(),r=Uf();function a(o,s){if(s=s||{},!e(o))throw new Error("graphology-layout-noverlap/worker: the given graph is not a valid graphology instance.");var u=Object.assign({},r,s.settings),l=t.validateSettings(u);if(l)throw new Error("graphology-layout-noverlap/worker: "+l.message);this.worker=null,this.graph=o,this.settings=u,this.matrices=null,this.running=!1,this.killed=!1,this.inputReducer=s.inputReducer,this.outputReducer=s.outputReducer,this.callbacks={onConverged:typeof s.onConverged=="function"?s.onConverged:null},this.handleMessage=this.handleMessage.bind(this);var c=!1,f=this;this.handleAddition=function(){c||(c=!0,f.spawnWorker(),setTimeout(function(){c=!1},0))},o.on("nodeAdded",this.handleAddition),o.on("edgeAdded",this.handleAddition),this.spawnWorker()}return a.prototype.isRunning=function(){return this.running},a.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=t.createWorker(n),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())},a.prototype.handleMessage=function(o){if(this.running){var s=new Float32Array(o.data.nodes);if(t.assignLayoutChanges(this.graph,s,this.outputReducer),this.matrices.nodes=s,o.data.result.converged){this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop();return}this.askForIterations()}},a.prototype.askForIterations=function(){var o=this.matrices,s={settings:this.settings,nodes:o.nodes.buffer},u=[o.nodes.buffer];return this.worker.postMessage(s,u),this},a.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-noverlap/worker.start: layout was killed.");return this.running?this:(this.matrices={nodes:t.graphToByteArray(this.graph,this.inputReducer)},this.running=!0,this.askForIterations(),this)},a.prototype.stop=function(){return this.running=!1,this},a.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleAddition),this.graph.removeListener("edgeAdded",this.handleAddition)},Vo=a,Vo}var Jn={},ei={},ad;function tp(){if(ad)return ei;ad=1,ei.cast=function(e,t){switch(e){case"boolean":t=t==="true";break;case"integer":case"long":case"float":case"double":t=+t;break;case"liststring":t=t?t.split("|"):[];break}return t};var n=/["'<>&\s]/g;return ei.sanitizeTagName=function(t){return t.replace(n,"").trim()},ei}var Qo,od;function Fw(){if(od)return Qo;od=1;var n=et(),e=Lt().mergeEdge,t=nu(),r=iu(),a=tp(),o=a.cast;function s(v){return v!==v}function u(v){var b=v.getAttribute("a"),E=v.getAttribute("r"),S=v.getAttribute("g"),A=v.getAttribute("b");return b?"rgba("+E+","+S+","+A+","+b+")":"rgb("+E+","+S+","+A+")"}function l(v,b){var E=v.getElementsByTagName("viz:"+b)[0];return E||(E=v.getElementsByTagNameNS("viz",b)[0]),E||(E=v.getElementsByTagName(b)[0]),E}function c(v){for(var b={},E,S,A=0,_=v.length;A<_;A++)E=v[A],E.nodeName!=="#text"&&(S=E.textContent.trim(),S&&(b[E.tagName.toLowerCase()]=E.textContent));return b}function f(v){for(var b={},E={},S,A,_,w=0,k=v.length;w<k;w++)S=v[w],_=S.getAttribute("id")||S.getAttribute("for"),b[_]={id:_,type:S.getAttribute("type")||"string",title:s(+_)?_:S.getAttribute("title")||_},A=S.getElementsByTagName("default")[0],A&&(E[b[_].title]=o(b[_].type,A.textContent));return[b,E]}function p(v,b,E){var S={},A=E.getAttribute("label"),_=E.getAttribute("weight");A&&(S.label=A),_&&(S.weight=+_);for(var w=E.getElementsByTagName("attvalue"),k,m,C=0,$=w.length;C<$;C++)k=w[C],m=k.getAttribute("id")||k.getAttribute("for"),S[v[m].title]=o(v[m].type,k.getAttribute("value"));var y;for(y in b)y in S||(S[y]=b[y]);var I=l(E,"color");I&&(S.color=u(I)),I=l(E,"size"),I&&(S.size=+I.getAttribute("value"));var z,T,P;return I=l(E,"position"),I&&(z=I.getAttribute("x"),T=I.getAttribute("y"),P=I.getAttribute("z"),z&&(S.x=+z),T&&(S.y=+T),P&&(S.z=+P)),I=l(E,"shape"),I&&(S.shape=I.getAttribute("value")),I=l(E,"thickness"),I&&(S.thickness=+I.getAttribute("value")),S}return Qo=function(b,E){return function(A,_,w){w=w||{};var k=w.addMissingNodes===!0,m,C=_,$,y,I,z,T,P,O,R,V;if(!n(A))throw new Error("graphology-gexf/parser: invalid Graph constructor.");if(typeof _=="string"&&(C=new b().parseFromString(_,"application/xml")),!(C instanceof E))throw new Error("graphology-gexf/parser: source should either be a XML document or a string.");var Q=C.getElementsByTagName("graph")[0],W=C.getElementsByTagName("meta")[0],L=W&&W.childNodes||[],N=C.getElementsByTagName("node"),B=C.getElementsByTagName("edge"),Y=C.getElementsByTagName("attributes"),U=[],F=[];for(R=0,V=Y.length;R<V;R++)$=Y[R],$.getAttribute("class")==="node"?U=$.getElementsByTagName("attribute"):$.getAttribute("class")==="edge"&&(F=$.getElementsByTagName("attribute"));var K=Q.getAttribute("defaultedgetype")||"undirected";K==="mutual"&&(K="undirected"),y=f(U);var ee=y[0],ae=y[1];y=f(F);var se=y[0],le=y[1],ie=B[0]?B[0].getAttribute("type")||K:"mixed",re=new A({type:ie}),he=c(L),ge=W&&W.getAttribute("lastmodifieddate");for(re.replaceAttributes(he),ge&&re.setAttribute("lastModifiedDate",ge),R=0,V=N.length;R<V;R++)$=N[R],re.addNode($.getAttribute("id"),p(ee,ae,$));for(R=0,V=B.length;R<V;R++)if($=B[R],T=$.getAttribute("id"),I=$.getAttribute("type")||K,P=$.getAttribute("source"),O=$.getAttribute("target"),z=p(se,le,$),I!==re.type&&re.type!=="mixed"&&(re=t(re)),!re.multi&&(I==="directed"&&re.hasDirectedEdge(P,O)||re.hasUndirectedEdge(P,O))&&(re=r(re)),m=e(re,I!=="directed",T||null,P,O,z),!k&&(m[2]||m[3]))throw new Error("graphology-gexf/parser: one of your gexf file edges points to an inexisting node. Set the parser `addMissingNodes` option to `true` if you do not care.");return re}},Qo}var Zo,sd;function Ww(){if(sd)return Zo;sd=1;var n=Fw();return Zo=n(DOMParser,Document),Zo}var Jo,ud;function Uw(){if(ud)return Jo;ud=1;function n(r){return typeof r!="number"&&!r}function e(r){if(typeof r=="string")return r;if(typeof r=="number")return r+"";if(typeof r=="function")return r();if(r instanceof t)return r.toString();throw Error("Bad Parameter")}function t(r,a){if(!(this instanceof t))return new t;this.name_regex=/[_:A-Za-z][-._:A-Za-z0-9]*/,this.indent=!!r,this.indentString=this.indent&&typeof r=="string"?r:"    ",this.output="",this.stack=[],this.tags=0,this.attributes=0,this.attribute=0,this.texts=0,this.comment=0,this.dtd=0,this.root="",this.pi=0,this.cdata=0,this.started_write=!1,this.writer,this.writer_encoding="UTF-8",typeof a=="function"?this.writer=a:this.writer=function(o,s){this.output+=o}}return t.prototype={toString:function(){return this.flush(),this.output},indenter:function(){if(this.indent){this.write(`
`);for(var r=1;r<this.tags;r++)this.write(this.indentString)}},write:function(){for(var r=0;r<arguments.length;r++)this.writer(arguments[r],this.writer_encoding)},flush:function(){for(var r=this.tags;r>0;r--)this.endElement();this.tags=0},startDocument:function(r,a,o){return this.tags||this.attributes?this:(this.startPI("xml"),this.startAttribute("version"),this.text(typeof r=="string"?r:"1.0"),this.endAttribute(),typeof a=="string"&&(this.startAttribute("encoding"),this.text(a),this.endAttribute(),this.writer_encoding=a),o&&(this.startAttribute("standalone"),this.text("yes"),this.endAttribute()),this.endPI(),this.indent||this.write(`
`),this)},endDocument:function(){return this.attributes&&this.endAttributes(),this},writeElement:function(r,a){return this.startElement(r).text(a).endElement()},writeElementNS:function(r,a,o,s){return s||(s=o),this.startElementNS(r,a,o).text(s).endElement()},startElement:function(r){if(r=e(r),!r.match(this.name_regex)||this.tags===0&&this.root&&this.root!==r)throw Error("Invalid Parameter");return this.attributes&&this.endAttributes(),++this.tags,this.texts=0,this.stack.length>0&&(this.stack[this.stack.length-1].containsTag=!0),this.stack.push({name:r,tags:this.tags}),this.started_write&&this.indenter(),this.write("<",r),this.startAttributes(),this.started_write=!0,this},startElementNS:function(r,a,o){if(r=e(r),a=e(a),!r.match(this.name_regex)||!a.match(this.name_regex))throw Error("Invalid Parameter");return this.attributes&&this.endAttributes(),++this.tags,this.texts=0,this.stack.length>0&&(this.stack[this.stack.length-1].containsTag=!0),this.stack.push({name:r+":"+a,tags:this.tags}),this.started_write&&this.indenter(),this.write("<",r+":"+a),this.startAttributes(),this.started_write=!0,this},endElement:function(){if(!this.tags)return this;var r=this.stack.pop();return this.attributes>0?(this.attribute&&(this.texts&&this.endAttribute(),this.endAttribute()),this.write("/"),this.endAttributes()):(r.containsTag&&this.indenter(),this.write("</",r.name,">")),--this.tags,this.texts=0,this},writeAttribute:function(r,a){return typeof a=="function"&&(a=a()),n(a)?this:this.startAttribute(r).text(a).endAttribute()},writeAttributeNS:function(r,a,o,s){return s||(s=o),typeof s=="function"&&(s=s()),n(s)?this:this.startAttributeNS(r,a,o).text(s).endAttribute()},startAttributes:function(){return this.attributes=1,this},endAttributes:function(){return this.attributes?(this.attribute&&this.endAttribute(),this.attributes=0,this.attribute=0,this.texts=0,this.write(">"),this):this},startAttribute:function(r){if(r=e(r),!r.match(this.name_regex))throw Error("Invalid Parameter");return!this.attributes&&!this.pi?this:this.attribute?this:(this.attribute=1,this.write(" ",r,'="'),this)},startAttributeNS:function(r,a,o){if(r=e(r),a=e(a),!r.match(this.name_regex)||!a.match(this.name_regex))throw Error("Invalid Parameter");return!this.attributes&&!this.pi?this:this.attribute?this:(this.attribute=1,this.write(" ",r+":"+a,'="'),this)},endAttribute:function(){return this.attribute?(this.attribute=0,this.texts=0,this.write('"'),this):this},text:function(r){return r=e(r),!this.tags&&!this.comment&&!this.pi&&!this.cdata?this:this.attributes&&this.attribute?(++this.texts,this.write(r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")),this):(this.attributes&&!this.attribute&&this.endAttributes(),this.comment||this.cdata?this.write(r):this.write(r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),++this.texts,this.started_write=!0,this)},writeComment:function(r){return this.startComment().text(r).endComment()},startComment:function(){return this.comment?this:(this.attributes&&this.endAttributes(),this.indenter(),this.write("<!--"),this.comment=1,this.started_write=!0,this)},endComment:function(){return this.comment?(this.write("-->"),this.comment=0,this):this},writeDocType:function(r,a,o,s){return this.startDocType(r,a,o,s).endDocType()},startDocType:function(r,a,o,s){if(this.dtd||this.tags)return this;if(r=e(r),a=a&&e(a),o=o&&e(o),s=s&&e(s),!r.match(this.name_regex)||a&&!a.match(/^[\w\-][\w\s\-\/\+\:\.]*/)||o&&!o.match(/^[\w\.][\w\-\/\\\:\.]*/)||s&&!s.match(/[\w\s\<\>\+\.\!\#\-\?\*\,\(\)\|]*/))throw Error("Invalid Parameter");return a=a?' PUBLIC "'+a+'"':o?" SYSTEM":"",o=o?' "'+o+'"':"",s=s?" ["+s+"]":"",this.started_write&&this.indenter(),this.write("<!DOCTYPE ",r,a,o,s),this.root=r,this.dtd=1,this.started_write=!0,this},endDocType:function(){return this.dtd?(this.write(">"),this):this},writePI:function(r,a){return this.startPI(r).text(a).endPI()},startPI:function(r){if(r=e(r),!r.match(this.name_regex))throw Error("Invalid Parameter");return this.pi?this:(this.attributes&&this.endAttributes(),this.started_write&&this.indenter(),this.write("<?",r),this.pi=1,this.started_write=!0,this)},endPI:function(){return this.pi?(this.write("?>"),this.pi=0,this):this},writeCData:function(r){return this.startCData().text(r).endCData()},startCData:function(){return this.cdata?this:(this.attributes&&this.endAttributes(),this.indenter(),this.write("<![CDATA["),this.cdata=1,this.started_write=!0,this)},endCData:function(){return this.cdata?(this.write("]]>"),this.cdata=0,this):this},writeRaw:function(r){return r=e(r),!this.tags&&!this.comment&&!this.pi&&!this.cdata?this:this.attributes&&this.attribute?(++this.texts,this.write(r.replace("&","&amp;").replace('"',"&quot;")),this):(this.attributes&&!this.attribute&&this.endAttributes(),++this.texts,this.write(r),this.started_write=!0,this)}},Jo=t,Jo}var es,ld;function jw(){return ld||(ld=1,es=Uw()),es}var ts,cd;function Bw(){if(cd)return ts;cd=1;var n=we(),e=xr(),t=jw(),r=tp().sanitizeTagName,a="http://www.gexf.net/1.2draft",o="http:///www.gexf.net/1.1draft/viz",s=new Set(["color","size","x","y","z","shape","thickness"]),u=/^\s*rgba?\s*\(/i,l=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)\s*(?:,\s*([.0-9]*))?\)\s*$/;function c(y){if(!y||typeof y!="string")return{};if(y[0]==="#")return y=y.slice(1),y.length===3?{r:parseInt(y[0]+y[0],16),g:parseInt(y[1]+y[1],16),b:parseInt(y[2]+y[2],16)}:{r:parseInt(y[0]+y[1],16),g:parseInt(y[2]+y[3],16),b:parseInt(y[4]+y[5],16)};if(u.test(y)){var I={};return y=y.match(l),I.r=+y[1],I.g=+y[2],I.b=+y[3],y[4]&&(I.a=+y[4]),I}return{}}function f(y,I,z){var T={},P;for(P in z)P==="label"?T.label=z.label:y==="edge"&&P==="weight"?T.weight=z.weight:s.has(P)?(T.viz=T.viz||{},T.viz[P]=z[P]):(T.attributes=T.attributes||{},T.attributes[P]=z[P]);return T}var p=f.bind(null,"node"),v=f.bind(null,"edge");function b(y){return y<=2147483647&&y>=-2147483647}function E(y){return typeof y>"u"||y===null||y===""||y!==y}function S(y){return E(y)?"empty":Array.isArray(y)?"liststring":typeof y=="boolean"?"boolean":typeof y=="object"?"string":typeof y=="number"?y===(y|0)?b(y)?"integer":"long":"double":"string"}function A(y,I){return y==="liststring"&&Array.isArray(I)?I.join("|"):""+I}function _(y,I){var z=new Array(y.order),T=0;return y.forEachNode(function(P,O){var R=I(P,O);R.key=P,z[T++]=R}),z}function w(y,I){var z=new Array(y.size),T=0;return y.forEachEdge(function(P,O,R,V,Q,W,L){var N=I(P,O);N.key=P,N.source=R,N.target=V,N.undirected=L,z[T++]=N}),z}function k(y){for(var I={},z,T,P,O=0,R=y.length;O<R;O++)if(z=y[O].attributes,!!z)for(P in z)T=S(z[P]),T!=="empty"&&(I[P]?I[P]==="integer"&&T==="long"?I[P]=T:I[P]!==T&&(I[P]="string"):I[P]=T);return I}function m(y,I,z){var T;if(Object.keys(I).length){y.startElement("attributes"),y.writeAttribute("class",z);for(T in I)y.startElement("attribute"),y.writeAttribute("id",T),y.writeAttribute("title",T),y.writeAttribute("type",I[T]),y.endElement();y.endElement()}}function C(y,I,z,T){var P=!Object.keys(z).length,O,R,V,Q,W,L,N,B,Y,U,F;for(y.startElement(I+"s"),U=0,F=T.length;U<F;U++){if(O=T[U],L=O.attributes,B=O.viz,y.startElement(I),y.writeAttribute("id",O.key),I==="edge"&&(W=O.undirected?"undirected":"directed",W!==y.defaultEdgeType&&y.writeAttribute("type",W),y.writeAttribute("source",O.source),y.writeAttribute("target",O.target),N=O.weight,(typeof N=="number"&&!isNaN(N)||typeof N=="string")&&y.writeAttribute("weight",O.weight)),O.label&&y.writeAttribute("label",O.label),!P&&L){y.startElement("attvalues");for(R in z)if(R in L){if(Q=L[R],E(Q))continue;y.startElement("attvalue"),y.writeAttribute("for",R),y.writeAttribute("value",A(z[R],Q)),y.endElement()}y.endElement()}if(B){if(B.color){V=c(B.color),y.startElementNS("viz","color");for(Y in V)y.writeAttribute(Y,V[Y]);y.endElement()}"size"in B&&(y.startElementNS("viz","size"),y.writeAttribute("value",B.size),y.endElement()),("x"in B||"y"in B||"z"in B)&&(y.startElementNS("viz","position"),"x"in B&&y.writeAttribute("x",B.x),"y"in B&&y.writeAttribute("y",B.y),"z"in B&&y.writeAttribute("z",B.z),y.endElement()),B.shape&&(y.startElementNS("viz","shape"),y.writeAttribute("value",B.shape),y.endElement()),"thickness"in B&&(y.startElementNS("viz","thickness"),y.writeAttribute("value",B.thickness),y.endElement())}y.endElement()}y.endElement()}var $={encoding:"UTF-8",pretty:!0,formatNode:p,formatEdge:v};return ts=function(I,z){if(!n(I))throw new Error("graphology-gexf/writer: invalid graphology instance.");z=z||{};var T=z.pretty===!1?!1:"  ",P=z.formatNode||$.formatNode,O=z.formatEdge||$.formatEdge,R=new t(T);R.startDocument("1.0",z.encoding||$.encoding),R.startElement("gexf"),R.writeAttribute("version","1.2"),R.writeAttribute("xmlns",a),R.writeAttribute("xmlns:viz",o),R.startElement("meta");var V=I.getAttributes();V.lastModifiedDate&&R.writeAttribute("lastmodifieddate",V.lastModifiedDate);var Q,W;for(var L in V)L!=="lastModifiedDate"&&(Q=r(L),Q&&(W=V[L],(typeof W=="string"||typeof W=="number"||typeof W=="boolean")&&R.writeElement(Q,""+W)));R.endElement(),R.startElement("graph");var N=e(I);R.defaultEdgeType=N==="mixed"?"directed":N,R.writeAttribute("defaultedgetype",R.defaultEdgeType);var B=_(I,P),Y=w(I,O),U=k(B);m(R,U,"node");var F=k(Y);return m(R,F,"edge"),C(R,"node",U,B),C(R,"edge",F,Y),R.toString()},ts}var hd;function Hw(){return hd||(hd=1,Jn.parse=Ww(),Jn.write=Bw()),Jn}var rs={},ns={},dd;function Kw(){if(dd)return ns;dd=1;function n(a){return("0"+(a|0).toString(16)).slice(-2)}function e(a,o,s){return"#"+n(a)+n(o)+n(s)}function t(a){var o={};for(var s in a)s==="r"||s==="g"||s==="b"||(o[s]=a[s]);return o}function r(a){var o;return typeof a.r=="number"&&typeof a.g=="number"&&typeof a.b=="number"?(o=t(a),o.color=e(a.r,a.g,a.b),o):a}return ns.DEFAULT_FORMATTER=r,ns}var is,fd;function Xw(){if(fd)return is;fd=1;var n=et(),e=Lt().mergeEdge,t=nu(),r=iu(),a=Kw(),o=a.DEFAULT_FORMATTER;function s(v){return+v}function u(v){return v}var l={boolean:function(v){return v.toLowerCase()==="true"},int:s,long:s,float:s,double:s,string:u};function c(v){for(var b=v.childNodes,E=[],S,A=0,_=b.length;A<_;A++)if(S=b[A],S.nodeType===1){if(S.tagName.toLowerCase()!=="data")break;E.push(S)}return E}function f(v){var b,E,S,A,_,w,k,m,C,$={graph:{},node:{},edge:{}},y={graph:{},node:{},edge:{}};for(b=0,E=v.length;b<E;b++)k=v[b],S=k.getAttribute("for")||"node",A=k.getAttribute("id"),_=k.getAttribute("attr.name"),w=k.getAttribute("attr.type")||"string",C=void 0,m=k.getElementsByTagName("default"),m.length!==0&&(C=m[0].textContent),$[S][A]={name:_,cast:l[w]},typeof C<"u"&&(y[S][_]=C);return{models:$,defaults:y}}function p(v,b,E){var S=E.getElementsByTagName("data"),A,_,w,k,m,C={};for(_=0,w=S.length;_<w;_++)A=S[_],k=A.getAttribute("key"),m=v[k],typeof m>"u"?C[k]=A.textContent:C[m.name]=m.cast(A.textContent);for(k in b)k in C||(C[k]=b[k]);return C}return is=function(b,E){return function(A,_,w){w=w||{};var k=w.addMissingNodes===!0,m,C=_;if(!n(A))throw new Error("graphology-graphml/parser: invalid Graph constructor.");if(typeof _=="string"&&(C=new b().parseFromString(_,"application/xml")),!(C instanceof E))throw new Error("graphology-gexf/parser: source should either be a XML document or a string.");var $=C.getElementsByTagName("graph")[0],y=c($),I=C.getElementsByTagName("key"),z=C.getElementsByTagName("node"),T=C.getElementsByTagName("edge"),P=$.getAttribute("edgedefault")||"undirected",O=f(I),R=new A({type:P}),V=$.getAttribute("id");V&&R.setAttribute("id",V);var Q=C.createElement("graph");y.forEach(function(se){Q.appendChild(se)});var W=p(O.models.graph,O.defaults.graph,Q);R.mergeAttributes(W);var L,N,B,Y,U;for(L=0,N=z.length;L<N;L++)B=z[L],Y=B.getAttribute("id"),U=p(O.models.node,O.defaults.node,B),U=o(U),R.addNode(Y,U);var F,K,ee,ae;for(L=0,N=T.length;L<N;L++)if(F=T[L],Y=F.getAttribute("id"),K=F.getAttribute("source"),ee=F.getAttribute("target"),ae=F.getAttribute("directed")==="true"?"directed":P,U=p(O.models.edge,O.defaults.edge,F),U=o(U),!R.type!=="mixed"&&ae!==R.type&&(R=t(R)),R.multi||(ae==="undirected"?R.hasUndirectedEdge(K,ee)&&(R=r(R)):R.hasDirectedEdge(K,ee)&&(R=r(R))),m=e(R,ae==="undirected",Y||null,K,ee,U),!k&&(m[2]||m[3]))throw new Error("graphology-graphml/parser: one of your graphml file edges points to an inexisting node. Set the parser `addMissingNodes` option to `true` if you do not care.");return R}},is}var as,pd;function Yw(){if(pd)return as;pd=1;var n=Xw();return as=n(DOMParser,Document),as}var gd;function Vw(){return gd||(gd=1,rs.parse=Yw()),rs}var vd;function Qw(){return vd||(vd=1,Ue.assertions=Cf(),Ue.canvas=Zm(),Ue.communitiesLouvain=ib(),Ue.components=ab(),Ue.generators=wb(),Ue.layout=Gf(),Ue.layoutForce=Db(),Ue.layoutForceAtlas2=Ib(),Ue.layoutNoverlap=zb(),Ue.metrics=ow(),Ue.operators=pw(),Ue.shortestPath=yw(),Ue.simplePath=ww(),Ue.traversal=_w(),Ue.utils=ep(),Ue.ForceLayout=$w(),Ue.FA2Layout=Gw(),Ue.NoverlapLayout=qw(),Ue.gexf=Hw(),Ue.graphml=Vw()),Ue}Qw();class Zw{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.appSettings.settings,this._canvas={main:{canvas:nt("#main-canvas").node(),ctx:nt("#main-canvas").node().getContext("2d")},node:{canvas:nt("#node-canvas").node(),ctx:nt("#node-canvas").node().getContext("2d")},edge:{canvas:nt("#edge-canvas").node(),ctx:nt("#edge-canvas").node().getContext("2d")},face:{canvas:nt("#face-canvas").node(),ctx:nt("#face-canvas").node().getContext("2d")}},this.canvas=nt("#main-canvas").node(),this.ctx=this.canvas.getContext("2d"),this.mouse={x:0,y:0,dragging:!1}}init(){this.updateCanvasSize(window.innerWidth,window.innerHeight),this.canvas.addEventListener("dblclick",this.handleDbclick.bind(this)),this.canvas.addEventListener("click",this.handleclick.bind(this));let e=0;this.canvas.addEventListener("touchend",t=>{const r=new Date().getTime(),a=r-e;a<300&&a>0&&this.handleDbclick(t),e=r}),nt("#main-canvas").on("mousedown",t=>{this.mouse.dragging=!1,[this.mouse.x,this.mouse.y]=mt(t)}).on("mousemove",t=>{const[r,a]=mt(t);(Math.abs(r-this.mouse.x)>2||Math.abs(a-this.mouse.y)>2)&&(this.mouse.dragging=!0)}).on("mouseup",t=>{this.mouse.dragging||([this.mouse.x,this.mouse.y]=mt(t))}),nt(this.canvas).call(k0().container(this.canvas).subject(this.dragsubject.bind(this)).filter(t=>!(this.settings.scale||this.settings.select)).on("start",this.dragstarted.bind(this)).on("drag",this.dragged.bind(this)).on("end",this.dragended.bind(this)))}updateCanvasSize(e,t){for(const r in this._canvas)this._canvas[r].canvas.width=e,this._canvas[r].canvas.height=t}addNodeAtEvent(e){e.preventDefault();const[t,r]=e.type=="touchend"?yd(e,this.canvas):mt(e,this.canvas),a=Ki(this.app.graphManager.graph.nodes()),o=dn(a);this.app.graphManager.addNode(a,{x:t,y:r,color:this.settings.node_color,label:o})}addNodeConnectedToNode(e){const t=Ki(this.app.graphManager.graph.nodes()),r=dn(t),a={x:e.x+30,y:e.y+30,color:this.settings.node_color,label:r};this.app.graphManager.addNode(t,a),this.app.graphManager.graph.addEdge(e.id,t),this.eventBus.emit("graph:updated",{type:"addNode",node:t})}dragsubject(e){let t={id:null},r=1/0;return this.app.nodes.forEach(a=>{const o=e.x-a.x,s=e.y-a.y,u=Math.sqrt(o*o+s*s);u<this.settings.node_radius*a.size&&u<r&&(r=u,t=a)}),t&&(this.settings.component?t.component=this.app.graphManager.metric.getComponent(t.id):t.component=this.app.graphManager.graph.getSelectedNodes()),this.settings.panning&&(t.component=this.app.graphManager.graph.nodes()),t}dragstarted(e){!e.active&&this.settings.forceSimulation&&this.app.simulation.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y,e.subject.__moved=!1,e.subject.id!==null&&(this.canvas.style.cursor="grab")}dragged(e){if(e.subject.fx=e.x,e.subject.fy=e.y,(e.dx!==0||e.dy!==0)&&(e.subject.__moved=!0),!this.settings.forceSimulation&&e.subject.component){for(let t of e.subject.component)this.app.graphManager.graph.updateNodeAttributes(t,r=>({...r,x:r.x+e.dx,y:r.y+e.dy}));e.subject.id!==null&&!this.settings.performance&&(this.canvas.style.cursor="grabbing",this.app.graphManager.graph.updateNodeAttributes(e.subject.id,t=>({...t,x:e.x,y:e.y})))}}dragended(e){e.active||this.app.simulation.alphaTarget(0),e.subject.fx=null,e.subject.fy=null,e.subject.x=e.x,e.subject.y=e.y,this.canvas.style.cursor="default",this.settings.forceSimulation||this.app.updateSimulation(),e.subject.__moved&&e.subject.id&&!this.settings.forceSimulation&&(e.subject.id!==null&&this.app.graphManager.graph.updateNodeAttributes(e.subject.id,t=>({...t,x:e.x,y:e.y})),this.app.graphManager.saveGraphState())}findClickedNode(e,t){return this.app.nodes.find(r=>{let a=e-r.x,o=t-r.y;return Math.sqrt(a*a+o*o)<this.settings.node_radius*r.size})}findClickedEdge(e,t){let r=10;return this.app.links.find(a=>{let o=a.source,s=a.target;return Fm(e,t,o.x,o.y,s.x,s.y)<r})}insertNodeInEdge(e){const t=Ki(this.app.graphManager.graph.nodes()),r=dn(t);let a=(e.source.x+e.target.x)/2,o=(e.source.y+e.target.y)/2;this.app.graphManager.graph.addNode(t,{x:a,y:o,color:this.settings.color,label:r}),this.app.graphManager.graph.dropEdge(e.source.id,e.target.id),this.app.graphManager.graph.addEdge(e.source.id,t),this.app.graphManager.graph.addEdge(t,e.target.id),this.eventBus.emit("graph:updated",{type:"addNodeInEdge",node:t})}handleDbclick(e){const[t,r]=e.type=="touchend"?yd(e,this.canvas):mt(e,this.canvas);let a=this.findClickedNode(t,r),o=this.findClickedEdge(t,r);a?this.settings.tree?this.addNodeConnectedToNode(a):this.app.graphManager.graph.toggleNodeSelection(a.id):o?this.settings.tree?this.insertNodeInEdge(o):this.app.graphManager.graph.findEdge(o.source.id,o.target.id,s=>{this.app.graphManager.graph.toggleEdgeSelection(s)}):this.addNodeAtEvent(e)}handleclick(e){if(this.mouse.dragging)return;let[t,r]=mt(e,this.canvas),a=this.findClickedNode(t,r),o=this.findClickedEdge(t,r);a?this.settings.select?(this.app.graphManager.graph.toggleNodeSelection(a.id),this.settings.forceSimulation||this.eventBus.emit("graph:updated",{type:"selected"})):(this.app.graphManager.metric.addNodeInfo(a),this.settings.colorPicker&&(this.app.colorPicker.setColor("node",a.color),this.app.colorPicker.setColor("stroke",a.stroke),this.app.colorPicker.setColor("label",a.labelColor))):o?this.settings.select?this.app.graphManager.graph.findEdge(o.source.id,o.target.id,s=>{this.app.graphManager.graph.toggleEdgeSelection(s),this.settings.forceSimulation||this.eventBus.emit("graph:updated",{type:"selected"})}):(this.app.graphManager.metric.addEdgeInfo(o),this.settings.colorPicker&&(this.app.colorPicker.setColor("edge",o.color),this.app.colorPicker.setColor("label",o.labelColor))):(this.app.graphManager.deselectAll(),this.app.rect.scale.active=!1)}}function yd(n,e){const t=n.changedTouches[0],r=e.getBoundingClientRect();return[t.clientX-r.left,t.clientY-r.top]}var ti={exports:{}},md;function Jw(){if(md)return ti.exports;md=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(C,$,y){return Function.prototype.apply.call(C,$,y)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))}:t=function(C){return Object.getOwnPropertyNames(C)};function r(m){console&&console.warn&&console.warn(m)}var a=Number.isNaN||function(C){return C!==C};function o(){o.init.call(this)}ti.exports=o,ti.exports.once=_,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(m){if(typeof m!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof m)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(m){if(typeof m!="number"||m<0||a(m))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+m+".");s=m}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+C+".");return this._maxListeners=C,this};function l(m){return m._maxListeners===void 0?o.defaultMaxListeners:m._maxListeners}o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(C){for(var $=[],y=1;y<arguments.length;y++)$.push(arguments[y]);var I=C==="error",z=this._events;if(z!==void 0)I=I&&z.error===void 0;else if(!I)return!1;if(I){var T;if($.length>0&&(T=$[0]),T instanceof Error)throw T;var P=new Error("Unhandled error."+(T?" ("+T.message+")":""));throw P.context=T,P}var O=z[C];if(O===void 0)return!1;if(typeof O=="function")e(O,this,$);else for(var R=O.length,V=E(O,R),y=0;y<R;++y)e(V[y],this,$);return!0};function c(m,C,$,y){var I,z,T;if(u($),z=m._events,z===void 0?(z=m._events=Object.create(null),m._eventsCount=0):(z.newListener!==void 0&&(m.emit("newListener",C,$.listener?$.listener:$),z=m._events),T=z[C]),T===void 0)T=z[C]=$,++m._eventsCount;else if(typeof T=="function"?T=z[C]=y?[$,T]:[T,$]:y?T.unshift($):T.push($),I=l(m),I>0&&T.length>I&&!T.warned){T.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=m,P.type=C,P.count=T.length,r(P)}return m}o.prototype.addListener=function(C,$){return c(this,C,$,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(C,$){return c(this,C,$,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(m,C,$){var y={fired:!1,wrapFn:void 0,target:m,type:C,listener:$},I=f.bind(y);return I.listener=$,y.wrapFn=I,I}o.prototype.once=function(C,$){return u($),this.on(C,p(this,C,$)),this},o.prototype.prependOnceListener=function(C,$){return u($),this.prependListener(C,p(this,C,$)),this},o.prototype.removeListener=function(C,$){var y,I,z,T,P;if(u($),I=this._events,I===void 0)return this;if(y=I[C],y===void 0)return this;if(y===$||y.listener===$)--this._eventsCount===0?this._events=Object.create(null):(delete I[C],I.removeListener&&this.emit("removeListener",C,y.listener||$));else if(typeof y!="function"){for(z=-1,T=y.length-1;T>=0;T--)if(y[T]===$||y[T].listener===$){P=y[T].listener,z=T;break}if(z<0)return this;z===0?y.shift():S(y,z),y.length===1&&(I[C]=y[0]),I.removeListener!==void 0&&this.emit("removeListener",C,P||$)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(C){var $,y,I;if(y=this._events,y===void 0)return this;if(y.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):y[C]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete y[C]),this;if(arguments.length===0){var z=Object.keys(y),T;for(I=0;I<z.length;++I)T=z[I],T!=="removeListener"&&this.removeAllListeners(T);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if($=y[C],typeof $=="function")this.removeListener(C,$);else if($!==void 0)for(I=$.length-1;I>=0;I--)this.removeListener(C,$[I]);return this};function v(m,C,$){var y=m._events;if(y===void 0)return[];var I=y[C];return I===void 0?[]:typeof I=="function"?$?[I.listener||I]:[I]:$?A(I):E(I,I.length)}o.prototype.listeners=function(C){return v(this,C,!0)},o.prototype.rawListeners=function(C){return v(this,C,!1)},o.listenerCount=function(m,C){return typeof m.listenerCount=="function"?m.listenerCount(C):b.call(m,C)},o.prototype.listenerCount=b;function b(m){var C=this._events;if(C!==void 0){var $=C[m];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function E(m,C){for(var $=new Array(C),y=0;y<C;++y)$[y]=m[y];return $}function S(m,C){for(;C+1<m.length;C++)m[C]=m[C+1];m.pop()}function A(m){for(var C=new Array(m.length),$=0;$<C.length;++$)C[$]=m[$].listener||m[$];return C}function _(m,C){return new Promise(function($,y){function I(T){m.removeListener(C,z),y(T)}function z(){typeof m.removeListener=="function"&&m.removeListener("error",I),$([].slice.call(arguments))}k(m,C,z,{once:!0}),C!=="error"&&w(m,I,{once:!0})})}function w(m,C,$){typeof m.on=="function"&&k(m,"error",C,$)}function k(m,C,$,y){if(typeof m.on=="function")y.once?m.once(C,$):m.on(C,$);else if(typeof m.addEventListener=="function")m.addEventListener(C,function I(z){y.once&&m.removeEventListener(C,I),$(z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof m)}return ti.exports}var e1=Jw(),t1=Jt();const wt=st(t1);var os,bd;function rp(){if(bd)return os;bd=1;var n=Jt(),e=Bf(),t=e.ARRAY_BUFFER_SUPPORT,r=e.SYMBOL_SUPPORT;function a(o){return typeof o=="string"||Array.isArray(o)||t&&ArrayBuffer.isView(o)?n.fromSequence(o):typeof o!="object"||o===null?null:r&&typeof o[Symbol.iterator]=="function"?o[Symbol.iterator]():typeof o.next=="function"?o:null}return os=function(s){var u=a(s);if(!u)throw new Error("obliterator: target is not iterable nor a valid iterator.");return u},os}var ss,wd;function r1(){if(wd)return ss;wd=1;var n=rp();return ss=function(t,r){for(var a=arguments.length>1?r:1/0,o=a!==1/0?new Array(a):[],s,u=0,l=n(t);;){if(u===a)return o;if(s=l.next(),s.done)return u!==r&&(o.length=u),o;o[u++]=s.value}},ss}var n1=r1();const np=st(n1);var us,Ed;function i1(){if(Ed)return us;Ed=1;var n=Jt(),e=rp();return us=function(){var r=arguments,a=null,o=-1;return new n(function(){var u=null;do{if(a===null){if(o++,o>=r.length)return{done:!0};a=e(r[o])}if(u=a.next(),u.done===!0){a=null;continue}break}while(!0);return u})},us}var a1=i1();const Qt=st(a1);function o1(){const n=arguments[0];for(let e=1,t=arguments.length;e<t;e++)if(arguments[e])for(const r in arguments[e])n[r]=arguments[e][r];return n}let Ke=o1;typeof Object.assign=="function"&&(Ke=Object.assign);function bt(n,e,t,r){const a=n._nodes.get(e);let o=null;return a&&(r==="mixed"?o=a.out&&a.out[t]||a.undirected&&a.undirected[t]:r==="directed"?o=a.out&&a.out[t]:o=a.undirected&&a.undirected[t]),o}function Ve(n){return typeof n=="object"&&n!==null}function ip(n){let e;for(e in n)return!1;return!0}function vt(n,e,t){Object.defineProperty(n,e,{enumerable:!1,configurable:!1,writable:!0,value:t})}function Dt(n,e,t){const r={enumerable:!0,configurable:!0};typeof t=="function"?r.get=t:(r.value=t,r.writable=!1),Object.defineProperty(n,e,r)}function xd(n){return!(!Ve(n)||n.attributes&&!Array.isArray(n.attributes))}function s1(){let n=Math.floor(Math.random()*256)&255;return()=>n++}class au extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}let be=class ap extends au{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ap.prototype.constructor)}};class fe extends au{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,fe.prototype.constructor)}}class ke extends au{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ke.prototype.constructor)}}function op(n,e){this.key=n,this.attributes=e,this.clear()}op.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function sp(n,e){this.key=n,this.attributes=e,this.clear()}sp.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function up(n,e){this.key=n,this.attributes=e,this.clear()}up.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Wr(n,e,t,r,a){this.key=e,this.attributes=a,this.undirected=n,this.source=t,this.target=r}Wr.prototype.attach=function(){let n="out",e="in";this.undirected&&(n=e="undirected");const t=this.source.key,r=this.target.key;this.source[n][r]=this,!(this.undirected&&t===r)&&(this.target[e][t]=this)};Wr.prototype.attachMulti=function(){let n="out",e="in";const t=this.source.key,r=this.target.key;this.undirected&&(n=e="undirected");const a=this.source[n],o=a[r];if(typeof o>"u"){a[r]=this,this.undirected&&t===r||(this.target[e][t]=this);return}o.previous=this,this.next=o,a[r]=this,this.target[e][t]=this};Wr.prototype.detach=function(){const n=this.source.key,e=this.target.key;let t="out",r="in";this.undirected&&(t=r="undirected"),delete this.source[t][e],delete this.target[r][n]};Wr.prototype.detachMulti=function(){const n=this.source.key,e=this.target.key;let t="out",r="in";this.undirected&&(t=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][e],delete this.target[r][n]):(this.next.previous=void 0,this.source[t][e]=this.next,this.target[r][n]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const lp=0,cp=1,u1=2,hp=3;function er(n,e,t,r,a,o,s){let u,l,c,f;if(r=""+r,t===lp){if(u=n._nodes.get(r),!u)throw new fe(`Graph.${e}: could not find the "${r}" node in the graph.`);c=a,f=o}else if(t===hp){if(a=""+a,l=n._edges.get(a),!l)throw new fe(`Graph.${e}: could not find the "${a}" edge in the graph.`);const p=l.source.key,v=l.target.key;if(r===p)u=l.target;else if(r===v)u=l.source;else throw new fe(`Graph.${e}: the "${r}" node is not attached to the "${a}" edge (${p}, ${v}).`);c=o,f=s}else{if(l=n._edges.get(r),!l)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`);t===cp?u=l.source:u=l.target,c=a,f=o}return[u,c,f]}function l1(n,e,t){n.prototype[e]=function(r,a,o){const[s,u]=er(this,e,t,r,a,o);return s.attributes[u]}}function c1(n,e,t){n.prototype[e]=function(r,a){const[o]=er(this,e,t,r,a);return o.attributes}}function h1(n,e,t){n.prototype[e]=function(r,a,o){const[s,u]=er(this,e,t,r,a,o);return s.attributes.hasOwnProperty(u)}}function d1(n,e,t){n.prototype[e]=function(r,a,o,s){const[u,l,c]=er(this,e,t,r,a,o,s);return u.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:l}),this}}function f1(n,e,t){n.prototype[e]=function(r,a,o,s){const[u,l,c]=er(this,e,t,r,a,o,s);if(typeof c!="function")throw new be(`Graph.${e}: updater should be a function.`);const f=u.attributes,p=c(f[l]);return f[l]=p,this.emit("nodeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:l}),this}}function p1(n,e,t){n.prototype[e]=function(r,a,o){const[s,u]=er(this,e,t,r,a,o);return delete s.attributes[u],this.emit("nodeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:u}),this}}function g1(n,e,t){n.prototype[e]=function(r,a,o){const[s,u]=er(this,e,t,r,a,o);if(!Ve(u))throw new be(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=u,this.emit("nodeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function v1(n,e,t){n.prototype[e]=function(r,a,o){const[s,u]=er(this,e,t,r,a,o);if(!Ve(u))throw new be(`Graph.${e}: provided attributes are not a plain object.`);return Ke(s.attributes,u),this.emit("nodeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:u}),this}}function y1(n,e,t){n.prototype[e]=function(r,a,o){const[s,u]=er(this,e,t,r,a,o);if(typeof u!="function")throw new be(`Graph.${e}: provided updater is not a function.`);return s.attributes=u(s.attributes),this.emit("nodeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const m1=[{name:n=>`get${n}Attribute`,attacher:l1},{name:n=>`get${n}Attributes`,attacher:c1},{name:n=>`has${n}Attribute`,attacher:h1},{name:n=>`set${n}Attribute`,attacher:d1},{name:n=>`update${n}Attribute`,attacher:f1},{name:n=>`remove${n}Attribute`,attacher:p1},{name:n=>`replace${n}Attributes`,attacher:g1},{name:n=>`merge${n}Attributes`,attacher:v1},{name:n=>`update${n}Attributes`,attacher:y1}];function b1(n){m1.forEach(function({name:e,attacher:t}){t(n,e("Node"),lp),t(n,e("Source"),cp),t(n,e("Target"),u1),t(n,e("Opposite"),hp)})}function w1(n,e,t){n.prototype[e]=function(r,a){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new ke(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ke(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+a;if(a=arguments[2],o=bt(this,s,u,t),!o)throw new fe(`Graph.${e}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(t!=="mixed")throw new ke(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[a]}}function E1(n,e,t){n.prototype[e]=function(r){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new ke(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new ke(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,s=""+arguments[1];if(a=bt(this,o,s,t),!a)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(t!=="mixed")throw new ke(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return a.attributes}}function x1(n,e,t){n.prototype[e]=function(r,a){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new ke(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ke(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+a;if(a=arguments[2],o=bt(this,s,u,t),!o)throw new fe(`Graph.${e}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(t!=="mixed")throw new ke(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes.hasOwnProperty(a)}}function S1(n,e,t){n.prototype[e]=function(r,a,o){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new ke(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ke(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+r,l=""+a;if(a=arguments[2],o=arguments[3],s=bt(this,u,l,t),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${u}" - "${l}").`)}else{if(t!=="mixed")throw new ke(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[a]=o,this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:a}),this}}function A1(n,e,t){n.prototype[e]=function(r,a,o){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new ke(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ke(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+r,l=""+a;if(a=arguments[2],o=arguments[3],s=bt(this,u,l,t),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${u}" - "${l}").`)}else{if(t!=="mixed")throw new ke(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof o!="function")throw new be(`Graph.${e}: updater should be a function.`);return s.attributes[a]=o(s.attributes[a]),this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:a}),this}}function _1(n,e,t){n.prototype[e]=function(r,a){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new ke(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ke(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+a;if(a=arguments[2],o=bt(this,s,u,t),!o)throw new fe(`Graph.${e}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(t!=="mixed")throw new ke(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete o.attributes[a],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function k1(n,e,t){n.prototype[e]=function(r,a){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new ke(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ke(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+a;if(a=arguments[2],o=bt(this,s,u,t),!o)throw new fe(`Graph.${e}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(t!=="mixed")throw new ke(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Ve(a))throw new be(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function D1(n,e,t){n.prototype[e]=function(r,a){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new ke(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ke(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+a;if(a=arguments[2],o=bt(this,s,u,t),!o)throw new fe(`Graph.${e}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(t!=="mixed")throw new ke(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Ve(a))throw new be(`Graph.${e}: provided attributes are not a plain object.`);return Ke(o.attributes,a),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function C1(n,e,t){n.prototype[e]=function(r,a){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new ke(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ke(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,u=""+a;if(a=arguments[2],o=bt(this,s,u,t),!o)throw new fe(`Graph.${e}: could not find an edge for the given path ("${s}" - "${u}").`)}else{if(t!=="mixed")throw new ke(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof a!="function")throw new be(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const I1=[{name:n=>`get${n}Attribute`,attacher:w1},{name:n=>`get${n}Attributes`,attacher:E1},{name:n=>`has${n}Attribute`,attacher:x1},{name:n=>`set${n}Attribute`,attacher:S1},{name:n=>`update${n}Attribute`,attacher:A1},{name:n=>`remove${n}Attribute`,attacher:_1},{name:n=>`replace${n}Attributes`,attacher:k1},{name:n=>`merge${n}Attributes`,attacher:D1},{name:n=>`update${n}Attributes`,attacher:C1}];function L1(n){I1.forEach(function({name:e,attacher:t}){t(n,e("Edge"),"mixed"),t(n,e("DirectedEdge"),"directed"),t(n,e("UndirectedEdge"),"undirected")})}const z1=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function T1(n,e,t,r){let a=!1;for(const o in e){if(o===r)continue;const s=e[o];if(a=t(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),n&&a)return s.key}}function M1(n,e,t,r){let a,o,s,u=!1;for(const l in e)if(l!==r){a=e[l];do{if(o=a.source,s=a.target,u=t(a.key,a.attributes,o.key,s.key,o.attributes,s.attributes,a.undirected),n&&u)return a.key;a=a.next}while(a!==void 0)}}function ls(n,e){const t=Object.keys(n),r=t.length;let a,o=0;return new wt(function(){do if(a)a=a.next;else{if(o>=r)return{done:!0};const u=t[o++];if(u===e){a=void 0;continue}a=n[u]}while(!a);return{done:!1,value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected}}})}function N1(n,e,t,r){const a=e[t];if(!a)return;const o=a.source,s=a.target;if(r(a.key,a.attributes,o.key,s.key,o.attributes,s.attributes,a.undirected)&&n)return a.key}function R1(n,e,t,r){let a=e[t];if(!a)return;let o=!1;do{if(o=r(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),n&&o)return a.key;a=a.next}while(a!==void 0)}function cs(n,e){let t=n[e];return t.next!==void 0?new wt(function(){if(!t)return{done:!0};const r={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:r}}):wt.of({edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected})}function $1(n,e){if(n.size===0)return[];if(e==="mixed"||e===n.type)return typeof Array.from=="function"?Array.from(n._edges.keys()):np(n._edges.keys(),n._edges.size);const t=e==="undirected"?n.undirectedSize:n.directedSize,r=new Array(t),a=e==="undirected",o=n._edges.values();let s=0,u,l;for(;u=o.next(),u.done!==!0;)l=u.value,l.undirected===a&&(r[s++]=l.key);return r}function dp(n,e,t,r){if(e.size===0)return;const a=t!=="mixed"&&t!==e.type,o=t==="undirected";let s,u,l=!1;const c=e._edges.values();for(;s=c.next(),s.done!==!0;){if(u=s.value,a&&u.undirected!==o)continue;const{key:f,attributes:p,source:v,target:b}=u;if(l=r(f,p,v.key,b.key,v.attributes,b.attributes,u.undirected),n&&l)return f}}function P1(n,e){if(n.size===0)return wt.empty();const t=e!=="mixed"&&e!==n.type,r=e==="undirected",a=n._edges.values();return new wt(function(){let s,u;for(;;){if(s=a.next(),s.done)return s;if(u=s.value,!(t&&u.undirected!==r))break}return{value:{edge:u.key,attributes:u.attributes,source:u.source.key,target:u.target.key,sourceAttributes:u.source.attributes,targetAttributes:u.target.attributes,undirected:u.undirected},done:!1}})}function ou(n,e,t,r,a,o){const s=e?M1:T1;let u;if(t!=="undirected"&&(r!=="out"&&(u=s(n,a.in,o),n&&u)||r!=="in"&&(u=s(n,a.out,o,r?void 0:a.key),n&&u))||t!=="directed"&&(u=s(n,a.undirected,o),n&&u))return u}function G1(n,e,t,r){const a=[];return ou(!1,n,e,t,r,function(o){a.push(o)}),a}function O1(n,e,t){let r=wt.empty();return n!=="undirected"&&(e!=="out"&&typeof t.in<"u"&&(r=Qt(r,ls(t.in))),e!=="in"&&typeof t.out<"u"&&(r=Qt(r,ls(t.out,e?void 0:t.key)))),n!=="directed"&&typeof t.undirected<"u"&&(r=Qt(r,ls(t.undirected))),r}function su(n,e,t,r,a,o,s){const u=t?R1:N1;let l;if(e!=="undirected"&&(typeof a.in<"u"&&r!=="out"&&(l=u(n,a.in,o,s),n&&l)||typeof a.out<"u"&&r!=="in"&&(r||a.key!==o)&&(l=u(n,a.out,o,s),n&&l))||e!=="directed"&&typeof a.undirected<"u"&&(l=u(n,a.undirected,o,s),n&&l))return l}function q1(n,e,t,r,a){const o=[];return su(!1,n,e,t,r,a,function(s){o.push(s)}),o}function F1(n,e,t,r){let a=wt.empty();return n!=="undirected"&&(typeof t.in<"u"&&e!=="out"&&r in t.in&&(a=Qt(a,cs(t.in,r))),typeof t.out<"u"&&e!=="in"&&r in t.out&&(e||t.key!==r)&&(a=Qt(a,cs(t.out,r)))),n!=="directed"&&typeof t.undirected<"u"&&r in t.undirected&&(a=Qt(a,cs(t.undirected,r))),a}function W1(n,e){const{name:t,type:r,direction:a}=e;n.prototype[t]=function(o,s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return $1(this,r);if(arguments.length===1){o=""+o;const u=this._nodes.get(o);if(typeof u>"u")throw new fe(`Graph.${t}: could not find the "${o}" node in the graph.`);return G1(this.multi,r==="mixed"?this.type:r,a,u)}if(arguments.length===2){o=""+o,s=""+s;const u=this._nodes.get(o);if(!u)throw new fe(`Graph.${t}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(s))throw new fe(`Graph.${t}:  could not find the "${s}" target node in the graph.`);return q1(r,this.multi,a,u,s)}throw new be(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function U1(n,e){const{name:t,type:r,direction:a}=e,o="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[o]=function(c,f,p){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return p=c,dp(!1,this,r,p);if(arguments.length===2){c=""+c,p=f;const v=this._nodes.get(c);if(typeof v>"u")throw new fe(`Graph.${o}: could not find the "${c}" node in the graph.`);return ou(!1,this.multi,r==="mixed"?this.type:r,a,v,p)}if(arguments.length===3){c=""+c,f=""+f;const v=this._nodes.get(c);if(!v)throw new fe(`Graph.${o}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(f))throw new fe(`Graph.${o}:  could not find the "${f}" target node in the graph.`);return su(!1,r,this.multi,a,v,f,p)}throw new be(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const s="map"+t[0].toUpperCase()+t.slice(1);n.prototype[s]=function(){const c=Array.prototype.slice.call(arguments),f=c.pop();let p;if(c.length===0){let v=0;r!=="directed"&&(v+=this.undirectedSize),r!=="undirected"&&(v+=this.directedSize),p=new Array(v);let b=0;c.push((E,S,A,_,w,k,m)=>{p[b++]=f(E,S,A,_,w,k,m)})}else p=[],c.push((v,b,E,S,A,_,w)=>{p.push(f(v,b,E,S,A,_,w))});return this[o].apply(this,c),p};const u="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[u]=function(){const c=Array.prototype.slice.call(arguments),f=c.pop(),p=[];return c.push((v,b,E,S,A,_,w)=>{f(v,b,E,S,A,_,w)&&p.push(v)}),this[o].apply(this,c),p};const l="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new be(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new be(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f,p;c.length===2?(f=c[0],p=c[1],c=[]):c.length===3?(f=c[1],p=c[2],c=[c[0]]):c.length===4&&(f=c[2],p=c[3],c=[c[0],c[1]]);let v=p;return c.push((b,E,S,A,_,w,k)=>{v=f(v,b,E,S,A,_,w,k)}),this[o].apply(this,c),v}}function j1(n,e){const{name:t,type:r,direction:a}=e,o="find"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[o]=function(l,c,f){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return f=l,dp(!0,this,r,f);if(arguments.length===2){l=""+l,f=c;const p=this._nodes.get(l);if(typeof p>"u")throw new fe(`Graph.${o}: could not find the "${l}" node in the graph.`);return ou(!0,this.multi,r==="mixed"?this.type:r,a,p,f)}if(arguments.length===3){l=""+l,c=""+c;const p=this._nodes.get(l);if(!p)throw new fe(`Graph.${o}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new fe(`Graph.${o}:  could not find the "${c}" target node in the graph.`);return su(!0,r,this.multi,a,p,c,f)}throw new be(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const s="some"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((p,v,b,E,S,A,_)=>c(p,v,b,E,S,A,_)),!!this[o].apply(this,l)};const u="every"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[u]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((p,v,b,E,S,A,_)=>!c(p,v,b,E,S,A,_)),!this[o].apply(this,l)}}function B1(n,e){const{name:t,type:r,direction:a}=e,o=t.slice(0,-1)+"Entries";n.prototype[o]=function(s,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return wt.empty();if(!arguments.length)return P1(this,r);if(arguments.length===1){s=""+s;const l=this._nodes.get(s);if(!l)throw new fe(`Graph.${o}: could not find the "${s}" node in the graph.`);return O1(r,a,l)}if(arguments.length===2){s=""+s,u=""+u;const l=this._nodes.get(s);if(!l)throw new fe(`Graph.${o}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(u))throw new fe(`Graph.${o}:  could not find the "${u}" target node in the graph.`);return F1(r,a,l,u)}throw new be(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function H1(n){z1.forEach(e=>{W1(n,e),U1(n,e),j1(n,e),B1(n,e)})}const K1=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Di(){this.A=null,this.B=null}Di.prototype.wrap=function(n){this.A===null?this.A=n:this.B===null&&(this.B=n)};Di.prototype.has=function(n){return this.A!==null&&n in this.A||this.B!==null&&n in this.B};function an(n,e,t,r,a){for(const o in r){const s=r[o],u=s.source,l=s.target,c=u===t?l:u;if(e&&e.has(c.key))continue;const f=a(c.key,c.attributes);if(n&&f)return c.key}}function uu(n,e,t,r,a){if(e!=="mixed"){if(e==="undirected")return an(n,null,r,r.undirected,a);if(typeof t=="string")return an(n,null,r,r[t],a)}const o=new Di;let s;if(e!=="undirected"){if(t!=="out"){if(s=an(n,null,r,r.in,a),n&&s)return s;o.wrap(r.in)}if(t!=="in"){if(s=an(n,o,r,r.out,a),n&&s)return s;o.wrap(r.out)}}if(e!=="directed"&&(s=an(n,o,r,r.undirected,a),n&&s))return s}function X1(n,e,t){if(n!=="mixed"){if(n==="undirected")return Object.keys(t.undirected);if(typeof e=="string")return Object.keys(t[e])}const r=[];return uu(!1,n,e,t,function(a){r.push(a)}),r}function on(n,e,t){const r=Object.keys(t),a=r.length;let o=0;return new wt(function(){let u=null;do{if(o>=a)return n&&n.wrap(t),{done:!0};const l=t[r[o++]],c=l.source,f=l.target;if(u=c===e?f:c,n&&n.has(u.key)){u=null;continue}}while(u===null);return{done:!1,value:{neighbor:u.key,attributes:u.attributes}}})}function Y1(n,e,t){if(n!=="mixed"){if(n==="undirected")return on(null,t,t.undirected);if(typeof e=="string")return on(null,t,t[e])}let r=wt.empty();const a=new Di;return n!=="undirected"&&(e!=="out"&&(r=Qt(r,on(a,t,t.in))),e!=="in"&&(r=Qt(r,on(a,t,t.out)))),n!=="directed"&&(r=Qt(r,on(a,t,t.undirected))),r}function V1(n,e){const{name:t,type:r,direction:a}=e;n.prototype[t]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new fe(`Graph.${t}: could not find the "${o}" node in the graph.`);return X1(r==="mixed"?this.type:r,a,s)}}function Q1(n,e){const{name:t,type:r,direction:a}=e,o="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[o]=function(c,f){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const p=this._nodes.get(c);if(typeof p>"u")throw new fe(`Graph.${o}: could not find the "${c}" node in the graph.`);uu(!1,r==="mixed"?this.type:r,a,p,f)};const s="map"+t[0].toUpperCase()+t.slice(1);n.prototype[s]=function(c,f){const p=[];return this[o](c,(v,b)=>{p.push(f(v,b))}),p};const u="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[u]=function(c,f){const p=[];return this[o](c,(v,b)=>{f(v,b)&&p.push(v)}),p};const l="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(c,f,p){if(arguments.length<3)throw new be(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let v=p;return this[o](c,(b,E)=>{v=f(v,b,E)}),v}}function Z1(n,e){const{name:t,type:r,direction:a}=e,o=t[0].toUpperCase()+t.slice(1,-1),s="find"+o;n.prototype[s]=function(c,f){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const p=this._nodes.get(c);if(typeof p>"u")throw new fe(`Graph.${s}: could not find the "${c}" node in the graph.`);return uu(!0,r==="mixed"?this.type:r,a,p,f)};const u="some"+o;n.prototype[u]=function(c,f){return!!this[s](c,f)};const l="every"+o;n.prototype[l]=function(c,f){return!this[s](c,(v,b)=>!f(v,b))}}function J1(n,e){const{name:t,type:r,direction:a}=e,o=t.slice(0,-1)+"Entries";n.prototype[o]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return wt.empty();s=""+s;const u=this._nodes.get(s);if(typeof u>"u")throw new fe(`Graph.${o}: could not find the "${s}" node in the graph.`);return Y1(r==="mixed"?this.type:r,a,u)}}function eE(n){K1.forEach(e=>{V1(n,e),Q1(n,e),Z1(n,e),J1(n,e)})}function ri(n,e,t,r,a){const o=r._nodes.values(),s=r.type;let u,l,c,f,p,v;for(;u=o.next(),u.done!==!0;){let b=!1;if(l=u.value,s!=="undirected"){f=l.out;for(c in f){p=f[c];do v=p.target,b=!0,a(l.key,v.key,l.attributes,v.attributes,p.key,p.attributes,p.undirected),p=p.next;while(p)}}if(s!=="directed"){f=l.undirected;for(c in f)if(!(e&&l.key>c)){p=f[c];do v=p.target,v.key!==c&&(v=p.source),b=!0,a(l.key,v.key,l.attributes,v.attributes,p.key,p.attributes,p.undirected),p=p.next;while(p)}}t&&!b&&a(l.key,null,l.attributes,null,null,null,null)}}function tE(n,e){const t={key:n};return ip(e.attributes)||(t.attributes=Ke({},e.attributes)),t}function rE(n,e,t){const r={key:e,source:t.source.key,target:t.target.key};return ip(t.attributes)||(r.attributes=Ke({},t.attributes)),n==="mixed"&&t.undirected&&(r.undirected=!0),r}function nE(n){if(!Ve(n))throw new be('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in n))throw new be("Graph.import: serialized node is missing its key.");if("attributes"in n&&(!Ve(n.attributes)||n.attributes===null))throw new be("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function iE(n){if(!Ve(n))throw new be('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in n))throw new be("Graph.import: serialized edge is missing its source.");if(!("target"in n))throw new be("Graph.import: serialized edge is missing its target.");if("attributes"in n&&(!Ve(n.attributes)||n.attributes===null))throw new be("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in n&&typeof n.undirected!="boolean")throw new be("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const aE=s1(),oE=new Set(["directed","undirected","mixed"]),Sd=new Set(["domain","_events","_eventsCount","_maxListeners"]),sE=[{name:n=>`${n}Edge`,generateKey:!0},{name:n=>`${n}DirectedEdge`,generateKey:!0,type:"directed"},{name:n=>`${n}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:n=>`${n}EdgeWithKey`},{name:n=>`${n}DirectedEdgeWithKey`,type:"directed"},{name:n=>`${n}UndirectedEdgeWithKey`,type:"undirected"}],uE={allowSelfLoops:!0,multi:!1,type:"mixed"};function lE(n,e,t){if(t&&!Ve(t))throw new be(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(e=""+e,t=t||{},n._nodes.has(e))throw new ke(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new n.NodeDataClass(e,t);return n._nodes.set(e,r),n.emit("nodeAdded",{key:e,attributes:t}),r}function Ad(n,e,t){const r=new n.NodeDataClass(e,t);return n._nodes.set(e,r),n.emit("nodeAdded",{key:e,attributes:t}),r}function fp(n,e,t,r,a,o,s,u){if(!r&&n.type==="undirected")throw new ke(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&n.type==="directed")throw new ke(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(u&&!Ve(u))throw new be(`Graph.${e}: invalid attributes. Expecting an object but got "${u}"`);if(o=""+o,s=""+s,u=u||{},!n.allowSelfLoops&&o===s)throw new ke(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=n._nodes.get(o),c=n._nodes.get(s);if(!l)throw new fe(`Graph.${e}: source node "${o}" not found.`);if(!c)throw new fe(`Graph.${e}: target node "${s}" not found.`);const f={key:null,undirected:r,source:o,target:s,attributes:u};if(t)a=n._edgeKeyGenerator();else if(a=""+a,n._edges.has(a))throw new ke(`Graph.${e}: the "${a}" edge already exists in the graph.`);if(!n.multi&&(r?typeof l.undirected[s]<"u":typeof l.out[s]<"u"))throw new ke(`Graph.${e}: an edge linking "${o}" to "${s}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const p=new Wr(r,a,l,c,u);n._edges.set(a,p);const v=o===s;return r?(l.undirectedDegree++,c.undirectedDegree++,v&&(l.undirectedLoops++,n._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,v&&(l.directedLoops++,n._directedSelfLoopCount++)),n.multi?p.attachMulti():p.attach(),r?n._undirectedSize++:n._directedSize++,f.key=a,n.emit("edgeAdded",f),a}function cE(n,e,t,r,a,o,s,u,l){if(!r&&n.type==="undirected")throw new ke(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&n.type==="directed")throw new ke(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(u){if(l){if(typeof u!="function")throw new be(`Graph.${e}: invalid updater function. Expecting a function but got "${u}"`)}else if(!Ve(u))throw new be(`Graph.${e}: invalid attributes. Expecting an object but got "${u}"`)}o=""+o,s=""+s;let c;if(l&&(c=u,u=void 0),!n.allowSelfLoops&&o===s)throw new ke(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let f=n._nodes.get(o),p=n._nodes.get(s),v,b;if(!t&&(v=n._edges.get(a),v)){if((v.source.key!==o||v.target.key!==s)&&(!r||v.source.key!==s||v.target.key!==o))throw new ke(`Graph.${e}: inconsistency detected when attempting to merge the "${a}" edge with "${o}" source & "${s}" target vs. ("${v.source.key}", "${v.target.key}").`);b=v}if(!b&&!n.multi&&f&&(b=r?f.undirected[s]:f.out[s]),b){const w=[b.key,!1,!1,!1];if(l?!c:!u)return w;if(l){const k=b.attributes;b.attributes=c(k),n.emit("edgeAttributesUpdated",{type:"replace",key:b.key,attributes:b.attributes})}else Ke(b.attributes,u),n.emit("edgeAttributesUpdated",{type:"merge",key:b.key,attributes:b.attributes,data:u});return w}u=u||{},l&&c&&(u=c(u));const E={key:null,undirected:r,source:o,target:s,attributes:u};if(t)a=n._edgeKeyGenerator();else if(a=""+a,n._edges.has(a))throw new ke(`Graph.${e}: the "${a}" edge already exists in the graph.`);let S=!1,A=!1;f||(f=Ad(n,o,{}),S=!0,o===s&&(p=f,A=!0)),p||(p=Ad(n,s,{}),A=!0),v=new Wr(r,a,f,p,u),n._edges.set(a,v);const _=o===s;return r?(f.undirectedDegree++,p.undirectedDegree++,_&&(f.undirectedLoops++,n._undirectedSelfLoopCount++)):(f.outDegree++,p.inDegree++,_&&(f.directedLoops++,n._directedSelfLoopCount++)),n.multi?v.attachMulti():v.attach(),r?n._undirectedSize++:n._directedSize++,E.key=a,n.emit("edgeAdded",E),[a,!0,S,A]}function Mr(n,e){n._edges.delete(e.key);const{source:t,target:r,attributes:a}=e,o=e.undirected,s=t===r;o?(t.undirectedDegree--,r.undirectedDegree--,s&&(t.undirectedLoops--,n._undirectedSelfLoopCount--)):(t.outDegree--,r.inDegree--,s&&(t.directedLoops--,n._directedSelfLoopCount--)),n.multi?e.detachMulti():e.detach(),o?n._undirectedSize--:n._directedSize--,n.emit("edgeDropped",{key:e.key,attributes:a,source:t.key,target:r.key,undirected:o})}class $e extends e1.EventEmitter{constructor(e){if(super(),e=Ke({},uE,e),typeof e.multi!="boolean")throw new be(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!oE.has(e.type))throw new be(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new be(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const t=e.type==="mixed"?op:e.type==="directed"?sp:up;vt(this,"NodeDataClass",t);const r="geid_"+aE()+"_";let a=0;const o=()=>{let s;do s=r+a++;while(this._edges.has(s));return s};vt(this,"_attributes",{}),vt(this,"_nodes",new Map),vt(this,"_edges",new Map),vt(this,"_directedSize",0),vt(this,"_undirectedSize",0),vt(this,"_directedSelfLoopCount",0),vt(this,"_undirectedSelfLoopCount",0),vt(this,"_edgeKeyGenerator",o),vt(this,"_options",e),Sd.forEach(s=>vt(this,s,this[s])),Dt(this,"order",()=>this._nodes.size),Dt(this,"size",()=>this._edges.size),Dt(this,"directedSize",()=>this._directedSize),Dt(this,"undirectedSize",()=>this._undirectedSize),Dt(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Dt(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Dt(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Dt(this,"multi",this._options.multi),Dt(this,"type",this._options.type),Dt(this,"allowSelfLoops",this._options.allowSelfLoops),Dt(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,a=this._edges.get(r);return!!a&&!a.undirected}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(t):!1}throw new be(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,a=this._edges.get(r);return!!a&&a.undirected}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(t):!1}throw new be(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(t)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(t):!1}throw new be(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if(this.type==="undirected")return;if(e=""+e,t=""+t,this.multi)throw new ke("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new fe(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new fe(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const a=r.out&&r.out[t]||void 0;if(a)return a.key}undirectedEdge(e,t){if(this.type==="directed")return;if(e=""+e,t=""+t,this.multi)throw new ke("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new fe(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new fe(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const a=r.undirected&&r.undirected[t]||void 0;if(a)return a.key}edge(e,t){if(this.multi)throw new ke("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new fe(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new fe(`Graph.edge: could not find the "${t}" target node in the graph.`);const a=r.out&&r.out[t]||r.undirected&&r.undirected[t]||void 0;if(a)return a.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new fe(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.in||t in r.out}areOutNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new fe(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.out}areInNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new fe(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new fe(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:t in r.undirected}areNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new fe(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(t in r.in||t in r.out)||this.type!=="directed"&&t in r.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new fe(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in r.in||this.type!=="directed"&&t in r.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new fe(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in r.out||this.type!=="directed"&&t in r.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new fe(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new fe(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new fe(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new fe(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new fe(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.inDegree),r}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new fe(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.outDegree),r}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new fe(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.inDegree+t.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new fe(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new fe(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new fe(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new fe(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new fe(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,a=0;return this.type!=="directed"&&(r+=t.undirectedDegree,a+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.inDegree,a+=t.directedLoops),r-a}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new fe(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,a=0;return this.type!=="directed"&&(r+=t.undirectedDegree,a+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.outDegree,a+=t.directedLoops),r-a}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new fe(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,a=0;return this.type!=="directed"&&(r+=t.undirectedDegree,a+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.inDegree+t.outDegree,a+=t.directedLoops*2),r-a}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new fe(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new fe(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new fe(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const r=this._edges.get(t);if(!r)throw new fe(`Graph.opposite: could not find the "${t}" edge in the graph.`);const a=r.source.key,o=r.target.key;if(e===a)return o;if(e===o)return a;throw new fe(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${a}, ${o}).`)}hasExtremity(e,t){e=""+e,t=""+t;const r=this._edges.get(e);if(!r)throw new fe(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===t||r.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new fe(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new fe(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new fe(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return lE(this,e,t).key}mergeNode(e,t){if(t&&!Ve(t))throw new be(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let r=this._nodes.get(e);return r?(t&&(Ke(r.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:t})),[e,!1]):(r=new this.NodeDataClass(e,t),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&typeof t!="function")throw new be(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let r=this._nodes.get(e);if(r){if(t){const o=r.attributes;r.attributes=t(o),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const a=t?t({}):{};return r=new this.NodeDataClass(e,a),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:a}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new fe(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const a in t.out){r=t.out[a];do Mr(this,r),r=r.next;while(r)}for(const a in t.in){r=t.in[a];do Mr(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const a in t.undirected){r=t.undirected[a];do Mr(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const r=""+arguments[0],a=""+arguments[1];if(t=bt(this,r,a,this.type),!t)throw new fe(`Graph.dropEdge: could not find the "${r}" -> "${a}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new fe(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Mr(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new ke("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ke("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,t=""+t;const r=bt(this,e,t,"directed");if(!r)throw new fe(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return Mr(this,r),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new ke("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ke("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=bt(this,e,t,"undirected");if(!r)throw new fe(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return Mr(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if(typeof t!="function")throw new be("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=t(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Ve(e))throw new be("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Ve(e))throw new be("Graph.mergeAttributes: provided attributes are not a plain object.");return Ke(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new be("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if(typeof e!="function")throw new be("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!xd(t))throw new be("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let a,o;for(;a=r.next(),a.done!==!0;)o=a.value,o.attributes=e(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if(typeof e!="function")throw new be("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!xd(t))throw new be("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let a,o,s,u;for(;a=r.next(),a.done!==!0;)o=a.value,s=o.source,u=o.target,o.attributes=e(o.key,o.attributes,s.key,u.key,s.attributes,u.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new be("Graph.forEachAdjacencyEntry: expecting a callback.");ri(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new be("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");ri(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new be("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");ri(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new be("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");ri(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):np(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new be("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let r,a;for(;r=t.next(),r.done!==!0;)a=r.value,e(a.key,a.attributes)}findNode(e){if(typeof e!="function")throw new be("Graph.findNode: expecting a callback.");const t=this._nodes.values();let r,a;for(;r=t.next(),r.done!==!0;)if(a=r.value,e(a.key,a.attributes))return a.key}mapNodes(e){if(typeof e!="function")throw new be("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let r,a;const o=new Array(this.order);let s=0;for(;r=t.next(),r.done!==!0;)a=r.value,o[s++]=e(a.key,a.attributes);return o}someNode(e){if(typeof e!="function")throw new be("Graph.someNode: expecting a callback.");const t=this._nodes.values();let r,a;for(;r=t.next(),r.done!==!0;)if(a=r.value,e(a.key,a.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new be("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let r,a;for(;r=t.next(),r.done!==!0;)if(a=r.value,!e(a.key,a.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new be("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let r,a;const o=[];for(;r=t.next(),r.done!==!0;)a=r.value,e(a.key,a.attributes)&&o.push(a.key);return o}reduceNodes(e,t){if(typeof e!="function")throw new be("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new be("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=t;const a=this._nodes.values();let o,s;for(;o=a.next(),o.done!==!0;)s=o.value,r=e(r,s.key,s.attributes);return r}nodeEntries(){const e=this._nodes.values();return new wt(()=>{const t=e.next();if(t.done)return t;const r=t.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach((a,o)=>{e[t++]=tE(o,a)});const r=new Array(this._edges.size);return t=0,this._edges.forEach((a,o)=>{r[t++]=rE(this.type,o,a)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,t=!1){if(e instanceof $e)return e.forEachNode((l,c)=>{t?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,f,p,v,b,E)=>{t?E?this.mergeUndirectedEdgeWithKey(l,f,p,c):this.mergeDirectedEdgeWithKey(l,f,p,c):E?this.addUndirectedEdgeWithKey(l,f,p,c):this.addDirectedEdgeWithKey(l,f,p,c)}),this;if(!Ve(e))throw new be("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Ve(e.attributes))throw new be("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,a,o,s,u;if(e.nodes){if(o=e.nodes,!Array.isArray(o))throw new be("Graph.import: invalid nodes. Expecting an array.");for(r=0,a=o.length;r<a;r++){s=o[r],nE(s);const{key:l,attributes:c}=s;t?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),o=e.edges,!Array.isArray(o))throw new be("Graph.import: invalid edges. Expecting an array.");for(r=0,a=o.length;r<a;r++){u=o[r],iE(u);const{source:c,target:f,attributes:p,undirected:v=l}=u;let b;"key"in u?(b=t?v?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:v?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,b.call(this,u.key,c,f,p)):(b=t?v?this.mergeUndirectedEdge:this.mergeDirectedEdge:v?this.addUndirectedEdge:this.addDirectedEdge,b.call(this,c,f,p))}}return this}nullCopy(e){const t=new $e(Ke({},this._options,e));return t.replaceAttributes(Ke({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach((r,a)=>{const o=Ke({},r.attributes);r=new t.NodeDataClass(a,o),t._nodes.set(a,r)}),t}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new ke(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new ke("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new ke("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),r=this._edges.values();let a,o;for(;a=r.next(),a.done!==!0;)o=a.value,fp(t,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,Ke({},o.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((o,s)=>{e[s]=o.attributes});const t={},r={};this._edges.forEach((o,s)=>{const u=o.undirected?"--":"->";let l="",c=o.source.key,f=o.target.key,p;o.undirected&&c>f&&(p=c,c=f,f=p);const v=`(${c})${u}(${f})`;s.startsWith("geid_")?this.multi&&(typeof r[v]>"u"?r[v]=0:r[v]++,l+=`${r[v]}. `):l+=`[${s}]: `,l+=v,t[l]=o.attributes});const a={};for(const o in this)this.hasOwnProperty(o)&&!Sd.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(a[o]=this[o]);return a.attributes=this._attributes,a.nodes=e,a.edges=t,vt(a,"constructor",this.constructor),a}}typeof Symbol<"u"&&($e.prototype[Symbol.for("nodejs.util.inspect.custom")]=$e.prototype.inspect);sE.forEach(n=>{["add","merge","update"].forEach(e=>{const t=n.name(e),r=e==="add"?fp:cE;n.generateKey?$e.prototype[t]=function(a,o,s){return r(this,t,!0,(n.type||this.type)==="undirected",null,a,o,s,e==="update")}:$e.prototype[t]=function(a,o,s,u){return r(this,t,!1,(n.type||this.type)==="undirected",a,o,s,u,e==="update")}})});b1($e);L1($e);H1($e);eE($e);let pp=class extends $e{constructor(e){const t=Ke({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new be("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new be('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}},gp=class extends $e{constructor(e){const t=Ke({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new be("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new be('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}};class vp extends $e{constructor(e){const t=Ke({multi:!0},e);if("multi"in t&&t.multi!==!0)throw new be("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class yp extends $e{constructor(e){const t=Ke({type:"directed",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new be("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new be('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class mp extends $e{constructor(e){const t=Ke({type:"undirected",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new be("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new be('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function Ur(n){n.from=function(e,t){const r=Ke({},e.options,t),a=new n(r);return a.import(e),a}}Ur($e);Ur(pp);Ur(gp);Ur(vp);Ur(yp);Ur(mp);$e.Graph=$e;$e.DirectedGraph=pp;$e.UndirectedGraph=gp;$e.MultiGraph=vp;$e.MultiDirectedGraph=yp;$e.MultiUndirectedGraph=mp;$e.InvalidArgumentsGraphError=be;$e.NotFoundGraphError=fe;$e.UsageGraphError=ke;var Vt=Qf();function hE(n){n.prototype.updateSelectedNodesName=function(e){this.updateSelectedNodesAttributes({label:e})},n.prototype.updateSelectedNodesInfo=function(e){this.updateSelectedNodesAttributes({desc:e})},n.prototype.setDefaultNodeWeight=function(e=1){this.updateEachNodeAttributes((t,r)=>({...r,weight:e}))},n.prototype.getNodesForD3=function(){return this.nodes().map(e=>({...this.getNodeAttributes(e),id:Number(e)}))},n.prototype.selectNode=function(e){this.setNodeAttribute(e,"selected",!0)},n.prototype.deselectNode=function(e){this.setNodeAttribute(e,"selected",!1)},n.prototype.toggleNodeSelection=function(e){if((this.getNodeAttribute(e,"selected")||0)>0)this.setNodeAttribute(e,"selected",0);else{let r=0;this.forEachNode((a,o)=>{o.selected>r&&(r=o.selected)}),this.setNodeAttribute(e,"selected",r+1)}},n.prototype.getSelectedNodes=function(){return this.filterNodes((e,t)=>t.selected>0).sort((e,t)=>this.getNodeAttribute(e,"selected")-this.getNodeAttribute(t,"selected"))},n.prototype.updateSelectedNodesColor=function(e,t,r){!e||!t||!r?e?this.updateSelectedNodesAttributes({color:e}):t?this.updateSelectedNodesAttributes({stroke:t}):r&&this.updateSelectedNodesAttributes({labelColor:r}):this.updateSelectedNodesAttributes({color:e,stroke:t,labelColor:r})},n.prototype.updateSelectedNodesAttributes=function(e){this.getSelectedNodes().forEach(t=>{this.mergeNodeAttributes(t,e)})},n.prototype.connectSelectedNodes=function(e,t="directed"){const r=this.getSelectedNodes();if(!(r.length<1)){if(r.length>1)for(let a=0;a<r.length;a++)for(let o=a+1;o<r.length;o++){const s=r[a],u=r[o],l={color:e,selected:!1};t==="undirected"?this.mergeUndirectedEdge(s,u,l):this.mergeDirectedEdge(s,u,l)}else if(this.allowSelfLoops){const a=r[0],o={color:e,selected:!1};t==="undirected"?this.mergeUndirectedEdge(a,a,o):this.mergeDirectedEdge(a,a,o)}}},n.prototype.connectSelectedNodesInOrder=function(e,t="directed"){const r=this.getSelectedNodes();for(let a=0;a<r.length-1;a++){const o=r[a],s=r[a+1],u={color:e,selected:!1};t==="undirected"?this.mergeUndirectedEdge(o,s,u):this.mergeDirectedEdge(o,s,u)}}}function dE(n){n.prototype.setDefaultEdgeWeight=function(e=1){this.updateEachEdgeAttributes((t,r)=>({...r,weight:e}))},n.prototype.getEdgeSourceTarget=function(e){return[this.source(e),this.target(e)]},n.prototype.updateSelectedEdgesName=function(e){this.updateSelectedEdgesAttributes({label:e})},n.prototype.updateSelectedEdgesInfo=function(e){this.updateSelectedEdgesAttributes({desc:e})},n.prototype.getEdgesForD3=function(){return this.edges().map(e=>{const{source:t,target:r,...a}=this.getEdgeAttributes(e);return{source:Number(t),target:Number(r),...a}})},n.prototype.selectEdge=function(e){this.setEdgeAttribute(e,"selected",!0)},n.prototype.deselectEdge=function(e){this.setEdgeAttribute(e,"selected",!1)},n.prototype.toggleEdgeSelection=function(e){if((this.getEdgeAttribute(e,"selected")||0)>0)this.setEdgeAttribute(e,"selected",0);else{let r=0;this.forEachEdge((a,o)=>{o.selected>r&&(r=o.selected)}),this.setEdgeAttribute(e,"selected",r+1)}},n.prototype.getSelectedEdges=function(){return this.filterEdges((e,t)=>t.selected>0).sort((e,t)=>this.getEdgeAttribute(e,"selected")-this.getEdgeAttribute(t,"selected"))},n.prototype.updateSelectedEdgesAttributes=function(e){this.getSelectedEdges().forEach(t=>{this.mergeEdgeAttributes(t,e)})},n.prototype.updateSelectedEdgesColor=function(e,t){const r={...e&&{color:e},...t&&{labelColor:t}};this.updateSelectedEdgesAttributes(r)},n.prototype.updateSelectedEdgesName=function(e){this.updateSelectedEdgesAttributes({label:e})},n.prototype.updateSelectedEdgesInfo=function(e){this.updateSelectedEdgesAttributes({desc:e})}}function fE(n){n.prototype.addFace=function(e,t){const r=e.join("_");console.trace(t),t={...t,key:r,id:this._faces.size,nodes:e,color:this.colors.face_color};var a=new pE(r,e,t);this._faces.set(r,a)},n.prototype.faces=function(){return Array.from(this._faces.keys())},n.prototype.findFace=function(e){return e.sort(),e.join("_")},n.prototype.dropFace=function(e){this._faces.has(e)&&this._faces.delete(e)},n.prototype.hasFace=function(e){return this._faces.has(e)},n.prototype.faceNodeNeighbors=function(e){const t=[];return this.forEachFace((r,a)=>{a.nodes.includes(e)&&t.push(r)}),t},n.prototype.faceEdgeNeighbors=function(e){const{source:t,target:r}=this.getEdgeAttributes(e),a=[];return this.forEachFace((o,s)=>{s.nodes.includes(""+t)&&s.nodes.includes(""+r)&&a.push(o)}),a},n.prototype.forEachFace=function(e){for(const t of this._faces.values())e(t.key,t.attributes)},n.prototype.setFaceAttribute=function(e,t,r){this._faces.get(e).attributes[t]=r},n.prototype.getFaceAttribute=function(e,t){return this._faces.get(e).attributes[t]},n.prototype.getFaceAttributes=function(e){return this._faces.get(e).attributes},n.prototype.selectFace=function(e){this.setFaceAttribute(e,"selected",!0)},n.prototype.deselectFace=function(e){this.setFaceAttribute(e,"selected",!1)},n.prototype.toggleFaceSelection=function(e){if((this.getFaceAttribute(e,"selected")||0)>0)this.setFaceAttribute(e,"selected",0);else{let r=0;this.forEachFace((a,o)=>{o.selected>r&&(r=o.selected)}),this.setFaceAttribute(e,"selected",r+1)}},n.prototype.getSelectedFaces=function(){return this.faces().filter(e=>this.getFaceAttributes(e).selected>0).sort((e,t)=>this.getFaceAttribute(e,"selected")-this.getFaceAttribute(t,"selected"))},n.prototype.updateSelectedFacesAttributes=function(e){this.getSelectedFaces().forEach(t=>{const r=this.getFaceAttributes(t);this._faces.get(t).attributes={...r,...e}})},n.prototype.updateSelectedFacesColor=function(e,t){const r={...e&&{color:e},...t&&{labelColor:t}};this.updateSelectedFacesAttributes(r)},n.prototype.updateSelectedFacesName=function(e){this.updateSelectedFacesAttributes({label:e})},n.prototype.updateSelectedFacesInfo=function(e){this.updateSelectedFacesAttributes({desc:e})},n.prototype.updateSelectedFacesWeight=function(e){this.updateSelectedFacesAttributes({weight:e})},n.prototype.deleteSelectedFaces=function(){this.getSelectedFaces().forEach(e=>this.dropFace(e))}}class pE{constructor(e,t,r){this.key=e,this.attributes=r,this.nodes=t}}class cr extends $e{constructor(e){super(e),this.isCustom=!0,this.defaultColors={edge_color:"#4682b4",label_color:"#000000",node_color:"#ffffff",face_color:"#4682b455",stroke_color:"#4682b4"},this.colors=this.loadFromLocalStorage(),this._faces=new Map,this.events()}events(){this.on("nodeAdded",({key:e})=>{const t=this.getNodeAttributes(e);t.id||this.setNodeAttribute(e,"id",Number(e)),t.label===void 0&&this.setNodeAttribute(e,"label",dn(t.id)),t.weight===void 0&&this.setNodeAttribute(e,"weight",void 0),t.color===void 0&&this.setNodeAttribute(e,"color",this.colors.node_color),t.stroke===void 0&&this.setNodeAttribute(e,"stroke",this.colors.stroke_color),t.labelColor===void 0&&this.setNodeAttribute(e,"labelColor",this.colors.label_color),t.selected===void 0&&this.setNodeAttribute(e,"selected",!1),t.size===void 0&&this.setNodeAttribute(e,"size",.25),t.magnitude===void 0&&this.setNodeAttribute(e,"magnitude",1),t.desc===void 0&&this.setNodeAttribute(e,"desc",{})}),this.on("edgeAdded",({key:e,source:t,target:r})=>{const a=this.getEdgeAttributes(e);a.id||this.setEdgeAttribute(e,"id",this.size-1),a.label===void 0&&this.setEdgeAttribute(e,"label",dn(a.id)),a.weight===void 0&&this.setEdgeAttribute(e,"weight",void 0),a.color===void 0&&this.setEdgeAttribute(e,"color",this.colors.edge_color),a.labelColor===void 0&&this.setEdgeAttribute(e,"labelColor",void 0),a.source||this.setEdgeAttribute(e,"source",Number(t)),a.target||this.setEdgeAttribute(e,"target",Number(r)),a.selected===void 0&&this.setEdgeAttribute(e,"selected",!1),a.desc===void 0&&this.setEdgeAttribute(e,"desc",{})})}loadFromLocalStorage(){if(typeof localStorage<"u"){const e=localStorage.getItem("appSettings");if(e)try{const t=JSON.parse(e);return this.validateSettings(t)}catch{console.warn("Invalid settings in localStorage. Using defaults.")}}return{...this.defaultColors}}validateSettings(e={}){return Object.fromEntries(Object.keys(this.defaultColors).map(t=>[t,t in e?e[t]:this.defaultColors[t]]))}nullCopy(e){var t=new cr(bi({},this._options,e));return t.replaceAttributes(bi({},this.getAttributes())),t}deselectAll(){this.updateEachNodeAttributes((e,t)=>({...t,selected:0})),this.updateEachEdgeAttributes((e,t)=>({...t,selected:!1}))}deleteSelected(){this.getSelectedEdges().forEach(e=>this.dropEdge(e)),this.getSelectedNodes().forEach(e=>this.dropNode(e))}updateSelectedName(e){this.updateSelectedNodesAttributes({label:e}),this.updateSelectedEdgesAttributes({label:e})}updateSelectedInfo(e){this.updateSelectedNodesAttributes({desc:e}),this.updateSelectedEdgesAttributes({desc:e})}updateSelectedWeight(e){this.updateSelectedNodesAttributes({weight:e}),this.updateSelectedEdgesAttributes({weight:e})}selectPath(e){this.deselectAll(),e.forEach(t=>{this.hasNode(t)&&this.selectNode(t)});for(let t=0;t<e.length-1;t++){const r=e[t],a=e[t+1];if(this.hasEdge(r,a)){const o=this.edge(r,a);this.selectEdge(o)}}}copySubgraph(){const e=this.getSelectedNodes();return e.length===0?null:Vt.subgraph(this,e)}cutSubgraph(){const e=this.copySubgraph();return e&&this.deleteSelected(),e}pasteSubgraph(e,t=!1,r={x:0,y:0}){if(!e)return;e.forEachNode((o,s)=>{const u={...s};"x"in u&&(u.x+=r.x),"y"in u&&(u.y+=r.y),e.replaceNodeAttributes(o,u)}),this.deselectAll();let a;return t?a=Vt.union(this,e):a=Vt.disjointUnion(this,e),this.clear(),this.import(a.export()),e}replace(e){this.clear(),this.import(e.export())}dropNode(e){const t=this.faceNodeNeighbors(e);t.length&&t.map(r=>{this.dropFace(r)}),super.dropNode(e)}dropEdge(e){const t=this.faceEdgeNeighbors(e);t.length&&t.map(r=>{this.dropFace(r)}),super.dropEdge(e)}export(){const e=super.export();var t=new Array(this._faces.size),r=0;return this._faces.forEach(function(a,o){t[r++]=vE(o,a)}),e.faces=t,e}import(e){const t=super.import(e);for(const r of e.faces)this.addFace(r.nodes,r.attributes);return t}}function gE(){for(var n=arguments[0],e=1,t=arguments.length;e<t;e++)if(arguments[e])for(var r in arguments[e])n[r]=arguments[e][r];return n}var bi=gE;typeof Object.assign=="function"&&(bi=Object.assign);function vE(n,e){var t={key:n,nodes:e.nodes};return Object.keys(e.attributes).length&&(t.attributes=bi({},e.attributes)),t}hE(cr);dE(cr);fE(cr);class yE extends cr{constructor(e={}){const t=Object.assign({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new InvalidArgumentsGraphError("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new InvalidArgumentsGraphError(`DirectedGraph.from: inconsistent "${t.type}" type in given options!`);super(t)}}class mE extends cr{constructor(e={}){const t=Object.assign({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new InvalidArgumentsGraphError("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new InvalidArgumentsGraphError(`UndirectedGraph.from: inconsistent "${t.type}" type in given options!`);super(t)}}var Yt=zf(),ni=Lf(),_d=Zf(),Je={},ii={},kd;function bE(){if(kd)return ii;kd=1;var n=we();function e(r,a){if(!n(r))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var o=[].concat(a),s,u,l,c={};for(l=0;l<o.length;l++)u=o[l],c[u]=[1/0,-1/0];return r.forEachNode(function(f,p){for(l=0;l<o.length;l++)u=o[l],s=p[u],s<c[u][0]&&(c[u][0]=s),s>c[u][1]&&(c[u][1]=s)}),typeof a=="string"?c[a]:c}function t(r,a){if(!n(r))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var o=[].concat(a),s,u,l,c={};for(l=0;l<o.length;l++)u=o[l],c[u]=[1/0,-1/0];return r.forEachEdge(function(f,p){for(l=0;l<o.length;l++)u=o[l],s=p[u],s<c[u][0]&&(c[u][0]=s),s>c[u][1]&&(c[u][1]=s)}),typeof a=="string"?c[a]:c}return ii.nodeExtent=e,ii.edgeExtent=t,ii}var hs,Dd;function bp(){if(Dd)return hs;Dd=1;var n=we(),e=wn().singleSourceLength;return hs=function(r,a){if(!n(r))throw new Error("graphology-metrics/eccentricity: given graph is not a valid graphology instance.");if(r.size===0)return 1/0;var o=-1/0,s=e(r,a),u,l,c=0;for(u in s)l=s[u],l>o&&(o=l),c++;return c<r.order?1/0:o},hs}var ds,Cd;function wE(){if(Cd)return ds;Cd=1;var n=we(),e=bp();return ds=function(r){if(!n(r))throw new Error("graphology-metrics/diameter: given graph is not a valid graphology instance.");if(r.size===0)return 1/0;var a=-1/0;return r.someNode(function(o){var s=e(r,o);return s>a&&(a=s),a===1/0}),a},ds}var fs,Id;function EE(){if(Id)return fs;Id=1;var n=Be(),e=we(),t=xr(),r=ft(),a={getNodeCommunity:"community",getEdgeWeight:"weight",resolution:1};function o(w,k){var m=new Array(w.order),C=new Float64Array(w.order),$={},y=0,I=r.createEdgeWeightGetter(k.getEdgeWeight).fromEntry,z=r.createNodeValueGetter(k.getNodeCommunity).fromEntry,T=0,P={};return w.forEachNode(function(O,R){P[O]=T,m[T++]=z(O,R)}),w.forEachUndirectedEdge(function(O,R,V,Q,W,L,N){var B=I(O,R,V,Q,W,L,N);y+=B,$[O]=B,C[P[V]]+=B,V!==Q&&(C[P[Q]]+=B)}),{weights:$,communities:m,weightedDegrees:C,M:y}}function s(w,k){var m=new Array(w.order),C=new Float64Array(w.order),$=new Float64Array(w.order),y={},I=0,z=r.createEdgeWeightGetter(k.getEdgeWeight).fromEntry,T=r.createNodeValueGetter(k.getNodeCommunity).fromEntry,P=0,O={};return w.forEachNode(function(R,V){O[R]=P,m[P++]=T(R,V)}),w.forEachDirectedEdge(function(R,V,Q,W,L,N,B){var Y=z(R,V,Q,W,L,N,B);I+=Y,y[R]=Y,$[O[Q]]+=Y,C[O[W]]+=Y}),{weights:y,communities:m,weightedInDegrees:C,weightedOutDegrees:$,M:I}}function u(w,k){var m=k.resolution,C=o(w,k),$=C.communities,y=C.weightedDegrees,I=C.M,z=w.nodes(),T,P,O,R,V,Q,W=0,L=I*2;for(T=0,O=w.order;T<O;T++)for(P=0;P<O;P++)$[T]===$[P]&&(Q=w.undirectedEdge(z[T],z[P]),R=C.weights[Q]||0,V=y[T]*y[P],T===P&&typeof Q<"u"?W+=(R-V/L*m)*2:W+=R-V/L*m);return W/L}function l(w,k){var m=k.resolution,C=s(w,k),$=C.communities,y=C.weightedInDegrees,I=C.weightedOutDegrees,z=C.M,T=w.nodes(),P,O,R,V,Q,W,L=0;for(P=0,R=w.order;P<R;P++)for(O=0;O<R;O++)$[P]===$[O]&&(W=w.directedEdge(T[P],T[O]),V=C.weights[W]||0,Q=y[P]*I[O],L+=V-Q/z*m);return L/z}function c(w,k){var m={},C={},$={},y=r.createNodeValueGetter(k.getNodeCommunity).fromEntry;return w.forEachNode(function(I,z){var T=y(I,z);if(m[I]=T,typeof T>"u")throw new Error('graphology-metrics/modularity: the "'+I+'" node is not in the partition.');C[T]=0,$[T]=0}),{communities:m,totalWeights:C,internalWeights:$}}function f(w,k){var m={},C={},$={},y={},I=r.createNodeValueGetter(k.getNodeCommunity).fromEntry;return w.forEachNode(function(z,T){var P=I(z,T);if(m[z]=P,typeof P>"u")throw new Error('graphology-metrics/modularity: the "'+z+'" node is not in the partition.');C[P]=0,$[P]=0,y[P]=0}),{communities:m,totalInWeights:C,totalOutWeights:$,internalWeights:y}}function p(w,k){var m=k.resolution,C=c(w,k),$=0,y=C.totalWeights,I=C.internalWeights,z=C.communities,T=r.createEdgeWeightGetter(k.getEdgeWeight).fromEntry;w.forEachUndirectedEdge(function(V,Q,W,L,N,B,Y){var U=T(V,Q,W,L,N,B,Y);$+=U;var F=z[W],K=z[L];y[F]+=U,y[K]+=U,F===K&&(I[F]+=U*2)});var P=0,O=$*2;for(var R in I)P+=I[R]/O-Math.pow(y[R]/O,2)*m;return P}function v(w,k){var m=k.resolution,C=f(w,k),$=0,y=C.totalInWeights,I=C.totalOutWeights,z=C.internalWeights,T=C.communities,P=r.createEdgeWeightGetter(k.getEdgeWeight).fromEntry;w.forEachDirectedEdge(function(V,Q,W,L,N,B,Y){var U=P(V,Q,W,L,N,B,Y);$+=U;var F=T[W],K=T[L];I[F]+=U,y[K]+=U,F===K&&(z[F]+=U)});var O=0;for(var R in z)O+=z[R]/$-y[R]*I[R]/Math.pow($,2)*m;return O}function b(w,k,m,C){return C/(2*w)-k*m/(2*(w*w))}function E(w,k,m,C,$,y){return y/w-($*k+C*m)/(w*w)}function S(w,k){if(!e(w))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(w.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(w.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var m=t(w);if(m==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return k=n(k,a),m==="directed"?l(w,k):u(w,k)}function A(w,k){if(!e(w))throw new Error("graphology-metrics/modularity: given graph is not a valid graphology instance.");if(w.size===0)throw new Error("graphology-metrics/modularity: cannot compute modularity of an empty graph.");if(w.multi)throw new Error("graphology-metrics/modularity: cannot compute modularity of a multi graph. Cast it to a simple one beforehand.");var m=t(w);if(m==="mixed")throw new Error("graphology-metrics/modularity: cannot compute modularity of a mixed graph.");return k=n(k,a),m==="directed"?v(w,k):p(w,k)}var _=A;return _.sparse=A,_.dense=S,_.undirectedDelta=b,_.directedDelta=E,fs=_,fs}var ps,Ld;function xE(){if(Ld)return ps;Ld=1;var n=we(),e=ft().createEdgeWeightGetter,t="weight";return ps=function(a,o){if(!n(a))throw new Error("graphology-metrics/weighted-size: the given graph is not a valid graphology instance.");o=e(o||t).fromEntry;var s=0;return a.forEachEdge(function(u,l,c,f,p,v,b){s+=o(u,l,c,f,p,v,b)}),s},ps}var zd;function SE(){if(zd)return Je;zd=1;var n=Nf(),e=bE();return Je.diameter=wE(),Je.modularity=EE(),Je.simpleSize=Mf(),Je.weightedSize=xE(),Je.abstractDensity=n.abstractDensity,Je.density=n.density,Je.directedDensity=n.directedDensity,Je.undirectedDensity=n.undirectedDensity,Je.mixedDensity=n.mixedDensity,Je.multiDirectedDensity=n.multiDirectedDensity,Je.multiUndirectedDensity=n.multiUndirectedDensity,Je.multiMixedDensity=n.multiMixedDensity,Je.nodeExtent=e.nodeExtent,Je.edgeExtent=e.edgeExtent,Je}var Td=SE(),ai={},gs,Md;function wp(){if(Md)return gs;Md=1;var n=we(),e=xr(),t=Be(),r=ft().createEdgeWeightGetter,a={edgeDisparityAttribute:"disparity",getEdgeWeight:"weight"};function o(u,l,c){if(!n(l))throw new Error("graphology-metrics/edge/disparity: the given graph is not a valid graphology instance.");if(l.multi||e(l)==="mixed")throw new Error("graphology-metrics/edge/disparity: not defined for multi nor mixed graphs.");c=t(c,a);var f=r(c.getEdgeWeight).fromEntry,p={};l.forEachNode(function(A){p[A]=0}),l.forEachEdge(function(A,_,w,k,m,C,$){var y=f(A,_,w,k,m,C,$);p[w]+=y,p[k]+=y});var v,b,E,S={};if(l.forEachAssymetricAdjacencyEntry(function(A,_,w,k,m,C,$){var y=f(m,C,A,_,w,k,$);v!==A&&(v=A,b=l.degree(A),E=p[A]);var I=l.degree(_),z=p[_],T=y/E,P=y/z,O=Math.pow(1-T,b-1),R=Math.pow(1-P,I-1);S[m]=Math.min(O,R)}),u){l.updateEachEdgeAttributes(function(A,_){return _[c.edgeDisparityAttribute]=S[A],_},{attributes:[c.edgeDisparityAttribute]});return}return S}var s=o.bind(null,!1);return s.assign=o.bind(null,!0),gs=s,gs}var vs,Nd;function AE(){if(Nd)return vs;Nd=1;var n=we(),e=ki().intersectionSize;function t(a,o){if(!n(o))throw new Error("graphology-metrics/simmelian-strength: given graph is not a valid graphology instance.");var s={};if(o.forEachNode(function(l){s[l]=new Set(o.neighbors(l))}),!a){var u={};return o.forEachEdge(function(l,c,f,p){u[l]=e(s[f],s[p])}),u}o.updateEachEdgeAttributes(function(l,c,f,p){return c.simmelianStrength=e(s[f],s[p]),c},{attributes:["simmelianStrength"]})}var r=t.bind(null,!1);return r.assign=t.bind(null,!0),vs=r,vs}var Rd;function _E(){return Rd||(Rd=1,ai.disparity=wp(),ai.simmelianStrength=AE()),ai}var kE=_E(),ys,$d;function DE(){if($d)return ys;$d=1;var n=we(),e=Be(),t=_i(),r=Kf(),a=Sr().NeighborhoodIndex,o={nodeCentralityAttribute:"closenessCentrality",wassermanFaust:!1};function s(c){this.index=new a(c,"inbound"),this.queue=new t(Array,c.order),this.seen=new r(c.order)}s.prototype.fromNode=function(c){var f=this.index,p=this.queue,v=this.seen;v.clear(),p.clear(),v.add(c),p.push([c,0]);for(var b,E,S,A,_,w,k=0,m=0;p.size!==0;)for(b=p.shift(),E=b[0],S=b[1],S!==0&&(k+=S,m+=1),_=f.starts[E+1],A=f.starts[E];A<_;A++)w=f.neighborhood[A],!v.has(w)&&(v.add(w),p.push([w,S+1]));return[m,k]};function u(c,f,p){if(!n(f))throw new Error("graphology-metrics/centrality/closeness: the given graph is not a valid graphology instance.");p=e(p,o);var v=p.wassermanFaust,b=new s(f),E=f.order,S,A,_,w,k,m=new Float64Array(E);for(S=0;S<E;S++)A=b.fromNode(S),_=A[0],w=A[1],k=0,w>0&&E>1&&(k=_/w,v&&(k*=_/(E-1))),m[S]=k;return c?b.index.assign(p.nodeCentralityAttribute,m):b.index.collect(m)}var l=u.bind(null,!1);return l.assign=u.bind(null,!0),ys=l,ys}var CE=DE();const IE=st(CE);var sn={},Pd;function LE(){if(Pd)return sn;Pd=1;var n=we();function e(o,s,u,l){var c=s+"Centrality";if(!n(u))throw new Error("graphology-centrality/"+c+": the given graph is not a valid graphology instance.");if(s!=="degree"&&u.type==="undirected")throw new Error("graphology-centrality/"+c+": cannot compute "+s+" centrality on an undirected graph.");l=l||{};var f=l.nodeCentralityAttribute||c,p=u.order-1,v=u[s].bind(u);if(o){u.updateEachNodeAttributes(function(E,S){return S[f]=v(E)/p,S},{attributes:[f]});return}var b={};return u.forEachNode(function(E){b[E]=v(E)/p}),b}var t=e.bind(null,!1,"degree"),r=e.bind(null,!1,"inDegree"),a=e.bind(null,!1,"outDegree");return t.assign=e.bind(null,!0,"degree"),r.assign=e.bind(null,!0,"inDegree"),a.assign=e.bind(null,!0,"outDegree"),sn.degreeCentrality=t,sn.inDegreeCentrality=r,sn.outDegreeCentrality=a,sn}var zE=LE(),ms,Gd;function TE(){if(Gd)return ms;Gd=1;var n=we(),e=Hf(),t=Be(),r=e.createUnweightedIndexedBrandes,a=e.createDijkstraIndexedBrandes,o={nodeCentralityAttribute:"betweennessCentrality",getEdgeWeight:"weight",normalized:!0};function s(l,c,f){if(!n(c))throw new Error("graphology-centrality/beetweenness-centrality: the given graph is not a valid graphology instance.");f=t(f,o);var p=f.nodeCentralityAttribute,v=f.normalized,b=f.getEdgeWeight?a(c,f.getEdgeWeight):r(c),E=c.order,S,A,_,w,k,m,C,$,y,I,z=new Float64Array(E),T=new Float64Array(E);for(m=0;m<E;m++){for(S=b(m),A=S[0],_=S[1],w=S[2],C=A.size;C--;)z[A.items[A.size-C]]=0;for(;A.size!==0;){for(I=A.pop(),k=(1+z[I])/w[I],C=0,$=_[I].length;C<$;C++)y=_[I][C],z[y]+=w[y]*k;I!==m&&(T[I]+=z[I])}}var P=null;if(v?P=E<=2?null:1/((E-1)*(E-2)):P=c.type==="undirected"?.5:null,P!==null)for(m=0;m<E;m++)T[m]*=P;return l?b.index.assign(p,T):b.index.collect(T)}var u=s.bind(null,!1);return u.assign=s.bind(null,!0),ms=u,ms}var ME=TE();const NE=st(ME);var bs,Od;function RE(){if(Od)return bs;Od=1;var n=we(),e=Be(),t=Sr().WeightedNeighborhoodIndex,r={nodeCentralityAttribute:"eigenvectorCentrality",getEdgeWeight:"weight",maxIterations:100,tolerance:1e-6};function a(u){for(var l=0,c=0,f=0,p=u.length;f<p;f++){var v=Math.abs(u[f]);v>l&&(c*=l/v*(l/v),l=v),c+=v===0&&l===0?0:v/l*(v/l)}return l===1/0?1:l*Math.sqrt(c)}function o(u,l,c){if(!n(l))throw new Error("graphology-metrics/centrality/eigenvector: the given graph is not a valid graphology instance.");c=e(c,r);var f=c.maxIterations,p=c.tolerance,v=l.order,b=new t(l,c.getEdgeWeight),E,S,A,_,w=new Float64Array(l.order);for(E=0;E<v;E++)w[E]=1/v;for(var k=0,m=0,C,$,y,I=!1;k<f;){for($=w,w=new Float64Array($),E=0;E<v;E++)for(A=b.starts[E+1],S=b.starts[E];S<A;S++)C=b.neighborhood[S],_=b.weights[S],w[C]+=$[E]*_;for(y=a(w),E=0;E<v;E++)w[E]/=y;for(m=0,E=0;E<v;E++)m+=Math.abs(w[E]-$[E]);if(m<v*p){I=!0;break}k++}if(!I)throw Error("graphology-metrics/centrality/eigenvector: failed to converge.");if(u){b.assign(c.nodeCentralityAttribute,w);return}return b.collect(w)}var s=o.bind(null,!1);return s.assign=o.bind(null,!0),bs=s,bs}var $E=RE();const PE=st($E);var Nr={},ws,qd;function GE(){if(qd)return ws;qd=1;var n=we();function e(r,a){if(r.length<1)throw new Error("graphology-metrics/layout-quality/connected-closeness.max: not enough values!");for(var o=void 0,s,u=1,l=r.length;u<l;u++)s=r[u],a!==void 0&&(s=a(s)),(o===void 0||s>o)&&(o=s);return o}function t(r,a){if(r.length<1)throw new Error("graphology-metrics/layout-quality/connected-closeness.min: not enough values!");for(var o=void 0,s,u=1,l=r.length;u<l;u++)s=r[u],a!==void 0&&(s=a(s)),(o===void 0||s<o)&&(o=s);return o}return ws=function(a,o){if(!n(a))throw new Error("graphology-metrics/layout-quality/connected-closeness: given graph is not a valid graphology instance.");if(a.size<2)return{deltaMax:void 0,ePercentOfDeltaMax:void 0,pPercentOfDeltaMax:void 0,pEdgeOfDeltaMax:void 0,cMax:k.C};o=o||{},o.epsilon=o.epsilon||.03,o.gridSize=o.gridSize||10;var s=o.rng||Math.random,u=C(),l=a.edges().map(function(y){var I=a.getNodeAttributes(a.source(y)),z=a.getNodeAttributes(a.target(y)),T=Math.sqrt(Math.pow(I.x-z.x,2)+Math.pow(I.y-z.y,2));return T}),c=[0,Math.max(e(u),e(l)||0)],f=0,p={},v,b,E,S,A,_=-1;do{for(S=0;S<=o.gridSize;S++)v=c[0]+(c[1]-c[0])*S/o.gridSize,p[v]===void 0&&(p[v]=m(v,a,u,l));b=f,f=0,A=Object.values(p),A.forEach(function(y,I){E=y.C,E>f&&(f=E,_=I)}),c=[A[Math.max(0,_-1)].Delta,A[Math.min(A.length-1,_+1)].Delta]}while((f-b)/f>=o.epsilon/10);var w=$(A,o.epsilon),k=m(w,a,u,l);if(k.C<.1)return{deltaMax:void 0,ePercentOfDeltaMax:void 0,pPercentOfDeltaMax:void 0,pEdgeOfDeltaMax:void 0,cMax:k.C};return{deltaMax:w,ePercentOfDeltaMax:k.ePercent,pPercentOfDeltaMax:k.pPercent,pEdgeOfDeltaMax:k.pEdge,cMax:k.C};function m(y,I,z,T){var P=T.filter(function(Y){return Y<=y}),O=z.filter(function(Y){return Y<=y}),R=P.length,V=R/T.length,Q=O.length,W=Q/z.length,L=V-W,N=I.undirected?1:2,B=R/(N*Q*(I.order*(I.order-1))/z.length);return{Delta:y,ePercent:V,pPercent:W,pEdge:B,C:L}}function C(){if(a.order<2)return[];var y=[],I,z,T,P,O,R=a.size;if(R<1)return[];for(var V=0;V<R;V++){I=a.nodes()[Math.floor(s()*a.order)];do z=a.nodes()[Math.floor(s()*a.order)];while(I===z);T=a.getNodeAttributes(I),P=a.getNodeAttributes(z),O=Math.sqrt(Math.pow(T.x-P.x,2)+Math.pow(T.y-P.y,2)),y.push(O)}return y}function $(y,I){var z=e(y,function(P){return P.C}),T=t(y.filter(function(P){return P.C>=(1-I)*z}),function(P){return P.Delta});return T}},ws}var Es,Fd;function OE(){if(Fd)return Es;Fd=1;var n=we();function e(t,r){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}return Es=function(r){if(!n(r))throw new Error("graphology-metrics/layout-quality/edge-uniformity: given graph is not a valid graphology instance.");if(r.size===0)return 0;var a=0,o=0,s,u=new Float64Array(r.size);r.forEachEdge(function(p,v,b,E,S,A){var _=e(S,A);u[o++]=_,a+=_});var l=a/r.size,c=0;for(o=0,s=r.size;o<s;o++)c+=Math.pow(l-u[o],2);var f=c/(r.size*Math.pow(l,2));return Math.sqrt(f)},Es}var xs,Wd;function Ep(){if(Wd)return xs;Wd=1;var n=we(),e=Vf(),t=ki().intersectionSize;return xs=function(a){if(!n(a))throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: given graph is not a valid graphology instance.");if(a.order===0)throw new Error("graphology-metrics/layout-quality/neighborhood-preservation: cannot compute stress for a null graph.");if(a.size===0)return 0;var o=[new Float64Array(a.order),new Float64Array(a.order)],s=0;a.forEachNode(function(c,f){o[0][s]=f.x,o[1][s++]=f.y});var u=e.fromAxes(o,a.nodes()),l=0;return a.forEachNode(function(c,f){var p=new Set(a.neighbors(c));if(p.size===0||p.size===a.order-1){l+=1;return}var v=u.kNearestNeighbors(p.size+1,[f.x,f.y]);v=new Set(v.slice(1));var b=t(p,v);l+=b/v.size}),l/a.order},xs}var Ss,Ud;function xp(){if(Ud)return Ss;Ud=1;var n=we(),e=wn().undirectedSingleSourceLength;function t(r,a){return Math.sqrt(Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2))}return Ss=function(a){if(!n(a))throw new Error("graphology-metrics/layout-quality/stress: given graph is not a valid graphology instance.");if(a.order===0)throw new Error("graphology-metrics/layout-quality/stress: cannot compute stress for a null graph.");var o=new Array(a.order),s=new Array(a.order),u=0,l=a.order*4;a.forEachNode(function(w,k){o[u]=w,s[u++]=k});var c,f,p,v,b,E,S,A,_=0;for(u=0,f=a.order;u<f;u++)for(b=e(a,o[u]),p=s[u],c=u+1;c<f;c++)v=s[c],E=b[o[c]],typeof E>"u"&&(E=l),A=t(p,v),S=1/(E*E),_+=S*Math.pow(A-E,2);return _},Ss}var jd;function qE(){return jd||(jd=1,Nr.connectedCloseness=GE(),Nr.edgeUniformity=OE(),Nr.neighborhoodPreservation=Ep(),Nr.stress=xp()),Nr}var FE=qE(),WE=xp();const UE=st(WE);var jE=bp();const BE=st(jE);var As,Bd;function HE(){if(Bd)return As;Bd=1;var n=we(),e=Be(),t=Sr().WeightedNeighborhoodIndex,r={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function a(s,u,l){if(!n(u))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");l=e(l,r);var c=l.alpha,f=l.maxIterations,p=l.tolerance,v=l.nodePagerankAttribute,b=u.order,E=1/b,S=new t(u,l.getEdgeWeight),A,_,w,k,m=new Float64Array(u.order),C=new Float64Array(S.weights.length),$=[];for(A=0;A<b;A++)for(m[A]=E,w=S.starts[A+1],k=S.outDegrees[A],k===0&&$.push(A),_=S.starts[A];_<w;_++)C[_]=S.weights[_]/k;for(var y=0,I=0,z,T,P,O=!1;y<f;){for(P=m,m=new Float64Array(u.order),z=0,A=0,w=$.length;A<w;A++)z+=P[$[A]];for(z*=c,A=0;A<b;A++){for(w=S.starts[A+1],_=S.starts[A];_<w;_++)T=S.neighborhood[_],m[T]+=c*P[A]*C[_];m[A]+=z*E+(1-c)*E}for(I=0,A=0;A<b;A++)I+=Math.abs(m[A]-P[A]);if(I<b*p){O=!0;break}y++}if(!O)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(s){S.assign(v,m);return}return S.collect(m)}var o=a.bind(null,!1);return o.assign=a.bind(null,!0),As=o,As}var KE=HE();const XE=st(KE);var YE=Ep();const VE=st(YE);var QE=wp();const ZE=st(QE),oi=document;class Sp{constructor(e){this.graphManager=e,this.pannel=oi.querySelector("#floating-panel .body-info")}addHeader(e){const t=oi.createElement("h4");t.textContent=e,this.pannel.appendChild(t),console.log(e)}addInfo(e){const t=oi.createElement("div");t.insertAdjacentHTML("beforeend",e),this.pannel.appendChild(t),console.log(e)}addLine(){const e=oi.createElement("hr");this.pannel.appendChild(e),this.pannel.scrollTop=this.pannel.scrollHeight}addNodeInfo(e){if(typeof e=="string"){const t=this.graphManager.graph.getNodeAttributes(e);if(t.desc&&Object.keys(t.desc).length!=0||t.weight){this.addHeader(`${t.label}:`);for(let r in t.desc)this.addInfo(`${r}: ${t.desc[r]}`);t.weight&&this.addInfo(`weight: ${t.weight}`),this.addLine()}}else{const t=e;if(t.desc&&Object.keys(t.desc).length!=0||t.weight){this.addHeader(`${t.label}:`);for(let r in t.desc)this.addInfo(`${r}: ${t.desc[r]}`);t.weight&&this.addInfo(`weight: ${t.weight}`),this.addLine()}}}allNodeInfo(){for(let e of this.graphManager.graph.getSelectedNodes())this.addNodeInfo(e)}addEdgeInfo(e){if(typeof e=="string"){const t=this.graphManager.graph.getEdgeAttributes(e);if(t.desc&&Object.keys(t.desc).length!=0||t.weight){this.addHeader(`${t.label}:`);for(let r in t.desc)this.addInfo(`${r}: ${t.desc[r]}`);t.weight&&this.addInfo(`weight: ${t.weight}`),this.addLine()}}else{const t=e;if(t.desc&&Object.keys(t.desc).length!=0||t.weight){this.addHeader(`${t.label}:`);for(let r in t.desc)this.addInfo(`${r}: ${t.desc[r]}`);t.weight&&this.addInfo(`weight: ${t.weight}`),this.addLine()}}}allEdgeInfo(){for(let e of this.graphManager.graph.getSelectedEdges())this.addEdgeInfo(e)}getComponent(e){const t=this.graphManager.graph,r=ni.connectedComponents(t);for(let a of r)if(a.includes(String(e)))return a;return null}basicInfo(){const e=this.graphManager.graph;this.addHeader("Basic Informattion"),this.addInfo(`|V|: ${e.order}`),this.addInfo(`|E|: ${e.size}`);const t=e.someEdge((r,a)=>a.weight);this.addInfo(t?`Type: ${e.type}, weighted`:`Type: ${e.type}`),this.addLine()}degreeSequesnce(){this.addHeader("Degree Sequence");const e=this.graphManager.graph,r=`(${e.mapNodes((a,o)=>e.degree(a)).join(", ")})`;this.addInfo(r),this.addLine()}countComponents(){const e=this.graphManager.graph;this.addHeader("Connected Components");const t=ni.countConnectedComponents(e);this.addInfo(`Count: ${t}`),ni.forEachConnectedComponent(e,r=>{this.addInfo(r.map(a=>e.getNodeAttribute(a,"label")).join(", "))}),this.addLine()}neighbors(){const e=this.graphManager.graph;this.addHeader("Neighbors");const t=this.graphManager.graph.getSelectedNodes();if(t.length!==1){this.addInfo("Select one node"),this.addLine();return}const[r]=t,a=e.neighbors(r);this.addInfo(a.map(o=>e.getNodeAttribute(o,"label")).join(", ")),this.addLine()}shortestPath(){this.addHeader("Shortest Path");const e=this.graphManager.graph,t=this.graphManager.graph.getSelectedNodes();if(t.length!==2){this.addInfo("Select two nodes"),this.addLine();return}const[r,a]=t,o=_d.bidirectional(e,r,a);o?(this.addInfo(o.map(s=>e.getNodeAttribute(s,"label")).join(" -> ")),this.addLine(),e.selectPath(o)):(this.addInfo("They are not connected"),this.addLine())}density(){this.addHeader("Density");const e=this.graphManager.graph,t=Td.density(e);this.addInfo(t),this.addLine()}diameter(){this.addHeader("Diameter");const e=this.graphManager.graph,t=Td.diameter(e);this.addInfo(t),this.addLine()}eccentricity(){this.addHeader("Eccentricity");const e=this.graphManager.graph,t=this.graphManager.graph.getSelectedNodes();if(t.length!==1){this.addInfo("Select one node"),this.addLine();return}const[r]=t,a=BE(e,r);this.addInfo(a),this.addLine()}simmelianStrength(){this.addHeader("Simmelian strength");const e=this.graphManager.graph,t=kE.simmelianStrength(e);for(const r in t){const{source:a,target:o}=e.getEdgeAttributes(r);this.addInfo(`${e.getNodeAttribute(a,"label")}, ${e.getNodeAttribute(o,"label")} : ${t[r]}`)}this.addLine()}betweennessCentrality(){this.addHeader("Betweenness centrality");const e=this.graphManager.graph,t=NE(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}closenessCentrality(){this.addHeader("Closeness centrality");const e=this.graphManager.graph,t=IE(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}degreeCentrality(){this.addHeader("Degree centrality");const e=this.graphManager.graph,t=zE.degreeCentrality(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}eigenvectorCentrality(){this.addHeader("Eigenvector centrality");const e=this.graphManager.graph,t=PE(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}pagerank(){this.addHeader("Pagerank");const e=this.graphManager.graph,t=XE(e);for(const r in t)this.addInfo(`${e.getNodeAttribute(r,"label")}: ${t[r]}`);this.addLine()}edgeUniformity(){this.addHeader("Edge Uniformity");const e=this.graphManager.graph,t=FE.edgeUniformity(e);this.addInfo(t),this.addLine()}neighborhoodPreservation(){this.addHeader("Neighborhood preservation");const e=this.graphManager.graph,t=VE(e);this.addInfo(t),this.addLine()}stress(){this.addHeader("Stress");const e=this.graphManager.graph,t=UE(e);this.addInfo(t),this.addLine()}disparity(){this.addHeader("Disparity");const e=this.graphManager.graph,t=ZE(e);for(const r in t){const{source:a,target:o}=e.getEdgeAttributes(r);this.addInfo(`${e.getNodeAttribute(a,"label")}, ${e.getNodeAttribute(o,"label")} : ${t[r]}`)}this.addLine()}_isCycle(e){if(e.order==e.size&&ni.countConnectedComponents(e)==1){const t=e.edges()[0],{source:r,target:a}=e.getEdgeAttributes(t);return e.dropEdge(t),_d.bidirectional(e,a,r)}return!1}liesOnCycle(){this.addHeader("Lies on cycle");const e=this.graphManager.graph,t=this.graphManager.graph.getSelectedNodes();if(t.length<3){this.addInfo("Select at least 3 nodes"),this.addLine();return}const r=Vt.subgraph(e,t);this.addInfo(!!this._isCycle(r)),this.addLine()}}var Hd=Tf(),_s=Rf(),lu=Cf(),Kd=["0111111110111100010101000000000100","1011000100000100010101000000001000","1101000111000100000000000001100010","1110000100001100000000000000000000","1000001000100000000000000000000000","1000001000100000100000000000000000","1000110000000000100000000000000000","1111000000000000000000000000000000","1010000000000000000000000000001011","0010000000000000000000000000000001","1000110000000000000000000000000000","1000000000000000000000000000000000","1001000000000000000000000000000000","1111000000000000000000000000000001","0000000000000000000000000000000011","0000000000000000000000000000000011","0000011000000000000000000000000000","1100000000000000000000000000000000","0000000000000000000000000000000011","1100000000000000000000000000000001","0000000000000000000000000000000011","1100000000000000000000000000000000","0000000000000000000000000000000011","0000000000000000000000000101010011","0000000000000000000000000101000100","0000000000000000000000011000000100","0000000000000000000000000000010001","0010000000000000000000011000000001","0010000000000000000000000000000101","0000000000000000000000010010000011","0100000010000000000000000000000011","1000000000000000000000001100100011","0010000010000011001010110000011101","0000000011000111001110110011111110"],JE=new Set([0,1,2,3,4,5,6,7,8,10,11,12,13,16,17,19,21]);function ex(n,e={}){if(!lu.isGraphConstructor(n))throw new Error("graphology-generators/social/karate: invalid Graph constructor.");for(var t=new n(e),r,a=0;a<34;a++)r=JE.has(a)?"Mr. Hi":"Officer",t.addNode(a,{club:r});var o,s,u,l,c,f;for(u=0,c=Kd.length;u<c;u++)for(o=Kd[u].split(""),l=u+1,f=o.length;l<f;l++)s=+o[l],s&&t.addEdgeWithKey(u+"->"+l,u,l);return t}var ks=[[0,1],[2,3],[2,4],[2,5],[1,5],[1,6],[1,7],[1,8],[1,9],[9,10],[3,4],[3,11],[4,6],[4,11],[6,7],[7,12],[8,13],[8,12],[11,12],[12,14]];function tx(n,e={}){if(!lu.isGraphConstructor(n))throw new Error("graphology-generators/social/florentine-families: invalid Graph constructor.");var t=new n(e),r,a;for(r=0,a=ks.length;r<a;r++)t.mergeEdge(ks[r][0],ks[r][1]);return t}var rx=ep(),Xd=[[0,1,2,3,4],[1,0,5,6],[2,0,3,4],[3,0,1,2,5,4,6],[5,1,3,6],[4,0,2,3,6,7],[6,1,3,5,4,7],[7,4,6,8],[8,7,9],[9,8]];function nx(n,e={}){if(!lu.isGraphConstructor(n))throw new Error("invalid Graph constructor.");var t=new n(e),r,a;for(r=0,a=Xd.length;r<a;r++)rx.mergeStar(t,Xd[r]);return t}const ix={stars:[{id:0,label:"Hamal",ra:"02 08 34.7",dec:"23 34 50.5",magnitude:2.17},{id:1,label:"Sheratan",ra:"01 56 01.0",dec:"20 55 48.5",magnitude:2.7},{id:2,label:"Gamma",ra:"01 54 53.8",dec:"19 24 58.7",magnitude:3.84},{id:3,label:"41 Arietis",ra:"02 51 27.2",dec:"27 21 50.6",magnitude:3.58}],edges:[[0,1],[1,2],[0,3]]},ax={stars:[{id:0,label:"Aldebaran",ra:"04 37 21.6",dec:"16 33 34.5",magnitude:1},{id:1,label:"Elnath",ra:"05 26 17.5",dec:"28 36 27.0",magnitude:1.65},{id:2,label:"Zeta",ra:"05 37 38.7",dec:"21 08 33.0",magnitude:2.97},{id:3,label:"Theta2",ra:"04 30 05.6",dec:"15 55 34.7",magnitude:3.45},{id:4,label:"Lambda",ra:"04 02 04.1",dec:"12 33 38.8",magnitude:3.38},{id:5,label:"Omicron",ra:"03 26 09.5",dec:"09 06 59.4",magnitude:3.77},{id:6,label:"Gamma",ra:"04 21 13.2",dec:"15 41 16.8",magnitude:3.8},{id:7,label:"Delta",ra:"04 24 22.8",dec:"17 36 04.5",magnitude:3.92},{id:8,label:"Delta3",ra:"04 26 56.4",dec:"17 59 06.4",magnitude:4.31},{id:9,label:"Ain",ra:"04 30 04.9",dec:"19 14 09.9",magnitude:3.69},{id:10,label:"Tau",ra:"04 43 45.1",dec:"23 00 19.2",magnitude:4.22},{id:11,label:"Atlas",ra:"03 50 39.0",dec:"24 07 49.6",magnitude:4.22}],edges:[[0,3],[0,2],[6,4],[4,5],[3,6],[6,7],[8,7],[8,9],[9,0],[9,10],[1,10],[11,7]]},ox={stars:[{id:0,label:"Castor",ra:"07 36 12.8",dec:"31 50 01.2",magnitude:1.58},{id:1,label:"Pollux",ra:"07 46 52.0",dec:"27 57 57.2",magnitude:1.29},{id:2,label:"Kappa",ra:"07 45 58.6",dec:"24 20 15.9",magnitude:3.72},{id:3,label:"Upsilon",ra:"07 37 29.0",dec:"26 50 24.6",magnitude:4.16},{id:4,label:"Iota",ra:"07 27 17.9",dec:"27 44 54.9",magnitude:3.94},{id:5,label:"Tau",ra:"07 12 44.9",dec:"30 12 16.7",magnitude:4.53},{id:6,label:"Theta",ra:"06 54 27.2",dec:"33 55 55.1",magnitude:3.63},{id:7,label:"Wasat",ra:"07 21 38.1",dec:"21 56 09.7",magnitude:3.59},{id:8,label:"Mekbuda",ra:"07 05 36.5",dec:"20 32 00.0",magnitude:4.16},{id:9,label:"Alhena",ra:"06 39 10.1",dec:"16 22 38.5",magnitude:1.92},{id:10,label:"Lambda",ra:"07 19 32.8",dec:"16 29 40.3",magnitude:3.61},{id:11,label:"Xi",ra:"06 46 42.4",dec:"12 52 04.2",magnitude:3.44},{id:12,label:"Mebsuta",ra:"06 45 29.1",dec:"25 06 23.7",magnitude:3.19},{id:13,label:"Nu",ra:"06 30 27.6",dec:"20 11 46.3",magnitude:4.09},{id:14,label:"Tejat",ra:"06 24 29.2",dec:"22 30 03.1",magnitude:2.91},{id:15,label:"Propus",ra:"06 16 24.0",dec:"22 29 58.9",magnitude:3.28},{id:16,label:"1",ra:"06 05 39.1",dec:"23 15 43.8",magnitude:4.31}],edges:[[0,5],[1,3],[3,2],[3,4],[4,5],[5,6],[3,7],[7,8],[7,10],[8,9],[10,11],[5,12],[12,13],[12,14],[14,15],[15,16]]},sx={stars:[{id:0,label:"Acubens",ra:"08 59 52.7",dec:"11 45 32.4",magnitude:4.28},{id:1,label:"Beta",ra:"08 17 53.5",dec:"09 06 24.1",magnitude:3.66},{id:2,label:"Asellus Australis",ra:"08 46 07.7",dec:"18 03 39.9",magnitude:4.09},{id:3,label:"Asellus Borealis",ra:"08 44 45.4",dec:"21 22 39.2",magnitude:4.66},{id:4,label:"Chi",ra:"08 21 36.4",dec:"27 08 10.9",magnitude:5.22},{id:5,label:"Iota",ra:"08 48 14.1",dec:"28 40 04.4",magnitude:4.19}],edges:[[0,2],[1,2],[2,3],[3,4],[3,5]]},ux={stars:[{id:0,label:"Regulus",ra:"10 09 44.0",dec:"11 50 33.1",magnitude:1.32},{id:1,label:"Algieba",ra:"10 21 22.9",dec:"19 42 46.3",magnitude:2.16},{id:2,label:"Zosma",ra:"11 15 28.3",dec:"20 23 02.6",magnitude:2.58},{id:3,label:"Adhafera",ra:"10 18 06.7",dec:"23 17 27.1",magnitude:3.5},{id:4,label:"Denebola",ra:"11 50 22.2",dec:"14 25 44.7",magnitude:2.16},{id:5,label:"Chertan",ra:"11 15 35.1",dec:"15 17 24.1",magnitude:3.33},{id:6,label:"Eta",ra:"10 08 43.5",dec:"16 38 18.8",magnitude:3.5},{id:7,label:"Rasalas",ra:"09 54 12.9",dec:"25 53 16.1",magnitude:4.03},{id:8,label:"Epsilon",ra:"09 47 18.0",dec:"23 39 27.6",magnitude:3.11}],edges:[[1,3],[2,5],[5,4],[1,6],[2,1],[6,0],[0,5],[3,7],[7,8],[2,4]]},lx={stars:[{id:0,label:"Nu",ra:"11 47 10.7",dec:"06 23 09.0",magnitude:4.13},{id:1,label:"Zaniah",ra:"12 21 13.2",dec:"-00 48 34.3",magnitude:3.89},{id:2,label:"Porrima",ra:"12 42 57.7",dec:"-01 35 23.7",magnitude:2.81},{id:3,label:"Spica",ra:"13 26 32.8",dec:"-11 17 43.6",magnitude:.89},{id:4,label:"Kappa",ra:"14 14 15.9",dec:"-10 23 36.5",magnitude:4.31},{id:5,label:"Syrma",ra:"14 17 21.6",dec:"-06 07 24.0",magnitude:4.16},{id:6,label:"Mu",ra:"14 44 24.8",dec:"-05 46 13.4",magnitude:3.95},{id:7,label:"109",ra:"14 47 32.8",dec:"01 47 01.4",magnitude:3.73},{id:8,label:"Tau",ra:"14 02 57.3",dec:"01 25 10.9",magnitude:4.25},{id:9,label:"Heze",ra:"13 36 00.2",dec:"-00 43 38.6",magnitude:3.41},{id:10,label:"Delta",ra:"12 56 53.9",dec:"03 15 28.1",magnitude:3.44},{id:11,label:"Vindemiatrix",ra:"13 03 27.4",dec:"10 49 15.5",magnitude:2.98}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[7,8],[8,9],[9,10],[10,11],[2,10],[3,9]]},cx={stars:[{id:0,label:"Zubenelgenubi II",ra:"14 52 17.9",dec:"-16 08 54.7",magnitude:2.78},{id:1,label:"Sigma",ra:"15 05 34.3",dec:"-25 22 56.3",magnitude:3.3},{id:2,label:"Zubeneschamali",ra:"15 18 23.1",dec:"-09 28 41.6",magnitude:2.56},{id:3,label:"Gamma",ra:"15 36 57.5",dec:"-14 52 31.6",magnitude:4.06},{id:4,label:"Theta",ra:"15 55 16.9",dec:"-16 48 17.5",magnitude:4.28},{id:5,label:"Upsilon",ra:"15 38 34.7",dec:"-28 13 09.8",magnitude:3.73}],edges:[[0,1],[0,2],[2,3],[3,4],[2,1],[1,5]]},hx={stars:[{id:0,label:"Acrab",ra:"16 06 55.3",dec:"-19 52 32.6",magnitude:2.59},{id:1,label:"Dschubba",ra:"16 01 50.6",dec:"-22 41 40.4",magnitude:2.25},{id:2,label:"Pi",ra:"16 00 23.8",dec:"-26 11 14.7",magnitude:2.81},{id:3,label:"Antares",ra:"16 30 58.3",dec:"-26 29 18.3",magnitude:.97},{id:4,label:"Tau",ra:"16 37 28.1",dec:"-28 16 06.8",magnitude:2.73},{id:5,label:"Epsilon",ra:"16 51 48.9",dec:"-34 20 18.8",magnitude:2.45},{id:6,label:"Mu1",ra:"16 53 35.8",dec:"-38 05 23.0",magnitude:2.92},{id:7,label:"Zeta2",ra:"16 56 22.6",dec:"-42 24 11.1",magnitude:3.75},{id:8,label:"Eta",ra:"17 13 58.6",dec:"-43 16 14.8",magnitude:3.41},{id:9,label:"Sargas",ra:"17 39 08.6",dec:"-43 00 43.4",magnitude:1.92},{id:10,label:"Iota1",ra:"17 49 21.5",dec:"-40 08 06.6",magnitude:3.09},{id:11,label:"Kappa",ra:"17 44 14.6",dec:"-39 02 29.6",magnitude:2.31},{id:12,label:"Shaula",ra:"17 35 19.9",dec:"-37 07 15.9",magnitude:1.52},{id:13,label:"Lesath",ra:"17 32 29.4",dec:"-37 18 53.3",magnitude:2.59}],edges:[[0,3],[1,3],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[11,12]]},dx={stars:[{id:0,label:"51",ra:"17 22 58.0",dec:"-23 58 57.0",magnitude:4.78},{id:1,label:"Sabik",ra:"17 11 50.2",dec:"-15 45 26.7",magnitude:2.44},{id:2,label:"Zeta",ra:"16 38 33.8",dec:"-10 37 12.4",magnitude:2.56},{id:3,label:"Yed",ra:"16 19 40.3",dec:"-04 45 23.3",magnitude:3.38},{id:4,label:"Kappa",ra:"16 58 52.5",dec:"09 19 55.5",magnitude:3.36},{id:5,label:"Resalhague",ra:"17 36 06.9",dec:"12 32 15.6",magnitude:2.13},{id:6,label:"Cabalrai",ra:"17 44 43.7",dec:"04 33 12.4",magnitude:2.92},{id:7,label:"Gaia DR2",ra:"15 50 57.4",dec:"-03 30 35.9",magnitude:3.33},{id:8,label:"Epsilon",ra:"15 52 05.6",dec:"04 23 55.1",magnitude:3.75},{id:9,label:"Unukalhai",ra:"15 45 31.8",dec:"06 20 34.7",magnitude:2.8},{id:10,label:"Delta A",ra:"15 36 01.6",dec:"10 27 03.7",magnitude:3.86},{id:11,label:"Beta",ra:"15 47 22.3",dec:"15 20 20.6",magnitude:3.67},{id:12,label:"Gamma",ra:"15 57 38.2",dec:"15 34 31.3",magnitude:3.94},{id:13,label:"Kappa",ra:"15 49 53.7",dec:"18 03 34.6",magnitude:4.19},{id:14,label:"Nu",ra:"17 22 15.5",dec:"-12 52 26.5",magnitude:4.34},{id:15,label:"Xi",ra:"17 39 02.5",dec:"-15 24 56.5",magnitude:3.59},{id:16,label:"Omicron",ra:"17 42 50.5",dec:"-12 53 25.2",magnitude:4.25},{id:17,label:"Eta",ra:"18 22 37.2",dec:"-02 53 41.5",magnitude:3.39},{id:18,label:"Alya",ra:"18 57 28.5",dec:"04 13 59.3",magnitude:4.66}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,1],[14,15],[15,16],[16,17],[17,18],[7,8],[8,9],[9,10],[10,11],[11,12],[12,13],[13,11]]},fx={stars:[{id:0,label:"Beta2",ra:"19 25 02.3",dec:"-44 45 00.2",magnitude:4.34},{id:1,label:"Rukbat",ra:"19 25 37.9",dec:"-40 34 00.1",magnitude:3.92},{id:2,label:"Iota",ra:"19 56 59.7",dec:"-41 48 00.9",magnitude:4.25},{id:3,label:"Theta1",ra:"20 01 22.3",dec:"-35 12 25.3",magnitude:4.28},{id:4,label:"62",ra:"20 04 12.2",dec:"-27 38 22.1",magnitude:4.44},{id:5,label:"h2",ra:"19 38 14.3",dec:"-24 49 40.7",magnitude:4.56},{id:6,label:"Tau",ra:"19 08 30.9",dec:"-27 37 59.7",magnitude:3.47},{id:7,label:"Nunki",ra:"18 56 49.9",dec:"-26 15 54.9",magnitude:2},{id:8,label:"Xi2",ra:"18 59 14.2",dec:"-21 04 26.3",magnitude:3.69},{id:9,label:"Omicron",ra:"19 06 11.7",dec:"-21 42 17.7",magnitude:3.91},{id:10,label:"43",ra:"19 19 06.6",dec:"-18 54 31.3",magnitude:5.03},{id:11,label:"Rho1",ra:"19 23 08.0",dec:"-17 48 01.9",magnitude:3.98},{id:12,label:"Eta",ra:"18 19 20.5",dec:"-36 45 10.2",magnitude:3.14},{id:13,label:"Kaus Australis",ra:"18 25 51.1",dec:"-34 22 17.9",magnitude:1.8},{id:14,label:"Ascella",ra:"19 04 13.1",dec:"-29 50 36.0",magnitude:2.61},{id:15,label:"Phi",ra:"18 47 14.1",dec:"-26 57 52.7",magnitude:3.13},{id:16,label:"Kaus Media",ra:"18 22 36.8",dec:"-29 49 00.8",magnitude:2.86},{id:17,label:"Alnsal",ra:"18 07 26.2",dec:"-30 25 23.7",magnitude:3.13},{id:18,label:"3",ra:"17 49 09.4",dec:"-27 50 24.9",magnitude:4.66},{id:19,label:"Kaus Borealis",ra:"18 29 32.0",dec:"-25 24 28.0",magnitude:2.97},{id:20,label:"Mu",ra:"18 15 16.7",dec:"-21 03 09.9",magnitude:3.86},{id:21,label:"HD 180885",ra:"19 21 20.2",dec:"-35 22 27.8",magnitude:5.53},{id:22,label:"V4089",ra:"19 35 52.0",dec:"-39 58 43.5",magnitude:5.91}],edges:[[0,1],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[12,13],[16,17],[17,18],[19,20],[7,15],[6,14],[15,19],[16,19],[14,21],[5,21],[2,22],[1,21],[21,22],[13,16],[13,17],[15,14],[15,16]]},px={stars:[{id:0,label:"Algedi",ra:"20 19 26.8",dec:"-12 28 05.0",magnitude:3.73},{id:1,label:"Dabih",ra:"20 22 25.3",dec:"-14 42 10.1",magnitude:3.2},{id:2,label:"Psi",ra:"20 47 34.8",dec:"-25 10 49.4",magnitude:4.22},{id:3,label:"Omega",ra:"20 53 18.9",dec:"-26 49 29.2",magnitude:4.22},{id:4,label:"Theta",ra:"21 07 21.2",dec:"-17 08 01.0",magnitude:4.06},{id:5,label:"Zeta",ra:"21 28 05.7",dec:"-22 18 09.6",magnitude:3.92},{id:6,label:"Iota",ra:"21 23 38.3",dec:"-16 43 41.4",magnitude:4.44},{id:7,label:"Nashira",ra:"21 41 28.5",dec:"-16 32 58.0",magnitude:3.77},{id:8,label:"Deneb",ra:"21 48 25.1",dec:"-16 00 50.3",magnitude:2.94},{id:9,label:"Nu",ra:"20 22 03.4",dec:"-12 40 51.8",magnitude:4.72},{id:10,label:"Sigma",ra:"20 20 50.5",dec:"-19 02 25.9",magnitude:5.41}],edges:[[0,1],[1,2],[3,4],[4,1],[4,5],[5,6],[4,6],[6,7],[7,8],[1,9],[1,10]]},gx={stars:[{id:0,label:"c2",ra:"23 10 46.4",dec:"-21 02 11.8",magnitude:3.84},{id:1,label:"Skat",ra:"22 55 58.3",dec:"-15 41 17.0",magnitude:3.28},{id:2,label:"Tua",ra:"22 50 54.6",dec:"-13 27 39.6",magnitude:4.13},{id:3,label:"Sigma",ra:"22 31 57.9",dec:"-10 33 01.7",magnitude:4.81},{id:4,label:"Ancha",ra:"22 18 09.0",dec:"-07 39 34.2",magnitude:4.31},{id:5,label:"Sadalmelik",ra:"22 07 03.9",dec:"-00 11 58.6",magnitude:3.09},{id:6,label:"Sadachbia",ra:"22 22 56.6",dec:"-01 15 44.7",magnitude:3.83},{id:7,label:"Zeta",ra:"22 30 06.8",dec:"00 06 25.3",magnitude:3.73},{id:8,label:"Eta",ra:"22 36 38.2",dec:"00 00 37.0",magnitude:4},{id:9,label:"Lambda",ra:"22 53 54.9",dec:"-07 26 50.0",magnitude:3.8},{id:10,label:"Psi1",ra:"23 17 11.7",dec:"-08 57 07.4",magnitude:4.41},{id:11,label:"b1",ra:"23 24 16.6",dec:"-19 57 51.0",magnitude:4.09},{id:12,label:"Iota",ra:"22 07 47.0",dec:"-13 44 55.3",magnitude:4.25},{id:13,label:"Sadalsuud",ra:"21 32 52.4",dec:"-05 27 43.9",magnitude:3.03},{id:14,label:"Albali",ra:"20 49 01.9",dec:"-09 24 18.4",magnitude:3.78}],edges:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[4,12],[13,14],[5,13]]},vx={stars:[{id:0,label:"Upsilon",ra:"25 20 50.0",dec:"27 23 43.0",magnitude:4.75},{id:1,label:"Sigma",ra:"25 04 10.7",dec:"31 56 17.7",magnitude:5.47},{id:2,label:"Phi",ra:"25 15 06.0",dec:"24 42 57.1",magnitude:4.81},{id:3,label:"Eta",ra:"25 32 49.0",dec:"15 28 27.7",magnitude:3.78},{id:4,label:"Omicron",ra:"25 46 42.6",dec:"09 16 58.9",magnitude:4.41},{id:5,label:"Alrescha",ra:"26 03 20.2",dec:"02 53 02.2",magnitude:3.81},{id:6,label:"Xi",ra:"25 54 50.8",dec:"03 18 37.5",magnitude:4.75},{id:7,label:"Nu",ra:"25 42 43.7",dec:"05 36 49.0",magnitude:4.56},{id:8,label:"Mu",ra:"25 31 29.4",dec:"06 16 19.8",magnitude:4.97},{id:9,label:"Epsilon",ra:"25 04 14.1",dec:"08 01 26.9",magnitude:4.41},{id:10,label:"Delta",ra:"24 49 58.4",dec:"07 43 13.8",magnitude:4.53},{id:11,label:"41",ra:"24 21 52.7",dec:"08 19 42.0",magnitude:5.53},{id:12,label:"Omega",ra:"24 00 35.3",dec:"07 00 03.0",magnitude:4.09},{id:13,label:"Iota",ra:"23 41 13.8",dec:"05 45 38.8",magnitude:4.22},{id:14,label:"Theta",ra:"23 29 13.8",dec:"06 30 54.9",magnitude:4.44},{id:15,label:"Gamma",ra:"23 18 27.4",dec:"03 25 04.4",magnitude:3.84},{id:16,label:"Kappa",ra:"23 28 12.5",dec:"01 23 29.7",magnitude:4.94},{id:17,label:"Lambda",ra:"23 43 18.9",dec:"01 55 00.3",magnitude:4.53}],edges:[[0,1],[1,2],[0,2],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[11,12],[12,13],[13,14],[14,15],[15,16],[16,17],[17,13]]},yx={aries:ix,taurus:ax,gemini:ox,cancer:sx,leo:ux,virgo:lx,libra:cx,scorpius:hx,ophiuchus:dx,sagittarius:fx,capricornus:px,aquarius:gx,pisces:vx};class mx{constructor(e){this.graphManager=e,this.settings=e.settings,this.layout=e.layout}load(e){const t=yx[e.toLowerCase()];t?(this.graphManager.graph=xx(e,t.stars,t.edges,this.graphManager.graphClass[this.settings.type]),this.layout.applyLayout("rotate180")):console.warn(`Constellation "${e}" not found.`)}aries(){this.load("aries")}taurus(){this.load("taurus")}gemini(){this.load("gemini")}cancer(){this.load("cancer")}leo(){this.load("leo")}virgo(){this.load("virgo")}libra(){this.load("libra")}scorpius(){this.load("scorpius")}ophiuchus(){this.load("ophiuchus")}sagittarius(){this.load("sagittarius")}capricornus(){this.load("capricornus")}aquarius(){this.load("aquarius")}pisces(){this.load("pisces")}orion(){this.load("orion")}}function bx(n=3){return Math.pow(.8,n)}function wx(n){const[e,t,r]=n.split(" ").map(parseFloat);return(e+t/60+r/3600)*15}function Ex(n){const e=n.trim().startsWith("-")?-1:1,t=n.trim().replace("+","").replace("-","").split(" ").map(parseFloat),[r,a,o]=t;return e*(r+a/60+o/3600)}function xx(n,e,t,r){const a=new r;return e.forEach(o=>{const s=wx(o.ra),u=Ex(o.dec);a.addNode(o.id,{label:o.label,x:s,y:u,magnitude:o.magnitude,size:bx(o.magnitude),desc:{name:o.label,magnitude:o.magnitude,RA:Sx(o.ra),DEC:o.dec}})}),t.forEach(([o,s])=>{a.mergeEdge(o,s)}),a}function Sx(n){let[e=0,t=0,r=0]=n.split(" ").map(Number);r=r%60,t=t%60,e=e%24;const a=String(e).padStart(2,"0"),o=String(t).padStart(2,"0"),s=r.toFixed(1).padStart(4,"0");return[a,o,s].join(" ")}class Ax{constructor(e){this.graphManager=e,this.settings=e.settings,this.layout=e.layout,this.zodiac=new mx(e)}empty(e){this.graphManager.graph=Yt.empty(this.graphManager.graphClass[this.settings.type],+e),this.layout.applyLayout("circle")}complete(e){this.graphManager.graph=Yt.complete(this.graphManager.graphClass[this.settings.type],+e),this.layout.applyLayout("circle")}ladder(e){this.graphManager.graph=Yt.ladder(this.graphManager.graphClass[this.settings.type],+e),this.layout.applyLayout("twoLine",{line1Count:+e,Y:50})}completeBipartite(e,t){this.graphManager.graph=Yt.empty(this.graphManager.graphClass[this.settings.type],+e+ +t);for(let r=0;r<+e;r++)for(let a=+e;a<Number(e)+ +t;a++)this.graphManager.graph.addEdge(r,a);this.layout.applyLayout("twoLine",{line1Count:+e,Y:50})}cycle(e){this.graphManager.graph=Yt.path(this.graphManager.graphClass[this.settings.type],+e),this.graphManager.graph.addEdge(0,+e-1),this.layout.applyLayout("circle")}path(e){this.graphManager.graph=Yt.path(this.graphManager.graphClass[this.settings.type],+e),this.layout.applyLayout("oneLine")}caveman(e,t){this.graphManager.graph=Hd.caveman(this.graphManager.graphClass[this.settings.type],+e,+t),this.layout.applyLayout("circle")}connectedCaveman(e,t){this.graphManager.graph=Hd.connectedCaveman(this.graphManager.graphClass[this.settings.type],+e,+t),this.layout.applyLayout("circle")}clusters(e,t,r){this.graphManager.graph=_s.clusters(this.graphManager.graphClass[this.settings.type],{order:+e<2?2:+e,size:+t<2?2:+t,clusters:+r<2?2:+r}),this.layout.applyLayout("random")}erdosRenyi(e,t){this.graphManager.graph=_s.erdosRenyi(this.graphManager.graphClass[this.settings.type],{order:+e,probability:+t>1?1:+t}),this.layout.applyLayout("circle")}girvanNewman(e){this.graphManager.graph=_s.girvanNewman(this.graphManager.graphClass[this.settings.type],{zOut:4}),this.layout.applyLayout("circle")}krackhardtkite(){this.graphManager.graph=nx(this.graphManager.graphClass[this.settings.type]),this.layout.applyLayout("oneLine")}florentineFamilies(){this.graphManager.graph=tx(this.graphManager.graphClass[this.settings.type]),this.layout.applyLayout("circle")}karateClub(){this.graphManager.graph=ex(this.graphManager.graphClass[this.settings.type]),this.layout.applyLayout("circle")}}const Yd=document;class _x{constructor(e){this.app=e.app,this.eventBus=this.app.eventBus,this.graphManager=e,this.panel=Yd.querySelector("widgets #graphs-panel"),this.ul=this.panel.querySelector("ul"),this.index=0}init(){this.listeners()}lis(e="id"){const t=this.ul.querySelectorAll("li.select");return e=="id"?[...t].map(r=>r.id.split("-")[1]):t}selectLis(e){if(this.index=e.split("-")[1],this.selectLi(this.index),this.app.keyHandler.isCtrlHold())this.graphManager.graphIndex=this.index;else{let t=this.lis().map(r=>this.graphManager.graphs[r].nodes());t=new Set(t.flat()),this.graphManager.selectAllNode(t)}}updateGraphsPanel(){this.ul.innerHTML="",this.graphManager.graphs.forEach((e,t)=>{e.getAttribute("label")==="Graph"?e.setAttribute("id",0):e.setAttribute("id",t),e.getAttribute("label")||e.setAttribute("label",`graph ${t}`);const r=Yd.createElement("li");r.id=`graphs-${e.getAttribute("id")}`,r.setAttribute("name","graphs"),r.textContent=e.getAttribute("label"),this.ul.appendChild(r)})}listeners(){this.panel.addEventListener("click",e=>{e.target.id=="graphs-panel"&&this.deselectLis()})}selectLi(e){this.app.keyHandler.isCtrlHold()&&this.deselectLis();const t=this.ul.querySelector(`#graphs-${e}`);t&&t.classList.toggle("select")}deselectLis(){this.lis("node").forEach(e=>e.classList.remove("select")),this.graphManager.deselectAll()}}const Vd=document;class kx{constructor(e){this.app=e.app,this.eventBus=this.app.eventBus,this.graphManager=e,this.settings=e.settings,this.panel=Vd.querySelector("widgets #face-panel"),this.ul=this.panel.querySelector("ul"),this.index=0}init(){this.listeners(),this.events()}lis(e="id"){const t=this.ul.querySelectorAll("li.select");return e=="id"?[...t].map(r=>r.id.split("-")[1]):t}selectLis(e){const t=this.graphManager.graph,r=e.split("-")[1];t.getFaceAttributes(r),this.selectLi(r),this.graphManager.selectAllFace(this.lis());let a=this.lis().map(o=>t.getFaceAttribute(o,"nodes"));a=new Set(a.flat()),this.graphManager.selectAllNode(a)}updateFacePanel(){this.ul.innerHTML="";const e=this.graphManager.graph;let t=0;e.forEachFace((r,a)=>{t++,e.getFaceAttribute(r,"id")===void 0&&e.setFaceAttribute(r,"id",index),e.getFaceAttribute(r,"label")||e.setFaceAttribute(r,"label",`face ${t}`);const o=Vd.createElement("li");o.id=`face-${r}`,o.setAttribute("name","faces"),o.setAttribute("key",r),o.textContent=e.getFaceAttribute(r,"label"),this.ul.appendChild(o)})}listeners(){this.panel.addEventListener("click",e=>{e.target.id=="face-panel"&&this.deselectLis()})}events(){this.eventBus.on("key:down",e=>{[...e.detail.key].join("")})}selectLi(e){const t=this.ul.querySelector(`#face-${e}`);if(t&&t.classList.toggle("select"),this.settings.colorPicker){const r=this.graphManager.graph.getFaceAttribute(e,"color"),a=this.graphManager.graph.getFaceAttribute(e,"labelColor");this.app.colorPicker.setColor("face",r),this.app.colorPicker.setColor("label",a)}}deselectLis(){this.lis("node").forEach(e=>e.classList.remove("select")),this.graphManager.deselectAll()}}class Dx{constructor(e,t,r="mixed"){this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.layout=e.layout,this.generator=new Ax(this),this.metric=new Sp(this),this.graphsPanel=new _x(this),this.facePanel=new kx(this),this.needsRedraw=!0,this.limit=t,this.index=0,this.cut=!1,this.graphClass={directed:yE,undirected:mE,mixed:cr},this.graphIndex=0,this._graph=Yt.empty(this.graphClass[r],0),this._graph.updateAttributes(a=>({...a,label:"Graph",id:0})),this.graphs=[this._graph],this.history=[this.graphs.map(a=>a.export())],this.selectNodeIndex=0,this.selectEdgeIndex=0,this.subGraph=void 0,this.init()}init(){this.setupEventListeners(),this.graphsPanel.init(),this.facePanel.init()}get graph(){return this.graphs[this.graphIndex]}set graph(e){e.mergeAttributes(this.graphs[this.graphIndex].getAttributes()),this.graphs=[e]}addNode(e,t){this.graph.addNode(e,t),this.saveGraphState()}getHistory(){return this.history}getIndex(e){return this.history[e]??void 0}updateIndex(e){if(e<0)return console.log("Nothing to Undo..."),!1;if(e>=this.history.length)return console.log("Nothing to Redo..."),!1;this.index=e,this.graphs=[];for(const t of this.history[this.index]){const r=Yt.empty(this.graphClass[t.options.type],0);this.graphs.push(r.import(t))}return this.eventBus.emit("updateSetting",{key:"type",value:this.history[this.index][0].options.type}),this.graphIndex=0,this.graphsPanel.updateGraphsPanel(),this.facePanel.updateFacePanel(),this.settings.forceSimulation&&this.app.updateSimulation(),!0}clearTo(e="mixed"){this.eventBus.emit("updateSetting",{key:"type",value:e}),this.graph=Yt.empty(this.graphClass[e],0),this.saveGraphState()}setupEventListeners(){this.eventBus.on("redo",e=>{this.updateIndex(this.index+1)&&this.eventBus.emit("graph:updated",{type:"redo"})}),this.eventBus.on("undo",e=>{this.updateIndex(this.index-1)&&this.eventBus.emit("graph:updated",{type:"undo"})})}push(e){this.history.push(e),this.index++,this.history.length>=this.limit&&(this.history=this.history.slice(-this.limit),this.index=this.history.length-1)}saveGraphState(e=!0){this.history.length!=this.index+1&&(this.history.length=this.index+1),this.push(this.graphs.map(t=>t.export())),this.settings.saveHistory&&this.saveHistoryToLocalStorage(),this.graphsPanel.updateGraphsPanel(),this.facePanel.updateFacePanel(),e&&this.app.updateSimulation(),this.needsRedraw=!0}makeGraphComplete(e="directed"){for(let t=0;t<this.graph.order;t++)for(let r=t+1;r<this.graph.order;r++)this.graph.type=="mixed"?e=="undirected"?this.graph.mergeUndirectedEdge(t,r):this.graph.mergeDirectedEdge(t,r):this.graph.mergeEdge(t,r);this.saveGraphState()}dropSelectedNodesEdges(){const e=this.graph.getSelectedEdges(),t=this.graph.getSelectedNodes();this.graphs.forEach((r,a)=>{e.forEach(o=>{r.hasEdge(o)&&r.dropEdge(o)}),t.forEach(o=>{r.hasNode(o)&&r.dropNode(o)})}),this.saveGraphState()}connectSelectedNodes(e="directed"){this.graph.connectSelectedNodes(this.settings.edge_color,e),this.saveGraphState()}connectSelectedNodesInOrder(e="directed"){this.graph.connectSelectedNodesInOrder(this.settings.edge_color,e),this.saveGraphState()}updateSelectedNodesEdgesColor(e=!0,t=!0,r=!0,a=!0){this.graph.updateSelectedNodesColor(e?this.settings.node_color:!1,t?this.settings.stroke_color:!1,a?this.settings.label_color:!1),this.graph.updateSelectedEdgesColor(r?this.settings.edge_color:!1,a?this.settings.label_color:!1),this.saveGraphState(!1)}updateSelectedName(e){e?this.graph.updateSelectedName(e):this.graph.updateSelectedName(""),this.saveGraphState(!1)}updateSelectedInfo(e){e?this.graph.updateSelectedInfo({"":e}):this.graph.updateSelectedInfo({}),this.saveGraphState(!1)}updateSelectedWeight(e){const t=parseFloat(e);t?this.graph.updateSelectedWeight(t):this.graph.updateSelectedWeight(void 0),this.saveGraphState(!1)}deselectAll(){this.deselectAllNode(),this.deselectAllEdge(),this.deselectAllFace()}deselectAllNode(){this.graph.updateEachNodeAttributes((e,t)=>({...t,selected:!1})),this.app.rect.scale.active=!1}deselectAllEdge(){this.graph.updateEachEdgeAttributes((e,t)=>({...t,selected:!1})),this.app.rect.scale.active=!1}deselectAllFace(){this.graph.forEachFace((e,t)=>this.graph.deselectFace(e)),this.app.rect.scale.active=!1}selectAll(e=null){this.selectAllNode(e),this.selectAllEdge(e),this.selectAllFace(e)}selectAllFace(e){this.deselectAllFace(),e?e.forEach(t=>{this.selectFace(t)}):this.graph.updateEachFaceAttributes((t,r)=>({...r,selected:r.id+1}))}selectAllEdge(e){this.deselectAllEdge(),e?e.forEach(t=>{this.selectEdge(t)}):this.graph.updateEachEdgeAttributes((t,r)=>({...r,selected:r.id+1}))}selectAllNode(e){e?(this.deselectAllNode(),e.forEach(t=>{this.graph.hasNode(t)&&this.graph.updateNodeAttributes(t,r=>({...r,selected:r.id+1}))})):this.graph.updateEachNodeAttributes((t,r)=>({...r,selected:r.id+1}))}selectNode(e){this.graph.selectNode(e)}selectFace(e){this.graph.selectFace(e)}selectEdge(e){this.graph.selectEdge(e)}selectNextNode(){this.app.keyHandler.isShiftHold()||this.deselectAllNode(),this.selectNodeIndex=Pn(this.selectNodeIndex+1,this.graph.order);const e=this.graph.nodes()[this.selectNodeIndex];this.graph.selectNode(e)}selectPerviousNode(){this.app.keyHandler.isShiftHold()||this.deselectAllNode(),this.selectNodeIndex=Pn(this.selectNodeIndex-1,this.graph.order);const e=this.graph.nodes()[this.selectNodeIndex];this.graph.selectNode(e)}selectNextEdge(){this.app.keyHandler.isShiftHold()||this.deselectAllEdge(),this.selectEdgeIndex=Pn(this.selectEdgeIndex+1,this.graph.size);const e=this.graph.edges()[this.selectEdgeIndex];this.graph.selectEdge(e)}selectPerviousEdge(){this.app.keyHandler.isShiftHold()||this.deselectAllEdge(),this.selectEdgeIndex=Pn(this.selectEdgeIndex+1,this.graph.size);const e=this.graph.edges()[this.selectEdgeIndex];this.graph.selectEdge(e)}copySubgraph(){this.subGraph=this.graph.copySubgraph(),this.cut=!1}cutSubgraph(){this.subGraph=this.graph.cutSubgraph(),this.cut=!0}pasteSubgraph(e=!1,t={x:150,y:100}){this.subGraph=this.graph.pasteSubgraph(this.subGraph,this.cut,t),e&&this.subgraph(),this.cut=!1,this.saveGraphState()}reverseGraph(){if(this.graph.type!=="undirected"){const e=Vt.reverse(this.graph);this.graph.replace(e),this.saveGraphState()}}toDirectedGraph(){if(this.graph.type!=="directed"){const e=Vt.toDirected(this.graph);this.clearTo("directed"),this.graph.replace(e),this.eventBus.emit("updateSetting",{key:"type",value:"directed"}),this.saveGraphState()}}toMixedGraph(){if(this.graph.type!=="mixed"){const e=Vt.toMixed(this.graph);this.clearTo("mixed"),this.graph.replace(e),this.eventBus.emit("updateSetting",{key:"type",value:"mixed"}),this.saveGraphState()}}toUndirectedGraph(){if(this.graph.type!=="undirected"){const e=Vt.toUndirected(this.graph);this.clearTo("undirected"),this.graph.replace(e),this.eventBus.emit("updateSetting",{key:"type",value:"undirected"}),this.saveGraphState()}}toWeighted(){this.graph.updateEachEdgeAttributes((e,t)=>({...t,weight:1})),this.saveGraphState()}toUnweighted(){this.graph.updateEachEdgeAttributes((e,t)=>({...t,weight:void 0})),this.saveGraphState()}saveHistoryToLocalStorage(){if(!this.validateHistory(this.history))return console.warn("Cannot save: history data is invalid."),!1;try{const e=JSON.stringify(this.history);return localStorage.setItem("graphStudio-history",e),!0}catch(e){return console.error("Failed to save history to local storage:",e),!1}}loadHitoryFromLocalStorage(){const e=localStorage.getItem("graphStudio-history");if(e)try{const t=JSON.parse(e);if(this.validateHistory(t))return this.history=t,this.updateIndex(this.history.length-1),!0}catch{console.warn("Invalid JSON format in localStorage.")}}cleanLocalStorage(){localStorage.removeItem("graphStudio-history")}validateHistory(e){if(!Array.isArray(e))return console.error("Graph data must be an array."),!1;for(const t of e){const r=t[0];if(!r)return console.error(`Graph at index ${i} is missing.`),!1;if(!Array.isArray(r.nodes))return console.error(`Graph at index ${i} has invalid or missing nodes.`),!1;for(const a of r.nodes){if(typeof a.key!="string")return console.error(`Node missing or invalid key at graph ${i}.`),!1;if(typeof a.attributes!="object"||a.attributes===null)return console.error(`Node ${a.key} missing attributes at graph ${i}.`),!1;if(!("id"in a.attributes))return console.error(`Node ${a.key} missing id at graph ${i}.`),!1}if(!Array.isArray(r.edges))return console.error(`Graph at index ${i} has invalid or missing edges.`),!1;for(const a of r.edges){if(typeof a.key!="string")return console.error(`Edge missing or invalid key at graph ${i}.`),!1;if(typeof a.source!="string"||typeof a.target!="string")return console.error(`Edge ${a.key} missing or invalid source/target at graph ${i}.`),!1;if(typeof a.attributes!="object"||a.attributes===null)return console.error(`Edge ${a.key} missing attributes at graph ${i}.`),!1}}return!0}subgraph(){if(!this.graph.getSelectedNodes().length){this.metric.addHeader("Graphs"),this.metric.addInfo("Select at least one node"),this.metric.addLine();return}const t=this.graph.copySubgraph();t.removeAttribute("id"),t.removeAttribute("label"),this.graphs.push(t),t.deselectAll(),this.deselectAll(),this.saveGraphState()}addFace(){const e=this.graph.getSelectedNodes(),t=Vt.subgraph(this.graph,e);this.metric._isCycle(t)&&(this.graph.addFace(e),this.saveGraphState())}}const Cx="Shortcuts",Ix={n:{desc:"New graph",action:"new-mixed-btn"},o:{desc:"Import graph",action:"import-graph"},s:{desc:"Scale",action:"toggle-scale-btn",value:!0},u:{desc:"Undo",action:"undo-btn"},d:{desc:"Delete",action:"remove-selection-btn"},c:{desc:"Update color",action:"color-selection-btn"},e:{desc:"Add edge",action:"add-edge-btn"},"alt+e":{desc:"Add edge",action:"add-edge-in-order-btn"},a:{desc:"All node info",action:"all-node-info-btn"},q:{desc:"Clear panel",action:"clear-info-panel-btn"},y:{desc:"Copy",action:"copy-subgraph"},x:{desc:"Cut",action:"cut-subgraph"},p:{desc:"Paste",action:"paste-subgraph"},"ctrl+p":{desc:"Paste",action:"paste-subgraph-seprate"},r:{desc:"Rename",action:"rename-btn"},i:{desc:"Info",action:"desc-btn"},w:{desc:"weight",action:"weight-btn"},f:{desc:"Force Simulation",action:"toggle-force-btn",value:!0},"ctrl+f":{desc:"Force Simulation",action:"add-face-btn"},t:{desc:"Tree",action:"toggle-tree-btn",value:!0},F5:{desc:"Reload",action:"reload"},ArrowUp:{desc:"Select all node",action:"select-all-node"},ArrowDown:{desc:"Deselect all node",action:"deselect-all-node"},ArrowRight:{desc:"Select next node",action:"select-next-node"},ArrowLeft:{desc:"Select previous node",action:"select-pervious-node"},"shift+ArrowRight":{desc:"Select next node",action:"select-next-node"},"shift+ArrowLeft":{desc:"Select previous node",action:"select-pervious-node"},shift:{desc:"Tree",action:"toggle-select-btn",value:!0},alt:{desc:"Component",action:"toggle-component-btn",value:!0},ctrl:{desc:"Panning",action:"toggle-panning-btn",value:!0},"alt+a":{desc:"All edge info",action:"all-edge-info-btn"},"alt+ArrowUp":{desc:"Select all edge",action:"select-all-edge"},"alt+ArrowDown":{desc:"Deselect all edge",action:"deselect-all-edge"},"alt+ArrowRight":{desc:"Select next edge",action:"select-next-edge"},"alt+ArrowLeft":{desc:"Select previous edge",action:"select-pervious-edge"},"shift+alt+ArrowRight":{desc:"Select next edge",action:"select-next-edge"},"shift+alt+ArrowLeft":{desc:"Select previous edge",action:"select-pervious-edge"},"ctrl+r":{desc:"Redo",action:"redo-btn"},"ctrl+s":{desc:"Export graph",action:"export-graph"},C:{desc:"Complete",action:"complete-btn"},"alt+C":{desc:"Complete",action:"complete-directed-btn"},O:{desc:"Organize circle",action:"organize-circle"},E:{desc:"Add directed edge",action:"add-directed-edge-btn"},"alt+E":{desc:"Add directed edge",action:"add-directed-edge-in-order-btn"},P:{desc:"Export PNG",action:"export-png"},"shift+C":{desc:"Complete",action:"complete-btn"},"shift+alt+C":{desc:"Complete",action:"complete-directed-btn"},"shift+O":{desc:"Organize circle",action:"organize-circle"},"shift+alt+E":{desc:"Add directed edge",action:"add-directed-edge-in-order-btn"},"shift+E":{desc:"Add directed edge",action:"add-directed-edge-btn"},"shift+P":{desc:"Export PNG",action:"export-png"},space:{desc:"Home",action:{c:{desc:"+ Color",action:{c:{desc:"Color Picker",action:"color-picker-btn"},n:{desc:"Update Node Color",action:"update-node-color"},s:{desc:"Update Stroke Color",action:"update-stroke-color"},e:{desc:"Update Edge Color",action:"update-edge-color"},l:{desc:"Update Label Color",action:"update-label-color"}}},n:{desc:"+ New Graph",action:{m:{desc:"Mixed Graph",action:"new-mixed-btn"},d:{desc:"Directed Graph",action:"new-digraph-btn"},u:{desc:"Undirected Graph",action:"new-undirected-graph-btn"}}},"⇒":{desc:"Next Node (Alt for Edge)",action:""},"⇐":{desc:"Pervious Node (Alt for Edge)",action:""},"⇑":{desc:"Select all Nodes (Alt for Edges)",action:""},"⇓":{desc:"Deselect all Nodes (Alt for Edges)",action:""}}}},si={desc:Cx,action:Ix},ut=document;class Lx{constructor(e){this.app=e,this.eventBus=e.eventBus,this.eventKeyMap={AltRight:"alt",ControlRight:"ctrl",ShiftRight:"shift",AltLeft:"alt",ControlLeft:"ctrl",ShiftLeft:"shift",Space:"space"},this.pressedKeys=new Set,this.lastChord=si.action.space.action,this.modalChord=ut.querySelector(".modal-chord"),this.inputModal=ut.querySelector(".modal-input"),this._input=!1,this.header=ut.querySelector(".modal-chord .shortcut-chord .header"),this.fakeHeader=ut.querySelector(".modal-chord  .shortcut-chord-fake .header"),this._Chord=ut.querySelector(".shortcut-chord"),this.fakeChord=ut.querySelector(".shortcut-chord-fake"),this.exceptionKey=["ArrowUp","ArrowDown","arrowLeft","ArrowRight"]}init(){this.chordGenerator(this.lastChord),ut.addEventListener("keydown",t=>{if(t.repeat&&!this.exceptionKey.includes(t.key))return;const r=this.updatePressedKeys(t,"add");if(this._input){if(r==="Escape"&&this.toggleInput("rename",!1),r==="Enter"){const a=ut.querySelector(".input-chord input");this.app.menu.handleMenuAction(this._input,a.value),this.toggleInput("rename",!1)}}else{this.isChordVisible()&&this.eventBus.emit("key:down",{key:this.pressedKeys});const a=this.findKey();a&&t.preventDefault(),this.action(a)}}),ut.addEventListener("keyup",t=>{if(t.repeat&&!this.exceptionKey.includes(t.key))return;const r=this.updatePressedKeys(t,"delete");this._input||(t.preventDefault(),this.lastChord[r]&&typeof this.lastChord[r].value=="boolean"&&this.app.menu.handleMenuAction(this.lastChord[r].action,!this.lastChord[r].value)),this.eventBus.emit("key:up",{key:this.pressedKeys})});const e=ut.querySelectorAll(".modal, .modal-chord, .modal-input");e.length>0&&e.forEach(t=>{t.addEventListener("click",r=>{r.target===t&&(t.style.display="none",this.lastChord=si.action,this._input=!1)})})}chordGenerator(e){const t=ut.createElement("ul");for(const o in e){const s=e[o].desc,u=ut.createElement("li");u.innerHTML=`
      <span class="title">${o}</span>
      <span class="arrow">→</span>
      <span class="desc">${s}</span>
    `,t.appendChild(u)}const r=this._Chord.querySelector("ul");r&&this._Chord.removeChild(r);const a=this.fakeChord.querySelector("ul");a&&this.fakeChord.removeChild(a),this._Chord.appendChild(t),this.fakeChord.appendChild(t.cloneNode(!0))}action(e){const t=this.lastChord[e];t?typeof t.action=="string"?(this.app.menu.handleMenuAction(t.action,t.value),this.lastChord=si.action,this.toggleChord(!1)):(this.lastChord=t.action,this.chordGenerator(this.lastChord),this.toggleChord(!0)):(this.toggleChord(!1),this.lastChord=si.action)}toggleChord(e=!0){e?this.modalChord.style.display="flex":this.modalChord.style.display="none"}toggleInput(e="rename",t=!0){const r=ut.querySelector(".input-chord .header"),a=ut.querySelector(".input-chord input");switch(e){case"rename":r.textContent="Rename",a.name="rename",a.placeholder="Enter New Name ...";break;case"desc":r.textContent="Description",a.name="desc",a.placeholder="Enter New Description ...";break;case"weight":r.textContent="Weight",a.name="weight",a.placeholder="Enter New Weight ...";break}t?(this.inputModal.style.display="flex",a.focus(),this._input=e):(this.inputModal.style.display="none",this._input=!1),setTimeout(()=>{a.value=""},1)}findKey(){return Object.keys(this.lastChord).find(r=>{const a=r.split("+");return this.isCombo(...a)})}isCombo(...e){return e.every(t=>this.pressedKeys.has(t))&&this.pressedKeys.size===e.length}updatePressedKeys(e,t="add"){const r=this.eventKeyMap[e.code]||e.key;return t==="add"&&r!=="meta"?this.pressedKeys.add(r):this.pressedKeys.delete(r),r}isShiftHold(){return this.pressedKeys.has("shift")}isCtrlHold(){return this.pressedKeys.has("ctrl")}isChordVisible(){return this.modalChord.style.display!=="none"}}const je=document;function zx(n,e){je.querySelector(".container").classList.toggle("grid-hidden",n.grid<=2),je.getElementById("grid-size-1").value=n.node_radius,je.getElementById("vertex-size-1").value=n.node_radius,je.getElementById("edge-size-1").value=n.edge_size,je.getElementById("label-size-1").value=n.label_size,je.getElementById("history-limit-1").value=n.historyLimit,je.querySelector("#vertex-label .check").classList.toggle("hidden",!n.vertexLabel),je.querySelector("#edge-label .check").classList.toggle("hidden",!n.edgeLabel),je.querySelector("#face-label .check").classList.toggle("hidden",!n.faceLabel),je.querySelector("#weight-label .check").classList.toggle("hidden",!n.weightLabel),je.querySelector("#performance .check").classList.toggle("hidden",!n.performance),je.querySelector("#save-history .check").classList.toggle("hidden",!n.saveHistory),je.querySelector("#component").classList.toggle("gray-background",!n.component),je.querySelector("#scale").classList.toggle("gray-background",!n.scale),je.querySelector("#tree").classList.toggle("gray-background",!n.tree),je.querySelector("#force").classList.toggle("gray-background",!n.forceSimulation),je.querySelector("#colorPicker").classList.toggle("gray-background",!n.colorPicker),je.querySelector("#panning").classList.toggle("gray-background",!n.panning),je.querySelector("#select").classList.toggle("gray-background",!n.select),e.style.cursor=n.panning?"move":"default";const t=je.documentElement;je.querySelector(".container").classList.toggle("grid-hidden",n.grid<=2),t.style.setProperty("--grid-size",`${n.grid}px`),t.style.setProperty("--grid-color",n.grid_color),je.querySelector(".container").style.backgroundColor=n.background_color}var br;const Pr=class Pr{constructor(e){Bu(this,br,!0);if(this.app=e,this.eventBus=e.eventBus,Pr.instance)return Pr.instance;Pr.instance=this,this.debounceTimer=null,this.defaultSettings={background_color:"#ffffff",colorPicker:!1,component:!1,console_panel:!0,directed:!0,directed_edge:!0,edgeLabel:!0,edge_color:"#4682b4",edge_size:2,forceSimulation:!0,grid:20,type:"mixed",grid_color:"#00000020",info_panel:!0,label_color:"#000000",label_pos:{x:0,y:0},label_size:15,node_color:"#ffffff",face_color:"#4682b455",node_radius:40,panning:!1,scale:!1,select:!1,stroke_color:"#4682b4",stroke_size:2,tools_panel:!0,tree:!0,vertexLabel:!0,faceLabel:!0,weightLabel:!0,saveHistory:!0,historyLimit:100,graphs_panel:!0,face_panel:!0,performance:!1},this.nightSkyTheme={background_color:"#0d1b2a",edge_color:"#60a5fa",edge_size:1,forceSimulation:!1,grid_color:"#ffffff10",label_color:"#d1d5db",label_pos:{x:-20,y:-20},node_color:"#ffffff",node_radius:10,stroke_color:"#ffffff",stroke_size:0},this.settings=this.loadFromLocalStorage(),this.registerEventListeners()}init(){zx(this.settings,this.app.canvas)}registerEventListeners(){this.eventBus.on("updateSetting",e=>{const{key:t,value:r}=e.detail;if(this.setSetting(t,r),t=="grid"){const a=document.documentElement;document.querySelector(".container").classList.toggle("grid-hidden",this.settings.grid<=2),a.style.setProperty("--grid-size",`${this.settings.grid}px`)}else t&&r!==void 0&&this.eventBus.emit("graph:updated",{type:t})}),this.eventBus.on("updateAllSettings",e=>{const t=e.detail;t&&typeof t=="object"&&this.setAllSettings(t)}),this.eventBus.on("resetSettings",()=>{this.resetToDefault()}),this.eventBus.on("toggleSetting",e=>{const{key:t,value:r}=e.detail;t&&(this.toggleSetting(t,r),(t=="vertexLabel"||t=="directed_edge"||t=="edgeLabel"||t=="weightLabel")&&this.eventBus.emit("graph:updated",{type:"vertexLabel"}))})}loadFromLocalStorage(){const e=localStorage.getItem("appSettings");if(e)try{const t=JSON.parse(e);return this.validateSettings(t)}catch{console.warn("Invalid settings in localStorage. Using defaults.")}return{...this.defaultSettings}}saveToLocalStorage(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{localStorage.setItem("appSettings",JSON.stringify(this.settings)),console.log("Settings saved to localStorage"),this.eventBus.emit("settingsChanged",this.getAllSettings())},500)}resetToDefault(){this.setAllSettings(this.defaultSettings)}getSetting(e){return this.settings[e]}getAllSettings(){return{...this.settings}}setSetting(e,t){e in this.settings?this.settings[e]!==t&&(this.settings[e]=t,this.eventBus.emit("settingChanged",{key:e,value:t}),Tn(this,br)&&this.saveToLocalStorage()):console.warn(`Setting "${e}" does not exist.`)}setAllSettings(e){Object.keys(e).forEach(t=>{t in this.settings&&(this.settings[t]=e[t])}),this.eventBus.emit("settingsChanged",this.getAllSettings()),Tn(this,br)&&this.saveToLocalStorage(),this.init()}toggleSetting(e,t=null){const r=["scale","panning","select","component"];e in this.settings&&typeof this.settings[e]=="boolean"?(t===null?this.settings[e]=!this.settings[e]:this.settings[e]=t,r.includes(e)&&r.forEach(a=>{a!=e&&this.settings[e]&&(this.settings[a]=!1)}),(e==="component"&&this.settings.component||e==="scale"&&this.settings.scale||e==="panning"&&this.settings.panning)&&(this.settings.forceSimulation=!1,this.eventBus.emit("settingToggled",{key:"forceSimulation",value:this.settings.forceSimulation})),e==="forceSimulation"&&this.settings.forceSimulation&&(this.settings.component=!1,this.settings.scale=!1,this.settings.panning=!1),this.settings.performance&&(this.settings.forceSimulation=!1),this.eventBus.emit("settingToggled",{key:e,value:this.settings[e]}),Tn(this,br)&&t===null&&this.saveToLocalStorage(),this.init(),this.app.widget.init()):console.warn(`Setting "${e}" does not exist or is not a boolean.`)}setAutoSave(e){Hu(this,br,e)}validateSettings(e){return Object.keys(this.defaultSettings).reduce((t,r)=>(t[r]=e&&e.hasOwnProperty(r)?e[r]:this.defaultSettings[r],t),{})}loadNightSkyTheme(){this.setAllSettings(this.nightSkyTheme)}};br=new WeakMap,Qe(Pr,"instance",null);let Gs=Pr;const _e=document;class Tx{constructor(e,t,r="menu-bar"){if(this.app=e,this.eventBus=e.eventBus,this.graphManager=e.graphManager,this.appSettings=e.appSettings,this.layout=e.layout,this.menuData=t,this.container=_e.getElementById(r),!this.container){console.error("Menu container not found!");return}this.spaceEvent=new KeyboardEvent("keydown",{key:" ",code:"Space",keyCode:32,which:32,bubbles:!0})}init(){this.renderMenu(),this.attachEventListeners()}renderMenu(){this.container.innerHTML="";const e=_e.createElement("ul");this.menuData.forEach(t=>{const r=this.createMenu(t);e.appendChild(r)}),this.container.appendChild(e)}createMenu(e){const t=_e.createElement("li");if(e.id&&(t.id=e.id),e.title&&(t.textContent=e.title),e.submenu){const r=this.createSubmenu(e.submenu);t.appendChild(r)}return t}createSubmenu(e){const t=_e.createElement("ul");return e.forEach(r=>{if(r.type==="divider"){t.appendChild(_e.createElement("hr"));return}const a=_e.createElement("li");if(r.id&&(a.id=r.id),r.title){const o=_e.createElement("label");if(o.textContent=r.title,r.link){const s=_e.createElement("a");s.href=r.link,s.target="_blank",r.label?s.textContent=r.label:(s.textContent="?",s.classList.add("border")),o.insertBefore(s,o.firstChild)}a.appendChild(o)}if(r.shortcut){const o=_e.createElement("span");o.textContent=r.shortcut,a.appendChild(o)}if("check"in r&&!r.shortcut){const o=_e.createElement("span");o.innerHTML="&#10004;",o.classList.add("check"),r.check||o.classList.add("hidden"),a.appendChild(o)}if(r.input)if(r.id==="import-graph")a.appendChild(this.createInput(r.input[0]));else{const o=_e.createElement("div");r.input.forEach(s=>{o.appendChild(this.createInput(s))}),a.appendChild(o)}r.name&&a.setAttribute("name",r.name),r.submenu&&a.appendChild(this.createSubmenu(r.submenu)),t.appendChild(a)}),t}createInput(e){const t=_e.createElement("input");return t.type=e.type||"text",t.id=e.id,"hidden"in e&&(t.hidden=e.hidden),e.name&&(t.name=e.name),e.placeholder&&(t.placeholder=e.placeholder),e.required&&(t.required=!0),["number","range","date"].includes(t.type)&&(e.min!==void 0&&(t.min=e.min),e.max!==void 0&&(t.max=e.max),e.step!==void 0&&(t.step=e.step)),e.value!==void 0&&(e.type==="checkbox"||e.type==="radio"?t.checked=e.value:t.value=e.value),t}handleMenuAction(e,t){const r={"new-mixed-btn":()=>{this.graphManager.clearTo("mixed")},"new-digraph-btn":()=>{this.graphManager.clearTo("directed")},"new-undirected-graph-btn":()=>{this.graphManager.clearTo("undirected")},"import-graph":()=>this.eventBus.emit("import"),"export-graph":()=>this.eventBus.emit("export",{type:"json"}),"export-png":()=>this.eventBus.emit("export",{type:"png"}),"default-settings-btn":()=>this.appSettings.resetToDefault(),"sky-night-theme-btn":()=>this.appSettings.loadNightSkyTheme(),reload:()=>location.reload(),"add-edge-btn":()=>this.graphManager.connectSelectedNodes("undirected"),"add-face-btn":()=>this.graphManager.addFace(),"add-edge-in-order-btn":()=>this.graphManager.connectSelectedNodesInOrder("undirected"),"add-directed-edge-btn":()=>this.graphManager.connectSelectedNodes("directed"),"add-directed-edge-in-order-btn":()=>this.graphManager.connectSelectedNodesInOrder("directed"),"remove-selection-btn":()=>this.graphManager.dropSelectedNodesEdges(),"color-selection-btn":()=>this.graphManager.updateSelectedNodesEdgesColor(!0,!0,!0,!0),"complete-btn":()=>this.graphManager.makeGraphComplete("undirected"),"complete-directed-btn":()=>this.graphManager.makeGraphComplete("directed"),"node-color":()=>this.eventBus.emit("updateSetting",{key:"node_color",value:t}),"edge-color":()=>this.eventBus.emit("updateSetting",{key:"edge_color",value:t}),"label-color":()=>this.eventBus.emit("updateSetting",{key:"label_color",value:t}),"stroke-color":()=>this.eventBus.emit("updateSetting",{key:"stroke_color",value:t}),"background-color":()=>{_e.querySelector(".container").style.backgroundColor=t,this.eventBus.emit("updateSetting",{key:"background_color",value:t})},"grid-color":()=>{_e.documentElement.style.setProperty("--grid-color",t),this.eventBus.emit("updateSetting",{key:"grid_color",value:t})},rename:()=>this.graphManager.updateSelectedName(t),"rename-btn":()=>this.app.keyHandler.toggleInput("rename"),desc:()=>this.graphManager.updateSelectedInfo(t),"desc-btn":()=>this.app.keyHandler.toggleInput("desc"),weight:()=>this.graphManager.updateSelectedWeight(t),"weight-btn":()=>this.app.keyHandler.toggleInput("weight"),"redo-btn":()=>this.eventBus.emit("redo"),"undo-btn":()=>this.eventBus.emit("undo"),"panel-btn":()=>this.eventBus.emit("toggleSetting",{key:"info_panel"}),"tools-btn":()=>this.eventBus.emit("toggleSetting",{key:"tools_panel"}),"graphs-btn":()=>this.eventBus.emit("toggleSetting",{key:"graphs_panel"}),"faces-btn":()=>this.eventBus.emit("toggleSetting",{key:"face_panel"}),"shortcut-chord-btn":()=>_e.dispatchEvent(this.spaceEvent),"component-btn":()=>this.eventBus.emit("toggleSetting",{key:"component"}),"scale-btn":()=>this.eventBus.emit("toggleSetting",{key:"scale"}),"tree-btn":()=>this.eventBus.emit("toggleSetting",{key:"tree"}),"force-btn":()=>this.eventBus.emit("toggleSetting",{key:"forceSimulation"}),"panning-btn":()=>this.eventBus.emit("toggleSetting",{key:"panning"}),"select-btn":()=>this.eventBus.emit("toggleSetting",{key:"select"}),"toggle-component-btn":()=>this.eventBus.emit("toggleSetting",{key:"component",value:t}),"toggle-scale-btn":()=>this.eventBus.emit("toggleSetting",{key:"scale",value:t}),"toggle-tree-btn":()=>this.eventBus.emit("toggleSetting",{key:"tree",value:t}),"toggle-force-btn":()=>this.eventBus.emit("toggleSetting",{key:"forceSimulation",value:t}),"toggle-panning-btn":()=>this.eventBus.emit("toggleSetting",{key:"panning",value:t}),"toggle-select-btn":()=>this.eventBus.emit("toggleSetting",{key:"select",value:t}),"color-picker-btn":()=>this.eventBus.emit("toggleSetting",{key:"colorPicker"}),"vertex-label":()=>this.eventBus.emit("toggleSetting",{key:"vertexLabel"}),"edge-label":()=>this.eventBus.emit("toggleSetting",{key:"edgeLabel"}),"face-label":()=>this.eventBus.emit("toggleSetting",{key:"faceLabel"}),"weight-label":()=>this.eventBus.emit("toggleSetting",{key:"weightLabel"}),"vertex-size-1":()=>this.eventBus.emit("updateSetting",{key:"node_radius",value:t}),"edge-size-1":()=>this.eventBus.emit("updateSetting",{key:"edge_size",value:t}),"label-size-1":()=>this.eventBus.emit("updateSetting",{key:"label_size",value:t}),"grid-size-1":()=>this.eventBus.emit("updateSetting",{key:"grid",value:t}),"stroke-size-1":()=>this.eventBus.emit("updateSetting",{key:"stroke_size",value:t}),performance:()=>this.eventBus.emit("toggleSetting",{key:"performance"}),"save-history":()=>this.eventBus.emit("toggleSetting",{key:"saveHistory"}),"clear-histoory-btn":()=>this.graphManager.cleanLocalStorage(),"history-limit-1":()=>{this.graphManager.limit=t,this.eventBus.emit("updateSetting",{key:"historyLimit",value:t})},"basic-info-btn":()=>this.graphManager.metric.basicInfo(),"lies-on-cycle-btn":()=>this.graphManager.metric.liesOnCycle(),"list-degrees-btn":()=>this.graphManager.metric.degreeSequesnce(),"components-btn":()=>this.graphManager.metric.countComponents(),"neighbors-btn":()=>this.graphManager.metric.neighbors(),"shortest-path-btn":()=>this.graphManager.metric.shortestPath(),"density-btn":()=>this.graphManager.metric.density(),"diameter-btn":()=>this.graphManager.metric.diameter(),"eccentricity-btn":()=>this.graphManager.metric.eccentricity(),"simmelian-strength-btn":()=>this.graphManager.metric.simmelianStrength(),"betweenness-centrality-btn":()=>this.graphManager.metric.betweennessCentrality(),"closeness-centrality-btn":()=>this.graphManager.metric.closenessCentrality(),"degree-centrality-btn":()=>this.graphManager.metric.degreeCentrality(),"eigenvector-centrality-btn":()=>this.graphManager.metric.eigenvectorCentrality(),"pagerank-btn":()=>this.graphManager.metric.pagerank(),"edge-uniformity-btn":()=>this.graphManager.metric.edgeUniformity(),"neighborhood-preservation-btn":()=>this.graphManager.metric.neighborhoodPreservation(),"stress-btn":()=>this.graphManager.metric.stress(),"disparity-btn":()=>this.graphManager.metric.disparity(),"clear-info-panel-btn":()=>_e.querySelector("#floating-panel .body-info").innerHTML="","all-node-info-btn":()=>this.graphManager.metric.allNodeInfo(),"all-edge-info-btn":()=>this.graphManager.metric.allEdgeInfo(),empty:()=>this.graphManager.generator.empty(_e.getElementById("g-empty-1").value),"g-empty-1":()=>this.graphManager.generator.empty(t),cycle:()=>this.graphManager.generator.cycle(_e.getElementById("g-cycle-1").value),"g-cycle-1":()=>this.graphManager.generator.cycle(t),path:()=>this.graphManager.generator.path(_e.getElementById("g-path-1").value),"g-path-1":()=>this.graphManager.generator.path(t),ladder:()=>this.graphManager.generator.ladder(_e.getElementById("g-ladder-1").value),"g-ladder-1":()=>this.graphManager.generator.ladder(t),complete:()=>this.graphManager.generator.complete(_e.getElementById("g-complete-1").value),"g-complete-1":()=>this.graphManager.generator.complete(t),"complete-bipartite":()=>this.graphManager.generator.completeBipartite(_e.getElementById("g-complete-bipartite-1").value,_e.getElementById("g-complete-bipartite-2").value),"g-complete-bipartite-1":()=>this.graphManager.generator.completeBipartite(t,_e.getElementById("g-complete-bipartite-2").value),"g-complete-bipartite-2":()=>this.graphManager.generator.completeBipartite(_e.getElementById("g-complete-bipartite-1").value,t),caveman:()=>this.graphManager.generator.caveman(_e.getElementById("g-caveman-1").value,_e.getElementById("g-caveman-2").value),"g-caveman-1":()=>this.graphManager.generator.caveman(t,_e.getElementById("g-caveman-2").value),"g-caveman-2":()=>this.graphManager.generator.caveman(_e.getElementById("g-caveman-1").value,t),"connected-caveman":()=>this.graphManager.generator.connectedCaveman(_e.getElementById("g-connected-caveman-1").value,_e.getElementById("g-connected-caveman-2").value),"g-connected-caveman-1":()=>this.graphManager.generator.connectedCaveman(t,_e.getElementById("g-connected-caveman-2").value),"g-connected-caveman-2":()=>this.graphManager.generator.connectedCaveman(_e.getElementById("g-connected-caveman-1").value,t),clusters:()=>this.graphManager.generator.clusters(_e.getElementById("g-clusters-1").value,_e.getElementById("g-clusters-2").value,_e.getElementById("g-clusters-3").value),"g-clusters-1":()=>this.graphManager.generator.clusters(t,_e.getElementById("g-clusters-2").value,_e.getElementById("g-clusters-3").value),"g-clusters-2":()=>this.graphManager.generator.clusters(_e.getElementById("g-clusters-1").value,t,_e.getElementById("g-clusters-3").value),"g-clusters-3":()=>this.graphManager.generator.clusters(_e.getElementById("g-clusters-1").value,_e.getElementById("g-clusters-2").value,t),"erdos-renyi":()=>this.graphManager.generator.erdosRenyi(_e.getElementById("g-erdos-renyi-1").value,_e.getElementById("g-erdos-renyi-2").value),"g-erdos-renyi-1":()=>this.graphManager.generator.erdosRenyi(t,_e.getElementById("g-erdos-renyi-2").value),"g-erdos-renyi-2":()=>this.graphManager.generator.erdosRenyi(_e.getElementById("g-erdos-renyi-1").value,t),"griven-newmn":()=>this.graphManager.generator.girvanNewman(_e.getElementById("g-girvan-newman-1").value),"g-girvan-newman-1":()=>this.graphManager.generator.girvanNewman(t),"krackhardt-kite":()=>this.graphManager.generator.krackhardtkite(),"florentine-families":()=>this.graphManager.generator.florentineFamilies(),"karate-club":()=>this.graphManager.generator.karateClub(),aries:()=>this.graphManager.generator.zodiac.aries(),taurus:()=>this.graphManager.generator.zodiac.taurus(),gemini:()=>this.graphManager.generator.zodiac.gemini(),cancer:()=>this.graphManager.generator.zodiac.cancer(),leo:()=>this.graphManager.generator.zodiac.leo(),virgo:()=>this.graphManager.generator.zodiac.virgo(),libra:()=>this.graphManager.generator.zodiac.libra(),scorpius:()=>this.graphManager.generator.zodiac.scorpius(),ophiuchus:()=>this.graphManager.generator.zodiac.ophiuchus(),sagittarius:()=>this.graphManager.generator.zodiac.sagittarius(),capricornus:()=>this.graphManager.generator.zodiac.capricornus(),aquarius:()=>this.graphManager.generator.zodiac.aquarius(),pisces:()=>this.graphManager.generator.zodiac.pisces(),"organize-circle":()=>this.layout.applyLayout("circle"),"center-layout":()=>this.layout.applyLayout("center"),"random-layout":()=>this.layout.applyLayout("random"),"rotate-layout-1":()=>this.layout.applyLayout("rotate",t),"rotate-layout":()=>{const a=_e.getElementById("rotate-layout-1").value;return this.layout.applyLayout("rotate",a)},"hflip-layout":()=>this.layout.applyLayout("h-flip"),"vflip-layout":()=>this.layout.applyLayout("v-flip"),"force-layout":()=>this.layout.applyLayout("force",{itteration:_e.getElementById("force-itteration").value,gravity:_e.getElementById("force-gravity").value}),"froce-itteration":()=>this.layout.applyLayout("force",{val:t,gravity:_e.getElementById("force-gravity").value}),"force-gravity":()=>this.layout.applyLayout("force",{itteration:_e.getElementById("force-itteration").value,gravity:t}),"noverlap-layout":()=>this.layout.applyLayout("noverlap"),"reverse-direction":()=>this.graphManager.reverseGraph(),"to-undirected":()=>this.graphManager.toUndirectedGraph(),"to-directed":()=>this.graphManager.toDirectedGraph(),"to-mixed":()=>this.graphManager.toMixedGraph(),"to-weighted":()=>this.graphManager.toWeighted(),"to-unweighted":()=>this.graphManager.toUnweighted(),"subgraph-btn":()=>this.graphManager.subgraph(),graphs:()=>this.graphManager.graphsPanel.selectLis(t),faces:()=>this.graphManager.facePanel.selectLis(t),"how-to-use":()=>window.open("https://www.youtube.com/playlist?list=PLaa8UNGS4QED9DUhAZt7O963qkScAWah3","_blank"),command:()=>{_e.querySelector(".modal").style.display="flex",_e.querySelector(".modal .help-panel").style.display="block"},about:()=>window.open("http://picinfiniti.net/","_blank"),"select-all-node":()=>this.graphManager.selectAllNode(),"deselect-all-node":()=>this.graphManager.deselectAllNode(),"select-next-node":()=>this.graphManager.selectNextNode(),"select-pervious-node":()=>this.graphManager.selectPerviousNode(),"select-all-edge":()=>this.graphManager.selectAllEdge(),"deselect-all-edge":()=>this.graphManager.deselectAllEdge(),"select-next-edge":()=>this.graphManager.selectNextEdge(),"select-pervious-edge":()=>this.graphManager.selectPerviousEdge(),"copy-subgraph":()=>this.graphManager.copySubgraph(),"cut-subgraph":()=>this.graphManager.cutSubgraph(),"paste-subgraph":()=>this.graphManager.pasteSubgraph(),"paste-subgraph-seprate":()=>this.graphManager.pasteSubgraph(!0),"update-node-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!0,!1,!1,!1),"update-stroke-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!1,!0,!1,!1),"update-edge-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!1,!1,!0,!1),"update-label-color":()=>this.graphManager.updateSelectedNodesEdgesColor(!1,!1,!1,!0)};r[e]?r[e]():console.log(`No action defined for: ${e}`)}attachEventListeners(){_e.addEventListener("click",e=>{if(e.target.tagName==="INPUT")return;const t=e.target.closest("li");if(!t)return;const r=t.getAttribute("name")||t.id;r&&this.handleMenuAction(r,t.id)}),_e.addEventListener("input",e=>{const t=e.target;if(!t||t.name=="rename"||t.name=="desc"||t.name=="weight")return;const r=t.id||t.getAttribute("name");if(r){const a=t.value||1;this.handleMenuAction(r,a)}})}}const or=document;class Mx{constructor(e){this.app=e,this.eventBus=e.eventBus}init(){this.app.eventBus.on("settingToggled",e=>{const{key:t,value:r}=e.detail;t=="forceSimulation"&&(r?this.app.startSimulation():this.app.stopSimulation())}),this.app.eventBus.on("import",e=>{or.getElementById("file-input").click()}),this.app.eventBus.on("export",e=>{if(e.detail.type==="json"){const t=this.app.graphManager.history,r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2)),a=or.createElement("a");a.href=r,a.download="graph.json",or.body.appendChild(a),a.click(),or.body.removeChild(a)}e.detail.type==="png"&&this.app.canvas.toBlob(function(t){let r=or.createElement("a");r.href=URL.createObjectURL(t),r.download="d3-canvas-export.png",or.body.appendChild(r),r.click(),or.body.removeChild(r)},"image/png")}),or.getElementById("file-input").addEventListener("change",e=>{const t=e.target.files[0];if(t){const r=new FileReader;r.onload=a=>{const o=JSON.parse(a.target.result);this.app.graphManager.history.push(...o),this.app.graphManager.updateIndex(this.app.graphManager.history.length-1)},r.readAsText(t)}e.target.value=""})}}const Nx=[{title:"File",id:"file",submenu:[{title:"🆕 New Graph",id:"new-mixed-btn",shortcut:"(n)"},{title:"📂 Import",id:"import-graph",shortcut:"(o)",input:[{type:"file",id:"file-input",hidden:!0}]},{title:"💾 Export",id:"export-graph",shortcut:"(Ctrl+s)"},{title:"🖼️ Export to PNG",id:"export-png",shortcut:"(P)"},{type:"divider"},{title:"⚙️ Default Setting",id:"default-settings-btn"},{title:"🌙 Sky Night",id:"sky-night-theme-btn"},{type:"divider"},{title:"🔄 Reload",id:"reload",shortcut:"(F5)"}]},{title:"Edit",id:"edit",submenu:[{title:"Delete",name:"remove-selection-btn",shortcut:"(d)"},{title:"Assign Color",name:"color-selection-btn",shortcut:"(c)"},{title:"Add Edge",name:"add-edge-btn",shortcut:"(alt-e)"},{title:"Add Directed Edge",name:"add-directed-edge-btn",shortcut:"(alt-E)"},{title:"Add Face",name:"add-face-btn",shortcut:"(ctrl+f)"},{type:"divider"},{title:"Copy",name:"copy-subgraph",shortcut:"(y)"},{title:"Cut",name:"cut-subgraph",shortcut:"(x)"},{title:"Paste",name:"paste-subgraph",shortcut:"(p)"},{type:"divider"},{title:"Rename",name:"rename-btn",shortcut:"(r)"},{title:"Edit Info",name:"desc-btn",shortcut:"(i)"},{title:"Edit Weight",name:"weight-btn",shortcut:"(w)"},{type:"divider"},{title:"Undo",name:"undo-btn",shortcut:"(u)"},{title:"Redo",name:"redo-btn",shortcut:"(Ctrl+r)"}]},{title:"Settings",id:"settings",submenu:[{title:"Graph",id:"graph-settings",shortcut:">",submenu:[{title:"Vertex",id:"vertex-label",check:!0},{title:"Edge",id:"edge-label",check:!0},{title:"Face",id:"face-label",check:!0},{title:"Weight",id:"weight-label",check:!0},{type:"divider"},{title:"Grid",id:"gride-size",input:[{type:"range",id:"grid-size-1",min:0,max:100,value:20}]},{title:"Node",id:"vertex-size",input:[{type:"range",id:"vertex-size-1",min:0,max:200,value:10,step:.1}]},{title:"Edge",id:"edge-size",input:[{type:"range",id:"edge-size-1",min:1,max:100,value:2}]},{title:"Label",id:"label-size",input:[{type:"range",id:"label-size-1",min:0,max:100,value:15}]},{title:"Stroke",id:"stroke-size",input:[{type:"range",id:"stroke-size-1",min:0,max:50,value:5,step:.1}]}]},{title:"View",id:"view",shortcut:">",submenu:[{title:"Info Panel",id:"panel-btn",check:!0},{title:"Tools Panel",id:"tools-btn",check:!0},{title:"Graphs Panel",id:"graphs-btn",check:!0},{title:"Face Panel",id:"faces-btn",check:!0},{type:"divider"},{title:"Key Chord",id:"shortcut-chord-btn",shortcut:"⎵"}]},{type:"divider"},{title:"Performance",id:"performance",check:!0},{title:"History",id:"History",shortcut:">",submenu:[{title:"History Limit",id:"history-limit",input:[{type:"number",id:"history-limit-1",min:5,max:1e4,value:5}]},{title:"Save History",id:"save-history",check:!0},{title:"Clear History",id:"clear-histoory-btn"}]}]},{title:"Tools",id:"tools",submenu:[{title:"Scale",id:"scale-btn",check:!1,shortcut:"(s)"},{title:"Panning",id:"panning-btn",check:!1,shortcut:"Ctrl"},{title:"Selecting",id:"select-btn",check:!1,shortcut:"Shift"},{title:"Component",id:"component-btn",check:!1,shortcut:"Alt"},{type:"divider"},{title:"Tree",id:"tree-btn",check:!1,shortcut:"(t)"},{title:"Force Simulation",id:"force-btn",check:!1,shortcut:"(f)"},{type:"divider"},{title:"Color Picker",id:"color-picker-btn",check:!1,shortcut:"⎵ cc"}]},{title:"Generator",id:"generator",submenu:[{title:"Classic",id:"classic",shortcut:">",submenu:[{title:"Empty",id:"empty",input:[{type:"number",id:"g-empty-1",min:1,max:500,value:5}]},{title:"Kₙ",id:"complete",link:"https://en.wikipedia.org/wiki/Complete_graph",input:[{type:"number",id:"g-complete-1",min:1,max:500,value:5}]},{title:"Kₙ,ₙ",id:"complete-bipartite",link:"https://en.wikipedia.org/wiki/Complete_bipartite_graph",input:[{type:"number",id:"g-complete-bipartite-1",min:1,max:500,value:5},{type:"number",id:"g-complete-bipartite-2",min:1,max:500,value:5}]},{title:"Pₙ",id:"path",link:"https://en.wikipedia.org/wiki/Path_graph",input:[{type:"number",id:"g-path-1",min:2,max:500,value:5}]},{title:"Cₙ",id:"cycle",link:"https://en.wikipedia.org/wiki/Cycle_graph",input:[{type:"number",id:"g-cycle-1",min:3,max:500,value:5}]},{title:"Lₙ",id:"ladder",link:"https://en.wikipedia.org/wiki/Ladder_graph",input:[{type:"number",id:"g-ladder-1",min:2,max:500,value:5}]}]},{title:"Community",id:"community",shortcut:">",submenu:[{title:"Cₙ,ₙ",id:"caveman",link:"https://mathworld.wolfram.com/CavemanGraph.html",input:[{type:"number",id:"g-caveman-1",min:1,max:500,value:5},{type:"number",id:"g-caveman-2",min:1,max:500,value:5}]},{title:"Qₙ,ₙ",id:"connected-caveman",link:"https://mathworld.wolfram.com/CavemanGraph.html",input:[{type:"number",id:"g-connected-caveman-1",min:1,max:500,value:5},{type:"number",id:"g-connected-caveman-2",min:1,max:500,value:5}]}]},{title:"Random",id:"random",shortcut:">",submenu:[{title:"Clusters",id:"clusters",input:[{type:"number",id:"g-clusters-1",min:2,max:500,value:20},{type:"number",id:"g-clusters-2",min:2,max:500,value:20},{type:"number",id:"g-clusters-3",min:2,max:500,value:10}]},{title:"erdos Renyi",id:"erdos-renyi",link:"https://en.wikipedia.org/wiki/Erd%C5%91s%E2%80%93R%C3%A9nyi_model",input:[{type:"number",id:"g-erdos-renyi-1",min:1,max:500,value:10},{type:"number",id:"g-erdos-renyi-2",min:0,max:1,step:.1,value:.5}]},{title:"Girvan Newman",id:"griven-newmn",link:"https://www.pnas.org/doi/pdf/10.1073/pnas.122653799",input:[{type:"number",id:"g-girvan-newman-1",min:1,max:500,value:5}]}]},{title:"Small",id:"small",shortcut:">",submenu:[{title:"Krackhardt kite",id:"krackhardt-kite",link:"https://en.wikipedia.org/wiki/Krackhardt_kite_graph"}]},{title:"Social",id:"social",shortcut:">",submenu:[{title:"Florentine families",id:"florentine-families"},{title:"Zachary’s karate club",id:"karate-club",link:"https://en.wikipedia.org/wiki/Zachary%27s_karate_club"}]},{type:"divider"},{title:"Zodiac",id:"zodiac",shortcut:">",submenu:[{title:"Aries",id:"aries",label:"♈",link:"https://en.wikipedia.org/wiki/Aries_(astrology)"},{title:"Taurus",id:"taurus",label:"♉",link:"https://en.wikipedia.org/wiki/Taurus_(astrology)"},{title:"Gemini",id:"gemini",label:"♊",link:"https://en.wikipedia.org/wiki/Gemini_(astrology)"},{title:"Cancer",id:"cancer",label:"♋",link:"https://en.wikipedia.org/wiki/Cancer_(astrology)"},{title:"Leo",id:"leo",label:"♌",link:"https://en.wikipedia.org/wiki/Leo_(astrology)"},{title:"Virgo",id:"virgo",label:"♍",link:"https://en.wikipedia.org/wiki/Virgo_(astrology)"},{title:"Libra",id:"libra",label:"♎",link:"https://en.wikipedia.org/wiki/Libra_(astrology)"},{title:"Scorpius",id:"scorpius",label:"♏",link:"https://en.wikipedia.org/wiki/Scorpio_(astrology)"},{title:"Ophiuchus",id:"ophiuchus",label:"⛎",link:"https://en.wikipedia.org/wiki/Ophiuchus_(astrology)"},{title:"Sagittarius",id:"sagittarius",label:"♐",link:"https://en.wikipedia.org/wiki/Sagittarius_(astrology)"},{title:"Capricornus",id:"capricornus",label:"♑",link:"https://en.wikipedia.org/wiki/Capricorn_(astrology)"},{title:"Aquarius",id:"aquarius",label:"♒",link:"https://en.wikipedia.org/wiki/Aquarius_(astrology)"},{title:"Pisces",id:"pisces",label:"♓",link:"https://en.wikipedia.org/wiki/Pisces_(astrology)"}]}]},{title:"Metrics",id:"metrics",submenu:[{title:"Basic",id:"basic",shortcut:">",submenu:[{title:"Basic Information",id:"basic-info-btn"},{title:"Components",id:"components-btn"},{title:"Lies On Cycle",id:"lies-on-cycle-btn"},{title:"Degree Sequence",id:"list-degrees-btn"},{title:"Density",id:"density-btn"},{title:"Diameter",id:"diameter-btn"}]},{title:"Centrality",id:"centrality",shortcut:">",submenu:[{title:"Betweenness Centrality",id:"betweenness-centrality-btn"},{title:"Closeness Centrality",id:"closeness-centrality-btn"},{title:"Degree Centrality",id:"degree-centrality-btn"},{title:"Eccentricity",id:"eccentricity-btn"},{title:"Eigenvector Centrality",id:"eigenvector-centrality-btn"},{title:"PageRank",id:"pagerank-btn"}]},{title:"Layout Quality",id:"layout-quality",shortcut:">",submenu:[{title:"Edge Uniformity",id:"edge-uniformity-btn"},{title:"Neighborhood Preservation",id:"neighborhood-preservation-btn"},{title:"Stress",id:"stress-btn"}]},{title:"Other",shortcut:">",id:"other",submenu:[{title:"Simmelian Strength",id:"simmelian-strength-btn"},{title:"Disparity",id:"disparity-btn"}]},{type:"divider"},{title:"Neighbors",id:"neighbors-btn"},{title:"Shortest Path",id:"shortest-path-btn"},{title:"Selected Nodes Info",id:"all-node-info-btn",shortcut:"(a)"},{title:"Selected Edges Info",id:"all-edge-info-btn",shortcut:"(Alt+a)"},{type:"divider"},{title:"Clear Panel",id:"clear-info-panel-btn",shortcut:"(q)"}]},{title:"Operators",id:"help",submenu:[{title:"Layout",id:"layout",shortcut:">",submenu:[{title:"Center Nodes",name:"center-layout"},{title:"Organize Nodes",name:"organize-circle",shortcut:"(O)"},{title:"Random",name:"random-layout"},{title:"Vertical Flip",name:"vflip-layout"},{title:"Horizontal Flip",name:"hflip-layout"},{title:"Rotate",name:"rotate-layout",input:[{type:"number",id:"rotate-layout-1",min:-180,max:180,value:45}]},{type:"divider"},{title:"Force Atlas",name:"force-layout",input:[{type:"number",id:"force-itteration",min:0,max:500,value:50},{type:"number",id:"force-gravity",min:0,max:1,value:25}],link:"https://graphology.github.io/standard-library/layout-forceatlas2.html"}]},{title:"Converter",id:"converter",shortcut:">",submenu:[{title:"To Mixed",id:"to-mixed"},{title:"To Undirected",id:"to-undirected"},{title:"To Directed",id:"to-directed"},{title:"To Weighted",id:"to-weighted"},{title:"To Unweighted",id:"to-unweighted"}]},{title:"Reverse Direction",id:"reverse-direction"},{title:"Subgraph",id:"subgraph-btn"},{title:"Complete Graph",name:"complete-btn",shortcut:"(alt-C)"}]},{title:"Help",id:"help",submenu:[{title:"Mouse Commnads",id:"command",name:"command-btn"},{title:"How to use",id:"how-to-use"},{title:"About",id:"about",shortcut:"version: 1.9.0"}]}];var Rr={},Qd;function Rx(){if(Qd)return Rr;Qd=1;var n=we();function e(u){return typeof u=="number"&&!isNaN(u)}var t=["x","y"];function r(u,l){if(!n(u))throw new Error("graphology-layout/utils.collectLayout: the given graph is not a valid graphology instance.");l=l||{};var c=l.dimensions,f=l.exhaustive!==!1;c||(c=t);var p={},v=c.length;return u.forEachNode(function(b,E){var S=0,A={},_;for(_=0;_<v;_++){var w=c[_],k=E[w];e(k)&&(A[w]=k,S++)}f?S===v&&(p[b]=A):S&&(p[b]=A)}),p}function a(u,l,c){if(!n(u))throw new Error("graphology-layout/utils.assignLayout: the given graph is not a valid graphology instance.");c=c||{};var f=c.dimensions||t,p=f.length,v;u.updateEachNodeAttributes(function(b,E){var S=l[b];if(!S)return E;for(var A=0;A<p;A++)v=f[A],E[v]=S[v];return E},{attributes:f})}function o(u,l){if(!n(u))throw new Error("graphology-layout/utils.collectLayout: the given graph is not a valid graphology instance.");l=l||{};var c=l.dimensions,f=l.type||Float64Array;c||(c=t);var p=c.length,v=new f(u.order*p),b=0;return u.forEachNode(function(E,S){var A;for(A=0;A<p;A++){var _=c[A],w=S[_];e(w)||(w=0),v[b++]=w}}),v}function s(u,l,c){if(!n(u))throw new Error("graphology-layout/utils.assignLayoutAsFlatArray: the given graph is not a valid graphology instance.");c=c||{};var f=c.dimensions;f||(f=t);var p=f.length;if(l.length!==u.order*p)throw new Error("graphology-layout/utils.assignLayoutAsFlatArray: given layout has an incorrect length wrt number of nodes & dimenions.");var v=0;u.updateEachNodeAttributes(function(b,E){for(var S=0;S<p;S++)E[f[S]]=l[v++];return E},{attributes:f})}return Rr.collectLayout=r,Rr.assignLayout=a,Rr.collectLayoutAsFlatArray=o,Rr.assignLayoutAsFlatArray=s,Rr}var Gt=Rx();let $r=null;const Os=[];let ui=!1;const qs=new Map,$x=5e3;function Px(n,e,t,r={}){const a=e.export(),o=JSON.stringify({type:n,graph:a,payload:r});if(qs.has(o)){t(qs.get(o));return}Os.push({type:n,graph:a,payload:r,callback:t,key:o}),Fs()}function Fs(){if(ui||Os.length===0)return;const n=Os.shift(),{type:e,graph:t,payload:r,callback:a,key:o}=n;ui=!0,$r||($r=new Worker(new URL("/assets/graph-algorithms.worker-b0iv8HKg.js",import.meta.url),{type:"module"}));const s=setTimeout(()=>{console.warn(`[${e}] timed out. Restarting worker...`),$r.terminate(),$r=null,ui=!1,Fs()},$x);$r.onmessage=({data:u})=>{clearTimeout(s),ui=!1,u.error?console.error(`[Worker Error] ${e}:`,u.error):(qs.set(o,u.result),a(u.result)),Fs()},$r.postMessage({type:e,graph:t,payload:r})}var Ds=Gf(),Gx=Ff();const Ox=st(Gx);var qx=jf();const Fx=st(qx);class Wx{constructor(e){this.app=e,this.eventBus=e.eventBus,this.canvas=e.canvas}init(){}applyLayout(e,t){let r=!0;switch(e){case"force":this.force(t.itteration,t.gravity);break;case"noverlap":this.noverlap();break;case"rotate180":this.rotate180();break;case"rotate":this.rotate(t);break;case"h-flip":this.hFlip();break;case"v-flip":this.vFlip();break;case"center":this.center();break;case"random":this.random();break;case"circle":this.organizeNodesInCircle();break;case"oneLine":this.organizeNodesInLine();break;case"twoLine":this.organizeNodesInTwoLines(t.line1Count,t.Y);break;default:r=!1;break}r&&this.app.graphManager.saveGraphState()}noverlap(){const e=this.app.graphManager.graph,t=Fx(e,{maxIterations:50,settings:{ratio:100,expansion:1.5,gridSize:5}});this.center(t)}force(e=50,t=25){const r=this.app.graphManager.graph;if(r.order<250){const a=Ox(r,{iterations:parseInt(e),settings:{gravity:parseInt(t),scalingRatio:100}});this.center(a)}else Px("force",r,a=>{this.center(a)},{iterations:parseInt(e),settings:{gravity:parseInt(t),scalingRatio:100}})}hFlip(){const e=this.canvas.width/2,t=this.app.graphManager.graph,r=Gt.collectLayout(t);Object.values(r).forEach(a=>{const o=e-a.x;a.x+=2*o}),Gt.assignLayout(t,r)}vFlip(){const e=this.canvas.height/2,t=this.app.graphManager.graph,r=Gt.collectLayout(t);Object.values(r).forEach(a=>{const o=e-a.y;a.y+=2*o}),Gt.assignLayout(t,r)}rotate(e=90){const t=this.app.graphManager.graph,r=e*Math.PI/-180,a=Ds.rotation(t,r);this.center(a)}center(e=void 0){const t=this.canvas.width/2,r=this.canvas.height/2,a=this.app.graphManager.graph;e||(e=Gt.collectLayout(a));const o={x:di(Object.values(e),l=>l.x),y:di(Object.values(e),l=>l.y)},s=t-o.x,u=r-o.y;Object.values(e).forEach(l=>{l.x+=s,l.y+=u}),Gt.assignLayout(a,e)}random(){const e=this.canvas.width/2,t=this.canvas.height/2,r=this.app.graphManager.graph,a=Ds.random(r,{scale:Math.max(e,t)-200});this.center(a)}organizeNodesInCircle(){const e=this.canvas.width/2,t=this.canvas.height/2,r=this.app.graphManager.graph,a=Math.min(e*.5,t*.5),o=Ds.circular(r,{scale:a,dimensions:["x","y"]});Object.values(o).forEach(s=>{s.x+=e,s.y+=t}),Gt.assignLayout(r,o)}organizeNodesInLine(){const e=this.canvas.width/2,t=this.canvas.height/2,r=e*.1,a=this.app.graphManager.graph,o=this.app.graphManager.graph.nodes(),s={};if(a.order===0)return;const u=(this.canvas.width-2*r)/Math.max(1,a.order-1);o.forEach((l,c)=>{s[l]={x:r+c*u,y:t}}),Gt.assignLayout(a,s)}organizeNodesInTwoLines(e,t=50){const r=this.canvas.width/2,a=this.canvas.height/2,o=r*.1,s=t,u=this.app.graphManager.graph,l=this.app.graphManager.graph.nodes(),c={};if(u.order===0)return;if(e>u.order){console.error("Line1 count exceeds total nodes.");return}const f=l.slice(0,e),p=l.slice(e),v=f.length,b=p.length,E=v>1?(this.canvas.width-2*o)/(v-1):0,S=b>1?(this.canvas.width-2*o)/(b-1):0,A=a-s,_=a+s;f.forEach((w,k)=>{c[w]={x:o+k*E,y:A}}),p.forEach((w,k)=>{c[w]={x:o+k*S,y:_}}),Gt.assignLayout(u,c)}rotate180(){const e=this.canvas.width,t=this.canvas.height,r=e*.15,a=this.app.graphManager.graph,o=a.nodes(),s={};if(a.order===0)return;let u=1/0,l=1/0,c=-1/0,f=-1/0;o.forEach(w=>{const{x:k,y:m}=a.getNodeAttributes(w);k<u&&(u=k),m<l&&(l=m),k>c&&(c=k),m>f&&(f=m)});const p=c-u,v=f-l,b=(e-2*r)/p,E=(t-2*r)/v,S=Math.min(b,E),A=(e-p*S)/2,_=(t-v*S)/2;a.forEachNode((w,k)=>{const m=e-((k.x-u)*S+A),C=t-((k.y-l)*S+_);s[w]={x:m,y:C}}),Gt.assignLayout(a,s)}}var hn={exports:{}},Ux=hn.exports,Zd;function jx(){return Zd||(Zd=1,function(n,e){(function(t,r){n.exports=r()})(Ux,function(){function t(d,h){var g=Object.keys(d);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(d);h&&(x=x.filter(function(D){return Object.getOwnPropertyDescriptor(d,D).enumerable})),g.push.apply(g,x)}return g}function r(d){for(var h=1;h<arguments.length;h++){var g=arguments[h]!=null?arguments[h]:{};h%2?t(Object(g),!0).forEach(function(x){l(d,x,g[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(g)):t(Object(g)).forEach(function(x){Object.defineProperty(d,x,Object.getOwnPropertyDescriptor(g,x))})}return d}function a(d){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},a(d)}function o(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function s(d,h){for(var g=0;g<h.length;g++){var x=h[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(d,S(x.key),x)}}function u(d,h,g){return h&&s(d.prototype,h),Object.defineProperty(d,"prototype",{writable:!1}),d}function l(d,h,g){return(h=S(h))in d?Object.defineProperty(d,h,{value:g,enumerable:!0,configurable:!0,writable:!0}):d[h]=g,d}function c(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),Object.defineProperty(d,"prototype",{writable:!1}),h&&p(d,h)}function f(d){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},f(d)}function p(d,h){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,x){return g.__proto__=x,g},p(d,h)}function v(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function b(d){var h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var g,x=f(d);if(h){var D=f(this).constructor;g=Reflect.construct(x,arguments,D)}else g=x.apply(this,arguments);return function(M,G){if(G&&(typeof G=="object"||typeof G=="function"))return G;if(G!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v(M)}(this,g)}}function E(){return E=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(d,h,g){var x=function(M,G){for(;!Object.prototype.hasOwnProperty.call(M,G)&&(M=f(M))!==null;);return M}(d,h);if(x){var D=Object.getOwnPropertyDescriptor(x,h);return D.get?D.get.call(arguments.length<3?d:g):D.value}},E.apply(this,arguments)}function S(d){var h=function(g,x){if(typeof g!="object"||g===null)return g;var D=g[Symbol.toPrimitive];if(D!==void 0){var M=D.call(g,x);if(typeof M!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}(d,"string");return typeof h=="symbol"?h:h+""}var A=function(d){return!(!d||!d.Window)&&d instanceof d.Window},_=void 0,w=void 0;function k(d){_=d;var h=d.document.createTextNode("");h.ownerDocument!==d.document&&typeof d.wrap=="function"&&d.wrap(h)===h&&(d=d.wrap(d)),w=d}function m(d){return A(d)?d:(d.ownerDocument||d).defaultView||w.window}typeof window<"u"&&window&&k(window);var C=function(d){return!!d&&a(d)==="object"},$=function(d){return typeof d=="function"},y={window:function(d){return d===w||A(d)},docFrag:function(d){return C(d)&&d.nodeType===11},object:C,func:$,number:function(d){return typeof d=="number"},bool:function(d){return typeof d=="boolean"},string:function(d){return typeof d=="string"},element:function(d){if(!d||a(d)!=="object")return!1;var h=m(d)||w;return/object|function/.test(typeof Element>"u"?"undefined":a(Element))?d instanceof Element||d instanceof h.Element:d.nodeType===1&&typeof d.nodeName=="string"},plainObject:function(d){return C(d)&&!!d.constructor&&/function Object\b/.test(d.constructor.toString())},array:function(d){return C(d)&&d.length!==void 0&&$(d.splice)}};function I(d){var h=d.interaction;if(h.prepared.name==="drag"){var g=h.prepared.axis;g==="x"?(h.coords.cur.page.y=h.coords.start.page.y,h.coords.cur.client.y=h.coords.start.client.y,h.coords.velocity.client.y=0,h.coords.velocity.page.y=0):g==="y"&&(h.coords.cur.page.x=h.coords.start.page.x,h.coords.cur.client.x=h.coords.start.client.x,h.coords.velocity.client.x=0,h.coords.velocity.page.x=0)}}function z(d){var h=d.iEvent,g=d.interaction;if(g.prepared.name==="drag"){var x=g.prepared.axis;if(x==="x"||x==="y"){var D=x==="x"?"y":"x";h.page[D]=g.coords.start.page[D],h.client[D]=g.coords.start.client[D],h.delta[D]=0}}}var T={id:"actions/drag",install:function(d){var h=d.actions,g=d.Interactable,x=d.defaults;g.prototype.draggable=T.draggable,h.map.drag=T,h.methodDict.drag="draggable",x.actions.drag=T.defaults},listeners:{"interactions:before-action-move":I,"interactions:action-resume":I,"interactions:action-move":z,"auto-start:check":function(d){var h=d.interaction,g=d.interactable,x=d.buttons,D=g.options.drag;if(D&&D.enabled&&(!h.pointerIsDown||!/mouse|pointer/.test(h.pointerType)||x&g.options.drag.mouseButtons))return d.action={name:"drag",axis:D.lockAxis==="start"?D.startAxis:D.lockAxis},!1}},draggable:function(d){return y.object(d)?(this.options.drag.enabled=d.enabled!==!1,this.setPerAction("drag",d),this.setOnEvents("drag",d),/^(xy|x|y|start)$/.test(d.lockAxis)&&(this.options.drag.lockAxis=d.lockAxis),/^(xy|x|y)$/.test(d.startAxis)&&(this.options.drag.startAxis=d.startAxis),this):y.bool(d)?(this.options.drag.enabled=d,this):this.options.drag},beforeMove:I,move:z,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(d){return d.search("drag")===0}},P=T,O={init:function(d){var h=d;O.document=h.document,O.DocumentFragment=h.DocumentFragment||R,O.SVGElement=h.SVGElement||R,O.SVGSVGElement=h.SVGSVGElement||R,O.SVGElementInstance=h.SVGElementInstance||R,O.Element=h.Element||R,O.HTMLElement=h.HTMLElement||O.Element,O.Event=h.Event,O.Touch=h.Touch||R,O.PointerEvent=h.PointerEvent||h.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function R(){}var V=O,Q={init:function(d){var h=V.Element,g=d.navigator||{};Q.supportsTouch="ontouchstart"in d||y.func(d.DocumentTouch)&&V.document instanceof d.DocumentTouch,Q.supportsPointerEvent=g.pointerEnabled!==!1&&!!V.PointerEvent,Q.isIOS=/iP(hone|od|ad)/.test(g.platform),Q.isIOS7=/iP(hone|od|ad)/.test(g.platform)&&/OS 7[^\d]/.test(g.appVersion),Q.isIe9=/MSIE 9/.test(g.userAgent),Q.isOperaMobile=g.appName==="Opera"&&Q.supportsTouch&&/Presto/.test(g.userAgent),Q.prefixedMatchesSelector="matches"in h.prototype?"matches":"webkitMatchesSelector"in h.prototype?"webkitMatchesSelector":"mozMatchesSelector"in h.prototype?"mozMatchesSelector":"oMatchesSelector"in h.prototype?"oMatchesSelector":"msMatchesSelector",Q.pEventTypes=Q.supportsPointerEvent?V.PointerEvent===d.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,Q.wheelEvent=V.document&&"onmousewheel"in V.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},W=Q;function L(d,h){if(d.contains)return d.contains(h);for(;h;){if(h===d)return!0;h=h.parentNode}return!1}function N(d,h){for(;y.element(d);){if(Y(d,h))return d;d=B(d)}return null}function B(d){var h=d.parentNode;if(y.docFrag(h)){for(;(h=h.host)&&y.docFrag(h););return h}return h}function Y(d,h){return w!==_&&(h=h.replace(/\/deep\//g," ")),d[W.prefixedMatchesSelector](h)}var U=function(d){return d.parentNode||d.host};function F(d,h){for(var g,x=[],D=d;(g=U(D))&&D!==h&&g!==D.ownerDocument;)x.unshift(D),D=g;return x}function K(d,h,g){for(;y.element(d);){if(Y(d,h))return!0;if((d=B(d))===g)return Y(d,h)}return!1}function ee(d){return d.correspondingUseElement||d}function ae(d){var h=d instanceof V.SVGElement?d.getBoundingClientRect():d.getClientRects()[0];return h&&{left:h.left,right:h.right,top:h.top,bottom:h.bottom,width:h.width||h.right-h.left,height:h.height||h.bottom-h.top}}function se(d){var h,g=ae(d);if(!W.isIOS7&&g){var x={x:(h=(h=m(d))||w).scrollX||h.document.documentElement.scrollLeft,y:h.scrollY||h.document.documentElement.scrollTop};g.left+=x.x,g.right+=x.x,g.top+=x.y,g.bottom+=x.y}return g}function le(d){for(var h=[];d;)h.push(d),d=B(d);return h}function ie(d){return!!y.string(d)&&(V.document.querySelector(d),!0)}function re(d,h){for(var g in h)d[g]=h[g];return d}function he(d,h,g){return d==="parent"?B(g):d==="self"?h.getRect(g):N(g,d)}function ge(d,h,g,x){var D=d;return y.string(D)?D=he(D,h,g):y.func(D)&&(D=D.apply(void 0,x)),y.element(D)&&(D=se(D)),D}function me(d){return d&&{x:"x"in d?d.x:d.left,y:"y"in d?d.y:d.top}}function Ie(d){return!d||"x"in d&&"y"in d||((d=re({},d)).x=d.left||0,d.y=d.top||0,d.width=d.width||(d.right||0)-d.x,d.height=d.height||(d.bottom||0)-d.y),d}function pe(d,h,g){d.left&&(h.left+=g.x),d.right&&(h.right+=g.x),d.top&&(h.top+=g.y),d.bottom&&(h.bottom+=g.y),h.width=h.right-h.left,h.height=h.bottom-h.top}function oe(d,h,g){var x=g&&d.options[g];return me(ge(x&&x.origin||d.options.origin,d,h,[d&&h]))||{x:0,y:0}}function Z(d,h){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(j){return!0},x=arguments.length>3?arguments[3]:void 0;if(x=x||{},y.string(d)&&d.search(" ")!==-1&&(d=Se(d)),y.array(d))return d.forEach(function(j){return Z(j,h,g,x)}),x;if(y.object(d)&&(h=d,d=""),y.func(h)&&g(d))x[d]=x[d]||[],x[d].push(h);else if(y.array(h))for(var D=0,M=h;D<M.length;D++){var G=M[D];Z(d,G,g,x)}else if(y.object(h))for(var q in h)Z(Se(q).map(function(j){return"".concat(d).concat(j)}),h[q],g,x);return x}function Se(d){return d.trim().split(/ +/)}var Me=function(d,h){return Math.sqrt(d*d+h*h)},xe=["webkit","moz"];function ve(d,h){d.__set||(d.__set={});var g=function(D){if(xe.some(function(M){return D.indexOf(M)===0}))return 1;typeof d[D]!="function"&&D!=="__set"&&Object.defineProperty(d,D,{get:function(){return D in d.__set?d.__set[D]:d.__set[D]=h[D]},set:function(M){d.__set[D]=M},configurable:!0})};for(var x in h)g(x);return d}function te(d,h){d.page=d.page||{},d.page.x=h.page.x,d.page.y=h.page.y,d.client=d.client||{},d.client.x=h.client.x,d.client.y=h.client.y,d.timeStamp=h.timeStamp}function Re(d){d.page.x=0,d.page.y=0,d.client.x=0,d.client.y=0}function Oe(d){return d instanceof V.Event||d instanceof V.Touch}function Pe(d,h,g){return d=d||"page",(g=g||{}).x=h[d+"X"],g.y=h[d+"Y"],g}function Fe(d,h){return h=h||{x:0,y:0},W.isOperaMobile&&Oe(d)?(Pe("screen",d,h),h.x+=window.scrollX,h.y+=window.scrollY):Pe("page",d,h),h}function Ne(d){return y.number(d.pointerId)?d.pointerId:d.identifier}function Ge(d,h,g){var x=h.length>1?He(h):h[0];Fe(x,d.page),function(D,M){M=M||{},W.isOperaMobile&&Oe(D)?Pe("screen",D,M):Pe("client",D,M)}(x,d.client),d.timeStamp=g}function We(d){var h=[];return y.array(d)?(h[0]=d[0],h[1]=d[1]):d.type==="touchend"?d.touches.length===1?(h[0]=d.touches[0],h[1]=d.changedTouches[0]):d.touches.length===0&&(h[0]=d.changedTouches[0],h[1]=d.changedTouches[1]):(h[0]=d.touches[0],h[1]=d.touches[1]),h}function He(d){for(var h={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},g=0;g<d.length;g++){var x=d[g];for(var D in h)h[D]+=x[D]}for(var M in h)h[M]/=d.length;return h}function Xe(d){if(!d.length)return null;var h=We(d),g=Math.min(h[0].pageX,h[1].pageX),x=Math.min(h[0].pageY,h[1].pageY),D=Math.max(h[0].pageX,h[1].pageX),M=Math.max(h[0].pageY,h[1].pageY);return{x:g,y:x,left:g,top:x,right:D,bottom:M,width:D-g,height:M-x}}function Ye(d,h){var g=h+"X",x=h+"Y",D=We(d),M=D[0][g]-D[1][g],G=D[0][x]-D[1][x];return Me(M,G)}function ct(d,h){var g=h+"X",x=h+"Y",D=We(d),M=D[1][g]-D[0][g],G=D[1][x]-D[0][x];return 180*Math.atan2(G,M)/Math.PI}function Et(d){return y.string(d.pointerType)?d.pointerType:y.number(d.pointerType)?[void 0,void 0,"touch","pen","mouse"][d.pointerType]:/touch/.test(d.type||"")||d instanceof V.Touch?"touch":"mouse"}function pt(d){var h=y.func(d.composedPath)?d.composedPath():d.path;return[ee(h?h[0]:d.target),ee(d.currentTarget)]}var xt=function(){function d(h){o(this,d),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=h}return u(d,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),d}();Object.defineProperty(xt.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var Ft=function(d,h){for(var g=0;g<h.length;g++){var x=h[g];d.push(x)}return d},En=function(d){return Ft([],d)},Wt=function(d,h){for(var g=0;g<d.length;g++)if(h(d[g],g,d))return g;return-1},St=function(d,h){return d[Wt(d,h)]},zt=function(d){c(g,d);var h=b(g);function g(x,D,M){var G;o(this,g),(G=h.call(this,D._interaction)).dropzone=void 0,G.dragEvent=void 0,G.relatedTarget=void 0,G.draggable=void 0,G.propagationStopped=!1,G.immediatePropagationStopped=!1;var q=M==="dragleave"?x.prev:x.cur,j=q.element,X=q.dropzone;return G.type=M,G.target=j,G.currentTarget=j,G.dropzone=X,G.dragEvent=D,G.relatedTarget=D.target,G.draggable=D.interactable,G.timeStamp=D.timeStamp,G}return u(g,[{key:"reject",value:function(){var x=this,D=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&D.cur.dropzone===this.dropzone&&D.cur.element===this.target)if(D.prev.dropzone=this.dropzone,D.prev.element=this.target,D.rejected=!0,D.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var M=D.activeDrops,G=Wt(M,function(j){var X=j.dropzone,H=j.element;return X===x.dropzone&&H===x.target});D.activeDrops.splice(G,1);var q=new g(D,this.dragEvent,"dropdeactivate");q.dropzone=this.dropzone,q.target=this.target,this.dropzone.fire(q)}else this.dropzone.fire(new g(D,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),g}(xt);function hr(d,h){for(var g=0,x=d.slice();g<x.length;g++){var D=x[g],M=D.dropzone,G=D.element;h.dropzone=M,h.target=G,M.fire(h),h.propagationStopped=h.immediatePropagationStopped=!1}}function Ar(d,h){for(var g=function(M,G){for(var q=[],j=0,X=M.interactables.list;j<X.length;j++){var H=X[j];if(H.options.drop.enabled){var J=H.options.drop.accept;if(!(y.element(J)&&J!==G||y.string(J)&&!Y(G,J)||y.func(J)&&!J({dropzone:H,draggableElement:G})))for(var ne=0,ce=H.getAllElements();ne<ce.length;ne++){var ue=ce[ne];ue!==G&&q.push({dropzone:H,element:ue,rect:H.getRect(ue)})}}}return q}(d,h),x=0;x<g.length;x++){var D=g[x];D.rect=D.dropzone.getRect(D.element)}return g}function xn(d,h,g){for(var x=d.dropState,D=d.interactable,M=d.element,G=[],q=0,j=x.activeDrops;q<j.length;q++){var X=j[q],H=X.dropzone,J=X.element,ne=X.rect,ce=H.dropCheck(h,g,D,M,J,ne);G.push(ce?J:null)}var ue=function(de){for(var Ee,ye,Ae,Le=[],Te=0;Te<de.length;Te++){var De=de[Te],ze=de[Ee];if(De&&Te!==Ee)if(ze){var rt=U(De),qe=U(ze);if(rt!==De.ownerDocument)if(qe!==De.ownerDocument)if(rt!==qe){Le=Le.length?Le:F(ze);var ht=void 0;if(ze instanceof V.HTMLElement&&De instanceof V.SVGElement&&!(De instanceof V.SVGSVGElement)){if(De===qe)continue;ht=De.ownerSVGElement}else ht=De;for(var At=F(ht,ze.ownerDocument),Bt=0;At[Bt]&&At[Bt]===Le[Bt];)Bt++;var zn=[At[Bt-1],At[Bt],Le[Bt]];if(zn[0])for(var Vr=zn[0].lastChild;Vr;){if(Vr===zn[1]){Ee=Te,Le=At;break}if(Vr===zn[2])break;Vr=Vr.previousSibling}}else Ae=ze,(parseInt(m(ye=De).getComputedStyle(ye).zIndex,10)||0)>=(parseInt(m(Ae).getComputedStyle(Ae).zIndex,10)||0)&&(Ee=Te);else Ee=Te}else Ee=Te}return Ee}(G);return x.activeDrops[ue]||null}function jr(d,h,g){var x=d.dropState,D={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return g.type==="dragstart"&&(D.activate=new zt(x,g,"dropactivate"),D.activate.target=null,D.activate.dropzone=null),g.type==="dragend"&&(D.deactivate=new zt(x,g,"dropdeactivate"),D.deactivate.target=null,D.deactivate.dropzone=null),x.rejected||(x.cur.element!==x.prev.element&&(x.prev.dropzone&&(D.leave=new zt(x,g,"dragleave"),g.dragLeave=D.leave.target=x.prev.element,g.prevDropzone=D.leave.dropzone=x.prev.dropzone),x.cur.dropzone&&(D.enter=new zt(x,g,"dragenter"),g.dragEnter=x.cur.element,g.dropzone=x.cur.dropzone)),g.type==="dragend"&&x.cur.dropzone&&(D.drop=new zt(x,g,"drop"),g.dropzone=x.cur.dropzone,g.relatedTarget=x.cur.element),g.type==="dragmove"&&x.cur.dropzone&&(D.move=new zt(x,g,"dropmove"),g.dropzone=x.cur.dropzone)),D}function Ci(d,h){var g=d.dropState,x=g.activeDrops,D=g.cur,M=g.prev;h.leave&&M.dropzone.fire(h.leave),h.enter&&D.dropzone.fire(h.enter),h.move&&D.dropzone.fire(h.move),h.drop&&D.dropzone.fire(h.drop),h.deactivate&&hr(x,h.deactivate),g.prev.dropzone=D.dropzone,g.prev.element=D.element}function cu(d,h){var g=d.interaction,x=d.iEvent,D=d.event;if(x.type==="dragmove"||x.type==="dragend"){var M=g.dropState;h.dynamicDrop&&(M.activeDrops=Ar(h,g.element));var G=x,q=xn(g,G,D);M.rejected=M.rejected&&!!q&&q.dropzone===M.cur.dropzone&&q.element===M.cur.element,M.cur.dropzone=q&&q.dropzone,M.cur.element=q&&q.element,M.events=jr(g,0,G)}}var hu={id:"actions/drop",install:function(d){var h=d.actions,g=d.interactStatic,x=d.Interactable,D=d.defaults;d.usePlugin(P),x.prototype.dropzone=function(M){return function(G,q){if(y.object(q)){if(G.options.drop.enabled=q.enabled!==!1,q.listeners){var j=Z(q.listeners),X=Object.keys(j).reduce(function(J,ne){return J[/^(enter|leave)/.test(ne)?"drag".concat(ne):/^(activate|deactivate|move)/.test(ne)?"drop".concat(ne):ne]=j[ne],J},{}),H=G.options.drop.listeners;H&&G.off(H),G.on(X),G.options.drop.listeners=X}return y.func(q.ondrop)&&G.on("drop",q.ondrop),y.func(q.ondropactivate)&&G.on("dropactivate",q.ondropactivate),y.func(q.ondropdeactivate)&&G.on("dropdeactivate",q.ondropdeactivate),y.func(q.ondragenter)&&G.on("dragenter",q.ondragenter),y.func(q.ondragleave)&&G.on("dragleave",q.ondragleave),y.func(q.ondropmove)&&G.on("dropmove",q.ondropmove),/^(pointer|center)$/.test(q.overlap)?G.options.drop.overlap=q.overlap:y.number(q.overlap)&&(G.options.drop.overlap=Math.max(Math.min(1,q.overlap),0)),"accept"in q&&(G.options.drop.accept=q.accept),"checker"in q&&(G.options.drop.checker=q.checker),G}return y.bool(q)?(G.options.drop.enabled=q,G):G.options.drop}(this,M)},x.prototype.dropCheck=function(M,G,q,j,X,H){return function(J,ne,ce,ue,de,Ee,ye){var Ae=!1;if(!(ye=ye||J.getRect(Ee)))return!!J.options.drop.checker&&J.options.drop.checker(ne,ce,Ae,J,Ee,ue,de);var Le=J.options.drop.overlap;if(Le==="pointer"){var Te=oe(ue,de,"drag"),De=Fe(ne);De.x+=Te.x,De.y+=Te.y;var ze=De.x>ye.left&&De.x<ye.right,rt=De.y>ye.top&&De.y<ye.bottom;Ae=ze&&rt}var qe=ue.getRect(de);if(qe&&Le==="center"){var ht=qe.left+qe.width/2,At=qe.top+qe.height/2;Ae=ht>=ye.left&&ht<=ye.right&&At>=ye.top&&At<=ye.bottom}return qe&&y.number(Le)&&(Ae=Math.max(0,Math.min(ye.right,qe.right)-Math.max(ye.left,qe.left))*Math.max(0,Math.min(ye.bottom,qe.bottom)-Math.max(ye.top,qe.top))/(qe.width*qe.height)>=Le),J.options.drop.checker&&(Ae=J.options.drop.checker(ne,ce,Ae,J,Ee,ue,de)),Ae}(this,M,G,q,j,X,H)},g.dynamicDrop=function(M){return y.bool(M)?(d.dynamicDrop=M,g):d.dynamicDrop},re(h.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),h.methodDict.drop="dropzone",d.dynamicDrop=!1,D.actions.drop=hu.defaults},listeners:{"interactions:before-action-start":function(d){var h=d.interaction;h.prepared.name==="drag"&&(h.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(d,h){var g=d.interaction,x=(d.event,d.iEvent);if(g.prepared.name==="drag"){var D=g.dropState;D.activeDrops=[],D.events={},D.activeDrops=Ar(h,g.element),D.events=jr(g,0,x),D.events.activate&&(hr(D.activeDrops,D.events.activate),h.fire("actions/drop:start",{interaction:g,dragEvent:x}))}},"interactions:action-move":cu,"interactions:after-action-move":function(d,h){var g=d.interaction,x=d.iEvent;if(g.prepared.name==="drag"){var D=g.dropState;Ci(g,D.events),h.fire("actions/drop:move",{interaction:g,dragEvent:x}),D.events={}}},"interactions:action-end":function(d,h){if(d.interaction.prepared.name==="drag"){var g=d.interaction,x=d.iEvent;cu(d,h),Ci(g,g.dropState.events),h.fire("actions/drop:end",{interaction:g,dragEvent:x})}},"interactions:stop":function(d){var h=d.interaction;if(h.prepared.name==="drag"){var g=h.dropState;g&&(g.activeDrops=null,g.events=null,g.cur.dropzone=null,g.cur.element=null,g.prev.dropzone=null,g.prev.element=null,g.rejected=!1)}}},getActiveDrops:Ar,getDrop:xn,getDropEvents:jr,fireDropEvents:Ci,filterEventType:function(d){return d.search("drag")===0||d.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},Ap=hu;function Ii(d){var h=d.interaction,g=d.iEvent,x=d.phase;if(h.prepared.name==="gesture"){var D=h.pointers.map(function(X){return X.pointer}),M=x==="start",G=x==="end",q=h.interactable.options.deltaSource;if(g.touches=[D[0],D[1]],M)g.distance=Ye(D,q),g.box=Xe(D),g.scale=1,g.ds=0,g.angle=ct(D,q),g.da=0,h.gesture.startDistance=g.distance,h.gesture.startAngle=g.angle;else if(G||h.pointers.length<2){var j=h.prevEvent;g.distance=j.distance,g.box=j.box,g.scale=j.scale,g.ds=0,g.angle=j.angle,g.da=0}else g.distance=Ye(D,q),g.box=Xe(D),g.scale=g.distance/h.gesture.startDistance,g.angle=ct(D,q),g.ds=g.scale-h.gesture.scale,g.da=g.angle-h.gesture.angle;h.gesture.distance=g.distance,h.gesture.angle=g.angle,y.number(g.scale)&&g.scale!==1/0&&!isNaN(g.scale)&&(h.gesture.scale=g.scale)}}var Li={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(d){var h=d.actions,g=d.Interactable,x=d.defaults;g.prototype.gesturable=function(D){return y.object(D)?(this.options.gesture.enabled=D.enabled!==!1,this.setPerAction("gesture",D),this.setOnEvents("gesture",D),this):y.bool(D)?(this.options.gesture.enabled=D,this):this.options.gesture},h.map.gesture=Li,h.methodDict.gesture="gesturable",x.actions.gesture=Li.defaults},listeners:{"interactions:action-start":Ii,"interactions:action-move":Ii,"interactions:action-end":Ii,"interactions:new":function(d){d.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(d){if(!(d.interaction.pointers.length<2)){var h=d.interactable.options.gesture;if(h&&h.enabled)return d.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(d){return d.search("gesture")===0}},_p=Li;function kp(d,h,g,x,D,M,G){if(!h)return!1;if(h===!0){var q=y.number(M.width)?M.width:M.right-M.left,j=y.number(M.height)?M.height:M.bottom-M.top;if(G=Math.min(G,Math.abs((d==="left"||d==="right"?q:j)/2)),q<0&&(d==="left"?d="right":d==="right"&&(d="left")),j<0&&(d==="top"?d="bottom":d==="bottom"&&(d="top")),d==="left"){var X=q>=0?M.left:M.right;return g.x<X+G}if(d==="top"){var H=j>=0?M.top:M.bottom;return g.y<H+G}if(d==="right")return g.x>(q>=0?M.right:M.left)-G;if(d==="bottom")return g.y>(j>=0?M.bottom:M.top)-G}return!!y.element(x)&&(y.element(h)?h===x:K(x,h,D))}function du(d){var h=d.iEvent,g=d.interaction;if(g.prepared.name==="resize"&&g.resizeAxes){var x=h;g.interactable.options.resize.square?(g.resizeAxes==="y"?x.delta.x=x.delta.y:x.delta.y=x.delta.x,x.axes="xy"):(x.axes=g.resizeAxes,g.resizeAxes==="x"?x.delta.y=0:g.resizeAxes==="y"&&(x.delta.x=0))}}var Ut,dr,jt={id:"actions/resize",before:["actions/drag"],install:function(d){var h=d.actions,g=d.browser,x=d.Interactable,D=d.defaults;jt.cursors=function(M){return M.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(g),jt.defaultMargin=g.supportsTouch||g.supportsPointerEvent?20:10,x.prototype.resizable=function(M){return function(G,q,j){return y.object(q)?(G.options.resize.enabled=q.enabled!==!1,G.setPerAction("resize",q),G.setOnEvents("resize",q),y.string(q.axis)&&/^x$|^y$|^xy$/.test(q.axis)?G.options.resize.axis=q.axis:q.axis===null&&(G.options.resize.axis=j.defaults.actions.resize.axis),y.bool(q.preserveAspectRatio)?G.options.resize.preserveAspectRatio=q.preserveAspectRatio:y.bool(q.square)&&(G.options.resize.square=q.square),G):y.bool(q)?(G.options.resize.enabled=q,G):G.options.resize}(this,M,d)},h.map.resize=jt,h.methodDict.resize="resizable",D.actions.resize=jt.defaults},listeners:{"interactions:new":function(d){d.interaction.resizeAxes="xy"},"interactions:action-start":function(d){(function(h){var g=h.iEvent,x=h.interaction;if(x.prepared.name==="resize"&&x.prepared.edges){var D=g,M=x.rect;x._rects={start:re({},M),corrected:re({},M),previous:re({},M),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},D.edges=x.prepared.edges,D.rect=x._rects.corrected,D.deltaRect=x._rects.delta}})(d),du(d)},"interactions:action-move":function(d){(function(h){var g=h.iEvent,x=h.interaction;if(x.prepared.name==="resize"&&x.prepared.edges){var D=g,M=x.interactable.options.resize.invert,G=M==="reposition"||M==="negate",q=x.rect,j=x._rects,X=j.start,H=j.corrected,J=j.delta,ne=j.previous;if(re(ne,H),G){if(re(H,q),M==="reposition"){if(H.top>H.bottom){var ce=H.top;H.top=H.bottom,H.bottom=ce}if(H.left>H.right){var ue=H.left;H.left=H.right,H.right=ue}}}else H.top=Math.min(q.top,X.bottom),H.bottom=Math.max(q.bottom,X.top),H.left=Math.min(q.left,X.right),H.right=Math.max(q.right,X.left);for(var de in H.width=H.right-H.left,H.height=H.bottom-H.top,H)J[de]=H[de]-ne[de];D.edges=x.prepared.edges,D.rect=H,D.deltaRect=J}})(d),du(d)},"interactions:action-end":function(d){var h=d.iEvent,g=d.interaction;if(g.prepared.name==="resize"&&g.prepared.edges){var x=h;x.edges=g.prepared.edges,x.rect=g._rects.corrected,x.deltaRect=g._rects.delta}},"auto-start:check":function(d){var h=d.interaction,g=d.interactable,x=d.element,D=d.rect,M=d.buttons;if(D){var G=re({},h.coords.cur.page),q=g.options.resize;if(q&&q.enabled&&(!h.pointerIsDown||!/mouse|pointer/.test(h.pointerType)||M&q.mouseButtons)){if(y.object(q.edges)){var j={left:!1,right:!1,top:!1,bottom:!1};for(var X in j)j[X]=kp(X,q.edges[X],G,h._latestPointer.eventTarget,x,D,q.margin||jt.defaultMargin);j.left=j.left&&!j.right,j.top=j.top&&!j.bottom,(j.left||j.right||j.top||j.bottom)&&(d.action={name:"resize",edges:j})}else{var H=q.axis!=="y"&&G.x>D.right-jt.defaultMargin,J=q.axis!=="x"&&G.y>D.bottom-jt.defaultMargin;(H||J)&&(d.action={name:"resize",axes:(H?"x":"")+(J?"y":"")})}return!d.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(d){var h=d.edges,g=d.axis,x=d.name,D=jt.cursors,M=null;if(g)M=D[x+g];else if(h){for(var G="",q=0,j=["top","bottom","left","right"];q<j.length;q++){var X=j[q];h[X]&&(G+=X)}M=D[G]}return M},filterEventType:function(d){return d.search("resize")===0},defaultMargin:null},Dp=jt,Cp={id:"actions",install:function(d){d.usePlugin(_p),d.usePlugin(Dp),d.usePlugin(P),d.usePlugin(Ap)}},fu=0,tr={request:function(d){return Ut(d)},cancel:function(d){return dr(d)},init:function(d){if(Ut=d.requestAnimationFrame,dr=d.cancelAnimationFrame,!Ut)for(var h=["ms","moz","webkit","o"],g=0;g<h.length;g++){var x=h[g];Ut=d["".concat(x,"RequestAnimationFrame")],dr=d["".concat(x,"CancelAnimationFrame")]||d["".concat(x,"CancelRequestAnimationFrame")]}Ut=Ut&&Ut.bind(d),dr=dr&&dr.bind(d),Ut||(Ut=function(D){var M=Date.now(),G=Math.max(0,16-(M-fu)),q=d.setTimeout(function(){D(M+G)},G);return fu=M+G,q},dr=function(D){return clearTimeout(D)})}},Ce={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(d){Ce.isScrolling=!0,tr.cancel(Ce.i),d.autoScroll=Ce,Ce.interaction=d,Ce.prevTime=Ce.now(),Ce.i=tr.request(Ce.scroll)},stop:function(){Ce.isScrolling=!1,Ce.interaction&&(Ce.interaction.autoScroll=null),tr.cancel(Ce.i)},scroll:function(){var d=Ce.interaction,h=d.interactable,g=d.element,x=d.prepared.name,D=h.options[x].autoScroll,M=pu(D.container,h,g),G=Ce.now(),q=(G-Ce.prevTime)/1e3,j=D.speed*q;if(j>=1){var X={x:Ce.x*j,y:Ce.y*j};if(X.x||X.y){var H=gu(M);y.window(M)?M.scrollBy(X.x,X.y):M&&(M.scrollLeft+=X.x,M.scrollTop+=X.y);var J=gu(M),ne={x:J.x-H.x,y:J.y-H.y};(ne.x||ne.y)&&h.fire({type:"autoscroll",target:g,interactable:h,delta:ne,interaction:d,container:M})}Ce.prevTime=G}Ce.isScrolling&&(tr.cancel(Ce.i),Ce.i=tr.request(Ce.scroll))},check:function(d,h){var g;return(g=d.options[h].autoScroll)==null?void 0:g.enabled},onInteractionMove:function(d){var h=d.interaction,g=d.pointer;if(h.interacting()&&Ce.check(h.interactable,h.prepared.name))if(h.simulation)Ce.x=Ce.y=0;else{var x,D,M,G,q=h.interactable,j=h.element,X=h.prepared.name,H=q.options[X].autoScroll,J=pu(H.container,q,j);if(y.window(J))G=g.clientX<Ce.margin,x=g.clientY<Ce.margin,D=g.clientX>J.innerWidth-Ce.margin,M=g.clientY>J.innerHeight-Ce.margin;else{var ne=ae(J);G=g.clientX<ne.left+Ce.margin,x=g.clientY<ne.top+Ce.margin,D=g.clientX>ne.right-Ce.margin,M=g.clientY>ne.bottom-Ce.margin}Ce.x=D?1:G?-1:0,Ce.y=M?1:x?-1:0,Ce.isScrolling||(Ce.margin=H.margin,Ce.speed=H.speed,Ce.start(h))}}};function pu(d,h,g){return(y.string(d)?he(d,h,g):d)||m(g)}function gu(d){return y.window(d)&&(d=window.document.body),{x:d.scrollLeft,y:d.scrollTop}}var Ip={id:"auto-scroll",install:function(d){var h=d.defaults,g=d.actions;d.autoScroll=Ce,Ce.now=function(){return d.now()},g.phaselessTypes.autoscroll=!0,h.perAction.autoScroll=Ce.defaults},listeners:{"interactions:new":function(d){d.interaction.autoScroll=null},"interactions:destroy":function(d){d.interaction.autoScroll=null,Ce.stop(),Ce.interaction&&(Ce.interaction=null)},"interactions:stop":Ce.stop,"interactions:action-move":function(d){return Ce.onInteractionMove(d)}}},Lp=Ip;function Br(d,h){var g=!1;return function(){return g||(w.console.warn(h),g=!0),d.apply(this,arguments)}}function zi(d,h){return d.name=h.name,d.axis=h.axis,d.edges=h.edges,d}function zp(d){return y.bool(d)?(this.options.styleCursor=d,this):d===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Tp(d){return y.func(d)?(this.options.actionChecker=d,this):d===null?(delete this.options.actionChecker,this):this.options.actionChecker}var Mp={id:"auto-start/interactableMethods",install:function(d){var h=d.Interactable;h.prototype.getAction=function(g,x,D,M){var G=function(q,j,X,H,J){var ne=q.getRect(H),ce=j.buttons||{0:1,1:4,3:8,4:16}[j.button],ue={action:null,interactable:q,interaction:X,element:H,rect:ne,buttons:ce};return J.fire("auto-start:check",ue),ue.action}(this,x,D,M,d);return this.options.actionChecker?this.options.actionChecker(g,x,G,this,M,D):G},h.prototype.ignoreFrom=Br(function(g){return this._backCompatOption("ignoreFrom",g)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),h.prototype.allowFrom=Br(function(g){return this._backCompatOption("allowFrom",g)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),h.prototype.actionChecker=Tp,h.prototype.styleCursor=zp}};function vu(d,h,g,x,D){return h.testIgnoreAllow(h.options[d.name],g,x)&&h.options[d.name].enabled&&Sn(h,g,d,D)?d:null}function Np(d,h,g,x,D,M,G){for(var q=0,j=x.length;q<j;q++){var X=x[q],H=D[q],J=X.getAction(h,g,d,H);if(J){var ne=vu(J,X,H,M,G);if(ne)return{action:ne,interactable:X,element:H}}}return{action:null,interactable:null,element:null}}function yu(d,h,g,x,D){var M=[],G=[],q=x;function j(H){M.push(H),G.push(q)}for(;y.element(q);){M=[],G=[],D.interactables.forEachMatch(q,j);var X=Np(d,h,g,M,G,x,D);if(X.action&&!X.interactable.options[X.action.name].manualStart)return X;q=B(q)}return{action:null,interactable:null,element:null}}function mu(d,h,g){var x=h.action,D=h.interactable,M=h.element;x=x||{name:null},d.interactable=D,d.element=M,zi(d.prepared,x),d.rect=D&&x.name?D.getRect(M):null,wu(d,g),g.fire("autoStart:prepared",{interaction:d})}function Sn(d,h,g,x){var D=d.options,M=D[g.name].max,G=D[g.name].maxPerElement,q=x.autoStart.maxInteractions,j=0,X=0,H=0;if(!(M&&G&&q))return!1;for(var J=0,ne=x.interactions.list;J<ne.length;J++){var ce=ne[J],ue=ce.prepared.name;if(ce.interacting()&&(++j>=q||ce.interactable===d&&((X+=ue===g.name?1:0)>=M||ce.element===h&&(H++,ue===g.name&&H>=G))))return!1}return q>0}function bu(d,h){return y.number(d)?(h.autoStart.maxInteractions=d,this):h.autoStart.maxInteractions}function Ti(d,h,g){var x=g.autoStart.cursorElement;x&&x!==d&&(x.style.cursor=""),d.ownerDocument.documentElement.style.cursor=h,d.style.cursor=h,g.autoStart.cursorElement=h?d:null}function wu(d,h){var g=d.interactable,x=d.element,D=d.prepared;if(d.pointerType==="mouse"&&g&&g.options.styleCursor){var M="";if(D.name){var G=g.options[D.name].cursorChecker;M=y.func(G)?G(D,g,x,d._interacting):h.actions.map[D.name].getCursor(D)}Ti(d.element,M||"",h)}else h.autoStart.cursorElement&&Ti(h.autoStart.cursorElement,"",h)}var Rp={id:"auto-start/base",before:["actions"],install:function(d){var h=d.interactStatic,g=d.defaults;d.usePlugin(Mp),g.base.actionChecker=null,g.base.styleCursor=!0,re(g.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),h.maxInteractions=function(x){return bu(x,d)},d.autoStart={maxInteractions:1/0,withinInteractionLimit:Sn,cursorElement:null}},listeners:{"interactions:down":function(d,h){var g=d.interaction,x=d.pointer,D=d.event,M=d.eventTarget;g.interacting()||mu(g,yu(g,x,D,M,h),h)},"interactions:move":function(d,h){(function(g,x){var D=g.interaction,M=g.pointer,G=g.event,q=g.eventTarget;D.pointerType!=="mouse"||D.pointerIsDown||D.interacting()||mu(D,yu(D,M,G,q,x),x)})(d,h),function(g,x){var D=g.interaction;if(D.pointerIsDown&&!D.interacting()&&D.pointerWasMoved&&D.prepared.name){x.fire("autoStart:before-start",g);var M=D.interactable,G=D.prepared.name;G&&M&&(M.options[G].manualStart||!Sn(M,D.element,D.prepared,x)?D.stop():(D.start(D.prepared,M,D.element),wu(D,x)))}}(d,h)},"interactions:stop":function(d,h){var g=d.interaction,x=g.interactable;x&&x.options.styleCursor&&Ti(g.element,"",h)}},maxInteractions:bu,withinInteractionLimit:Sn,validateAction:vu},Mi=Rp,$p={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(d,h){var g=d.interaction,x=d.eventTarget,D=d.dx,M=d.dy;if(g.prepared.name==="drag"){var G=Math.abs(D),q=Math.abs(M),j=g.interactable.options.drag,X=j.startAxis,H=G>q?"x":G<q?"y":"xy";if(g.prepared.axis=j.lockAxis==="start"?H[0]:j.lockAxis,H!=="xy"&&X!=="xy"&&X!==H){g.prepared.name=null;for(var J=x,ne=function(ue){if(ue!==g.interactable){var de=g.interactable.options.drag;if(!de.manualStart&&ue.testIgnoreAllow(de,J,x)){var Ee=ue.getAction(g.downPointer,g.downEvent,g,J);if(Ee&&Ee.name==="drag"&&function(ye,Ae){if(!Ae)return!1;var Le=Ae.options.drag.startAxis;return ye==="xy"||Le==="xy"||Le===ye}(H,ue)&&Mi.validateAction(Ee,ue,J,x,h))return ue}}};y.element(J);){var ce=h.interactables.forEachMatch(J,ne);if(ce){g.prepared.name="drag",g.interactable=ce,g.element=J;break}J=B(J)}}}}}};function Ni(d){var h=d.prepared&&d.prepared.name;if(!h)return null;var g=d.interactable.options;return g[h].hold||g[h].delay}var Pp={id:"auto-start/hold",install:function(d){var h=d.defaults;d.usePlugin(Mi),h.perAction.hold=0,h.perAction.delay=0},listeners:{"interactions:new":function(d){d.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(d){var h=d.interaction,g=Ni(h);g>0&&(h.autoStartHoldTimer=setTimeout(function(){h.start(h.prepared,h.interactable,h.element)},g))},"interactions:move":function(d){var h=d.interaction,g=d.duplicate;h.autoStartHoldTimer&&h.pointerWasMoved&&!g&&(clearTimeout(h.autoStartHoldTimer),h.autoStartHoldTimer=null)},"autoStart:before-start":function(d){var h=d.interaction;Ni(h)>0&&(h.prepared.name=null)}},getHoldDuration:Ni},Gp=Pp,Op={id:"auto-start",install:function(d){d.usePlugin(Mi),d.usePlugin(Gp),d.usePlugin($p)}},qp=function(d){return/^(always|never|auto)$/.test(d)?(this.options.preventDefault=d,this):y.bool(d)?(this.options.preventDefault=d?"always":"never",this):this.options.preventDefault};function Fp(d){var h=d.interaction,g=d.event;h.interactable&&h.interactable.checkAndPreventDefault(g)}var Eu={id:"core/interactablePreventDefault",install:function(d){var h=d.Interactable;h.prototype.preventDefault=qp,h.prototype.checkAndPreventDefault=function(g){return function(x,D,M){var G=x.options.preventDefault;if(G!=="never")if(G!=="always"){if(D.events.supportsPassive&&/^touch(start|move)$/.test(M.type)){var q=m(M.target).document,j=D.getDocOptions(q);if(!j||!j.events||j.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(M.type)||y.element(M.target)&&Y(M.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||M.preventDefault()}else M.preventDefault()}(this,d,g)},d.interactions.docEvents.push({type:"dragstart",listener:function(g){for(var x=0,D=d.interactions.list;x<D.length;x++){var M=D[x];if(M.element&&(M.element===g.target||L(M.element,g.target)))return void M.interactable.checkAndPreventDefault(g)}}})},listeners:["down","move","up","cancel"].reduce(function(d,h){return d["interactions:".concat(h)]=Fp,d},{})};function An(d,h){if(h.phaselessTypes[d])return!0;for(var g in h.map)if(d.indexOf(g)===0&&d.substr(g.length)in h.phases)return!0;return!1}function _r(d){var h={};for(var g in d){var x=d[g];y.plainObject(x)?h[g]=_r(x):y.array(x)?h[g]=En(x):h[g]=x}return h}var Ri=function(){function d(h){o(this,d),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=h,this.result=_n(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return u(d,[{key:"start",value:function(h,g){var x,D,M=h.phase,G=this.interaction,q=function(X){var H=X.interactable.options[X.prepared.name],J=H.modifiers;return J&&J.length?J:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(ne){var ce=H[ne];return ce&&ce.enabled&&{options:ce,methods:ce._methods}}).filter(function(ne){return!!ne})}(G);this.prepareStates(q),this.startEdges=re({},G.edges),this.edges=re({},this.startEdges),this.startOffset=(x=G.rect,D=g,x?{left:D.x-x.left,top:D.y-x.top,right:x.right-D.x,bottom:x.bottom-D.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var j=this.fillArg({phase:M,pageCoords:g,preEnd:!1});return this.result=_n(),this.startAll(j),this.result=this.setAll(j)}},{key:"fillArg",value:function(h){var g=this.interaction;return h.interaction=g,h.interactable=g.interactable,h.element=g.element,h.rect||(h.rect=g.rect),h.edges||(h.edges=this.startEdges),h.startOffset=this.startOffset,h}},{key:"startAll",value:function(h){for(var g=0,x=this.states;g<x.length;g++){var D=x[g];D.methods.start&&(h.state=D,D.methods.start(h))}}},{key:"setAll",value:function(h){var g=h.phase,x=h.preEnd,D=h.skipModifiers,M=h.rect,G=h.edges;h.coords=re({},h.pageCoords),h.rect=re({},M),h.edges=re({},G);for(var q=D?this.states.slice(D):this.states,j=_n(h.coords,h.rect),X=0;X<q.length;X++){var H,J=q[X],ne=J.options,ce=re({},h.coords),ue=null;(H=J.methods)!=null&&H.set&&this.shouldDo(ne,x,g)&&(h.state=J,ue=J.methods.set(h),pe(h.edges,h.rect,{x:h.coords.x-ce.x,y:h.coords.y-ce.y})),j.eventProps.push(ue)}re(this.edges,h.edges),j.delta.x=h.coords.x-h.pageCoords.x,j.delta.y=h.coords.y-h.pageCoords.y,j.rectDelta.left=h.rect.left-M.left,j.rectDelta.right=h.rect.right-M.right,j.rectDelta.top=h.rect.top-M.top,j.rectDelta.bottom=h.rect.bottom-M.bottom;var de=this.result.coords,Ee=this.result.rect;if(de&&Ee){var ye=j.rect.left!==Ee.left||j.rect.right!==Ee.right||j.rect.top!==Ee.top||j.rect.bottom!==Ee.bottom;j.changed=ye||de.x!==j.coords.x||de.y!==j.coords.y}return j}},{key:"applyToInteraction",value:function(h){var g=this.interaction,x=h.phase,D=g.coords.cur,M=g.coords.start,G=this.result,q=this.startDelta,j=G.delta;x==="start"&&re(this.startDelta,G.delta);for(var X=0,H=[[M,q],[D,j]];X<H.length;X++){var J=H[X],ne=J[0],ce=J[1];ne.page.x+=ce.x,ne.page.y+=ce.y,ne.client.x+=ce.x,ne.client.y+=ce.y}var ue=this.result.rectDelta,de=h.rect||g.rect;de.left+=ue.left,de.right+=ue.right,de.top+=ue.top,de.bottom+=ue.bottom,de.width=de.right-de.left,de.height=de.bottom-de.top}},{key:"setAndApply",value:function(h){var g=this.interaction,x=h.phase,D=h.preEnd,M=h.skipModifiers,G=this.setAll(this.fillArg({preEnd:D,phase:x,pageCoords:h.modifiedCoords||g.coords.cur.page}));if(this.result=G,!G.changed&&(!M||M<this.states.length)&&g.interacting())return!1;if(h.modifiedCoords){var q=g.coords.cur.page,j={x:h.modifiedCoords.x-q.x,y:h.modifiedCoords.y-q.y};G.coords.x+=j.x,G.coords.y+=j.y,G.delta.x+=j.x,G.delta.y+=j.y}this.applyToInteraction(h)}},{key:"beforeEnd",value:function(h){var g=h.interaction,x=h.event,D=this.states;if(D&&D.length){for(var M=!1,G=0;G<D.length;G++){var q=D[G];h.state=q;var j=q.options,X=q.methods,H=X.beforeEnd&&X.beforeEnd(h);if(H)return this.endResult=H,!1;M=M||!M&&this.shouldDo(j,!0,h.phase,!0)}M&&g.move({event:x,preEnd:!0})}}},{key:"stop",value:function(h){var g=h.interaction;if(this.states&&this.states.length){var x=re({states:this.states,interactable:g.interactable,element:g.element,rect:null},h);this.fillArg(x);for(var D=0,M=this.states;D<M.length;D++){var G=M[D];x.state=G,G.methods.stop&&G.methods.stop(x)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(h){this.states=[];for(var g=0;g<h.length;g++){var x=h[g],D=x.options,M=x.methods,G=x.name;this.states.push({options:D,methods:M,index:g,name:G})}return this.states}},{key:"restoreInteractionCoords",value:function(h){var g=h.interaction,x=g.coords,D=g.rect,M=g.modification;if(M.result){for(var G=M.startDelta,q=M.result,j=q.delta,X=q.rectDelta,H=0,J=[[x.start,G],[x.cur,j]];H<J.length;H++){var ne=J[H],ce=ne[0],ue=ne[1];ce.page.x-=ue.x,ce.page.y-=ue.y,ce.client.x-=ue.x,ce.client.y-=ue.y}D.left-=X.left,D.right-=X.right,D.top-=X.top,D.bottom-=X.bottom}}},{key:"shouldDo",value:function(h,g,x,D){return!(!h||h.enabled===!1||D&&!h.endOnly||h.endOnly&&!g||x==="start"&&!h.setStart)}},{key:"copyFrom",value:function(h){this.startOffset=h.startOffset,this.startDelta=h.startDelta,this.startEdges=h.startEdges,this.edges=h.edges,this.states=h.states.map(function(g){return _r(g)}),this.result=_n(re({},h.result.coords),re({},h.result.rect))}},{key:"destroy",value:function(){for(var h in this)this[h]=null}}]),d}();function _n(d,h){return{rect:h,coords:d,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function rr(d,h){var g=d.defaults,x={start:d.start,set:d.set,beforeEnd:d.beforeEnd,stop:d.stop},D=function(M){var G=M||{};for(var q in G.enabled=G.enabled!==!1,g)q in G||(G[q]=g[q]);var j={options:G,methods:x,name:h,enable:function(){return G.enabled=!0,j},disable:function(){return G.enabled=!1,j}};return j};return h&&typeof h=="string"&&(D._defaults=g,D._methods=x),D}function Hr(d){var h=d.iEvent,g=d.interaction.modification.result;g&&(h.modifiers=g.eventProps)}var Wp={id:"modifiers/base",before:["actions"],install:function(d){d.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(d){var h=d.interaction;h.modification=new Ri(h)},"interactions:before-action-start":function(d){var h=d.interaction,g=d.interaction.modification;g.start(d,h.coords.start.page),h.edges=g.edges,g.applyToInteraction(d)},"interactions:before-action-move":function(d){var h=d.interaction,g=h.modification,x=g.setAndApply(d);return h.edges=g.edges,x},"interactions:before-action-end":function(d){var h=d.interaction,g=h.modification,x=g.beforeEnd(d);return h.edges=g.startEdges,x},"interactions:action-start":Hr,"interactions:action-move":Hr,"interactions:action-end":Hr,"interactions:after-action-start":function(d){return d.interaction.modification.restoreInteractionCoords(d)},"interactions:after-action-move":function(d){return d.interaction.modification.restoreInteractionCoords(d)},"interactions:stop":function(d){return d.interaction.modification.stop(d)}}},xu=Wp,Su={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},$i=function(d){c(g,d);var h=b(g);function g(x,D,M,G,q,j,X){var H;o(this,g),(H=h.call(this,x)).relatedTarget=null,H.screenX=void 0,H.screenY=void 0,H.button=void 0,H.buttons=void 0,H.ctrlKey=void 0,H.shiftKey=void 0,H.altKey=void 0,H.metaKey=void 0,H.page=void 0,H.client=void 0,H.delta=void 0,H.rect=void 0,H.x0=void 0,H.y0=void 0,H.t0=void 0,H.dt=void 0,H.duration=void 0,H.clientX0=void 0,H.clientY0=void 0,H.velocity=void 0,H.speed=void 0,H.swipe=void 0,H.axes=void 0,H.preEnd=void 0,q=q||x.element;var J=x.interactable,ne=(J&&J.options||Su).deltaSource,ce=oe(J,q,M),ue=G==="start",de=G==="end",Ee=ue?v(H):x.prevEvent,ye=ue?x.coords.start:de?{page:Ee.page,client:Ee.client,timeStamp:x.coords.cur.timeStamp}:x.coords.cur;return H.page=re({},ye.page),H.client=re({},ye.client),H.rect=re({},x.rect),H.timeStamp=ye.timeStamp,de||(H.page.x-=ce.x,H.page.y-=ce.y,H.client.x-=ce.x,H.client.y-=ce.y),H.ctrlKey=D.ctrlKey,H.altKey=D.altKey,H.shiftKey=D.shiftKey,H.metaKey=D.metaKey,H.button=D.button,H.buttons=D.buttons,H.target=q,H.currentTarget=q,H.preEnd=j,H.type=X||M+(G||""),H.interactable=J,H.t0=ue?x.pointers[x.pointers.length-1].downTime:Ee.t0,H.x0=x.coords.start.page.x-ce.x,H.y0=x.coords.start.page.y-ce.y,H.clientX0=x.coords.start.client.x-ce.x,H.clientY0=x.coords.start.client.y-ce.y,H.delta=ue||de?{x:0,y:0}:{x:H[ne].x-Ee[ne].x,y:H[ne].y-Ee[ne].y},H.dt=x.coords.delta.timeStamp,H.duration=H.timeStamp-H.t0,H.velocity=re({},x.coords.velocity[ne]),H.speed=Me(H.velocity.x,H.velocity.y),H.swipe=de||G==="inertiastart"?H.getSwipe():null,H}return u(g,[{key:"getSwipe",value:function(){var x=this._interaction;if(x.prevEvent.speed<600||this.timeStamp-x.prevEvent.timeStamp>150)return null;var D=180*Math.atan2(x.prevEvent.velocityY,x.prevEvent.velocityX)/Math.PI;D<0&&(D+=360);var M=112.5<=D&&D<247.5,G=202.5<=D&&D<337.5;return{up:G,down:!G&&22.5<=D&&D<157.5,left:M,right:!M&&(292.5<=D||D<67.5),angle:D,speed:x.prevEvent.speed,velocity:{x:x.prevEvent.velocityX,y:x.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),g}(xt);Object.defineProperties($i.prototype,{pageX:{get:function(){return this.page.x},set:function(d){this.page.x=d}},pageY:{get:function(){return this.page.y},set:function(d){this.page.y=d}},clientX:{get:function(){return this.client.x},set:function(d){this.client.x=d}},clientY:{get:function(){return this.client.y},set:function(d){this.client.y=d}},dx:{get:function(){return this.delta.x},set:function(d){this.delta.x=d}},dy:{get:function(){return this.delta.y},set:function(d){this.delta.y=d}},velocityX:{get:function(){return this.velocity.x},set:function(d){this.velocity.x=d}},velocityY:{get:function(){return this.velocity.y},set:function(d){this.velocity.y=d}}});var Up=u(function d(h,g,x,D,M){o(this,d),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=h,this.pointer=g,this.event=x,this.downTime=D,this.downTarget=M}),jp=function(d){return d.interactable="",d.element="",d.prepared="",d.pointerIsDown="",d.pointerWasMoved="",d._proxy="",d}({}),Au=function(d){return d.start="",d.move="",d.end="",d.stop="",d.interacting="",d}({}),Bp=0,Hp=function(){function d(h){var g=this,x=h.pointerType,D=h.scopeFire;o(this,d),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Br(function(H){this.move(H)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=Bp++,this._scopeFire=D,this.pointerType=x;var M=this;this._proxy={};var G=function(H){Object.defineProperty(g._proxy,H,{get:function(){return M[H]}})};for(var q in jp)G(q);var j=function(H){Object.defineProperty(g._proxy,H,{value:function(){return M[H].apply(M,arguments)}})};for(var X in Au)j(X);this._scopeFire("interactions:new",{interaction:this})}return u(d,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(h,g,x){var D=this.updatePointer(h,g,x,!0),M=this.pointers[D];this._scopeFire("interactions:down",{pointer:h,event:g,eventTarget:x,pointerIndex:D,pointerInfo:M,type:"down",interaction:this})}},{key:"start",value:function(h,g,x){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(h.name==="gesture"?2:1)||!g.options[h.name].enabled)&&(zi(this.prepared,h),this.interactable=g,this.element=x,this.rect=g.getRect(x),this.edges=this.prepared.edges?re({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(h,g,x){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(h,g,x,!1);var D,M,G=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(D=this.coords.cur.client.x-this.coords.start.client.x,M=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=Me(D,M)>this.pointerMoveTolerance);var q,j,X,H=this.getPointerIndex(h),J={pointer:h,pointerIndex:H,pointerInfo:this.pointers[H],event:g,type:"move",eventTarget:x,dx:D,dy:M,duplicate:G,interaction:this};G||(q=this.coords.velocity,j=this.coords.delta,X=Math.max(j.timeStamp/1e3,.001),q.page.x=j.page.x/X,q.page.y=j.page.y/X,q.client.x=j.client.x/X,q.client.y=j.client.y/X,q.timeStamp=X),this._scopeFire("interactions:move",J),G||this.simulation||(this.interacting()&&(J.type=null,this.move(J)),this.pointerWasMoved&&te(this.coords.prev,this.coords.cur))}},{key:"move",value:function(h){h&&h.event||Re(this.coords.delta),(h=re({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},h||{})).phase="move",this._doPhase(h)}},{key:"pointerUp",value:function(h,g,x,D){var M=this.getPointerIndex(h);M===-1&&(M=this.updatePointer(h,g,x,!1));var G=/cancel$/i.test(g.type)?"cancel":"up";this._scopeFire("interactions:".concat(G),{pointer:h,pointerIndex:M,pointerInfo:this.pointers[M],event:g,eventTarget:x,type:G,curEventTarget:D,interaction:this}),this.simulation||this.end(g),this.removePointer(h,g)}},{key:"documentBlur",value:function(h){this.end(h),this._scopeFire("interactions:blur",{event:h,type:"blur",interaction:this})}},{key:"end",value:function(h){var g;this._ending=!0,h=h||this._latestPointer.event,this.interacting()&&(g=this._doPhase({event:h,interaction:this,phase:"end"})),this._ending=!1,g===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(h){var g=Ne(h);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Wt(this.pointers,function(x){return x.id===g})}},{key:"getPointerInfo",value:function(h){return this.pointers[this.getPointerIndex(h)]}},{key:"updatePointer",value:function(h,g,x,D){var M,G,q,j=Ne(h),X=this.getPointerIndex(h),H=this.pointers[X];return D=D!==!1&&(D||/(down|start)$/i.test(g.type)),H?H.pointer=h:(H=new Up(j,h,g,null,null),X=this.pointers.length,this.pointers.push(H)),Ge(this.coords.cur,this.pointers.map(function(J){return J.pointer}),this._now()),M=this.coords.delta,G=this.coords.prev,q=this.coords.cur,M.page.x=q.page.x-G.page.x,M.page.y=q.page.y-G.page.y,M.client.x=q.client.x-G.client.x,M.client.y=q.client.y-G.client.y,M.timeStamp=q.timeStamp-G.timeStamp,D&&(this.pointerIsDown=!0,H.downTime=this.coords.cur.timeStamp,H.downTarget=x,ve(this.downPointer,h),this.interacting()||(te(this.coords.start,this.coords.cur),te(this.coords.prev,this.coords.cur),this.downEvent=g,this.pointerWasMoved=!1)),this._updateLatestPointer(h,g,x),this._scopeFire("interactions:update-pointer",{pointer:h,event:g,eventTarget:x,down:D,pointerInfo:H,pointerIndex:X,interaction:this}),X}},{key:"removePointer",value:function(h,g){var x=this.getPointerIndex(h);if(x!==-1){var D=this.pointers[x];this._scopeFire("interactions:remove-pointer",{pointer:h,event:g,eventTarget:null,pointerIndex:x,pointerInfo:D,interaction:this}),this.pointers.splice(x,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(h,g,x){this._latestPointer.pointer=h,this._latestPointer.event=g,this._latestPointer.eventTarget=x}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(h,g,x,D){return new $i(this,h,this.prepared.name,g,this.element,x,D)}},{key:"_fireEvent",value:function(h){var g;(g=this.interactable)==null||g.fire(h),(!this.prevEvent||h.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=h)}},{key:"_doPhase",value:function(h){var g=h.event,x=h.phase,D=h.preEnd,M=h.type,G=this.rect;if(G&&x==="move"&&(pe(this.edges,G,this.coords.delta[this.interactable.options.deltaSource]),G.width=G.right-G.left,G.height=G.bottom-G.top),this._scopeFire("interactions:before-action-".concat(x),h)===!1)return!1;var q=h.iEvent=this._createPreparedEvent(g,x,D,M);return this._scopeFire("interactions:action-".concat(x),h),x==="start"&&(this.prevEvent=q),this._fireEvent(q),this._scopeFire("interactions:after-action-".concat(x),h),!0}},{key:"_now",value:function(){return Date.now()}}]),d}();function _u(d){ku(d.interaction)}function ku(d){if(!function(g){return!(!g.offset.pending.x&&!g.offset.pending.y)}(d))return!1;var h=d.offset.pending;return Pi(d.coords.cur,h),Pi(d.coords.delta,h),pe(d.edges,d.rect,h),h.x=0,h.y=0,!0}function Kp(d){var h=d.x,g=d.y;this.offset.pending.x+=h,this.offset.pending.y+=g,this.offset.total.x+=h,this.offset.total.y+=g}function Pi(d,h){var g=d.page,x=d.client,D=h.x,M=h.y;g.x+=D,g.y+=M,x.x+=D,x.y+=M}Au.offsetBy="";var Xp={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(d){d.Interaction.prototype.offsetBy=Kp},listeners:{"interactions:new":function(d){d.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(d){return function(h){h.pointerIsDown&&(Pi(h.coords.cur,h.offset.total),h.offset.pending.x=0,h.offset.pending.y=0)}(d.interaction)},"interactions:before-action-start":_u,"interactions:before-action-move":_u,"interactions:before-action-end":function(d){var h=d.interaction;if(ku(h))return h.move({offset:!0}),h.end(),!1},"interactions:stop":function(d){var h=d.interaction;h.offset.total.x=0,h.offset.total.y=0,h.offset.pending.x=0,h.offset.pending.y=0}}},Du=Xp,Yp=function(){function d(h){o(this,d),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=h}return u(d,[{key:"start",value:function(h){var g=this.interaction,x=kn(g);if(!x||!x.enabled)return!1;var D=g.coords.velocity.client,M=Me(D.x,D.y),G=this.modification||(this.modification=new Ri(g));if(G.copyFrom(g.modification),this.t0=g._now(),this.allowResume=x.allowResume,this.v0=M,this.currentOffset={x:0,y:0},this.startCoords=g.coords.cur.page,this.modifierArg=G.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-g.coords.cur.timeStamp<50&&M>x.minSpeed&&M>x.endSpeed)this.startInertia();else{if(G.result=G.setAll(this.modifierArg),!G.result.changed)return!1;this.startSmoothEnd()}return g.modification.result.rect=null,g.offsetBy(this.targetOffset),g._doPhase({interaction:g,event:h,phase:"inertiastart"}),g.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),g.modification.result.rect=null,this.active=!0,g.simulation=this,!0}},{key:"startInertia",value:function(){var h=this,g=this.interaction.coords.velocity.client,x=kn(this.interaction),D=x.resistance,M=-Math.log(x.endSpeed/this.v0)/D;this.targetOffset={x:(g.x-M)/D,y:(g.y-M)/D},this.te=M,this.lambda_v0=D/this.v0,this.one_ve_v0=1-x.endSpeed/this.v0;var G=this.modification,q=this.modifierArg;q.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},G.result=G.setAll(q),G.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+G.result.delta.x,y:this.targetOffset.y+G.result.delta.y}),this.onNextFrame(function(){return h.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var h=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return h.smoothEndTick()})}},{key:"onNextFrame",value:function(h){var g=this;this.timeout=tr.request(function(){g.active&&h()})}},{key:"inertiaTick",value:function(){var h,g,x,D,M,G,q,j=this,X=this.interaction,H=kn(X).resistance,J=(X._now()-this.t0)/1e3;if(J<this.te){var ne,ce=1-(Math.exp(-H*J)-this.lambda_v0)/this.one_ve_v0;this.isModified?(h=0,g=0,x=this.targetOffset.x,D=this.targetOffset.y,M=this.modifiedOffset.x,G=this.modifiedOffset.y,ne={x:Cu(q=ce,h,x,M),y:Cu(q,g,D,G)}):ne={x:this.targetOffset.x*ce,y:this.targetOffset.y*ce};var ue={x:ne.x-this.currentOffset.x,y:ne.y-this.currentOffset.y};this.currentOffset.x+=ue.x,this.currentOffset.y+=ue.y,X.offsetBy(ue),X.move(),this.onNextFrame(function(){return j.inertiaTick()})}else X.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var h=this,g=this.interaction,x=g._now()-this.t0,D=kn(g).smoothEndDuration;if(x<D){var M={x:Iu(x,0,this.targetOffset.x,D),y:Iu(x,0,this.targetOffset.y,D)},G={x:M.x-this.currentOffset.x,y:M.y-this.currentOffset.y};this.currentOffset.x+=G.x,this.currentOffset.y+=G.y,g.offsetBy(G),g.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return h.smoothEndTick()})}else g.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(h){var g=h.pointer,x=h.event,D=h.eventTarget,M=this.interaction;M.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),M.updatePointer(g,x,D,!0),M._doPhase({interaction:M,event:x,phase:"resume"}),te(M.coords.prev,M.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,tr.cancel(this.timeout)}}]),d}();function kn(d){var h=d.interactable,g=d.prepared;return h&&h.options&&g.name&&h.options[g.name].inertia}var Vp={id:"inertia",before:["modifiers","actions"],install:function(d){var h=d.defaults;d.usePlugin(Du),d.usePlugin(xu),d.actions.phases.inertiastart=!0,d.actions.phases.resume=!0,h.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(d){var h=d.interaction;h.inertia=new Yp(h)},"interactions:before-action-end":function(d){var h=d.interaction,g=d.event;return(!h._interacting||h.simulation||!h.inertia.start(g))&&null},"interactions:down":function(d){var h=d.interaction,g=d.eventTarget,x=h.inertia;if(x.active)for(var D=g;y.element(D);){if(D===h.element){x.resume(d);break}D=B(D)}},"interactions:stop":function(d){var h=d.interaction.inertia;h.active&&h.stop()},"interactions:before-action-resume":function(d){var h=d.interaction.modification;h.stop(d),h.start(d,d.interaction.coords.cur.page),h.applyToInteraction(d)},"interactions:before-action-inertiastart":function(d){return d.interaction.modification.setAndApply(d)},"interactions:action-resume":Hr,"interactions:action-inertiastart":Hr,"interactions:after-action-inertiastart":function(d){return d.interaction.modification.restoreInteractionCoords(d)},"interactions:after-action-resume":function(d){return d.interaction.modification.restoreInteractionCoords(d)}}};function Cu(d,h,g,x){var D=1-d;return D*D*h+2*D*d*g+d*d*x}function Iu(d,h,g,x){return-g*(d/=x)*(d-2)+h}var Qp=Vp;function Lu(d,h){for(var g=0;g<h.length;g++){var x=h[g];if(d.immediatePropagationStopped)break;x(d)}}var zu=function(){function d(h){o(this,d),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=re({},h||{})}return u(d,[{key:"fire",value:function(h){var g,x=this.global;(g=this.types[h.type])&&Lu(h,g),!h.propagationStopped&&x&&(g=x[h.type])&&Lu(h,g)}},{key:"on",value:function(h,g){var x=Z(h,g);for(h in x)this.types[h]=Ft(this.types[h]||[],x[h])}},{key:"off",value:function(h,g){var x=Z(h,g);for(h in x){var D=this.types[h];if(D&&D.length)for(var M=0,G=x[h];M<G.length;M++){var q=G[M],j=D.indexOf(q);j!==-1&&D.splice(j,1)}}}},{key:"getRect",value:function(h){return null}}]),d}(),Zp=function(){function d(h){o(this,d),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=h,ve(this,h)}return u(d,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),d}();function Kr(d){return y.object(d)?{capture:!!d.capture,passive:!!d.passive}:{capture:!!d,passive:!1}}function Dn(d,h){return d===h||(typeof d=="boolean"?!!h.capture===d&&!h.passive:!!d.capture==!!h.capture&&!!d.passive==!!h.passive)}var Jp={id:"events",install:function(d){var h,g=[],x={},D=[],M={add:G,remove:q,addDelegate:function(H,J,ne,ce,ue){var de=Kr(ue);if(!x[ne]){x[ne]=[];for(var Ee=0;Ee<D.length;Ee++){var ye=D[Ee];G(ye,ne,j),G(ye,ne,X,!0)}}var Ae=x[ne],Le=St(Ae,function(Te){return Te.selector===H&&Te.context===J});Le||(Le={selector:H,context:J,listeners:[]},Ae.push(Le)),Le.listeners.push({func:ce,options:de})},removeDelegate:function(H,J,ne,ce,ue){var de,Ee=Kr(ue),ye=x[ne],Ae=!1;if(ye)for(de=ye.length-1;de>=0;de--){var Le=ye[de];if(Le.selector===H&&Le.context===J){for(var Te=Le.listeners,De=Te.length-1;De>=0;De--){var ze=Te[De];if(ze.func===ce&&Dn(ze.options,Ee)){Te.splice(De,1),Te.length||(ye.splice(de,1),q(J,ne,j),q(J,ne,X,!0)),Ae=!0;break}}if(Ae)break}}},delegateListener:j,delegateUseCapture:X,delegatedEvents:x,documents:D,targets:g,supportsOptions:!1,supportsPassive:!1};function G(H,J,ne,ce){if(H.addEventListener){var ue=Kr(ce),de=St(g,function(Ee){return Ee.eventTarget===H});de||(de={eventTarget:H,events:{}},g.push(de)),de.events[J]||(de.events[J]=[]),St(de.events[J],function(Ee){return Ee.func===ne&&Dn(Ee.options,ue)})||(H.addEventListener(J,ne,M.supportsOptions?ue:ue.capture),de.events[J].push({func:ne,options:ue}))}}function q(H,J,ne,ce){if(H.addEventListener&&H.removeEventListener){var ue=Wt(g,function(rt){return rt.eventTarget===H}),de=g[ue];if(de&&de.events)if(J!=="all"){var Ee=!1,ye=de.events[J];if(ye){if(ne==="all"){for(var Ae=ye.length-1;Ae>=0;Ae--){var Le=ye[Ae];q(H,J,Le.func,Le.options)}return}for(var Te=Kr(ce),De=0;De<ye.length;De++){var ze=ye[De];if(ze.func===ne&&Dn(ze.options,Te)){H.removeEventListener(J,ne,M.supportsOptions?Te:Te.capture),ye.splice(De,1),ye.length===0&&(delete de.events[J],Ee=!0);break}}}Ee&&!Object.keys(de.events).length&&g.splice(ue,1)}else for(J in de.events)de.events.hasOwnProperty(J)&&q(H,J,"all")}}function j(H,J){for(var ne=Kr(J),ce=new Zp(H),ue=x[H.type],de=pt(H)[0],Ee=de;y.element(Ee);){for(var ye=0;ye<ue.length;ye++){var Ae=ue[ye],Le=Ae.selector,Te=Ae.context;if(Y(Ee,Le)&&L(Te,de)&&L(Te,Ee)){var De=Ae.listeners;ce.currentTarget=Ee;for(var ze=0;ze<De.length;ze++){var rt=De[ze];Dn(rt.options,ne)&&rt.func(ce)}}}Ee=B(Ee)}}function X(H){return j(H,!0)}return(h=d.document)==null||h.createElement("div").addEventListener("test",null,{get capture(){return M.supportsOptions=!0},get passive(){return M.supportsPassive=!0}}),d.events=M,M}},Gi={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(d){for(var h=0,g=Gi.methodOrder;h<g.length;h++){var x=g[h],D=Gi[x](d);if(D)return D}return null},simulationResume:function(d){var h=d.pointerType,g=d.eventType,x=d.eventTarget,D=d.scope;if(!/down|start/i.test(g))return null;for(var M=0,G=D.interactions.list;M<G.length;M++){var q=G[M],j=x;if(q.simulation&&q.simulation.allowResume&&q.pointerType===h)for(;j;){if(j===q.element)return q;j=B(j)}}return null},mouseOrPen:function(d){var h,g=d.pointerId,x=d.pointerType,D=d.eventType,M=d.scope;if(x!=="mouse"&&x!=="pen")return null;for(var G=0,q=M.interactions.list;G<q.length;G++){var j=q[G];if(j.pointerType===x){if(j.simulation&&!Tu(j,g))continue;if(j.interacting())return j;h||(h=j)}}if(h)return h;for(var X=0,H=M.interactions.list;X<H.length;X++){var J=H[X];if(!(J.pointerType!==x||/down/i.test(D)&&J.simulation))return J}return null},hasPointer:function(d){for(var h=d.pointerId,g=0,x=d.scope.interactions.list;g<x.length;g++){var D=x[g];if(Tu(D,h))return D}return null},idle:function(d){for(var h=d.pointerType,g=0,x=d.scope.interactions.list;g<x.length;g++){var D=x[g];if(D.pointers.length===1){var M=D.interactable;if(M&&(!M.options.gesture||!M.options.gesture.enabled))continue}else if(D.pointers.length>=2)continue;if(!D.interacting()&&h===D.pointerType)return D}return null}};function Tu(d,h){return d.pointers.some(function(g){return g.id===h})}var eg=Gi,Oi=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Mu(d,h){return function(g){var x=h.interactions.list,D=Et(g),M=pt(g),G=M[0],q=M[1],j=[];if(/^touch/.test(g.type)){h.prevTouchTime=h.now();for(var X=0,H=g.changedTouches;X<H.length;X++){var J=H[X],ne={pointer:J,pointerId:Ne(J),pointerType:D,eventType:g.type,eventTarget:G,curEventTarget:q,scope:h},ce=Nu(ne);j.push([ne.pointer,ne.eventTarget,ne.curEventTarget,ce])}}else{var ue=!1;if(!W.supportsPointerEvent&&/mouse/.test(g.type)){for(var de=0;de<x.length&&!ue;de++)ue=x[de].pointerType!=="mouse"&&x[de].pointerIsDown;ue=ue||h.now()-h.prevTouchTime<500||g.timeStamp===0}if(!ue){var Ee={pointer:g,pointerId:Ne(g),pointerType:D,eventType:g.type,curEventTarget:q,eventTarget:G,scope:h},ye=Nu(Ee);j.push([Ee.pointer,Ee.eventTarget,Ee.curEventTarget,ye])}}for(var Ae=0;Ae<j.length;Ae++){var Le=j[Ae],Te=Le[0],De=Le[1],ze=Le[2];Le[3][d](Te,g,De,ze)}}}function Nu(d){var h=d.pointerType,g=d.scope,x={interaction:eg.search(d),searchDetails:d};return g.fire("interactions:find",x),x.interaction||g.interactions.new({pointerType:h})}function qi(d,h){var g=d.doc,x=d.scope,D=d.options,M=x.interactions.docEvents,G=x.events,q=G[h];for(var j in x.browser.isIOS&&!D.events&&(D.events={passive:!1}),G.delegatedEvents)q(g,j,G.delegateListener),q(g,j,G.delegateUseCapture,!0);for(var X=D&&D.events,H=0;H<M.length;H++){var J=M[H];q(g,J.type,J.listener,X)}}var tg={id:"core/interactions",install:function(d){for(var h={},g=0;g<Oi.length;g++){var x=Oi[g];h[x]=Mu(x,d)}var D,M=W.pEventTypes;function G(){for(var q=0,j=d.interactions.list;q<j.length;q++){var X=j[q];if(X.pointerIsDown&&X.pointerType==="touch"&&!X._interacting)for(var H=function(){var ce=ne[J];d.documents.some(function(ue){return L(ue.doc,ce.downTarget)})||X.removePointer(ce.pointer,ce.event)},J=0,ne=X.pointers;J<ne.length;J++)H()}}(D=V.PointerEvent?[{type:M.down,listener:G},{type:M.down,listener:h.pointerDown},{type:M.move,listener:h.pointerMove},{type:M.up,listener:h.pointerUp},{type:M.cancel,listener:h.pointerUp}]:[{type:"mousedown",listener:h.pointerDown},{type:"mousemove",listener:h.pointerMove},{type:"mouseup",listener:h.pointerUp},{type:"touchstart",listener:G},{type:"touchstart",listener:h.pointerDown},{type:"touchmove",listener:h.pointerMove},{type:"touchend",listener:h.pointerUp},{type:"touchcancel",listener:h.pointerUp}]).push({type:"blur",listener:function(q){for(var j=0,X=d.interactions.list;j<X.length;j++)X[j].documentBlur(q)}}),d.prevTouchTime=0,d.Interaction=function(q){c(X,q);var j=b(X);function X(){return o(this,X),j.apply(this,arguments)}return u(X,[{key:"pointerMoveTolerance",get:function(){return d.interactions.pointerMoveTolerance},set:function(H){d.interactions.pointerMoveTolerance=H}},{key:"_now",value:function(){return d.now()}}]),X}(Hp),d.interactions={list:[],new:function(q){q.scopeFire=function(X,H){return d.fire(X,H)};var j=new d.Interaction(q);return d.interactions.list.push(j),j},listeners:h,docEvents:D,pointerMoveTolerance:1},d.usePlugin(Eu)},listeners:{"scope:add-document":function(d){return qi(d,"add")},"scope:remove-document":function(d){return qi(d,"remove")},"interactable:unset":function(d,h){for(var g=d.interactable,x=h.interactions.list.length-1;x>=0;x--){var D=h.interactions.list[x];D.interactable===g&&(D.stop(),h.fire("interactions:destroy",{interaction:D}),D.destroy(),h.interactions.list.length>2&&h.interactions.list.splice(x,1))}}},onDocSignal:qi,doOnInteractions:Mu,methodNames:Oi},rg=tg,nr=function(d){return d[d.On=0]="On",d[d.Off=1]="Off",d}(nr||{}),ng=function(){function d(h,g,x,D){o(this,d),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new zu,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=g.actions,this.target=h,this._context=g.context||x,this._win=m(ie(h)?this._context:h),this._doc=this._win.document,this._scopeEvents=D,this.set(g)}return u(d,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(h,g){return y.func(g.onstart)&&this.on("".concat(h,"start"),g.onstart),y.func(g.onmove)&&this.on("".concat(h,"move"),g.onmove),y.func(g.onend)&&this.on("".concat(h,"end"),g.onend),y.func(g.oninertiastart)&&this.on("".concat(h,"inertiastart"),g.oninertiastart),this}},{key:"updatePerActionListeners",value:function(h,g,x){var D,M=this,G=(D=this._actions.map[h])==null?void 0:D.filterEventType,q=function(j){return(G==null||G(j))&&An(j,M._actions)};(y.array(g)||y.object(g))&&this._onOff(nr.Off,h,g,void 0,q),(y.array(x)||y.object(x))&&this._onOff(nr.On,h,x,void 0,q)}},{key:"setPerAction",value:function(h,g){var x=this._defaults;for(var D in g){var M=D,G=this.options[h],q=g[M];M==="listeners"&&this.updatePerActionListeners(h,G.listeners,q),y.array(q)?G[M]=En(q):y.plainObject(q)?(G[M]=re(G[M]||{},_r(q)),y.object(x.perAction[M])&&"enabled"in x.perAction[M]&&(G[M].enabled=q.enabled!==!1)):y.bool(q)&&y.object(x.perAction[M])?G[M].enabled=q:G[M]=q}}},{key:"getRect",value:function(h){return h=h||(y.element(this.target)?this.target:null),y.string(this.target)&&(h=h||this._context.querySelector(this.target)),se(h)}},{key:"rectChecker",value:function(h){var g=this;return y.func(h)?(this.getRect=function(x){var D=re({},h.apply(g,x));return"width"in D||(D.width=D.right-D.left,D.height=D.bottom-D.top),D},this):h===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(h,g){if(ie(g)||y.object(g)){for(var x in this.options[h]=g,this._actions.map)this.options[x][h]=g;return this}return this.options[h]}},{key:"origin",value:function(h){return this._backCompatOption("origin",h)}},{key:"deltaSource",value:function(h){return h==="page"||h==="client"?(this.options.deltaSource=h,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var h=this.target;return y.string(h)?Array.from(this._context.querySelectorAll(h)):y.func(h)&&h.getAllElements?h.getAllElements():y.element(h)?[h]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(h){return this._context===h.ownerDocument||L(this._context,h)}},{key:"testIgnoreAllow",value:function(h,g,x){return!this.testIgnore(h.ignoreFrom,g,x)&&this.testAllow(h.allowFrom,g,x)}},{key:"testAllow",value:function(h,g,x){return!h||!!y.element(x)&&(y.string(h)?K(x,h,g):!!y.element(h)&&L(h,x))}},{key:"testIgnore",value:function(h,g,x){return!(!h||!y.element(x))&&(y.string(h)?K(x,h,g):!!y.element(h)&&L(h,x))}},{key:"fire",value:function(h){return this.events.fire(h),this}},{key:"_onOff",value:function(h,g,x,D,M){y.object(g)&&!y.array(g)&&(D=x,x=null);var G=Z(g,x,M);for(var q in G){q==="wheel"&&(q=W.wheelEvent);for(var j=0,X=G[q];j<X.length;j++){var H=X[j];An(q,this._actions)?this.events[h===nr.On?"on":"off"](q,H):y.string(this.target)?this._scopeEvents[h===nr.On?"addDelegate":"removeDelegate"](this.target,this._context,q,H,D):this._scopeEvents[h===nr.On?"add":"remove"](this.target,q,H,D)}}return this}},{key:"on",value:function(h,g,x){return this._onOff(nr.On,h,g,x)}},{key:"off",value:function(h,g,x){return this._onOff(nr.Off,h,g,x)}},{key:"set",value:function(h){var g=this._defaults;for(var x in y.object(h)||(h={}),this.options=_r(g.base),this._actions.methodDict){var D=x,M=this._actions.methodDict[D];this.options[D]={},this.setPerAction(D,re(re({},g.perAction),g.actions[D])),this[M](h[D])}for(var G in h)G!=="getRect"?y.func(this[G])&&this[G](h[G]):this.rectChecker(h.getRect);return this}},{key:"unset",value:function(){if(y.string(this.target))for(var h in this._scopeEvents.delegatedEvents)for(var g=this._scopeEvents.delegatedEvents[h],x=g.length-1;x>=0;x--){var D=g[x],M=D.selector,G=D.context,q=D.listeners;M===this.target&&G===this._context&&g.splice(x,1);for(var j=q.length-1;j>=0;j--)this._scopeEvents.removeDelegate(this.target,this._context,h,q[j][0],q[j][1])}else this._scopeEvents.remove(this.target,"all")}}]),d}(),ig=function(){function d(h){var g=this;o(this,d),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=h,h.addListeners({"interactable:unset":function(x){var D=x.interactable,M=D.target,G=y.string(M)?g.selectorMap[M]:M[g.scope.id],q=Wt(G,function(j){return j===D});G.splice(q,1)}})}return u(d,[{key:"new",value:function(h,g){g=re(g||{},{actions:this.scope.actions});var x=new this.scope.Interactable(h,g,this.scope.document,this.scope.events);return this.scope.addDocument(x._doc),this.list.push(x),y.string(h)?(this.selectorMap[h]||(this.selectorMap[h]=[]),this.selectorMap[h].push(x)):(x.target[this.scope.id]||Object.defineProperty(h,this.scope.id,{value:[],configurable:!0}),h[this.scope.id].push(x)),this.scope.fire("interactable:new",{target:h,options:g,interactable:x,win:this.scope._win}),x}},{key:"getExisting",value:function(h,g){var x=g&&g.context||this.scope.document,D=y.string(h),M=D?this.selectorMap[h]:h[this.scope.id];if(M)return St(M,function(G){return G._context===x&&(D||G.inContext(h))})}},{key:"forEachMatch",value:function(h,g){for(var x=0,D=this.list;x<D.length;x++){var M=D[x],G=void 0;if((y.string(M.target)?y.element(h)&&Y(h,M.target):h===M.target)&&M.inContext(h)&&(G=g(M)),G!==void 0)return G}}}]),d}(),ag=function(){function d(){var h=this;o(this,d),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=W,this.defaults=_r(Su),this.Eventable=zu,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(x){var D=function M(G,q){var j=x.interactables.getExisting(G,q);return j||((j=x.interactables.new(G,q)).events.global=M.globalEvents),j};return D.getPointerAverage=He,D.getTouchBBox=Xe,D.getTouchDistance=Ye,D.getTouchAngle=ct,D.getElementRect=se,D.getElementClientRect=ae,D.matchesSelector=Y,D.closest=N,D.globalEvents={},D.version="1.10.27",D.scope=x,D.use=function(M,G){return this.scope.usePlugin(M,G),this},D.isSet=function(M,G){return!!this.scope.interactables.get(M,G&&G.context)},D.on=Br(function(M,G,q){if(y.string(M)&&M.search(" ")!==-1&&(M=M.trim().split(/ +/)),y.array(M)){for(var j=0,X=M;j<X.length;j++){var H=X[j];this.on(H,G,q)}return this}if(y.object(M)){for(var J in M)this.on(J,M[J],G);return this}return An(M,this.scope.actions)?this.globalEvents[M]?this.globalEvents[M].push(G):this.globalEvents[M]=[G]:this.scope.events.add(this.scope.document,M,G,{options:q}),this},"The interact.on() method is being deprecated"),D.off=Br(function(M,G,q){if(y.string(M)&&M.search(" ")!==-1&&(M=M.trim().split(/ +/)),y.array(M)){for(var j=0,X=M;j<X.length;j++){var H=X[j];this.off(H,G,q)}return this}if(y.object(M)){for(var J in M)this.off(J,M[J],G);return this}var ne;return An(M,this.scope.actions)?M in this.globalEvents&&(ne=this.globalEvents[M].indexOf(G))!==-1&&this.globalEvents[M].splice(ne,1):this.scope.events.remove(this.scope.document,M,G,q),this},"The interact.off() method is being deprecated"),D.debug=function(){return this.scope},D.supportsTouch=function(){return W.supportsTouch},D.supportsPointerEvent=function(){return W.supportsPointerEvent},D.stop=function(){for(var M=0,G=this.scope.interactions.list;M<G.length;M++)G[M].stop();return this},D.pointerMoveTolerance=function(M){return y.number(M)?(this.scope.interactions.pointerMoveTolerance=M,this):this.scope.interactions.pointerMoveTolerance},D.addDocument=function(M,G){this.scope.addDocument(M,G)},D.removeDocument=function(M){this.scope.removeDocument(M)},D}(this),this.InteractEvent=$i,this.Interactable=void 0,this.interactables=new ig(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(x){return h.removeDocument(x.target)};var g=this;this.Interactable=function(x){c(M,x);var D=b(M);function M(){return o(this,M),D.apply(this,arguments)}return u(M,[{key:"_defaults",get:function(){return g.defaults}},{key:"set",value:function(G){return E(f(M.prototype),"set",this).call(this,G),g.fire("interactable:set",{options:G,interactable:this}),this}},{key:"unset",value:function(){E(f(M.prototype),"unset",this).call(this);var G=g.interactables.list.indexOf(this);G<0||(g.interactables.list.splice(G,1),g.fire("interactable:unset",{interactable:this}))}}]),M}(ng)}return u(d,[{key:"addListeners",value:function(h,g){this.listenerMaps.push({id:g,map:h})}},{key:"fire",value:function(h,g){for(var x=0,D=this.listenerMaps;x<D.length;x++){var M=D[x].map[h];if(M&&M(g,this,h)===!1)return!1}}},{key:"init",value:function(h){return this.isInitialized?this:function(g,x){return g.isInitialized=!0,y.window(x)&&k(x),V.init(x),W.init(x),tr.init(x),g.window=x,g.document=x.document,g.usePlugin(rg),g.usePlugin(Jp),g}(this,h)}},{key:"pluginIsInstalled",value:function(h){var g=h.id;return g?!!this._plugins.map[g]:this._plugins.list.indexOf(h)!==-1}},{key:"usePlugin",value:function(h,g){if(!this.isInitialized)return this;if(this.pluginIsInstalled(h))return this;if(h.id&&(this._plugins.map[h.id]=h),this._plugins.list.push(h),h.install&&h.install(this,g),h.listeners&&h.before){for(var x=0,D=this.listenerMaps.length,M=h.before.reduce(function(q,j){return q[j]=!0,q[Ru(j)]=!0,q},{});x<D;x++){var G=this.listenerMaps[x].id;if(G&&(M[G]||M[Ru(G)]))break}this.listenerMaps.splice(x,0,{id:h.id,map:h.listeners})}else h.listeners&&this.listenerMaps.push({id:h.id,map:h.listeners});return this}},{key:"addDocument",value:function(h,g){if(this.getDocIndex(h)!==-1)return!1;var x=m(h);g=g?re({},g):{},this.documents.push({doc:h,options:g}),this.events.documents.push(h),h!==this.document&&this.events.add(x,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:h,window:x,scope:this,options:g})}},{key:"removeDocument",value:function(h){var g=this.getDocIndex(h),x=m(h),D=this.documents[g].options;this.events.remove(x,"unload",this.onWindowUnload),this.documents.splice(g,1),this.events.documents.splice(g,1),this.fire("scope:remove-document",{doc:h,window:x,scope:this,options:D})}},{key:"getDocIndex",value:function(h){for(var g=0;g<this.documents.length;g++)if(this.documents[g].doc===h)return g;return-1}},{key:"getDocOptions",value:function(h){var g=this.getDocIndex(h);return g===-1?null:this.documents[g].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),d}();function Ru(d){return d&&d.replace(/\/.*$/,"")}var $u=new ag,tt=$u.interactStatic,og=typeof globalThis<"u"?globalThis:window;$u.init(og);var sg=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(d){var h=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(x){var D=x[0],M=x[1];return D in d||M in d}),g=function(x,D){for(var M=d.range,G=d.limits,q=G===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:G,j=d.offset,X=j===void 0?{x:0,y:0}:j,H={range:M,grid:d,x:null,y:null},J=0;J<h.length;J++){var ne=h[J],ce=ne[0],ue=ne[1],de=Math.round((x-X.x)/d[ce]),Ee=Math.round((D-X.y)/d[ue]);H[ce]=Math.max(q.left,Math.min(q.right,de*d[ce]+X.x)),H[ue]=Math.max(q.top,Math.min(q.bottom,Ee*d[ue]+X.y))}return H};return g.grid=d,g.coordFields=h,g}}),ug={id:"snappers",install:function(d){var h=d.interactStatic;h.snappers=re(h.snappers||{},sg),h.createSnapGrid=h.snappers.grid}},lg=ug,cg={start:function(d){var h=d.state,g=d.rect,x=d.edges,D=d.pageCoords,M=h.options,G=M.ratio,q=M.enabled,j=h.options,X=j.equalDelta,H=j.modifiers;G==="preserve"&&(G=g.width/g.height),h.startCoords=re({},D),h.startRect=re({},g),h.ratio=G,h.equalDelta=X;var J=h.linkedEdges={top:x.top||x.left&&!x.bottom,left:x.left||x.top&&!x.right,bottom:x.bottom||x.right&&!x.top,right:x.right||x.bottom&&!x.left};if(h.xIsPrimaryAxis=!(!x.left&&!x.right),h.equalDelta){var ne=(J.left?1:-1)*(J.top?1:-1);h.edgeSign={x:ne,y:ne}}else h.edgeSign={x:J.left?-1:1,y:J.top?-1:1};if(q!==!1&&re(x,J),H!=null&&H.length){var ce=new Ri(d.interaction);ce.copyFrom(d.interaction.modification),ce.prepareStates(H),h.subModification=ce,ce.startAll(r({},d))}},set:function(d){var h=d.state,g=d.rect,x=d.coords,D=h.linkedEdges,M=re({},x),G=h.equalDelta?hg:dg;if(re(d.edges,D),G(h,h.xIsPrimaryAxis,x,g),!h.subModification)return null;var q=re({},g);pe(D,q,{x:x.x-M.x,y:x.y-M.y});var j=h.subModification.setAll(r(r({},d),{},{rect:q,edges:D,pageCoords:x,prevCoords:x,prevRect:q})),X=j.delta;return j.changed&&(G(h,Math.abs(X.x)>Math.abs(X.y),j.coords,j.rect),re(x,j.coords)),j.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function hg(d,h,g){var x=d.startCoords,D=d.edgeSign;h?g.y=x.y+(g.x-x.x)*D.y:g.x=x.x+(g.y-x.y)*D.x}function dg(d,h,g,x){var D=d.startRect,M=d.startCoords,G=d.ratio,q=d.edgeSign;if(h){var j=x.width/G;g.y=M.y+(j-D.height)*q.y}else{var X=x.height*G;g.x=M.x+(X-D.width)*q.x}}var fg=rr(cg,"aspectRatio"),Pu=function(){};Pu._defaults={};var Cn=Pu;function fr(d,h,g){return y.func(d)?ge(d,h.interactable,h.element,[g.x,g.y,h]):ge(d,h.interactable,h.element)}var In={start:function(d){var h=d.rect,g=d.startOffset,x=d.state,D=d.interaction,M=d.pageCoords,G=x.options,q=G.elementRect,j=re({left:0,top:0,right:0,bottom:0},G.offset||{});if(h&&q){var X=fr(G.restriction,D,M);if(X){var H=X.right-X.left-h.width,J=X.bottom-X.top-h.height;H<0&&(j.left+=H,j.right+=H),J<0&&(j.top+=J,j.bottom+=J)}j.left+=g.left-h.width*q.left,j.top+=g.top-h.height*q.top,j.right+=g.right-h.width*(1-q.right),j.bottom+=g.bottom-h.height*(1-q.bottom)}x.offset=j},set:function(d){var h=d.coords,g=d.interaction,x=d.state,D=x.options,M=x.offset,G=fr(D.restriction,g,h);if(G){var q=function(j){return!j||"left"in j&&"top"in j||((j=re({},j)).left=j.x||0,j.top=j.y||0,j.right=j.right||j.left+j.width,j.bottom=j.bottom||j.top+j.height),j}(G);h.x=Math.max(Math.min(q.right-M.right,h.x),q.left+M.left),h.y=Math.max(Math.min(q.bottom-M.bottom,h.y),q.top+M.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},pg=rr(In,"restrict"),Gu={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Ou={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function qu(d,h){for(var g=0,x=["top","left","bottom","right"];g<x.length;g++){var D=x[g];D in d||(d[D]=h[D])}return d}var Xr={noInner:Gu,noOuter:Ou,start:function(d){var h,g=d.interaction,x=d.startOffset,D=d.state,M=D.options;M&&(h=me(fr(M.offset,g,g.coords.start.page))),h=h||{x:0,y:0},D.offset={top:h.y+x.top,left:h.x+x.left,bottom:h.y-x.bottom,right:h.x-x.right}},set:function(d){var h=d.coords,g=d.edges,x=d.interaction,D=d.state,M=D.offset,G=D.options;if(g){var q=re({},h),j=fr(G.inner,x,q)||{},X=fr(G.outer,x,q)||{};qu(j,Gu),qu(X,Ou),g.top?h.y=Math.min(Math.max(X.top+M.top,q.y),j.top+M.top):g.bottom&&(h.y=Math.max(Math.min(X.bottom+M.bottom,q.y),j.bottom+M.bottom)),g.left?h.x=Math.min(Math.max(X.left+M.left,q.x),j.left+M.left):g.right&&(h.x=Math.max(Math.min(X.right+M.right,q.x),j.right+M.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},gg=rr(Xr,"restrictEdges"),vg=re({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(d){}},In.defaults),yg=rr({start:In.start,set:In.set,defaults:vg},"restrictRect"),mg={width:-1/0,height:-1/0},bg={width:1/0,height:1/0},wg=rr({start:function(d){return Xr.start(d)},set:function(d){var h=d.interaction,g=d.state,x=d.rect,D=d.edges,M=g.options;if(D){var G=Ie(fr(M.min,h,d.coords))||mg,q=Ie(fr(M.max,h,d.coords))||bg;g.options={endOnly:M.endOnly,inner:re({},Xr.noInner),outer:re({},Xr.noOuter)},D.top?(g.options.inner.top=x.bottom-G.height,g.options.outer.top=x.bottom-q.height):D.bottom&&(g.options.inner.bottom=x.top+G.height,g.options.outer.bottom=x.top+q.height),D.left?(g.options.inner.left=x.right-G.width,g.options.outer.left=x.right-q.width):D.right&&(g.options.inner.right=x.left+G.width,g.options.outer.right=x.left+q.width),Xr.set(d),g.options=M}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),Fi={start:function(d){var h,g=d.interaction,x=d.interactable,D=d.element,M=d.rect,G=d.state,q=d.startOffset,j=G.options,X=j.offsetWithOrigin?function(ne){var ce=ne.interaction.element,ue=me(ge(ne.state.options.origin,null,null,[ce])),de=ue||oe(ne.interactable,ce,ne.interaction.prepared.name);return de}(d):{x:0,y:0};if(j.offset==="startCoords")h={x:g.coords.start.page.x,y:g.coords.start.page.y};else{var H=ge(j.offset,x,D,[g]);(h=me(H)||{x:0,y:0}).x+=X.x,h.y+=X.y}var J=j.relativePoints;G.offsets=M&&J&&J.length?J.map(function(ne,ce){return{index:ce,relativePoint:ne,x:q.left-M.width*ne.x+h.x,y:q.top-M.height*ne.y+h.y}}):[{index:0,relativePoint:null,x:h.x,y:h.y}]},set:function(d){var h=d.interaction,g=d.coords,x=d.state,D=x.options,M=x.offsets,G=oe(h.interactable,h.element,h.prepared.name),q=re({},g),j=[];D.offsetWithOrigin||(q.x-=G.x,q.y-=G.y);for(var X=0,H=M;X<H.length;X++)for(var J=H[X],ne=q.x-J.x,ce=q.y-J.y,ue=0,de=D.targets.length;ue<de;ue++){var Ee=D.targets[ue],ye=void 0;(ye=y.func(Ee)?Ee(ne,ce,h._proxy,J,ue):Ee)&&j.push({x:(y.number(ye.x)?ye.x:ne)+J.x,y:(y.number(ye.y)?ye.y:ce)+J.y,range:y.number(ye.range)?ye.range:D.range,source:Ee,index:ue,offset:J})}for(var Ae={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},Le=0;Le<j.length;Le++){var Te=j[Le],De=Te.range,ze=Te.x-q.x,rt=Te.y-q.y,qe=Me(ze,rt),ht=qe<=De;De===1/0&&Ae.inRange&&Ae.range!==1/0&&(ht=!1),Ae.target&&!(ht?Ae.inRange&&De!==1/0?qe/De<Ae.distance/Ae.range:De===1/0&&Ae.range!==1/0||qe<Ae.distance:!Ae.inRange&&qe<Ae.distance)||(Ae.target=Te,Ae.distance=qe,Ae.range=De,Ae.inRange=ht,Ae.delta.x=ze,Ae.delta.y=rt)}return Ae.inRange&&(g.x=Ae.target.x,g.y=Ae.target.y),x.closest=Ae,Ae},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},Eg=rr(Fi,"snap"),Ln={start:function(d){var h=d.state,g=d.edges,x=h.options;if(!g)return null;d.state={options:{targets:null,relativePoints:[{x:g.left?0:1,y:g.top?0:1}],offset:x.offset||"self",origin:{x:0,y:0},range:x.range}},h.targetFields=h.targetFields||[["width","height"],["x","y"]],Fi.start(d),h.offsets=d.state.offsets,d.state=h},set:function(d){var h=d.interaction,g=d.state,x=d.coords,D=g.options,M=g.offsets,G={x:x.x-M[0].x,y:x.y-M[0].y};g.options=re({},D),g.options.targets=[];for(var q=0,j=D.targets||[];q<j.length;q++){var X=j[q],H=void 0;if(H=y.func(X)?X(G.x,G.y,h):X){for(var J=0,ne=g.targetFields;J<ne.length;J++){var ce=ne[J],ue=ce[0],de=ce[1];if(ue in H||de in H){H.x=H[ue],H.y=H[de];break}}g.options.targets.push(H)}}var Ee=Fi.set(d);return g.options=D,Ee},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},xg=rr(Ln,"snapSize"),Wi={aspectRatio:fg,restrictEdges:gg,restrict:pg,restrictRect:yg,restrictSize:wg,snapEdges:rr({start:function(d){var h=d.edges;return h?(d.state.targetFields=d.state.targetFields||[[h.left?"left":"right",h.top?"top":"bottom"]],Ln.start(d)):null},set:Ln.set,defaults:re(_r(Ln.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:Eg,snapSize:xg,spring:Cn,avoid:Cn,transform:Cn,rubberband:Cn},Sg={id:"modifiers",install:function(d){var h=d.interactStatic;for(var g in d.usePlugin(xu),d.usePlugin(lg),h.modifiers=Wi,Wi){var x=Wi[g],D=x._defaults,M=x._methods;D._methods=M,d.defaults.perAction[g]=D}}},Ag=Sg,Fu=function(d){c(g,d);var h=b(g);function g(x,D,M,G,q,j){var X;if(o(this,g),ve(v(X=h.call(this,q)),M),M!==D&&ve(v(X),D),X.timeStamp=j,X.originalEvent=M,X.type=x,X.pointerId=Ne(D),X.pointerType=Et(D),X.target=G,X.currentTarget=null,x==="tap"){var H=q.getPointerIndex(D);X.dt=X.timeStamp-q.pointers[H].downTime;var J=X.timeStamp-q.tapTime;X.double=!!q.prevTap&&q.prevTap.type!=="doubletap"&&q.prevTap.target===X.target&&J<500}else x==="doubletap"&&(X.dt=D.timeStamp-q.tapTime,X.double=!0);return X}return u(g,[{key:"_subtractOrigin",value:function(x){var D=x.x,M=x.y;return this.pageX-=D,this.pageY-=M,this.clientX-=D,this.clientY-=M,this}},{key:"_addOrigin",value:function(x){var D=x.x,M=x.y;return this.pageX+=D,this.pageY+=M,this.clientX+=D,this.clientY+=M,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),g}(xt),Yr={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(d){d.pointerEvents=Yr,d.defaults.actions.pointerEvents=Yr.defaults,re(d.actions.phaselessTypes,Yr.types)},listeners:{"interactions:new":function(d){var h=d.interaction;h.prevTap=null,h.tapTime=0},"interactions:update-pointer":function(d){var h=d.down,g=d.pointerInfo;!h&&g.hold||(g.hold={duration:1/0,timeout:null})},"interactions:move":function(d,h){var g=d.interaction,x=d.pointer,D=d.event,M=d.eventTarget;d.duplicate||g.pointerIsDown&&!g.pointerWasMoved||(g.pointerIsDown&&Ui(d),ir({interaction:g,pointer:x,event:D,eventTarget:M,type:"move"},h))},"interactions:down":function(d,h){(function(g,x){for(var D=g.interaction,M=g.pointer,G=g.event,q=g.eventTarget,j=g.pointerIndex,X=D.pointers[j].hold,H=le(q),J={interaction:D,pointer:M,event:G,eventTarget:q,type:"hold",targets:[],path:H,node:null},ne=0;ne<H.length;ne++){var ce=H[ne];J.node=ce,x.fire("pointerEvents:collect-targets",J)}if(J.targets.length){for(var ue=1/0,de=0,Ee=J.targets;de<Ee.length;de++){var ye=Ee[de].eventable.options.holdDuration;ye<ue&&(ue=ye)}X.duration=ue,X.timeout=setTimeout(function(){ir({interaction:D,eventTarget:q,pointer:M,event:G,type:"hold"},x)},ue)}})(d,h),ir(d,h)},"interactions:up":function(d,h){Ui(d),ir(d,h),function(g,x){var D=g.interaction,M=g.pointer,G=g.event,q=g.eventTarget;D.pointerWasMoved||ir({interaction:D,eventTarget:q,pointer:M,event:G,type:"tap"},x)}(d,h)},"interactions:cancel":function(d,h){Ui(d),ir(d,h)}},PointerEvent:Fu,fire:ir,collectEventTargets:Wu,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function ir(d,h){var g=d.interaction,x=d.pointer,D=d.event,M=d.eventTarget,G=d.type,q=d.targets,j=q===void 0?Wu(d,h):q,X=new Fu(G,x,D,M,g,h.now());h.fire("pointerEvents:new",{pointerEvent:X});for(var H={interaction:g,pointer:x,event:D,eventTarget:M,targets:j,type:G,pointerEvent:X},J=0;J<j.length;J++){var ne=j[J];for(var ce in ne.props||{})X[ce]=ne.props[ce];var ue=oe(ne.eventable,ne.node);if(X._subtractOrigin(ue),X.eventable=ne.eventable,X.currentTarget=ne.node,ne.eventable.fire(X),X._addOrigin(ue),X.immediatePropagationStopped||X.propagationStopped&&J+1<j.length&&j[J+1].node!==X.currentTarget)break}if(h.fire("pointerEvents:fired",H),G==="tap"){var de=X.double?ir({interaction:g,pointer:x,event:D,eventTarget:M,type:"doubletap"},h):X;g.prevTap=de,g.tapTime=de.timeStamp}return X}function Wu(d,h){var g=d.interaction,x=d.pointer,D=d.event,M=d.eventTarget,G=d.type,q=g.getPointerIndex(x),j=g.pointers[q];if(G==="tap"&&(g.pointerWasMoved||!j||j.downTarget!==M))return[];for(var X=le(M),H={interaction:g,pointer:x,event:D,eventTarget:M,type:G,path:X,targets:[],node:null},J=0;J<X.length;J++){var ne=X[J];H.node=ne,h.fire("pointerEvents:collect-targets",H)}return G==="hold"&&(H.targets=H.targets.filter(function(ce){var ue,de;return ce.eventable.options.holdDuration===((ue=g.pointers[q])==null||(de=ue.hold)==null?void 0:de.duration)})),H.targets}function Ui(d){var h=d.interaction,g=d.pointerIndex,x=h.pointers[g].hold;x&&x.timeout&&(clearTimeout(x.timeout),x.timeout=null)}var _g=Object.freeze({__proto__:null,default:Yr});function kg(d){var h=d.interaction;h.holdIntervalHandle&&(clearInterval(h.holdIntervalHandle),h.holdIntervalHandle=null)}var Dg={id:"pointer-events/holdRepeat",install:function(d){d.usePlugin(Yr);var h=d.pointerEvents;h.defaults.holdRepeatInterval=0,h.types.holdrepeat=d.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(d,h){return d["pointerEvents:".concat(h)]=kg,d},{"pointerEvents:new":function(d){var h=d.pointerEvent;h.type==="hold"&&(h.count=(h.count||0)+1)},"pointerEvents:fired":function(d,h){var g=d.interaction,x=d.pointerEvent,D=d.eventTarget,M=d.targets;if(x.type==="hold"&&M.length){var G=M[0].eventable.options.holdRepeatInterval;G<=0||(g.holdIntervalHandle=setTimeout(function(){h.pointerEvents.fire({interaction:g,eventTarget:D,type:"hold",pointer:x,event:x},h)},G))}}})},Cg=Dg,Ig={id:"pointer-events/interactableTargets",install:function(d){var h=d.Interactable;h.prototype.pointerEvents=function(x){return re(this.events.options,x),this};var g=h.prototype._backCompatOption;h.prototype._backCompatOption=function(x,D){var M=g.call(this,x,D);return M===this&&(this.events.options[x]=D),M}},listeners:{"pointerEvents:collect-targets":function(d,h){var g=d.targets,x=d.node,D=d.type,M=d.eventTarget;h.interactables.forEachMatch(x,function(G){var q=G.events,j=q.options;q.types[D]&&q.types[D].length&&G.testIgnoreAllow(j,x,M)&&g.push({node:x,eventable:q,props:{interactable:G}})})},"interactable:new":function(d){var h=d.interactable;h.events.getRect=function(g){return h.getRect(g)}},"interactable:set":function(d,h){var g=d.interactable,x=d.options;re(g.events.options,h.pointerEvents.defaults),re(g.events.options,x.pointerEvents||{})}}},Lg=Ig,zg={id:"pointer-events",install:function(d){d.usePlugin(_g),d.usePlugin(Cg),d.usePlugin(Lg)}},Tg=zg,Mg={id:"reflow",install:function(d){var h=d.Interactable;d.actions.phases.reflow=!0,h.prototype.reflow=function(g){return function(x,D,M){for(var G=x.getAllElements(),q=M.window.Promise,j=q?[]:null,X=function(){var J=G[H],ne=x.getRect(J);if(!ne)return 1;var ce,ue=St(M.interactions.list,function(ye){return ye.interacting()&&ye.interactable===x&&ye.element===J&&ye.prepared.name===D.name});if(ue)ue.move(),j&&(ce=ue._reflowPromise||new q(function(ye){ue._reflowResolve=ye}));else{var de=Ie(ne),Ee=function(ye){return{coords:ye,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:de.x,y:de.y},client:{x:de.x,y:de.y},timeStamp:M.now()});ce=function(ye,Ae,Le,Te,De){var ze=ye.interactions.new({pointerType:"reflow"}),rt={interaction:ze,event:De,pointer:De,eventTarget:Le,phase:"reflow"};ze.interactable=Ae,ze.element=Le,ze.prevEvent=De,ze.updatePointer(De,De,Le,!0),Re(ze.coords.delta),zi(ze.prepared,Te),ze._doPhase(rt);var qe=ye.window,ht=qe.Promise,At=ht?new ht(function(Bt){ze._reflowResolve=Bt}):void 0;return ze._reflowPromise=At,ze.start(Te,Ae,Le),ze._interacting?(ze.move(rt),ze.end(De)):(ze.stop(),ze._reflowResolve()),ze.removePointer(De,De),At}(M,x,J,D,Ee)}j&&j.push(ce)},H=0;H<G.length&&!X();H++);return j&&q.all(j).then(function(){return x})}(this,g,d)}},listeners:{"interactions:stop":function(d,h){var g=d.interaction;g.pointerType==="reflow"&&(g._reflowResolve&&g._reflowResolve(),function(x,D){x.splice(x.indexOf(D),1)}(h.interactions.list,g))}}},Ng=Mg;if(tt.use(Eu),tt.use(Du),tt.use(Tg),tt.use(Qp),tt.use(Ag),tt.use(Op),tt.use(Cp),tt.use(Lp),tt.use(Ng),tt.default=tt,a(n)==="object"&&n)try{n.exports=tt}catch{}return tt.default=tt,tt})}(hn,hn.exports)),hn.exports}var Bx=jx();const Hx=st(Bx),yt=document;class Kx{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.metric=new Sp(e),this.panels={info:yt.getElementById("floating-panel"),tools:yt.getElementById("tools-panel"),graphs:yt.getElementById("graphs-panel"),faces:yt.getElementById("face-panel")},this.handles={info:"#info",tools:"#tools",graphs:"#graphs",faces:"#faces"},this.addEventListeners(),this.makePanelsDraggable(),this.registerToolListeners(),this.setupContextMenu()}init(){this.togglePanel("info","#panel-btn .check",this.settings.info_panel),this.togglePanel("tools","#tools-btn .check",this.settings.tools_panel),this.togglePanel("graphs","#graphs-btn .check",this.settings.graphs_panel),this.togglePanel("faces","#faces-btn .check",this.settings.face_panel)}setupContextMenu(){const e=yt.getElementById("custom-context-menu");yt.addEventListener("contextmenu",t=>{t.preventDefault();const{offsetWidth:r,offsetHeight:a}=e,{innerWidth:o,innerHeight:s}=window;let{pageX:u,pageY:l}=t;u+r>o&&(u-=r),l+a>s&&(l-=a),Object.assign(e.style,{left:`${u}px`,top:`${l}px`,display:"block"})}),yt.addEventListener("click",()=>{e.style.display="none"})}togglePanel(e,t,r){const a=this.panels[e],o=yt.querySelector(t);o==null||o.classList.toggle("hidden",!r),a&&(a.style.display=r?"flex":"none",r||this.resetPanel(a))}resetPanel(e){e.style.transform="translate(0px, 0px)",e.setAttribute("data-x",0),e.setAttribute("data-y",0)}addEventListeners(){const e=(r,a)=>{var o;(o=yt.querySelector(r))==null||o.addEventListener("click",()=>{this.eventBus.emit("toggleSetting",{key:a})})};e("#floating-panel .close","info_panel"),e("#tools-panel .close","tools_panel"),e("#graphs-panel .close","graphs_panel"),e("#face-panel .close","face_panel");const t=yt.querySelector("#floating-panel .max");t==null||t.addEventListener("click",()=>{var r;this.resetPanel(this.panels.info),(r=yt.getElementById("floating-panel"))==null||r.classList.toggle("MAX")})}makePanelsDraggable(){Object.entries(this.panels).forEach(([e,t])=>{const r=this.handles[e];t&&r&&this.makeDraggable(t,r)})}makeDraggable(e,t){Hx(e).draggable({allowFrom:t,listeners:{move(r){const a=r.target,o=(parseFloat(a.getAttribute("data-x"))||0)+r.dx,s=(parseFloat(a.getAttribute("data-y"))||0)+r.dy;a.style.transform=`translate(${o}px, ${s}px)`,a.setAttribute("data-x",o),a.setAttribute("data-y",s)}}})}registerToolListeners(){Object.entries({scale:"scale",tree:"tree",force:"forceSimulation",panning:"panning",select:"select",component:"component","color-picker":"colorPicker"}).forEach(([t,r])=>{var a;(a=yt.querySelector(`widgets #tools-panel .${t}`))==null||a.addEventListener("click",()=>{this.eventBus.emit("toggleSetting",{key:r})})})}}class Xx{constructor(e,t){this.app=e,this.settings=e.settings,this.canvas=e.canvas,this.ctx=e._canvas.ctx,this.selection={x:0,y:0,width:0,height:0,active:!1},this.scale={isDragging:!1,active:!1,activeHandle:null,scaleData:{},rect:{x:100,y:100,width:200,height:150},prevMouse:{x:0,y:0},offsetX:0,offsetY:0,handleSize:10,handles:["nw","n","ne","e","se","s","sw","w"],cursorMap:{nw:"nwse-resize",n:"ns-resize",ne:"nesw-resize",e:"ew-resize",se:"nwse-resize",s:"ns-resize",sw:"nesw-resize",w:"ew-resize"}}}init(){this.canvas.addEventListener("mousedown",this.startSelection.bind(this)),this.canvas.addEventListener("mousemove",this.updateSelection.bind(this)),this.canvas.addEventListener("mouseup",this.endSelection.bind(this))}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),(this.settings.select||this.settings.scale)&&(this.selection.active&&this.drawSelect(this.selection),this.settings.scale&&this.drawScale())}drawSelect(e){if(!e)return;const t=this.ctx;t.fillStyle="rgba(0, 0, 0, 0.1)",t.fillRect(e.x,e.y,e.width,e.height),t.strokeStyle="rgba(0, 0, 255, 0.7)",t.lineWidth=2,t.setLineDash([5,5]),t.strokeRect(e.x,e.y,e.width,e.height),t.setLineDash([])}drawScale(){this.scale.active&&this.drawScaleBox(this.scale.rect,this.ctx)}startSelection(e){if(this.settings.select||this.settings.scale){const[t,r]=mt(e,this.canvas);if(this.selection.x=t,this.selection.y=r,this.selection.width=0,this.selection.height=0,this.selection.active=!this.scale.active,this.settings.scale&&this.scale.active){const[a,o]=mt(e);if(this.scale.prevMouse={x:a,y:o},this.scale.activeHandle=this.hitTestHandle(a,o),this.scale.activeHandle)return;a>=this.scale.rect.x&&a<=this.scale.rect.x+this.scale.rect.width&&o>=this.scale.rect.y&&o<=this.scale.rect.y+this.scale.rect.height&&(this.scale.isDragging=!0,this.scale.offsetX=a-this.scale.rect.x,this.scale.offsetY=o-this.scale.rect.y),this.app.graphManager.saveGraphState()}}else this.selection.active=!1,this.scale.active=!1}updateSelection(e){const t=this.selection,r=this.scale.rect,a=this.app.graphManager.graph.getSelectedNodes();if(t.active&&!this.scale.active){const[o,s]=mt(e,this.canvas);t.width=o-t.x,t.height=s-t.y;return}if(this.scale.active){const[o,s]=mt(e);if(this.scale.activeHandle){this.resizeRect(this.scale.activeHandle,o,s);for(let l of a)this.app.graphManager.graph.updateNodeAttributes(l,c=>({...c,x:r.x+r.width*this.scale.scaleData[l].x,y:r.y+r.height*this.scale.scaleData[l].y}));return}if(this.scale.isDragging){this.scale.rect.x=o-this.scale.offsetX,this.scale.rect.y=s-this.scale.offsetY;const l=o-this.scale.prevMouse.x,c=s-this.scale.prevMouse.y;for(let f of a)this.app.graphManager.graph.updateNodeAttributes(f,p=>({...p,x:p.x+l,y:p.y+c}));this.scale.prevMouse={x:o,y:s};return}const u=this.hitTestHandle(o,s);u?this.canvas.style.cursor=this.scale.cursorMap[u]:o>=this.scale.rect.x&&o<=this.scale.rect.x+this.scale.rect.width&&s>=this.scale.rect.y&&s<=this.scale.rect.y+this.scale.rect.height?this.canvas.style.cursor="move":this.canvas.style.cursor="default"}}endSelection(e){this.selection.active=!1,this.scale.isDragging=!1,this.scale.activeHandle=null,this.pointsInRect(this.selection).forEach(o=>{this.app.graphManager.graph.toggleNodeSelection(o)}),this.linesInRect(this.selection).forEach(o=>{this.app.graphManager.graph.toggleEdgeSelection(o)});const a=this.app.graphManager.graph.getSelectedNodes();this.settings.scale&&a.length>0&&!this.scale.active&&(this.scale.active=!0,this.scale.rect=Yx(this.app.graphManager.graph,a,this.settings.node_radius),this.scaleData={},a.forEach(o=>{const s=this.app.graphManager.graph.getNodeAttributes(o);this.scale.scaleData[o]={id:o,x:(s.x-this.scale.rect.x)/this.scale.rect.width,y:(s.y-this.scale.rect.y)/this.scale.rect.height}}))}pointsInRect(e){const[t,r,a,o]=Jd(e);return this.app.graphManager.graph.filterNodes((s,u)=>Cs(u.x,u.y,t,r,a,o))}linesInRect(e){const t=Jd(e);return this.app.graphManager.graph.filterEdges((r,a,o,s,u,l)=>this.lineIntersectsRect([u.x,u.y,l.x,l.y],t))}lineIntersectsRect(e,t){let[r,a,o,s]=e,[u,l,c,f]=t;const p=this.settings.node_radius/2+20;return!!(ef([r,a,o,s],[u,l,c,f])||ef([r,a,o,s],[u,f,c,l])||Cs(r,a,u+p,l+p,c-p,f-p)||Cs(o,s,u+p,l+p,c-p,f-p))}drawScaleBox(e,t){e&&(t.fillStyle="#cce5ff20",t.strokeStyle="#3399ff",t.lineWidth=2,t.fillRect(e.x,e.y,e.width,e.height),t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="#fff",t.strokeStyle="#000",this.scale.handles.forEach(r=>{const[a,o]=this.getHandlePosition(r);t.fillRect(a,o,this.scale.handleSize,this.scale.handleSize),t.strokeRect(a,o,this.scale.handleSize,this.scale.handleSize)}))}getHandlePosition(e){const{x:t,y:r,width:a,height:o}=this.scale.rect,s=this.scale.handleSize/2;switch(e){case"nw":return[t-s,r-s];case"n":return[t+a/2-s,r-s];case"ne":return[t+a-s,r-s];case"e":return[t+a-s,r+o/2-s];case"se":return[t+a-s,r+o-s];case"s":return[t+a/2-s,r+o-s];case"sw":return[t-s,r+o-s];case"w":return[t-s,r+o/2-s]}}hitTestHandle(e,t){return this.scale.handles.find(r=>{const[a,o]=this.getHandlePosition(r);return e>=a&&e<=a+this.scale.handleSize&&t>=o&&t<=o+this.scale.handleSize})}resizeRect(e,t,r){const o=t-this.scale.prevMouse.x,s=r-this.scale.prevMouse.y;let{x:u,y:l,width:c,height:f}=this.scale.rect;switch(e){case"nw":u+=o,l+=s,c-=o,f-=s;break;case"n":l+=s,f-=s;break;case"ne":l+=s,c+=o,f-=s;break;case"e":c+=o;break;case"se":c+=o,f+=s;break;case"s":f+=s;break;case"sw":u+=o,c-=o,f+=s;break;case"w":u+=o,c-=o;break}if(c<20){const p=20-c;e.includes("w")&&(u-=p),c=20}if(f<20){const p=20-f;e.includes("n")&&(l-=p),f=20}this.scale.rect.x=u,this.scale.rect.y=l,this.scale.rect.width=c,this.scale.rect.height=f,this.scale.prevMouse={x:t,y:r}}}function Cs(n,e,t,r,a,o){return n>=t&&n<=a&&e>=r&&e<=o}function Jd(n){const e=Math.min(n.x,n.x+n.width),t=Math.min(n.y,n.y+n.height),r=Math.max(n.x,n.x+n.width),a=Math.max(n.y,n.y+n.height);return[e,t,r,a]}function ef(n,e){var t,r,a;const[o,s,u,l]=n,[c,f,p,v]=e;return t=(u-o)*(v-f)-(p-c)*(l-s),t===0?!1:(a=((v-f)*(p-o)+(c-p)*(v-s))/t,r=((s-l)*(p-o)+(u-o)*(v-s))/t,0<a&&a<1&&0<r&&r<1)}function Yx(n,e,t){if(!e.length)return null;let r=1/0,a=1/0,o=-1/0,s=-1/0;e.forEach(l=>{const c=n.getNodeAttributes(l);c.x<r&&(r=c.x),c.y<a&&(a=c.y),c.x>o&&(o=c.x),c.y>s&&(s=c.y)});const u=t*1.5;return{x:r-u,y:a-u,width:o-r+2*u,height:s-a+2*u}}var Is={exports:{}};/*! Pickr 1.9.1 MIT | https://github.com/Simonwep/pickr */var tf;function Vx(){return tf||(tf=1,function(n,e){(function(t,r){n.exports=r()})(self,()=>(()=>{var t={d:(W,L)=>{for(var N in L)t.o(L,N)&&!t.o(W,N)&&Object.defineProperty(W,N,{enumerable:!0,get:L[N]})},o:(W,L)=>Object.prototype.hasOwnProperty.call(W,L),r:W=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(W,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(W,"__esModule",{value:!0})}},r={};t.d(r,{default:()=>V});var a={};function o(W,L,N,B,Y={}){L instanceof HTMLCollection||L instanceof NodeList?L=Array.from(L):Array.isArray(L)||(L=[L]),Array.isArray(N)||(N=[N]);for(const U of L)for(const F of N)U[W](F,B,{capture:!1,...Y});return Array.prototype.slice.call(arguments,1)}t.r(a),t.d(a,{adjustableInputNumbers:()=>v,createElementFromString:()=>l,createFromTemplate:()=>c,eventPath:()=>f,off:()=>u,on:()=>s,resolveElement:()=>p});const s=o.bind(null,"addEventListener"),u=o.bind(null,"removeEventListener");function l(W){const L=document.createElement("div");return L.innerHTML=W.trim(),L.firstElementChild}function c(W){const L=(B,Y)=>{const U=B.getAttribute(Y);return B.removeAttribute(Y),U},N=(B,Y={})=>{const U=L(B,":obj"),F=L(B,":ref"),K=U?Y[U]={}:Y;F&&(Y[F]=B);for(const ee of Array.from(B.children)){const ae=L(ee,":arr"),se=N(ee,ae?{}:K);ae&&(K[ae]||(K[ae]=[])).push(Object.keys(se).length?se:ee)}return Y};return N(l(W))}function f(W){let L=W.path||W.composedPath&&W.composedPath();if(L)return L;let N=W.target.parentElement;for(L=[W.target,N];N=N.parentElement;)L.push(N);return L.push(document,window),L}function p(W){return W instanceof Element?W:typeof W=="string"?W.split(/>>/g).reduce((L,N,B,Y)=>(L=L.querySelector(N),B<Y.length-1?L.shadowRoot:L),document):null}function v(W,L=N=>N){function N(B){const Y=[.001,.01,.1][Number(B.shiftKey||2*B.ctrlKey)]*(B.deltaY<0?1:-1);let U=0,F=W.selectionStart;W.value=W.value.replace(/[\d.]+/g,(K,ee)=>ee<=F&&ee+K.length>=F?(F=ee,L(Number(K),Y,U)):(U++,K)),W.focus(),W.setSelectionRange(F,F),B.preventDefault(),W.dispatchEvent(new Event("input"))}s(W,"focus",()=>s(window,"wheel",N,{passive:!1})),s(W,"blur",()=>u(window,"wheel",N))}const{min:b,max:E,floor:S,round:A}=Math;function _(W,L,N){L/=100,N/=100;const B=S(W=W/360*6),Y=W-B,U=N*(1-L),F=N*(1-Y*L),K=N*(1-(1-Y)*L),ee=B%6;return[255*[N,F,U,U,K,N][ee],255*[K,N,N,F,U,U][ee],255*[U,U,K,N,N,F][ee]]}function w(W,L,N){const B=(2-(L/=100))*(N/=100)/2;return B!==0&&(L=B===1?0:B<.5?L*N/(2*B):L*N/(2-2*B)),[W,100*L,100*B]}function k(W,L,N){const B=b(W/=255,L/=255,N/=255),Y=E(W,L,N),U=Y-B;let F,K;if(U===0)F=K=0;else{K=U/Y;const ee=((Y-W)/6+U/2)/U,ae=((Y-L)/6+U/2)/U,se=((Y-N)/6+U/2)/U;W===Y?F=se-ae:L===Y?F=1/3+ee-se:N===Y&&(F=2/3+ae-ee),F<0?F+=1:F>1&&(F-=1)}return[360*F,100*K,100*Y]}function m(W,L,N,B){return L/=100,N/=100,[...k(255*(1-b(1,(W/=100)*(1-(B/=100))+B)),255*(1-b(1,L*(1-B)+B)),255*(1-b(1,N*(1-B)+B)))]}function C(W,L,N){L/=100;const B=2*(L*=(N/=100)<.5?N:1-N)/(N+L)*100,Y=100*(N+L);return[W,isNaN(B)?0:B,Y]}function $(W){return k(...W.match(/.{2}/g).map(L=>parseInt(L,16)))}function y(W){W=W.match(/^[a-zA-Z]+$/)?function(Y){if(Y.toLowerCase()==="black")return"#000";const U=document.createElement("canvas").getContext("2d");return U.fillStyle=Y,U.fillStyle==="#000"?null:U.fillStyle}(W):W;const L={cmyk:/^cmyk\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)/i,rgba:/^rgba?\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D*?(([\d.]+)(%?)|$)/i,hsla:/^hsla?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hsva:/^hsva?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},N=Y=>Y.map(U=>/^(|\d+)\.\d+|\d+$/.test(U)?Number(U):void 0);let B;e:for(const Y in L)if(B=L[Y].exec(W))switch(Y){case"cmyk":{const[,U,F,K,ee]=N(B);if(U>100||F>100||K>100||ee>100)break e;return{values:m(U,F,K,ee),type:Y}}case"rgba":{let[,U,,F,,K,,,ee]=N(B);if(U=B[2]==="%"?U/100*255:U,F=B[4]==="%"?F/100*255:F,K=B[6]==="%"?K/100*255:K,ee=B[9]==="%"?ee/100:ee,U>255||F>255||K>255||ee<0||ee>1)break e;return{values:[...k(U,F,K),ee],a:ee,type:Y}}case"hexa":{let[,U]=B;U.length!==4&&U.length!==3||(U=U.split("").map(ee=>ee+ee).join(""));const F=U.substring(0,6);let K=U.substring(6);return K=K?parseInt(K,16)/255:void 0,{values:[...$(F),K],a:K,type:Y}}case"hsla":{let[,U,F,K,,ee]=N(B);if(ee=B[6]==="%"?ee/100:ee,U>360||F>100||K>100||ee<0||ee>1)break e;return{values:[...C(U,F,K),ee],a:ee,type:Y}}case"hsva":{let[,U,F,K,,ee]=N(B);if(ee=B[6]==="%"?ee/100:ee,U>360||F>100||K>100||ee<0||ee>1)break e;return{values:[U,F,K,ee],a:ee,type:Y}}}return{values:null,type:null}}function I(W=0,L=0,N=0,B=1){const Y=(F,K)=>(ee=-1)=>K(~ee?F.map(ae=>Number(ae.toFixed(ee))):F),U={h:W,s:L,v:N,a:B,toHSVA(){const F=[U.h,U.s,U.v,U.a];return F.toString=Y(F,K=>`hsva(${K[0]}, ${K[1]}%, ${K[2]}%, ${U.a})`),F},toHSLA(){const F=[...w(U.h,U.s,U.v),U.a];return F.toString=Y(F,K=>`hsla(${K[0]}, ${K[1]}%, ${K[2]}%, ${U.a})`),F},toRGBA(){const F=[..._(U.h,U.s,U.v),U.a];return F.toString=Y(F,K=>`rgba(${K[0]}, ${K[1]}, ${K[2]}, ${U.a})`),F},toCMYK(){const F=function(K,ee,ae){const se=_(K,ee,ae),le=se[0]/255,ie=se[1]/255,re=se[2]/255,he=b(1-le,1-ie,1-re);return[100*(he===1?0:(1-le-he)/(1-he)),100*(he===1?0:(1-ie-he)/(1-he)),100*(he===1?0:(1-re-he)/(1-he)),100*he]}(U.h,U.s,U.v);return F.toString=Y(F,K=>`cmyk(${K[0]}%, ${K[1]}%, ${K[2]}%, ${K[3]}%)`),F},toHEXA(){const F=function(ee,ae,se){return _(ee,ae,se).map(le=>A(le).toString(16).padStart(2,"0"))}(U.h,U.s,U.v),K=U.a>=1?"":Number((255*U.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return K&&F.push(K),F.toString=()=>`#${F.join("").toUpperCase()}`,F},clone:()=>I(U.h,U.s,U.v,U.a)};return U}const z=W=>Math.max(Math.min(W,1),0);function T(W){const L={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},W),_keyboard(U){const{options:F}=L,{type:K,key:ee}=U;if(document.activeElement===F.wrapper){const{lock:ae}=L.options,se=ee==="ArrowUp",le=ee==="ArrowRight",ie=ee==="ArrowDown",re=ee==="ArrowLeft";if(K==="keydown"&&(se||le||ie||re)){let he=0,ge=0;ae==="v"?he=se||le?1:-1:ae==="h"?he=se||le?-1:1:(ge=se?-1:ie?1:0,he=re?-1:le?1:0),L.update(z(L.cache.x+.01*he),z(L.cache.y+.01*ge)),U.preventDefault()}else ee.startsWith("Arrow")&&(L.options.onstop(),U.preventDefault())}},_tapstart(U){s(document,["mouseup","touchend","touchcancel"],L._tapstop),s(document,["mousemove","touchmove"],L._tapmove),U.cancelable&&U.preventDefault(),L._tapmove(U)},_tapmove(U){const{options:F,cache:K}=L,{lock:ee,element:ae,wrapper:se}=F,le=se.getBoundingClientRect();let ie=0,re=0;if(U){const me=U&&U.touches&&U.touches[0];ie=U?(me||U).clientX:0,re=U?(me||U).clientY:0,ie<le.left?ie=le.left:ie>le.left+le.width&&(ie=le.left+le.width),re<le.top?re=le.top:re>le.top+le.height&&(re=le.top+le.height),ie-=le.left,re-=le.top}else K&&(ie=K.x*le.width,re=K.y*le.height);ee!=="h"&&(ae.style.left=`calc(${ie/le.width*100}% - ${ae.offsetWidth/2}px)`),ee!=="v"&&(ae.style.top=`calc(${re/le.height*100}% - ${ae.offsetHeight/2}px)`),L.cache={x:ie/le.width,y:re/le.height};const he=z(ie/le.width),ge=z(re/le.height);switch(ee){case"v":return F.onchange(he);case"h":return F.onchange(ge);default:return F.onchange(he,ge)}},_tapstop(){L.options.onstop(),u(document,["mouseup","touchend","touchcancel"],L._tapstop),u(document,["mousemove","touchmove"],L._tapmove)},trigger(){L._tapmove()},update(U=0,F=0){const{left:K,top:ee,width:ae,height:se}=L.options.wrapper.getBoundingClientRect();L.options.lock==="h"&&(F=U),L._tapmove({clientX:K+ae*U,clientY:ee+se*F})},destroy(){const{options:U,_tapstart:F,_keyboard:K}=L;u(document,["keydown","keyup"],K),u([U.wrapper,U.element],"mousedown",F),u([U.wrapper,U.element],"touchstart",F,{passive:!1})}},{options:N,_tapstart:B,_keyboard:Y}=L;return s([N.wrapper,N.element],"mousedown",B),s([N.wrapper,N.element],"touchstart",B,{passive:!1}),s(document,["keydown","keyup"],Y),L}function P(W={}){W=Object.assign({onchange:()=>0,className:"",elements:[]},W);const L=s(W.elements,"click",N=>{W.elements.forEach(B=>B.classList[N.target===B?"add":"remove"](W.className)),W.onchange(N),N.stopPropagation()});return{destroy:()=>u(...L)}}const O={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},R=(W,L,N)=>{const B=typeof W!="object"||W instanceof HTMLElement?{reference:W,popper:L,...N}:W;return{update(Y=B){const{reference:U,popper:F}=Object.assign(B,Y);if(!F||!U)throw new Error("Popper- or reference-element missing.");return((K,ee,ae)=>{const{container:se,arrow:le,margin:ie,padding:re,position:he,variantFlipOrder:ge,positionFlipOrder:me}={container:document.documentElement.getBoundingClientRect(),...O,...ae},{left:Ie,top:pe}=ee.style;ee.style.left="0",ee.style.top="0";const oe=K.getBoundingClientRect(),Z=ee.getBoundingClientRect(),Se={t:oe.top-Z.height-ie,b:oe.bottom+ie,r:oe.right+ie,l:oe.left-Z.width-ie},Me={vs:oe.left,vm:oe.left+oe.width/2-Z.width/2,ve:oe.left+oe.width-Z.width,hs:oe.top,hm:oe.bottom-oe.height/2-Z.height/2,he:oe.bottom-Z.height},[xe,ve="middle"]=he.split("-"),te=me[xe],Re=ge[ve],{top:Oe,left:Pe,bottom:Fe,right:Ne}=se;for(const Ge of te){const We=Ge==="t"||Ge==="b";let He=Se[Ge];const[Xe,Ye]=We?["top","left"]:["left","top"],[ct,Et]=We?[Z.height,Z.width]:[Z.width,Z.height],[pt,xt]=We?[Fe,Ne]:[Ne,Fe],[Ft,En]=We?[Oe,Pe]:[Pe,Oe];if(!(He<Ft||He+ct+re>pt))for(const Wt of Re){let St=Me[(We?"v":"h")+Wt];if(!(St<En||St+Et+re>xt)){if(St-=Z[Ye],He-=Z[Xe],ee.style[Ye]=`${St}px`,ee.style[Xe]=`${He}px`,le){const zt=We?oe.width/2:oe.height/2,hr=Et/2,Ar=zt>hr,xn=St+{s:Ar?hr:zt,m:hr,e:Ar?hr:Et-zt}[Wt],jr=He+{t:ct,b:0,r:0,l:ct}[Ge];le.style[Ye]=`${xn}px`,le.style[Xe]=`${jr}px`}return Ge+Wt}}}return ee.style.left=Ie,ee.style.top=pe,null})(U,F,B)}}},Q=class Q{constructor(L){Qe(this,"_initializingActive",!0);Qe(this,"_recalc",!0);Qe(this,"_nanopop",null);Qe(this,"_root",null);Qe(this,"_color",I());Qe(this,"_lastColor",I());Qe(this,"_swatchColors",[]);Qe(this,"_setupAnimationFrame",null);Qe(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]});this.options=L=Object.assign({...Q.DEFAULT_OPTIONS},L);const{swatches:N,components:B,theme:Y,sliders:U,lockOpacity:F,padding:K}=L;["nano","monolith"].includes(Y)&&!U&&(L.sliders="h"),B.interaction||(B.interaction={});const{preview:ee,opacity:ae,hue:se,palette:le}=B;B.opacity=!F&&ae,B.palette=le||ee||ae||se,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),N&&N.length&&N.forEach(ge=>this.addSwatch(ge));const{button:ie,app:re}=this._root;this._nanopop=R(ie,re,{margin:K}),ie.setAttribute("role","button"),ie.setAttribute("aria-label",this._t("btn:toggle"));const he=this;this._setupAnimationFrame=requestAnimationFrame(function ge(){if(!re.offsetWidth)return requestAnimationFrame(ge);he.setColor(L.default),he._rePositioningPicker(),L.defaultRepresentation&&(he._representation=L.defaultRepresentation,he.setColorRepresentation(he._representation)),L.showAlways&&he.show(),he._initializingActive=!1,he._emit("init")})}_preBuild(){const{options:L}=this;for(const N of["el","container"])L[N]=p(L[N]);this._root=(N=>{const{components:B,useAsButton:Y,inline:U,appClass:F,theme:K,lockOpacity:ee}=N.options,ae=re=>re?"":'style="display:none" hidden',se=re=>N._t(re),le=c(`
      <div :ref="root" class="pickr">

        ${Y?"":'<button type="button" :ref="button" class="pcr-button"></button>'}

        <div :ref="app" class="pcr-app ${F||""}" data-theme="${K}" ${U?'style="position: unset"':""} aria-label="${se("ui:dialog")}" role="window">
          <div class="pcr-selection" ${ae(B.palette)}>
            <div :obj="preview" class="pcr-color-preview" ${ae(B.preview)}>
              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${se("btn:last-color")}"></button>
              <div :ref="currentColor" class="pcr-current-color"></div>
            </div>

            <div :obj="palette" class="pcr-color-palette">
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${se("aria:palette")}" role="listbox"></div>
            </div>

            <div :obj="hue" class="pcr-color-chooser" ${ae(B.hue)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${se("aria:hue")}" role="slider"></div>
            </div>

            <div :obj="opacity" class="pcr-color-opacity" ${ae(B.opacity)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${se("aria:opacity")}" role="slider"></div>
            </div>
          </div>

          <div class="pcr-swatches ${B.palette?"":"pcr-last"}" :ref="swatches"></div>

          <div :obj="interaction" class="pcr-interaction" ${ae(Object.keys(B.interaction).length)}>
            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${ae(B.interaction.input)} aria-label="${se("aria:input")}">

            <input :arr="options" class="pcr-type" data-type="HEXA" value="${ee?"HEX":"HEXA"}" type="button" ${ae(B.interaction.hex)}>
            <input :arr="options" class="pcr-type" data-type="RGBA" value="${ee?"RGB":"RGBA"}" type="button" ${ae(B.interaction.rgba)}>
            <input :arr="options" class="pcr-type" data-type="HSLA" value="${ee?"HSL":"HSLA"}" type="button" ${ae(B.interaction.hsla)}>
            <input :arr="options" class="pcr-type" data-type="HSVA" value="${ee?"HSV":"HSVA"}" type="button" ${ae(B.interaction.hsva)}>
            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${ae(B.interaction.cmyk)}>

            <input :ref="save" class="pcr-save" value="${se("btn:save")}" type="button" ${ae(B.interaction.save)} aria-label="${se("aria:btn:save")}">
            <input :ref="cancel" class="pcr-cancel" value="${se("btn:cancel")}" type="button" ${ae(B.interaction.cancel)} aria-label="${se("aria:btn:cancel")}">
            <input :ref="clear" class="pcr-clear" value="${se("btn:clear")}" type="button" ${ae(B.interaction.clear)} aria-label="${se("aria:btn:clear")}">
          </div>
        </div>
      </div>
    `),ie=le.interaction;return ie.options.find(re=>!re.hidden&&!re.classList.add("active")),ie.type=()=>ie.options.find(re=>re.classList.contains("active")),le})(this),L.useAsButton&&(this._root.button=L.el),L.container.appendChild(this._root.root)}_finalBuild(){const L=this.options,N=this._root;if(L.container.removeChild(N.root),L.inline){const B=L.el.parentElement;L.el.nextSibling?B.insertBefore(N.app,L.el.nextSibling):B.appendChild(N.app)}else L.container.appendChild(N.app);L.useAsButton?L.inline&&L.el.remove():L.el.parentNode.replaceChild(N.root,L.el),L.disabled&&this.disable(),L.comparison||(N.button.style.transition="none",L.useAsButton||(N.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const L=this,N=this.options.components,B=(L.options.sliders||"v").repeat(2),[Y,U]=B.match(/^[vh]+$/g)?B:[],F=()=>this._color||(this._color=this._lastColor.clone()),K={palette:T({element:L._root.palette.picker,wrapper:L._root.palette.palette,onstop:()=>L._emit("changestop","slider",L),onchange(ee,ae){if(!N.palette)return;const se=F(),{_root:le,options:ie}=L,{lastColor:re,currentColor:he}=le.preview;L._recalc&&(se.s=100*ee,se.v=100-100*ae,se.v<0&&(se.v=0),L._updateOutput("slider"));const ge=se.toRGBA().toString(0);this.element.style.background=ge,this.wrapper.style.background=`
                        linear-gradient(to top, rgba(0, 0, 0, ${se.a}), transparent),
                        linear-gradient(to left, hsla(${se.h}, 100%, 50%, ${se.a}), rgba(255, 255, 255, ${se.a}))
                    `,ie.comparison?ie.useAsButton||L._lastColor||re.style.setProperty("--pcr-color",ge):(le.button.style.setProperty("--pcr-color",ge),le.button.classList.remove("clear"));const me=se.toHEXA().toString();for(const{el:Ie,color:pe}of L._swatchColors)Ie.classList[me===pe.toHEXA().toString()?"add":"remove"]("pcr-active");he.style.setProperty("--pcr-color",ge)}}),hue:T({lock:U==="v"?"h":"v",element:L._root.hue.picker,wrapper:L._root.hue.slider,onstop:()=>L._emit("changestop","slider",L),onchange(ee){if(!N.hue||!N.palette)return;const ae=F();L._recalc&&(ae.h=360*ee),this.element.style.backgroundColor=`hsl(${ae.h}, 100%, 50%)`,K.palette.trigger()}}),opacity:T({lock:Y==="v"?"h":"v",element:L._root.opacity.picker,wrapper:L._root.opacity.slider,onstop:()=>L._emit("changestop","slider",L),onchange(ee){if(!N.opacity||!N.palette)return;const ae=F();L._recalc&&(ae.a=Math.round(100*ee)/100),this.element.style.background=`rgba(0, 0, 0, ${ae.a})`,K.palette.trigger()}}),selectable:P({elements:L._root.interaction.options,className:"active",onchange(ee){L._representation=ee.target.getAttribute("data-type").toUpperCase(),L._recalc&&L._updateOutput("swatch")}})};this._components=K}_bindEvents(){const{_root:L,options:N}=this,B=[s(L.interaction.clear,"click",()=>this._clearColor()),s([L.interaction.cancel,L.preview.lastColor],"click",()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")}),s(L.interaction.save,"click",()=>{!this.applyColor()&&!N.showAlways&&this.hide()}),s(L.interaction.result,["keyup","input"],Y=>{this.setColor(Y.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),Y.stopImmediatePropagation()}),s(L.interaction.result,["focus","blur"],Y=>{this._recalc=Y.type==="blur",this._recalc&&this._updateOutput(null)}),s([L.palette.palette,L.palette.picker,L.hue.slider,L.hue.picker,L.opacity.slider,L.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0,{passive:!0})];if(!N.showAlways){const Y=N.closeWithKey;B.push(s(L.button,"click",()=>this.isOpen()?this.hide():this.show()),s(document,"keyup",U=>this.isOpen()&&(U.key===Y||U.code===Y)&&this.hide()),s(document,["touchstart","mousedown"],U=>{this.isOpen()&&!f(U).some(F=>F===L.app||F===L.button)&&this.hide()},{capture:!0}))}if(N.adjustableNumbers){const Y={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};v(L.interaction.result,(U,F,K)=>{const ee=Y[this.getColorRepresentation().toLowerCase()];if(ee){const ae=ee[K],se=U+(ae>=100?1e3*F:F);return se<=0?0:Number((se<ae?se:ae).toPrecision(3))}return U})}if(N.autoReposition&&!N.inline){let Y=null;const U=this;B.push(s(window,["scroll","resize"],()=>{U.isOpen()&&(N.closeOnScroll&&U.hide(),Y===null?(Y=setTimeout(()=>Y=null,100),requestAnimationFrame(function F(){U._rePositioningPicker(),Y!==null&&requestAnimationFrame(F)})):(clearTimeout(Y),Y=setTimeout(()=>Y=null,100)))},{capture:!0}))}this._eventBindings=B}_rePositioningPicker(){const{options:L}=this;if(!L.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:L.position})){const N=this._root.app,B=N.getBoundingClientRect();N.style.top=(window.innerHeight-B.height)/2+"px",N.style.left=(window.innerWidth-B.width)/2+"px"}}_updateOutput(L){const{_root:N,_color:B,options:Y}=this;if(N.interaction.type()){const U=`to${N.interaction.type().getAttribute("data-type")}`;N.interaction.result.value=typeof B[U]=="function"?B[U]().toString(Y.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",B,L,this)}_clearColor(L=!1){const{_root:N,options:B}=this;B.useAsButton||N.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),N.button.classList.add("clear"),B.showAlways||this.hide(),this._lastColor=null,this._initializingActive||L||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(L){const{values:N,type:B,a:Y}=y(L),{lockOpacity:U}=this.options,F=Y!==void 0&&Y!==1;return N&&N.length===3&&(N[3]=void 0),{values:!N||U&&F?null:N,type:B}}_t(L){return this.options.i18n[L]||Q.I18N_DEFAULTS[L]}_emit(L,...N){this._eventListener[L].forEach(B=>B(...N,this))}on(L,N){return this._eventListener[L].push(N),this}off(L,N){const B=this._eventListener[L]||[],Y=B.indexOf(N);return~Y&&B.splice(Y,1),this}addSwatch(L){const{values:N}=this._parseLocalColor(L);if(N){const{_swatchColors:B,_root:Y}=this,U=I(...N),F=l(`<button type="button" style="--pcr-color: ${U.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return Y.swatches.appendChild(F),B.push({el:F,color:U}),this._eventBindings.push(s(F,"click",()=>{this.setHSVA(...U.toHSVA(),!0),this._emit("swatchselect",U),this._emit("change",U,"swatch",this)})),!0}return!1}removeSwatch(L){const N=this._swatchColors[L];if(N){const{el:B}=N;return this._root.swatches.removeChild(B),this._swatchColors.splice(L,1),!0}return!1}applyColor(L=!1){const{preview:N,button:B}=this._root,Y=this._color.toRGBA().toString(0);return N.lastColor.style.setProperty("--pcr-color",Y),this.options.useAsButton||B.style.setProperty("--pcr-color",Y),B.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||L||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach(L=>u(...L)),Object.keys(this._components).forEach(L=>this._components[L].destroy())}destroyAndRemove(){this.destroy();const{root:L,app:N}=this._root;L.parentElement&&L.parentElement.removeChild(L),N.parentElement.removeChild(N),Object.keys(this).forEach(B=>this[B]=null)}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(L=360,N=0,B=0,Y=1,U=!1){const F=this._recalc;if(this._recalc=!1,L<0||L>360||N<0||N>100||B<0||B>100||Y<0||Y>1)return!1;this._color=I(L,N,B,Y);const{hue:K,opacity:ee,palette:ae}=this._components;return K.update(L/360),ee.update(Y),ae.update(N/100,1-B/100),U||this.applyColor(),F&&this._updateOutput(),this._recalc=F,!0}setColor(L,N=!1){if(L===null)return this._clearColor(N),!0;const{values:B,type:Y}=this._parseLocalColor(L);if(B){const U=Y.toUpperCase(),{options:F}=this._root.interaction,K=F.find(ee=>ee.getAttribute("data-type")===U);if(K&&!K.hidden)for(const ee of F)ee.classList[ee===K?"add":"remove"]("active");return!!this.setHSVA(...B,N)&&this.setColorRepresentation(U)}return!1}setColorRepresentation(L){return L=L.toUpperCase(),!!this._root.interaction.options.find(N=>N.getAttribute("data-type").startsWith(L)&&!N.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}};Qe(Q,"utils",a),Qe(Q,"version","1.9.1"),Qe(Q,"I18N_DEFAULTS",{"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"}),Qe(Q,"DEFAULT_OPTIONS",{appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"}),Qe(Q,"create",L=>new Q(L));let V=Q;return r=r.default})())}(Is)),Is.exports}var Qx=Vx();const Zx=st(Qx);class Jx{constructor(e){this.app=e,this.eventBus=e.eventBus,this.settings=e.settings,this.pickrs={},["node","stroke","edge","face","label","background","grid"].forEach(r=>{const a=`#${r}-color`;this.pickrs[r]=Zx.create({el:a,theme:"nano",default:this.settings[`${r}_color`],components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!0,rgba:!0,input:!0,save:!0}}})})}init(){for(const e in this.pickrs){const t=this.pickrs[e];t.on("change",r=>{const a=r.toRGBA().toString();t.setColor(a),this.eventBus.emit("updateSetting",{key:`${e}_color`,value:a})})}}setColor(e,t){const r=this.pickrs[e];r&&(r.setColor(t),this.eventBus.emit("updateSetting",{key:`${e}_color`,value:t}))}getColor(e){const t=this.pickrs[e];return t?t.getColor().toRGBA().toString():null}resetColors(){for(const e in this.pickrs)this.setColor(e,this.settings[`${e}_color`])}}class eS{constructor(e){this.app=e,this.graphManager=e.graphManager,this.mainCanvas=e._canvas._canvas.main,this.nodeCanvas=e._canvas._canvas.node,this.edgeCanvas=e._canvas._canvas.edge,this.faceCanvas=e._canvas._canvas.face,this.settings=e.settings,this.rect=e.rect}drawArrowhead(e,t,r,a,o,s){s.beginPath(),s.moveTo(e,t),s.lineTo(e-a*Math.cos(r-Math.PI/6),t-a*Math.sin(r-Math.PI/6)),s.lineTo(e-a*Math.cos(r+Math.PI/6),t-a*Math.sin(r+Math.PI/6)),s.closePath(),s.fillStyle=o,s.fill()}drawLabel(e,t,r,a,o,s){t!=null&&t.trim()&&(e.fillStyle=o||"#000",e.font=s,e.textAlign="center",e.textBaseline="middle",e.fillText(t,r,a))}drawFaces(e,t,r,a,o,s){const u=e.ctx;u.clearRect(0,0,e.canvas.width,e.canvas.height),t.forEachFace((l,c)=>{const f=c.nodes.map(v=>{const b=t.getNodeAttributes(v);return[b.x,b.y]}),p={x:di(f,v=>v[0]),y:di(f,v=>v[1])};if(f){u.fillStyle=c.selected?"#FFA50055":c.color,u.beginPath(),u.moveTo(f[0][0],f[0][1]);for(let v=1;v<f.length;v++)u.lineTo(f[v][0],f[v][1]);u.closePath(),u.fill()}r.faceLabel&&this.drawLabel(u,c.label,p.x,p.y,c.labelColor,a)})}drawEdges(e,t,r,a,o,s,u,l){const c=e.ctx;c.clearRect(0,0,e.canvas.width,e.canvas.height),t.forEachEdge((f,p,v,b,E,S)=>{const A=S.x-E.x,_=S.y-E.y,w=Math.hypot(A,_),k=A/w*(12+a),m=_/w*(12+a),C=t.hasEdge(b,v),$=C?E.x+k:E.x,y=C?E.y+m:E.y,I=S.x-k,z=S.y-m;if(c.beginPath(),c.moveTo($,y),c.lineTo(I,z),c.strokeStyle=p.selected?"orange":p.color,c.lineWidth=a,c.stroke(),c.closePath(),t.isDirected(f)){const T=Math.atan2(_,A),P=S.x-Math.cos(T)*o/4,O=S.y-Math.sin(T)*o/4;this.drawArrowhead(P,O,T,14+a,p.selected?"orange":p.color,c)}if((r.edgeLabel||r.weightLabel)&&(p.label||p.weight!=null)){const T=(E.x+S.x)/2,P=(E.y+S.y)/2,O=-_/w,R=A/w,V=T+O*10+u,Q=P+R*10+l,W=[];r.edgeLabel&&p.label&&W.push(p.label),r.weightLabel&&p.weight!=null&&W.push(p.weight),W.length&&this.drawLabel(c,W.join(", "),V,Q,p.labelColor,s)}})}drawNodes(e,t,r,a,o,s,u,l){const c=e.ctx;c.clearRect(0,0,e.canvas.width,e.canvas.height),t.forEachNode((f,p)=>{c.beginPath(),c.arc(p.x,p.y,a*p.size,0,2*Math.PI),c.fillStyle=p.selected?"orange":p.color,c.fill(),o!==0&&(c.lineWidth=o,c.strokeStyle=p.selected?"orange":p.stroke,c.stroke()),c.closePath(),r.vertexLabel&&this.drawLabel(c,p.label,p.x+u,p.y+l,p.labelColor,s)})}drawGraph(){const e=this.graphManager.graph,t=this.settings,r=+t.edge_size,o=`${t.label_size}px sans-serif`,s=t.label_pos.x,u=t.label_pos.y,l=t.node_radius,c=t.stroke_size;this.drawFaces(this.faceCanvas,e,t,o,s,u),this.drawEdges(this.edgeCanvas,e,t,r,l,o,s,u),this.drawNodes(this.nodeCanvas,e,t,l,c,o,s,u),this.rect.draw()}}class tS{constructor(){this.eventBus=qm,this.appSettings=new Gs(this),this.settings=this.appSettings.settings,this._canvas=new Zw(this),this.canvas=this._canvas.canvas,this.layout=new Wx(this),this.graphManager=new Dx(this,this.settings.historyLimit,this.settings.type),this.rect=new Xx(this),this.graphRenderer=new eS(this),this.menu=new Tx(this,Nx),this.widget=new Kx(this),this.keyHandler=new Lx(this),this.eventHanders=new Mx(this),this.colorPicker=new Jx(this),this.simulation=null,this.nodes=[],this.links=[],this.init()}init(){this.menu.init(),this.appSettings.init(),this.widget.init(),this._canvas.init(),this.rect.init(),this.keyHandler.init(),this.eventHanders.init(),this.initSimulation(),this.loadInitialGraph(),this.colorPicker.init(),this.startAnimationLoop()}initSimulation(){this.nodes=this.graphManager.graph.getNodesForD3(),this.links=this.graphManager.graph.getEdgesForD3(),this.simulation=$m(this.nodes).force("link",Cm(this.links).id(e=>e.id).distance(10).strength(.5)).force("charge",Pm().strength(-300)).force("collide",km(20)).force("center",sm(this.canvas.width/2,this.canvas.height/2)).force("x",Gm(this.canvas.width/2).strength(.05)).force("y",Om(this.canvas.height/1).strength(.05)).velocityDecay(.3).alphaDecay(.02),this.appSettings.settings.forceSimulation||this.simulation.stop()}loadInitialGraph(){this.graphManager.loadHitoryFromLocalStorage()||this.graphManager.generator.clusters(20,20,10)}ticked(){this.nodes.forEach(e=>{this.graphManager.graph.updateNodeAttributes(e.id,t=>({...t,x:e.x,y:e.y}))}),this.eventBus.emit("graph:updated",{type:"tick"})}startSimulation(){this.simulation.alpha(.3).restart()}stopSimulation(){this.simulation.stop()}updateSimulation(){this.nodes.length=0,this.nodes=this.graphManager.graph.getNodesForD3(),this.links.length=0,this.links=this.graphManager.graph.getEdgesForD3(),this.simulation.nodes(this.nodes),this.simulation.force("link").links(this.links),this.appSettings.settings.forceSimulation?this.startSimulation():this.stopSimulation()}updateForce(){const e=this.graphManager.graph;this.nodes.length=0,e.forEachNode((t,r)=>{this.nodes.push({id:Number(t),x:r.x,y:r.y})}),this.links.length=0,e.forEachEdge(function(t,r,a,o,s,u){this.links.push({source:Number(a),target:Number(o)})})}startAnimationLoop(){const e=()=>{let t=!1;this.appSettings.settings.forceSimulation&&(this.simulation.tick(),this.ticked(),t=!0),(this.graphManager.needsRedraw||t)&&this.graphRenderer.drawGraph(),requestAnimationFrame(e)};requestAnimationFrame(e)}}document.addEventListener("DOMContentLoaded",()=>{const n=new tS;window.graphStudio=n,window.addEventListener("resize",()=>{n._canvas.updateCanvasSize(window.innerWidth,window.innerHeight)}),document.querySelectorAll("img").forEach(e=>{e.setAttribute("draggable","false")})});
